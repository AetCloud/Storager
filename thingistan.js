/*

Manyland.js (c) 2013-2020 Philipp Lenssen & Scott Lowe
Thingistan.js (c) 2023-2026 Thingistan
*/
(function(a){Number.prototype.map=function(h,k,l,m){return l+(this-h)/(k-h)*(m-l)};Number.prototype.limit=function(h,k){return Math.min(k,Math.max(h,this))};Number.prototype.round=function(h){h=Math.pow(10,h||0);return Math.round(this*h)/h};Number.prototype.floor=function(){return Math.floor(this)};Number.prototype.ceil=function(){return Math.ceil(this)};Number.prototype.toInt=function(){return this|0};Number.prototype.toRad=function(){return this/180*Math.PI};Number.prototype.toDeg=function(){return this*
180/Math.PI};Object.defineProperty(Array.prototype,"erase",{value:function(h){for(var k=this.length;k--;)this[k]===h&&this.splice(k,1);return this}});Object.defineProperty(Array.prototype,"random",{value:function(h){return this[Math.floor(Math.random()*this.length)]}});Function.prototype.bind=Function.prototype.bind||function(h){if(typeof this!=="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var k=Array.prototype.slice.call(arguments,1),l=this,
m=function(){},n=function(){return l.apply(this instanceof m&&h?this:h,k.concat(Array.prototype.slice.call(arguments)))};m.prototype=this.prototype;n.prototype=new m;return n};a.ml={};a.ig={game:null,debug:null,version:"1.24",global:a,modules:{},resources:[],ready:!1,baked:!1,nocache:"",ua:{},prefix:a.ImpactPrefix||"",lib:"lib/",_current:null,O2907:[],O8150:0,$:function(h){return h.charAt(0)=="#"?document.getElementById(h.substr(1)):document.getElementsByTagName(h)},$new:function(h){return document.createElement(h)},
copy:function(h){if(!h||typeof h!="object"||h instanceof HTMLElement||h instanceof ig.Class)return h;if(h instanceof Array)for(var k=[],l=0,m=h.length;l<m;l++)k[l]=ig.copy(h[l]);else for(l in k={},h)k[l]=ig.copy(h[l]);return k},merge:function(h,k){for(var l in k){var m=k[l];typeof m!="object"||m instanceof HTMLElement||m instanceof ig.Class||m===null?h[l]=m:(h[l]&&typeof h[l]=="object"||(h[l]=m instanceof Array?[]:{}),ig.merge(h[l],m))}return h},ksort:function(h){if(!h||typeof h!="object")return[];
var k=[],l=[],m;for(m in h)k.push(m);k.sort();for(m=0;m<k.length;m++)l.push(h[k[m]]);return l},O7462:function(h,k,l){var m=k.charAt(0).toUpperCase()+k.substr(1);h[k]=h["ms"+m]=h["moz"+m]=h["webkit"+m]=h["o"+m]=l},O4012:function(h,k){var l=k.charAt(0).toUpperCase()+k.substr(1);return h[k]||h["ms"+l]||h["moz"+l]||h["webkit"+l]||h["o"+l]},normalizeVendorAttribute:function(h,k){var l=ig.O4012(h,k);!h[k]&&l&&(h[k]=l)},getImagePixels:function(h,k,l,m,n){var p=ig.$new("canvas");p.width=h.width;p.height=
h.height;var q=p.getContext("2d");ig.System.SCALE.CRISP(p,q);var t=ig.O4012(q,"backingStorePixelRatio")||1;ig.normalizeVendorAttribute(q,"getImageDataHD");var r=h.width/t,w=h.height/t;p.width=Math.ceil(r);p.height=Math.ceil(w);q.drawImage(h,0,0,r,w);return t===1?q.getImageData(k,l,m,n):q.getImageDataHD(k,l,m,n)},module:function(h){if(ig._current)throw"Module '"+ig._current.name+"' defines nothing";if(ig.modules[h]&&ig.modules[h].body)throw"Module '"+h+"' is already defined";ig._current={name:h,requires:[],
loaded:!1,body:null};ig.modules[h]=ig._current;ig.O2907.push(ig._current);return ig},requires:function(){ig._current.requires=Array.prototype.slice.call(arguments);return ig},defines:function(h){ig._current.body=h;ig._current=null;ig.O6903()},O2285:function(h){ig.resources.push(h)},setNocache:function(h){ig.nocache=h?"?"+Date.now():""},log:function(){},assert:function(h,k){},show:function(h,k){},mark:function(h,k){},O5509:function(h,k){ig.modules[h]={name:h,requires:[],loaded:!1,body:null};ig.O8150++;
var l=ig.prefix+ig.lib+h.replace(/\./g,"/")+".js"+ig.nocache,m=ig.$new("script");m.type="text/javascript";m.src=l;m.onload=function(){ig.O8150--;ig._execModules()};m.onerror=function(){throw"Failed to load module "+h+" at "+l+" required from "+k;};ig.$("head")[0].appendChild(m)},_execModules:function(){for(var h=!1,k=0;k<ig.O2907.length;k++){for(var l=ig.O2907[k],m=!0,n=0;n<l.requires.length;n++){var p=l.requires[n];ig.modules[p]?ig.modules[p].loaded||(m=!1):(m=!1,ig.O5509(p,l.name))}m&&l.body&&(ig.O2907.splice(k,
1),l.loaded=!0,l.body(),h=!0,k--)}if(h)ig._execModules();else if(!ig.baked&&ig.O8150==0&&ig.O2907.length!=0){h=[];for(k=0;k<ig.O2907.length;k++){m=[];p=ig.O2907[k].requires;for(n=0;n<p.length;n++)(l=ig.modules[p[n]])&&l.loaded||m.push(p[n]);h.push(ig.O2907[k].name+" (requires: "+m.join(", ")+")")}throw"Unresolved (or circular?) dependencies. Most likely there's a name/path mismatch for one of the listed modules or a previous syntax error prevents a module from loading:\n"+h.join("\n");}},O5660:function(){if(!ig.modules["dom.ready"].loaded){if(!document.body)return setTimeout(ig.O5660,
13);ig.modules["dom.ready"].loaded=!0;ig.O8150--;ig._execModules()}return 0},_boot:function(){document.location.href.match(/\?nocache/)&&ig.setNocache(!0);ig.ua.pixelRatio=a.devicePixelRatio||1;ig.ua.viewport={width:a.innerWidth,height:a.innerHeight};ig.ua.screen={width:a.screen.availWidth*ig.ua.pixelRatio,height:a.screen.availHeight*ig.ua.pixelRatio};ig.ua.iPhone=/iPhone/i.test(navigator.userAgent);ig.ua.iPhone4=ig.ua.iPhone&&2==ig.ua.pixelRatio;ig.ua.iPad=/iPad/i.test(navigator.userAgent)||0<=navigator.userAgent.indexOf("Macintosh")&&
navigator.maxTouchPoints&&3<=navigator.maxTouchPoints;ig.ua.android=/android/i.test(navigator.userAgent);ig.ua.mac=-1!=navigator.userAgent.indexOf("Mac OS");ig.ua.chrome=0<=navigator.userAgent.indexOf("Chrome");ig.ua.chromebook=ig.ua.chrome&&0<=navigator.userAgent.indexOf("CrOS");ig.ua.firefox=0<=navigator.userAgent.indexOf("Firefox");ig.ua.safari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);ig.ua.windowsPhone=0<=navigator.userAgent.indexOf("Windows Phone");var h=ig.ua,k=-1,l=a.navigator.userAgent,
m=l.indexOf("MSIE "),n=l.indexOf("Trident/");0<m?k=parseInt(l.substring(m+5,l.indexOf(".",m)),10):0<n&&(k=l.indexOf("rv:"),k=parseInt(l.substring(k+3,l.indexOf(".",k)),10));h.iexplorer=!!(-1<k&&k);ig.ua.isIOsUIWebView=/(iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent)||/(iPhone).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent);ig.ua.isKindleSilk=0<=navigator.userAgent.indexOf("Silk");ig.ua.isKindleSilkHdx=ig.ua.isKindleSilk&&!!navigator.userAgent.match(/(KFTHWI|KFTHWA|KFAPWI|KFAPWA)/g);
ig.ua.isKindleHdxWebApp=0<=navigator.userAgent.indexOf("AmazonWebAppPlatform")&&-1==navigator.userAgent.indexOf("Android 2")&&-1==navigator.userAgent.indexOf("Android 4.0");h="undefined"!=typeof document.documentElement.ontouchstart;ig.ua.windowsTablet=0<=navigator.platform.toLowerCase().indexOf("win")&&(0<=navigator.userAgent.toLowerCase().indexOf("touch")||h);h=0<=navigator.userAgent.toLowerCase().indexOf("silk")||0<=navigator.userAgent.indexOf("AmazonWebAppPlatform");ig.ua.kindle=h;ig.ua.steam=
0<=navigator.userAgent.indexOf("manyland-steam");ig.ua.isSteamBigPictureMode=ig.ua.steam&&!!a.isSteamBigPictureMode;a.isSteamBigPictureMode=void 0;ig.ua.iOS=ig.ua.iPhone||ig.ua.iPad||ig.ua.isIOsUIWebView;ig.ua.isAnylandBrowser=0<=navigator.userAgent.indexOf("Anyland Browser");ig.ua.mobile=ig.ua.iOS||ig.ua.android||ig.ua.kindle||ig.ua.windowsPhone;ig.ua.phone=ig.ua.windowsPhone||ig.ua.iPhone||ig.ua.android;ig.ua.isFramed=a!=a.top&&!ig.ua.isIOsUIWebView&&!ig.ua.isKindleHdxWebApp;ig.ua.isAndroidApp=
!1;ig.ua.androidAppVersion=-1;(h=a.location.hash)&&0<=h.indexOf("&isTablet=true")?(h=h.replace("&isTablet=true",""),ig.ua.tablet=!0,localStorage.setItem("isTablet","true")):"true"==localStorage.getItem("isTablet")?ig.ua.tablet=!0:ig.ua.tablet=ig.ua.mobile&&!ig.ua.phone;ig.ua.tablet&&(ig.ua.phone=!1);if(h&&0===h.indexOf("#androidAppVersion="))h=a.location.hash.substr(19),h=parseInt(h),isNaN(h)||(ig.ua.isAndroidApp=!0,ig.ua.androidAppVersion=h,localStorage.setItem("androidAppVersion",ig.ua.androidAppVersion)),
a.location.replace("#");else if(h=localStorage&&localStorage.getItem("androidAppVersion"))ig.ua.isAndroidApp=!0,h=parseInt(h),isNaN(h)||(ig.ua.androidAppVersion=h);ig.ua.shouldGetAds=!1;0===a.location.href.indexOf("http://localhost")&&(ig.ua.shouldGetAds=!1);ig.ua.adWidth=0;ig.ua.adHeight=0;ig.ua.useYollaAds=!0;ig.ua.adPaddingX=0;ig.ua.isDarkMode=a.matchMedia("(prefers-color-scheme: dark)").matches},O6903:function(){ig.modules["dom.ready"]?ig._execModules():(ig._boot(),ig.modules["dom.ready"]={requires:[],
loaded:!1,body:null},ig.O8150++,document.readyState==="complete"?ig.O5660():(document.addEventListener("DOMContentLoaded",ig.O5660,!1),a.addEventListener("load",ig.O5660,!1)))}};ig.normalizeVendorAttribute(a,"requestAnimationFrame");if(a.requestAnimationFrame){var b=1,c={};a.ig.O3443=function(h){var k=b++;c[k]=!0;var l=function(){c[k]&&(a.requestAnimationFrame(l),h())};a.requestAnimationFrame(l);return k};a.ig.O2170=function(h){delete c[h]}}else a.ig.O3443=function(h){return a.setInterval(h,1E3/60)},
a.ig.O2170=function(h){a.clearInterval(h)};ig.normalizeVendorAttribute(a,"requestAnimationFrame");a.requestAnimationFrame?(b=1,c={},a.ig.O3443=function(h){var k=b++;c[k]=!0;var l=function(){c[k]&&(a.requestAnimationFrame(l),h())};a.requestAnimationFrame(l);return k},a.ig.O2170=function(h){delete c[h]}):(a.ig.O3443=function(h){return a.setInterval(h,1E3/60)},a.ig.O2170=function(h){a.clearInterval(h)});var d=!1,e=/xyz/.test(function(){xyz})?/\bparent\b/:/.*/,f=0;a.ig.Class=function(){};var g=function(h){var k=
this.prototype,l={},m;for(m in h)typeof h[m]=="function"&&typeof k[m]=="function"&&e.test(h[m])?(l[m]=k[m],k[m]=function(n,p){return function(){var q=this.parent;this.parent=l[n];var t=p.apply(this,arguments);this.parent=q;return t}}(m,h[m])):k[m]=h[m]};a.ig.Class.extend=function(h){function k(){if(!d){if(this.O7247){var p=this.O7247.apply(this,arguments);if(p)return p}for(var q in this)typeof this[q]=="object"&&(this[q]=ig.copy(this[q]));this.init&&this.init.apply(this,arguments)}return this}var l=
this.prototype;d=!0;var m=new this;d=!1;for(var n in h)typeof h[n]=="function"&&typeof l[n]=="function"&&e.test(h[n])?m[n]=function(p,q){return function(){var t=this.parent;this.parent=l[p];var r=q.apply(this,arguments);this.parent=t;return r}}(n,h[n]):m[n]=h[n];k.prototype=m;k.prototype.constructor=k;k.extend=a.ig.Class.extend;k.inject=g;k.classId=m.classId=++f;return k};a.ImpactMixin&&ig.merge(ig,a.ImpactMixin)})(window);ig.baked=!0;
ig.module("impact.image").defines(function(){ig.Image=ig.Class.extend({data:null,width:0,height:0,loaded:!1,failed:!1,O7281:null,path:"",O7247:function(a){return null==a?null:ig.Image.cache[a]||null},init:function(a,b,c,d){this._scale=ig.system.scale;if(d)this.O8097(d);else{this.mlandCallback=b;this.mlandCallbackContext=c;if(null==a)return null;this.path=a;this.load()}},load:function(a){this.loaded?a&&a(this.path,!0):(!this.loaded&&ig.ready?(this.O7281=a||null,this.data=new Image,this.data.crossOrigin=
"anonymous",this.data.onload=this.onload.bind(this),this.data.onerror=this.onerror.bind(this),this.data.src=ig.prefix+this.path+ig.nocache):ig.O2285(this),ig.Image.cache[this.path]=this)},O8097:function(a){this.data=a;this.width=this.data.width/ig.system.scale;this.height=this.data.height/ig.system.scale;this.loaded=!0;this.load()},reload:function(){this.loaded=!1;this.data=new Image;this.data.crossOrigin="anonymous";this.data.onload=this.onload.bind(this);this.data.src=this.path+"?"+Date.now()},
onload:function(a){this.width=this.data.width;this.height=this.data.height;this.O1537(ig.system.scale);this.loaded=!0;this.O7281&&this.O7281(this.path,!0);this.mlandCallback&&this.mlandCallback.call(this.mlandCallbackContext,this.data)},onerror:function(a){this.failed=!0;console.log(a);console.log("error loading image:"+this.path);this.O7281&&this.O7281(this.path,!1);this.mlandCallback&&this.mlandCallback.call(this.mlandCallbackContext,null)},resize:function(a){var b=this.width*a,c=this.height*a,
d=document.createElement("canvas");d.width=this.width;d.height=this.height;d=d.getContext("2d");try{d.drawImage(this.data,0,0,this.width,this.height,0,0,this.width,this.height)}catch(n){throw Error("Error resizing image : "+this.path+" - "+typeof this.data);}d=d.getImageData(0,0,this.width,this.height);var e=document.createElement("canvas");e.width=b;e.height=c;for(var f=e.getContext("2d"),g=f.getImageData(0,0,b,c),h=0;h<c;h++)for(var k=0;k<b;k++){var l=4*(Math.floor(h/a)*this.width+Math.floor(k/
a)),m=4*(h*b+k);g.data[m]=d.data[l];g.data[m+1]=d.data[l+1];g.data[m+2]=d.data[l+2];g.data[m+3]=d.data[l+3]}f.putImageData(g,0,0);this.data=e},O1537:function(a){var b=this.width*a;a*=this.height;var c=document.createElement("canvas");c.width=b;c.height=a;var d=c.getContext("2d");d.imageSmoothingEnabled=!1;d.mozImageSmoothingEnabled=!1;d.oImageSmoothingEnabled=!1;d.webkitImageSmoothingEnabled=!1;d.drawImage(this.data,0,0,b,a);this.data=c},draw:function(a,b,c,d,e,f){if(this.loaded){var g=ig.system.scale;
e=(e?e:this.width)*g;f=(f?f:this.height)*g;ig.system.context.drawImage(this.data,c?c*g:0,d?d*g:0,e,f,ig.system.O8551(a),ig.system.O8551(b),e,f);ig.Image.drawCount++}},O5334:function(a,b,c,d,e,f,g){e=e?e:d;if(this.loaded&&!(d>this.width||e>this.height)){var h=ig.system.scale,k=Math.floor(d*h),l=Math.floor(e*h),m=f?-1:1,n=g?-1:1;if(f||g)ig.system.context.save(),ig.system.context.scale(m,n);ig.system.context.drawImage(this.data,Math.floor(c*d)%this.width*h,Math.floor(c*d/this.width)*e*h,k,l,ig.system.O8551(a)*
m-(f?k:0),ig.system.O8551(b)*n-(g?l:0),k,l);(f||g)&&ig.system.context.restore();ig.Image.drawCount++}},O9475:function(a,b,c,d,e,f,g,h){if(this.loaded){var k=ig.system.scale;ig.system.context.drawImage(this.data,e?e*k:0,f?f*k:0,g*k,h*k,ig.system.O8551(a),ig.system.O8551(b),c*k,d*k);ig.Image.drawCount++}}});ig.Image.drawCount=0;ig.Image.cache={};ig.Image.O6636=function(){for(var a in ig.Image.cache)ig.Image.cache[a].reload()}});ig.baked=!0;
ig.module("impact.font").requires("impact.image").defines(function(){ig.Font=ig.Image.extend({widthMap:[],indices:[],firstChar:32,alpha:1,O3540:1,O6086:0,onload:function(a){this.O1288(this.data);this.parent(a);this.height-=2},O2880:function(a){if(a.indexOf("\n")!==-1){a=a.split("\n");for(var b=0,c=0;c<a.length;c++)b=Math.max(b,this.O5033(a[c]));return b}return this.O5033(a)},O5033:function(a){for(var b=0,c=0;c<a.length;c++)b+=this.widthMap[a.charCodeAt(c)-this.firstChar];a.length>0&&(b+=this.O3540*
(a.length-1));return b},O8455:function(a){return a.split("\n").length*(this.height+this.O6086)},draw:function(a,b,c,d){typeof a!="string"&&(a=a.toString());if(a.indexOf("\n")!==-1){a=a.split("\n");for(var e=this.height+this.O6086,f=0;f<a.length;f++)this.draw(a[f],b,c+f*e,d)}else{if(d==ig.Font.ALIGN.RIGHT||d==ig.Font.ALIGN.CENTER)f=this.O5033(a),b-=d==ig.Font.ALIGN.CENTER?f/2:f;this.alpha!==1&&(ig.system.context.globalAlpha=this.alpha);for(f=0;f<a.length;f++)d=a.charCodeAt(f),b+=this.O6276(d-this.firstChar,
b,c);this.alpha!==1&&(ig.system.context.globalAlpha=1);ig.Image.drawCount+=a.length}},O6276:function(a,b,c){if(!this.loaded||a<0||a>=this.indices.length)return 0;var d=ig.system.scale,e=this.widthMap[a]*d,f=(this.height-2)*d;ig.system.context.drawImage(this.data,this.indices[a]*d,0,e,f,ig.system.O8551(b),ig.system.O8551(c),e,f);return this.widthMap[a]+this.O3540},O1288:function(a){this.widthMap=[];this.indices=[];for(var b=ig.getImagePixels(a,0,a.height-1,a.width,1),c=0,d=0;d<a.width;d++){var e=d*
4+3;b.data[e]>127?c++:b.data[e]<128&&c&&(this.widthMap.push(c),this.indices.push(d-c),c=0)}this.widthMap.push(c);this.indices.push(d-c)}});ig.Font.ALIGN={LEFT:0,RIGHT:1,CENTER:2}});ig.baked=!0;
ig.module("impact.sound").defines(function(){ig.Sound=ig.Sound||{};ig.Sound.useWebAudio=!(!window.AudioContext&&!window.webkitAudioContext);ig.Sound.WebAudioSource=ig.Class.extend({sources:[],gain:null,buffer:null,_loop:!1,init:function(){this.sources=[];this.gain=ig.O4534.audioContext.createGain();this.gain.connect(ig.O4534.audioContext.destination)},play:function(){this.buffer&&ig.O4534.audioContext.state!=="suspended"&&this._playSource()},_playSource:function(){var b=ig.O4534.audioContext.createBufferSource();
b.buffer=this.buffer;b.connect(this.gain);b.loop=this._loop;var c=this;this.sources.push(b);b.onended=function(){var d=c.sources.indexOf(b);d>-1&&c.sources.splice(d,1)};b.start?b.start(0):b.noteOn(0)},pause:function(){for(var b=0;b<this.sources.length;b++)try{this.sources[b].stop?this.sources[b].stop():this.sources[b].noteOff(0)}catch(c){}},O9856:function(){return this._loop},O9596:function(b){this._loop=b;for(var c=0;c<this.sources.length;c++)this.sources[c].loop=b},O9525:function(){return this.gain.gain.value},
setVolume:function(b){this.gain.gain.value=b}});Object.defineProperty&&(Object.defineProperty(ig.Sound.WebAudioSource.prototype,"loop",{get:ig.Sound.WebAudioSource.prototype.O9856,set:ig.Sound.WebAudioSource.prototype.O9596}),Object.defineProperty(ig.Sound.WebAudioSource.prototype,"volume",{get:ig.Sound.WebAudioSource.prototype.O9525,set:ig.Sound.WebAudioSource.prototype.setVolume}));ig.O3415=ig.Class.extend({clips:{},volume:1,format:null,audioContext:null,boundWebAudioUnlock:null,init:function(){if(ig.Sound.enabled&&
window.Audio){for(var b=new Audio,c=0;c<ig.Sound.use.length;c++){var d=ig.Sound.use[c];if(!ig.ua.safari||d.ext!=="ogg"){var e=b.canPlayType(d.mime);if(e==="probably"){this.format=d;break}else e!=="maybe"||this.format||(this.format=d)}}this.format||(ig.Sound.enabled=!1);b=!(!window.AudioContext&&!window.webkitAudioContext);window.location.search.indexOf("forceHTML5Audio=1")!==-1&&(b=!1);ig.Sound.enabled&&b&&(this.audioContext=new (window.AudioContext||window.webkitAudioContext),this.boundWebAudioUnlock=
this.unlockWebAudio.bind(this),b=ig.system&&ig.system.canvas?ig.system.canvas:document,b.addEventListener("touchstart",this.boundWebAudioUnlock,!1),b.addEventListener("mousedown",this.boundWebAudioUnlock,!1))}else ig.Sound.enabled=!1},unlockWebAudio:function(){var b=ig.system&&ig.system.canvas?ig.system.canvas:document;b.removeEventListener("touchstart",this.boundWebAudioUnlock,!1);b.removeEventListener("mousedown",this.boundWebAudioUnlock,!1);this.audioContext.state==="suspended"&&this.audioContext.resume().then(function(){}).catch(function(d){});
b=this.audioContext.createBuffer(1,1,22050);var c=this.audioContext.createBufferSource();c.buffer=b;c.connect(this.audioContext.destination);c.start?c.start(0):c.noteOn(0)},load:function(b,c,d){return c&&this.audioContext?this.loadWebAudio(b,c,d):this.loadHTML5Audio(b,c,d)},loadWebAudio:function(b,c,d){c=ig.prefix+b.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[b])return this.clips[b];var e=new ig.Sound.WebAudioSource;this.clips[b]=e;var f=new XMLHttpRequest;f.open("GET",c,!0);f.responseType=
"arraybuffer";var g=this;f.onload=function(h){f.status!==200?d&&d(b,!1,h):g.audioContext.decodeAudioData(f.response,function(k){e.buffer=k;d&&d(b,!0,h)},function(k){d&&d(b,!1,k)})};f.onerror=function(h){d&&d(b,!1,h)};f.send();return e},loadHTML5Audio:function(b,c,d){var e=ig.prefix+b.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[b]){if(this.clips[b]instanceof ig.Sound.WebAudioSource)return this.clips[b];if(c&&this.clips[b].length<ig.Sound.channels)for(c=this.clips[b].length;c<ig.Sound.channels;c++){var f=
new Audio(e);f.load();this.clips[b].push(f)}return this.clips[b][0]}var g=new Audio(e);d&&(ig.ua&&ig.ua.mobile?setTimeout(function(){d(b,!0,null)},0):(g.addEventListener("canplaythrough",function l(k){g.removeEventListener("canplaythrough",l,!1);d(b,!0,k)},!1),g.addEventListener("error",function(k){d(b,!1,k)},!1)));g.preload="auto";g.load();this.clips[b]=[g];if(c)for(c=1;c<ig.Sound.channels;c++)f=new Audio(e),f.load(),this.clips[b].push(f);return g},get:function(b){b=this.clips[b];if(!b)return null;
if(b instanceof ig.Sound.WebAudioSource)return b;if(Array.isArray(b)&&b.length>0){for(var c=0;c<b.length;c++){var d=b[c];if(d&&(d.paused||d.ended))return d.ended&&(d.O7485=0),d}b[0].pause();b[0].O7485=0;return b[0]}return null},stopAll:function(){for(var b in this.clips){var c=this.clips[b];if(c instanceof ig.Sound.WebAudioSource)try{c.pause()}catch(e){}else if(c&&c.length)for(var d=0;d<c.length;d++)if(c[d])try{c[d].pause(),c[d].O7485=0}catch(e){}}}});ig.Music=ig.Class.extend({tracks:[],O3709:{},
O1674:null,O8012:0,random:!1,_volume:1,_loop:!1,_fadeInterval:0,O4971:null,O2131:null,init:function(){this.O2131=this.O6135.bind(this);Object.defineProperty?(Object.defineProperty(this,"volume",{get:this.O9525.bind(this),set:this.setVolume.bind(this)}),Object.defineProperty(this,"loop",{get:this.O9856.bind(this),set:this.O9596.bind(this)})):this.__defineGetter__&&(this.__defineGetter__("volume",this.O9525.bind(this)),this.__defineSetter__("volume",this.setVolume.bind(this)),this.__defineGetter__("loop",
this.O9856.bind(this)),this.__defineSetter__("loop",this.O9596.bind(this)))},add:function(b,c){ig.Sound.enabled&&(b=ig.O4534.load(b instanceof ig.Sound?b.path:b,!1),b.loop=this._loop,b.volume=this._volume,b.addEventListener("ended",this.O2131,!1),this.tracks.push(b),c&&(this.O3709[c]=b),this.O1674||(this.O1674=b))},next:function(){this.tracks.length&&(this.stop(),this.O8012=this.random?Math.floor(Math.random()*this.tracks.length):(this.O8012+1)%this.tracks.length,this.O1674=this.tracks[this.O8012],
this.play())},pause:function(){this.O1674&&this.O1674.pause()},stop:function(){this.O1674&&(this.O1674.pause(),this.O1674.O7485=0)},play:function(b){if(ig.game.settings.doPlaySound){if(b&&this.O3709[b])b=this.O3709[b],b!=this.O1674&&(this.stop(),this.O1674=b);else if(!this.O1674)return;this.O1674.play()}},O9856:function(){return this._loop},O9596:function(b){this._loop=b;for(var c in this.tracks)this.tracks[c].loop=b},O9525:function(){return this._volume},setVolume:function(b){this._volume=b.limit(0,
1);for(var c in this.tracks)this.tracks[c].volume=this._volume},fadeOut:function(b){this.O1674&&(clearInterval(this._fadeInterval),this.O7337=new ml.Timer(b),this._fadeInterval=setInterval(this.O1894.bind(this),50))},O1894:function(){var b=this.O7337.delta().map(-this.O7337.target,0,1,0).limit(0,1)*this._volume;.01>=b?(this.stop(),this.O1674.volume=this._volume,clearInterval(this._fadeInterval)):this.O1674.volume=b},O6135:function(){this._loop?this.play():this.next()}});var a=ig.Sound.WebAudioSource;
ig.Sound=ig.Class.extend({path:"",volume:1,O1820:null,O8778:!0,_loop:!1,init:function(b,c){this.path=b;this.O8778=c!==!1;Object.defineProperty&&Object.defineProperty(this,"loop",{get:this.O9856.bind(this),set:this.O9596.bind(this)});this.load()},O9856:function(){return this._loop},O9596:function(b){this._loop=b;this.O1820&&(this.O1820.loop=b)},load:function(b){ig.Sound.enabled?ig.ready?ig.O4534.load(this.path,this.O8778,b):ig.O2285(this):b&&b(this.path,!0)},play:function(){ig.Sound.enabled&&(this.O1820=
ig.O4534.get(this.path),this.O1820.loop=this._loop,this.O1820.volume=ig.O4534.volume*this.volume,this.O1820.play())},stop:function(){this.O1820&&(this.O1820.pause(),this.O1820.O7485!==void 0&&(this.O1820.O7485=0))}});ig.Sound.FORMAT={MP3:{ext:"mp3",mime:"audio/mpeg"},M4A:{ext:"m4a",mime:"audio/mp4; codecs=mp4a"},OGG:{ext:"ogg",mime:"audio/ogg; codecs=vorbis"},WEBM:{ext:"webm",mime:"audio/webm; codecs=vorbis"},CAF:{ext:"caf",mime:"audio/x-caf"}};ig.Sound.use=[ig.Sound.FORMAT.OGG,ig.Sound.FORMAT.MP3];
ig.Sound.channels=!ig.ua.safari||window.AudioContext||window.webkitAudioContext?4:2;ig.Sound.enabled=!0;ig.Sound.WebAudioSource=a;ig.Sound.useWebAudio=!(!window.AudioContext&&!window.webkitAudioContext)});ig.baked=!0;
ig.module("impact.loader").requires("impact.font","impact.sound").defines(function(){ig.Loader=ig.Class.extend({resources:[],gameClass:null,status:0,done:!1,_unloaded:[],O8638:0,O5590:0,O8849:null,init:function(a,b){this.gameClass=a;this.resources=b;this.O8849=this.O4780.bind(this);for(a=0;a<this.resources.length;a++)this._unloaded.push(this.resources[a].path);window.matchMedia("(prefers-color-scheme: dark)").matches&&(ig.ua.isDarkMode=!0)},load:function(){ig.system.clear(ig.ua.isDarkMode?"#000":
"#fff");if(this.resources.length){for(var a=0;a<this.resources.length;a++)this.O1590(this.resources[a]);this.O5590=setInterval(this.draw.bind(this),16)}else this.end()},O1590:function(a){a.load(this.O8849)},end:function(){this.done||(this.done=!0,clearInterval(this.O5590),ig.system.setGame(this.gameClass))},draw:function(){this.O8638+=(this.status-this.O8638)/5;var a=ig.system.scale,b=(ig.system.width*.6).floor(),c=(ig.system.height*.1).floor(),d=(ig.system.width*.5-b/2).floor(),e=(ig.system.height*
.5-c/2).floor();ig.system.context.fillStyle=ig.ua.isDarkMode?"#000":"#fff";ig.system.context.fillRect(0,0,ig.system.width,ig.system.height);ig.system.context.fillStyle=ig.ua.isDarkMode?"#000":"#fff";ig.system.context.fillRect(d*a,e*a,b*a,c*a);ig.system.context.fillStyle=ig.ua.isDarkMode?"#000":"#fff";ig.system.context.fillRect(d*a+a,e*a+a,b*a-a-a,c*a-a-a);ig.system.context.fillStyle=ig.ua.isDarkMode?"#000":"#fff";ig.system.context.fillRect(d*a,e*a,b*a*this.O8638,c*a)},O4780:function(a,b){if(b)this._unloaded.erase(a);
else throw"Failed to load resource: "+a;this.status=1-this._unloaded.length/this.resources.length;this._unloaded.length==0&&setTimeout(this.end.bind(this),250)}})});ig.baked=!0;
ig.module("impact.timer").defines(function(){ig.Timer=ig.Class.extend({target:0,base:0,last:0,pausedAt:0,init:function(a){this.last=this.base=ig.Timer.time;this.target=a||0},set:function(a){this.target=a||0;this.base=ig.Timer.time;this.pausedAt=0},reset:function(){this.base=ig.Timer.time;this.pausedAt=0},tick:function(){var a=ig.Timer.time-this.last;this.last=ig.Timer.time;return this.pausedAt?0:a},delta:function(){return(this.pausedAt||ig.Timer.time)-this.base-this.target},pause:function(){this.pausedAt||
(this.pausedAt=ig.Timer.time)},unpause:function(){this.pausedAt&&(this.base+=ig.Timer.time-this.pausedAt,this.pausedAt=0)}});ig.Timer._last=0;ig.Timer.time=Number.MIN_VALUE;ig.Timer.timeScale=1;ig.Timer.maxStep=.05;ig.Timer.step=function(){var a=Date.now();ig.Timer.time+=Math.min((a-ig.Timer._last)/1E3,ig.Timer.maxStep)*ig.Timer.timeScale;ig.Timer._last=a}});ig.baked=!0;
ig.module("mlframe.timer").defines(function(){ml.Timer=function(a){this.pausedAt=this.last=this.base=this.target=0;this.last=this.base=ml.Timer.prototype.time;this.target=a||0};ml.Timer.prototype.set=function(a){this.target=a||0;this.base=ml.Timer.prototype.time;this.pausedAt=0};ml.Timer.prototype.reset=function(){this.base=ml.Timer.prototype.time;this.pausedAt=0};ml.Timer.prototype.tick=function(){var a=ml.Timer.prototype.time-this.last;this.last=ml.Timer.prototype.time;return this.pausedAt?0:a};
ml.Timer.prototype.delta=function(){return(this.pausedAt||ml.Timer.prototype.time)-this.base-this.target};ml.Timer.prototype.pause=function(){this.pausedAt||(this.pausedAt=ml.Timer.prototype.time)};ml.Timer.prototype.unpause=function(){this.pausedAt&&(this.base+=ml.Timer.prototype.time-this.pausedAt,this.pausedAt=0)};ml.Timer.prototype._last=0;ml.Timer.prototype.time=0;ml.Timer.prototype.timeScale=1;ml.Timer.prototype.maxStep=.05;ml.Timer.prototype.step=function(){var a=Date.now();ml.Timer.prototype.time+=
Math.min((a-ml.Timer.prototype._last)/1E3,ml.Timer.prototype.maxStep)*ml.Timer.prototype.timeScale;ml.Timer.prototype._last=a}});ig.baked=!0;
ig.module("impact.system").requires("impact.timer","mlframe.timer").defines(function(){ig.System=ig.Class.extend({fps:30,width:320,height:240,widthHalf:160,O2175:120,realWidth:320,O5809:240,scale:1,tick:0,O5728:0,O7638:null,running:!1,delegate:null,clock:null,canvas:null,context:null,init:function(a,b,c,d,e){this.fps=b;this.clock=new ml.Timer;this.canvas=ig.$(a);this.resize(c,d,e);this.context=this.canvas.getContext("2d",{alpha:!1});this.O8551=ig.System.drawMode},resize:function(a,b,c){this.width=
a;this.height=b;this.widthHalf=.5*a;this.O2175=.5*b;this.scale=c||this.scale;this.realWidth=this.width*this.scale;this.O5809=this.height*this.scale;this.realWidthHalf=.5*this.realWidth;this.realHeightHalf=.5*this.O5809;this.canvas.width=this.realWidth;this.canvas.height=this.O5809},setGame:function(a){this.running?this.O7638=a:this.O3998(a)},O3998:function(a){ig.game=new a},O1653:function(){ig.O2170(this.O5728);this.running=!1},O8043:function(){this.O1653();this.O5728=ig.O3443(this.run.bind(this),
this.canvas);this.running=!0},clear:function(a){this.context.fillStyle=a;this.context.fillRect(0,0,this.realWidth,this.O5809)},run:function(){ml.Timer.prototype.step();this.tick=this.clock.tick();ig.game.run();ig.input.O6501();this.O7638&&(this.O3998(this.O7638),this.O7638=null)},O6256:function(){return this.height>this.width},O9756:function(){return this.width>this.height},O8551:null});ig.System.DRAW={AUTHENTIC:function(a){return Math.round(a)*this.scale},SMOOTH:function(a){return Math.round(a*this.scale)},
SUBPIXEL:function(a){return a*this.scale}};ig.System.drawMode=ig.System.DRAW.SMOOTH});ig.baked=!0;
ig.module("impact.input").defines(function(){ig.KEY={MOUSE1:-1,MOUSE2:-3,MOUSE_MIDDLE:-6,MWHEEL_UP:-4,MWHEEL_DOWN:-5,BACKSPACE:8,TAB:9,ENTER:13,PAUSE:19,CAPS:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,FIRE_TV_TOGGLE_PAUSE:179,_0:48,_1:49,_2:50,_3:51,_4:52,_5:53,_6:54,_7:55,_8:56,_9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,
Z:90,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBSTRACT:109,DECIMAL:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SHIFT:16,CTRL:0<=navigator.userAgent.indexOf("Mac OS X")?0<=navigator.userAgent.indexOf("Firefox")?224:91:17,ALT:18,EQUAL:0<=navigator.userAgent.indexOf("Firefox")?61:187,COMMA:188,MINUS:0<=navigator.userAgent.indexOf("Firefox")?
173:189,PERIOD:190,BACKQUOTE:192,BACKSLASH:220,FORWARDSLASH:191,SEMICOLON:0<=navigator.userAgent.indexOf("Firefox")?59:186,APOSTROPHE:192,SINGLE_QUOTE:222,QUESTION:63,SQUAREBRACKET_OPEN:219,SQUAREBRACKET_CLOSE:221,BACKWARDSLASH:220};ig.Input=ig.Class.extend({bindings:{},actions:{},presses:{},locks:{},delayedKeyup:{},O3298:!1,O4180:!1,O3146:!1,mouse:{x:0,y:0},lastWheelTime:0,wheelCooldown:200,accel:{x:0,y:0,z:0},O7946:!1,O4726:function(){if(!this.O3298){this.O3298=!0;var a=this.mousewheel.bind(this);
ig.system.canvas.addEventListener("mousewheel",a,!1);ig.system.canvas.addEventListener("DOMMouseScroll",a,!1);ig.system.canvas.addEventListener("contextmenu",this.contextmenu.bind(this),!1);ig.system.canvas.addEventListener("mousedown",this.keydown.bind(this),!1);ig.system.canvas.addEventListener("mouseup",this.keyup.bind(this),!1);ig.system.canvas.addEventListener("mousemove",this.mousemove.bind(this),!1);ig.system.canvas.addEventListener("touchstart",this.keydown.bind(this),!1);ig.system.canvas.addEventListener("touchend",
this.keyup.bind(this),!1);ig.system.canvas.addEventListener("touchmove",this.mousemove.bind(this),!1)}},O5172:function(){this.O4180||(this.O4180=!0,window.addEventListener("keydown",this.keydown.bind(this),!1),window.addEventListener("keyup",this.keyup.bind(this),!1))},O9223:function(){this.O3146||window.addEventListener("devicemotion",this.devicemotion.bind(this),!1)},mousewheel:function(a){var b=Date.now();b-this.lastWheelTime<this.wheelCooldown?(a.stopPropagation(),a.preventDefault()):(this.lastWheelTime=
b,(b=this.bindings[0<(a.wheelDelta?a.wheelDelta:-1*a.detail)?ig.KEY.MWHEEL_UP:ig.KEY.MWHEEL_DOWN])&&(this.actions[b]=!0,this.presses[b]=!0,this.delayedKeyup[b]=!0,a.stopPropagation(),a.preventDefault()))},mousemove:function(a){for(var b=ig.system.canvas,c=0,d=0;null!=b;)c+=b.offsetLeft,d+=b.offsetTop,b=b.offsetParent;b=a.pageX;var e=a.pageY;a.touches&&(b=a.touches[0].clientX,e=a.touches[0].clientY);this.mouse.x=(b-c)/ig.system.scale;this.mouse.y=(e-d)/ig.system.scale},contextmenu:function(a){this.bindings[ig.KEY.MOUSE2]&&
(a.stopPropagation(),a.preventDefault())},keypress:function(a){a=a||window.event;console.log(String.fromCharCode("undefined"==typeof a.which?a.keyCode:a.which))},O6003:function(a){var b="text password search email number date".split(" ");if(!ig.ua.firefox||!ig.game||!(ig.game.writableDialog&&ig.game.writableDialog.isOpen||ig.game.friendsDialog&&ig.game.friendsDialog.isOpen))return!0;if(!a.readOnly&&!a.disabled){var c=a.tagName.toLowerCase();if(a instanceof HTMLTextAreaElement||"input"==c&&(a=a.type.toLowerCase(),
0<=b.indexOf(a)))return!0}return!1},O1035:function(a,b){if(a.type==b)a=a.keyCode;else switch(a.button){case 1:a=ig.KEY.MOUSE_MIDDLE;break;case 2:a=ig.KEY.MOUSE2;break;default:a=ig.KEY.MOUSE1}return a},keydown:function(a){if(ig.ua.mac&&a.metaKey&&81==a.which)return a.cancelBubble=!1,a.returnValue=!0;if(a.keyCode==ig.KEY.BACKSPACE&&!this.O6003(a.target)||a.keyCode==ig.KEY.TAB&&ig.ua.isSteamBigPictureMode)a.preventDefault();else if("text"!=a.target.type){a.getModifierState&&(this.O7946=a.getModifierState("CapsLock"));
var b=this.O1035(a,"keydown");"touchstart"!=a.type&&"mousedown"!=a.type||this.mousemove(a);ig.game.O9590&&1<=b&&ig.game.O9590.push(b);if(b=this.bindings[b]){this.actions[b]=!0;this.locks[b]||(this.presses[b]=!0,this.previousPressAction=this.lastPressAction,this.lastPressAction=b,this.locks[b]=!0);var c=!!(ig.game&&ig.game.alertDialog&&ig.game.alertDialog.isOpen);if((a.ctrlKey||a.metaKey)&&"h"==b||!(c&&(!c||"areaThumbs"!=ig.game.alertDialog.contextId)||ig.game&&ig.game.areaDialog&&ig.game.areaDialog.isOpen||
ig.game&&ig.game.writableDialog&&ig.game.writableDialog.isOpen||ig.game&&ig.game.friendsDialog&&ig.game.friendsDialog.isOpen&&"f1"!=b||ig.game&&ig.game.painter&&ig.game.painter.interactingDialog&&ig.game.painter.interactingDialog.isOpen||ig.game&&ig.game.userScriptEditor&&ig.game.userScriptEditor.O9672()&&"f10"!=b))a.stopPropagation(),a.preventDefault()}}},keyup:function(a){if(ig.ua.mac&&a.metaKey&&81==a.which)return a.cancelBubble=!1,a.returnValue=!0;if("text"!=a.target.type){a.getModifierState&&
(this.O7946=a.getModifierState("CapsLock"));var b=this.O1035(a,"keyup");if(b=this.bindings[b])this.delayedKeyup[b]=!0,a.stopPropagation(),a.preventDefault()}},devicemotion:function(a){this.accel=a.accelerationIncludingGravity},bind:function(a,b){0>a?this.O4726():0<a&&this.O5172();this.bindings[a]=b},O1718:function(a,b){a=ig.$(a);var c=this;a.addEventListener("touchstart",function(d){c.O9708(d,b)},!1);a.addEventListener("touchend",function(d){c.O2095(d,b)},!1)},unbind:function(a){this.delayedKeyup[this.bindings[a]]=
!0;this.bindings[a]=null},O4733:function(){this.bindings={};this.actions={};this.presses={};this.locks={};this.delayedKeyup={}},state:function(a){return this.actions[a]},pressed:function(a){return this.presses[a]},O9709:function(a){return this.previousPressAction==a},released:function(a){return this.delayedKeyup[a]},O6501:function(){for(var a in this.delayedKeyup)this.actions[a]=!1,this.locks[a]=!1;this.delayedKeyup={};this.presses={}},O9708:function(a,b){this.actions[b]=!0;this.presses[b]=!0;a.stopPropagation();
a.preventDefault();return!1},O2095:function(a,b){this.delayedKeyup[b]=!0;a.stopPropagation();a.preventDefault();return!1}})});ig.baked=!0;ig.module("impact.impact").requires("dom.ready","impact.loader","impact.system","impact.input","impact.sound").defines(function(){ig.main=function(a,b,c,d,e,f,g){ig.system=new ig.System(a,c,d,e,f||1);ig.input=new ig.Input;ig.O4534=new ig.O3415;ig.music=new ig.Music;ig.ready=!0;(new (g||ig.Loader)(b,ig.resources)).load()}});ig.baked=!0;
ig.module("mlframe.image").defines(function(){ml.Image=function(a,b,c,d){ml.Image.prototype.instanceCount++;this.data=null;this.height=this.width=0;this.failed=this.loaded=!1;this.retryCount=0;this.O7281=null;this.path="";this.timeoutTimerId=null;this._scale=ig.system.scale;this.mlandCallback=b;this.mlandCallbackContext=c;if(d)this.O8097(d);else{if(null==a)return null;this.path=a;this.load()}};ml.Image.prototype.load=function(a){this.loaded?a&&a(this.path,!0):!this.loaded&&ig.ready?(this.O7281=a||
null,this.data=new Image,this.data.crossOrigin="anonymous",this.data.onload=this.onload.bind(this),this.data.onerror=this.onerror.bind(this),this.data.src=ig.prefix+this.path+ig.nocache):ig.O2285(this)};ml.Image.prototype.O8097=function(a){this.data=a;this.width=this.data.width/ig.system.scale;this.height=this.data.height/ig.system.scale;this.loaded=!0;this.mlandCallback&&this.mlandCallback.call(this.mlandCallbackContext,this.data)};ml.Image.prototype.reload=function(){this.loaded=!1;this.data=new Image;
this.data.crossOrigin="anonymous";this.data.onload=this.onload.bind(this);this.data.src=this.path+"?"+Date.now()};ml.Image.prototype.onload=function(a){this.width=this.data.width;this.height=this.data.height;if(ig.ua.iexplorer)try{this.resize(ig.system.scale)}catch(b){this.O1537(ig.system.scale)}else this.O1537(ig.system.scale);this.loaded=!0;this.O7281&&this.O7281(this.path,!0);this.mlandCallback&&this.mlandCallback.call(this.mlandCallbackContext,this.data)};ml.Image.prototype.onerror=function(a){console.log("error loading image:"+
this.path);if(this.retryCount<this.maxRetries){var b=this;setTimeout(function(){b.load(b.O7281)},1E3+1E3*this.retryCount);this.retryCount++;window.consoleref.log("image load retry #"+this.retryCount)}else this.failed=!0,console.log("image load failed: "+this.path),this.O7281&&this.O7281(this.path,!1),this.mlandCallback&&this.mlandCallback.call(this.mlandCallbackContext,null)};ml.Image.prototype.checkTimeout=function(a){a.loaded||a.failed||(this.retryCount<this.maxRetries?(setTimeout(function(){a.load(a.O7281)},
8E3+1E3*a.retryCount),a.retryCount++,ig.game.errorManager.logInfo("retrying image load"),console.log("image timeout retry #"+a.retryCount)):(a.failed=!0,ig.game.errorManager.warn("image load failed (timeout)",this.path),a.O7281&&a.O7281(a.path,!1),a.mlandCallback&&a.mlandCallback.call(a.mlandCallbackContext,null)))};ml.Image.prototype.resize=function(a){var b=this.width*a,c=this.height*a,d=document.createElement("canvas");d.width=this.width;d.height=this.height;d=d.getContext("2d");try{d.drawImage(this.data,
0,0,this.width,this.height,0,0,this.width,this.height)}catch(n){throw Error("Error resizing image : "+this.path+" - "+typeof this.data);}d=d.getImageData(0,0,this.width,this.height);var e=document.createElement("canvas");e.width=b;e.height=c;for(var f=e.getContext("2d"),g=f.getImageData(0,0,b,c),h=0;h<c;h++)for(var k=0;k<b;k++){var l=4*(Math.floor(h/a)*this.width+Math.floor(k/a)),m=4*(h*b+k);g.data[m]=d.data[l];g.data[m+1]=d.data[l+1];g.data[m+2]=d.data[l+2];g.data[m+3]=d.data[l+3]}f.putImageData(g,
0,0);this.data=e};ml.Image.prototype.O1537=function(a){var b=this.width*a;a*=this.height;var c=document.createElement("canvas");c.width=b;c.height=a;var d=c.getContext("2d");d&&(d.imageSmoothingEnabled=!1,d.mozImageSmoothingEnabled=!1,d.oImageSmoothingEnabled=!1,d.webkitImageSmoothingEnabled=!1,d.drawImage(this.data,0,0,b,a));this.data=c};ml.Image.prototype.draw=function(a,b,c,d,e,f){if(this.loaded){var g=ig.system.scale;e=(e?e:this.width)*g;f=(f?f:this.height)*g;ig.system.context.drawImage(this.data,
c?c*g:0,d?d*g:0,e,f,ig.system.O8551(a),ig.system.O8551(b),e,f)}};ml.Image.prototype.O5334=function(a,b,c,d,e,f,g){e=e?e:d;if(this.loaded&&!(d>this.width||e>this.height)){var h=ig.system.scale,k=Math.floor(d*h),l=Math.floor(e*h),m=f?-1:1,n=g?-1:1;if(f||g)ig.system.context.save(),ig.system.context.scale(m,n);ig.system.context.drawImage(this.data,Math.floor(c*d)%this.width*h,Math.floor(c*d/this.width)*e*h,k,l,ig.system.O8551(a)*m-(f?k:0),ig.system.O8551(b)*n-(g?l:0),k,l);(f||g)&&ig.system.context.restore()}};
ml.Image.prototype.O9475=function(a,b,c,d,e,f,g,h){if(this.loaded){var k=ig.system.scale;ig.system.context.drawImage(this.data,e?e*k:0,f?f*k:0,g*k,h*k,ig.system.O8551(a),ig.system.O8551(b),c*k,d*k)}};ml.Image.prototype.drawCount=0;ml.Image.prototype.drawTileCount=0;ml.Image.prototype.instanceCount=0;ml.Image.prototype.maxRetries=1;ml.Image.prototype.timeOutMs=3E3;ml.Image.prototype.cache={};ml.Image.prototype.O6636=function(){for(var a in ml.Image.prototype.cache)ml.Image.prototype.cache[a].reload()};
ml.Image.prototype.resizeTimeMs=0});ig.baked=!0;
ig.module("mlframe.animation").requires("mlframe.timer","mlframe.image").defines(function(){ml.AnimationSheet=function(a,b,c,d){this.width=b;this.height=c;if(d)this.image=d;else{var e=jQuery.Deferred();this.image=new ml.Image(a,function(){e.resolve()},this);this.loadedPromise=e.promise()}};ml.Animation=function(a,b,c,d,e,f){this.name=e;this.altSheet=f;this.sheet=a;this.frameTime=b;this.sequence=c;this.stop=!!d;this.flip={x:!1,y:!1};this.pivot={x:a.width/2,y:a.height/2};this.timer=new ml.Timer;this.tile=
this.sequence[0];this.loopCount=this.frame=0;this.alpha=1;this.angle=0};ml.Animation.prototype.rewind=function(){this.timer.reset();this.loopCount=0;this.tile=this.sequence[0];return this};ml.Animation.prototype.O2421=function(a){this.timer.set(this.frameTime*-a);this.update()};ml.Animation.prototype.O5750=function(){this.O2421(Math.floor(Math.random()*this.sequence.length))};ml.Animation.prototype.update=function(){var a=Math.floor(this.timer.delta()/this.frameTime);this.loopCount=Math.floor(a/this.sequence.length);
this.frame=this.stop&&0<this.loopCount?this.sequence.length-1:a%this.sequence.length;this.tile=this.sequence[this.frame]};ml.Animation.prototype.draw=function(a,b,c){if(this.sheet.image){var d=Math.max(this.sheet.width,this.sheet.height);a>ig.system.width||b>ig.system.height||0>a+d||0>b+d||(1!=this.alpha&&(ig.system.context.globalAlpha=this.alpha),this.angle&&ml.Misc.O7017(this.sheet)&&(this.angle=0),this.angle?(ig.system.context.save(),c?ig.system.context.translate(ig.system.O8551(a+Math.floor(this.pivot.x)),
ig.system.O8551(b+Math.floor(this.pivot.y))):ig.system.context.translate(ig.system.O8551(a+this.pivot.x),ig.system.O8551(b+this.pivot.y)),ig.system.context.rotate(this.angle),this.sheet.image.O5334(-this.pivot.x,-this.pivot.y,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y),ig.system.context.restore()):this.sheet.image.O5334(a,b,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y),1!=this.alpha&&(ig.system.context.globalAlpha=1))}}});ig.baked=!0;
ig.module("impact.entity").requires("mlframe.animation","impact.impact").defines(function(){ig.Entity=ig.Class.extend({id:0,settings:{},size:{x:16,y:16},offset:{x:0,y:0},pos:{x:0,y:0},last:{x:0,y:0},vel:{x:0,y:0},accel:{x:0,y:0},friction:{x:0,y:0},maxVel:{x:100,y:100},zIndex:0,O2027:1,standing:!1,bounciness:0,O7949:40,anims:{},O1980:[],O6767:null,animSheet:null,O8393:null,health:10,type:0,O7852:0,collides:0,_killed:!1,O3428:!0,slopeStanding:{min:(44).toRad(),max:(136).toRad()},init:function(a,b,c){this.id=
++ig.Entity._lastId;this.pos.x=a;this.pos.y=b;ig.merge(this,c)},addAnim:function(a,b,c,d){if(!this.animSheet)throw"No animSheet to add the animation "+a+" to.";b=new ml.Animation(this.animSheet,b,c,d,a);this.anims[a]=b;this.O1980.push(b);b.O1812Index=this.O1980.length-1;this.O8393||(this.O8393=b,this.O6767=b.O1812Index);return b},O9210:function(){return this.backgroundEntity?!0:this.O3428=ig.game.O3066(this.pos)},update:function(){this.O1948||(this.last.x=this.pos.x,this.last.y=this.pos.y,this.vel.y+=
ig.game.gravity*ig.system.tick*this.O2027,this.vel.x=this.O8782(this.vel.x,this.accel.x,this.friction.x,this.maxVel.x),this.vel.y=this.O8782(this.vel.y,this.accel.y,this.friction.y,this.maxVel.y),this._mx=this.vel.x*ig.system.tick,this._my=this.vel.y*ig.system.tick,this._res=ig.game.O8649.trace(this.pos.x,this.pos.y,this._mx,this._my,this.size.x,this.size.y),this.O2550(this._res));this.O8393&&this.O8393.update()},O8782:function(a,b,c,d){isNaN(a)&&(a=0);return b?(a+b*ig.system.tick).limit(-d,d):c?
(b=c*ig.system.tick,0<a-b?a-b:0>a+b?a+b:0):a.limit(-d,d)},O2550:function(a){this.standing=!1;a.collision.y&&(0<this.bounciness&&Math.abs(this.vel.y)>this.O7949?this.vel.y*=-this.bounciness:(0<this.vel.y&&(this.standing=!0),this.vel.y=0));a.collision.x&&(0<this.bounciness&&Math.abs(this.vel.x)>this.O7949?this.vel.x*=-this.bounciness:this.vel.x=0);if(a.collision.slope){var b=a.collision.slope;if(0<this.bounciness){var c=this.vel.x*b.nx+this.vel.y*b.ny;this.vel.x=(this.vel.x-2*b.nx*c)*this.bounciness;
this.vel.y=(this.vel.y-2*b.ny*c)*this.bounciness}else c=(this.vel.x*b.x+this.vel.y*b.y)/(b.x*b.x+b.y*b.y),this.vel.x=b.x*c,this.vel.y=b.y*c,b=Math.atan2(b.x,b.y),b>this.slopeStanding.min&&b<this.slopeStanding.max&&(this.standing=!0)}this.pos=a.pos},draw:function(){this.O3428&&this.O8393&&(this.O8393.draw(this.pos.x-this.offset.x-ig.game._rscreen.x,this.pos.y-this.offset.y-ig.game._rscreen.y),ig.Entity.ActiveDrawCount++)},kill:function(){ig.game.O2525(this)},O3914:function(a,b){this.health-=a;0>=this.health&&
this.kill()},touches:function(a){return a&&!this.O9367&&!(this.pos.x>a.pos.x+a.size.x||this.pos.x+this.size.x<a.pos.x||this.pos.y>a.pos.y+a.size.y||this.pos.y+this.size.y<a.pos.y)},O2144:function(a){if(a){var b=this.pos.x+this.size.x/2-(a.pos.x+a.size.x/2);a=this.pos.y+this.size.y/2-(a.pos.y+a.size.y/2);return Math.sqrt(b*b+a*a)}},angleTo:function(a){return Math.atan2(a.pos.y+a.size.y/2-(this.pos.y+this.size.y/2),a.pos.x+a.size.x/2-(this.pos.x+this.size.x/2))},check:function(a){},O2534:function(a,
b){},ready:function(){}});ig.Entity._lastId=0;ig.Entity.COLLIDES={LIQUID:-1,NEVER:0,LITE:1,PASSIVE:2,ACTIVE:4,FIXED:8};ig.Entity.TYPE={NONE:0,A:1,B:2,BOTH:3};ig.Entity.O3122=function(a,b){a.O7852&b.type&&a.check(b);b.O7852&a.type&&b.check(a);(a.collides&&b.collides&&a.collides+b.collides>ig.Entity.COLLIDES.ACTIVE||a.collides&&b.collides==ig.Entity.COLLIDES.LIQUID)&&ig.Entity.O4682(a,b)};ig.Entity.O4682=function(a,b){if(!(a.O2011&&b.O2011||a.O2011&&b instanceof EntityCrumbling||b.O2011&&a instanceof
EntityCrumbling)){var c=null;if(a.collides==ig.Entity.COLLIDES.LITE||b.collides==ig.Entity.COLLIDES.FIXED)c=a;else if(b.collides==ig.Entity.COLLIDES.LITE||a.collides==ig.Entity.COLLIDES.FIXED)c=b;a.last.x+a.size.x>b.last.x&&a.last.x<b.last.x+b.size.x?(a.last.y<b.last.y?ig.Entity.O9830(a,b,c):ig.Entity.O9830(b,a,c),a.O2534(b,"y"),b.O2534(a,"y")):a.last.y+a.size.y>b.last.y&&a.last.y<b.last.y+b.size.y&&(a.last.x<b.last.x?ig.Entity.O9376(a,b,c):ig.Entity.O9376(b,a,c),a.O2534(b,"x"),b.O2534(a,"x"))}};
ig.Entity.O9376=function(a,b,c){var d=a.pos.x+a.size.x-b.pos.x;c?(c.vel.x=-c.vel.x*c.bounciness+(a===c?b:a).vel.x,b=ig.game.O8649.trace(c.pos.x,c.pos.y,c==a?-d:d,0,c.size.x,c.size.y),c.pos.x=b.pos.x):(c=(a.vel.x-b.vel.x)/2,a.vel.x=-c,b.vel.x=c,c=ig.game.O8649.trace(a.pos.x,a.pos.y,-d/2,0,a.size.x,a.size.y),a.pos.x=Math.floor(c.pos.x),a=ig.game.O8649.trace(b.pos.x,b.pos.y,d/2,0,b.size.x,b.size.y),b.pos.x=Math.ceil(a.pos.x))};ig.Entity.O9830=function(a,b,c){var d=a.pos.y+a.size.y-b.pos.y;if(c){b=a===
c?b:a;c.vel.y=-c.vel.y*c.bounciness+b.vel.y;var e=0;c==a&&Math.abs(c.vel.y-b.vel.y)<c.O7949&&(c.standing=!0,e=b.vel.x*ig.system.tick);a=ig.game.O8649.trace(c.pos.x,c.pos.y,e,c==a?-d:d,c.size.x,c.size.y);c.pos.y=a.pos.y;c.pos.x=a.pos.x}else ig.game.gravity&&(b.standing||0<a.vel.y)?(c=ig.game.O8649.trace(a.pos.x,a.pos.y,0,-(a.pos.y+a.size.y-b.pos.y),a.size.x,a.size.y),a.pos.y=c.pos.y,0<a.bounciness&&a.vel.y>a.O7949?a.vel.y*=-a.bounciness:(a.standing=!0,a.vel.y=0)):(c=(a.vel.y-b.vel.y)/2,a.vel.y=-c,
b.vel.y=c,e=b.vel.x*ig.system.tick,c=ig.game.O8649.trace(a.pos.x,a.pos.y,e,-d/2,a.size.x,a.size.y),a.pos.y=c.pos.y,a=ig.game.O8649.trace(b.pos.x,b.pos.y,0,d/2,b.size.x,b.size.y),b.pos.y=a.pos.y)};ig.Entity.ActiveUpdateCount=0;ig.Entity.ActiveDrawCount=0});ig.baked=!0;
ig.module("impact.map").defines(function(){ig.Map=ig.Class.extend({tilesize:8,width:1,height:1,pxWidth:1,pxHeight:1,data:[[]],name:null,init:function(a,b){this.tilesize=a;this.data=b;this.height=b.length;this.width=b[0].length;this.pxWidth=this.width*this.tilesize;this.pxHeight=this.height*this.tilesize},getTile:function(a,b){a=Math.floor(a/this.tilesize);b=Math.floor(b/this.tilesize);return a>=0&&a<this.width&&b>=0&&b<this.height?this.data[b][a]:0},setTile:function(a,b,c){a=Math.floor(a/this.tilesize);
b=Math.floor(b/this.tilesize);a>=0&&a<this.width&&b>=0&&b<this.height&&(this.data[b][a]=c)}})});ig.baked=!0;
ig.module("impact.collision-map").requires("impact.map").defines(function(){ig.O8378=ig.Map.extend({lastSlope:1,tiledef:null,init:function(c,d,e){this.parent(c,d);this.tiledef=e||ig.O8378.defaultTileDef;for(var f in this.tiledef)f|0>this.lastSlope&&(this.lastSlope=f|0)},trace:function(c,d,e,f,g,h){var k={collision:{x:!1,y:!1,slope:!1},pos:{x:c,y:d},tile:{x:0,y:0}},l=Math.ceil((Math.max(Math.abs(e),Math.abs(f))+.1)/this.tilesize);if(l>1)for(var m=e/l,n=f/l,p=0;p<l&&(m||n)&&(this.O5070(k,c,d,m,n,g,
h,e,f,p),c=k.pos.x,d=k.pos.y,k.collision.x&&(e=m=0),k.collision.y&&(f=n=0),!k.collision.slope);p++);else this.O5070(k,c,d,e,f,g,h,e,f,0);return k},O5070:function(c,d,e,f,g,h,k,l,m,n){c.pos.x+=f;c.pos.y+=g;if(f){var p=f>0?h:0,q=f<0?this.tilesize:0,t=Math.max(Math.floor(e/this.tilesize),0),r=Math.min(Math.ceil((e+k)/this.tilesize),this.height);f=Math.floor((c.pos.x+p)/this.tilesize);var w=Math.floor((d+p)/this.tilesize);if(n>0||f==w||w<0||w>=this.width)w=-1;if(f>=0&&f<this.width)for(;t<r;t++){if(w!=
-1){var u=this.data[t][w];if(u>1&&u<=this.lastSlope&&this.O3419(c,u,d,e,l,m,h,k,w,t))break}u=this.data[t][f];if(u==1||u>this.lastSlope||u>1&&this.O3419(c,u,d,e,l,m,h,k,f,t)){if(u>1&&u<=this.lastSlope&&c.collision.slope)break;c.collision.x=!0;c.tile.x=u;d=c.pos.x=f*this.tilesize-p+q;l=0;break}}}if(g){p=g>0?k:0;g=g<0?this.tilesize:0;f=Math.max(Math.floor(c.pos.x/this.tilesize),0);q=Math.min(Math.ceil((c.pos.x+h)/this.tilesize),this.width);t=Math.floor((c.pos.y+p)/this.tilesize);r=Math.floor((e+p)/this.tilesize);
if(n>0||t==r||r<0||r>=this.height)r=-1;if(t>=0&&t<this.height)for(;f<q&&!(r!=-1&&(u=this.data[r][f],u>1&&u<=this.lastSlope&&this.O3419(c,u,d,e,l,m,h,k,f,r)));f++)if(u=this.data[t][f],u==1||u>this.lastSlope||u>1&&this.O3419(c,u,d,e,l,m,h,k,f,t)){if(u>1&&u<=this.lastSlope&&c.collision.slope)break;c.collision.y=!0;c.tile.y=u;c.pos.y=t*this.tilesize-p+g;break}}},O3419:function(c,d,e,f,g,h,k,l,m,n){var p=this.tiledef[d];if(!p)return!1;d=(p[2]-p[0])*this.tilesize;var q=(p[3]-p[1])*this.tilesize,t=p[4];
k=e+g+(q<0?k:0)-(m+p[0])*this.tilesize;l=f+h+(d>0?l:0)-(n+p[1])*this.tilesize;if(d*l-q*k>0){if(g*-q+h*d<0)return t;m=Math.sqrt(d*d+q*q);n=q/m;m=-d/m;var r=k*n+l*m;p=n*r;r*=m;if(p*p+r*r>=g*g+h*h)return t||d*(l-h)-q*(k-g)<.5;c.pos.x=e+g-p;c.pos.y=f+h-r;c.collision.slope={x:d,y:q,nx:n,ny:m};return!0}return!1}});var a=1/3,b=2/3;ig.O8378.defaultTileDef={5:[0,1,1,b,!0],6:[0,b,1,a,!0],7:[0,a,1,0,!0],3:[0,1,1,.5,!0],4:[0,.5,1,0,!0],2:[0,1,1,0,!0],10:[.5,1,1,0,!0],21:[0,1,.5,0,!0],32:[b,1,1,0,!0],43:[a,1,
b,0,!0],54:[0,1,a,0,!0],27:[0,0,1,a,!0],28:[0,a,1,b,!0],29:[0,b,1,1,!0],25:[0,0,1,.5,!0],26:[0,.5,1,1,!0],24:[0,0,1,1,!0],11:[0,0,.5,1,!0],22:[.5,0,1,1,!0],33:[0,0,a,1,!0],44:[a,0,b,1,!0],55:[b,0,1,1,!0],16:[1,a,0,0,!0],17:[1,b,0,a,!0],18:[1,1,0,b,!0],14:[1,.5,0,0,!0],15:[1,1,0,.5,!0],13:[1,1,0,0,!0],8:[.5,1,0,0,!0],19:[1,1,.5,0,!0],30:[a,1,0,0,!0],41:[b,1,a,0,!0],52:[1,1,b,0,!0],38:[1,b,0,1,!0],39:[1,a,0,b,!0],40:[1,0,0,a,!0],36:[1,.5,0,1,!0],37:[1,0,0,.5,!0],35:[1,0,0,1,!0],9:[1,0,.5,1,!0],20:[.5,
0,0,1,!0],31:[1,0,b,1,!0],42:[b,0,a,1,!0],53:[a,0,0,1,!0],12:[0,0,1,0,!1],23:[1,1,0,1,!1],34:[1,0,1,1,!1],45:[0,1,0,0,!1],110:[0,1,1,0,!1],111:[0,0,1,1,!1],112:[1,1,0,0,!1],113:[1,0,0,1,!1]};ig.O8378.staticNoCollision={trace:function(c,d,e,f){return{collision:{x:!1,y:!1,slope:!1},pos:{x:c+e,y:d+f},tile:{x:0,y:0}}}}});ig.baked=!0;
ig.module("impact.background-map").requires("impact.map","mlframe.image").defines(function(){ig.BackgroundMap=ig.Map.extend({tiles:null,scroll:{x:0,y:0},areaDriftOffset:{x:0,y:0},distance:1,repeat:!1,O8923:"",foreground:!1,enabled:!0,preRender:!1,O6962:null,chunkSize:512,O3638:!1,anims:{},init:function(a,b,c){this.parent(a,b);this.O4445(c)},O4445:function(a){this.O8923=a instanceof ml.Image?a.path:a;this.tiles=new ml.Image(this.O8923);this.O6962=null},O6515:function(a,b){this.scroll.x=a/this.distance+
this.areaDriftOffset.x;this.scroll.y=b/this.distance+this.areaDriftOffset.y},O5691:function(){var a=this.width*this.tilesize*ig.system.scale,b=this.height*this.tilesize*ig.system.scale;this.chunkSize=Math.min(Math.max(a,b),this.chunkSize);var c=Math.ceil(a/this.chunkSize),d=Math.ceil(b/this.chunkSize);this.O6962=[];for(var e=0;e<d;e++){this.O6962[e]=[];for(var f=0;f<c;f++)this.O6962[e][f]=this.O2490(f,e,f==c-1?a-f*this.chunkSize:this.chunkSize,e==d-1?b-e*this.chunkSize:this.chunkSize)}},O2490:function(a,
b,c,d){var e=c/this.tilesize/ig.system.scale+1,f=d/this.tilesize/ig.system.scale+1,g=a*this.chunkSize/ig.system.scale%this.tilesize,h=b*this.chunkSize/ig.system.scale%this.tilesize;a=Math.floor(a*this.chunkSize/this.tilesize/ig.system.scale);var k=Math.floor(b*this.chunkSize/this.tilesize/ig.system.scale);b=ig.$new("canvas");b.width=c;b.height=d;b.retinaResolutionEnabled=!1;d=b.getContext("2d");ig.System.scaleMode(b,d);c=ig.system.context;ig.system.context=d;for(d=0;d<e;d++)for(var l=0;l<f;l++)if(d+
a<this.width&&l+k<this.height){var m=this.data[l+k][d+a];m&&this.tiles.O5334(d*this.tilesize-g,l*this.tilesize-h,m-1,this.tilesize)}ig.system.context=c;e=new Image;e.src=b.toDataURL();e.width=b.width;e.height=b.height;return e},draw:function(){this.tiles.loaded&&this.enabled&&(this.preRender?this.O1495():this.O3791())},O1495:function(){this.O6962||this.O5691();var a=ig.system.O8551(this.scroll.x),b=ig.system.O8551(this.scroll.y);if(this.repeat){var c=this.width*this.tilesize*ig.system.scale;a=(a%
c+c)%c;c=this.height*this.tilesize*ig.system.scale;b=(b%c+c)%c}c=Math.max(Math.floor(a/this.chunkSize),0);var d=Math.max(Math.floor(b/this.chunkSize),0),e=Math.ceil((a+ig.system.realWidth)/this.chunkSize),f=Math.ceil((b+ig.system.O5809)/this.chunkSize),g=this.O6962[0].length,h=this.O6962.length;this.repeat||(e=Math.min(e,g),f=Math.min(f,h));for(var k=0,l=d;l<f;l++){for(var m=0,n=c;n<e;n++){var p=this.O6962[l%h][n%g],q=-a+n*this.chunkSize-m,t=-b+l*this.chunkSize-k;ig.system.context.drawImage(p,q,t);
ig.Image.drawCount++;this.O3638&&(ig.system.context.strokeStyle="#f0f",ig.system.context.strokeRect(q,t,this.chunkSize,this.chunkSize));this.repeat&&p.width<this.chunkSize&&q+p.width<ig.system.realWidth&&(m+=this.chunkSize-p.width,l==d&&e++)}this.repeat&&p.height<this.chunkSize&&t+p.height<ig.system.O5809&&(k+=this.chunkSize-p.height,f++)}},O3791:function(){var a,b=(this.scroll.x/this.tilesize).toInt(),c=(this.scroll.y/this.tilesize).toInt(),d=this.scroll.x%this.tilesize,e=this.scroll.y%this.tilesize,
f=-d-this.tilesize;d=ig.system.width+this.tilesize-d;var g=ig.system.height+this.tilesize-e,h=-1;for(e=-e-this.tilesize;e<g;h++,e+=this.tilesize){var k=h+c;if(k>=this.height||k<0){if(!this.repeat)continue;k=(k%this.height+this.height)%this.height}for(var l=-1,m=f;m<d;l++,m+=this.tilesize){var n=l+b;if(n>=this.width||n<0){if(!this.repeat)continue;n=(n%this.width+this.width)%this.width}if(n=this.data[k][n])(a=this.anims[n-1])?a.draw(m,e):this.tiles.O5334(m,e,n-1,this.tilesize)}}}})});ig.baked=!0;
ig.module("impact.game").requires("impact.impact","impact.entity","impact.collision-map","impact.background-map").defines(function(){ig.Game=ig.Class.extend({clearColor:"#000000",gravity:0,screen:{x:0,y:0},_rscreen:{x:0,y:0},entities:[],O2770:[],O1322:{},namedEntities:[],O8649:ig.O8378.staticNoCollision,backgroundMaps:[],backgroundAnims:{},autoSort:!1,sortBy:null,cellSize:32,O5806:[],O1382:null,O3572:!1,O8962:!0,O5078:null,checkEntitiesOnScreenPeriod:.5,O7243:60,O1968:20,O9414:null,O2069:2.1,O5228:0,
O6477:!1,O7247:function(){this.sortBy=this.sortBy||ig.Game.SORT.Z_INDEX;ig.game=this;this.O5078=new ml.Timer;this.O9414=new ml.Timer;this.O6477&&this.O4298();return null},O7465:function(a){return this.O1322[a]},getEntityByName:function(a){return this.namedEntities[a]},O8799:function(a){a="string"===typeof a?ig.global[a]:a;for(var b=[],c,d=0;d<this.entities.length;d++)c=this.entities[d],c instanceof a&&!c._killed&&b.push(c);return b},spawnEntity:function(a,b,c,d){var e="string"===typeof a?ig.global[a]:
a;if(!e)throw"Can't spawn entity of type "+a;a=new e(b,c,d||{});this.entities.push(a);ig.game.O4709=!0;a.name&&(this.namedEntities[a.name]=a);a.O2970&&(this.O1322[a.O2970]=a);this.O6477&&this.O6464(a);return a},O9759:function(a,b,c,d){(d&&d.uiEntity||this.O3066({x:b,y:c}))&&this.spawnEntity(a,b,c,d)},O2525:function(a){a.name&&delete this.namedEntities[a.name];a.O2970&&delete this.O1322[a.O2970];this.O6477&&this.O8255(a);a._killed=!0;a.type=ig.Entity.TYPE.NONE;a.O7852=ig.Entity.TYPE.NONE;a.collides=
ig.Entity.COLLIDES.NEVER;this.O5806.push(a)},O6464:function(a){for(var b=this.O8226(a),c=0;c<b.length;c++)b[c].push(a)},O8255:function(a){for(var b=this.O8226(a),c=0;c<b.length;c++)for(var d=b[c],e=0;e<d.length;e++)if(a.id===d[e].id){d.splice(e,1);break}},O8226:function(a){var b=[];a.O9367?b.push(this.O5119.ui):a.O4220?b.push(this.O5119.light):a.isBehind?b.push(this.O5119.environment):a.O6057?b.push(this.O5119.O9824):a.O6475?b.push(this.O5119.environment):a.O5582?(b.push(this.O5119.default),b.push(this.O5119.O8780)):
a.isLiquid?(b.push(this.O5119.default),b.push(this.O5119.liquid)):a.betweenDefaultAndPlayer?b.push(this.O5119.betweenDefaultAndPlayer):a.O7367?b.push(this.O5119.O7367):a.backgroundEntity?b.push(this.O5119.background):a instanceof EntityPlayer?b.push(this.O5119.player):a.O7422?b.push(this.O5119.foreground):a.uiEntity?b.push(this.O5119.ui):a.decorative?a.O8582?b.push(this.O5119.O2259):b.push(this.O5119.decoEffects):a.O3407?(b.push(this.O5119.environment),b.push(this.O5119.default),b.push(this.O5119.foreground)):
b.push(this.O5119.default);return b},O4298:function(){this.O5119={background:[],environment:[],O9824:[],"default":[],light:[],betweenDefaultAndPlayer:[],player:[],O7367:[],foreground:[],O8780:[],O9986:[],liquid:[],O2259:[],decoEffects:[],ui:[]}},O1442:function(){this.entities.sort(this.sortBy)},O8063:function(){this.O3572=!0},run:function(){var a=Date.now();this.update();this.draw();this.O5228=Date.now()-a},update:function(){if(this.O3572||this.autoSort)this.O1442(),this.O3572=!1;this.O2269();this.O8962&&
this.O5078.delta()>this.checkEntitiesOnScreenPeriod&&(this.O5174(),this.O5078.reset());this.checkEntities();for(var a=0;a<this.O5806.length;a++)this.entities.erase(this.O5806[a]),this.O8962&&this.O2770.erase(this.O5806[a]),ig.game.O4709=!0;this.O5806.length=0},O2269:function(){var a=Date.now();ig.Entity.ActiveUpdateCount=0;for(var b=ig.Entity.ActiveDrawCount=0;b<this.entities.length;b++)this.entities[b].update(),ig.Entity.ActiveUpdateCount++;b=Date.now();ig.game.debugUpdateEntitiesTime=b-a;if(this.O8962&&
this.O9414.delta()>this.O2069){for(b=0;b<this.O2770.length;b++)this.O2770[b].update(),ig.Entity.ActiveUpdateCount++;this.O9414.reset()}},O5174:function(){for(var a,b=0,c=0,d=[],e=[],f=0;f<this.entities.length&&(a=this.entities[f],a.uiEntity||a.O8376||(this.entities[f].O9210()||(d.push(this.entities[f]),b++),!(b>this.O1968)));f++);for(f=0;f<this.O2770.length&&!(this.O2770[f].O9210()&&(e.push(this.O2770[f]),c++),c>this.O7243);f++);for(f=0;f<d.length;f++)this.O1705(d[f]);for(f=0;f<e.length;f++)this.O8781(e[f])},
O8781:function(a){this.entities.push(a);this.O2770.erase(a);ig.game.O4709=!0},O1705:function(a){this.O2770.push(a);this.entities.erase(a);ig.game.O4709=!0},O3066:function(a){return a.x>this.screenPlusMargin.x1&&a.y>this.screenPlusMargin.y1&&a.x<this.screenPlusMargin.x2&&a.y<this.screenPlusMargin.y2},checkEntities:function(){var a=Date.now(),b={},c,d,e,f,g;for(d=0;d<this.entities.length;d++)if(c=this.entities[d],c.type!=ig.Entity.TYPE.NONE||c.O7852!=ig.Entity.TYPE.NONE||c.collides!=ig.Entity.COLLIDES.NEVER){if(500<=
c.size.x)break;var h={};var k=Math.floor(c.pos.y/this.cellSize),l=Math.floor((c.pos.x+c.size.x)/this.cellSize)+1,m=Math.floor((c.pos.y+c.size.y)/this.cellSize)+1;for(e=Math.floor(c.pos.x/this.cellSize);e<l;e++)for(f=k;f<m;f++)if(b[e])if(b[e][f]){var n=b[e][f];for(g=0;g<n.length;g++)c.touches(n[g])&&!h[n[g].id]&&(h[n[g].id]=!0,ig.Entity.O3122(c,n[g]));n.push(c)}else b[e][f]=[c];else b[e]={},b[e][f]=[c]}b=Date.now();ig.game.debugCheckEntitiesTime=b-a}});ig.Game.SORT={Z_INDEX:function(a,b){return a.zIndex-
b.zIndex},POS_X:function(a,b){return a.pos.x+a.size.x-(b.pos.x+b.size.x)},POS_Y:function(a,b){return a.pos.y+a.size.y-(b.pos.y+b.size.y)}}});ig.baked=!0;
ig.module("mlframe.misc").defines(function(){ml.Misc={getDateOfMongoId:function(a){var b=null;a&&"string"===typeof a&&8<=a.length&&(a=a.toString().substring(0,8),b=new Date(1E3*parseInt(a,16)));return b},O7531:function(){var a=!1;if(ig.game.O5119&&ig.game.O5119.player)for(var b=0;b<ig.game.O5119.player.length;b++)if(ig.game.O5119.player[b].isFullAccount){a=!0;break}return a},O1536:function(a,b){var c=!1,d=b;!b&&ig.game&&ig.game.O1257&&(d=ig.game.O1257.O2970);ig.game&&a&&a.creatorId&&ig.game.settings&&
(c=d==a.creatorId||!ig.game.settings.disallowSandboxItemsByOthers);return c},isAdmin:function(){return ig.game.O1257&&10<=ig.game.O1257.rank},O5847:function(a){ig.ua.android||(ig.system.context.globalCompositeOperation=a)},O3715:function(){this.O5847("source-over")},O9452:function(a,b,c){var d=ig.game.strings.trim(a[c]);for(c+=1;c<a.length;c++)d+=b+a[c];return d},O8298:function(a){var b=ig.system.scale;return{x:a.x*b,y:a.y*b,width:a.width*b,height:a.height*b}},O3124:function(a,b,c){var d=this.O8298(a);
a=ig.system.context;void 0===b&&(b=3);b*=ig.system.scale;var e=d.x,f=d.y,g=d.x+d.width;d=d.y+d.height;a.beginPath();a.moveTo(e+b,f);a.lineTo(g-b,f);a.lineTo(g,f+b);a.lineTo(g,d-b);a.lineTo(g-b,d);a.lineTo(e+b,d);a.lineTo(e,d-b);a.lineTo(e,f+b);c?a.stroke():a.fill();a.closePath()},O7579:function(a){var b=3600;a&&parseInt(a)==a&&(a=parseInt(a),1<=a&&a<=this.O9552()&&(b=a));return b},O9552:function(){return 31536E3},O8515:function(){ig.game.O4517?(window.consoleref.log("The area-global Interacting here reads:"),
ig.game.O4261.getItem_P(ig.game.O4517.thingTypeId,"misc1").done(function(a){window.consoleref.log(a.textData)})):window.consoleref.log("There's no area-global Interacting here.")},O4924:function(){ig.game.autoBuilderData&&ig.game.autoBuilderData.timeoutId?clearTimeout(ig.game.autoBuilderData.timeoutId):(ig.game.autoBuilderData={actionIndex:0,timeoutId:null,alarmSongUrl:"https://soundcloud.com/bobby-previte/set-the-alarm-for-monday"},this.O2844())},O2844:function(){var a=["build","checkIsBuilt","delete",
"checkIsDeleted"],b=ig.game.isLocal?"5245e732be4cdf1b3f000014":"50372a99f5d33dc56f000001",c=ig.game.O1257,d={x:parseInt((c.pos.x+c.O4188Offset.x)/ig.game.O9925),y:parseInt((c.pos.y+c.O4188Offset.y-2*ig.game.O9925)/ig.game.O9925)},e=null!==ig.game.O6112.O8617(d),f=a[ig.game.autoBuilderData.actionIndex],g="Performing auto build action: "+f;window.consoleref.log(ig.game.strings.O7512(),g);c.say(g.toLowerCase());g=!1;switch(f){case "build":ig.game.O6112.O2400(b,0,0,d,null,!0);break;case "checkIsBuilt":e||
(g=!0);break;case "delete":ig.game.O6112.deleteThingAt(d.x,d.y);break;case "checkIsDeleted":e&&(g=!0)}g?(g="Detected issue during this action. Cancelling autobuild.",window.consoleref.log(g),c.say(g.toLowerCase()),this.O3903(ig.game.autoBuilderData.alarmSongUrl,ig.game.O1257.O2970),this.O4924()):(ig.game.autoBuilderData.actionIndex++,ig.game.autoBuilderData.actionIndex>a.length-1&&(ig.game.autoBuilderData.actionIndex=0),ig.game.autoBuilderData.timeoutId=setTimeout(function(){ml.Misc.O2844()},5E3))},
O7017:function(a){var b=!1;ig.ua.steam&&a&&a.image&&a.image.data&&(b=63990<=a.image.data.width*a.image.data.height);return b},O2174:function(a){for(var b=1;8>=b;b++)if(a=="area "+b){a=String(b);break}return a},O5905:function(a,b){b=a.indexOf(b);0<=b&&a.splice(b,1);return a},O1645:function(){ig.game.writableDialog&&ig.game.writableDialog.close();ig.game.readableDialog&&ig.game.readableDialog.close()},O8283:function(a,b){var c=6<ig.system.scale?6:ig.system.scale;void 0!==b&&(c=b);return ig.game.O1946+
"media/"+a+"/"+c+".png?v="+ig.game.version},O4653:function(){ig.ua.mobile=!ig.ua.mobile;ig.game.O3310=!ig.ua.mobile;ig.game.virtualJoystick.O3702()},O9611:function(a,b){var c=0;a.totalVisitors>b.totalVisitors?c=-1:a.totalVisitors<b.totalVisitors&&(c=1);return c},O6288:function(a){var b=null;a&&(a=new Date(a),a=Math.abs((new Date).getTime()-a.getTime()),b=Math.floor(a/864E5));return b},O1160:function(a){if(a&&ig.game.O1257&&10<=ig.game.O1257.rank){window.consoleref.clear();window.consoleref.log("---- Diagnostics -----");
for(var b=0;b<a.length;b++)window.consoleref.log(a[b]);window.consoleref.log("----------------------")}},O2461:function(){ig.game.O1795||ig.game.writableDialog&&ig.game.writableDialog.isOpen||(ig.game.isFullAccount?ig.game.O6612||ig.game.O9817.O5486(ig.game.areaId).done(function(a){a&&!!a[ig.game.O1257.O2970]!=ig.game.isEditorHere&&location.reload()}):location.reload())},O7235:function(){return ig.ua.steam?ig.game.steamManager.isWindowFullScreen():screen.width==ig.system.realWidth&&screen.height==
ig.system.O5809},O2616:function(){var a=ig.game.O5119.player;if(!ig.game.O1257||!a||a.length<2)return!1;for(var b=Math.max(ig.system.widthHalf,ig.system.O2175)+50,c=0,d=0;d<a.length;d++){var e=a[d];if(e.O3226&&(e.O8088||e.O2144(ig.game.O1257)<=b)&&(c++,c>=2))return!0}return!1},O8846:function(){if(ml.Misc.O2616()){var a=ig.game.O5119.player,b=!1;if(a._lastSortedPositions)for(var c=0;c<a.length;c++){var d=a[c],e=a._lastSortedPositions[c];if(!e||e.y!==d.pos.y||e.x!==d.pos.x||e.id!==d.id){b=!0;break}}else a._lastSortedPositions=
[],b=!0;if(b||a._lastSortedPositions.length!==a.length)for(a.sort(function(f,g){return f.pos.y!==g.pos.y?f.pos.y>g.pos.y?1:-1:f.pos.x!==g.pos.x?f.pos.x>g.pos.x?1:-1:f.id<g.id?1:-1}),a._lastSortedPositions=[],b=0;b<a.length;b++)a._lastSortedPositions[b]={x:a[b].pos.x,y:a[b].pos.y,id:a[b].id}}},O2368:function(a){var b=null,c=null;if(ig.game.O5119.player)if(1==ig.game.O5119.player.length)b=ig.game.O5119.player[0];else for(var d=0;d<ig.game.O5119.player.length;d++){var e=ig.game.O5119.player[d],f=a.O2144(e);
if(null==c||f<c)b=e,c=f}return b},O6447:function(a,b){var c=ig.game.alertDialog&&ig.game.alertDialog.isOpen;ig.game.O2974();ig.game.writableDialog&&ig.game.writableDialog.isOpen&&ig.game.writableDialog.close();ig.game.sounds.actionSoft.play();a=ig.game.O2082.getAttributeFromSingleAttributes(a,"HELPER");ig.game.virtualJoystick.O6872();switch(a){case "toArea":b=ig.game.strings.O4255(b,"to ");ig.game.portaller.O6417(b);break;case "areaInfo":ig.game.areaDialog&&(ig.game.areaDialog.isOpen?ig.game.areaDialog.close():
ig.game.areaDialog.open());break;case "findAreas":ig.game.areaSearchDialog&&(ig.game.areaSearchDialog.isOpen?ig.game.areaSearchDialog.close():ig.game.areaSearchDialog.open());break;case "findAreasByName":console.log("findAreasByName",b);ig.game.areaSearchDialog&&(ig.game.areaSearchDialog.isOpen?ig.game.areaSearchDialog.close():ig.game.areaSearchDialog.open(b,!0));break;case "visitedAreas":ig.game.areaList.O8999(!0,!0);break;case "createdAreas":ig.game.areaList.O8999(!1,!0,!0);break;case "settings":ig.game.settings.openDialog();
break;case "toElsewhere":ig.game.O4223?ig.game.O5058.O7948("i am already elsewhere"):ig.game.portaller.startExitAreaTeleportingRequest();break;case "profile":ig.game.playerDialog.isOpen?ig.game.playerDialog.close():ig.game.playerDialog.O7845();break;case "createAreaOrSubArea":ig.game.areaDialog.O4439();break;case "friends":ig.game.isFullAccount?ig.game.friendsDialog.isOpen?ig.game.friendsDialog.close():ig.game.friendsDialog.open():ig.game.bottomMenu.O6979(!0);break;case "snapshot":ig.game.isFullAccount&&
(c=ig.game.bottomMenu.subMenus[0])&&c.O4460();break;case "boosts":ig.game.boostDialog&&ig.game.O1257&&ig.game.O1257.rank>=ig.game.boostDialog.O1721?ig.game.boostDialog.isOpen?ig.game.boostDialog.close():ig.game.boostDialog.open():ig.game.O1002.O7063();break;case "map":ig.game.isFullAccount&&ig.game.userMapDialog.O4152();break;case "paste":ig.game.isFullAccount?ml.Misc.O8763():ig.game.O5058.O7948("i need to login to paste");break;case "areasOfTheHour":ig.game.randomAreasDialog.open();break;case "toHome":ig.game.O1276?
ig.game.portaller.O2121(ig.game.O1276):(ig.game.O5058.O7948("i need to set a home"),setTimeout(function(){ig.game.O5058.O7948("in my album first")},1500));break;case "login":ig.game.bottomMenu.O6979();break;case "help":ml.Misc.O9447(!0);break;case "news":c||ig.game.bottomMenu.O7315();break;case "areaAds":ig.game.adCampaignsDialog&&(ig.game.adCampaignsDialog.isOpen?ig.game.adCampaignsDialog.close():ig.game.adCampaignsDialog.open());break;case "myStates":ig.game.isEditorHere?ig.game.O2116&&ig.game.O2116.showPlayerStates():
ig.game.O5058&&ig.game.O5058.O8943("editorOnly")}},O2249:function(a){return this.O5090(a)&&parseInt(a)==a},O1147:function(a){return"boolean"===typeof a},O5090:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},isEven:function(a){return 0==a%2},O2807:function(a){return"string"===typeof a},O9024:function(a,b,c){a<b?a=b:a>c&&(a=c);return a},O8693:function(a,b,c){a<b?a=b:a>c&&(a=c);return a},O4787:function(a,b){a<-b?a=-b:a>b&&(a=b);return a},O1488:function(a,b){void 0===b&&(b=1E4);Infinity!==a&&a?
a<-b?a=-b:a>b&&(a=b):a=0;return a},O9447:function(a){var b="/info";ig.ua.mobile?b+="-mobile":ig.ua.steam&&(b+="-steam",a=!0);ml.Misc.openUrl(b,a)},openUrl:function(a,b){if(a&&"string"===typeof a&&ig.game.alertDialog&&!ig.game.strings.O2646(a)){var c=(0===a.indexOf("http://thingistan.com/")||0===a.indexOf("https://thingistan.com/"))&&-1===a.indexOf("info")&&-1===a.indexOf("support")&&!b;c?window.location.href=a:ig.ua.mobile&&!c||b?(ig.game.alertDialog.isOpen&&ig.game.alertDialog.close(),0===a.indexOf("http://thingistan.com/")||
0===a.indexOf("https://thingistan.com/")||0===a.indexOf("/")?this.O7973(a):(a=ig.game.strings.replaceAll(a,"http://",""),a=ig.game.strings.replaceAll(a,"https://",""),ig.game.alertDialog.open("<p>Please open<br/><br/>"+ig.game.strings.O9955(a)+"<br/><br/>in your browser</p>",!0))):ig.ua.steam?ig.game.steamManager.openUrl(a):(c=!0,0<=a.indexOf(":")&&((c=ig.game.validations.O5842(a))||ig.game.sounds.nocando.play()),c&&window.open(a,"_blank"))}},O7973:function(a){this.O7959()&&(a=ig.game.strings.replaceAll(a,
"http://thingistan.com/","/"),a=ig.game.strings.replaceAll(a,"https://thingistan.com/","/"));jQuery.ajax({type:"GET",url:a,dataType:"html",success:function(b){var c=0<=b.indexOf('<body id="body">')?'<body id="body">':"<body>";if(b=ig.game.strings.O1651(b,c,"</body>"))-1===a.indexOf("/info-mobile")&&-1===a.indexOf("/info-steam")&&(b+='<div class="buttonPart"><a href="javascript:ig.game.alertDialog.O2305()" class="okButton">OK</a></div>'),b=ig.game.strings.replaceAll(b,"<script>",'<div style="display: none">'),
b=ig.game.strings.replaceAll(b,"<script ",'<div style="display: none" '),b=ig.game.strings.replaceAll(b,"\x3c/script>","</div>"),b=ig.game.strings.replaceAll(b,"\x3c!-- <ignore-if-inline> --\x3e","\x3c!-- "),b=ig.game.strings.replaceAll(b,"\x3c!-- </ignore-if-inline> --\x3e"," --\x3e"),b=ig.game.strings.replaceAll(b,"\x3c!-- <include-if-inline>",""),b=ig.game.strings.replaceAll(b,"<include-if-inline> --\x3e",""),c=["inlineHtmlHelp"],ig.game.isFullAccount&&c.push("isFullAccount"),b='<div class="'+
c.join(" ")+'">'+b+"</div>",ig.game.alertDialog.open(b,!0,null,null,!0,!0,!0)}})},O6727:function(a){return ig.game.blockedTypesForTest&&0<=ig.game.blockedTypesForTest.indexOf(a)},O5563:function(a,b,c){var d="";if(ig.game.painter){d=[];for(var e=0;e<a.length;e++){var f=ig.game.painter.O4799(a[e]);d[e]=f?ig.game.painter.types[f].title:a[e]}2<=d.length&&(b?d[d.length-1]="and "+d[d.length-1]:c&&(d[d.length-1]="or "+d[d.length-1]));d=d.join(", ");b?d=ig.game.strings.replaceAll(d,", and "," and "):c&&(d=
ig.game.strings.replaceAll(d,", or "," or "))}return d},O4612:function(a,b){var c=0;if("string"===typeof a)for(var d=a.length,e=0;e<d;e++)c+=a.charCodeAt(e);return c%b+1},O3472:function(a){if(ig.game.O4873.O8027==1&&"12345678".split("").includes(ig.game.areaId)&&this.getTimestampFromObjectId(a)<new Date("2024-03-01T00:00:00Z"))return"//archival.offlineland.io/creations/sprite/"+a;var b="";1<ig.game.O4214&&(b=this.O4612(a,ig.game.O4214));var c="i image1 image2 image3 image4 image5 image6 image7 image8 image9 image10".split(" ");
""!=b&&0<=b&&b<c.length||(b=0);return"//"+c[b]+".thingistan.com/"+a},O6657:function(a,b,c,d,e,f){var g=ig.Font.ALIGN.CENTER;void 0===d&&(d=1);void 0===e&&(e=.35);void 0===f&&(f=.85);ig.system.context.globalAlpha=e*d;ig.game.blackSmallFont.draw(a,b-1,c,g);ig.game.blackSmallFont.draw(a,b+1,c,g);ig.game.blackSmallFont.draw(a,b,c-1,g);ig.game.blackSmallFont.draw(a,b,c+1,g);ig.system.context.globalAlpha=f*d;ig.game.whiteSmallFont.draw(a,b,c,g);ig.system.context.globalAlpha=1},getTimestampFromObjectId:function(a){a=
a.toString().substring(0,8);return new Date(1E3*parseInt(a,16))},O4943:function(a){var b=null;a&&(b=(new Date-Date.parse(a))/1E3/60/60/24);return b},getNonCryptographicHash:function(a){for(var b=a.length,c=100^b,d=0,e;4<=b;)e=a.charCodeAt(d)&255|(a.charCodeAt(++d)&255)<<8|(a.charCodeAt(++d)&255)<<16|(a.charCodeAt(++d)&255)<<24,e=1540483477*(e&65535)+((1540483477*(e>>>16)&65535)<<16),e^=e>>>24,e=1540483477*(e&65535)+((1540483477*(e>>>16)&65535)<<16),c=1540483477*(c&65535)+((1540483477*(c>>>16)&65535)<<
16)^e,b-=4,++d;switch(b){case 3:c^=(a.charCodeAt(d+2)&255)<<16;case 2:c^=(a.charCodeAt(d+1)&255)<<8;case 1:c^=a.charCodeAt(d)&255,c=1540483477*(c&65535)+((1540483477*(c>>>16)&65535)<<16)}c^=c>>>13;c=1540483477*(c&65535)+((1540483477*(c>>>16)&65535)<<16);return(c^c>>>15)>>>0},O4952:function(a){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b},O4650:function(a,b,c){switch(c){case "CHANGER":ig.game.painter.O1285(a,b)}},O6388:function(){var a=window.addEventListener?"addEventListener":"attachEvent";
(0,window[a])("attachEvent"==a?"onmessage":"message",function(b){var c=b.message?"message":"data";switch(b[c].internal_target){case "userScriptManager":ig.game.userScriptManager.receiveMessageFromExternal(b[c]);break;case "brainManager":ig.game.brainManager.receiveMessageFromExternal(b[c]);break;case "happening":if(ig.game.O7606.isRunning&&ig.game.O7606.O6567&&0===ig.game.O7606.O6567.indexOf("happening_"))for(var d=0;d<ig.game.O7606.entities.length;d++){var e=ig.game.O7606.entities[d];e&&!e._killed&&
e.subChannel==b[c].internal_subChannel&&e.receiveMessageFromExternal(b[c])}if(ig.game.O5119&&ig.game.O5119.default)for(d=0;d<ig.game.O5119.default.length;d++)(e=ig.game.O5119.default[d])&&!e._killed&&e.subChannel==b[c].internal_subChannel&&e.receiveMessageFromExternal(b[c]);break;default:ig.game.O2116.receiveMessageFromExternal(b[c])}},!1)},O5615:function(a,b,c,d){var e=!1;d?e=ig.game.O1973:a&&!ig.game.O3120?e=!1:ig.game.O7899?"INDIVIDUALS"==ig.game.O5549&&(e=2<=b||ig.game.O4512||!ig.game.isEditorHere&&
c||!ig.game.O1257.isFullAccount):e=a||c;return!!e},O7862:function(a,b,c){var d={pos:ig.game.O4507(b.pos),size:ig.game.O4507(b.size)};b.attachments&&b.attachments.b&&b.attachments.b.animSheet&&b.attachments.b.animSheet.height&&(d.size={x:b.attachments.b.animSheet.width,y:b.attachments.b.animSheet.height},d.pos={x:b.pos.x-b.offset.x,y:b.pos.y-b.offset.y});c&&(d.pos.x-=c,d.pos.y-=c,d.size.x+=2*c,d.size.y+=2*c);return a.touches(d)},O1184:function(){if(ig.game.isFullAccount){ig.game.O1168=!ig.game.O1168;
ig.game.virtualJoystick&&ig.game.virtualJoystick.O3702();ig.game.virtualKeyboard&&ig.game.virtualKeyboard.O3187();ig.game.O3957&&ig.game.O3957.O8040();ig.game.camera&&ig.game.camera.setOffset();ig.game.instrumentDialog&&ig.game.instrumentDialog.O4816(!0);if(!ig.game.O1168&&ig.game.panelSet){var a=ig.game.panelSet.panels[ig.game.panelSet.tabEnum.search];a&&a.isOpen&&a.O8351()}ig.game.boostDialog&&ig.game.boostDialog.isOpen&&ig.game.boostDialog.reInit()}},O6718:function(){if(ig.game.O1257&&ig.game.O1257.O9832("seeAllItems")){var a=
"background environment O9824 default light betweenDefaultAndPlayer player O7367 foreground O8780 liquid O2259 decoEffects farBack O5983".split(" ");ig.system.context.globalCompositeOperation="lighter";for(var b=0;b<a.length;++b)for(var c=a[b],d=0;d<ig.game.O5119[c].length;++d){var e=ig.game.O5119[c][d];ig.game.chance(4)&&(e instanceof EntityLight||e instanceof EntityLighttop||e instanceof EntityVignette||e instanceof EntityFilllight||e instanceof EntityEnvironm||e instanceof EntityInteract||e instanceof
EntityInterenv||e instanceof EntityHarm||e instanceof EntityHarmanim||e instanceof EntityDynathing||e instanceof EntityHappening||e instanceof EntityDeadly||e instanceof EntityDeadlymv||e instanceof EntityDeadlyem||e instanceof EntityCrumbling||e instanceof EntityPlacename||e instanceof EntityGather||e instanceof EntityFarback||e instanceof EntityMusic)&&ig.game.decorator.O2468(e.pos.x,e.pos.y,e.size.x,e.size.y,!1,1)}ig.system.context.globalCompositeOperation="source-over"}},O5894:function(){ig.game.O9405+=
.25;ig.game.O9405>=ig.game.O9925&&(ig.game.O9405=0);ig.game.O5698+=.175;ig.game.O5698>=ig.game.O9925&&(ig.game.O5698=0)},O3072:function(){ig.ua.mobile&&!ig.game.O5992&&void 0!=window.orientation&&ig.system.width<ig.system.height!=(0==window.orientation||180==window.orientation)&&(console.log("Reloading - adjust to orientation"),ig.game.O5992=!0,window.location.reload())},O6107:function(){if(ig.game.areaDrift&&0!=ig.game.areaDrift.speed){var a=ml.Misc.O1555(ig.system.tick);ig.game.backgroundMaps[0].areaDriftOffset.x-=
a.x;ig.game.backgroundMaps[0].areaDriftOffset.y-=a.y}},O1555:function(a){a||=1;a*=2*ig.game.areaDrift.speed;var b=.7*a;return{a270:{x:0,y:a},a315:{x:-b,y:b},a0:{x:-a,y:0},a45:{x:-b,y:-b},a90:{x:0,y:-a},a135:{x:b,y:-b},a180:{x:a,y:0},a225:{x:b,y:b}}["a"+ig.game.areaDrift.angle]},O9216:function(a){a.x+=ig.game.areaAngleDriftVelocity.x;a.y+=ig.game.areaAngleDriftVelocity.y},O1673:function(){return ig.ua.isIOsUIWebView||ig.ua.kindle},O8290:function(){!ig.game.O1332&&ig.game.alertDialog&&ig.game.isFullAccount&&
ig.game.O1257&&4<=ig.game.O9392&&2<=ig.game.O1257.rank&&(ig.game.O1332=!0,!ig.ua.iPad&&!ig.ua.phone||ig.game.O1189.check(ig.game.O1189.types.SAW_DIALOG_REVIEW_MOBILE)?ig.ua.steam&&!ig.game.O1189.check(ig.game.O1189.types.SAW_DIALOG_REVIEW_STEAM)?ig.game.O1189.register(ig.game.O1189.types.SAW_DIALOG_REVIEW_STEAM):ig.game.O1189.check(ig.game.O1189.types.SAW_DIALOG_MOBILE_VERSION_AVAILABLE)||ig.game.O1189.register(ig.game.O1189.types.SAW_DIALOG_MOBILE_VERSION_AVAILABLE):ig.game.O1189.register(ig.game.O1189.types.SAW_DIALOG_REVIEW_MOBILE))},
O7268:function(){if(!ig.game.isFullAccount&&!ig.ua.phone&&!ig.game.O2393&&ig.game.O4223&&ig.game.O1257&&ig.game.O1257.firstMoveTimer&&45<=ig.game.O1257.firstMoveTimer.delta()&&ig.game.O1257.vel&&0==ig.game.O1257.vel.x&&0==ig.game.O1257.vel.y&&!ig.game.alertDialog.isOpen){if(!localStorage.getItem("didSeeTrailer")){var a=!1,b=ig.system.realWidth/2,c=ig.system.O5809/2;ig.system.O5809>ig.system.realWidth?(b=ig.system.realWidth-10,a=!0):ig.ua.phone&&(b=ig.system.realWidth-70,c=ig.system.O5809-50,a=!0);
b=ml.Misc.O7125(b,c);ig.game.alertDialog.open({html:b,doShowBig:a,O5358:!0,fullyOpaque:!0,O3244:!0,O2890:!0,O9608:!0,O8739:!0});ig.game.O5285.setItem("didSeeTrailer","1")}ig.game.O2393=!0}},O7125:function(a,b){a&&b||(a=560,b=315);return'<iframe width="'+a+'" height="'+b+'" sandbox="allow-scripts allow-same-origin allow-pointer-lock allow-presentation" src="//www.youtube.com/embed/WPiqZT2HSHU?rel=0&amp;showinfo=0&amp;autoplay=1&amp;autohide=1" frameborder="0" allowfullscreen></iframe>'},O2425:function(){if(!(ig.game.O1257&&
ig.game.O1257.attachments&&ig.game.O1257.attachments.br)&&ig.ua.isFramed){var a=8;ig.game.O2694&&8>=ig.game.O2694.delta()&&(a=.5);ig.game.O5758||(ig.game.O5758=new ml.Timer);ig.game.O5758.delta()>=a&&(window.focus(),ig.game.O5758=new ml.Timer)}},O5557:function(){1<=ig.game.O1257.rank&&ig.game.O4482&&ig.game.isFullAccount?ig.game.isEditorHere?(ig.game.wasEditorHere=!0,ig.game.isEditorHere=!1,ig.game.O3554=ig.game.isEditorHere,ig.game.O1168=!1,ig.game.attachmentManager.O1177(ig.game.O1257),ig.game.panelSet.O6043(),
ig.game.camera.setOffset(),ig.game.decorator.O3835()):ig.game.wasEditorHere?(delete ig.game.wasEditorHere,ig.game.isEditorHere=!0,ig.game.O3554=ig.game.isEditorHere,ig.game.O1168=!0,ig.game.panelSet.O6043(),ig.game.camera.setOffset()):ig.game.sounds.nocando.play():ig.game.sounds.nocando.play()},O9689:function(a,b,c,d){d.animSheet&&(a.size.x=d.animSheet.width,a.size.y=d.animSheet.height,a.size.x!=ig.game.O9925||a.size.y!=ig.game.O9925)&&(a.pos.x=Math.round(b+ig.game.O2953-a.size.x/2),a.pos.y=Math.round(c+
ig.game.O9925-a.size.y))},O5701:function(a,b){var c=null,d=ig.game.O5119.default;if(d)for(var e=0;e<d.length;e++){var f=d[e];if(f instanceof b&&!f._killed&&a.touches(f)){c=f;break}}return c},getGridNeighborOfTypes:function(a,b){for(var c,d=-1;1>=d;d++)for(var e=-1;1>=e;e++)if(0!=d||0!=e){var f=ig.game.O6112.O8617({x:a.x+d,y:a.y+e});if((f&&=ig.game.O4261.getItemBasic(f.tid,"mlf_misc"))&&0<=b.indexOf(f.base)){c=f;break}}return c},O4671:function(a){var b=null,c=ig.game.O5119.player;if(c)for(var d=0;d<
c.length;d++){var e=c[d];if(!e._killed&&e.O2970==a){b=e;break}}return b},O8763:function(a){ig.game.O4334?ig.game.O1257&&ig.game.O1257.rank>=ig.game.O3166&&(2<=ig.game.O1257.rank||ig.game.isEditorHere)?5>ig.game.O1257.rank&&ig.game.O4873.O9498()&&ig.game.O4223?ig.game.O1257.say(ig.game.O4873.O6566()):ig.game.alertDialog.O5816("Paste URL (special support for YouTube, TikTok, Twitch, Imgur, Snapshots and SoundCloud):",a,function(b){null!=b&&""!=b&&(ml.Misc.O8199(b,ig.game.O1257.O2970)?ml.Misc.O3903(b,
ig.game.O1257.O2970,null,!0):ig.game.sounds.nocando.play())},null,null,!0):ig.game.O1002.O7063():ig.game.O5058.O8943("cantPasteHere")},O8199:function(a,b){var c=!1;b=ml.Misc.O4671(b);a&&"string"==typeof a&&""!=a&&b&&(c=0<=a.toLowerCase().indexOf("imgur")&&!b.isEditorHere?3:2,c=b.rank>=c&&ig.game.mediaDialog&&ig.game.mediaDialog.O5329(a)&&-1===a.indexOf("%30"));return c},O3903:function(a,b,c,d){var e=!1;ig.game.O1257&&(a=ig.game.strings.replaceAll(a,"http://soundcloud.com/","https://soundcloud.com/"),
!ig.game.O1257.O9832("mutesAll")&&!ig.game.O1257.O9832("mutesPastes")&&!(-1===a.indexOf("soundcloud.com")&&ig.game.writableDialog&&ig.game.writableDialog.isOpen)&&((e=ig.game.panelSet&&ig.game.panelSet.musicPlayer&&ig.game.panelSet.musicPlayer.O8469(a,b,c,d))?d=!1:e=ig.game.mediaDialog&&ig.game.mediaDialog.O8469(a,b,c)),!e&&ig.game.mediaDialog&&ig.game.mediaDialog.O5329(a)&&!c&&(b=ml.Misc.O4671(b))&&b.O3592(a,!0),d&&ig.game.O7836.O8548(a));return e},O3249:function(a,b){var c=!1;if(a&&b&&200>=b.length){b=
b.split(",");for(var d=0;d<b.length;d++){var e=ig.game.strings.trim(b[d]);if(3<=e.length&&0<=a.indexOf(e)){c=!0;break}}}return c},O1215:function(a){return"number"===typeof a&&a==parseInt(a)},O8674:function(a,b){var c=a.x-b.x;a=a.y-b.y;return Math.sqrt(c*c+a*a)},O2350:function(a){return ml.Misc.O5498({r:a[0],g:a[1],b:a[2]})},O6983:function(a){a=ml.Misc.O8488(a);return[a.r,a.g,a.b]},O5498:function(a){var b=[a.r,a.g,a.b];a=b[0];var c=b[1];var d=b[2];var e=Math.min(a,c,d);b=Math.max(a,c,d);var f=b-e;
if(0!=b)e=f/b;else return{hue:-1,saturation:0,value:0};a=60*(a===b?(c-d)/f:c===b?2+(d-a)/f:4+(a-c)/f);0>a&&(a+=360);isNaN(a)&&(a=0);return{hue:a,saturation:e,value:b}},O8488:function(a){a=[a.hue,a.saturation,a.value];var b;var c=a[0];var d=a[1];a=a[2];if(0===d)return b=d=a,{r:Math.floor(b).limit(0,255),g:Math.floor(d).limit(0,255),b:Math.floor(a).limit(0,255)};c/=60;b=Math.floor(c);var e=c-b;c=a*(1-d);var f=a*(1-d*e);e=a*(1-d*(1-e));switch(b){case 0:b=a;d=e;a=c;break;case 1:b=f;d=a;a=c;break;case 2:b=
c;d=a;a=e;break;case 3:b=c;d=f;break;case 4:b=e;d=c;break;default:b=a,d=c,a=f}return{r:Math.floor(b).limit(0,255),g:Math.floor(d).limit(0,255),b:Math.floor(a).limit(0,255)}},O4966:function(){ig.game.O1808&&ig.game.O1808.delta()>ig.game.O4245&&(ig.game.O1808.reset(),ig.game.O7836.O3650())},O7959:function(){return 0===window.location.href.indexOf("http://localhost")},O9058:function(a,b){return a+(b-a)*Math.random()},distort:function(a){return ml.Misc.O9058(-a,a)},O3863:function(a,b){var c=b.x-a.x;a=
b.y-a.y;return Math.sqrt(c*c+a*a)},O4413:function(){var a="",b={GG:"Google",DC:"Discord",AA:"Apple Account"};ig.game.O1568&&b[ig.game.O1568]&&(a=b[ig.game.O1568]);return a},O3431:function(){ig.game.namePxWidth=ig.game.whiteFont.O2880(ig.game.O1257.screenName);ig.game.healthBar.O4884(7,3)},O9329:function(){0>ig.game.O9149?(ig.game.O9149+=.1,0<ig.game.O9149&&(ig.game.O9149=0)):0<ig.game.O9149&&(ig.game.O9149-=.1,0>ig.game.O9149&&(ig.game.O9149=0));ig.game.O7736<ig.game.O9149?ig.game.O7736+=10*ig.system.tick:
ig.game.O7736>ig.game.O9149&&(ig.game.O7736-=10*ig.system.tick)},O2168:function(){"#_=_"==window.location.hash?(window.location.replace("#"),"function"==typeof window.history.replaceState&&history.replaceState({},"",window.location.href.slice(0,-1))):(0<=window.location.href.indexOf("?fb_ref=Default")||0<=window.location.href.indexOf("?post_id="))&&window.history&&window.history.pushState(void 0,void 0,"/"+(ig.game.O1460?ig.game.O1460:""))},O7790:function(a,b){void 0==a&&(a=!1);void 0==b&&(b=50>=
ig.game.O4293(0,100));var c=ig.game.O4293(0,181),d=80>=ig.game.O4293(0,100)?1:2,e=1;b=b?"m":"f";a||(e=ig.game.O4293(1,2),d=ig.game.O4293(1,3));return c+"-"+d+"-"+e+"-"+b},O9680:function(a){return a.x>=ig.game.screen.x&&a.x<=ig.game.screen.x+ig.system.width&&a.y>=ig.game.screen.y&&a.y<=ig.game.screen.y+ig.system.height},O7695:function(){if(ig.game.painter&&ig.game.O1795&&"pickColor"==ig.game.painter.O2190&&ig.input.pressed("click")){var a=Math.floor(ig.input.mouse.x*ig.system.scale),b=Math.floor(ig.input.mouse.y*
ig.system.scale),c=null;try{c=ig.system.context.getImageData(a,b,1,1)}catch(d){ig.game.errorManager.warn("getImageData exception for world color picking");return}c&&(a=c.data)&&ig.game.painter.O7502({r:a[0],g:a[1],b:a[2],alpha:1})}},O9059:function(a){return(a=document.cookie.match("(^|;)\\s*"+a+"\\s*=\\s*([^;]+)"))?a.pop():""},O9359:function(){},O5740:function(a,b){var c=setInterval(function(){a&&(clearInterval(c),b())},10)},O8590:function(){var a=!1;try{require("process")}catch(b){a=!0}a||ig.game.errorManager.O3802("Client privileged access check error")},
O2504:function(a){return ig.game.isLocal?"//localhost:8787/def/"+a:ig.game.O4873.O8027==1&&"12345678".split("").includes(ig.game.areaId)&&this.getTimestampFromObjectId(a)<new Date("2024-03-01T00:00:00Z")?"//archival.offlineland.io/creations/def/"+a:"//def.thingistan.com/"+a}}});ig.baked=!0;
ig.module("game.entities.decorative.footdust").requires("impact.entity").defines(function(){window.EntityFootdust=ig.Entity.extend({size:{x:6,y:5},maxVel:{x:100,y:100},friction:{x:0,y:0},type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,opacity:90,O2351:240,decorative:!0,init:function(a,b,c){this.parent(a,b,c);this.animSheet=new ml.AnimationSheet(null,this.size.x,this.size.y,ig.game.O8159.getImage(ig.game.O8159.dust));this.O2027=0;this.vel.y=Math.floor(-10*Math.random()+
2);this.vel.x=Math.floor((60*Math.random()+10)*c.direction);this.addAnim("main",1,[0])},update:function(){this.opacity-=this.O2351*ig.system.tick;0>=this.opacity&&(this.opacity=0,this.kill());this.parent()},draw:function(){ig.system.context.globalAlpha=.01*this.opacity;this.parent();ig.system.context.globalAlpha=1},O2550:function(a){this.pos.x+=this.vel.x*ig.system.tick;this.pos.y+=this.vel.y*ig.system.tick},check:function(){}})});ig.baked=!0;
ig.module("game.entities.deadplayer").requires("impact.entity").defines(function(){window.EntityDeadPlayer=ig.Entity.extend({size:{x:16,y:19},offset:{x:3,y:3},maxVel:{x:100,y:500},friction:{x:0,y:0},type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,O7422:!0,O8060:0,O2618:0,O8418:!1,O9095:400,O1918:200,O8088:!1,O8376:!0,O7318:80,init:function(a,b,c){this.parent(a,b,c);this.player.attachments.b?(this.animSheet=this.player.attachments.b.animSheet,this.addAnim("death",
1,[6])):(this.animSheet=this.player.animSheet,this.addAnim("death",1,[5]));this.O8393=this.anims.death;this.O8393.flip.x=this.O8418;this.O8060=ml.Misc.O9058(-.125,.125);this.deathType==ig.game.deathTypes.FALL?(this.vel.y=500,ig.game.sounds.O9396(ig.game.sounds.dieFalling,this),this.O8088&&(ig.game.cameraTrackPlayer=!1)):this.deathType==ig.game.deathTypes.FOCUS?this.O7318=1:this.deathType==ig.game.deathTypes.POISON?ig.game.sounds.dieOfPoison.play():(this.vel.y=-400,this.vel.x=Math.floor(400*Math.random()-
200),ig.game.sounds.die.play())},update:function(){this.O2618++;this.O2618>this.O7318&&(this.kill(),this.O8088&&ig.game.O9710.died(this.deathType));this.O8393&&(this.O8393.angle+=this.O8060);this.parent()},draw:function(){this.deathType==ig.game.deathTypes.FALL&&ig.game.decorator.O6524(this);this.parent()},O2550:function(a){this.pos.x+=this.vel.x*ig.system.tick;this.pos.y+=this.vel.y*ig.system.tick}})});ig.baked=!0;
ig.module("game.ui.components.uiclicktext").defines(function(){window.UIClickText=ig.Class.extend({O8072:!1,isHovered:!1,O8112:!0,pos:{x:0,y:0},size:{x:0,y:0},O1378:!0,parent:null,margin:0,align:null,init:function(a,b,c,d,e,f,g){this.pos=a;this.text=b;this.font=c;this.color=d;this.alpha=e;this.size.x=this.text?this.font.O2880(this.text):0;this.size.y=this.font.height;f&&(this.O8112=!1);g&&(this.align=ig.Font.ALIGN.CENTER)},O3550:function(a){this.text=a;this.size.x=this.text?this.font.O2880(this.text):
0;this.size.y=this.font.height},update:function(){if(this.O8112){if(this.O8072=(this.isHovered=ig.game.O4774.O8299(this.pos.x-this.margin,this.pos.y-this.margin,this.pos.x+this.size.x+this.margin,this.pos.y+this.size.y+this.margin))&&ig.game.O4774.O4920())ig.game.O4774.O6730(!0),this.O9023();return this.O8072}},O9023:function(){this.onClick()},onClick:function(){},draw:function(){if(this.text){var a=ig.system.context.globalAlpha;ig.system.context.globalAlpha=this.alpha;this.O3653(this.text,this.font,
this.color,this.pos.x,this.pos.y);ig.system.context.globalAlpha=a}},O3653:function(a,b,c,d,e){var f=this.font==ig.game.blackWhiteFont?1:0;b.draw(a,d,e,this.align);a=b.O2880(a);b=b.height-1;if(this.O8112){var g=ig.system.context;g.webkitImageSmoothingEnabled=!1;g.mozImageSmoothingEnabled=!1;this.O1378&&(this.align==ig.Font.ALIGN.CENTER&&(d-=a/2),this.font==ig.game.blackWhiteFont&&this.O8279(g,d+f,e,a,b),g.lineWidth=ig.system.scale,g.strokeStyle=c,g.beginPath(),g.moveTo(d*ig.system.scale-1+f*ig.system.scale,
(e+b)*ig.system.scale),g.lineTo((d+a)*ig.system.scale-1+f*ig.system.scale,(e+b)*ig.system.scale),g.stroke())}},O8279:function(a,b,c,d,e){for(var f=-1;1>=f;f++){var g=0==f?1:0;a.lineWidth=ig.system.scale;a.strokeStyle="rgba(0,0,0,.6)";a.beginPath();a.moveTo((b-g)*ig.system.scale-1,(c+e+f)*ig.system.scale);a.lineTo((b+d+g)*ig.system.scale-1,(c+e+f)*ig.system.scale);a.stroke()}},remove:function(){}})});ig.baked=!0;
ig.module("game.ui.speechdisplayline").requires("game.ui.components.uiclicktext").defines(function(){window.SpeechDisplayLine=ig.Class.extend({relpos:{x:0,y:0},basepos:{x:0,y:0},offset:{x:4,y:-14},O5338:20,O7634:2.2,O5713:5,O7220:6,O3989:8.8,timer:null,moving:!1,fading:!1,fadingIn:!0,full:!1,deleting:!1,ySpeed:-6,yAccel:0,O8814:1,expired:!1,keys:[],clickText:null,font:null,opacity:.3,O5357:.8,O4353:0,O9423:!1,isAmplified:!1,O2310:10,O5448:0,O2993:.7,O1298:.1,O5468:0,O3915:0,O7178:!1,O9851:1,O9411:0,
O4362:"",init:function(a,b,c,d,e){this.basepos=a;this.O9423=b;this.font=e?e:ig.game.blackWhiteFont;this.timer=new ml.Timer;this.isAmplified=!!c;d&&(this.O5338=d)},addItem:function(a){if("introHelp"==a){if(ig.game.lastTimeIntroHelpSpoken&&15>=ig.game.lastTimeIntroHelpSpoken.delta())return;ig.game.lastTimeIntroHelpSpoken=new ml.Timer}if(this.O9423&&"_~"==a)this.keys.pop();else if(this.O9423&&"_|"==a)this.deleting=this.moving=this.full=!0;else if(this.keys.push(a),this.O3421(a),this.O9423){var b=this.O2728().length;
"_c "==a&&b>this.O5338?this.moving=this.full=!0:b>1.5*this.O5338&&(this.moving=this.full=!0)}else this.O2728().length>this.O5338&&(this.moving=this.full=!0);this.O9423&&!this.full&&(this.timer=new ml.Timer)},update:function(a){this.atPos(a)||(this.moving=this.full=!0);this.clickText&&this.clickText.update();this.O9423?(!this.moving&&this.timer.delta()>this.O7220&&(this.moving=!0),!this.fading&&this.timer.delta()>this.O3989&&(this.fading=!0)):(!this.moving&&this.timer.delta()>this.O7634&&(this.moving=
!0),!this.fading&&this.timer.delta()>this.O5713&&(this.fading=!0));this.moving&&(-6<this.relpos.y?this.relpos.y+=3*this.ySpeed*ig.system.tick:(this.relpos.y+=this.ySpeed*ig.system.tick,this.ySpeed+=this.yAccel*ig.system.tick));this.fading&&(this.opacity=Math.max(0,this.opacity-this.O8814*ig.system.tick));this.fadingIn&&(this.opacity=Math.min(this.O5357,this.opacity+this.O8814*ig.system.tick),this.opacity==this.O5357&&(this.fadingIn=!1));this.deleting&&!this.isEmpty()&&this.keys.pop();0==this.opacity&&
(this.expired=!0);this.keys.length!=this.O9411&&(this.O9411=this.keys.length,this.O4362=this.O2728(),this.O3915=Math.floor(this.font.O2880(this.O4362)/2));this.O3915>this.O5468&&(this.O7178||(this.O5448=this.O2993,this.O7178=!0),this.O5448=this.O3915-this.O5468<=this.O9851?Math.max(0,this.O5448-this.O1298):this.O2993,this.moving||(this.O5468=Math.min(this.O3915,this.O5468+this.O5448)),this.O3915<=this.O5468&&(this.O7178=!1))},draw:function(){var a=this.basepos.x+this.relpos.x+this.offset.x-ig.game._rscreen.x,
b=this.basepos.y+this.relpos.y+this.offset.y-ig.game._rscreen.y,c=this.O4362;"_thumbsUp"==this.keys[0]||"_thumbsDown"==this.keys[0]?(a-=this.O3915,"_thumbsUp"==this.keys[0]&&ig.game.O8159.O4832(a-4,b-1,this.opacity),a+=10):ig.game.speechData.vocabularySets.en[this.keys[0]]&&(a-=this.O3915);this.clickText?(this.clickText.pos.x=a,this.clickText.pos.y=b,this.clickText.alpha=this.opacity,this.clickText.draw()):this.isAmplified?this.O8672(c,a,b):this.O4909(c,a,b)},O4909:function(a,b,c){ig.system.context.globalAlpha=
this.opacity;this.font.draw(a,b-this.O5468,c,ig.Font.ALIGN.LEFT);ig.system.context.globalAlpha=1},O8672:function(a,b,c){b-=this.O5468;1>=this.timer.delta()?this.O4353=this.opacity:this.O4353-=.01;if(0<this.O4353){ig.system.context.globalAlpha=.25*this.O4353;for(var d=-1;1>=d;d++)for(var e=-1;1>=e;e++)0==d&&0==e||this.font.draw(a,b+d,c+e,ig.Font.ALIGN.LEFT)}ig.system.context.globalAlpha=this.opacity;this.font.draw(a,b,c,ig.Font.ALIGN.LEFT);ig.system.context.globalAlpha=1},shiftUp:function(){},isFull:function(){return this.full},
isEmpty:function(){return 1>this.keys.length},O6623:function(){return!this.moving&&!this.isFull()},O5879:function(){this.moving=this.full=!0},atPos:function(a){return this.basepos.x-this.O2310<a.x&&this.basepos.x+this.O2310>a.x&&this.basepos.y-this.O2310<a.y&&this.basepos.y+this.O2310>a.y},O2728:function(){for(var a="",b,c=0;c<this.keys.length;c++)if("_"!=this.keys[c].charAt(0))a+=ig.game.speechData&&ig.game.speechData.vocabulary[this.keys[c]],c<this.keys.length-1&&(a+=" ");else{b=this.keys[c].substr(2);
if("i"==this.keys[c].charAt(1)){var d=ig.game.O4261.getItemBasic(b,"ui_sdl");a+=d?d.name:"";c<this.keys.length-1&&(a+=" ")}"p"==this.keys[c].charAt(1)&&(d=ig.game.O7465(b),!d&&b==ig.game.O1257.O2970&&(d=ig.game.O1257),a+=d?d.screenName:"",c<this.keys.length-1&&(a+=" "));"c"==this.keys[c].charAt(1)&&(a+=this.keys[c].charAt(2))}return a},O3421:function(a){if("_thumbsDown"==a||"_thumbsUp"==a){var b=this.basepos.x+this.relpos.x+this.offset.x,c=this.basepos.y+this.relpos.y+this.offset.y;"_thumbsUp"==a&&
ig.game.sounds.O4843(ig.game.sounds.clap,{x:b,y:c})}}})});ig.baked=!0;
ig.module("game.ui.speechdisplay").requires("game.ui.speechdisplayline").defines(function(){window.SpeechDisplay=ig.Class.extend({O9300:[],pos:{x:0,y:0},player:null,O1363:0,O1860:null,init:function(a){this.player=a},update:function(a){this.pos=a;for(var b=0;b<this.O9300.length;b++)this.O9300[b].update(a),this.openPlayerProfileIfRightClicked(this.O9300[b]),this.O9300[b].expired&&(this.O9300[b]=null,this.O9300.splice(b,1))},openPlayerProfileIfRightClicked:function(a){if(ig.game.O4774.O3044()){var b=a.basepos.x+
a.relpos.x+a.offset.x-ig.game._rscreen.x,c=a.basepos.y+a.relpos.y+a.offset.y-ig.game._rscreen.y+4;ig.input.mouse.x>=b-a.O5468&&ig.input.mouse.x<=b+a.O5468&&ig.input.mouse.y>=c-4&&ig.input.mouse.y<=c+4&&this.player&&this.player.O2970&&(ig.game.sounds.click.play(),ig.game.O4774.O5457(),ig.game.playerDialog.openForPlayerId(this.player.O2970))}},draw:function(){for(var a=0;a<this.O9300.length;a++)this.O9300[a].draw()},O8237:function(a,b){a=ig.game.strings.replaceAll(a,"_s","");for(b=0;b<a.length;b++)this.addItem("_c"+
a.charAt(b))},O1423:function(){this.O1363=0;this.O1860=null},O9483:function(){var a=0;if(this.O9300)for(var b=0;b<this.O9300.length;b++)this.O9300[b]&&this.O9300[b].keys&&(a+=this.O9300[b].keys.length);return a},addItem:function(a,b,c){var d=this.O9483()+a.length;if(75<a.length||250<d)c&&(c.exceededMax=!0);else{if((!(!ig.game.isFullAccount||this.player.O8088||ig.game.settings&&ig.game.settings.showBlockedPeopleSpeech)&&ig.game.O8518.O5167(this.player.O2970)||0>=this.player.rank)&&"_nl"!=a)if(2>=this.O1363){if(a=
"_c.",this.O1363++,null==this.O1860){var e=this;this.O1860=setTimeout(function(){e.O1423()},3E4)}}else return;else if(0===a.indexOf("_s")){10>=this.O9300.length&&this.O8237(a,b);return}"_nl"==a?this.O5805()&&this.O5805().O6623()&&this.O5805().O5879():(c=this.O5805())&&c.O6623()?c.addItem(a):"_~"!=a&&"_|"!=a&&this.addLine(a,b)}},O5805:function(){return this.O9300[this.O9300.length-1]},addLine:function(a,b){var c=this.player.O5341();c=new SpeechDisplayLine(this.pos,ig.game.O5058.isKeyFreeSpeech(a),
b,null,c);c.addItem(a);this.O9300.push(c);if(1<this.O9300.length)for(c=0;c<this.O9300.length-1;c++)this.O9300[c].shiftUp()},O4505:function(a,b,c,d,e){var f=b&&(0<=b.indexOf("http://thingistan.com/#")||0<=b.indexOf("https://thingistan.com/#")||0<=b.indexOf("http://localhost:8787/#"));f&&(a="-> find");c=new SpeechDisplayLine(this.pos,!0,d,c?100:0);e&&(c.font=e);for(e=0;e<a.length;e++){var g=a.substring(e,e+1);c.addItem("_c"+g)}d&&(c.O5357=.5);b&&!ig.game.strings.O2646(b)&&(0<=navigator.userAgent.indexOf("Firefox")&&
(ig.game.O7965=!1),c.clickText=new UIClickText({x:0,y:0},a,ig.game.blackWhiteFont,"#FFFFFF",c.opacity),c.clickText.align=ig.Font.ALIGN.CENTER,c.clickText.onClick=f?function(){var h=b.substring(b.indexOf("/#")+2);ig.game.O9817.O2699(h).done(function(k){k&&void 0!=k.x&&void 0!=k.y&&ig.game.O2453.O2847(k)})}:function(){ml.Misc.openUrl(b)});c.O7220=c.O7634;c.full=!0;this.O9300.push(c);if(1<this.O9300.length)for(a=0;a<this.O9300.length-1;a++)this.O9300[a].shiftUp()},O9279:function(){this.O5805()&&this.O5805().O5879()}})});
ig.baked=!0;
ig.module("game.core.item").requires("mlframe.image","mlframe.misc").defines(function(){window.Item=function(a){this.id=a;this.imageURL="test"==ig.game.mlenv||"production"==ig.game.mlenv?ml.Misc.O3472(this.id):this.localMediaPath+this.id;this.name="";this.colType=null;this.slope=this.flippable=this.rotatable=this.fg=!1;this.defRot=0;this.base=this.creatorId=null;this.isALiquid=this.givesBackFill=this.takesBackFill=!1;this.img=null;this.transformedImageData=[];this.imagesGenerated=!1;this.transformedImages=[];
this.basicDataLoading=null;this.basicDataLoaded=!1;this.dataLoading=null;this.dataLoadFailed=this.dataLoaded=!1;this.tileHeightScaled=this.tileWidthScaled=this.scaledHeight=this.scaledWidth=null;this.imagesBeingGenerated=new jQuery.Deferred;this.imagesBeingGeneratedPromise=this.imagesBeingGenerated.promise();this.basicDataLoading=new jQuery.Deferred;this.dataLoading=new jQuery.Deferred;this.tileWidthScaled=ig.game.O9925*ig.system.scale;this.tileHeightScaled=ig.game.O9925*ig.system.scale};window.Item.prototype.localMediaPath=
"i/";window.Item.prototype.O9462=function(a,b){this.optionalCreationInfo=b;ml.Misc.O6727(a.base)?this.basicDataLoading.reject():this.basicDataLoaded||((!a||!a.base)&&ig.game.errorManager.warn("item O9462 called with no data/base for",this.id),this.O1351(a),this.basicDataLoading.resolve(),this.basicDataLoaded=!0)};window.Item.prototype.O4191=function(a){ml.Misc.O6727(a.base)?this.dataLoading.reject():this.dataLoaded||(this.basicDataLoaded||this.O1351(a),this.dataLoadFailed=!1,this.creatorId=a.creator,
a.prop&&a.prop.musicData&&(this.musicData=a.prop.musicData),a.prop&&a.prop.textData&&(this.textData=a.prop.textData),a.prop&&a.prop.thingRefs&&(this.thingRefs=a.prop.thingRefs),this.dataLoading.resolve(),this.dataLoaded=!0,this.basicDataLoaded||(this.basicDataLoading.resolve(),this.basicDataLoaded=!0))};window.Item.prototype.O1351=function(a){this.base=a.base;void 0!==a.name&&(this.name=a.name);this.isALiquid="LQDFLIP"==this.base||"LIQUID"==this.base;this.takesBackFill=!("SOLID"==this.base||this.isALiquid||
"DECOBG"==this.base||"WALKABLE"==this.base);this.givesBackFill="DECOBG"==this.base||this.isALiquid||"WALKABLE"==this.base;a.prop&&(void 0!==a.prop.rgb&&(this.rgb=a.prop.rgb),void 0!==a.prop.rgb2&&(this.rgb2=a.prop.rgb2),void 0!==a.prop.pitch&&(this.pitch=a.prop.pitch),void 0!==a.prop.ins&&(this.ins=a.prop.ins),void 0!==a.prop.oct&&(this.oct=a.prop.oct),void 0!==a.prop.useKeyword&&(this.useKeyword=a.prop.useKeyword&&a.prop.useKeyword.toLowerCase()),void 0!==a.prop.clonedFrom&&(this.clonedFrom=a.prop.clonedFrom),
void 0!==a.prop.changerId&&(this.changerId=a.prop.changerId),void 0!==a.prop.backTileCount&&(this.backTileCount=a.prop.backTileCount),void 0!==a.prop.specs&&(this.specs=a.prop.specs),void 0!==a.prop.atKeyword&&(this.atKeyword=a.prop.atKeyword&&a.prop.atKeyword.toLowerCase()),void 0!==a.prop.getId&&(this.getId=a.prop.getId),void 0!==a.prop.hasId&&(this.hasId=a.prop.hasId),void 0!==a.prop.holdableId&&(this.holdableId=a.prop.holdableId),void 0!==a.prop.protectPercent&&(this.protectPercent=a.prop.protectPercent),
void 0!==a.prop.wearableId&&(this.wearableId=a.prop.wearableId),void 0!==a.prop.emitsId&&(this.emitsId=a.prop.emitsId),void 0!==a.prop.secPerTransform&&(this.secPerTransform=a.prop.secPerTransform),void 0!==a.prop.environmentId&&(this.environmentId=a.prop.environmentId),void 0!==a.prop.soundId&&(this.soundId=a.prop.soundId),void 0!==a.prop.motionId&&(this.motionId=a.prop.motionId),void 0!==a.prop.boundingBox&&(this.boundingBox=a.prop.boundingBox),void 0!==a.prop.boundingBox2&&(this.boundingBox2=a.prop.boundingBox2),
void 0!==a.prop.rptype&&(this.rptype=a.prop.rptype),a.prop.offset&&(this.mountOffset=a.prop.offset),void 0!==a.prop.text&&(this.text=a.prop.text),void 0!==a.prop.url&&(this.url=a.prop.url),void 0!==a.prop.creditUrl&&(this.creditUrl=a.prop.creditUrl),void 0!==a.prop.throwDirection&&(this.throwDirection=a.prop.throwDirection),void 0!==a.prop.thingRefs&&(this.thingRefs=a.prop.thingRefs),void 0!==a.prop.reactsTo&&(this.reactsTo=a.prop.reactsTo),void 0!==a.prop.checksNears&&(this.checksNears=a.prop.checksNears),
void 0!==a.prop.textSize&&(this.textSize=a.prop.textSize),void 0!==a.prop.info&&(this.info=a.prop.info),a.prop.attr&&(ig.game.O2082.O3713(a),a.prop.attributes&&(this.attributes=ig.game.O2082.O5656(a.prop.attributes),this.horizontalBackFillOnly=this.attributes.horizontalOnly,this.verticalBackFillOnly=this.attributes.verticalOnly)));this.name&&("DECOBG"==this.base||"DECO"==this.base)&&0<=this.name.toLowerCase().indexOf("window")&&(this.givesBackFill=this.takesBackFill=!1);this.attributes&&(this.attributes.dontTakeAutoFill&&
(this.takesBackFill=!1),this.attributes.takeAutoFill&&(this.takesBackFill=!0),this.attributes.dontGiveAutoFill&&(this.givesBackFill=!1));this.defRot=a.defRot||0;this.colType=Item.prototype.BASE_TYPES[this.base]?Item.prototype.BASE_TYPES[this.base].ct:0;this.fg=Item.prototype.BASE_TYPES[this.base]&&1==Item.prototype.BASE_TYPES[this.base].fg&&!(this.attributes&&this.attributes.behind)||this.attributes&&this.attributes.inFront;this.rotatable=Item.prototype.BASE_TYPES[this.base]&&1==Item.prototype.BASE_TYPES[this.base].rotatable;
this.flippable=Item.prototype.BASE_TYPES[this.base]&&1==Item.prototype.BASE_TYPES[this.base].flippable;this.slope=Item.prototype.BASE_TYPES[this.base]&&1==Item.prototype.BASE_TYPES[this.base].slope;0<=ig.game.O6703.indexOf(this.base)&&"DYNATHING"!=this.base&&"HAPPENING"!=this.base&&"MUSICSHEET"!=this.base&&"FARBACK"!=this.base&&"TRANSFORM"!=this.base&&(this.needsOffsetDuringDrag=!0);this.O4790()};window.Item.prototype.O4790=function(){if(!ig.game.avoidDrawing){var a=this.imageURL;this.O9915();this.img=
new ml.Image(a,this.O5010,this,void 0)}};window.Item.prototype.O5010=function(a){this.O6282(a)};window.Item.prototype.O9915=function(){ig.game.numberOfImagesLoading||(ig.game.numberOfImagesLoading=0);ig.game.numberOfImagesLoading++};window.Item.prototype.O4560=function(){ig.game.numberOfImagesLoading--};window.Item.prototype.O6282=function(a){var b=Date.now();a?(this.scaledWidth=this.img&&this.img.width<=ig.game.O9925?this.img.width:ig.game.O9925,this.scaledHeight=this.img?this.img.height:ig.game.O9925,
this.scaledWidth*=ig.system.scale,this.scaledHeight*=ig.system.scale,this.cellCount=1,"MOTION"==this.base||"INTERMOT"==this.base||"HOLDER"==this.base?(this.cellCount=3,this.scaledWidth=this.img.width/this.cellCount*ig.system.scale,this.scaledHeight=this.img.height*ig.system.scale):"DYNATHING"==this.base||"HAPPENING"==this.base?(this.cellCount=this.img?this.img.width/29:1,this.scaledWidth=this.img.width/this.cellCount*ig.system.scale,this.scaledHeight=this.img.height*ig.system.scale):"FARBACK"==this.base||
"TRANSFORM"==this.base?(this.cellCount=this.img?this.img.width/ig.game.O4975:1,this.scaledWidth=this.img.width/this.cellCount*ig.system.scale,this.scaledHeight=this.img.height*ig.system.scale):"MUSICSHEET"==this.base?(this.cellCount=this.img?this.img.width/32:1,this.scaledWidth=this.img.width/this.cellCount*ig.system.scale,this.scaledHeight=this.img.height*ig.system.scale):"DECOFB"==this.base||"MULTITHING"==this.base?(this.cellCount=2,this.scaledWidth=this.img.width/this.cellCount*ig.system.scale):
0<=ig.game.O6703.indexOf(this.base)||"EMITTER"==this.base||"AIMABLE"==this.base?this.cellCount=2:"STACKWEAR"==this.base&&this.img&&this.img.width>2*ig.game.O9925?(this.cellCount=2,this.scaledWidth=ig.game.O4975*ig.system.scale):"STACKWEARB"==this.base?(this.cellCount=this.img.width/ig.game.O1828!=parseInt(this.img.width/ig.game.O1828)?ig.game.O6965:ig.game.O1828,this.scaledWidth=this.img.width/this.cellCount*ig.system.scale,this.scaledHeight=this.img.height*ig.system.scale):"DECOBIG"==this.base||
"DECOVBIG"==this.base||"POINTER"==this.base||"PLACENAME"==this.base||"LIVING"==this.base?this.img&&(this.scaledWidth=this.img.width*ig.system.scale,this.scaledHeight=this.img.height*ig.system.scale):a.width>this.tileWidthScaled&&(a.width==this.tileWidthScaled*ig.game.maxCells?this.cellCount=ig.game.maxCells:a.width==this.tileWidthScaled*ig.game.O1828?this.cellCount=ig.game.O1828:a.width==this.tileWidthScaled*ig.game.O6965&&(this.cellCount=ig.game.O6965)),this.tileWidthScaled=this.scaledWidth,this.tileHeightScaled=
this.scaledHeight,this.transformedImageData[0]=a,this.imagesGenerated=!0,this.imagesBeingGenerated.resolve(),this.O4560(),a=Date.now()-b,ig.game.imageGenTime=ig.game.imageGenTime?ig.game.imageGenTime+a:a):(console.log("Failed to load imgData for item "+this.id),ig.game.errorManager.warn("Image loading for "+this.base+" failed in O6282",this.id),this.dataLoadFailed=!0)};window.Item.prototype.O6270=function(a,b){var c=this.O9302(this.tileWidthScaled,this.tileHeightScaled,this.cellCount),d=c.getContext("2d"),
e=a+4*b;if(1==e)d.translate(this.tileWidthScaled/2,this.tileHeightScaled/2),d.rotate(Math.PI/2),d.drawImage(this.transformedImageData[0],-this.tileWidthScaled/2,-this.tileHeightScaled/2),1<this.cellCount&&d.drawImage(this.transformedImageData[0],-this.tileWidthScaled/2-this.tileWidthScaled,-this.tileHeightScaled/2-this.tileHeightScaled);else if(2==e)d.translate(this.tileWidthScaled/2,this.tileHeightScaled/2),d.rotate(Math.PI/2*2),d.drawImage(this.transformedImageData[0],-this.tileWidthScaled/2,-this.tileHeightScaled/
2),1<this.cellCount&&d.drawImage(this.transformedImageData[0],-this.tileWidthScaled/2-2*this.tileWidthScaled,-this.tileHeightScaled/2);else if(3==e)d.translate(this.tileWidthScaled/2,this.tileHeightScaled/2),d.rotate(Math.PI/2*3),d.drawImage(this.transformedImageData[0],-this.tileWidthScaled/2,-this.tileHeightScaled/2),1<this.cellCount&&d.drawImage(this.transformedImageData[0],-this.tileWidthScaled/2-this.tileWidthScaled,-this.tileHeightScaled/2+this.tileHeightScaled);else if(4<=e){var f,g;this.transformedImageData[4]?
f=this.transformedImageData[4]:(f=this.O9302(this.tileWidthScaled,this.tileHeightScaled,this.cellCount),g=f.getContext("2d"),g.translate(this.tileWidthScaled,0),g.scale(-1,1),g.drawImage(this.transformedImageData[0],0,0));4==e?c=f:5==e?(d.translate(this.tileWidthScaled/2,this.tileHeightScaled/2),d.rotate(Math.PI/2),d.drawImage(f,-this.tileWidthScaled/2,-this.tileHeightScaled/2)):6==e?(d.translate(this.tileWidthScaled/2,this.tileHeightScaled/2),d.rotate(Math.PI/2*2),d.drawImage(f,-this.tileWidthScaled/
2,-this.tileHeightScaled/2)):7==e?(d.translate(this.tileWidthScaled/2,this.tileHeightScaled/2),d.rotate(Math.PI/2*3),d.drawImage(f,-this.tileWidthScaled/2,-this.tileHeightScaled/2)):console.log("Bad seq no. (a)",a,b)}else console.log("Bad seq no. (b)",a,b);return c};window.Item.prototype.O9302=function(a,b,c){var d=document.createElement("canvas");d.width=a*c;d.height=b;return d};window.Item.prototype.draw=function(a,b,c,d,e,f){1!==e&&(ig.system.context.globalAlpha=e);c=c||0;d=d||0;a=ig.system.O8551(a);
b=ig.system.O8551(b);this.needsOffsetDuringDrag&&(this.scaledWidth=this.img.width/2*ig.system.scale,a-=this.img.width/4,b-=this.img.height/2);this.imagesGenerated&&(c=this.getImageDataCanvasForDraw(c,d),this.O1292()?ig.system.context.drawImage(c,0,0,this.scaledWidth,this.scaledHeight,a,b,this.scaledWidth,this.scaledHeight):(c||console.log("rotated image data is null! - is this a non-rotatable item with rotation set?"),ig.system.context.drawImage(c,0,0,this.scaledWidth,this.scaledHeight,a,b,this.scaledWidth,
this.scaledHeight),f&&(ig.system.context.globalAlpha=1,ig.system.context.drawImage(c,f*this.scaledWidth,0,this.scaledWidth,this.scaledHeight,a,b,this.scaledWidth,this.scaledHeight))));1!==e&&(ig.system.context.globalAlpha=1)};window.Item.prototype.O5334=function(a,b,c,d,e){this.O3927()||this.draw(a,b,c,d,e)};window.Item.prototype.getImageDataCanvasForDraw=function(a,b){var c=a+4*b;this.transformedImageData[c]||(this.transformedImageData[c]=this.O6270(a,b));return this.transformedImageData[c]};window.Item.prototype.getImageForRotationFlip=
function(a,b){this.imagesGenerated||(console.log("getImageForRotationFlip Called before images finished generating"),ig.game.errorManager.warn("getImageForRotationFlip Called before images finished generating",this.name));return this.O1292()?this.getImageDataCanvasForDraw(0,0):this.getImageDataCanvasForDraw(a,b)};window.Item.prototype.O3675=function(a,b){return Item.prototype.BASE_TYPES[this.base]?(b=Item.prototype.BASE_TYPES[this.base].ct,1==b.length?b[0]:b[a]):Item.prototype.COL_TYPES.PASSABLE_UP};
window.Item.prototype.O5083=function(){return Item.prototype.BASE_TYPES[this.base]?Item.prototype.BASE_TYPES[this.base].name:""};window.Item.prototype.O5293=function(){return Item.prototype.BASE_TYPES[this.base]?Item.prototype.BASE_TYPES[this.base].verbose?Item.prototype.BASE_TYPES[this.base].verbose:Item.prototype.BASE_TYPES[this.base].name:""};window.Item.prototype.destroy=function(){};window.Item.prototype.isBouncey=function(){return Item.prototype.BASE_TYPES[this.base]==Item.prototype.BASE_TYPES.BOUNCEY};
window.Item.prototype.O8755=function(){ig.game.typesSafeForRespawn||(ig.game.typesSafeForRespawn=[Item.prototype.BASE_TYPES.SOLID,Item.prototype.BASE_TYPES.SLIDEY,Item.prototype.BASE_TYPES.WALKABLE,Item.prototype.BASE_TYPES.PASS]);return 0<=ig.game.typesSafeForRespawn.indexOf(Item.prototype.BASE_TYPES[this.base])};window.Item.prototype.isSticky=function(){return Item.prototype.BASE_TYPES[this.base]==Item.prototype.BASE_TYPES.STICKY};window.Item.prototype.O6387=function(){return Item.prototype.BASE_TYPES[this.base]==
Item.prototype.BASE_TYPES.SLIDEY||Item.prototype.BASE_TYPES[this.base]==Item.prototype.BASE_TYPES.SLSLOPE};window.Item.prototype.O5381=function(){return Item.prototype.BASE_TYPES[this.base]==Item.prototype.BASE_TYPES.CLIMB||Item.prototype.BASE_TYPES[this.base]==Item.prototype.BASE_TYPES.WALKABLE||this.attributes&&this.attributes.climbable};window.Item.prototype.isLiquid=function(){return this.isALiquid};window.Item.prototype.O5419=function(){return Item.prototype.BASE_TYPES[this.base]==Item.prototype.BASE_TYPES.DECO};
window.Item.prototype.O5244=function(){return Item.prototype.BASE_TYPES[this.base]==Item.prototype.BASE_TYPES.PUSH};window.Item.prototype.O9694=function(){return Item.prototype.BASE_TYPES[this.base]==Item.prototype.BASE_TYPES.PUSHDIAG};window.Item.prototype.O1292=function(){return Item.prototype.BASE_TYPES[this.base]==Item.prototype.BASE_TYPES.MOVING||Item.prototype.BASE_TYPES[this.base]==Item.prototype.BASE_TYPES.DEADLYMV};window.Item.prototype.O3538=function(){return Item.prototype.BASE_TYPES[this.base].O7172};
window.Item.prototype.O3927=function(){return Item.prototype.BASE_TYPES[this.base]&&"E"==Item.prototype.BASE_TYPES[this.base].imp};window.Item.prototype.O4927=function(){var a=this.base&&this.base.toLowerCase();return"Entity"+(a&&a.charAt(0).toUpperCase()+a.slice(1))};window.Item.prototype.COL_TYPES={NOT_APPLICABLE:0,NO_COLLISION:0,SOLID:1,SLOPE_LD:2,SLOPE_RD:24,SLOPE_RU:35,SLOPE_LU:13,BOUNCEY_LD:82,BOUNCEY_RD:84,BOUNCEY_RU:86,BOUNCEY_LU:88,SLSLOPE_LD:92,SLSLOPE_RD:94,SLSLOPE_RU:96,SLSLOPE_LU:98,
SLIDEY_UP:200,STICKY:201,BOUNCEY_UP:202,BOUNCEY_RIGHT:203,BOUNCEY_DOWN:204,BOUNCEY_LEFT:205,PASSABLE_UP:12,PASSABLE_RIGHT:34,PASSABLE_DOWN:23,PASSABLE_LEFT:45,PASSABLE_SLOPE_LD:110,PASSABLE_SLOPE_RD:111,PASSABLE_SLOPE_LU:112,PASSABLE_SLOPE_RU:113};window.Item.prototype.BASE_TYPES={SOLID:{name:"solid",imp:"T",ct:[Item.prototype.COL_TYPES.SOLID],fg:!0,rotatable:!0,publicKey:"solid"},SLOPE:{name:"slope",imp:"T",ct:[Item.prototype.COL_TYPES.SLOPE_LD,Item.prototype.COL_TYPES.SLOPE_RD,Item.prototype.COL_TYPES.SLOPE_RU,
Item.prototype.COL_TYPES.SLOPE_LU],rotatable:!0,slope:!0,fg:!0,publicKey:"slope"},PASSSLOPE:{name:"pass. slope",imp:"T",ct:[Item.prototype.COL_TYPES.PASSABLE_SLOPE_LD,Item.prototype.COL_TYPES.PASSABLE_SLOPE_RD,Item.prototype.COL_TYPES.PASSABLE_SLOPE_RU,Item.prototype.COL_TYPES.PASSABLE_SLOPE_LU],rotatable:!0,slope:!0,fg:!0,verbose:"passable slope",publicKey:"passableSlope"},SLIDEY:{name:"slidey",imp:"T",ct:[Item.prototype.COL_TYPES.SLIDEY_UP],fg:!0,rotatable:!0,publicKey:"slidey"},SLSLOPE:{name:"slidey sl.",
imp:"T",ct:[Item.prototype.COL_TYPES.SLSLOPE_LD,Item.prototype.COL_TYPES.SLSLOPE_RD,Item.prototype.COL_TYPES.SLSLOPE_RU,Item.prototype.COL_TYPES.SLSLOPE_LU],rotatable:!0,slope:!0,fg:!0,verbose:"slidey slope",publicKey:"slideySlope"},STICKY:{name:"sticky",imp:"T",ct:[Item.prototype.COL_TYPES.STICKY],fg:!0,rotatable:!0,publicKey:"sticky"},BOUNCEY:{name:"bouncy",imp:"T",ct:[Item.prototype.COL_TYPES.BOUNCEY_UP,Item.prototype.COL_TYPES.BOUNCEY_RIGHT,Item.prototype.COL_TYPES.BOUNCEY_DOWN,Item.prototype.COL_TYPES.BOUNCEY_LEFT],
rotatable:!0,publicKey:"bouncy"},DECOBG:{name:"back",imp:"T",ct:[Item.prototype.COL_TYPES.NO_COLLISION],rotatable:!0,publicKey:"back"},DECO:{name:"thing",imp:"T",ct:[Item.prototype.COL_TYPES.NO_COLLISION],rotatable:!0,flippable:!0,publicKey:"thing"},DECOFG:{name:"thing frnt.",imp:"T",ct:[Item.prototype.COL_TYPES.NO_COLLISION],fg:!0,rotatable:!0,flippable:!0,verbose:"thing in front",publicKey:"thingInFront"},MIFT:{name:"mift",imp:"T",ct:[Item.prototype.COL_TYPES.NO_COLLISION],publicKey:"mift"},DECOFB:{name:"back+front",
imp:"E",ct:[Item.prototype.COL_TYPES.NO_COLLISION],rotatable:!0,publicKey:"backAndFront"},MULTITHING:{name:"multi",imp:"E",ct:[Item.prototype.COL_TYPES.NO_COLLISION],publicKey:"multi"},DECOACT:{name:"chang. on activ.",imp:"E",ct:[Item.prototype.COL_TYPES.NO_COLLISION],rotatable:!0,verbose:"changing on activator",publicKey:"changingOnActivator"},GATHER:{name:"gatherable",imp:"E",ct:[Item.prototype.COL_TYPES.NO_COLLISION],rotatable:!0,publicKey:"gatherable"},DECOTCH:{name:"chang. on touch",imp:"E",
ct:[Item.prototype.COL_TYPES.NO_COLLISION],rotatable:!0,verbose:"changing on touch",publicKey:"changingOnTouch"},PUSH:{name:"pushing",imp:"T",ct:[Item.prototype.COL_TYPES.NO_COLLISION],fg:!0,rotatable:!0,publicKey:"pushing"},PUSHDIAG:{name:"dgn. pushing",imp:"T",ct:[Item.prototype.COL_TYPES.NO_COLLISION],fg:!0,rotatable:!0,verbose:"diagonal pushing",publicKey:"pushingDiagonal"},CLIMB:{name:"climbable",imp:"T",ct:[Item.prototype.COL_TYPES.NO_COLLISION],rotatable:!0,publicKey:"climbable"},WALKABLE:{name:"walkable",
imp:"T",ct:[Item.prototype.COL_TYPES.NO_COLLISION],rotatable:!0,publicKey:"walkable"},PASS:{name:"one-way",imp:"T",ct:[Item.prototype.COL_TYPES.PASSABLE_UP,Item.prototype.COL_TYPES.PASSABLE_RIGHT,Item.prototype.COL_TYPES.PASSABLE_DOWN,Item.prototype.COL_TYPES.PASSABLE_LEFT],rotatable:!0,publicKey:"oneWay"},DEADLY:{name:"deadly",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],rotatable:!0,publicKey:"deadly"},MOVING:{name:"moving",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],rotatable:!0,
O7172:!0,publicKey:"moving"},DEADLYMV:{name:"deadly mv.",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],rotatable:!0,O7172:!0,verbose:"deadly moving",publicKey:"deadlyMoving"},LIVMOV:{name:"mov. living",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],verbose:"moving living",publicKey:"movingLiving"},ACTIVATOR:{name:"activator",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],rotatable:!0,publicKey:"activator"},OPENABLE:{name:"open on activ.",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],
rotatable:!0,O7172:!0,verbose:"open on activate",publicKey:"openOnActivate"},PORTAL:{name:"transport.",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],verbose:"transporting",rotatable:!0,publicKey:"transporting"},PORTALDIR:{name:"dir. transp.",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],rotatable:!0,verbose:"directional transporting",publicKey:"directionalTransporting"},PORTALR:{name:"ring portal",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],publicKey:"ringPortal"},CRUMBLING:{name:"crumbling",
imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],O7172:!1,publicKey:"crumbling"},THROWER:{name:"item thrower",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],O7172:!0,publicKey:"itemThrower"},NEEDSITEM:{name:"needs item",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE]},DEADLYEM:{name:"deadly emerging",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],rotatable:!0,publicKey:"deadlyEmerging"},LQDFLIP:{name:"flp. liquid",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],publicKey:"flippingLiquid"},
LIQUID:{name:"liquid",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],publicKey:"liquid"},HARM:{name:"harmful",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],rotatable:!0,publicKey:"harmful"},HARMANIM:{name:"chang. harmful",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],verbose:"changing harmful",publicKey:"changingHarmful"},MEDIUM:{name:"medium",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],publicKey:"medium"},ENVIRONM:{name:"environm.",imp:"E",ct:[Item.prototype.COL_TYPES.NO_COLLISION],
verbose:"environment",publicKey:"environment"},LIVING:{name:"living",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],publicKey:"living"},INTERACT:{name:"interacting",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],publicKey:"interacting"},INTERMOT:{name:"int. motion",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],verbose:"interacting motion",publicKey:"interactingMotion"},LIVANIM:{name:"chang. living",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],verbose:"changing living",publicKey:"changingLiving"},
DECOFLIP:{name:"flipn deco",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],verbose:"flipping decorative",publicKey:"flippingDecorative"},DECOANIM:{name:"chng. thing",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],rotatable:!0,verbose:"changing thing",publicKey:"changingThing"},SPARKLING:{name:"sparkling",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],rotatable:!0,publicKey:"sparkling"},FLEXIBLE:{name:"flexible",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],publicKey:"flexible"},
POINTER:{name:"pointer",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],publicKey:"pointer"},PLACENAME:{name:"place name",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],publicKey:"placeName"},WRITABLE:{name:"writable",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],rotatable:!0,flippable:!0,publicKey:"writable"},READABLE:{name:"readable",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],rotatable:!0,flippable:!0,publicKey:"readable"},DECOBIG:{name:"big thing",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],
flippable:!0,publicKey:"bigThing"},DECOVBIG:{name:"very big thing",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],flippable:!0,publicKey:"veryBigThing"},FARBACK:{name:"far back",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],publicKey:"farBack"},FURRY:{name:"furry",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],publicKey:"furry"},GENERATOR:{name:"generator",imp:"T",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],verbose:"area generator",publicKey:"generator"},DRIFTY:{name:"drifty",
imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],publicKey:"drifty"},CLOTHY:{name:"clothy",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],publicKey:"clothy"},LIVELY:{name:"lively thing",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],publicKey:"livelyThing",rotatable:!0},VIEWABLE:{name:"viewable",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],rotatable:!0,publicKey:"viewable"},DYNATHING:{name:"dynamic",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],rotatable:!1,publicKey:"dynamic"},
TRANSFORM:{name:"transforming",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],rotatable:!1,publicKey:"transforming"},HAPPENING:{name:"happening",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],rotatable:!1,publicKey:"happening"},CHANGER:{name:"changer",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],rotatable:!1,publicKey:"changer"},BRAIN:{name:"brain",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],rotatable:!1,publicKey:"brain"},LINER:{name:"liner",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],
rotatable:!1,publicKey:"liner"},SOUND:{name:"sound",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],rotatable:!1,publicKey:"sound"},BOUNCEYT:{name:"bouncy tilt",imp:"T",ct:[Item.prototype.COL_TYPES.BOUNCEY_LD,Item.prototype.COL_TYPES.BOUNCEY_RD,Item.prototype.COL_TYPES.BOUNCEY_RU,Item.prototype.COL_TYPES.BOUNCEY_LU],rotatable:!0,slope:!0,publicKey:"bouncyTilt"},LIGHT:{name:"light",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],rotatable:!0,publicKey:"light"},LIGHTTOP:{name:"top light",
imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],rotatable:!0,publicKey:"topLight"},VIGNETTE:{name:"surround light",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],rotatable:!1,publicKey:"surroundLight"},HELPER:{name:"helper",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],rotatable:!0,flippable:!0,publicKey:"helper"},HOLDER:{name:"holder",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],rotatable:!1,publicKey:"holder"},FILLLIGHT:{name:"fill light",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],
rotatable:!0,publicKey:"fillLight"},GLOW:{name:"light glow",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],fg:!0,publicKey:"lightGlow"},MUSICAL:{name:"musical",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],rotatable:!1,publicKey:"musical"},MUSIC:{name:"music",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],rotatable:!0,publicKey:"music"},MUSICSHEET:{name:"music sheet",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],rotatable:!1,publicKey:"musicSheet"},STACKHOLD:{name:"item",
imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],publicKey:"item"},EMITTER:{name:"emitter",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],publicKey:"emitter"},AIMABLE:{name:"aimable",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],publicKey:"aimable"},INTERENV:{name:"int. environment",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],verbose:"interactive environment",publicKey:"interactiveEnvironment"},EQUIPMENT:{name:"equipment",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],
publicKey:"equipment"},CONSUMAB:{name:"consumable",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],publicKey:"consumable"},HOOK:{name:"swing line",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],publicKey:"swingLine"},STACKWEAR:{name:"wearable",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],publicKey:"wearable"},STACKWEARB:{name:"body",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],publicKey:"body"},MOVER:{name:"mover",imp:"T",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],publicKey:"mover"},
MNTGROUND:{name:"mountable",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],publicKey:"mountable"},MNTAIR:{name:"flying mountable",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],publicKey:"flyingMountable"},MNTWATER:{name:"swimming mountable",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE]},STACKINSTR:{name:"instrument",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],publicKey:"instrument"},MOTION:{name:"motion",imp:"E",ct:[Item.prototype.COL_TYPES.NOT_APPLICABLE],rotatable:!1,
publicKey:"motion"}};window.Item.prototype.drawCount=0});ig.baked=!0;
ig.module("game.entities.player").requires("impact.entity","game.entities.decorative.footdust","game.entities.deadplayer","game.ui.speechdisplay","game.core.item").defines(function(){window.EntityPlayer=ig.Entity.extend({toString:function(){return"PLAYER"},NAME:"PLAYER",O307:1,O6917:.79,O6038:1.6,O9438:300,O2790:40,isFullAccount:!1,isSitting:!1,O6581:null,O6285:null,isLying:!1,O7234:null,O9495:0,O4118:50,O1443:40,O2889:500,O4552:400,voice:null,type:ig.Entity.TYPE.A,O7852:ig.Entity.TYPE.B,collides:ig.Entity.COLLIDES.PASSIVE,
size:{x:10,y:16},sizeDefault:{x:10,y:16},sizeBigBody:{x:38,y:38},offset:{x:3,y:3},offsetDefault:{x:3,y:3},maxVel:{x:130,y:600},O2828:{x:700,y:700},maxVelPushingDiagonal:{x:450,y:450},O4662:{x:105,y:105},maxVelWalkable:{x:130,y:130},O8554:{x:95,y:105},O4623Thick:{x:47.5,y:52.5},O8926:{x:130,y:500},O2624:{x:130,y:600},O3599:{x:130,y:600},maxVelHooked:{x:192,y:96},maxVelMountableGround:{x:180,y:600},maxVelMountableAir:{x:180,y:220},O3226:!1,friction:{x:900,y:0},O8960:{x:0,y:0},O2527:{x:4E5,y:4E5},O9985:{x:400,
y:200},O8685:{x:90,y:0},frictionWalking:{x:900,y:0},O4781:{x:900,y:0},O9338:{x:200,y:0},O4700MountableGround:{x:200,y:0},frictionMountableAir:{x:100,y:0},O1484:{x:400,y:0},saidIntroHelp:!1,isFriendedByUs:!1,O7436:null,O6644:!1,O1832:null,O6373:null,O8418:!1,O9095:1300,O7044:1300,O1918:900,O2180:900,O6960:120,O5525:120,O7112:80,O2075:600,O6109:120,O6792:500,O3036:{x:300,up:300,down:200},O8335:80,O2885:null,O1440:350,O2027:1,O9764:1,O7129:.1,O325Wearable:.1,O3350:.7,O3045:.05,health:100,O4116:100,energy:100,
maxEnergy:100,canJump:!0,O8088:!1,unfindable:!1,O6593:!1,O9960:null,O9165:0,O4583:{RUNNING:0,CLIMBING:1,SWIMMING:2},O5479:null,O4075:null,O2047:{x:0,y:0},O1282:.6,O4944:0,O5993:null,O9372:null,screenName:"explorer",rank:1,O1757:.6,footsoundProbabilityRunning:.02,O4485:null,O2204:.5,O2284:null,O8995:50,O3465:.1,O1193:.08,O9855:{},O9943:null,O9090:null,lastMouse:{},O3029:200,O1286:null,prevVel:{x:0,y:0},O7341:null,O6755:null,blinkTime:.12,O6781:1.3,O2456:1,O4939:120,O6652:120,thingBelowPlayerOffset:{x:4,
y:21},O4188Offset:{x:4,y:8},O1373LeftPlayerOffset:{x:0,y:8},O1373RightPlayerOffset:{x:8,y:8},O4188sFeetOffset:{x:4,y:15},O4188sHeadOffset:{x:4,y:4},thingToLeftOfPlayerOffset:{x:-10,y:8},thingToRightOfPlayerOffset:{x:20,y:8},O7392:!1,O4395:{},maskAlpha:0,O1050:100,O4239:100,O1036:.2,O1823:.3,O8222:.6,rolling:!1,O4391:0,O9280:1,angle:0,twoPi:2*Math.PI,isDead:!1,isHovered:!1,O8072:!1,O9247:.4,swimAngle:.4,O1583:.003,O6391:7,O3185:.1,O3825:null,O4777:3,O4855:null,hasMoved:!1,O6761:!1,attachments:{},attachmentDrawOffsets:{wearable:{lx:-2,
rx:-1,bx:-1,cx0:-1,cx1:-1,y:-3},holdable:{lx:10,rx:7,bx:0,cx0:0,cx1:0,y:10},holdableSmall:{lx:12,rx:4,bx:0,cx0:0,cx1:0,y:12}},attachmentDefaultPivots:{wearable:{x:9,y:12.5},holdable:{x:7,y:7}},O4670:0,O8538:null,O9704:null,lastGain:{},O8376:!0,O8313:null,O5801:[],boostData:null,O6622:{w:{x:0,y:0},h:{x:0,y:0},wp:{x:0,y:0}},O4569:{},O9668:{},init:function(a,b,c){this.parent(a,b,c);this.animSheet=new ml.AnimationSheet(ig.game.O1946+"media/avatar-spritesheets/"+this.O1436+".png?v="+ig.game.version,16,
19);this.avatarLoadedPromise=this.animSheet.loadedPromise;var d=this;this.O1152();this.O1440=this.O9438;this.O2027=this.O9764=this.O307;this.O8088&&(this.O9943=new ml.Timer,this.checkedAutoTriggerForIdle=!1,a=localStorage.amIFlippedX,this.spriteFlippedXCached=this.O8418="1"==a?!0:"0"==a?!1:ig.game.chance(50));this.O8393.flip.x=this.O8418;this.O6755=new ml.Timer;this.O4855=new SpeechDisplay(this);this.O8088?(this.allIs=[],this.O1558(),this.O8362(),this.isFullAccount=ig.game.isFullAccount,this.saidIntroHelp=
!!localStorage.getItem("saidIntroHelp"),this.isEditorHere=ig.game.isEditorHere,ig.game.O3554=ig.game.isEditorHere):(ig.game.isFullAccount&&ig.game.O8518.O1906(this.O2970,this).done(function(e){d.isFriendedByUs=e}),this.removeFromAllIs=this.O1227=this.saveAreaAllIsData=this.O8362=null);"string"!=typeof this.voice&&(this.voice=null)},O1152:function(){var a=this.O8393&&this.O8393.name;this.addAnim("idle",1,[0]);this.addAnim("run",.15,[1,0]);this.addAnim("jump",1,[2]);this.addAnim("fall",1,[3]);this.addAnim("climbing",
.2,[6,7]);this.addAnim("climbingidle",1,[6]);this.addAnim("swimming",.15,[1,0]);this.addAnim("swimmingidle",1,[1]);this.addAnim("creating",.4,[8,9]);this.addAnim("afk",1,[10]);this.addAnim("harm",1,[5]);a&&this.setAnim(this.anims[a])},setAnim:function(a){a&&(this.O8393=a,this.O6767=a.O1812Index,this.O8393.flip.x=this.O8418,this.O8088&&this.spriteFlippedXCached!=this.O8418&&ig.game.chance(3)&&(this.spriteFlippedXCached=this.O8418,localStorage.amIFlippedX=this.O8418?"1":"0"))},O2757:function(a,b){this.O8393.flip.x=
this.O8418=b;"number"===typeof a?this.O6767!==a&&this.setAnim(this.O1980[a]):this.O8393!=this.anims[a]&&this.setAnim(this.anims[a])},update:function(){ig.game.O3447.O7703(this);if(!this.O8088&&void 0===this.O9165)if(this.O4743(),this.O7926(),this.O1560(),3>=ig.game.O4873.O9593(this.pos))this.O9165=this.O4583.running;else return;if(!(this.O7787||this.O4206||this.O8088&&ig.game.portaller.O7787||this.O8088&&ig.game.portaller.O4206||(this.O3226=this.O1642(),this.O8088||ig.game.O8518.O8683(this),this.O7661()))){this.isOnSolidMoverBody=
!1;this.O8422();if(this.O8088){void 0!=ig.game.O3554&&ig.game.isEditorHere&&ig.game.O3554!=ig.game.isEditorHere&&ig.game.O9817.O3796();ig.game.areaClosed||this.O2395();this.O7572();this.O7139();this.O3135();this.O4229();this.handleHarmfulStuck();this.O8951();ig.game.O9968.O5896(this);if(0!=this.vel.x||0!=this.vel.y)this.O9381=!1;this.O9960&&.2<=this.O9960.delta()&&(this.O9960=null,!(ig.game.holderDialog&&ig.game.holderDialog.O1176()||ig.game.O1257.O2868()||ig.game.O1257.O4292())&&ig.game.playerDialog.O7845());
this.miniJumpTimer&&.5<=this.miniJumpTimer.delta()&&(this.miniJumpTimer=null);this.O1557();var a=ig.game.otherAreaWasFullInfo?10:2.5;!(ig.game.isFullAccount||!ig.game.O3310||this.saidIntroHelp||0!=ig.game.O6550||ig.game.alertDialog&&ig.game.alertDialog.isOpen)&&ig.game.O2694&&ig.game.O2694.delta()>=a&&(this.saidIntroHelp=!0,ig.game.O5285.setItem("saidIntroHelp",this.saidIntroHelp),ig.game.O5058.O8943("introHelp"))}else this.checkLadderInteraction_Remoteplayer(),this.O4057();this.O2221();this.O404();
this.O2868()&&ig.game.O1896.O5896(this,this.attachments.h.lines,this.attachments.h.linesData,this.attachments.h.attributes);this.O4743();this.O1139();this.O7983();this.O8259();this.O4487();this.O9337();this.O6432();this.O8393==this.anims.creating&&ig.game.decorator.O6400(this.pos);this.O4238();this.O7926();if(this.O6985())ig.game.attachmentManager.O4631(this),ig.game.attachmentManager.O9768(this);else if(this.O2047={x:0,y:0},this.O9832("heavy")||this.O6405("heavy"))a=this.O7735(70),this.vel.x=this.vel.x.limit(-a,
a);else if(this.O9832("veryHeavy"))a=this.O7735(35),this.vel.x=this.vel.x.limit(-a,a);else if(this.O9832("fast")||this.O9832("veryFast"))a=this.O7735(130),this.maxVel.x<a&&(this.maxVel.x=a),this.O2624.x<a&&(this.O2624.x=a);this.O1560();this.O8399();this.O5312();this.O8708();this.O5653();this.O9088();this.O8611();this.parent();this.O3226&&Math.abs(this.vel.x)==this.maxVel.x&&Math.abs(this.vel.y)==this.maxVel.y&&(this.vel.x/=ig.game.O6990,this.vel.y/=ig.game.O6990);this.O4674Previous=this.O3226;this.prevVel.x=
this.vel.x;this.prevVel.y=this.vel.y}},O8708:function(){this.attachments.wp&&this.attachments.wp.dynathingEntity&&this.attachments.wp.dynathingEntity.update(this);this.attachments.w&&this.attachments.w.dynathingEntity&&this.attachments.w.dynathingEntity.update(this)},O3666:function(){return this.O9832("pushFlying")||this.O9832("hoverFlying")},O404:function(){if(this.O9832("pushFlying"))this.O2027=this.O325Wearable,this.O9832("heavy")&&(this.O2027*=2.5),this.O9832("veryHeavy")&&(this.O2027*=5);else if(this.O9832("hoverFlying")&&
!this.standing){if(this.O8088){var a=this.O7735(210)*ig.system.tick;ig.game.O3919()?this.vel.y-=a:ig.game.O2177()&&(this.vel.y+=a)}this.O2027=0;this.vel.y*=1-1.5*ig.system.tick}else this.O7709()?this.getMountableHasAttribute("heavy")?this.O2027=this.O3350:this.getMountableHasAttribute("lightweight")?this.O2027=this.O3045:this.O2027=this.O7129:0<this.vel.y&&(this.O9832("slowsFall")?(this.O2027=.1,this.vel.y=Math.min(this.vel.y,230)):this.O9832("slowsFallALot")&&(this.O2027=.025,this.vel.y=Math.min(this.vel.y,
57.5)))},O7661:function(){var a=!1;if(this.dynathingWhichGrabbedMe&&!this.attachments.m&&!this.O9832("disablesGrabbing")){var b=170>=this.O2144(this.dynathingWhichGrabbedMe),c=!1;this.O8088?ig.game.O3919()||!b?c=!0:ig.game.O4146()&&(c=!0,ig.input.O6501()):b||(c=!0);c&&(this.vel.y-=20,this.accel.y-=10,this.O8088&&(this.forceSend=!0));ig.game.O1347()?(this.accel.x=-1,this.O8418=!1):ig.game.O5798()&&(this.accel.x=1,this.O8418=!0);this.O8860();0>this.vel.y&&(this.dynathingWhichGrabbedMe=null,this.O8393&&
this.O2966());this.dynathingWhichGrabbedMe&&(this.dynathingWhichGrabbedMe.O5909(this),a=!0)}return a},O1557:function(){if(ig.game.otherAreaWasFullInfo){if(!this.saidOtherWasFullInfo&&ig.game.O2694&&2.5<=ig.game.O2694.delta()){var a=ig.game.otherAreaWasFullInfo.areaName;this.saidOtherWasFullInfo=!0;this.say("oops! i was pushed out of "+a);setTimeout(function(){ig.game.O1257.say("as it was full")},1E3)}if(!this.emittedOtherWasFullDust&&ig.game.O2694&&.1<=ig.game.O2694.delta())for(this.emittedOtherWasFullDust=
!0,ig.game.decorator.O6400(this.pos),a=1;10>=a;a++){var b=ig.game.decorator.O4918(this.pos,10),c=ig.game.decorator.O4918(null,2);ig.game.O9759(EntityBigDust,b.x,b.y,{vel:c,decay:.25});ig.game.sounds.collide.play();ig.game.camera.temporaryOffset.y-=.25}}},O1560:function(){var a=this.O1229(!0);this.attachments.b&&this.attachments.b.animSheet&&this.attachments.b.animSheet.height&&!this.attachments.m&&(this.attachments.b.isOld||(a.x+=this.O9306()),a.y+=ig.game.O9925-this.attachments.b.animSheet.height);
this.O4855.update(a)},O2221:function(){if(this.O9165==this.O4583.SWIMMING){var a=0;this.O4188HasAttribute("pushesLeft")?a=-1:this.O4188HasAttribute("pushesRight")&&(a=1);if(0!=a){var b=this.O4188HasAttribute("thick")?this.O4623Thick.x:this.O8554.x;this.maxVelModifier.x=!this.O8418&&-1==a||this.O8418&&1==a?2*b:b;this.vel.x+=10*a;this.vel.x=this.vel.x.limit(-this.maxVelModifier.x,this.maxVelModifier.x)}}},O8611:function(){this.O8088&&0>=this.rank&&(this.attachments.b&&this.attachments.b&&!ig.game.attachmentManager.O3420(this)?
(ig.game.attachmentManager.O3578(this,"b",!0),ig.game.attachmentManager.O7793(this,"b",!0)):ig.game.attachmentManager.O6791(this,!0))},O9088:function(){this.O8088&&!ig.game.isEditorHere&&this.O4075&&this.O4075.thing&&"SOLID"==this.O4075.thing.base&&ig.game.O4482&&!this.O3096()&&!this.O6405("instantTransporting")&&!this.O4106()&&this.kill(ig.game.deathTypes.DEADLY)},O3096:function(){var a=!1;if(this.O8313){var b=(new Date-Date.parse(this.O8313))/1E3;a=5>=b;6<=b&&(this.O8313=null)}return a},O5653:function(){if(this.attachments.m&&
this.attachments.m.attributes){var a=this.attachments.m.attributes,b=175;a.autoSpeedFast||(b*=.5);a.autoSpeedLeft?this.vel.x=-b:a.autoSpeedRight?this.vel.x=b:a.autoSpeedUp?this.vel.y=-b:a.autoSpeedDown&&(this.vel.y=b)}},O7633:function(){ig.game.O1257&&(this.O2885=new ml.Timer,ig.game.sounds.shortWhoosh.play(),ig.game.O1257.O6336(this));this.informBrainDidAction=!0},O1418:function(a,b,c,d){this.O9832("bumpResistant")||(b=b?2.5:1,this.vel.y=this.attachments&&this.attachments.m&&"MNTAIR"==this.attachments.m.base?
this.vel.y-ig.game.O4293(20,40)*b:this.vel.y-ig.game.O4293(100,140)*b,c||(this.vel.x+=.5*a*b),d&&ig.game.O2116.O7884(this,"touches",d))},O6336:function(a,b,c){c=b?c:a.attachments.h;var d=b?26:22;c&&c.attributes&&c.attributes.widerRange&&(d=b?34:30);if((b||ml.Misc.O5615(a.isFriendedByUs,a.rank,a.isEditorHere,!(!a.attachments||!a.attachments.br)))&&c&&c.attributes&&this.O2144(a)<=d)if(c.attributes.clearsWearable&&(b=ig.game.attachmentManager.slots.WEARABLE,this.attachments[b]&&ig.game.attachmentManager.O3578(this,
b,!0)),c.attributes.clearsHoldable&&(b=ig.game.attachmentManager.slots.HOLDABLE,this.attachments[b]&&ig.game.attachmentManager.O3578(this,b,!0)),c.attributes.clearsMountable&&(b=ig.game.attachmentManager.slots.MOUNTABLE,this.attachments[b]&&ig.game.attachmentManager.O3578(this,b,!0)),c.attributes.heals)ig.game.O1257.health=(ig.game.O1257.health+40).limit(0,100),this.O1418(null,null,!0,c.name),ig.game.O3957&&ig.game.O3957.O8855("healed");else if(ig.game.O2082.O2732(c.attributes)&&!ig.game.O4296&&1<=
a.rank){b=!1;if(c.attributes.bumps||c.attributes.bumpsStrong||c.attributes.heals)b=ig.game.O4293(300,450)*(this.pos.x>a.pos.x?1:-1),this.O1418(b,c.attributes.bumpsStrong,void 0,c.name),b=!0;c.attributes.slightlyHarmful||c.attributes.harmful?(ig.game.O9710.O6326=!0,this.O3914(c.attributes.slightlyHarmful?15:40,this,!0),b||(b=ig.game.O4293(300,450)*(this.pos.x>a.pos.x?1:-1),this.O1418(b,void 0,void 0,c.name)),ig.game.O3957&&ig.game.O3957.O8855("harmed")):c.attributes.deadly&&(ig.game.O9710.O6326=!0,
this.kill(ig.game.deathTypes.DEADLY))}},O6310:function(a){if(this.O8088){var b=!1;if(this.O1795||ig.game.userScriptEditor&&ig.game.userScriptEditor.isOpen&&!ig.game.userScriptEditor.runs)return b;var c=this.O1331("slowerToUse")?.8:.2;this.O2885&&this.O2885.delta()>c&&(this.O2885=null);if(!this.O2885){c=!!this.attachments.h;ig.game.sounds.shortWhoosh.play();this.O2885=new ml.Timer;this.standing&&this.O9165!=this.O4583.SWIMMING&&this.attachments.h&&"EQUIPMENT"==this.attachments.h.base&&!this.attachments.m&&
this.O9904();ig.game.O7836.O2982();ig.game.brainManager.O2535(this,"acts");var d=a;a||(d=this.attachments.h?ig.game.O2116.O4851("touches",this.attachments.h.name,this.attachments.h):ig.game.O2116.O8280());ig.game.O2225.O5792(this);if(this.O4075&&this.O4075.thing&&"GATHER"==this.O4075.thing.base&&(a=this.O8822())&&a.O3203){var e=null;this.attachments.h&&"EQUIPMENT"==this.attachments.h.base&&(e=this.attachments.h.name);a.O3203(e)}if(!d){var f=this.O8792();if(f){b=!0;var g=this,h=ig.game.O4261.getItemBasic(f,
"ent_ply_awt");h.imagesBeingGenerated.done(function(){var k=ig.game.attachmentManager.slots.HOLDABLE;g.attachments.h&&"EQUIPMENT"==g.attachments.h.base&&(g.O1832=g.attachments.h.id);var l=ig.game.attachmentManager.O6854(h.base);g.attachments[k]&&ig.game.O7836.O9073(k,null);ig.game.attachmentManager.O1336(g,l,f);ig.game.O7836.O9073(l,f);ig.game.sounds.pickup.play()})}else this.attachments.h&&"EQUIPMENT"==this.attachments.h.base?(ig.game.O2116.O7884(this,"uses",this.O8897()),(c=this.O5567())&&(!c.useKeyword||
ml.Misc.O3249(this.attachments.h.name,c.useKeyword))&&c.O1758(this)):this.attachments.h&&c?"CONSUMAB"!=this.attachments.h.base&&(ig.game.O2116.O7884(this,"throws",this.O8897()),ig.game.O3957&&ig.game.O3957.O8855("throw")):ig.game.O2116.O7884(this,"acts")}ig.game.attachmentManager.O9293(this)}this.informBrainDidAction=!0;return b}},O8822:function(){var a=null,b=ig.game.O5119.default;if(b)for(var c=0;c<b.length;c++){var d=b[c];if(!d._killed&&this.touches(d)){a=d;break}}return a},O5567:function(){var a=
null,b=ig.game.O5119.default;if(b)for(var c=0;c<b.length;c++){var d=b[c];if(!d._killed&&d instanceof EntityCrumbling&&ml.Misc.O7862(this,d,2)&&d.state===d.STATES.SOLID){a=d;break}}return a},O8792:function(){for(var a=null,b=[],c=[],d=this.attachments.h?this.attachments.h.name:"",e=this.attachments.h&&"EQUIPMENT"==this.attachments.h.base?1:0,f=0;f<=e;f++){var g=null;if((g=0==f?this.O4075&&this.O4075.thing?ig.game.O4261.getItemBasic(this.O4075.thing.id,"ent_ply_ghi1"):null:this.O5479&&this.O5479.thing?
ig.game.O4261.getItemBasic(this.O5479.thing.id,"ent_ply_ghi2"):null)&&g.name&&"GATHER"!=g.base){var h=g.name.toLowerCase();"LIQUID"==g.base||"LQDFLIP"==g.base?h="liquid "+h:"SOLID"==g.base&&(h="solid "+h);if(g=ig.game.O5119.default)for(var k=0;k<g.length;k++){var l=g[k];if(!l._killed&&l instanceof EntityInterenv&&0<=!c.indexOf(l.thingTypeId)){var m=ig.game.O4261.getItemBasic(l.thingTypeId,"ent_ply_ghi3"),n=!m.useKeyword||ml.Misc.O3249(d,m.useKeyword),p=ml.Misc.O3249(h,m.atKeyword);n&&p&&m.getId&&
(l=l.attributes?l.attributes:{},n=25,l.veryRare?n=3.125:l.rare?n=12.5:l.frequent&&(n=50),n*=.2,(l.always||ig.game.chance(n))&&b.push(m.getId))}}}if(1<=b.length)break}1<=b.length&&(a=b[ig.game.O4293(0,b.length-1)]);return a},O5312:function(){if(this.O5542()){var a=ig.game.O2453.O9959;if(a){var b=this.O7709();this.O2027=this.O7392||b?this.O7129:1;var c=b?this.O5525:this.O6960,d=2*ig.game.O9925;a.x+d<this.pos.x?(this.accel.x=-c,this.O8418=!1):a.x-d>this.pos.x?(this.accel.x=c,this.O8418=!0):this.accel.x=
0;b&&(this.accel.y=a.y+d<this.pos.y?-c:a.y-d>this.pos.y?.5*c:-100);(0!=this.accel.x||b&&0!=this.accel.y)&&ig.game.attachmentManager.O1598(this,!0);this.jumping=!1;this.O2952();this.setAnim(this.anims.idle)}}},O5542:function(){return this.O8088&&this.O6985()&&ig.game.O2453.O8381},O8259:function(){var a=ig.game.O2694&&2>=ig.game.O2694.delta(),b=ig.game.O2694&&3>=ig.game.O2694.delta(),c=this.isSitting;b||(this.isSitting=!1);this.attachments.b&&!this.attachments.b.isOld&&this.O4075&&this.O4075.thing&&
this.O4075.thing.name&&!this.O6985()?ig.game.strings.contains(this.O4075.thing.name,ig.game.O2553)?a?(this.O6581=new ml.Timer,c=this.isSitting=!0):this.O6581?.75<=this.O6581.delta()&&(this.isSitting=!0):this.O6581=new ml.Timer:a||(this.O6581=null):a||(this.O6581=null);b||(this.isSitting!=c&&(this.isSitting?(ig.game.O2116.O7884(this,"sits_on",this.O4075.thing.name),this.O8088&&ig.game.O3957&&ig.game.O3957.O8855("sit"),ig.game.decorator.O3148(this),this.vel.y=-70,ig.game.O4482&&ig.game.O5119&&ig.game.O5119.player&&
8<=ig.game.O5119.player.length&&ig.game.O1189.register(ig.game.O1189.types.SAT_DOWN_IN_BUSY_CREATED_AREA)):ig.game.decorator.O4707(this),ig.game.sounds.O9396(ig.game.sounds.shortWhoosh,this,.3)),this.isSitting&&(this.vel.x=this.vel.x.limit(-30,30)))},O4487:function(){var a=this.isLying;this.isLying=!1;this.attachments.b&&this.O4075&&this.O4075.thing&&this.O4075.thing.name&&!this.O6985()?ig.game.strings.contains(this.O4075.thing.name,ig.game.lieableNames)?this.O7234?.75<=this.O7234.delta()&&(this.isLying=
!0):this.O7234=new ml.Timer:this.O7234=null:this.O7234=null;this.isLying!=a&&(this.isLying?(ig.game.O2116.O7884(this,"lies_on",this.O4075.thing.name),this.O8088&&ig.game.O3957&&ig.game.O3957.O8855("lie"),ig.game.decorator.O3148(this),this.vel.y=-70):ig.game.decorator.O4707(this),ig.game.sounds.O9396(ig.game.sounds.shortWhoosh,this,.3));this.isLying&&(this.vel.x=this.vel.x.limit(-30,30),ig.game.attachmentManager.O2345(this))},handleHarmfulStuck:function(){this.O1331("stickyOnPeople")&&this.O1331("harmful")&&
this.O3914(.1,null,!1)},O4150:function(a,b){null==this.O7436&&(this.O7436=[]);for(var c=1;c<=a;c++)this.O7436.push(b)},O9713:function(){return null!=this.O7436&&1<=this.O7436.length},O4229:function(){if(this.O9713()){var a=this.O7436.pop(),b=50>this.health;ig.game.chance(4)&&(b?ig.game.camera.shake(40,4):ig.game.camera.shake());if(ig.game.chance(10)){var c=this.pos.x+ig.game.O4293(-ig.system.widthHalf,ig.system.widthHalf),d=this.pos.y+ig.game.O4293(-ig.system.O2175,ig.system.O2175),e=0+ig.game.O4293(-25,
25),f=0+ig.game.O4293(-5,5);b=b?2:ig.game.O4293(1,6);ig.game.O9759(EntitySpot,c,d,{O5856:ig.game.O8159["reflection"+b],O2329:1.5,O7942:2,fadingInc:5,O4405:100,O6475:!1,attribute:"colorReflection",vel:{x:e,y:f}})}this.O3914(a,null,!1)}},O1229:function(a){var b={x:this.pos.x,y:this.pos.y};this.O2047&&this.attachments&&this.attachments.m&&this.attachments.m.avatarOffset&&(b.x+=this.O2047.x,a||(b.y+=this.O2047.y));return b},O8399:function(){if(this.attachments.b&&this.attachments.b.animSheet&&this.attachments.b.animSheet.height){var a=
{pos:{x:this.pos.x-this.offset.x,y:this.pos.y-this.offset.y},size:{x:this.attachments.b.animSheet.width,y:this.attachments.b.animSheet.height}};ig.game.decorator.O7715(a,this.attachments[ig.game.attachmentManager.slots.BODY])}this.attachments.m&&this.attachments.m.animSheet&&this.attachments.m.animSheet.height&&(a={pos:{x:this.pos.x-this.offset.x,y:this.pos.y-this.offset.y},size:{x:this.attachments.m.animSheet.width,y:this.attachments.m.animSheet.height}},ig.game.decorator.O7715(a,this.attachments[ig.game.attachmentManager.slots.MOUNTABLE],
ig.game.attachmentManager.slots.MOUNTABLE));this.attachments.w&&(a=this.attachments.w,a.animSheet&&a.animSheet.height?(a={pos:{x:this.pos.x-this.offset.x,y:this.pos.y-this.offset.y},size:{x:a.animSheet.width,y:a.animSheet.height}},ig.game.decorator.O7715(a,this.attachments[ig.game.attachmentManager.slots.WEARABLE],ig.game.attachmentManager.slots.WEARABLE,void 0,!this.standing)):a.dynathingEntity&&a.dynathingEntity.animSheet&&a.dynathingEntity.animSheet.height&&(a={pos:{x:this.pos.x-this.offset.x,
y:this.pos.y-this.offset.y},size:{x:a.dynathingEntity.animSheet.width,y:a.dynathingEntity.animSheet.height}},ig.game.decorator.O7715(a,this.attachments[ig.game.attachmentManager.slots.WEARABLE],ig.game.attachmentManager.slots.WEARABLE,void 0,!this.standing)));this.isHooked||ig.game.decorator.O7715(this,this.attachments[ig.game.attachmentManager.slots.HOLDABLE],ig.game.attachmentManager.slots.HOLDABLE)},getMountableHasAttribute:function(a){var b=this.attachments[ig.game.attachmentManager.slots.MOUNTABLE];
return!(!b||!b.attributes||!b.attributes[a])},O1331:function(a){var b=this.attachments[ig.game.attachmentManager.slots.HOLDABLE];return!(!b||!b.attributes||!b.attributes[a])},O9615:function(a){for(var b=!1,c=0;c<a.length;c++)if(this.O1331(a[c])){b=!0;break}return b},O9832:function(a){var b=this.attachments[ig.game.attachmentManager.slots.WEARABLE];return!!(b&&b.attributes&&b.attributes[a])},O2063:function(a){var b=this.attachments[ig.game.attachmentManager.slots.WEARABLE_PLUS];return!!(b&&b.attributes&&
b.attributes[a])},O1687:function(a,b){b=this.attachments[b];return!!(b&&b.attributes&&b.attributes[a])},O6405:function(a){var b=this.attachments[ig.game.attachmentManager.slots.HOLDABLE];return!(!b||"AIMABLE"!=b.base||!this.O1331(a))},O9323:function(a){var b=this.attachments[ig.game.attachmentManager.slots.BRAIN];return!!(b&&b.attributes&&b.attributes[a])},O7709:function(){var a=this.attachments[ig.game.attachmentManager.slots.MOUNTABLE];return!(!a||"MNTAIR"!=a.base)},O8422:function(){this.O4188sHeadOffset.y=
this.attachments[ig.game.attachmentManager.slots.BODY]?.1:4;this.O5479=ig.game.O6112.O2052({x:this.pos.x+this.thingBelowPlayerOffset.x,y:this.pos.y+this.thingBelowPlayerOffset.y});this.thingWayBelowPlayer=ig.game.O6112.O2052({x:this.pos.x+this.thingBelowPlayerOffset.x,y:this.pos.y+this.thingBelowPlayerOffset.y+10});this.O4075=ig.game.O6112.O2052({x:this.pos.x+this.O4188Offset.x,y:this.pos.y+this.O4188Offset.y});this.O1373RightPlayer=ig.game.O6112.O2052({x:this.pos.x+this.O1373RightPlayerOffset.x,
y:this.pos.y+this.O1373RightPlayerOffset.y});this.O1373LeftPlayer=ig.game.O6112.O2052({x:this.pos.x+this.O1373LeftPlayerOffset.x,y:this.pos.y+this.O1373LeftPlayerOffset.y});this.O4188sFeet=ig.game.O6112.O2052({x:this.pos.x+this.O4188sFeetOffset.x,y:this.pos.y+this.O4188sFeetOffset.y});this.O4188sHead=ig.game.O6112.O2052({x:this.pos.x+this.O4188sHeadOffset.x,y:this.pos.y+this.O4188sHeadOffset.y});this.thingToLeftOfPlayer=ig.game.O6112.O2052({x:this.pos.x+this.thingToLeftOfPlayerOffset.x,y:this.pos.y+
this.thingToLeftOfPlayerOffset.y});this.thingToRightOfPlayer=ig.game.O6112.O2052({x:this.pos.x+this.thingToRightOfPlayerOffset.x,y:this.pos.y+this.thingToRightOfPlayerOffset.y})},O7926:function(){var a=!0;ig.input.state("ctrl")&&(a=this.O8088&&ig.game.attachmentManager.O6284(this));if(a){a=this.O3087();a.x-=ig.game.screen.x;a.y-=ig.game.screen.y;if(this.isHovered=ig.game.O4774.O6559(a.x,a.y,a.x+a.width,a.y+a.height))ig.game.O4774.O7551(),this.onHover();this.O8072=this.isHovered&&ig.game.O4774.O4920();
this.isRightClicked=this.isHovered&&ig.game.O4774.O3044();!this.O8072&&!this.isRightClicked||ig.game.panelSet&&ig.game.panelSet.O7518()||(this.O8072?(ig.game.O4774.O6730(!1),this.onClick()):this.isRightClicked&&(ig.game.O4774.O5457(!1),this.onClick(!0)))}},O3087:function(){var a=this.O1229(!0);a={x:a.x-4,y:a.y-4,width:this.size.x+7,height:this.size.y+7};this.attachments.b&&this.attachments.b.animSheet&&this.attachments.b.animSheet.height&&!this.attachments.m&&(a.x-=2,this.attachments.b.isOld||(a.x+=
this.O9306()),a.y+=ig.game.O9925-this.attachments.b.animSheet.height,a.width=this.attachments.b.animSheet.width,18>=a.width&&(a.width+=8),a.height=this.attachments.b.animSheet.height);return a},O6432:function(){this.frictionModifier?(this.O7863(this.frictionModifier),this.frictionModifier=null):this.O6301();this.maxVelModifier?(this.O6519(this.maxVelModifier),this.maxVelModifier=null):this.O1278();this.O7392&&this.O6985()&&(this.maxVel={x:3*this.maxVelMountableGround.x,y:this.maxVelMountableGround.y})},
O2550:function(a){if(this.O4106())this.collides!=ig.Entity.COLLIDES.NEVER&&(this.collides=ig.Entity.COLLIDES.NEVER),this.pos.x+=this.vel.x*ig.system.tick,this.pos.y+=this.vel.y*ig.system.tick;else{this.collides!=ig.Entity.COLLIDES.PASSIVE&&(this.collides=ig.Entity.COLLIDES.PASSIVE);this.O7392=!1;if(this.hook&&this.isHooked&&(this.maxVelModifier=this.maxVelHooked,a.collision.x||a.collision.y)){var b=10<=Math.abs(this.vel.x)&&40<=this.vel.y&&a.collision.y;this.hook&&(90>=this.hook.stickiness||b)&&(this.hook.energy=
0)}if(this.O6985())this.O7709()?ig.game.attachmentManager.O1549(this,a):ig.game.attachmentManager.O8068(this,a);else{a.tile.y==Item.prototype.COL_TYPES.SLIDEY_UP||this.O9832("slidey")||this.O9832("verySlidey")?(this.O8088&&0!=this.vel.x&&!this.O1983()&&this.setAnim(this.anims.idle),this.O9340("verySlidey")||this.O9832("verySlidey")?(this.frictionModifier={x:5,y:0},this.O9095=this.O7044/100):(this.frictionModifier=ig.game.O4507(this.O8685),this.O9095=this.O7044/10),this.maxVelModifier=this.O8926):
this.O9095=this.O7044;this.O8046(a);a.tile.y==Item.prototype.COL_TYPES.STICKY&&0<=this.vel.y?(this.canJump=this.O9340("jumpable"),this.O9340("nonLowering")?this.offset.y=this.offsetDefault.y:this.offset.y=this.offsetDefault.y-3,this.O9340("steadySlowdown")?this.maxVelModifier={x:90,y:this.canJump?600:60}:ig.game.chance(25)&&(this.maxVelModifier={x:55,y:60})):(this.canJump=!0,this.offset.y=this.offsetDefault.y);if(a.collision.slope&&this.O9165!=this.O4583.SWIMMING){if(a.collision.slope.tile==Item.prototype.COL_TYPES.SLOPE_LD||
a.collision.slope.tile==Item.prototype.COL_TYPES.SLOPE_RD||a.collision.slope.tile==Item.prototype.COL_TYPES.SLOPE_RU||a.collision.slope.tile==Item.prototype.COL_TYPES.SLOPE_LU||a.collision.slope.tile==Item.prototype.COL_TYPES.PASSABLE_SLOPE_LD||a.collision.slope.tile==Item.prototype.COL_TYPES.PASSABLE_SLOPE_RD||a.collision.slope.tile==Item.prototype.COL_TYPES.PASSABLE_SLOPE_RU||a.collision.slope.tile==Item.prototype.COL_TYPES.PASSABLE_SLOPE_LU){this.O7392=!0;this.O2027>this.O9764&&(this.O2027=this.O9764);
if(0<this.vel.x&&!ig.game.O5798()||0>this.vel.x&&!ig.game.O1347())this.vel.x/=4;a.collision.slope.tile==Item.prototype.COL_TYPES.SLOPE_LD&&0<this.vel.y&&ig.game.O5798()&&(this.vel.y=0);a.collision.slope.tile==Item.prototype.COL_TYPES.SLOPE_RD&&0<this.vel.y&&ig.game.O1347()&&(this.vel.y=0)}a.collision.slope.tile==Item.prototype.COL_TYPES.SLSLOPE_LD||a.collision.slope.tile==Item.prototype.COL_TYPES.SLSLOPE_RD||a.collision.slope.tile==Item.prototype.COL_TYPES.SLSLOPE_RU||a.collision.slope.tile==Item.prototype.COL_TYPES.SLSLOPE_LU?
(this.O8088&&!this.O1983()&&this.setAnim(this.anims.idle),this.frictionModifier=this.O8685,this.O9095=this.O7044/10,this.O2027=this.O9764,this.maxVelModifier=this.O8926):this.O9095=this.O7044;this.O7298(a)}!this.standing&&this.O9165==this.O4583.RUNNING&&(this.frictionModifier=this.O1484);this.O2346(a);this.parent(a)}}},O9340:function(a){return!!(this.O5479&&this.O5479.thing&&this.O5479.thing.attributes&&this.O5479.thing.attributes[a])},O4188HasAttribute:function(a){return!!(this.O4075&&this.O4075.thing&&
this.O4075.thing.attributes&&this.O4075.thing.attributes[a])},O9560:function(a){return!!(this.O4188sFeet&&this.O4188sFeet.thing&&this.O4188sFeet.thing.attributes&&this.O4188sFeet.thing.attributes[a])},O2346:function(a){this.O9165==this.O4583.RUNNING&&(a.collision.y&&(400<this.vel.y?(ig.game.sounds.O9396(ig.game.sounds.collide,this),ig.game.decorator.O7237(this),ig.game.O7606.O6001(this),this.O8088&&ig.game.O3957&&(ig.game.O3957.O8855("hard landing"),this.O5479&&this.O5479.thing&&ig.game.O2116.O7884(this,
"hard_lands_on",this.O5479.thing.name))):100<this.vel.y?ig.game.attachmentManager.O7767(this)||(ig.game.sounds.O9396(ig.game.sounds.collideSoft,this),ig.game.decorator.O4707(this)):-100>this.vel.y&&!ig.game.attachmentManager.O7767(this)&&(ig.game.sounds.O9396(ig.game.sounds.collideSoft,this),ig.game.decorator.O1403(this)),30<=this.vel.y&&ig.game.O7606.O6001(this)),a.collision.x&&90<Math.abs(this.vel.x)&&ig.game.sounds.O9396(ig.game.sounds.collideSoft,this))},O8046:function(a){this.getMountableHasAttribute("bouncy")&&
(a.tile.y==Item.prototype.COL_TYPES.SOLID&&this.vel.y>this.O4118||a.tile.y==Item.prototype.COL_TYPES.PASSABLE_UP&&5<this.vel.y)?(this.vel.y=-this.O2889*(ig.game.O3919()?1.2:.85),this.O2027=this.O9764,this.accel.x=0,a.collision.y=!1,ig.game.sounds.O9396(ig.game.sounds.trampolineBounce,this,.1),ig.game.decorator.O1631(this),ig.game.O2116.O7884(this,"bounces"),this.O1286=Date.now()):a.tile.y==Item.prototype.COL_TYPES.BOUNCEY_UP&&this.vel.y>this.O4118&&(this.vel.y=-this.O2889*(ig.game.O3919()?1.25:1),
this.O2027=this.O9764,this.accel.x=0,a.collision.y=!1,ig.game.sounds.O9396(ig.game.sounds.trampolineBounce,this,.75),ig.game.decorator.O1631(this),ig.game.O2116.O7884(this,"bounces"),this.O1286=Date.now());a.tile.x==Item.prototype.COL_TYPES.BOUNCEY_RIGHT&&this.vel.x<-this.O1443&&(this.vel.x=this.O4552,a.collision.x=!1,ig.game.sounds.O9396(ig.game.sounds.trampolineBounce,this),ig.game.decorator.O1631(this),ig.game.O2116.O7884(this,"bounces"),this.O1286=Date.now());a.tile.y==Item.prototype.COL_TYPES.BOUNCEY_DOWN&&
this.vel.y<-this.O4118&&(this.vel.y=this.O2889,a.collision.y=!1,ig.game.sounds.O9396(ig.game.sounds.trampolineBounce,this),ig.game.decorator.O1631(this),ig.game.O2116.O7884(this,"bounces"),this.O1286=Date.now());a.tile.x==Item.prototype.COL_TYPES.BOUNCEY_LEFT&&this.vel.x>this.O1443&&(this.vel.x=-this.O4552,a.collision.x=!1,ig.game.sounds.O9396(ig.game.sounds.trampolineBounce,this),ig.game.decorator.O1631(this),ig.game.O2116.O7884(this,"bounces"),this.O1286=Date.now())},O7298:function(a){a.collision.slope.tile==
Item.prototype.COL_TYPES.BOUNCEY_LD&&(a.collision.slope=!1,this.vel.y=-this.O2889/1.1,this.vel.x=-this.O4552/1.1,this.O2027=this.O9764,ig.game.sounds.O9396(ig.game.sounds.trampolineBounce,this),this.O9568(-1,this.O1036,this.O1050),ig.game.attachmentManager.O2345(this),ig.game.O2116.O7884(this,"bounces"),this.O1286=Date.now());a.collision.slope.tile==Item.prototype.COL_TYPES.BOUNCEY_RD&&(this.vel.y=-this.O2889/1.1,this.vel.x=this.O4552/1.1,a.collision.slope=!1,this.O2027=this.O9764,ig.game.sounds.O9396(ig.game.sounds.trampolineBounce,
this),this.O9568(1,this.O1036,this.O1050),ig.game.attachmentManager.O2345(this),ig.game.O2116.O7884(this,"bounces"),this.O1286=Date.now());a.collision.slope.tile==Item.prototype.COL_TYPES.BOUNCEY_RU&&(this.vel.y=this.O2889/1.1,this.vel.x=this.O4552/1.1,a.collision.slope=!1,ig.game.sounds.O9396(ig.game.sounds.trampolineBounce,this),ig.game.attachmentManager.O2345(this),ig.game.O2116.O7884(this,"bounces"),this.O1286=Date.now());a.collision.slope.tile==Item.prototype.COL_TYPES.BOUNCEY_LU&&(this.vel.y=
this.O2889/1.1,this.vel.x=-this.O4552/1.1,a.collision.slope=!1,ig.game.sounds.O9396(ig.game.sounds.trampolineBounce,this),ig.game.attachmentManager.O2345(this),ig.game.O2116.O7884(this,"bounces"),this.O1286=Date.now())},O2395:function(){!(1>ig.game.O6550)||this.O1795||ig.game.userScriptEditor&&ig.game.userScriptEditor.O9672()||ig.game.writableDialog&&ig.game.writableDialog.isWriting?this.O1795&&(this.O6373?this.setAnim(this.anims.idle):this.setAnim(this.anims.creating)):(this.O4590(),this.O6985()&&
!this.O3226?ig.game.attachmentManager.O5007(this):this.O9165==this.O4583.RUNNING?(this.hook?this.O6995():this.O5655(),this.O8860()):this.O9165==this.O4583.CLIMBING?this.O3226&&ig.input.state("ctrl")?this.O5655():this.O7093():this.O9165==this.O4583.SWIMMING&&this.O6254(),this.O9521(),this.O7203())},O9521:function(){if(ig.input.state("shift")){var a=null;this.attachments.h?a="h":this.attachments.w&&(a="w");var b=ig.game.playerDialog;if(b&&b.isOpen&&b.O3191==b.dialogStates.ATTACHMENTS){var c=b.O9292;
0<=c&&(c=b.O2554[c],this.attachments[c]&&(a=c,b.O2067()))}if(a&&this.O6622&&this.O6622[a]){c=b=ig.input.state("ctrl")?10:1;this.O8393.flip.x&&(c*=-1);var d={x:0,y:0};ig.input.pressed("l_arr")?d.x-=c:ig.input.pressed("r_arr")&&(d.x+=c);ig.input.pressed("u_arr")?d.y-=b:ig.input.pressed("d_arr")&&(d.y+=b);0==d.x&&0==d.y||this.O8734(a,d)}}},O8734:function(a,b){var c=ig.game.O4507(this.O6622[a]);this.O6622[a].x+=b.x;this.O6622[a].y+=b.y;this.O6622[a].x=ml.Misc.O8693(this.O6622[a].x,-57,57);this.O6622[a].y=
ml.Misc.O8693(this.O6622[a].y,-57,57);if(this.O6622[a].x!=c.x||this.O6622[a].y!=c.y)ig.game.sounds.shortWhoosh.play(),ig.game.O7836.O6578(a,this.O6622[a]),this.O4756(a,this.O6622[a])},O3515:function(a){var b=this.O4995(a);b&&(this.O6622[a]=b,ig.game.O7836.O6578(a,this.O6622[a]))},O4756:function(a,b){sessionStorage&&(a=this.O9176(a),b=JSON.stringify(b),sessionStorage.setItem(a,b))},O4995:function(a){var b=null;if(sessionStorage&&(a=this.O9176(a),a=sessionStorage.getItem(a)))try{b=JSON.parse(a)}catch(c){console.log("Issue parsing attachment offset",
c)}return b},O9176:function(a){var b=this.attachments.b;return"offset_"+a+"_"+(b?b.id:"none")+"_"+this.attachments[a].id},O8862:function(a){a||console.log("O8862: no slot provided");this.O6622||(this.O6622={});this.O6622[a]||(this.O6622[a]={x:0,y:0})},O7469:function(a){this.O8862(a);if(0!=this.O6622[a].x||0!=this.O6622[a].y)this.O6622[a].x=0,this.O6622[a].y=0,this.O8088&&ig.game.O7836.O6578(a,this.O6622[a],!0)},O9439:function(a,b){this.O8862(a);b.x=parseInt(b.x);b.y=parseInt(b.y);if(this.O6622[a].x!=
b.x||this.O6622[a].y!=b.y)this.O6622[a].x=b.x,this.O6622[a].y=b.y,this.attachments[a]&&ig.game.sounds.shortWhoosh.play()},O4590:function(){this.attachments.br&&ig.game.O5178&&this.anims&&(ig.input.state("esc")||ig.game.O5058&&!ig.game.O5058.O7221&&ig.input.state("s")||ig.game.virtualJoystick&&ig.game.virtualJoystick.input.down)&&(ig.game.attachmentManager.O3578(this,"br",!0),ig.game.virtualJoystick.input.down=!1,ig.input.O6501())},O6995:function(){ig.game.O1347()&&Math.abs(this.vel.x)<=this.O2624.x?
(this.hasMoved||(this.hasMoved=!0,ig.game.O1189.O9635()),this.accel.x=-this.O7044,this.O8418=!1):ig.game.O5798()&&Math.abs(this.vel.x)<=this.O2624.x&&(this.hasMoved||(this.hasMoved=!0,ig.game.O1189.O9635()),this.accel.x=this.O7044,this.O8418=!0)},O5655:function(){if(!ig.game.O3957.isOpen&&!ig.game.holderDialog.O2440){var a=this.standing?this.O9095:this.O1918;ig.game.O1347()&&Math.abs(this.vel.x)<=this.O2624.x?(this.hasMoved||(this.hasMoved=!0,ig.game.O1189.O9635()),this.accel.x=-a,this.O8418=!1,!ig.game.O4296&&
0>this.accel.x&&this.O9340("blocksLeft")&&(this.accel.x=0),this.standing&&-50<this.vel.x&&(ig.game.chance(20)&&!ig.game.O7606.O8896(this)&&ig.game.O9759(EntityFootdust,this.pos.x,this.pos.y+13,{direction:this.O8418?-1:1}),Math.random()<this.O1757&&this.O8605()),this.standing&&0==Math.abs(this.vel.x)&&ig.game.chance(20)&&!ig.game.O7606.O8896(this)&&ig.game.O9759(EntityFootdust,this.pos.x,this.pos.y+13,{direction:this.O8418?-1:1}),this.standing&&0>this.vel.x&&Math.random()<this.footsoundProbabilityRunning&&
this.O8605()):ig.game.O5798()&&Math.abs(this.vel.x)<=this.O2624.x?(this.hasMoved||(this.hasMoved=!0,ig.game.O1189.O9635()),this.accel.x=a,this.O8418=!0,!ig.game.O4296&&0<this.accel.x&&this.O9340("blocksRight")&&(this.accel.x=0),ig.game.O7606.O8896(this)||(this.standing&&50>this.vel.x&&(ig.game.chance(20)&&ig.game.O9759(EntityFootdust,this.pos.x,this.pos.y+13,{direction:this.O8418?-1:1}),Math.random()<this.O1757&&this.O8605()),this.standing&&0==Math.abs(this.vel.x)&&ig.game.chance(20)&&ig.game.O9759(EntityFootdust,
this.pos.x,this.pos.y+13,{direction:this.O8418?-1:1}),this.standing&&0<this.vel.x&&Math.random()<this.footsoundProbabilityRunning&&this.O8605())):(this.standing&&(this.accel.x=0,this.jumping=!1,this.O2027=this.O9764),this.accel.x/=30);if(ig.game.O9170()){a=1;this.O9832("enablesDoubleJump")?a=2:this.O9832("enablesTripleJump")?a=3:this.O9832("enablesQuadrupleJump")?a=4:this.O9832("enablesQuintupleJump")&&(a=5);var b=this.O9832("pushFlying");(this.jumping||b)&&!this.standing&&(1<a&&this.O9495<a||this.O9832("enablesInfiniteJump")||
b)?(this.O9495++,this.O9832("pushFlying")?this.vel.y=this.O7735(-130):this.O9832("heavy")||this.O6405("heavy")?this.vel.y=-330:this.O9832("veryHeavy")?this.vel.y=-660:this.vel.y=-430,this.O9832("pushFlying")||ig.game.decorator.O7237(this),ig.game.sounds.jump.play()):!(this.standing||this.isOnSolidMoverBody||this.O6648())||this.O9213()||this.O3226||(this.canJump?this.doJump():this.O6201(),this.O9495=1)}else ig.game.O4146()?(this.pressedDownTimer=new ml.Timer,!this.standing&&this.O9832("pushFlying")&&
(a=this.O7735(70),this.vel.y<a&&(this.vel.y=a),ig.game.sounds.jump.play())):ig.game.O2177()&&this.pressedDownTimer&&.2<=this.pressedDownTimer.delta()?(this.pressedDownTimer=null,this.standing&&this.O5479&&(a=this.O5479.thing,"PASS"==a.base&&a.attributes&&a.attributes.specialDownPassable&&(a=Math.abs(this.vel.x),b=1,150<=a?b=7:10<=a&&(b=2),this.pos.y+=b,ig.game.sounds.shortWhoosh.play(),this.ignoreMotionBarInNextDownRelease=!0,this.O6098(),ig.game.O3957&&ig.game.O3957.O8855("pass")))):this.O8776()?
(this.pressedDownTimer=null,ig.game.O3957.tryOpen()):ig.game.O5132()&&(this.ignoreMotionBarInNextDownRelease=!1);this.O2952();this.isFullAccount||this.firstMoveTimer||0==this.vel.x||(this.firstMoveTimer=new ml.Timer)}},O6098:function(){for(var a=ig.game.O4293(0,2),b=0;b<=a;b++){var c={};c.vel={x:ml.Misc.distort(10),y:ml.Misc.O9058(-60,-40)};c.decay=ml.Misc.O9058(1,3);ig.game.O9759(EntityDust,this.pos.x+2+ml.Misc.distort(4),this.pos.y+14+ml.Misc.distort(3),c)}},O7735:function(a){this.O9832("fast")?
a*=1.5:this.O9832("veryFast")&&(a*=2);return a},O8776:function(){var a=(this.standing||ig.input.state("ctrl"))&&!ig.game.O1347()&&!ig.game.O5798()&&!ig.game.O3957.isOpen&&ig.game.O5132()&&!ig.input.state("shift");a&&this.ignoreMotionBarInNextDownRelease&&(this.ignoreMotionBarInNextDownRelease=a=!1);return a},O1642:function(){if(this.O4075&&this.O4075.thing&&"WALKABLE"==this.O4075.thing.base)var a=!0;else{a=!(!this.thingToRightOfPlayer||!this.thingToRightOfPlayer.thing||"WALKABLE"!=this.thingToRightOfPlayer.thing.base);
var b=!(!this.thingWayBelowPlayer||!this.thingWayBelowPlayer.thing||"WALKABLE"!=this.thingWayBelowPlayer.thing.base);a=!(!this.thingToLeftOfPlayer||!this.thingToLeftOfPlayer.thing||"WALKABLE"!=this.thingToLeftOfPlayer.thing.base)&&b||a&&b}return a},O7093:function(){var a=this.O3226?this.O9095:this.O6792;ig.game.O3919()?(0<=this.vel.y&&this.O8732(),this.accel.y=-a):ig.game.O2177()?(0>=this.vel.y&&this.O8732(),this.accel.y=a):this.accel.y=0;ig.game.O1347()?(0<=this.vel.x&&this.O8732(),this.accel.x=
-a):ig.game.O5798()?(0>=this.vel.x&&this.O8732(),this.accel.x=a):this.accel.x=0;this.O6571()},O6571:function(){ig.game.O4296||(this.O4188HasAttribute("blocksLeft")&&(0>this.vel.x&&(this.vel.x=0),0>this.accel.x&&(this.accel.x=0,this.O3226&&(this.O8418=!1))),this.O4188HasAttribute("blocksRight")&&(0<this.vel.x&&(this.vel.x=0),0<this.accel.x&&(this.accel.x=0,this.O3226&&(this.O8418=!0))),this.O4188HasAttribute("blocksUp")&&(0>this.vel.y&&(this.vel.y=0),0>this.accel.y&&(this.accel.y=0)),this.O4188HasAttribute("blocksDown")&&
(0<this.vel.y&&(this.vel.y=0),0<this.accel.y&&(this.accel.y=0)))},O8732:function(a){Math.random()<this.O1757&&this.O8605()},O6254:function(){ig.game.O3919()?this.accel.y=-this.O3036.up:ig.game.O2177()?this.accel.y=this.O3036.down:this.accel.y=0;ig.game.O1347()?(this.O8418=!1,this.accel.x=-this.O3036.x):ig.game.O5798()?(this.O8418=!0,this.accel.x=this.O3036.x):this.accel.x=0},O8860:function(){this.O4939=this.isLying?8:this.O6652;this.O9381&&(this.O4939=0);this.isHooked?this.setAnim(this.anims.jump):
0>this.vel.y&&!this.standing?this.setAnim(this.anims.jump):0>this.vel.y&&this.O7392?this.setAnim(this.anims.run):0<this.vel.y&&!this.standing?this.isOnSolidMoverBody||this.setAnim(this.anims.fall):(0!=this.vel.x||this.O1983())&&this.standing?ig.game.O7606.O8896(this)?this.O8393&&(this.O8393.flip.x=this.O8418):this.setAnim(this.anims.run):this.attachments.br||this.dynathingWhichGrabbedMe||window.tabHasFocus&&!(this.O9943&&this.O9943.delta()>this.O4939)?this.setAnim(this.anims.idle):this.setAnim(this.anims.afk)},
O7203:function(){if(ig.game.O3919()||ig.game.O1347()||ig.game.O5798()||ig.game.O2177()||ig.input.state("click"))this.O9943=new ml.Timer,this.checkedAutoTriggerForIdle=!1;ig.game.O1347()||ig.game.O5798()||ig.game.O3919()||ig.game.O2177()?ig.game.O2481=!1:this.lastMouse&&this.lastMouse.x!==ig.input.mouse.x&&this.lastMouse.y!==ig.input.mouse.y&&(ig.game.O2481=!0);this.lastMouse.x=ig.input.mouse.x;this.lastMouse.y=ig.input.mouse.y;this.O9855.h&&!ig.game.O1347()&&!ig.game.O5798()&&(this.O4109=!0,this.standing||
(this.accel.x=0));ig.game.O1347()?this.O9855.h="left":ig.game.O5798()?this.O9855.h="right":this.O9855.h=null;ig.game.O9170()&&(this.O9090=Date.now())},doJump:function(){this.O3226||this.O4674Previous||(this.vel.y=-this.O1440*(this.O9832("higherJump")?1.25:1),this.O3666()?(this.vel.y=this.O7735(-130),this.O9832("hoverFlying")&&(this.vel.y*=.4)):this.O2027=this.O6917,this.jumping=!0,ig.ua.mobile?((ig.game.chance(30)||!this.didJumpAtLeastOnce)&&ig.game.sounds.whoosh.play(),this.didJumpAtLeastOnce=!0):
(ig.game.sounds.jump.play(),ig.game.sounds.whoosh.play()),this.O6593=!0,ig.game.O2116.O7884(this,"jumps"))},O6201:function(){this.vel.y=-32;ig.game.sounds.sticky.play()},O9904:function(){this.standing&&(this.miniJumpTimer=new ml.Timer,this.vel.y=-100)},O2952:function(){this.jumping&&0<=this.vel.y&&this.O2027!=this.O6038&&(this.O2027=this.O9764);if(this.jumping&&ig.game.O9072()&&this.vel.y<-this.O2790||this.O9832("heavy")||this.O9832("veryHeavy")||this.O6405("heavy"))this.O2027=this.O6038,this.O9832("veryHeavy")&&
(this.O2027*=2)},O4618:function(){var a=!1;this.O4075&&this.O4075.thing&&this.O4075.thing.name&&(a=this.O4075.thing.name,a=0<=a.indexOf("ground")||0<=a.indexOf("floor")||0<=a.indexOf("earth"));return a},O7139:function(){if(!this.miniJumpTimer)if(this.O9165!=this.O4583.CLIMBING)(this.O3639()&&this.standing&&ig.game.O3919()||this.O3639()&&!this.standing&&-1<this.vel.y||this.O3639()&&!this.O5479)&&!this.O6985()&&(this.rolling&&this.O4648(),this.O9165=this.O4583.CLIMBING,this.O2027=0,this.frictionModifier=
this.O2527,this.maxVelModifier=this.O3226?this.maxVelWalkable:this.O4662,this.vel={x:0,y:0},this.accel={x:0,y:0},this.O3226||ig.game.O2116.O7884(this,"climbs"));else{if(!this.O9213()&&!this.O3226)this.O9165=this.O4583.RUNNING,this.O2027=this.O9764,this.accel={x:0,y:0},this.O2842()&&(this.vel.y=-this.O1440,ig.game.sounds.jump.play(),ig.game.sounds.whoosh.play(),this.O6593=!0);else if(this.O4951()&&this.standing)this.O9165=this.O4583.RUNNING,this.O2027=this.O9764,this.accel={x:0,y:0};else if(ig.game.O9072()&&
200>Date.now()-this.O9090&&(ig.game.O1347()&&!this.O4938()||ig.game.O5798()&&!this.O9334()||!this.O9213()))this.O9165=this.O4583.RUNNING,this.O2027=this.O9764,this.accel={x:0,y:0},this.vel.y=-this.O1440,ig.game.sounds.jump.play(),ig.game.sounds.whoosh.play(),this.O6593=!0;else if(this.frictionModifier=this.O2527,this.maxVelModifier=this.O3226?this.maxVelWalkable:this.O4662,!this.O4188HasAttribute("onlyFasterDown")||ig.game.O2177()){var a=1;this.O4188HasAttribute("fast")?a=2:this.O4188HasAttribute("veryFast")?
a=3:this.O4188HasAttribute("fastest")&&(a=4);1!=a&&(this.maxVelModifier={x:this.maxVelModifier.x*a,y:this.maxVelModifier.y*a})}this.O9165==this.O4583.CLIMBING&&(this.O3226||this.O4674Previous?0!=this.vel.x||0!=this.vel.y?(0>this.vel.x?this.O8418=!1:0<this.vel.x&&(this.O8418=!0),this.setAnim(this.anims.run)):this.setAnim(this.anims.idle):this.O4618()||(this.O6798()?this.setAnim(this.anims.climbing):this.setAnim(this.anims.climbingidle)))}},checkLadderInteraction_Remoteplayer:function(){this.O9165==
this.O4583.CLIMBING&&(this.O2027=0,this.frictionModifier=this.O2527,this.maxVelModifier=this.O3226?this.maxVelWalkable:this.O4662)},O3135:function(){if(this.O9165!=this.O4583.SWIMMING){if(this.O2171()){ig.game.attachmentManager.O6639(this,!0);this.rolling&&this.O4648();this.O9165=this.O4583.SWIMMING;this.O6423();this.O2027=0;this.frictionModifier=ig.game.O4507(this.O9985);this.maxVelModifier=ig.game.O4507(this.O8554);var a=this.O4188HasAttribute("thick");a&&(this.maxVelModifier=ig.game.O4507(this.O4623Thick));
(this.O4721=this.O4188HasAttribute("effectsFree"))||ig.game.decorator.splash(this,a);this.O9495=0;this.forceSend=!0;ig.game.O2116.O7884(this,"swims");ig.game.O3957&&ig.game.O3957.O8855("swim")}}else this.O6423(),this.O6798()?(this.setAnim(this.anims.swimming),!this.O4721&&ig.game.chance(30)&&ig.game.decorator.O6997(this.pos,this.vel,this.O8418)):this.setAnim(this.anims.swimmingidle),!this.O4188sHead||this.O4188sHead.thing.O5419()?this.O3825=null:null==this.O3825?(this.O3825=new ml.Timer,this.O4188HasAttribute("heals")&&
ig.game.O3957&&ig.game.O3957.O8855("healed")):(this.O3825.delta()>this.O4777&&!this.O9832("breather")&&!this.O4188HasAttribute("harmless")&&ig.game.theyCanDrown&&(ig.game.O9710.O6326=!0,this.O3914(.05,this,!1)),this.O4188HasAttribute("heals")&&100>this.health&&(this.health=(this.health+.75).limit(0,100))),this.O2171()?(this.frictionModifier=ig.game.O4507(this.O9985),this.maxVelModifier=ig.game.O4507(this.O8554),this.O4188HasAttribute("thick")?(this.maxVelModifier=ig.game.O4507(this.O4623Thick),this.accel.y+=
10):this.O4469()&&-70<this.vel.y&&(this.accel.y-=this.O8335)):(this.O9165=this.O4583.RUNNING,this.O2027=this.O9764,this.O9783()&&this.accel.y<-this.O8335&&(this.vel.y=-this.O1440,ig.game.sounds.jump.play(),ig.game.sounds.whoosh.play()),this.accel={x:0,y:0},this.O4721||ig.game.sounds.O2903(this.O9560("thick")?ig.game.sounds.waterleaveThick:ig.game.sounds.waterleave,.3),this.O4721=!1)},O4057:function(){if(this.O9165==this.O4583.SWIMMING){this.O2027=0;this.frictionModifier=ig.game.O4507(this.O9985);
var a=this.O4188HasAttribute("thick");this.maxVelModifier=a?ig.game.O4507(this.O4623Thick):ig.game.O4507(this.O8554);this.O6423();this.O8393==this.anims.swimming&&ig.game.chance(30)&&ig.game.decorator.O6997(this.pos,this.vel,this.O8418)}else if(this.O9165!=this.O4583.SWIMMING&&this.O2171()){this.O9165=this.O4583.SWIMMING;this.O6423();this.O2027=0;this.frictionModifier=ig.game.O4507(this.O9985);this.maxVelModifier=ig.game.O4507(this.O8554);if(a=this.O4188HasAttribute("thick"))this.maxVelModifier=ig.game.O4507(this.O4623Thick);
ig.game.decorator.splash(this,a)}},O6423:function(){var a=this.O8393==this.anims.swimming?this.O1583*this.O6391:this.O1583;Math.abs(this.swimAngle+a-this.O9247)<=this.O3185?this.swimAngle+=a:this.O1583=-this.O1583;a=this.O8418?this.swimAngle:-this.swimAngle;this.anims.swimming.angle=a;this.anims.swimmingidle.angle=a},O9337:function(){var a=2400,b=1E3,c=300,d=-1500,e=-800;this.O4188HasAttribute("soft")&&(a*=.4,b*=.1,c=140,d=-800,e=-200);this.O6836()?(this.accel.y=-a,this.O2846=!0):this.O5317()?this.standing||
(this.accel.y=a,this.O2846=!0):this.O9775()?(this.accel.x=b,this.accel.y=0,this.frictionModifier=this.O8960,this.maxVelModifier=this.O2828,this.O4188HasAttribute("standing")?this.setAnim(this.anims.idle):this.setAnim(this.anims.fall),this.O2846=!0):this.O3536()?(this.accel.x=-b,this.accel.y=0,this.frictionModifier=this.O8960,this.maxVelModifier=this.O2828,this.O4188HasAttribute("standing")?this.setAnim(this.anims.idle):this.setAnim(this.anims.fall),this.O2846=!0):this.O8049()?(this.accel.x=-c,this.accel.y=
d,this.frictionModifier=this.O8960,this.maxVelModifier=this.maxVelPushingDiagonal,this.O4188HasAttribute("standing")?this.setAnim(this.anims.idle):this.setAnim(this.anims.fall),this.O2846=!0):this.O9556()?(this.accel.x=c,this.accel.y=d,this.frictionModifier=this.O8960,this.maxVelModifier=this.maxVelPushingDiagonal,this.O4188HasAttribute("standing")?this.setAnim(this.anims.idle):this.setAnim(this.anims.fall),this.O2846=!0):this.O9952()?(this.accel.x=c,this.accel.y=e,this.frictionModifier=this.O8960,
this.maxVelModifier=this.maxVelPushingDiagonal,this.O4188HasAttribute("standing")?this.setAnim(this.anims.idle):this.setAnim(this.anims.fall),this.O2846=!0):this.O4699()?(this.accel.x=-c,this.accel.y=e,this.frictionModifier=this.O8960,this.maxVelModifier=this.maxVelPushingDiagonal,this.O4188HasAttribute("standing")?this.setAnim(this.anims.idle):this.setAnim(this.anims.fall),this.O2846=!0):this.O2846&&(this.accel={x:0,y:0},this.O2846=!1)},O8951:function(){var a=this.O9832("slowsFall")||this.O9832("slowsFallALot")?
30:ig.game.O1845;0<this.vel.y&&!this.standing&&this.O9165==this.O4583.RUNNING&&!this.O2846&&!this.isHooked?this.fallTimer?(this.fallTimer.delta()>.8*a&&!this.O7709()&&!this.O3666()&&ig.game.decorator.O6524(this),this.fallTimer.delta()>a&&this.kill(ig.game.deathTypes.FALL)):this.fallTimer=new ml.Timer:this.fallTimer=null},O3914:function(a,b,c,d){var e=1;this.O9832("reducesDamage25percent")?e=.75:this.O9832("reducesDamage50percent")?e=.5:this.O9832("reducesDamage75percent")?e=.25:this.O9832("reducesDamage100percent")&&
(e=0);a*=e;0<a&&((!this.O2284||this.O2284.delta()>this.O3465)&&c&&ig.game.chance(this.O8995)&&(c=ig.ua.mobile?5:15,(100==this.health||ig.game.chance(c))&&ig.game.sounds.O9396(ig.game.sounds.pain,this),this.O3825=new ml.Timer),this.O2284&&this.O2284.delta()<this.O1193&&(this.setAnim(this.anims.harm),this.O8393.angle=this.O8418?-.1:.1,this.O8393.flip.x=this.O8418),this.O8088&&(d||100==this.health&&ig.game.O2116.O7884(this,"harmed"),this.parent(a,b)))},O9933:function(){return!(!this.attachments.b||!this.attachments.b.id)},
O8510:function(){return!(!this.attachments.w||!this.attachments.w.id)},O6630:function(){return!(!this.attachments.wp||!this.attachments.wp.id)},O8078:function(){return!(!this.attachments.h||!this.attachments.h.id)},O6985:function(){return!(!this.attachments.m||!this.attachments.m.id)},O2868:function(){return!!(this.attachments.h&&this.attachments.h.id&&"LINER"==this.attachments.h.base&&this.attachments.h.lines)},O4292:function(){return!(!this.attachments.h||!this.attachments.h.id||"AIMABLE"!=this.attachments.h.base)},
draw:function(){if(ig.game.O7606.isRunning&&!ig.game.O7606.O9321(this)){var a=ig.game.O7606.O9987;if(ig.game.O7606.O7264&&ig.game.O7606.O7264.O2970==this.O2970)switch(ig.game.O7606.O6567){case "movementTrail":this.O4862();break;case "multipleMe":this.O1736(a);break;case "meFloating":this.O3332();break;case "brightLightMe":this.O4621("lighter");break;case "darkLightMe":this.O4621("darken");break;case "iBlendIn":this.O4621("luminosity");break;case "reverseMe":this.O1776();break;case "moveBackwards":this.O5056();
break;case "meRollMoving":this.O8122();break;case "everyoneFloating":a?this.O3332():this.doDraw();break;case "everyoneRollMoving":a?this.O8122():this.doDraw();break;case "everyoneIsInvisible":a||this.doDraw();break;default:this.doDraw()}else if(ig.game.O7606.targetPlayer&&ig.game.O7606.targetPlayer.O2970==this.O2970)switch(ig.game.O7606.O6567){case "nextToMeFloating":this.O3332();break;case "nextToMeMovementTrail":this.O4862();break;case "nextToMeMultiple":this.O1736(a);break;case "nextToMeRollMoving":this.O8122();
break;case "nextToMeBlendingIn":this.O4621("luminosity");break;case "nextToMeBrightLight":this.O4621("lighter");break;default:this.doDraw()}else switch(ig.game.O7606.O6567){case "everyoneFloating":this.O3332();break;case "everyoneRollMoving":this.O8122();break;case "everyoneIsInvisible":break;default:this.doDraw()}}else this.doDraw()},O8122:function(){if(0==this.vel.x&&0==this.vel.y||this.O9165==this.O4583.CLIMBING)this.boostData=null,this.doDraw();else{var a=this.O8393.angle;this.boostData||(this.boostData=
{angle:0});this.boostData.angle+=.11*(this.O8418?1:-1);this.O8393.angle=this.boostData.angle;this.doDraw();this.O8393.angle=a}},O1776:function(){var a=this.O8393.angle,b=this.O8418;this.O8418=!this.O8418;this.O8393.flip.x=this.O8418;this.O8393.angle=Math.PI;this.doDraw();this.O8393.angle=a;this.O8418=b},O5056:function(){var a=this.O8418;this.O8418=!this.O8418;this.O8393.flip.x=this.O8418;this.doDraw();this.O8418=a},O4621:function(a){ml.Misc.O5847(a);this.doDraw();ml.Misc.O3715()},O3332:function(){this.boostData||
(this.boostData={offsetY:Math.random(-3,3),O9215:3,O1731:.1},ig.game.chance(50)&&(this.boostData.O1731*=-1));var a=this.O8393.angle;this.O8393.angle=.1*(this.O8418?1:-1);ig.game.O7606.O4997(this.boostData);var b=ig.game.O4507(this.pos);this.pos.y+=this.boostData.offsetY-10;this.doDraw();this.pos=b;this.O8393.angle=a},O1736:function(a){this.O5801.push(ig.game.O4507(this.pos));6<this.O5801.length&&this.O5801.shift();var b=ig.game.O4507(this.pos);6<=this.O5801.length&&(a&&this.O5801[0]&&(this.pos.x=
this.O5801[0].x-29,this.pos.y=this.O5801[0].y,this.doDraw()),this.O5801[2]&&(this.pos.x=this.O5801[2].x+29,this.pos.y=this.O5801[2].y,this.doDraw()));this.pos=b;this.doDraw()},O4862:function(){var a={pos:ig.game.O4507(this.pos),animName:this.O8393.name,flippedX:this.O8418};this.O5801.push(a);100<this.O5801.length&&this.O5801.shift();a=ig.game.O7606.O9987;for(var b=this.O5801.length,c=b-1,d=0;d<b;d++){var e=this.O5801[d];e.pos&&(this.pos=e.pos,this.O8418=e.flippedX,this.setAnim(this.anims[e.animName]),
d==b-1?(a&&ml.Misc.O3715(),ig.system.context.globalAlpha=1):(a&&ml.Misc.O5847("lighter"),ig.system.context.globalAlpha=(d+1)/100/7.5),this.doDraw(d<c))}},doDraw:function(a){if(!(this.O7787||this.O4206||this.O8088&&ig.game.portaller.O7787||this.O8088&&ig.game.portaller.O4206)){this.attachments.h&&"LINER"==this.attachments.h.base&&ig.game.O1896.O1141(this,this.attachments.h.lines,this.attachments.h.linesData,this.attachments.h.attributes,this.attachments.h.rgb,this.attachments.h.rgb2);var b=this.O9832("invisibility");
b&&(ig.system.context.globalAlpha=.25,ml.Misc.O5847("xor"));var c=!1,d=!1,e=!1,f=!1,g=!1,h=!1;this.O6985()&&(this.getMountableHasAttribute("behindBody")?c=!0:d=!0);this.O8510()&&(this.O9832("behindBody")||this.O9832("behind")?e=!0:f=!0);this.O6630()&&(this.O2063("behindBody")||this.O2063("behind")?g=!0:h=!0);c&&this.drawAttached_Mountable();g&&this.O9601(a,"wp");e&&this.O9601(a,"w");if("everyone_is_invisible"!=ig.game.O7606.O6567){if(this.O9933()){(c=this.attachments.b&&this.attachments.b.attributes&&
this.attachments.b.attributes.bright||"light"==ig.game.O7606.O6567)&&ml.Misc.O5847("lighter");this.O6373=null;if(this.O9165!=this.O4583.CLIMBING||this.O3226||this.O4674Previous)this.O6373=ig.game.attachmentManager.O3740(this);this.O6373&&this.O6373.attributes&&this.O6373.attributes.replaces||this.O9832("replaces")||this.getMountableHasAttribute("replaces")||this.O9516();this.O6373&&this.O6373.O1141(this);c&&ml.Misc.O3715()}else(this.O8088||ig.game.O2694&&5<=ig.game.O2694.delta())&&this.O6164();h&&
this.O9601(a,"wp");f&&this.O9601(a,"w");b&&(ig.system.context.globalAlpha=1,ml.Misc.O3715());this.O8078()&&!this.isHooked&&!this.hook&&this.O5364()}d&&this.drawAttached_Mountable()}},O6164:function(){var a=this.O8393;if(a)if("idle"==a.name&&this.O6755.delta()>this.O6781&&ig.game.chance(this.O2456)&&(this.O7341=new ml.Timer,this.O6755.reset()),"idle"==a.name&&this.O7341){var b=a.tile;a.tile=10;a.draw(this.pos.x-this.offset.x-ig.game._rscreen.x+this.O2047.x,this.pos.y-this.offset.y-ig.game._rscreen.y+
this.O2047.y);a.tile=b;this.O7341.delta()>=this.blinkTime&&(this.O7341=null)}else a.draw(this.pos.x-this.offset.x-ig.game._rscreen.x+this.O2047.x,this.pos.y-this.offset.y-ig.game._rscreen.y+this.O2047.y)},O9306:function(){var a=0;if(this.attachments.b&&this.attachments.b.O8393){a=this.attachments.b.O8393.flip.x?-2:-1;var b=this.attachments.b&&this.attachments.b.O8393?this.attachments.b.O8393.sheet:null;if(b&&b.width&&b.height){var c=b.width==ig.game.O9925&&b.height==ig.game.O9925;(3!=this.offset.x||
3!=this.offset.y)&&!c&&(c=!this.O8393.flip.x,25<=b.width?a=c?a+-2:a+2:14<=b.width?a=c?a+-1:a+1:10<=b.width?a=c?a+2:a+5:6<=b.width&&(a=c?a+4:a+7))}}return a},O9516:function(){this.attachments.b.O8393=this.attachments.b.anims[this.O8393.name];this.attachments.b.O8393.flip.x=this.O8393.flip.x;if(7==this.O8393.tile||9==this.O8393.tile)this.attachments.b.O8393.flip.x=!this.attachments.b.O8393.flip.x;1>=this.O8393.tile&&(this.attachments.b.O8393.tile=this.O8393.tile);this.attachments.b.O8393.angle=this.O8393.angle;
this.attachments.b.O8393.name=this.O8393.name;var a=this.O9306();if(this.attachments.b.O8393){this.isLying&&(this.attachments.b.O8393.angle=ig.game.O4173*(this.attachments.b.O8393.flip.x?-1:1));"idle"==this.attachments.b.O8393.name&&this.O6755.delta()>this.O6781&&ig.game.chance(this.O2456)&&(this.O7341=new ml.Timer,this.O6755.reset());a=this.pos.x-this.offset.x-ig.game._rscreen.x+a+this.O2047.x;var b=this.pos.y-this.offset.y-ig.game._rscreen.y+this.O2047.y,c=this.O6985(),d=this.getMountableHasAttribute("toStand");
if(d=(this.isSitting||c)&&!this.O1795&&!d)this.attachments.b.anims.sit.flip.x=this.attachments.b.O8393.flip.x,this.attachments.b.anims.sit.angle=this.attachments.b.O8393.angle,this.attachments.b.anims.sit.draw(a,b);("idle"==this.attachments.b.O8393.name||this.isSitting||c)&&this.O7341?(this.attachments.b.isOld||d||this.attachments.b.O8393.draw(a,b),this.attachments.b.anims.blink.flip.x=this.attachments.b.O8393.flip.x,this.attachments.b.anims.blink.angle=this.attachments.b.O8393.angle,this.attachments.b.anims.blink.draw(a,
b),this.O7341.delta()>=this.blinkTime&&(this.O7341=null)):(d||this.attachments.b.O8393.draw(a,b),"afk"==this.attachments.b.O8393.name&&!this.attachments.b.isOld&&(this.attachments.b.anims.blink.flip.x=this.attachments.b.O8393.flip.x,this.attachments.b.anims.blink.angle=this.attachments.b.O8393.angle,this.attachments.b.anims.blink.draw(a,b)),("idle"==this.attachments.b.O8393.name||this.isSitting||c)&&!this.attachments.b.isOld&&this.O6285&&.2>=this.O6285.delta()&&(this.attachments.b.anims.talk.flip.x=
this.attachments.b.O8393.flip.x,this.attachments.b.anims.talk.angle=this.attachments.b.O8393.angle,this.attachments.b.anims.talk.draw(a,b)),this.O6285&&(a=this.O6285.delta(),.4<=a||.2<=a&&ig.game.chance(1))&&(this.O6285=null))}},O2274:function(a,b){if("string"==typeof a)if("_nl"==a)this.O6285=null,this.O6644=!1;else{var c=a;b&&3==a.length&&"c"==a.substr(1,1)&&(c=a.substr(2,1));null!=this.O6285||"/"!=c&&"*"!=c?!this.O6644&&!this.O6285&&ig.game.chance(90)&&(b?3==a.length&&"c"==a.substr(1,1)&&(c=c.toLowerCase().charCodeAt(0),
97<=c&&122>=c&&(this.O6285=new ml.Timer)):this.O6285=new ml.Timer):this.O6644=!0}},O9601:function(a,b){this.attachments[b]&&"DYNATHING"==this.attachments[b].base?this.O3500(a,b):this.attachments[b]&&"STACKWEAR"==this.attachments[b].base?this.O2695(b):this.O1552(b)},O3500:function(a,b){this.attachments[b].dynathingEntity&&(this.attachments[b].dynathingEntity.O9186(this.O5904()),this.attachments[b].dynathingEntity.O4529=this.O8418,this.attachments[b].dynathingEntity.O9744&&(this.attachments[b].dynathingEntity.parentScreenName=
this.screenName),this.attachments[b].dynathingEntity.draw(null,a,this.O6622?this.O6622[b]:void 0))},O2695:function(a){this.O8393==this.anims.climbing||this.O8393==this.anims.climbingidle||this.O8393==this.anims.creating?(this.attachments[a].O8393=this.attachments[a].anims.back,this.attachments[a].O8393.flip.x=!1):(this.attachments[a].O8393=this.attachments[a].anims.normal,this.O1687("nonFlipping",a)?this.attachments[a].O8393.flip.x=!1:this.attachments[a].O8393.flip.x=this.O8393.flip.x);this.attachments[a].O8393.angle=
this.O8393.angle;this.isLying&&(this.attachments[a].O8393.angle=ig.game.O4173*(this.attachments[a].O8393.flip.x?-1:1));var b=this.O5913(a);this.attachments[a].O8393.draw(this.pos.x-this.offset.x-ig.game._rscreen.x+b.x+this.O2047.x,this.pos.y-this.offset.y-ig.game._rscreen.y+b.y+this.attachmentDrawOffsets.wearable.y+this.O2047.y)},O1552:function(a){if(this.attachments[a].animSheet){var b=this.attachments[a].animSheet.image;if(b&&b.loaded){var c=0,d=0;if(this.O6622&&this.O6622[a]&&this.O8393&&void 0!==
this.O8393.flip&&this.O8393.sheet){var e=ig.game.attachmentManager.O8626(this.attachments.b,this.attachments[a],this.O8393.sheet.width,this.O8393.sheet.height);c+=e.x;d+=e.y;c+=this.O6622[a].x*(this.O8393.flip.x?-1:1);d+=this.O6622[a].y}b.draw(this.pos.x-this.offset.x-ig.game._rscreen.x+c,this.pos.y-this.offset.y-ig.game._rscreen.y+d,0,0,b.width,b.height)}}},O5904:function(){var a=this.O1229();a.x-=11;a.y-=13;if(this.attachments&&this.attachments.b&&this.attachments.b.animSheet){var b=this.attachments.b.animSheet.width;
this.O8418&&23<=b?--a.x:17>=b&&(a.x+=2)}this.O6985()&&(a.x+=this.O2047.x,a.y-=this.O2047.y);return a},O5913:function(a){var b=0,c=0;if(3==this.offset.x&&3==this.offset.y){if(this.O8393==this.anims.creating?b=0==this.O8393.frame?this.attachmentDrawOffsets.wearable.cx0:this.attachmentDrawOffsets.wearable.cx1:(b=this.O8393.flip.x?this.attachmentDrawOffsets.wearable.rx:this.attachmentDrawOffsets.wearable.lx,this.attachments[a].O8393==this.attachments[a].anims.back&&(b=this.attachmentDrawOffsets.wearable.bx)),
this.attachments[a].O8393&&this.attachments[a].O8393.sheet&&this.attachments[a].O8393.sheet.width==ig.game.O4975){var d=!this.O8393.flip.x;b-=11;d||(b+=3);c-=6}}else this.O8393&&this.O8393.sheet&&(d=ig.game.attachmentManager.O8626(this.attachments.b,this.attachments[a],this.O8393.sheet.width,this.O8393.sheet.height),b+=d.x,c+=d.y);this.O6622&&this.O6622[a]&&this.O8393&&this.O8393.flip&&(b+=this.O6622[a].x*(this.O8393.flip.x?-1:1),c+=this.O6622[a].y);return{x:b,y:c}},O4257:function(){var a=0,b=0,c=
this.attachments[ig.game.attachmentManager.slots.HOLDABLE];if(c&&c.O8393){var d=this.attachmentDrawOffsets;if((c=c.O8393.sheet)&&c.width&&c.height&&this.O8393.sheet){var e=this.O8393.sheet.width,f=this.O8393.sheet.height;this.attachments.b&&this.attachments.b.animSheet&&this.attachments.b.animSheet.width&&(e=this.attachments.b.animSheet.width,f=this.attachments.b.animSheet.height);var g=!this.O8393.flip.x;a=g?d.holdable.lx:d.holdable.rx;b=d.holdable.y;var h=3==this.offset.x&&3==this.offset.y;10>=
c.width&&10>=c.height&&(a=g?d.holdableSmall.lx:d.holdableSmall.rx,b=d.holdableSmall.y);h||(26<=e?a=g?a+7:a+3:22<=e?a+=2:18<=e&&(a=g?a+3:a+1),23<=f&&(b+=f/3.5));this.attachments.h.attributes&&this.attachments.h.attributes.stickyOnPeople&&(a=this.O8393.flip.x?11:6,b-=5);a=Math.floor(a-c.width/2);b=Math.floor(b-c.height/2)}}this.attachments.b&&this.O8393&&this.O8393.flip&&(a+=3*(this.O8393.flip.x?1:-1),b-=3);return{x:a,y:b}},O5364:function(){var a=this.attachments[ig.game.attachmentManager.slots.HOLDABLE];
if(a&&a.O8393&&a.animSheet.image&&a.animSheet.image.width){var b=ig.game.O7606.O4767(this),c=0,d=0;this.O6622&&this.O6622.h&&this.O8393&&this.O8393.flip&&(c=this.O6622.h.x*(this.O8393.flip.x?-1:1),d=this.O6622.h.y);a.pos?(a.O8393.angle=0+b,a.O8393.draw(a.pos.x-ig.game._rscreen.x-a.animSheet.image.width/2+c,a.pos.y-ig.game._rscreen.y-a.animSheet.image.height/2+d)):"creating"==this.O8393.name||this.O9165==this.O4583.CLIMBING&&!this.O3226||(a.O8393.flip.x=this.O1331("nonFlipping")?!1:this.O8393.flip.x,
this.O2885&&.125>=this.O2885.delta()?this.O8393.flip.x?(a.O8393.pivot.x=0,a.O8393.pivot.y=a.animSheet.image.height,a.O8393.angle=this.O8393.angle+7*this.O2885.delta()+b):(a.O8393.pivot.x=a.animSheet.image.width,a.O8393.pivot.y=a.animSheet.image.height,a.O8393.angle=this.O8393.angle-7*this.O2885.delta()+b):(a.O8393.pivot.x=a.animSheet.image.width/2,a.O8393.pivot.y=a.animSheet.image.height/2,a.O8393.angle=this.O8393.angle+b),b=this.O4257(),a.O8393.draw(this.pos.x-this.offset.x-ig.game._rscreen.x+b.x+
this.O2047.x+c,this.pos.y-this.offset.y-ig.game._rscreen.y+b.y+this.O2047.y+d))}},drawAttached_Mountable:function(){this.attachments[ig.game.attachmentManager.slots.MOUNTABLE]&&this.attachments[ig.game.attachmentManager.slots.MOUNTABLE].O8393&&(this.getMountableHasAttribute("nonFlipping")||(this.attachments.m.O8393.flip.x=this.O8393.flip.x),this.attachments[ig.game.attachmentManager.slots.MOUNTABLE].O8393.draw(this.pos.x-this.offset.x-ig.game._rscreen.x,this.pos.y-this.offset.y-ig.game._rscreen.y))},
O3273:function(){var a=ig.system.context;a.fillStyle="#fff";a.fillRect((this.pos.x+this.O4188Offset.x-ig.game.screen.x)*ig.system.scale,(this.pos.y+this.O4188Offset.y-ig.game.screen.y)*ig.system.scale,2,2);a.fillRect((this.pos.x+this.O1373LeftPlayerOffset.x-ig.game.screen.x)*ig.system.scale,(this.pos.y+this.O1373LeftPlayerOffset.y-ig.game.screen.y)*ig.system.scale,2,2);a.fillRect((this.pos.x+this.O1373RightPlayerOffset.x-ig.game.screen.x)*ig.system.scale,(this.pos.y+this.O1373RightPlayerOffset.y-
ig.game.screen.y)*ig.system.scale,2,2);a.fillRect((this.pos.x+this.thingBelowPlayerOffset.x-ig.game.screen.x)*ig.system.scale,(this.pos.y+this.thingBelowPlayerOffset.y-ig.game.screen.y)*ig.system.scale,2,2);a.fillRect((this.pos.x+this.O4188sFeetOffset.x-ig.game.screen.x)*ig.system.scale,(this.pos.y+this.O4188sFeetOffset.y-ig.game.screen.y)*ig.system.scale,2,2);a.fillRect((this.pos.x+this.thingToLeftOfPlayerOffset.x-ig.game.screen.x)*ig.system.scale,(this.pos.y+this.thingToLeftOfPlayerOffset.y-ig.game.screen.y)*
ig.system.scale,2,2);a.fillRect((this.pos.x+this.thingToRightOfPlayerOffset.x-ig.game.screen.x)*ig.system.scale,(this.pos.y+this.thingToRightOfPlayerOffset.y-ig.game.screen.y)*ig.system.scale,2,2)},O2848:function(){this.O4855.draw()},O4788:function(){if(ig.game.O6564&&ig.game.settings.showMainUI&&(this.O3473(),0<this.O4944)){var a=this.screenName;1>=a.length&&(a="name: "+a);var b=this.O1229();this.attachments.b&&this.attachments.b.animSheet&&this.attachments.b.animSheet.height&&!this.attachments.m&&
(b.y-=ig.game.O9925-this.attachments.b.animSheet.height);var c=b.x-this.offset.x-ig.game._rscreen.x+9;b=b.y-this.offset.y-ig.game._rscreen.y+22;this.attachments.br&&ig.game.O5178&&(a="^");var d=ig.game.blackWhiteFont.O2880(a);ig.system.context.globalAlpha=Math.max(this.O4944-.1,0);0==this.rank&&(c+=4,ig.game.O8159.draw(c-d/2-13,b-1,ig.system.context.globalAlpha,ig.game.O8159.rank0));a=ig.game.strings.O5024(a,16);this.viewingMultithingName&&(a[1]="^"+this.viewingMultithingName,3<=a.length&&a.splice(2,
1));for(d=0;d<a.length;d++)ig.game.blackWhiteFont.draw(a[d],c,b+7*d,ig.Font.ALIGN.CENTER);ig.system.context.globalAlpha=1}this.hasMultithingAddButton&&(a=this.O1229(),this.attachments.b&&this.attachments.b.animSheet&&this.attachments.b.animSheet.height&&!this.attachments.m&&(a.y-=ig.game.O9925-this.attachments.b.animSheet.height),ig.game.O8159.draw(a.x-this.offset.x-ig.game._rscreen.x+9-ig.game.O8159.addMultithingParticipantButton.width/2,a.y-this.offset.y-ig.game._rscreen.y+22-15,.8,ig.game.O8159.addMultithingParticipantButton))},
O3473:function(){this.O8088||(this.O9372?(this.O4944=this.O1282,30<=this.O9372.delta()&&(this.O9372=null)):this.O4944>=this.O1282-.1?this.O5993&&(this.O5993=null):(this.O5993||(this.O5993=new ml.Timer),15<=this.O5993.delta()&&(this.O9372=new ml.Timer,this.O5993=null)))},O4743:function(){var a=this.O8088&&ig.game.isFullAccount&&120>=ig.game.O2004;if(this.O8088&&a&&ig.game.actioninfo&&ig.game.actioninfo.isOpen)this.O4944=0;else if(!a&&this.O8088&&0<ig.game.O1257.O4944&&(!this.attachments.br||!ig.game.O5178))this.O4944=
0;else if(!this.O8088||a||this.attachments.br){var b=3*ig.system.tick;this.O8088&&!a?this.O4944<this.O1282&&(this.O4944+=b):0==this.vel.y&&0==this.vel.x?this.nameTimer?this.nameTimer.delta()>ig.game.O6354&&this.O4944<this.O1282&&(this.O4944+=b):this.nameTimer=new ml.Timer:(this.nameTimer=null,this.O4944=0)}},O1139:function(){200<Math.abs(this.vel.x)+Math.abs(this.vel.y)&&!this.isHooked&&ig.game.decorator.O6655(this)},O7983:function(){this.isHooked||(this.O8088?250<Math.abs(this.vel.x)+Math.abs(this.vel.y)&&
ig.game.chance(3)&&!ig.game.O2571()&&ig.game.sounds.softWhoosh.play():250<(Math.abs(this.vel.x)<=5+Math.abs(this.vel.y))&&ig.game.chance(3)&&ig.game.sounds.O9396(ig.game.sounds.softWhoosh,this))},O8605:function(){if(!this.isSitting&&!this.isLying&&!ig.game.O7606.O8896(this)){if(!this.O4485||this.O4485.delta()>this.O2204){var a=this.O5479&&this.O5479.thing?this.O5479.thing.name:"";a?0<=a.indexOf("metal")?ig.game.sounds.footfalls_metal.play():0<=a.indexOf("grass")&&ig.game.chance(25)?ig.game.sounds.footfalls_grass.play():
0<=a.indexOf("snow")?ig.game.sounds.footfalls_snow.play():0<=a.indexOf("sand")||0<=a.indexOf("beach")?ig.game.sounds.footfalls_sand.play():0<=a.indexOf("wood")?ig.game.sounds.footfalls_wood.play():0<=a.indexOf("energy")?ig.game.sounds.footfalls_energy.play():0===a.indexOf("mud")||0<=a.indexOf(" mud")?ig.game.sounds.footfalls_mud.play():this.O4075&&this.O4075.thing&&"FURRY"==this.O4075.thing.base&&ig.game.chance(50)?ig.game.sounds.footfalls_grass.play():ig.game.sounds.footfalls.play():ig.game.sounds.footfalls.play()}this.O4485=
new ml.Timer}},kill:function(a){if(!(ig.game.writableDialog&&ig.game.writableDialog.isOpen||ig.ua.iexplorer&&a==ig.game.deathTypes.FOCUS||a==ig.game.deathTypes.FALL&&(this.isHooked||this.O7709()||this.O3666())||a==ig.game.deathTypes.DEADLY&&(this.O9832("reducesDamage100percent")||ig.game.O4223&&ig.game.O4873.O9498())||this.isDead||this.isDying)){this.isDying=!0;this.O8088&&(ig.game.O2116.O7884(this,"dies"),ig.game.O2974(),ig.game.brainManager.O8112=!1);!a&&this.O7436&&1<=this.O7436.length&&(a=ig.game.deathTypes.POISON);
ig.game.O2666=this.O8088&&ig.game.O2694&&3>=ig.game.O2694.delta();var b={O8418:this.O8418,O8088:this.O8088,player:this,deathType:a};ig.game.attachmentManager.O6639(this,!1);this.O8088?ig.game.spawnEntity(EntityDeadPlayer,this.pos.x,this.pos.y,b):ig.game.O9759(EntityDeadPlayer,this.pos.x,this.pos.y,b);a!=ig.game.deathTypes.FALL&&ig.game.decorator.emitDeathDust(this.pos);this.isDead=!0;this.O8088&&ig.game.O7836.O6994(a);ig.game.addStat(this.O2970,"died");this.parent()}},check:function(a){},O2534:function(a,
b){},O4238:function(){this.rolling&&((this.O8393.angle=0,this.O9165!=this.O4583.RUNNING)?this.rolling=!1:(this.angle+=this.O4391*this.O9280,this.standing&&!this.O7392&&(this.O4391=this.O8222,this.vel.x=this.O2624.x*this.O9280,this.angle>this.twoPi||this.angle<-this.twoPi)?this.O4648():(this.angle>this.twoPi&&(this.angle-=this.twoPi),this.angle<-this.twoPi&&(this.angle+=this.twoPi),this.O8393.angle=this.angle)))},O9568:function(a,b,c){this.O6985()||100!=c&&!ig.game.chance(c)||(this.rolling=!0,this.O4391=
b,this.O9280=a)},O4648:function(){this.rolling=!1;this.O2966()},O2966:function(){this.anims.idle.angle=0;this.anims.run.angle=0;this.anims.jump.angle=0;this.anims.fall.angle=0;this.anims.climbing.angle=0;this.anims.climbingidle.angle=0;this.anims.swimming.angle=0;this.anims.swimmingidle.angle=0;this.anims.creating.angle=0;this.anims.afk.angle=0;this.anims.harm.angle=0},O1983:function(){return!ig.game.O3957.isOpen&&!ig.game.holderDialog.O2440&&(ig.game.O1347()||ig.game.O5798())},O6798:function(){return!ig.game.O3957.isOpen&&
!ig.game.holderDialog.O2440&&(ig.game.O1347()||ig.game.O5798()||ig.game.O3919()||ig.game.O2177())},O3639:function(){return this.O4075&&this.O4075.thing.O5381()},O9213:function(){return this.O1373LeftPlayer&&this.O1373LeftPlayer.thing.O5381()||this.O1373RightPlayer&&this.O1373RightPlayer.thing.O5381()},O2842:function(){return this.O4188sFeet&&this.O4188sFeet.thing.O5381()},O6648:function(){return this.O5479&&this.O5479.thing.O5381()},O4938:function(){return this.thingToLeftOfPlayer&&this.thingToLeftOfPlayer.thing.O5381()},
O9334:function(){return this.thingToRightOfPlayer&&this.thingToRightOfPlayer.thing.O5381()},O2171:function(){return this.O4075&&this.O4075.thing.isALiquid},O9783:function(){return this.O4188sFeet&&this.O4188sFeet.thing.isALiquid},O4469:function(){return this.O4188sHead&&this.O4188sHead.thing.isALiquid},O6836:function(){return this.O4075&&this.O4075.thing.O5244()&&0===this.O4075.rotation},O9775:function(){return this.O4075&&this.O4075.thing.O5244()&&1===this.O4075.rotation},O5317:function(){return this.O4075&&
this.O4075.thing.O5244()&&2===this.O4075.rotation},O3536:function(){return this.O4075&&this.O4075.thing.O5244()&&3===this.O4075.rotation},O8049:function(){return this.O4075&&this.O4075.thing.O9694()&&0===this.O4075.rotation},O9556:function(){return this.O4075&&this.O4075.thing.O9694()&&1===this.O4075.rotation},O9952:function(){return this.O4075&&this.O4075.thing.O9694()&&2===this.O4075.rotation},O4699:function(){return this.O4075&&this.O4075.thing.O9694()&&3===this.O4075.rotation},O4951:function(){return this.last.y<
this.pos.y},O7863:function(a){this.friction.x=a.x;this.friction.y=a.y},O6519:function(a){this.maxVel.x=a.x;this.maxVel.y=a.y},O6301:function(){this.friction.x=this.O4781.x;this.friction.y=this.O4781.y},O1278:function(){this.maxVel.x=this.O3599.x;this.maxVel.y=this.O3599.y;this.O2624.x=130;this.O2624.y=600},O6868:function(a){this.O1230(a);a=this.O8088;this.attachments.m&&ig.game.attachmentManager.O3578(this,ig.game.attachmentManager.slots.MOUNTABLE,a);ig.game.sounds.O9396(ig.game.sounds.collected,
this);ig.game.decorator.O6626(this)},O1230:function(a){ig.game.attachmentManager.O7355(ig.game.O1257,ig.game.attachmentManager.slots.BODY,a,null,"STACKWEARB")},O6050:function(a){this.O2124(a);var b=this.O8088;this.attachments.m&&ig.game.attachmentManager.O3578(this,ig.game.attachmentManager.slots.MOUNTABLE,b);this.O9904();this.O8088&&(this.attachments.b&&ig.game.attachmentManager.O3578(this,ig.game.attachmentManager.slots.BODY,b),ig.game.O7836.O7619(a));ig.game.attachmentManager.O7793(this,ig.game.attachmentManager.slots.BODY,
!0);ig.game.sounds.O9396(ig.game.sounds.collected,this);ig.game.decorator.O6626(this)},O2124:function(a){this.O1436=a;this.animSheet=new ml.AnimationSheet(ig.game.O1946+"media/avatar-spritesheets/"+this.O1436+".png",16,19);this.O1152()},O9882:function(a){this.screenName=a;this.O8088&&(ml.Misc.O3431(),ig.game.O7836.O8942(a))},O3592:function(a,b,c){if(null!=a){c=ig.game.strings.O7934(a,c);var d=null;0!==a.indexOf("http://")&&0!==a.indexOf("https://")||!b||(d=a);this.O4855.O4505(c,d)}},onClick:function(a){a=
!a;!ig.game.playerDialog||ig.game.holderDialog&&ig.game.holderDialog.O1176()||a&&(ig.game.O1257.O2868()||ig.game.O1257.O4292())||ig.game.userMapDialog&&ig.game.userMapDialog.isOpen&&!this.O8088||(this.O8088?(a=null!=this.O9960,ig.input.state("ctrl")||a?(ig.game.attachmentManager.O6791(this,!0),a&&ig.game.playerDialog.close()):ig.ua.mobile?this.O9960=new ml.Timer:ig.input.state("shift")?ig.game.playerDialog.O5829(ig.game.O1257.O2970):ig.game.playerDialog.O7845()):ig.input.state("shift")?ig.game.playerDialog.O5829(this.O2970):
this.hasMultithingAddButton&&0<this.O4944?ig.game.O3447.addParticipant(this,!0):ig.game.playerDialog.openForPlayerId(this.O2970,{x:this.pos.x+7-ig.game.screen.x,y:this.pos.y-ig.game.screen.y}))},onHover:function(){},O1593:function(){this.O8418=this.O8393.flip.x=!0},O2626:function(){this.O8418=this.O8393.flip.x=!1},O3548:function(){this.standing&&this.canJump&&(this.O6761=!0)},O7572:function(){this.O6761&&(this.doJump(),this.O2952(),this.O6761=!1)},O8897:function(){return this.attachments&&this.attachments.h?
this.attachments.h.name:null},O1558:function(){for(var a=new Date,b=localStorage.length-1;0<=b;b--){var c=localStorage.key(b);if(0===c.indexOf("userAllIs_")){var d=localStorage.getItem(c);if(d)try{var e=JSON.parse(d);e.dateSaved?ig.game.O2116.getDaysDifferenceBetween(new Date(e.dateSaved),a)>ig.game.O2116.O8182&&localStorage.removeItem(c):localStorage.removeItem(c)}catch(f){localStorage.removeItem(c)}}}},O8362:function(){var a="userAllIs_"+(ig.game.areaGroupId?ig.game.areaGroupId:""),b=localStorage.getItem(a);
if(b)try{this.allIs=JSON.parse(b).allIs}catch(c){localStorage.removeItem(a)}},saveAreaAllIsData:function(){if(this.allIs&&0!=this.allIs.length){var a={dateSaved:ig.game.strings.O7882(),allIs:this.allIs};ig.game.O5285.setItem("userAllIs_"+(ig.game.areaGroupId?ig.game.areaGroupId:""),JSON.stringify(a))}else localStorage.removeItem("userAllIs_"+ig.game.areaGroupId)},O1227:function(a){if(a){a=a.toLowerCase();a=a.split(" and ");for(var b=0;b<a.length;b++){var c=a[b];c&&-1===this.allIs.indexOf(c)&&this.allIs.push(c)}this.saveAreaAllIsData();
ig.game.O2116.O8691()}},removeFromAllIs:function(a){if("*"==a)this.allIs=[],this.saveAreaAllIsData();else if(a){a=a.toLowerCase();a=a.split(" and ");for(var b=0;b<a.length;b++){var c=a[b];c&&(c=this.allIs.indexOf(c),0<=c&&this.allIs.splice(c,1))}this.saveAreaAllIsData();ig.game.O2116.O8691()}},say:function(a){a&&this.O4855&&(this.O5003(),this.O4855.O4505(a,null,!0),this.O6285=new ml.Timer)},O5003:function(){var a=this.O4855.O5805();a&&!a.moving&&(a.moving=!0)},O5341:function(){return this.voice?ig.game[this.voice+
"Font"]:null},O4106:function(){return(this.O9832("passThroughSolids")||this.getMountableHasAttribute("passThroughSolids"))&&!this.O9832("pushFlying")}})});ig.baked=!0;
ig.module("game.entities.thrownitem").requires("impact.entity").defines(function(){window.EntityThrownItem=ig.Entity.extend({itemId:null,pos:{x:0,y:0},size:{x:0,y:0},vel:{x:0,y:0},maxVel:{x:400,y:800},targetVel:null,friction:{x:10,y:10},rotation:0,O9778:1,energy:100,O5115:-.25,O7422:!0,O4993:0,O8527:6,O9152:null,O7205:!1,O4876:.8,prevVel:{x:0,y:0},O7729:!1,O2846:!1,O5360:700,originPos:{x:null,y:null},O8376:!0,O5089:null,O4910:null,originatorId:null,attributes:{},O1386:!1,O1219:[],O5223:null,O1861:!1,
O1775:!1,stickiness:0,O7450:!1,O9436:null,O3471:null,O3277:!0,O2382:170,rgb:null,O1454:80,O1213:80,O1596:!1,bounciness:.4,interactive:!0,type:ig.Entity.TYPE.A,O7852:ig.Entity.TYPE.B,collides:ig.Entity.COLLIDES.PASSIVE,O2460:!1,isEquipment:!1,O5459:!1,O5522:!1,boundingBox2:null,pastPos:null,O7626:!1,O8091:null,O3541:!1,init:function(a,b,c){this.itemId=c.itemId;this.O1861=c.O1861;this.O1775=c.O1775;this.O7729=c.O7729;this.O5089=c.O5089;this.O4910=c.O4910;this.throwId=c.throwId;this.rgb=c.rgb;this.O2460=
"CONSUMAB"==this.O5089;this.isEquipment="EQUIPMENT"==this.O5089;this.O5459="EMITTER"==this.O5089||"AIMABLE"==this.O5089;this.boundingBox2=c.boundingBox2;this.soundId=c.soundId;this.originatorId=c.originatorId;this.O1086=c.O1086;this.originatorHasBrainAttached=c.originatorHasBrainAttached;this.O7796=c.O7796;this.O8113=c.O8113;c.attributes&&(this.attributes=ig.game.O4507(c.attributes));this.attributes||(this.attributes={});this.originPos={x:a,y:b};this.pos.x=a;this.pos.y=b;this.size={x:c.O8766.width,
y:c.O8766.height};this.O1861?(this.vel.x=1.7*c.O8985.x,this.vel.y=1.7*c.O8985.y):this.O1775?(this.vel.x=c.O8985.x,this.vel.y=c.O8985.y):"AIMABLE"==this.O5089?(this.maxVel={x:1500,y:1500},this.vel.x=parseFloat(c.O8985.x),this.vel.y=parseFloat(c.O8985.y),this.friction={x:0,y:0},this.O2027=0,this.O1596=this.O5522=this.O1386=!0,(a=ml.Misc.O4671(this.originatorId))&&a.O4292()&&(this.specs=a.attachments.h.specs)&&this.specs.weight&&(this.O2027=this.specs.weight/20),this.specs||(this.specs=ig.game.O9968.O6753())):
"FURRY"==this.O5089?(this.attributes.noTrail=!0,this.vel.x=c.O8985.x,this.vel.y=c.O8985.y,this.O8527=0,this.O7199(),void 0!==c.O2027&&(this.O2027=c.O2027,this.O3541=!0),this.energy=100,this.O5115=-.5):(this.vel.x=1.7*c.O8985.x+100*(c.O8766.flipX?1:-1),this.vel.y=1.7*c.O8985.y-100);this.animSheet=c.O8766.animSheet;this.O5459?this.O9327(c):(this.O8393=this.animNormal=new ml.Animation(this.animSheet,1,[0]),this.O8393.flip.x=c.O8766.flipX,this.O8393.angle=0);0==c.O8985.x&&0==c.O8985.y&&(this.O8527=1);
"HOOK"==this.O5089&&(this.attributes||(this.attributes={}),this.attributes.hook=!0);(this.O9991=this.attributes.transporting||this.attributes.instantTransporting)&&ig.game.O4296&&(this.O9991=!1,this.attributes.transporting=!1,this.attributes.instantTransporting=!1,this.O7729&&ig.game.O5058.O8943("nonPublicAreasOnly"));this.O1473(c);this.O1219=ig.game.sounds.O3307(c.O4910,!0);for(c=0;c<this.O1219.length;c++)ig.game.sounds.O9396(this.O1219[c],this);this.O8393||this.kill();this.O5459&&ig.game.sounds.playIncludedSound(this)},
O9327:function(a){var b=this.boundingBox2;b&&(b={x:b[0],y:b[1],width:b[2]-b[0]+1,height:b[3]-b[1]+1},this.animNormal=new ml.Animation(this.animSheet,1,[1]),this.size={x:b.width,y:b.height},a.O8766.width>this.size.x&&(this.offset.x=b.x),a.O8766.height>this.size.y&&(this.offset.y=b.y),this.O5522&&(this.offset.x=0,this.offset.y=0),this.pos.x+=this.offset.x,this.pos.y+=this.offset.y,this.O8393=this.animNormal,this.O8393.flip.x=a.O8766.flipX,this.O8393.angle=0,this.attributes.nonRotating=!0)},O1473:function(a){if("FURRY"!=
this.O5089){this.attributes.stickyOnPeople&&(this.attributes.harmful&&delete this.attributes.harmful,this.attributes.deadly&&delete this.attributes.deadly,ig.game.O4296&&(this.attributes.stickyOnPeople=!1,this.O7729&&ig.game.O5058.O8943("nonPublicAreasOnly")));!this.O2460||this.attributes.edible||this.attributes.drinkable||(this.attributes.edible=!0);this.O9991&&(this.energy=200,this.attributes.stickyOnThings=!0,this.O1386=!1);!this.attributes.hook||this.O1861||this.O1775||(this.attributes.stickyOnThings=
!0,this.attributes.flies=!0,this.attributes.many=!0);(this.O1861||this.O1775)&&this.attributes.hook&&(this.energy=0);if(this.attributes.flies){var b=4;this.vel.x=a.O8985.x*b;150>=Math.abs(this.vel.x)&&150>=Math.abs(this.vel.y)&&(this.vel.x=a.O8985.x*b+320*(a.O8766.flipX?1:-1));this.vel.y=a.O8985.y*b;this.O2027=.2;this.attributes.lightweight&&(this.vel.x=Math.abs(this.vel.x)*(a.O8766.flipX?1:-1),this.attributes.randomized||(this.vel.y=0),this.O2027=0,this.attributes.stickyOnThings||this.attributes.stickyOnPeople||
(this.O1386=!0),10>=Math.abs(this.vel.x)&&(this.vel.x=300*(a.O8766.flipX?1:-1)))}this.attributes.heavy&&(this.O2027=1.5,b=1.25,this.O9778=1,this.vel.x=a.O8985.x*b+100*(a.O8766.flipX?1:-1),this.vel.y=a.O8985.y*b-100,this.friction={x:150,y:150});this.attributes.lightweight&&!this.attributes.flies&&(this.O2027=.5,this.friction={x:200,y:200},this.O9778=1);this.attributes.floaty&&(this.O2027=-.05,this.vel.x*=.2,this.vel.y*=.2,this.O9778=0,this.O8527=3);this.attributes.bursts&&(this.O8527=1);this.attributes.shatters&&
(this.O8527=0);this.attributes.autobursts&&(this.energy=20,this.O8527+=3);this.attributes.bouncy&&(1>=this.O8527&&(this.O8527=3),this.bounciness=.925);this.attributes.nonRotating&&(this.O9778=0);this.attributes.returns&&(this.targetVel={x:-1*this.vel.x,y:-1*this.vel.y},this.O5223=this.O2027,this.O2027=.01);!this.attributes.hook||this.O1861||this.O1775||(this.vel.y=-400,this.O7883(this.originatorId),(b=this.O1607())&&b.attachments&&b.attachments.m&&(this.energy=0),b&&(b.hook=this),50>=Math.abs(a.O8985.x)&&
(this.vel.x=0));!this.attributes.edible&&!this.O2460||this.O1861||this.O1775||(this.energy=2,this.vel.y=-30,this.vel.x=0,this.O2027=1,this.collides=ig.Entity.COLLIDES.PASSIVE);!this.attributes.drinkable||this.O1861||this.O1775||(this.energy=.5,this.vel.y=0,this.O2027=1,this.collides=ig.Entity.COLLIDES.PASSIVE);ig.game.O4296&&(this.attributes.clearsWearable||this.attributes.clearsMountable||this.attributes.clearsHoldable||this.attributes.bumps||this.attributes.bumpsStrong)&&(this.attributes.clearsWearable=
!1,this.attributes.clearsMountable=!1,this.attributes.clearsHoldable=!1,this.attributes.bumps=!1,this.attributes.bumpsStrong=!1,this.O7729&&ig.game.O5058.O8943("nonPublicAreasOnly"));if(this.attributes.stickyOnPeople||this.attributes.clearsWearable||this.attributes.clearsMountable||this.attributes.clearsHoldable||this.attributes.slightlyHarmful||this.attributes.harmful||this.attributes.deadly||this.O9991||this.attributes.bumps||this.attributes.bumpsStrong||this.attributes.heals||this.attributes.gathered)this.O1596=
!0;this.attributes.passesThrough&&this.O7199()}},isFast:function(a){a||=100;return!this.attributes.lightweight&&(Math.abs(this.vel.x)>=a||Math.abs(this.vel.y)>=a)},update:function(){if(this.isFast()&&!this.attributes.noTrail){var a=this.attributes.flies&&this.isFast(200)||this.O5522?40:16;ig.game.chance(a)&&ig.game.O9759(EntityDust,this.pos.x+this.offset.x+this.size.y/2,this.pos.y+this.offset.y+this.size.y/2)}this.O4683();this.O2680();this.O9152=ig.game.O6112.O2052({x:Math.floor(this.pos.x+this.size.x/
2),y:Math.floor(this.pos.y+this.size.y/2)});this.interactive&&(this.O7205||this.O4962(),this.O9337());this.O4687();this.O2317();this.O9412();this.O3208();this.energy+=this.O5115;0>=this.energy&&(this.O8957(),this.kill());ig.game.decorator.O7715(this,this,null,!0);this.parent();this.prevVel.x=this.vel.x;this.prevVel.y=this.vel.y},draw:function(){this.attributes.bright&&ml.Misc.O5847("lighter");this.attributes.tail||this.attributes.fadingTail?this.O2520():(this.attributes.hook&&!this.O1861&&!this.O1775&&
this.O4165(),this.O3541?(ig.system.context.globalAlpha=.01*this.energy,this.parent(),ig.system.context.globalAlpha=1):this.parent());this.attributes.bright&&ml.Misc.O3715()},O2520:function(){this.pastPos||(this.pastPos=[]);this.pastPos.unshift(ig.game.O4507(this.pos));7<this.pastPos.length&&this.pastPos.pop();for(var a=this.pastPos.length-1;0<=a;--a){var b=this.pastPos[a];if(this.attributes.fadingTail){var c=((7-a)/7*100).limit(1,100);ig.system.context.globalAlpha=c/100}this.O8393.draw(b.x+this.offset.x-
ig.game._rscreen.x,b.y+this.offset.y-ig.game._rscreen.y)}this.O8393.draw(this.pos.x+this.offset.x-ig.game._rscreen.x,this.pos.y+this.offset.y-ig.game._rscreen.y);this.attributes.fadingTail&&(ig.system.context.globalAlpha=1)},O4683:function(){if(this.attributes.hook&&this.O3277&&!this.O1861&&!this.O1775){var a=this.O1607();if(a){var b=this.O8674(a.pos.x,a.pos.y,this.pos.x,this.pos.y),c=this.O7450&&a.pos.y<this.pos.y+35;if(b>this.O2382||c)c&&ig.game.sounds.O9396(ig.game.sounds.whoosh,this,.25),this.energy=
0;else if(0<this.stickiness){this.O1454>this.O1213&&(this.O1454-=3,this.O1454<this.O1213&&(this.O1454=this.O1213));c=b=0;if(0>a.vel.x&&a.pos.x<this.pos.x||0<a.vel.x&&a.pos.x>this.pos.x)c=-1;else{var d=Math.abs(a.pos.x-this.pos.x);5<=d&&(40>=d&&(b=a.pos.x<this.pos.x?1:-1),60>=d&&(b=a.pos.x<this.pos.x?.5:-.5),c=1)}a.pos=this.O6763({x:a.pos.x+b,y:a.pos.y+c},this.pos,this.O1454)}}}},O6763:function(a,b,c){var d=b.x;b=b.y;var e=a.x-d;a=a.y-b;var f=Math.sqrt(e*e+a*a);return{x:d+e/f*c,y:b+a/f*c}},O4165:function(){var a=
this.O1607();if(a){var b=this.O8674(a.pos.x,a.pos.y,this.pos.x,this.pos.y);if(this.O3277&&b<=this.O2382){b=this.pos.x+this.size.x/2;var c=this.pos.y+this.size.y,d=a.pos.x+a.size.x/2,e=a.pos.y+a.size.y/2;a.attachments&&a.attachments.b&&a.attachments.b.animSheet&&(d=a.pos.x+a.attachments.b.animSheet.width/2-a.offset.x);this.O9576(b,c,d,e)}}},O8674:function(a,b,c,d){return Math.sqrt(Math.pow(d-b,2)+Math.pow(c-a,2))},O9576:function(a,b,c,d){var e=ig.system.context;e.beginPath();e.lineWidth=ig.system.scale;
this.rgb||(this.rgb="30,30,30");e.strokeStyle="rgb("+this.rgb+")";e.moveTo(this.O722(a),this.O2321(b));e.lineTo(this.O722(c),this.O2321(d));e.stroke()},O5519:function(a,b,c){var d=ig.system.context;d.beginPath();d.lineWidth=1*ig.system.scale;d.strokeStyle="rgba(255,255,255,.5)";d.arc(this.O722(a),this.O2321(b),c*ig.system.scale,0,2*Math.PI);d.stroke()},O722:function(a){return(a-this.offset.x-ig.game._rscreen.x)*ig.system.scale},O2321:function(a){return(a-this.offset.y-ig.game._rscreen.y)*ig.system.scale},
O3208:function(){0<this.stickiness&&(this.stickiness--,0>=this.stickiness&&(this.stickiness=0,this.O2027=this.O9991?.15:1,this.O7199(),this.O9991||ig.game.sounds.O9396(ig.game.sounds.whoosh,this,.25),this.attributes.hook&&ig.game.decorator.O4815(this.pos)))},O9412:function(){var a=0!=this.vel.x?this.vel.x/1E3*this.O9778:0;a=a.limit(-.075,.075);this.O8393&&(this.O8393.angle+=a)},O2680:function(){this.targetVel&&(this.vel.x=this.O8742(this.vel.x,this.targetVel.x,4),this.vel.y=this.O8742(this.vel.y,
this.targetVel.y,4))},O8742:function(a,b,c){a<b?(a+=c,a>b&&(a=b)):a>b&&(a-=c,a<b&&(a=b));return a},O8957:function(){var a=(this.O1861||this.O1775)&&ig.ua.iPad;!this.attributes.edible||this.O1861||this.O1775||("CONSUMAB"==this.O5089&&this.soundId?ig.game.sounds.playIncludedSound(this):ig.game.sounds.O9396(ig.game.sounds.munch,this,1),this.O7729&&ig.game.O3957&&ig.game.O3957.O8855("eat"));!this.attributes.drinkable||this.O1861||this.O1775||("CONSUMAB"==this.O5089&&this.soundId?ig.game.sounds.playIncludedSound(this):
ig.game.sounds.O9396(ig.game.sounds.drinking,this,1),this.O7729&&ig.game.O3957&&ig.game.O3957.O8855("drink"));(this.attributes.drinkable||this.attributes.edible)&&!this.O1861&&!this.O1775&&this.attributes.heals&&this.O7729&&(ig.game.O1257.health=(ig.game.O1257.health+40).limit(0,100),ig.game.O3957&&ig.game.O3957.O8855("healed"));var b=this.attributes.slightlyPoisonous||this.attributes.mediumPoisonous||this.attributes.veryPoisonous;this.O7729&&(b||this.attributes.affecting)&&(this.attributes.edible||
this.attributes.drinkable||this.O2460)&&(null==ig.game.O1257.O7436&&(ig.game.O1257.O7436=[]),this.attributes.slightlyPoisonous?ig.game.O1257.O4150(1E3,.01):this.attributes.mediumPoisonous?ig.game.O1257.O4150(1200,.1):this.attributes.veryPoisonous&&ig.game.O1257.O4150(300,.5));this.O7729&&this.attributes.affecting&&(this.attributes.edible||this.attributes.drinkable||this.O2460)&&ig.game.O8894.O6585(this.rgb,b?100:null);this.O7729&&this.attributes.antidotal&&(this.attributes.edible||this.attributes.drinkable||
this.O2460)&&(ig.game.O1257.O7436=null);this.attributes.containsLiquid&&!a&&ig.game.sounds.O9396(ig.game.sounds.splash,this,1);this.attributes.shatters&&!a?this.attributes.heavy?ig.game.sounds.O9396(ig.game.sounds.glass_heavy,this,1):(a=ig.ua.iPad?1:ig.game.O4293(1,3),ig.game.sounds.O9396(ig.game.sounds["glass"+a],this,1)):!this.attributes.autobursts&&!this.attributes.bursts||a||(a=ig.ua.iPad?1:ig.game.O4293(1,2),ig.game.sounds.O9396(ig.game.sounds["burst"+a],this,this.O4876));this.attributes.shatters&&
this.attributes.containsLiquid&&ig.game.decorator.burst(this,30,!1,!0);this.attributes.shatters?ig.game.decorator.burst(this,30,!1,!1):(this.attributes.autobursts||this.attributes.bursts)&&ig.game.decorator.burst(this,30,this.attributes.colorTrail,!1);this.attributes.hook&&(0<this.stickiness&&ig.game.decorator.O4815(this.pos),a=this.O1607())&&(a.isHooked=!1,a.hook&&(a.hook=null))},O2317:function(){if(Math.abs(this.originPos.x-this.pos.x)>this.O5360||Math.abs(this.originPos.y-this.pos.y)>this.O5360)this.energy=
0},O4962:function(){this.O9152&&this.O9152.thing.isALiquid&&(ig.game.decorator.splash(this),this.energy=.5,this.O7205=!0)},O9337:function(){if(this.O9152&&this.O9152.thing&&this.O9152.thing.O5244()&&0<=this.O9152.rotation&&3>=this.O9152.rotation){var a=2400,b=1E3;this.O9152.thing.attributes&&this.O9152.thing.attributes.soft&&(a*=.4,b*=.1);this.accel=[{x:0,y:-a},{x:b,y:0},{x:0,y:a},{x:-b,y:0}][this.O9152.rotation];this.O2846=!0}else this.O2846&&(this.accel={x:0,y:0},this.O2846=!1)},O8991:function(){var a=
!1,b=ig.game.O5119.player;if(b)for(var c=0;c<b.length;c++){var d=b[c];if(!d._killed&&!d.O8088&&ml.Misc.O7862(this,d)){a=!0;break}}return a},O3010:function(a,b){var c=null,d=null,e=ig.game.O5119.foreground;if(e)for(var f=0;f<e.length;f++){var g=e[f];if(!g._killed&&g instanceof EntityThrownItem&&g.attributes&&g.O9991&&100<=g.energy&&g.throwId!=this.throwId){var h;if(h=b?!g.O7450||2<=g.stickiness:g.O7450&&2<=g.stickiness)if(h=this.O2144(g),30<=h&&h<=ig.game.O3985&&(null==d||h<d))d=h,c=g}}c&&(a.O8313=
new Date,c.O5115=-1,c.energy+=c.O5115,c.stickiness=1,a.pos={x:c.pos.x,y:c.pos.y-5},ig.game.decorator.O8009(c.pos.x,c.pos.y,a.vel.x,a.vel.y,4),c.attributes&&c.attributes.instantTransporting&&(c.energy=0));return!!c},O3398:function(a){var b=null,c=null,d=ig.game.O5119.default;if(d)for(var e=0;e<d.length;e++){var f=d[e];if(!f._killed&&(f instanceof EntityPortal||f instanceof EntityPortaldir)){var g=this.O2144(f);30<=g&&g<=ig.game.O3985&&(null==c||g<c)&&(c=g,b=f)}}if(b&&(a.pos={x:b.pos.x,y:b.pos.y-5},
b.suppressed=!0,ig.game.sounds.portallingWhoosh.play(),ig.game.decorator.O8009(b.pos.x,b.pos.y,a.vel.x,a.vel.y,4),b instanceof EntityPortaldir))switch(c=Math.sqrt(Math.abs(a.vel.x)*Math.abs(a.vel.x)+Math.abs(a.vel.y)*Math.abs(a.vel.y)),b.rotation){case 1:a.vel={x:c,y:0};a.O8418=!0;break;case 2:a.vel={x:0,y:c};break;case 3:a.vel={x:-c,y:0};a.O8418=!1;break;default:a.vel={x:0,y:-c}}return!!b},O9120:function(a){this.O9991&&(this.attributes.instantTransporting||this.O7450&&100<=this.energy&&2<=this.stickiness)&&
ml.Misc.O7862(this,a)&&(this.O3010(a,this.attributes.instantTransporting)||this.O3398(a))&&(this.O5115=-1,this.energy+=this.O5115,this.stickiness=1,ig.game.decorator.O8009(this.pos.x,this.pos.y,a.vel.x,a.vel.y,4),ig.game.sounds.portallingWhoosh.play(),this.attributes.instantTransporting&&(this.energy=0))},O2422:function(){var a=null,b=ig.game.O5119.default;if(b)for(var c=0;c<b.length;c++){var d=b[c];if(d instanceof EntityGather&&!d._killed&&this.touches(d)){a=d;break}}return a},O4687:function(){if(!(0>=
this.energy)){if(this.O1596)if(this.O7729)this.O8991()&&(this.energy=0,ig.game.sounds.O9396(ig.game.sounds.collide,this)),this.O9120(ig.game.O1257);else{if(ml.Misc.O7862(this,ig.game.O1257)&&!ig.game.O1795){if(this.attributes.gathered)if(97.5>=this.energy)ig.game.sounds.playIncludedSound(this),ig.game.O2116.O7884(ig.game.O1257,"gathers",this.O4910);else return;if(ml.Misc.O5615(this.O1086,this.O7796,this.O8113,this.originatorHasBrainAttached)||this.O1861||this.O1775){var a=ig.game.O1257,b=!1;this.O9120(a);
if(this.attributes.stickyOnPeople){var c=ig.game.attachmentManager.slots.HOLDABLE;a.attachments[c]||(ig.game.attachmentManager.O7355(ig.game.O1257,c,this.itemId,null,this.O5089),ig.game.O7836.O9581(this.originatorId,this.throwId))}!this.attributes.bumps&&!this.attributes.bumpsStrong||!this.O1086&&ig.game.O4223||(a.O1418(this.O5522?.395*this.vel.x:this.vel.x,this.attributes.bumpsStrong),b=!0);this.attributes.heals&&(!b&&!ig.game.O4296&&a.O1418(this.vel.x,!1,!0),a.health=(a.health+40).limit(0,100),
ig.game.O3957&&ig.game.O3957.O8855("healed"));if(this.attributes.clearsWearable){c=ig.game.attachmentManager.slots.WEARABLE;var d=a.attachments[c];!d||ig.game.O4296&&d.attributes&&d.attributes.reducesDamage100percent||ig.game.attachmentManager.O3578(a,c,!0)}this.attributes.clearsHoldable&&(c=ig.game.attachmentManager.slots.HOLDABLE,a.attachments[c]&&ig.game.attachmentManager.O3578(a,c,!0));this.attributes.clearsMountable&&(c=ig.game.attachmentManager.slots.MOUNTABLE,a.attachments[c]&&ig.game.attachmentManager.O3578(a,
c,!0));this.O5764(a,b)}this.energy=0;ig.game.sounds.O9396(ig.game.sounds.collide,this);this.O7626=!0;ig.game.O2116.O7884(ig.game.O1257,"hits",this.O4910)}}else this.O7729||this.O7626||!ml.Misc.O7862(this,ig.game.O1257)||ig.game.O1795||(this.O7626=!0,ig.game.O2116.O7884(ig.game.O1257,"hits",this.O4910));0<this.energy&&(a=this.O2422())&&a.O9453(this.O4910)}},O5764:function(a,b){if(this.attributes.slightlyHarmful||this.attributes.harmful||this.attributes.deadly||this.O5522&&this.specs&&0<this.specs.harm){var c;
if(c=ig.game.O4223&&!this.isFullAccount?!1:this.O1861||this.O1775||!ig.game.isEditorHere&&this.O8113?!0:1<=this.O7796)this.attributes.slightlyHarmful||this.attributes.harmful||this.O5522?(ig.game.O9710.O6326=!this.O5522,c=this.attributes.slightlyHarmful?15:40,this.O5522&&(c=this.specs.harm),a.O3914(c,this,!0),b||(this.O5522?a.O1418(150):a.O1418(this.vel.x)),ig.game.O3957&&ig.game.O3957.O8855("harmed")):this.attributes.deadly&&(ig.game.O9710.O6326=!0,a.kill(ig.game.deathTypes.DEADLY))}},O3126:function(){this.vel.x=
0;this.O9778=this.vel.y=0;this.attributes={};this.collides=ig.Entity.COLLIDES.NEVER;this.O2027=0},O1607:function(){var a=null;if(this.O7729)a=ig.game.O1257;else{var b=ig.game.O5119.player;if(b)for(var c=0;c<b.length;c++){var d=b[c];if(!d._killed&&d.O2970==this.originatorId){a=d;break}}}return a},O7883:function(a){var b=ig.game.O5119.player;if(b)for(var c=0;c<b.length;c++){var d=b[c];if(!d._killed&&d.O2970==a&&d.hook&&d.hook.throwId!=this.throwId){0<d.hook.stickiness&&ig.game.decorator.O4815(d.hook.pos);
d.hook.kill();d.hook=null;d.isHooked=!1;break}}},O2550:function(a){if(this.interactive){if(a.collision.x||a.collision.y||a.collision.slope&&!this.attributes.bouncy){this.O1386&&(this.energy=0);this.targetVel&&(this.targetVel=null);this.O5223&&(this.O2027=this.O5223);this.O2846||this.O4993++;if(a.tile.y==Item.prototype.COL_TYPES.BOUNCEY_UP)this.vel.y=-500,a.collision.y=!1,ig.game.sounds.O9396(ig.game.sounds.trampolineBounce,this,this.O4876),ig.game.decorator.O1631(this);else if(this.attributes.stickyOnThings||
a.tile.x==Item.prototype.COL_TYPES.STICKY||a.tile.y==Item.prototype.COL_TYPES.STICKY){if(this.O9991&&this.attributes.bouncy&&1>=this.O4993){ig.game.sounds.O9396(ig.game.sounds.trampolineBounce,this,.25);ig.game.decorator.O1631(this);this.parent(a);return}if(!this.O7450){this.O7450=!0;this.vel.x=0;this.vel.y=0;this.O9991||(this.O2027=a.collision.x||a.tile.x==Item.prototype.COL_TYPES.STICKY?.025:0);this.O9778=0;this.stickiness=100;this.O9991&&(this.stickiness=200,this.O2027=0);if(this.attributes.hook){this.stickiness=
125;var b=this.O1607();b?(b.isHooked=!0,b.hook=this,this.O1454=this.O8674(b.pos.x,b.pos.y,this.pos.x,this.pos.y),ig.game.decorator.O4815(this.pos)):this.energy=0}if(a.tile.x==Item.prototype.COL_TYPES.SLIDEY_UP||a.tile.y==Item.prototype.COL_TYPES.SLIDEY_UP)this.stickiness=10;this.O1386=!1;ig.game.sounds.O9396(ig.game.sounds.sticky,this,1)}}else this.attributes.bouncy?(ig.game.sounds.O9396(ig.game.sounds.trampolineBounce,this,.25),this.O5459?ig.game.decorator.O4707({pos:{x:this.pos.x-this.offset.x,
y:this.pos.y-this.offset.y},size:{x:this.size.x,y:this.size.y}}):ig.game.decorator.O1631(this)):(b=this.O4876,2<=this.O4993&&(b/=2*this.O4993),.15<=b&&"STACKINSTR"==this.O5089&&this.O4910&&!this.O2846?this.O6760(ig.game.sounds.O2056(this.O4910,this.attributes),b):ig.game.sounds.O9396(ig.game.sounds.collideSoft,this,b));if(this.attributes.shatters||this.attributes.bursts)this.O8527=this.energy=0;this.O4993>=this.O8527&&this.O7199()}this.parent(a)}else this.pos.x+=this.vel.x*ig.system.tick,this.pos.y+=
this.vel.y*ig.system.tick},O7199:function(){this.O7852=ig.Entity.TYPE.NONE;this.collides=ig.Entity.COLLIDES.NEVER;this.interactive=!1},O6760:function(a,b){var c=a?ig.game.sounds.instruments[a]:null;if(c){var d=null;c.isKit?(c=ig.game.O4293(1,c.max),d=a+"_"+c):(c=ig.game.O4293(c.minOctave,c.maxOctave),d=ig.game.sounds.tones.random(),d=a+"_"+c+"_"+d);ig.game.sounds[d]&&ig.game.sounds.O9396(ig.game.sounds[d],this,b)}},distort:function(a,b){return a+ig.game.O4293(-b,b)}})});ig.baked=!0;
ig.module("game.entities.motion").requires("impact.entity").defines(function(){window.EntityMotion=ig.Entity.extend({type:ig.Entity.TYPE.A,O7852:ig.Entity.TYPE.B,collides:ig.Entity.COLLIDES.PASSIVE,cellCount:3,O4459:null,O7367:!0,attributes:{},energy:100,energyVel:0,O6645:null,lifeTimer:null,O5637:null,O6544:!1,O9219:1,O5046:null,O9444:.5,boundingBox:null,O8376:!0,O8257:void 0,O8720:!1,givenName:void 0,O6028:void 0,O9367:!1,init:function(a,b,c){c.img&&(this.pos.x=a,this.pos.y=b,this.soundId=c.soundId,
this.givenName=c.givenName,this.O6028=c.O6028,c.attributes&&(this.attributes=c.attributes),this.O9367=!!c.O9367,this.O4459=c.O4459,this.size={x:c.img.width/3,y:c.img.height},this.motionId=c.motionId,this.boundingBox=c.boundingBox,this.animSheet=new ml.AnimationSheet(null,this.size.x,this.size.y,c.img),this.addAnim("main",this.O9444,[0,1],this.attributes.stops?1:void 0),this.addAnim("emitter",1,[2]),this.O8393=this.anims.main,this.O1473(c),ig.game.O1257&&ig.game.O4873&&(ig.game.O4873.O6714(ig.game.O1257.pos)&&
ig.game.O4296?2<=ig.game.O1257.rank:ig.game.O1257.isFullAccount)&&ig.game.sounds.playIncludedSound(this))},O1473:function(a){this.O5637=3.4;this.attributes.quick&&(this.O5637=.75);this.attributes.long&&(this.O5637=10.4);this.O5637&&(this.lifeTimer=new ml.Timer);this.attributes.delayedStart&&(this.O5046=new ml.Timer);this.attributes.fadeInAndOut&&(this.O5637+=1,this.energy=1,this.energyVel=2)},update:function(){this.O8609();this.O6033();this.parent()},O6033:function(){if(!this._killed)if(this.O8720)this.kill();
else{this.energy+=this.energyVel;this.energy=this.energy.limit(0,100);var a=this.lifeTimer&&this.O5637&&this.lifeTimer.delta()>=this.O5637;a&&this.attributes.fadeInAndOut&&(0<this.energy&&(this.energyVel=-Math.abs(this.energyVel)),a=!1);if(a||0>=this.energy)this.O8720=!0}},kill:function(){this.O5046=this.lifeTimer=null;this.parent()},O8609:function(){if(!(!this.O6645||this.O6544&&this.attributes.singular||this.O5046&&this.O5046.delta()<this.O9444||this.attributes.atOnce&&this.O6544)){var a=1;this.attributes.atOnce&&
!this.attributes.singular&&(a=ig.game.O4293(8,12));for(var b=!1,c=1;c<=a;c++)this.O6265()&&(b=!0);b&&(this.O6544=!0)}},O6265:function(){var a={opacity:100,O4405:100,O2329:4,fadingInc:2},b={x:0,y:0},c={x:0,y:0},d=!1,e=this.attributes.more?2:1,f=!(this.attributes.bursts||this.attributes.bristles||this.attributes.flows||this.attributes.flowsRandom||this.attributes.forward||this.attributes.backward||this.attributes.downward||this.attributes.bursts||this.attributes.puffs);f&&(e*=.5);if(this.attributes.flows||
this.attributes.flowsRandom)if(c={x:0,y:ig.game.O4293(10,40)},!this.O6544||ig.game.chance(5*e))d=!0,a.O2329=1;this.attributes.bursts&&(c={x:ig.game.O4293(20,80),y:ig.game.O4293(-160,-90)},!this.O6544||ig.game.chance(10*e))&&(ig.game.chance(50)&&(c.x*=-1),a.O2027=.75,d=!0);this.attributes.bristles&&(c={x:ig.game.O4293(-30,30),y:ig.game.O4293(-30,30)},!this.O6544||ig.game.chance(5*e))&&(a.O2027=0,d=!0);if(this.attributes.forward||f||this.attributes.backward||this.attributes.diagonal||this.attributes.downward)if(!this.O6544||
ig.game.chance(4*e))d=this.attributes.diagonal?35:50,this.attributes.forward&&(c.x=-(2*d)),this.attributes.downward?c.y+=d:f&&(c.y-=d),this.attributes.backward&&(c.x+=2*d),this.attributes.diagonal&&(0!=c.x?c.y=-(2*d):c.x=-(2*d)),d=!0;d&&this.attributes.bursts&&this.attributes.forward&&(a.O2027=.75,c.x=-Math.abs(c.x));d&&this.attributes.bursts&&this.attributes.backward&&(a.O2027=.75,c.x=Math.abs(c.x));this.attributes.fadeIn&&(a.opacity=1,a.O7942=2);this.attributes.lightweight&&(a.O2027*=.4);d&&!this.attributes.fast&&
!this.attributes.bursts&&!this.attributes.flows&&(c.x*=.4,c.y*=.4);d&&this.attributes.slow&&(c.x*=.5,c.y*=.5);this.attributes.zigZag&&(a.O1708=-5,ig.game.chance(50)&&(a.O1708*=-1));this.attributes.rotates&&(a.O8060=ml.Misc.O9058(.03,.06)*(ig.game.chance(50)?1:-1));this.attributes.randomizePosition&&(b=this.O2495(b,5));c.x*=this.O9219;d&&(a.cellToUse=2,a.O6475=!1,this.attributes.behindBody||(a.decorative=!0),a.animSheet=this.animSheet,a.vel=c,a.O9367=this.O9367,a.nonFlipping=this.attributes.nonFlipping,
this.attributes.nonFlipping||(a.flipX=1!=this.O9219),this.attributes.brief?a.O2329=this.attributes.fadeIn?1.25:.75:this.attributes.veryBrief&&(a.O2329=.15,a.fadingInc=10),this.attributes.bright&&(a.attribute="bright"),ig.game.O9759(EntitySpot,this.O6645.x+b.x+ig.game._rscreen.x,this.O6645.y+b.y+ig.game._rscreen.y,a));return d},O2495:function(a,b){return{x:a.x+ig.game.O4293(-b,b),y:a.y+ig.game.O4293(-b,b)}},draw:function(){},O8663:function(a,b){this.attributes.invisible||(this.anims.main.flip.x=a.O8393.flip.x,
this.O6645={x:b.x,y:b.y},a=(.01*this.energy).limit(0,1),ig.system.context.globalAlpha=a,this.anims.main.draw(b.x,b.y),ig.system.context.globalAlpha=1)},O1141:function(a){if(!this.attributes.invisible){this.pos=ig.game.O4507(a.pos);var b=a.O9306();b=this.pos.x-a.offset.x-ig.game._rscreen.x+b+a.O2047.x;var c=this.pos.y-a.offset.y-ig.game._rscreen.y+a.O2047.y;this.O9219=(this.anims.main.flip.x=a.O8393.flip.x)?-1:1;this.anims.main.angle=a.O8393.angle;a.isLying&&(this.anims.main.angle=ig.game.O4173*(this.anims.main.flip.x?
-1:1));this.O6645={x:b,y:c};a=(.01*this.energy).limit(0,1);ig.system.context.globalAlpha=a;this.anims.main.draw(b,c);ig.system.context.globalAlpha=1}}})});ig.baked=!0;
ig.module("game.entities.moving.moving").requires("impact.entity").defines(function(){window.EntityMoving=ig.Entity.extend({size:{x:17,y:17},offset:{x:0,y:0},maxVel:{x:100,y:100},friction:{x:0,y:0},type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.FIXED,O2027:0,homePos:{},O5682:{},O2011:!0,MAXDISTANCE:58,init:function(a,b,c){this.parent(a,b,c);this.addAnim("main",1,[0]);this.homePos.x=this.pos.x;this.homePos.y=this.pos.y},update:function(){this.O8393.flip.x=0<this.vel.x;
this.parent()},O2550:function(a){this.pos.x+=this.vel.x*ig.system.tick;this.pos.y+=this.vel.y*ig.system.tick},check:function(a){}})});ig.baked=!0;
ig.module("game.entities.moving.deadlymv").requires("impact.entity").defines(function(){window.EntityDeadlymv=ig.Entity.extend({size:{x:17,y:17},offset:{x:0,y:0},maxVel:{x:100,y:100},friction:{x:0,y:0},type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,flip:!1,O2027:0,homePos:{},O5682:{},O2011:!0,init:function(a,b,c){this.parent(a,b,c);this.addAnim("main",1,[0]);this.homePos.x=this.pos.x;this.homePos.y=this.pos.y},update:function(){ig.game.decorator.O9820(this);this.parent()},
O2550:function(a){this.pos.x+=this.vel.x*ig.system.tick;this.pos.y+=this.vel.y*ig.system.tick},check:function(a){a.O3914(100,this)}})});ig.baked=!0;ig.module("game.entities.immobile.default").requires("impact.entity").defines(function(){window.EntityDefault=ig.Entity.extend({size:{x:19,y:19},O2027:0,type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,init:function(a,b,c){this.parent(a,b,c);this.addAnim("main",1,[0]);this.O8393=this.anims.main}})});ig.baked=!0;
ig.module("game.entities.immobile.livmov").requires("impact.entity").defines(function(){window.EntityLivmov=ig.Entity.extend({size:{x:17,y:17},offset:{x:0,y:0},maxVel:{x:100,y:100},friction:{x:0,y:0},O8220:20,O5360:57,O1391:10,O8035:null,flipTime:.5,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,O2027:0,homePos:{},O5682:{},O2011:!0,init:function(a,b,c){this.parent(a,b,c);ml.Misc.O9689(this,a,b,c);this.addAnim("cell1",1,[0]);this.addAnim("cell2",1,[1]);this.O8393=this.anims.cell1;
this.homePos.x=this.pos.x;this.homePos.y=this.pos.y;this.O8035=new ml.Timer;this.vel.x=this.O8220*(ig.game.chance(50)?-1:1)},update:function(){this.O8035.delta()>this.flipTime&&(this.O8035.reset(),this.O8393=this.O8393==this.anims.cell1?this.anims.cell2:this.anims.cell1);this.pos.x>this.homePos.x+this.O5360?(this.pos.x=this.homePos.x+this.O5360,this.vel.x=-this.O8220):this.pos.x<this.homePos.x-this.O5360&&(this.pos.x=this.homePos.x-this.O5360,this.vel.x=this.O8220);this.O8393.flip.x=0<this.vel.x;
this.parent()},O2550:function(a){this.pos.x+=this.vel.x*ig.system.tick;this.pos.y+=this.vel.y*ig.system.tick},check:function(a){}})});ig.baked=!0;
ig.module("game.entities.immobile.light").requires("impact.entity").defines(function(){window.EntityLight=ig.Entity.extend({size:{x:19,y:19},type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,opacity:.5,rgba:[0,0,0,0],zIndex:-1,O2027:0,O1101:1,O7754:null,O9369:null,O4220:1,O8376:!0,init:function(a,b,c){c&&c.attributes&&(this.attributes=c.attributes);this.parent(a,b,c);this.rgba=c.rgb;"0,0,0"==this.rgba&&(this.rgba="-80,-80,-80");this.rgba=this.rgba.split(",");this.rgba.push(1);
this.O9367&&(this.opacity=ig.game.O1885);this.addAnim("normal",1,[0]);this.O8393=this.anims.normal;this.O8393.alpha=this.opacity;this.attributes||(this.attributes={});this.attributes.pulsating&&(this.O7754=this.O9369=.002,0!=this.O7754&&(this.rgba[3]=Math.random()))},update:function(){this.attributes.pulsating&&(this.rgba[3]+=this.O7754,0>this.rgba[3]&&0>this.O7754?(this.rgba[3]=0,this.O7754=this.O9369):1<this.rgba[3]&&0<this.O7754&&(this.rgba[3]=1,this.O7754=-this.O9369),this.O8393&&(this.O8393.alpha=
Math.min(.5,Math.max(.25,this.rgba[3]))))},draw:function(){this.parent()},check:function(){}})});ig.baked=!0;
ig.module("game.entities.immobile.lighttop").requires("impact.entity").defines(function(){window.EntityLighttop=ig.Entity.extend({size:{x:19,y:19},type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,opacity:.5,rgba:[0,0,0,0],zIndex:-1,O2027:0,O8376:!0,O4220:2,init:function(a,b,c){this.parent(a,b,c);this.rgba=c.rgb;"0,0,0"==this.rgba&&(this.rgba="-80,-80,-80");this.rgba=this.rgba.split(",");this.rgba.push(1);this.O9367&&(this.opacity=ig.game.O1885);this.addAnim("normal",
1,[0]);this.O8393=this.anims.normal;this.O8393.alpha=this.opacity},update:function(){},draw:function(){this.parent()},check:function(){}})});ig.baked=!0;
ig.module("game.entities.immobile.vignette").requires("impact.entity").defines(function(){window.EntityVignette=ig.Entity.extend({size:{x:19,y:19},type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,opacity:.5,rgba:[0,0,0,0],zIndex:-1,O2027:0,O8376:!0,O4220:3,init:function(a,b,c){c&&c.attributes&&(this.attributes=c.attributes);this.parent(a,b,c);this.rgba=c.rgb;this.rgba=this.rgba.split(",");this.rgba.push(1);this.O9367&&(this.opacity=ig.game.O1885);this.addAnim("normal",
1,[0]);this.O8393=this.anims.normal;this.O8393.alpha=this.opacity;this.attributes||(this.attributes={});this.attributes.thick?this.O4220=ig.game.O8894.lightGroups.O9712:this.attributes.veryThick&&(this.O4220=ig.game.O8894.lightGroups.O4211)},update:function(){},check:function(){}})});ig.baked=!0;
ig.module("game.entities.immobile.helper").requires("impact.entity").defines(function(){window.EntityHelper=ig.Entity.extend({size:{x:19,y:19},O2027:0,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,O6456:!1,O5193:!1,attribute:null,label:null,showLabel:!0,didEnter:null,init:function(a,b,c){this.parent(a,b,c);this.addAnim("main",1,[0]);this.label=(this.attribute=ig.game.O2082.getAttributeFromSingleAttributes(c.attributes,"HELPER"))?ig.game.strings.O2801(this.attribute):
"";"create area or sub area"==this.label&&ig.game.O4223?this.label="create area":"toArea"==this.attribute&&(this.label="to "+ig.game.strings.O4255(this.givenName," to"))},update:function(){this.O5193=this.O6456;this.O6456=ml.Misc.O7862(this,ig.game.O1257);this.showLabel?this.O6456&&!this.O5193?(ig.game.O1839=this,ig.game.actioninfo.open(this,this.pos.x,this.pos.y,this.label,-1,"toArea"==this.attribute?"up":void 0)):!this.O6456&&this.O5193&&(ig.game.O1839==this&&(ig.game.O1839=void 0),ig.game.actioninfo.close(this)):
this.O6456||(this.showLabel=!0);this.O6456&&-10>ig.game.O1257.vel.y&&0==ig.game.O1257.vel.x&&ig.game.O1257.O9165!=ig.game.O1257.O4583.CLIMBING&&ml.Misc.O7862(this,ig.game.O1257)&&this.O9406()},O9406:function(){var a=!0;this.didEnter?a=!1:ig.game.O4296&&(void 0===this.O2584&&this.O5682&&(this.O2584=(a=ig.game.O6112.O8704({x:this.O5682.x,y:this.O5682.y+1}))?a.thing:null),a=!this.O2584||-1===["PASS","CLIMB","PUSH","PUSHDIAG"].indexOf(this.O2584.base));a&&ig.game.O2116.O3180()&&(a=!1);a&&(this.didEnter=
!0,this.triggerFeature())},triggerFeature:function(){this.showLabel=!1;ig.game.actioninfo.close(this);ml.Misc.O6447(this.attributes,this.givenName)},O2550:function(a){this.parent(a)}})});ig.baked=!0;
ig.module("game.entities.immobile.holder").requires("impact.entity").defines(function(){window.EntityHolder=ig.Entity.extend({size:{x:29,y:29},O2027:0,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,O6456:!1,O5193:!1,O9261:[],O6215:0,useKeyword:null,attributes:{},init:function(a,b,c){this.parent(a,b,c);ml.Misc.O9689(this,a,b,c);this.addAnim("cell1",1,[0]);this.addAnim("cell2",1,[1]);this.O8393=this.anims.cell1;this.attributes||(this.attributes={})},update:function(){this.O5193=
this.O6456;if((this.O6456=ml.Misc.O7862(this,ig.game.O1257))&&!this.O5193){if(!this.attributes.unlabeled)if(this.useKeyword)ig.game.actioninfo.open(this,this.pos.x+3,this.pos.y+10,this.attributes.needNotShown?"needs item":"needs "+this.useKeyword,null,null,null,!0);else{var a=this.O6430()?"open":"check";ig.game.actioninfo.open(this,this.pos.x+3,this.pos.y+10,a)}ig.game.O7259=this}else!this.O6456&&this.O5193&&(this.attributes.unlabeled||ig.game.actioninfo.close(this),ig.game.O7259==this&&(ig.game.O7259=
null));this.O9261.length!=this.O6215&&(this.O8393=1<=this.O9261.length?this.anims.cell2:this.anims.cell1,this.O6215=this.O9261.length);ig.game.decorator.O7715(this.O2703?this.O2703:this,this)},O6430:function(){for(var a="box carton parcel package gift chest drawer fridge".split(" "),b=0;b<a.length&&!(this&&typeof this==="object"&&this.givenName&&(typeof this.givenName==="string"||this.givenName instanceof String)&&0<=this.givenName.indexOf(a[b]));b++)return!1},O7956:function(a,b,c){var d=this.O9261.indexOf(a);
b?-1==d&&this.O9261.push(a):0<=d&&this.O9261.splice(d,1);c&&ig.game.O7836.O6996(this.O5682,b)},O6079:function(){ig.game.O1329.O6694(this.useKeyword)&&ig.game.O1257&&0==ig.game.O1257.vel.x&&(this.O7956(ig.game.O1257.O2970,!0,this.O5682&&!this.O9367),ig.game.holderDialog.open(this.thingTypeId,this,this.soundId),ig.game.O2116.O7884(ig.game.O1257,"checks",this.givenName))}})});ig.baked=!0;
ig.module("game.entities.immobile.musicsheet").requires("impact.entity").defines(function(){window.EntityMusicsheet=ig.Entity.extend({size:{x:32,y:36},O2027:0,decorative:!1,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,O6456:!1,O5193:!1,init:function(a,b,c){c.attributes&&(this.attributes=c.attributes);c.animSheet&&(this.size.x=c.animSheet.width,this.size.y=c.animSheet.height);this.parent(a,b,c);this.addAnim("main",1,[0]);this.attributes||(this.attributes={});this.attributes.inFront&&
(this.decorative=!0)},update:function(){var a={pos:this.O6259(ig.game.O4507(this.pos)),size:ig.game.O4507(this.size)};this.O5193=this.O6456;if((this.O6456=ml.Misc.O7862(this,ig.game.O1257))&&!this.O5193){var b=this.givenName+"\r";b+=(ig.ua.mobile?"action":"space")+" = play";ig.game.actioninfo.open(this,this.pos.x,this.pos.y,b)}else!this.O6456&&this.O5193&&ig.game.actioninfo.close(this);this.O6456&&ig.game.O7993()&&(ig.game.isFullAccount?(ig.game.painter.isRunning||(ig.game.panelSet.O9162.O9505(),
ig.game.painter.mode="cloneOld"),ig.game.O7747.O1618(this.thingTypeId,this,this.givenName,"MUSICSHEET")):ig.game.bottomMenu.O6979(!0));ig.game.decorator.O7715(a,this)},draw:function(){var a=this.O6259({x:this.pos.x-ig.game._rscreen.x,y:this.pos.y-ig.game._rscreen.y});this.anims.main.draw(a.x,a.y)},O6259:function(a){this.size.x>ig.game.O9925?a.x-=Math.floor(this.size.x/4):this.size.x<ig.game.O9925&&(a.x+=Math.floor((ig.game.O9925-this.size.x)/2));a.y-=Math.floor(this.size.y-ig.game.O9925);return a}})});
ig.baked=!0;
ig.module("game.entities.immobile.filllight").requires("impact.entity").defines(function(){window.EntityFilllight=ig.Entity.extend({size:{x:19,y:19},type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,opacity:.5,O2027:0,rgbString:null,isBehind:!0,O8376:!0,O3370:0,attributes:{},O6057:!1,O8509:null,O9947:null,init:function(a,b,c){c&&c.attributes&&(this.attributes=c.attributes);this.parent(a,b,c);this.O9367&&(this.opacity=ig.game.O1885);this.rgbString=c.rgb;this.addAnim("normal",
1,[0]);this.O8393=this.anims.normal;this.O8393.alpha=this.opacity;this.attributes||(this.attributes={});this.attributes.shortGradient?this.O8509=57:this.attributes.gradient?this.O8509=114:this.attributes.longGradient&&(this.O8509=190);ig.game.O2694&&3>=ig.game.O2694.delta()&&(this.O3370=1);this.attributes&&(this.attributes.furtherInFront?(this.O6057=!0,this.isBehind=!1):this.attributes.furtherInBack&&(this.O2601=!0,this.isBehind=!1))},update:function(){1>this.O3370&&(this.O3370+=1.8*ig.system.tick,
1<this.O3370&&(this.O3370=1))},O3873:function(){var a=null,b=(this.pos.x-this.offset.x-ig.game._rscreen.x)*ig.system.scale,c=(this.pos.y-this.offset.y-ig.game._rscreen.y)*ig.system.scale,d=this.size.x*ig.system.scale,e=this.size.y*ig.system.scale,f=ig.system.realWidth,g=ig.system.O5809;switch(this.rotation){case 0:a={x1:0,y1:c,x2:f,y2:g};this.O8509?(a.y2=a.y1+this.O8509*ig.system.scale,this.O9947=ig.system.context.createLinearGradient(0,a.y1,0,a.y2)):(this.attributes.singleStriped?a.y2=Math.min(a.y1+
e,g):this.attributes.doubleStriped&&(a.y2=Math.min(a.y1+2*e,g)),this.attributes.corner&&(a.x1=b),a.y1>=a.y2&&(a=null));break;case 1:this.O8509?(a={x1:b+d,y1:0,x2:b+d-this.O8509*ig.system.scale,y2:g},this.O9947=ig.system.context.createLinearGradient(a.x1,0,a.x2,0)):(a={x1:0,y1:0,x2:b+d,y2:g},this.attributes.singleStriped?a.x1=Math.max(0,b):this.attributes.doubleStriped&&(a.x1=Math.max(0,b-d)),this.attributes.corner&&(a.y1=c),a.x1>=a.x2&&(a=null));break;case 2:this.O8509?(a={x1:0,y1:c+e,x2:f,y2:c+e-
this.O8509*ig.system.scale},this.O9947=ig.system.context.createLinearGradient(0,a.y1,0,a.y2)):(a={x1:0,y1:0,x2:f,y2:c+e},this.attributes.singleStriped?a.y1=Math.max(0,c):this.attributes.doubleStriped&&(a.y1=Math.max(0,c-e)),this.attributes.corner&&(a.x2=b+d),a.y1>=a.y2&&(a=null));break;case 3:a={x1:b,y1:0,x2:f,y2:g},this.O8509?(a.x2=a.x1+this.O8509*ig.system.scale,this.O9947=ig.system.context.createLinearGradient(a.x1,0,a.x2,0)):(this.attributes.singleStriped?a.x2=Math.min(a.x1+d,f):this.attributes.doubleStriped&&
(a.x2=Math.min(a.x1+2*d,f)),this.attributes.corner&&(a.y2=c+e),a.x1>=a.x2&&(a=null))}a&&(a.x1=parseInt(a.x1),a.y1=parseInt(a.y1),a.x2=parseInt(a.x2),a.y2=parseInt(a.y2));return a},O3525:function(){return{x1:0,y1:0,x2:ig.system.realWidth,y2:ig.system.O5809}},draw:function(){if(ig.game.O1257){if(!this.O9367){var a=1,b=parseInt(this.O2144(ig.game.O1257));450<b&&(a=.005*(200-(b-450)),0>a?a=0:1<a&&(a=1));0<a&&(a*=this.O3370,b=this.attributes.full?this.O3525():this.O3873())&&(this.O8509&&this.O9947?(this.O9947.addColorStop(0,
"rgba("+this.rgbString+","+a+")"),this.O9947.addColorStop(1,"rgba("+this.rgbString+",0)"),ig.system.context.fillStyle=this.O9947):ig.system.context.fillStyle="rgba("+this.rgbString+","+a+")",ig.system.context.fillRect(b.x1,b.y1,b.x2-b.x1,b.y2-b.y1))}this.parent()}},check:function(){}})});ig.baked=!0;
ig.module("game.entities.immobile.deadly").requires("impact.entity").defines(function(){window.EntityDeadly=ig.Entity.extend({size:{x:13,y:13},offset:{x:3,y:3},O2027:0,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,init:function(a,b,c){this.parent(a,b,c);this.addAnim("main",1,[0]);this.pos.x+=this.offset.x;this.pos.y+=this.offset.y},update:function(){ig.game.decorator.O9820(this)},draw:function(){this.parent()},O2550:function(a){},check:function(a){a.O8088&&a.kill(ig.game.deathTypes.DEADLY)}})});
ig.baked=!0;
ig.module("game.entities.immobile.portal").requires("impact.entity").defines(function(){window.EntityPortal=ig.Entity.extend({size:{x:19,y:19},O2027:0,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,O8178:.1,O8035:null,O5962:3,O6456:!1,O5193:!1,O1507:!1,O5682:{},suppressed:!1,init:function(a,b,c){this.parent(a,b,c);a=c.givenName.toLowerCase();if(0<=a.indexOf("portal")||0<=a.indexOf("teleport")||0<=a.indexOf("beam"))this.O1507=!0;this.addAnim("cell1",1,[0]);this.addAnim("cell2",
1,[1]);this.O8035=new ml.Timer},update:function(){this.O5193=this.O6456;this.O6456=this.touches(ig.game.O1257);this.suppressed&&this.O5193&&!this.O6456&&(this.suppressed=!1);this.O8035.delta()>=this.O8178&&ig.game.chance(this.O5962)&&(this.O8035.reset(),this.O8393=this.O8393==this.anims.cell1?this.anims.cell2:this.anims.cell1)},O2550:function(a){this.parent(a)},check:function(a){if(!this.suppressed&&a.O8088&&!a.O9832("disablesTransport")&&8>Math.abs(a.pos.x+a.size.x/2-this.pos.x-this.size.x/2)&&8>
Math.abs(a.pos.y-this.pos.y)){this.suppressed=!0;var b,c=null;this.attributes&&this.attributes.forSameOnly&&(c=this.thingTypeId);c=ig.game.entityManager.O7414(c);for(var d,e,f=0;f<c.length;f++)if(d=c[f],e=this.O2144(d),(d.pos.x!=this.pos.x||d.pos.y!=this.pos.y)&&e<=ig.game.O3985)b?e<this.O2144(b)?b=d:e==this.O2144(b)&&ig.game.chance(50)&&(b=d):b=d;b?(this.suppressed=!1,b.suppressed=!0,c=a.vel.x,d=a.vel.y,e=a.O8418,b instanceof EntityPortaldir&&(f=Math.sqrt(Math.abs(a.vel.x)*Math.abs(a.vel.x)+Math.abs(a.vel.y)*
Math.abs(a.vel.y)),b.rotation&&0!==b.rotation?1===b.rotation?(c=f,d=0,e=!0):2===b.rotation?(c=0,d=f):3===b.rotation&&(c=-f,d=0,e=!0):(c=0,d=-f)),ig.game.portaller.O5114({x:b.O5682.x,y:b.O5682.y},{x:c,y:d},e),this.O1507&&(ig.game.decorator.O8009(this.pos.x,this.pos.y,a.vel.x,a.vel.y,3),ig.game.decorator.O8009(b.pos.x,b.pos.y,c,d,6)),ig.game.O2116.O7884(a,"transports")):ig.game.portaller.O5114(null)}}})});ig.baked=!0;
ig.module("game.entities.immobile.portaldir").requires("impact.entity").defines(function(){window.EntityPortaldir=ig.Entity.extend({size:{x:19,y:19},O2027:0,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,O8178:.1,O8035:null,O5962:3,O6456:!1,O5193:!1,O5738:{},O8815:{},O5682:{},suppressed:!1,O8569:20,init:function(a,b,c){this.parent(a,b,c);this.addAnim("cell1",1,[0]);this.addAnim("cell2",1,[1]);this.O8035=new ml.Timer},update:function(){this.O5193=this.O6456;this.O6456=
this.touches(ig.game.O1257);this.suppressed&&this.O5193&&!this.O6456&&(this.suppressed=!1);this.O8035.delta()>=this.O8178&&ig.game.chance(this.O5962)&&(this.O8035.reset(),this.O8393=this.O8393==this.anims.cell1?this.anims.cell2:this.anims.cell1)},O2550:function(a){this.parent(a)},check:function(a){!this.suppressed&&a.O8088&&!a.O9832("disablesTransport")&&(this.O5738.x=Math.abs(a.pos.x+a.size.x/2-this.pos.x-this.size.x/2),this.O5738.y=Math.abs(a.pos.y-this.pos.y),8>this.O5738.x&&8>this.O5738.y&&this.O3159(a))},
O3159:function(a){this.suppressed=!0;var b,c=null;this.attributes&&this.attributes.forSameOnly&&(c=this.thingTypeId);c=ig.game.entityManager.O7414(c);for(var d,e,f=0;f<c.length;f++)if(d=c[f],e=this.O2144(d),(d.pos.x!=this.pos.x||d.pos.y!=this.pos.y)&&e<=ig.game.O3985)b?this.O2144(d)<this.O2144(b)?b=d:this.O2144(d)==this.O2144(b)&&ig.game.chance(50)&&(b=d):b=d;b?(this.suppressed=!1,b.suppressed=!0,c=a.vel.x,d=a.vel.y,e=a.O8418,b instanceof EntityPortaldir&&(f=Math.sqrt(Math.abs(a.vel.x)*Math.abs(a.vel.x)+
Math.abs(a.vel.y)*Math.abs(a.vel.y)),b.rotation&&0!==b.rotation?1===b.rotation?(c=f,d=0,e=!0):2===b.rotation?(c=0,d=f):3===b.rotation&&(c=-f,d=0,e=!1):(c=0,d=-f)),ig.game.portaller.O5114({x:b.O5682.x,y:b.O5682.y},{x:c,y:d},e),ig.game.decorator.O8009(this.pos.x,this.pos.y,a.vel.x,a.vel.y,3),ig.game.decorator.O8009(b.pos.x,b.pos.y,c,d,6)):ig.game.portaller.O5114(null)}})});ig.baked=!0;
ig.module("game.entities.immobile.portalr").requires("impact.entity").defines(function(){window.EntityPortalr=ig.Entity.extend({size:{x:19,y:19},O2027:0,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,O8178:.1,O8035:null,O5962:3,O6456:!1,O5193:!0,O5682:{},suppressed:!1,opacity:.7,rptype:"a",init:function(a,b,c){this.parent(a,b,c);this.addAnim("main",1,[0]);this.O8393.alpha=this.opacity;this.O8035=new ml.Timer},update:function(){},draw:function(){this.parent()},O2550:function(a){this.parent(a)},
check:function(a){!this.suppressed&&a.O8088&&!a.O9832("disablesTransport")&&ig.game.O2694&&1<=ig.game.O2694.delta()&&10<=Math.abs(ig.game.O1257.vel.y)&&0==ig.game.O1257.vel.x&&this.O6456&&(this.suppressed=!0,this.O3924()&&ig.game.portaller.O8506(this.O5682,this.rptype,a.vel,a.O8418))},O3924:function(){return ig.game.O2004&&120<=ig.game.O2004}})});ig.baked=!0;
ig.module("game.entities.immobile.musical").requires("impact.entity").defines(function(){window.EntityMusical=ig.Entity.extend({size:{x:19,y:19},O2027:0,instrument:null,octave:null,pitch:null,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,O3640:null,O8706:!1,count:0,init:function(a,b,c){this.parent(a,b,c);c.octave||c.pitch||this.instrument||(c=this.O8714(c,c.givenName));this.instrument=c.instrument?c.instrument:"bell";this.octave=c.octave?c.octave:3;this.pitch=c.pitch?
c.pitch:"c";this.addAnim("main",1,[0])},update:function(){this.O8706||(this.O3640=null);this.O8706=!1;this.parent()},O8714:function(a,b){b=b.toLowerCase();b=ig.game.strings.trim(b);b=b.replace("#","s");var c=b.slice(-1);0<=["2","3","4"].indexOf(c)&&(b=b.replace(c,""),a.octave=c);for(c=0;c<ig.game.sounds.instruments.length;c++){var d=ig.game.sounds.instruments[c];if(0==b.indexOf(d+" ")){b=b.replace(d+" ","");a.instrument=d;break}}a.pitch=ig.game.strings.trim(b);a.pitch=ig.game.strings.replaceAll(a.pitch,
"bell ","");return a},draw:function(){this.parent()},O2550:function(a){this.parent(a)},playSound:function(){if(this.instrument&&this.octave&&this.pitch){var a=this.instrument+"_"+this.octave+"_"+this.pitch;ig.game.sounds[a]?ig.game.sounds.O9396(ig.game.sounds[a],this):console.log('Cannot find sound of key "'+a+'"')}},check:function(a){a instanceof EntityPlayer&&(this.O8706=!0,this.O3640!=a.O2970&&(this.O3640=a.O2970,this.playSound()))}})});ig.baked=!0;
ig.module("game.entities.immobile.music").requires("impact.entity").defines(function(){window.EntityMusic=ig.Entity.extend({size:{x:19,y:19},type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,O3640:null,O8706:!1,count:0,musicData:null,O2027:0,O8376:!0,init:function(a,b,c){this.parent(a,b,c);this.musicData=c.musicData;this.addAnim("main",1,[0])},update:function(){this.O8706||(this.O3640=null);this.O8706=!1;ig.game.O7763.isPlaying&&ig.game.O7763.O9727==this.id&&ig.game.chance(5)&&
ig.game.decorator.O7566(this);this.parent()},draw:function(){this.parent()},O2550:function(a){this.parent(a)},O2357:function(){if(!ig.ua.mobile){var a=ig.game.O7763;if(a)if(a.isPlaying&&a.O9727==this.id)this.stop(a);else if(this.musicData)this.play(a,this);else{var b=this;ig.game.O4261.getItem_P(b.thingTypeId,"music1").done(function(c){b.musicData=c.musicData;b.play(a,b)})}}},play:function(a,b){a.O3926();a.O5077();a.O7090();b.id&&(a.O1749(b.musicData,b.id,b),a.O9835())},stop:function(a){a.O3926();
a.O7090()},check:function(a){a instanceof EntityPlayer&&(this.O8706=!0,this.O3640!=a.O2970&&(this.O3640=a.O2970,this.O2357()))},tidyUp:function(){var a=ig.game.O7763;a.isPlaying&&a.O9727==this.id&&this.stop(a)}})});ig.baked=!0;
ig.module("game.entities.immobile.harmflip").requires("impact.entity").defines(function(){window.EntityHarmflip=ig.Entity.extend({size:{x:19,y:19},O2027:0,O8178:.1,O8035:null,O5962:4,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,init:function(a,b,c){this.parent(a,b,c);this.addAnim("main",1,[0]);this.O8035=new ml.Timer;console.log("INSTANTIATED DEPRECATED TYPE!!! (hamflip)")},update:function(){this.O8035.delta()>=this.O8178&&ig.game.chance(this.O5962)&&(this.O8393.flip.x=
!this.O8393.flip.x,this.O8035.reset())},draw:function(){this.parent()},O2550:function(a){},check:function(a){a.O3914(1,this,!0)}})});ig.baked=!0;
ig.module("game.entities.immobile.harm").requires("impact.entity").defines(function(){window.EntityHarm=ig.Entity.extend({size:{x:19,y:19},O2027:0,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,attributes:{},init:function(a,b,c){c.attributes&&(this.attributes=c.attributes);this.parent(a,b,c);this.addAnim("main",1,[0]);this.attributes||(this.attributes={})},update:function(){},draw:function(){this.parent()},O2550:function(a){},check:function(a){var b=1;this.attributes.moreHarmful?
b=3.5:this.attributes.extremelyHarmful&&(b=7);a.O3914(b,this,!0)}})});ig.baked=!0;
ig.module("game.entities.immobile.harmanim").requires("impact.entity").defines(function(){window.EntityHarmanim=ig.Entity.extend({size:{x:19,y:19},O2027:0,O8178:.1,O8035:null,O5962:4,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,attributes:{},init:function(a,b,c){c.attributes&&(this.attributes=c.attributes);this.parent(a,b,c);this.addAnim("cell1",1,[0]);this.addAnim("cell2",1,[1]);this.O8393=this.anims.cell1;this.O8035=new ml.Timer;this.attributes||(this.attributes=
{})},update:function(){this.O8035.delta()>=this.O8178&&ig.game.chance(this.O5962)&&(this.O8035.reset(),this.O8393=this.O8393==this.anims.cell1?this.anims.cell2:this.anims.cell1)},draw:function(){this.parent()},O2550:function(a){},check:function(a){var b=1;this.attributes.moreHarmful?b=3.5:this.attributes.extremelyHarmful&&(b=7);a.O3914(b,this,!0)}})});ig.baked=!0;
ig.module("game.entities.immobile.medium").requires("impact.entity").defines(function(){window.EntityMedium=ig.Entity.extend({size:{x:19,y:19},O2027:0,type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,O6456:!1,O5193:!1,url:null,O7798:null,givenName:null,O1959:!1,O8675:.75,rgb:null,rgb2:null,init:function(a,b,c){c.attributes&&(this.attributes=c.attributes);this.parent(a,b,c);this.url=c.url;this.addAnim("main",1,[0]);this.givenName=c.givenName;this.O1959=this.url&&
0<=this.url.indexOf("writable://");this.attributes||(this.attributes={})},update:function(){this.O1959?this.updateWritable():(this.O5193=this.O6456,(this.O6456=this.touches(ig.game.O1257)&&ig.game.O1257&&1>=Math.abs(ig.game.O1257.vel.x))&&!this.O5193?this.O7798=new ml.Timer:!this.O6456&&this.O5193?(this.O7798=null,ig.game.mediaDialog.O8112&&ig.game.mediaDialog.O3967(),this.attributes.named&&ig.game.actioninfo.close(this)):this.O7798&&this.O7798.delta()>=this.O8675&&(ml.Misc.O3903(this.url,ig.game.O1257.O2970,
!0,void 0,this.attributes.noBack),this.O7798=null,this.attributes.named&&ig.game.actioninfo.open(this,this.pos.x,this.pos.y-9,this.givenName,void 0,void 0,void 0,!0,!0)),ig.game.decorator.O7082(this))},updateWritable:function(){this.O5193=this.O6456;this.O6456=ml.Misc.O7862(this,ig.game.O1257)&&ig.game.O1257&&1>=Math.abs(ig.game.O1257.vel.x);.75>=ig.game.O6550&&(this.O6456&&!this.O5193?(ig.game.isFullAccount&&ig.game.actioninfo.open(this,this.pos.x,this.pos.y,"Collect+"+(ig.ua.mobile?"tap":"click")+
" to read elsewhere",null,null,null,!0),ig.game.mediaDialog.O8112&&ig.game.mediaDialog.O3967(),ig.game.mediaDialog.O3967(),ig.game.mediaDialog.O7040(this.url,this.rgb,this.rgb2)):!this.O6456&&this.O5193&&(ig.game.isFullAccount&&ig.game.actioninfo.close(this),ig.game.writableDialog.close()));this.O6456||ig.game.decorator.O7082(this)},O2550:function(a){this.parent(a)}})});ig.baked=!0;
ig.module("game.entities.immobile.environm").requires("impact.entity").defines(function(){window.EntityEnvironm=ig.Entity.extend({size:{x:19,y:19},O2027:0,O6830:null,O9017:.1,attribute:null,O2246:300,O8130:!0,O6654:0,O9510:10,type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,opacity:.75,zIndex:-1,O8376:!0,isByLiner:!1,init:function(a,b,c){c.attributes&&(this.attributes=c.attributes);this.parent(a,b,c);this.O1400(c);this.addAnim("main",1,[0]);this.O8393=this.anims.main;
this.O8393.alpha=this.opacity;this.attributes||(this.attributes={})},O1400:function(a){(this.attribute=ig.game.O2082.getAttributeFromSingleAttributes(a.attributes,"ENVIRONM"))||(this.attribute=this.getAttributeByGivenName(a));this.attribute||(this.attribute="rainCloud");if("soundscape"==this.attribute)this.O4302=5;else if("floating"==this.attribute||"backFloating"==this.attribute||"downFloating"==this.attribute)this.opacity=.1},update:function(){var a=this.isByLiner?20:10;if((!this.O9367||this.O7213)&&
ig.game.chance(a))switch(this.attribute){case "rainCloud":this.O6237();break;case "snowCloud":this.O3377();break;case "heat":this.O6203();break;case "mist":this.O9531();break;case "natureAir":this.O7451();break;case "humming":this.O1434();break;case "oceanAir":this.O7381();break;case "wind":this.O6866();break;case "sunshine":this.O3682();break;case "villageDust":this.O1016();break;case "cityAir":this.O4751();break;case "glimmer":this.O8709();break;case "lightningCloud":this.O9801();break;case "smoke":this.O3375();
break;case "steam":this.O1476();break;case "nightAir":this.O9891();break;case "reflections":this.O7722(!1);break;case "colorReflections":this.O7722(!0);break;case "glitter":this.O7117(!1);break;case "colorGlitter":this.O7117(!0);break;case "rumbling":this.O3499();break;case "lightFlash":this.O1340();break;case "bubbles":this.O2487();break;case "dripping":this.O7072();break;case "stars":this.O7308();break;case "harmfulAir":this.O2041();break;case "harmfulHeat":this.O6203(!0);break;case "harmfulCold":this.O9793();
break;case "stormWinds":this.O7612();break;case "bursts":this.O5394(!1);break;case "colorBursts":this.O5394(!0);break;case "floating":this.O6840();break;case "downFloating":this.O6840(!0);break;case "backFloating":this.O2772();break;case "soundscape":this.O5436()}},O7612:function(){if(ig.game.chance(5)&&ig.game.O1257){var a=ig.game.O1257,b=ig.game.O4293(50,300)*(ig.game.chance(50)?1:-1),c=-ig.game.O4293(50,300);a.O9832("stormWindResistant")||(a.vel.x+=b,a.vel.y+=c,a.vel.x=a.vel.x.limit(-700,700),
a.vel.y=a.vel.y.limit(-700,700));for(var d=ig.game.O4293(2,5),e=1;e<=d;e++){var f=this.O5565(a.pos,ig.game.O9925),g={x:.2*b,y:.2*c};f.x-=g.x;f.y-=g.y;g=this.O5565(g,5);this.spawnEntity(f,g,{O7942:.75,O4405:70,O2329:4,fadingInc:.25})}this.playSound("wind",50,a.pos)}},getAttributeByGivenName:function(a){var b=null,c=this.O7519();if(a=a.givenName?a.givenName.toLowerCase():null)for(var d in c)if(ig.game.strings.O2801(d)==a){b=d;break}return b},O7519:function(){var a={rainCloud:{},snowCloud:{},heat:{},
mist:{},natureAir:{},humming:{},oceanAir:{},wind:{},sunshine:{},villageDust:{},cityAir:{},glimmer:{},smoke:{},steam:{},nightAir:{},reflections:{},colorReflections:{},glitter:{},colorGlitter:{},bubbles:{},dripping:{},stars:{}};return ig.game.painter&&ig.game.painter.attributesInfo?ig.game.painter.attributesInfo.environment:a},O6237:function(){var a=this.O4746(),b={x:ig.game.O9149,y:this.distort(100,5)};ml.Misc.O9216(b);this.spawnEntity(a,b,{O5856:ig.game.O8159.whiteLineVertical,opacity:40});this.playSound("raindrop",
30,a)},O3377:function(){var a=this.O4746(),b={x:this.distort(ig.game.O9149,10),y:this.distort(20,5)};this.spawnEntity(a,b)},O6203:function(a){var b=this.O4746(),c={x:this.distort(ig.game.O9149,10),y:this.distort(-10,5)},d={O5856:ig.game.chance(75)?ig.game.O8159.redPixel:ig.game.O8159.blackPixel,O6475:!1};this.spawnEntity(b,c,d);this.playSound("fire",20,b);a&&(a={pos:b,size:{x:2,y:2}},ig.game.O1257&&!ig.game.O1257.O9832("heatResistant")&&150>=ig.game.O1257.O2144(a)&&ig.game.O1257.O3914(1,null,!1))},
O9531:function(){if(ig.game.chance(30)){var a=this.O4746(),b={x:ig.game.O4293(5,20),y:0};ig.game.chance(50)&&(b.x*=-1);b.x+=ig.game.O9149;ml.Misc.O9216(b);this.spawnEntity(a,b,{O5856:ig.game.O8159.mist,O7942:.25,O4405:80,O2329:4,fadingInc:1})}},O7451:function(){if(ig.game.chance(60)){var a=this.O4746();this.playSound("nature",60,a)}},O1434:function(){if(ig.game.chance(20)){var a=this.O4746(),b={x:this.distort(30,10),y:0};ig.game.chance(50)&&(b.y=b.x,b.x=0);this.spawnEntity(a,b,{O7942:.25,O4405:60,
O2329:4,fadingInc:1});this.playSound("humming",40,a)}},O7381:function(){if(ig.game.chance(30)){var a=this.O4746();this.playSound("ocean",30,a)}},O6866:function(){if(ig.game.chance(30)){var a=this.O4746();ig.game.O9149=this.O6113();var b={x:this.distort(ig.game.O9149,15),y:this.distort(0,5)};this.spawnEntity(a,b,{O7942:.25,O4405:60,O2329:4,fadingInc:1});this.playSound("wind",30,a)}},O3682:function(){if(ig.game.chance(20)){var a=this.O4746(),b={x:0,y:ig.game.O4293(15,18)};this.spawnEntity(a,b,{O5856:ig.game.O8159.sunbeam,
O7942:.15,O4405:100,O2329:2,fadingInc:1})}},O1016:function(){if(ig.game.chance(30)){var a=this.O4746();this.playSound("village",30,a)}},O4751:function(){if(ig.game.chance(30)){var a=this.O4746();this.playSound("city",30,a)}},O8709:function(){if(ig.game.chance(30)){var a=this.O4746();this.spawnEntity(a,null,{O5856:ig.game.O8159.sparkle},EntitySparkle);this.playSound("glimmer",30,a)}},O9801:function(){if(ig.game.chance(2.5)){var a=this.O4746(),b={x:a.x+ig.game.O8159.lightning.width/2,y:a.y+ig.game.O8159.lightning.height/
2};this.O9575(b)&&(this.spawnEntity(a,null,{O5856:ig.game.O8159.lightning,O2329:.5,fadingInc:5,O8546:!0}),this.playSound("lightning",100,b))}},O3375:function(){if(ig.game.chance(25)){var a={x:this.distort(this.pos.x+9,8),y:this.distort(this.pos.y+19,5)},b={x:this.distort(ig.game.O9149,1),y:this.distort(-10,5)};ml.Misc.O9216(b);var c=ig.game.chance(70)?ig.game.O8159.smoke:ig.game.O8159.bigSmoke;a.x=Math.floor(a.x-c.width/2);this.spawnEntity(a,b,{O5856:c,O6475:!1})}},O1476:function(){if(ig.game.chance(15)){var a=
{x:this.distort(this.pos.x+9,8),y:this.distort(this.pos.y+19,5)},b={x:this.distort(.1*ig.game.O9149,1),y:this.distort(-6,3)};ml.Misc.O9216(b);var c=ig.game.chance(40)?ig.game.O8159.steam:ig.game.O8159.bigSteam,d={O5856:c,O7942:5,O4405:35,fadingInc:.5,O6475:!1};a.x=Math.floor(a.x-c.width/2);this.spawnEntity(a,b,d)}},O9891:function(){if(ig.game.chance(35)){var a=this.O4746(),b={x:this.distort(0,13),y:this.distort(-9,9)};this.spawnEntity(a,b,{O5856:ig.game.O8159.yellowPixel,O2329:.5,O7942:15,fadingInc:5,
O4405:60,O6475:!1});this.playSound("nightair",11,a)}},O7722:function(a){if(ig.game.chance(20)){var b=this.O4746(),c={x:this.distort(0,25),y:this.distort(0,5)};a=a?ig.game.O4293(1,6):1;this.spawnEntity(b,c,{O5856:ig.game.O8159["reflection"+a],O2329:1.5,O7942:2,fadingInc:5,O4405:40,O6475:!1})}},O7117:function(a){if(ig.game.chance(60)){var b=this.O4746(),c={x:this.distort(ig.game.O9149,15),y:this.distort(10,15)};a=a?ig.game.O4293(1,6):1;this.spawnEntity(b,c,{O5856:ig.game.O8159["glitter"+a],O2329:.5,
O7942:20,fadingInc:5,O4405:70,O6475:!1})}},O3499:function(a){ig.game.chance(50)&&ig.game.camera&&ig.game.O1257&&(a=this.O4746(),this.O9575({x:a.x+ig.game.O8159.lightning.width/2,y:a.y+ig.game.O8159.lightning.height/2})&&(ig.game.camera.shake(),this.playSound("quake",30,a)))},O1340:function(){if(ig.game.chance(5)){var a=this.O4746();this.O9575({x:a.x+ig.game.O8159.lightning.width/2,y:a.y+ig.game.O8159.lightning.height/2})&&this.spawnEntity(a,null,{O5856:ig.game.O8159.whitePixel,O2329:.5,fadingInc:5,
O8546:!0})}},O2487:function(){if(ig.game.chance(25)){var a={x:this.distort(this.pos.x+9,4),y:this.distort(this.pos.y+19,5)},b={x:.1*ig.game.O9149,y:this.distort(-10,5)};ml.Misc.O9216(b);var c=ig.game.O8159["bubble"+ig.game.O4293(1,ig.game.O4293(1,3),3)],d={O5856:c,O2329:1.5,O7942:2,fadingInc:5,O4405:50,O6475:!1};a.x=Math.floor(a.x-c.width/2);this.spawnEntity(a,b,d);this.playSound("bubble",20,a)}},O7072:function(){if(ig.game.chance(5)){var a=this.O4746(),b={x:0,y:this.distort(150,30)};this.spawnEntity(a,
b,{O5856:ig.game.O8159.whiteLineVertical,O6475:!1});this.playSound("dripping",100,a)}},O7308:function(){var a=this.O4746(),b={x:0,y:0};ml.Misc.O9216(b);var c=ig.game.chance(20)?ig.game.O8159.whitePixel:ig.game.O8159.whitePixelSmall,d=ig.game.O4293(70,100);this.spawnEntity(a,b,{O5856:c,O7942:.45,O4405:d,O2329:8,fadingInc:1,O2601:!0})},O9793:function(){this.O2041(ig.game.chance(75)?ig.game.O8159.glitter3:ig.game.O8159.whitePixel,!0)},O2041:function(a,b){if(ig.game.O1257){var c=this.O4746(),d={x:this.distort(ig.game.O9149,
10),y:this.distort(-10,5)};a||=ig.game.chance(75)?ig.game.O8159.glitter4:ig.game.O8159.blackPixel;this.spawnEntity(c,d,{O5856:a,O6475:!1});ig.game.O1257&&(c={pos:c,size:{x:2,y:2}},(b?!ig.game.O1257.O9832("coldResistant"):!ig.game.O1257.O9832("breather"))&&150>=ig.game.O1257.O2144(c)&&ig.game.O1257.O3914(1,null,!1))}},O5394:function(a){if(ig.game.chance(10)){var b=this.O4746();ig.game.decorator.burst({pos:b,vel:{x:0,y:-300}},null,a);a=ig.ua.iPad?1:ig.game.O4293(1,2);this.playSound("burst"+a,40,b,!0)}},
O6840:function(a){if(ig.game.chance(15)){var b=this.O4746();var c=ig.game.areaAngleDriftVelocity.x||ig.game.areaAngleDriftVelocity.y?ig.game.O4507(ig.game.areaAngleDriftVelocity):{x:ig.game.O4293(-20,20),y:ig.game.O4293(-20,20)};a&&(c.y=ig.game.O4293(5,20));this.spawnEntity(b,c,{O7942:.25,O4405:60,O2329:4,fadingInc:1,O6475:!1,decorative:!0,animSheet:this.animSheet})}},O2772:function(){if(ig.game.chance(15)){var a=this.O4746();var b=ig.game.areaAngleDriftVelocity.x||ig.game.areaAngleDriftVelocity.y?
ig.game.O4507(ig.game.areaAngleDriftVelocity):{x:ig.game.O4293(-20,20),y:ig.game.O4293(-20,20)};var c={O7942:.45,O4405:ig.game.O4293(70,100),O2329:8,fadingInc:1,animSheet:this.animSheet};this.spawnEntity(a,b,c)}},O5436:function(){!this.attributes.quiet&&this.soundId&&(0==this.O6654||this.O6654<=this.O9510&&ig.game.chance(2)||this.O6654>this.O9510&&1>=ig.game.O4293(0,1E3))&&(ig.game.sounds.playIncludedSound(this),this.O6654<=this.O9510&&!this.isByLiner&&this.O6654++)},O6113:function(){var a=(new Date).getSeconds(),
b=0,c=[-80,-40,this.distort(0,20),40,80,40,this.distort(0,20),-40];a=Math.floor(c.length/60*a);0<=a&&a<c.length&&(b=c[a]);return b},spawnEntity:function(a,b,c,d){if(!this.attributes.nonVisual&&ig.game.O5119.environment&&ig.game.O5119.environment.length<=this.O2246){if(null==d||void 0==d)d=EntitySpot;if(null==c||void 0==c)c={};if(null==b||void 0==b)b={x:0,y:0};c.vel={x:b.x,y:b.y};c.attribute=this.attribute;ig.game.O9759(d,a.x,a.y,c)}},O4746:function(){var a=.75*ig.system.height,b=ig.game.O4293(0,ig.game.O4293(0,
.75*ig.system.width));a=ig.game.O4293(0,ig.game.O4293(0,a));ig.game.chance(50)&&(b*=-1);ig.game.chance(50)&&(a*=-1);return{x:this.pos.x+b,y:this.pos.y+a}},draw:function(){this.parent()},distort:function(a,b){return a+ig.game.O4293(-b,b)},O5565:function(a,b){return{x:this.distort(a.x,b),y:this.distort(a.y,b)}},O2550:function(a){},playSound:function(a,b,c,d){if(!this.attributes.quiet&&(this.isByLiner&&(b*=2),ig.game.chance(b)&&this.O9575(c)&&(this.O8130||ig.game.chance(1)))){b=ig.game.O4293(1,ig.game.sounds.environmentSounds[a]);
ig.ua.iPad&&(b=1);d||(a="environment_"+a+"_"+b);a=ig.game.sounds[a];if(d=null==this.O6830)this.O6830=new ml.Timer;if(d||this.O6830.delta()>=this.O9017)a&&a.play(),this.O6830.reset();this.O8130&&(this.isByLiner||this.O6654++,this.O6654>this.O9510&&(this.O8130=!1))}},O9575:function(a){var b=ig.game.O1257.pos;return a.x>=b.x-ig.system.widthHalf&&a.x<=b.x+ig.system.widthHalf&&a.y>=b.y-ig.system.O2175/2&&a.y<=b.y+ig.system.O2175/2}})});ig.baked=!0;
ig.module("game.entities.immobile.glow").requires("impact.entity").defines(function(){window.EntityGlow=ig.Entity.extend({size:{x:19,y:19},type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,decorative:!0,attributes:{},energy:100,energyMin:0,energyMax:100,energyVel:0,O4066:1,O1078:null,blinkTime:1.5,O4857:.005,O8060:0,angle:null,O3746:0,O2223:null,O1206:"lighter",init:function(a,b,c){c.attributes&&(this.attributes=c.attributes);this.parent(a,b,c);this.addAnim("main",
1,[0]);this.addAnim("glow",1,[1]);this.anims.main.pivot={x:this.size.x/2,y:this.size.y/2};this.O1877();this.attributes||(this.attributes={});this.O1473()},O1877:function(){if(this.rgb){var a=this.O5075(this.rgb);40>=Math.floor((a[0]+a[1]+a[2])/a.length)&&70>=this.O9511(a)&&(this.O1206=null)}},O9511:function(a){for(var b=a[0],c=1;c<a.length;c++)a[c]>b&&(b=a[c]);return b},O5075:function(a){a=a.split(",");for(var b=0;b<a.length;b++)a[b]=parseInt(a[b]);return a},O1473:function(){this.attributes.blinking&&
(this.O1078=new ml.Timer);this.attributes.rotating&&(this.angle=0,this.O8060=.01);this.attributes.rotatingFront&&(this.O2223=0,this.O3746=.01);this.attributes.flickering&&(this.O1078=new ml.Timer,this.blinkTime=1.25+.5*Math.random());this.attributes.wavering&&(this.energyMin=80,this.energy=ig.game.O4293(this.energyMin,this.energyMax),this.attributes.pulsating=!0);this.attributes.randomized&&(this.energy=ig.game.O4293(this.energyMin,this.energyMax),this.attributes.blinking&&(this.blinkTime=1.25+.5*
Math.random()),this.attributes.rotating&&(this.angle=ig.game.O4293(0,ig.game.fullAngle)),this.attributes.rotatingFront&&(this.O2223=ig.game.O4293(0,ig.game.fullAngle)))},update:function(){this.attributes.pulsating&&(0==this.energyVel&&(this.energyVel=-this.O4066),this.energy+=this.energyVel,this.energy<=this.energyMin?this.energyVel=this.O4066:this.energy>=this.energyMax?this.energyVel=-this.O4066:this.attributes.wavering&&ig.game.chance(5)&&(this.energyVel*=-1),this.energy=this.energy.limit(0,100));
this.attributes.blinking&&this.O1078&&this.O1078.delta()>=this.blinkTime&&(this.energy=this.energy==this.energyMax?this.energyMin:this.energyMax,this.O1078.reset());this.attributes.rotating&&(this.angle+=this.O8060,this.angle>ig.game.fullAngle&&(this.angle=0));this.attributes.rotatingFront&&(this.O2223+=this.O3746,this.O2223>ig.game.fullAngle&&(this.O2223=0));this.attributes.flickering&&this.O1078&&this.O1078.delta()>=this.blinkTime&&(this.energy=ig.game.chance(50)?0:100,this.O1078.reset(),this.blinkTime=
0==this.energy?.1*Math.random():.5+Math.random());ig.game.decorator.O7715({pos:this.pos,size:this.anims.main.pivot},this)},draw:function(){var a=this.pos.x-ig.game._rscreen.x,b=this.pos.y-ig.game._rscreen.y;this.anims.main.draw(a,b);var c=(.01*this.energy).limit(0,100);ig.system.context.globalAlpha=c;null!=this.angle&&(this.anims.glow.angle=this.angle);null!=this.O2223&&(this.anims.main.angle=this.O2223);this.O1206&&ml.Misc.O5847(this.O1206);this.anims.glow.draw(a-9,b-9);this.O1206&&ml.Misc.O3715();
ig.system.context.globalAlpha=1}})});ig.baked=!0;
ig.module("game.entities.immobile.living").requires("impact.entity").defines(function(){window.EntityLiving=ig.Entity.extend({size:{x:19,y:19},O2027:0,O8178:2,O8035:null,O5962:.5,O3640:null,O8706:!1,O1219:[],O6830:null,O9017:3,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,init:function(a,b,c){this.parent(a,b,c);ml.Misc.O9689(this,a,b,c);this.addAnim("main",1,[0]);this.O8035=new ml.Timer;this.O1219=ig.game.sounds.O3307(c.givenName)},update:function(){this.O8035.delta()>=
this.O8178&&ig.game.chance(this.O5962)&&(this.O8393.flip.x=!this.O8393.flip.x,this.O8035.reset(),this.O5308(this));this.O8706||(this.O3640=null);this.O8706=!1},O5308:function(){this.O6717||ig.game.O9759(EntityDust,this.pos.x+ig.game.O2953+7*(this.O8393.flip.x?-1:1),this.pos.y+ig.game.O9925-1,{vel:{x:20*(this.O8393.flip.x?-1:1)+(10*Math.random()-5),y:10*Math.random()-5}})},O2550:function(a){},playSound:function(){var a=!1;null==this.O6830&&(this.O6830=new ml.Timer,a=!0);if(a||this.O6830.delta()>=this.O9017){for(a=
0;a<this.O1219.length;a++)ig.game.sounds.O9396(this.O1219[a],this);this.O6830.reset()}},check:function(a){(1<=this.O1219.length||this.soundId)&&a instanceof EntityPlayer&&(this.O8706=!0,this.O3640!=a.O2970&&(this.O3640=a.O2970,this.soundId?ig.game.sounds.playIncludedSound(this):this.playSound()))}})});ig.baked=!0;
ig.module("game.entities.immobile.interact").requires("impact.entity","game.ui.speechdisplay").defines(function(){window.EntityInteract=ig.Entity.extend({data:null,allHas:[],allIs:[],allNumber:{},O8146:null,lastSaid:[],lastHeard:"",O8075:[],O5141:null,O430:null,O4855:null,betweenDefaultAndPlayer:!0,hasSpeech:!0,lastTimerDateInSec:null,reactsTo:[],boundingBox:null,boundingBoxOriginal:null,O1509:null,size:{x:29,y:29},O2027:0,type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,
O6456:!1,O5193:!1,O6825:!1,O8544:!1,O9984:!1,O5956:!1,O8123:null,O9346:2,O9964:null,O2479:null,O6857:null,O7329:null,O8711:null,thingReferences:[],O6373:null,O2555:null,imageSize:29,O8376:!0,checksNears:!1,posOriginal:{x:null,y:null},sizeOriginal:{x:null,y:null},offsetOriginal:{x:null,y:null},O5080:!1,O9523:null,O7850:!1,delaySecondsDefault:2,delaySeconds:2,O2722:void 0,O4000:!1,O6651:null,rumbles:{timer:null,O3181:null,O1689:null},O2755:null,O4331:!1,O2584:void 0,O1004:!1,font:null,init:function(a,
b,c){this.checksNears=!!c.checksNears;this.reactsTo=c.reactsTo;this.O5080=c.O5080;if(this.boundingBox=c.boundingBox)this.boundingBoxOriginal=ig.game.O4507(this.boundingBox);c.attributes&&(this.attributes=c.attributes);c.O4000&&(this.O4000=!0);this.parent(a,b,c);this.attributes&&this.attributes.affectsBelow&&this.O5682&&!this.O9367&&(this.pos.y+=ig.game.O9925,this.O5682.y++);this.posOriginal=ig.game.O4507(this.pos);this.sizeOriginal=ig.game.O4507(this.size);this.offsetOriginal=ig.game.O4507(this.offset);
this.O8711=this.O5080?ig.game.O2116.O7909():this.thingTypeId+"_"+a+"_"+b;this.addAnim("cell1",1,[0]);this.addAnim("cell2",1,[1]);this.O8393=this.anims.cell1;this.O8123=new ml.Timer;this.O4855=new SpeechDisplay(this);this.attributes||(this.attributes={});this.attributes.nonFlipping||(this.O6857=new ml.Timer);this.O7329=!!((a-b)%2);this.attributes.nonFlipping||this.O9367?this.O7329=!1:this.attributes.facesAway&&(this.O7329=!this.O7329);this.anims.cell1.flip.x=this.anims.cell2.flip.x=this.O7329;this.posOriginal=
ig.game.O4507(this.pos);this.O3470();this.attributes.solid&&this.O6485(!0);this.O9113||(this.O9367?this.O8402():(a=15E3,ig.game.O4296&&(a=ig.game.O4873.O9498()?0:1E3),c.textSize&&c.textSize<=a&&(this.reactsTo&&0<=this.reactsTo.indexOf("someone_arrives")||this.O8402())))},O3470:function(){var a=this.boundingBox;if(a){a={x:a[0],y:a[1],width:a[2]-a[0]+1,height:a[3]-a[1]+1};this.size={x:a.width,y:a.height};var b=(this.imageSize-this.size.x)/2;this.offset.x=-b;this.pos.x+=b-ig.game.O9925/4;0<a.y&&(this.pos.y-=
Math.ceil(ig.game.O2953),a=this.imageSize-this.size.y,this.offset.y=-a,this.pos.y+=a)}},O1473:function(){this.attributes.O6312&&(this.O6312=!0,this.O9346=3);this.attributes.slowChange&&(this.O9346=6)},reactTo:function(a,b){if(ig.game.O1257&&ig.game.O1257.O9832("disablesInteracting")||this.O9113)return!1;var c=!1;if((this.O1004=0<=["viewed","reaches","nears","approaches"].indexOf(a))&&ig.game.O4296)c=!1;else if(!(""==b&&"viewed"!=a&&"approaches"!=a&&"nears"!=a&&"reaches"!=a||this.O430||ig.game.portaller.O4206)){"string"!=
typeof b&&(b="");b=b.toLowerCase();"hears"==a&&(this.lastHeard=ig.game.strings.trim(b),this.lastHeard=ig.game.strings.replaceAll(this.lastHeard,"@embedding ",""));this.O8075=this.getResult(a,b);if(!this.O8075){var d=this.O5141;this.O5141=null;this.O8075=this.getResult(a,b,null,!0);this.O5141=d}this.O8075||"hears"!=a||this.O1509||(this.O8075=this.getResult(null,null,null,!0));this.O8075&&(c=null,"gets"==a&&(this.O7045(b),c=b),this.O8253(c,"hears"==a),c=!0)}this.O1004=!1;return c},O9974:function(a){if(ig.game.O1257&&
ig.game.O1257.O9832("disablesInteracting"))return!1;var b=!1;this.O8075&&0!=this.O8075.length||this.O430||ig.game.portaller.O4206||((this.O8075=this.getResult())?(this.O8253(),b=!0):(a&&(this.O8075=this.getResult("touches","*",null,!0)),this.O8075&&this.O8253()));return b},O8981:function(a,b,c,d){if(ig.game.O1257&&ig.game.O1257.O9832("disablesInteracting"))return!1;!this.O9964&&!this.O2479&&!ig.game.portaller.O4206&&(this.O9964={interactionType:a,text:b,O7207:c,O3181:.1*d},this.O2479=new ml.Timer)},
O2719:function(a,b,c){if(ig.game.O1257&&ig.game.O1257.O9832("disablesInteracting"))return!1;if(a&&b&&c&&!ig.game.portaller.O4206){this.O1509=c;if(null==this.data){this.data=[];var d=this;ig.game.O4261.getItem_P(d.thingTypeId,"interact1").done(function(e){var f=e.textData;d.thingReferences=e.thingRefs;d.data=ig.game.O2116.O8047(f,d.thingReferences);ig.game.O2116.O2681(d);d.reactTo(a,b)})}else this.reactTo(a,b);this.reactionDelayTimeout=null}},O2519:function(a,b){if(this.O9367||!ig.game.O4223){if(ig.game.O1257&&
ig.game.O1257.O9832("disablesInteracting"))return!1;if(a){if(null==this.data){this.data=[];var c=this;ig.game.O4261.getItem_P(c.thingTypeId,"interact2").done(function(d){var e=d.textData;c.thingReferences=d.thingRefs;c.data=ig.game.O2116.O8047(e,c.thingReferences);ig.game.O2116.O2681(c);c.reactTo("someone_"+a,b)})}else this.reactTo("someone_"+a,b);this.reactionDelayTimeout=null}}},setContext:function(a){this.O5141=a},O7336:function(){this.O5141=null},O3343:function(a){!this.O9367&&a&&a.pos&&!this.attributes.nonFlipping&&
!this.O1509&&(a=this.pos.x<a.pos.x,this.attributes.facesAway&&(a=!a),this.anims.cell1.flip.x=this.anims.cell2.flip.x=a)},O5003:function(){var a=this.O4855.O5805();a&&!a.moving&&(a.moving=!0)},O7947:function(){var a=null;this.lastTimerDateInSec&&(a=(new Date).getSeconds()-this.lastTimerDateInSec);return a},O8253:function(a,b){this.O5003();if(this.O8075&&1<=this.O8075.length){var c=this.O8075.shift(),d=c.say,e=this.font;c.font&&this.setFont(c.font);var f,g=d&&0<=d.indexOf("://")?d:null;d&&!g&&(d=d.toLowerCase(),
d=ig.game.O2116.O3954(d,this.allHas,this.allIs,this.allNumber,this.O8146,this.lastHeard,this.O7947()));this.logSaid(d);c.gives&&this.O7977(c.gives);c.removes&&this.O2344(c.removes);c.motion&&ig.game.O2116.O7945(this.pos,"sees",c.motion,this.givenName,this.id);if(d){var h=!1,k=!1;g&&(g=ig.game.O2116.O3954(g,this.allHas,this.allIs,this.allNumber,this.O8146,this.lastHeard,this.O7947()),d=(h=ml.Misc.O3903(g,ig.game.O1257.O2970,!0,!0))?"":ig.game.strings.O7934(g),k=!!(ig.game.panelSet&&ig.game.panelSet.musicPlayer&&
ig.game.panelSet.musicPlayer.O6264(g)));!h&&!k&&(ig.game.O2116.O2586(d)?ig.game.O2116.O4595(ig.game.O1257,d):(this.O7828(),this.O4855.O4505(ig.game.O2116.O2076(d),g,!0,this.O5080,this.font),this.O5080||(ig.game.O2116.O7945(this.pos,"hears",d,this.givenName,this.id),this.attributes&&this.attributes.affectsBelow&&ig.game.O2116.O8664(this,d))))}c.motionId&&this.O6347(c.motionId,ig.game.O1257.O2970);c.triggerMotionText&&this.O5351(c.triggerMotionText,c.triggerMotionId);c.harms&&this.doHarm(c.harms);c.heals&&
this.doHeal(c.heals);if(c.limits)for(g=0;g<c.limits.length;g++)h=c.limits[g],ig.game.O2116.O1137(h[0],h[1],h[2],h[3],h[4]);g=ig.game.O4482;for(h=1;2>=h;h++)if(k=1==h?c.commands:c.privateCommands)for(var l=0;l<k.length;l++){var m=k[l];m.is&&this.O1227(m.is);m.isnt&&this.removeFromAllIs(m.isnt);m.theyAre&&ig.game.O1257.O1227(m.theyAre);m.theyArent&&ig.game.O1257.removeFromAllIs(m.theyArent);if(g){if(m.removeAreaPossession){var n=ig.game.O3957.O5181(m.removeAreaPossession);n&&ig.game.O3957.O9121(n)}m.addAreaPossession&&
ig.game.O3957.O8661(m.addAreaPossession);m.removeAllAreaPossessions&&ig.game.O3957.removeAllAreaPossessionItems(m.removeAreaPossession)}}c.hasnt&&this.O1661(c.hasnt);this.O3891(c.changeNumber);g&&(void 0!==c.theyAutoHeal&&(ig.game.autoHeals=!!c.theyAutoHeal),void 0!==c.O4401&&(ig.game.O4401=!!c.O4401,!ig.game.O4401&&ig.game.userMapDialog&&ig.game.userMapDialog.isOpen&&ig.game.userMapDialog.close()),void 0!==c.theyCanDrown&&(ig.game.theyCanDrown=!!c.theyCanDrown),void 0!==c.O7823&&(ig.game.O7823=!!c.O7823),
void 0!==c.O4240&&(ig.game.O4240=!!c.O4240),void 0!==c.O4334&&(ig.game.O4334=!!c.O4334),void 0!==c.O3368&&(ig.game.O3368=!!c.O3368),void 0!==c.O6564&&(ig.game.O6564=!!c.O6564,ig.game.O6564||ig.game.O5058.O8943("cantSeeNameTags")),void 0!==c.theyCanBeAffectedByNonFullAccounts&&(ig.game.O4512=!!c.theyCanBeAffectedByNonFullAccounts),void 0!==c.theyCanBeAffectedByNonFriends&&(ig.game.O7899=!!c.theyCanBeAffectedByNonFriends),void 0!==c.theyCanMapTeleport&&(ig.game.theyCanMapTeleport=!!c.theyCanMapTeleport),
void 0!==c.O6026&&(ig.game.O6026=!!c.O6026),void 0!==c.O4948&&(ig.game.O4948=!!c.O4948),void 0!==c.O1720&&(ig.game.O1720=!!c.O1720),void 0!==c.O8689&&(ig.game.O8689=!!c.O8689),void 0!==c.O5178&&(ig.game.O5178=!!c.O5178),void 0!==c.O9677&&(g=ig.game.O9677,ig.game.O9677=!!c.O9677,ig.game.O9677&&!g&&ig.game.isFullAccount&&!ig.game.isEditorHere&&!ig.game.O1168&&ml.Misc.O1184()),void 0!==c.O9677&&(ig.game.O3120=!!c.O9677),void 0!==c.theyCanBeAffectedByBrainEquippers&&(ig.game.O1973=!!c.theyCanBeAffectedByBrainEquippers),
void 0!==c.theyAutoSetSpawnpoints&&(ig.game.O6011.O7150=!!c.theyAutoSetSpawnpoints),c.setSpawnPoint&&ig.game.O6011.O7904());c.throws&&(f=ig.game.O4293(1,1E5),this.O2371(c.throws,f));c.relocationsGoTo&&"INDIVIDUALS"==ig.game.O5549&&!sessionStorage.relocatedToCustomAreaOnce&&(ig.game.O7249=c.relocationsGoTo);c.areaBanForNMinutes&&!ig.game.isEditorHere&&"INDIVIDUALS"==ig.game.O5549&&!this.O4331&&(g=ig.game.O4873.O1051(),this.O4331=!0,ig.game.O9817.O4185(g,ig.game.O1257.O2970,c.areaBanForNMinutes).done(function(p){}));
c.timer&&(this.lastTimer=new ml.Timer,this.lastTimerDateInSec=(new Date).getSeconds(),ig.game.O2116.O1079(this));ig.game.O4296||(c.countdown&&ig.game.O2116.O5797(c.countdown,c.countdownIsVisible),c.countdownClear&&ig.game.O2116.O6366(),c.countdownAdd&&ig.game.O2116.O5527(c.countdownAdd));c.bumps&&this.O9129(c.bumps);c.embedUrl&&this.O9582(c.embedUrl);c.O8513&&this.O8513();c.rumblesSeconds&&this.O4588(c.rumblesSeconds);c.showsId&&this.O2802(c.showsId,c.lockAtHolderPage);void 0!==c.theyFocusHere&&!this.O5080&&
!this.O9367&&!ig.game.O4873.O1492()&&(c.theyFocusHere?ig.game.camera.O5199=this:ig.game.camera.O5199&&ig.game.camera.O5199.O8711==this.O8711&&(ig.game.camera.O5199=null));c.stopMusic&&ig.game.O7763.O3926();c.playsSoundId&&this.O2144(ig.game.O1257)<ig.system.widthHalf&&ig.game.sounds.O9961(c.playsSoundId);c.transports&&this.O3410(c.transports);!this.O9367&&c.transportToHere&&this.O7236();this.O3343(ig.game.O1257);void 0!==c.setContext&&null!==c.setContext&&(""==c.setContext?this.O7336():this.setContext(c.setContext));
this.autoContinue=!!c.autoContinue;c.toMarker&&(this.O8075=this.getResult(null,null,c.toMarker));c.to?this.O3845(c):!this.O9367&&(d||c.motionId||c.playsSoundId||c.commands||a||c.changeNumber||c.throws||c.hasnt||c.rumblesSeconds||c.id||c.font)&&ig.game.O7836.O4531(this.O8711,d,c.motionId,c.commands,a,c.hasnt,c.changeNumber?this.allNumber:null,c.throws,f,c.playsSoundId,c.rumblesSeconds,c.id,c.font,c.useFontOnce);this.O8075&&1<=this.O8075.length||this.autoContinue?(c.delaySeconds?this.delaySeconds=parseFloat(c.delaySeconds):
b&&(this.delaySeconds=this.delaySecondsDefault),this.O430=new ml.Timer):(this.delaySeconds=c.delaySeconds?parseFloat(c.delaySeconds):b?this.delaySecondsDefault:.1,this.O430=null);this.O3784(ig.game.O1257,c.places);c.useFontOnce&&(this.font=e)}else this.O430=null,this.autoContinue&&(this.autoContinue=!1,this.O9974())},O7828:function(){this.O5080&&ig.game.O1257&&(this.pos={x:ig.game.O1257.pos.x,y:ig.game.O1257.pos.y-50});this.O4855.update({x:this.pos.x+3,y:this.pos.y-9})},O3845:function(a){var b=a.to,
c=ig.game.O1460==b.toLowerCase()&&ig.game.O2694&&10>=ig.game.O2694.delta()&&!ig.game.O1958,d=this.O1004&&ig.game.O4223;c?console.log("Ignoring early same-area teleport"):d?console.log("Ignoring teleporting away from spawn area without clear person intent"):ig.game.O1257&&ig.game.O1257.O9832("disablesTransport")||!b||ig.game.portaller.O4206||(b=ig.game.strings.replaceAll(b,"[heard]",encodeURIComponent(this.lastHeard)),b=ig.game.strings.replaceAll(b,"[area]",ig.game.areaName),b=ig.game.strings.replaceAll(b,
"[main_area]",ig.game.O9720),ig.game.O1257&&(ig.game.O1257.vel.y=0),this.O430||(this.O430=new ml.Timer),"elsewhere"==b?ig.game.O4482&&ig.game.portaller.startExitAreaTeleportingRequest():"last"==b?ig.game.portaller.O4433():a.toDoesExcludeSubAreas?ig.game.portaller.O6417(b):ig.game.portaller.O9838(b,this.thingTypeId))},O3891:function(a){if(ig.game.O3957&&a&&ig.game.O4482)for(var b=0;b<a.length;b++){var c=a[b][0],d=a[b][1],e=a[b][2],f=a[b][3],g=a[b][4];d=ig.game.O2116.O3954(d,this.allHas,this.allIs,
this.allNumber,this.O8146,this.lastHeard,this.O7947());d!=parseInt(d)&&(d=0);if(f)ig.game.O3957.O5121(c,d,e,g);else{void 0===this.allNumber[c]&&(this.allNumber[c]=0);f=parseInt(this.allNumber[c]);switch(e){case "+":f+=parseInt(d);break;case "-":f-=parseInt(d);break;case "*":f*=parseInt(d);break;case ":":f=Math.round(f/parseInt(d));break;case "=":f=parseInt(d)}f=ig.game.O2116.O6041(c,f);this.allNumber[c]=f;0==this.allNumber[c]&&delete this.allNumber[c];ig.game.O2116.O1079(this)}}},O1302:function(a,
b){if(null==this.data){this.data=[];var c=this;ig.game.O4261.getItem_P(c.thingTypeId,"interact3").done(function(d){var e=d.textData;c.thingReferences=d.thingRefs;c.data=ig.game.O2116.O8047(e,c.thingReferences);ig.game.O2116.O2681(c);c.O9834(a,b)})}else this.O9834(a,b)},O9582:function(a){if(!ig.game.O4296&&!this.O5080&&(this.O9367||this.O2144(ig.game.O1257)<=4*ig.game.O9925)&&this.O3629(a)){var b=!1;this.attributes.unnamed&&(delete this.attributes.unnamed,this.O6633());ig.game.decorator.O2468(this.pos.x,
this.pos.y);0<=a.indexOf("invisible ")&&(a=ig.game.strings.replaceAll(a,"invisible ",""),b=!0);0<=a.indexOf("[heard]")&&(a=ig.game.strings.replaceAll(a,"[heard]",encodeURIComponent(this.lastHeard)));if(0<=a.indexOf("[name]")&&ig.game.O1257){a=ig.game.strings.replaceAll(a,"[name]",encodeURIComponent(ig.game.O1257.screenName));ig.game.actioninfo.close(this);ig.game.actioninfo.open(this,this.pos.x-4,this.pos.y-9,"Getting your name...",null,"",null,!0);var c=this;setTimeout(function(){ig.game.actioninfo.close(c)},
2500)}a=ig.game.strings.replaceAll(a,"[name]","");if(0<=a.indexOf("[location]")){var d=ml.Misc.getNonCryptographicHash(ig.game.O1460);d+="_"+this.O5682.x+"_"+this.O5682.y;a=ig.game.strings.replaceAll(a,"[location]",encodeURIComponent(d))}ig.game.O2116.currentEmbeddingInteract=this;ig.game.mediaDialog.O8469(a,ig.game.O1257.O2970,!0,!0,b)}},O3629:function(a){return 0===a.indexOf("http://manyunity.com/")||0===a.indexOf("https://manyunity.com/")||0===a.indexOf("http://thingistan.com/info")||0===a.indexOf("https://thingistan.com/info")},
O8513:function(){ig.game.mediaDialog&&ig.game.mediaDialog.O8112&&"Embedding"==ig.game.mediaDialog.mediaType&&ig.game.mediaDialog.O3967()},O9834:function(a,b){this.O4000||(b=this.O7847(b))&&this.O3784(a,b.places)},O3784:function(a,b){!ig.game.O4223&&b&&!this.O4000&&a&&(this.O5080?(a=ig.game.O6112.O2337(a.pos.x,a.pos.y))&&(a.y-=4,ig.game.O2116.O4145(a,b)):this.O9367||ig.game.O2116.O4145(this.O5682,b))},O7847:function(a){var b=null;if(this.data&&1<=this.data.length)for(var c=0;c<this.data.length;c++){var d=
this.data[c].result;if(d)for(var e=0;e<d.length;e++){var f=d[e];if(f.id==a){b=f;break}}}return b},O4588:function(a){if(this.O9367||!ig.game.O4223)this.rumbles={timer:new ml.Timer,O3181:parseInt(a),O1689:!0}},O2058:function(){if(this.rumbles.timer)if(this.rumbles.timer.delta()<=this.rumbles.O3181){if(this.rumbles.O1689||ig.game.chance(7))ig.game.camera.shake(),this.rumbles.O1689=!1}else this.rumbles={}},O7236:function(){ig.game.O1257&&this.O2144(ig.game.O1257)<=ig.game.O3985&&!ig.game.O1257.O9832("disablesTransport")&&
(ig.game.O1257.pos=ig.game.O4507(this.pos))},O9129:function(a){var b=0<=a.indexOf("absolute");b&&(a=ig.game.strings.replaceAll(a,"absolute",""),a=a.trim());var c=a.split(" ");a=ig.game.O1257.O2828.x;b?(b=parseInt(c[0]),c=parseInt(c[1]),0!=b&&(ig.game.O1257.vel.x=b.limit(-a,a)),0!=c&&(ig.game.O1257.vel.y=c.limit(-a,a))):(ig.game.O1257.vel.x=(ig.game.O1257.vel.x+parseInt(c[0])).limit(-a,a),ig.game.O1257.vel.y=(ig.game.O1257.vel.y+parseInt(c[1])).limit(-a,a))},O3410:function(a){ig.game.O1257.O9832("disablesTransport")||
(ig.game.O1257.O8313=new Date,a=a.split(" "),a={x:ig.game.O1257.pos.x+parseInt(a[0]),y:ig.game.O1257.pos.y+parseInt(a[1])},ig.game.O7836.O1716(ig.game.O1257.pos,a,ig.game.O1257.vel,ig.game.O1257.O8418),ig.game.O1257.pos.x=a.x,ig.game.O1257.pos.y=a.y)},O1227:function(a){if(a){a=a.toLowerCase();a=a.split(" and ");for(var b=0;b<a.length;b++){var c=a[b];c&&-1===this.allIs.indexOf(c)&&this.allIs.push(c)}ig.game.O2116.O1079(this)}},removeFromAllIs:function(a){if("*"==a)this.allIs=[],ig.game.O2116.O1079(this);
else if(a){a=a.toLowerCase();a=a.split(" and ");for(var b=0;b<a.length;b++){var c=a[b];c&&(c=this.allIs.indexOf(c),0<=c&&this.allIs.splice(c,1))}ig.game.O2116.O1079(this)}},O7045:function(a){a&&-1===this.allHas.indexOf(a)&&(this.allHas.push(a.toLowerCase()),ig.game.O2116.O1079(this));this.O8146=a},O1661:function(a){"*"==a?(this.allHas=[],ig.game.O2116.O1079(this)):a&&(a=this.allHas.indexOf(a.toLowerCase()),0<=a&&(this.allHas.splice(a,1),ig.game.O2116.O1079(this)))},doHarm:function(a){if(!ig.game.O4223&&
this.attributes.canHarmOrHasHighImpact&&parseInt(a)==a&&1<=a&&100>=a){var b=ig.game.O1257;b.O3914(parseInt(a),this,!0,!0);b.standing&&!b.attachments.m&&(ig.game.O3957&&ig.game.O3957.O8855("harmed"),b.O9904())}},doHeal:function(a){parseInt(a)==a&&1<=a&&100>=a&&(ig.game.O1257.health+=parseInt(a),100<ig.game.O1257.health&&(ig.game.O1257.health=100),ig.game.O3957&&ig.game.O3957.O8855("healed"))},O7977:function(a){var b=!1,c=ig.game.O2116.O7988;0<=a.indexOf(c)&&!ig.game.O2116.O4126(this.thingReferences,
c)&&(b=!0,a=ig.game.strings.replaceAll(a,c,""),a=ig.game.strings.replaceAll(a,"  "," "),a=a.trim());a=a.split(" or ");a=a[ig.game.O4293(0,a.length-1)];c=ig.game.O2116.O8070(a,this.thingReferences);a!=c&&this.O5741(c,b)},O2802:function(a,b){var c=this;ig.game.O4261.getItem_P(a,"interact4").done(function(d){if(0<=ig.game.O2116.O6375.indexOf(d.base)){c.O9523=ig.game.O4507(ig.game.O1257.pos);var e={},f="HOLDER"==d.base?ig.game.O1257:this;"HOLDER"==d.base&&void 0!==b&&(e.lockAtHolderPage=b);var g=!1;d.url&&
(g=0<=d.url.indexOf("vimeo.com")||0<=d.url.indexOf("imgur.com")||0<=d.url.indexOf("vine.co"));g||("MEDIUM"==d.base?ml.Misc.O3903(d.url,ig.game.O1257.O2970,!0):ig.game.O7747.O9935(a,f,e,void 0,!0))}})},O5741:function(a,b){var c=ig.game.O4261.getItemBasic(a,"ent_int_gt"),d=this;c.imagesBeingGenerated.done(function(){var e=ig.game.O1257,f=ig.game.attachmentManager.O6854(c.base);f&&(!e.attachments[f]||e.attachments[f].id!=a)&&(e.attachments[f]&&ig.game.O7836.O9073(f,null),ig.game.attachmentManager.O1336(e,
f,a,null,d.O8711),ig.game.O7836.O9073(f,a),b||ig.game.sounds.pickup.play())})},O2344:function(a){if(!ig.game.O4296){a="*"==a?["wearable","mountable","holdable","dynamic","brain"]:[a];for(var b=0;b<a.length;b++){var c=a[b],d="dynamic"==c?"WEARABLE":c.toUpperCase(),e=ig.game.attachmentManager.slots[d];e&&("WEARABLE"==d?ig.game.O1257.attachments.w&&(d=ig.game.O1257.attachments.w.base,("wearable"==c&&"STACKWEAR"==d||"dynamic"==c&&"DYNATHING"==d)&&ig.game.attachmentManager.O7355(ig.game.O1257,e,null)):
ig.game.attachmentManager.O7355(ig.game.O1257,e,null))}}},O6347:function(a,b){var c=this,d=ig.game.O4261.getItemBasic(a,"ent_int_tm");d&&d.imagesBeingGenerated.done(function(){if("DYNATHING"==d.base){var e={img:d.img,attributes:d.attributes,soundId:d.soundId,O9048:c,text:d.text,givenName:d.name,O6028:b,O9367:c.O9367};d.attributes&&d.attributes.replaces&&(c.anims.cell1.alpha=c.anims.cell2.alpha=0);var f;if(c.O5080){var g=ml.Misc.O4671(b);g&&(f=ig.game.O4507(g.pos))}else f=ig.game.O4507(c.pos);f&&ig.game.O9759(EntityDynathing,
f.x,f.y,e)}else e={img:d.img,attributes:d.attributes,soundId:d.soundId,O4459:c.O8711,boundingBox:d.boundingBox,givenName:d.name,O6028:b,O9367:c.O9367},ig.game.O9759(EntityMotion,c.pos.x,c.pos.y,e)})},O6693:function(a,b,c){this.O2555=null;b&&(this.anims.cell1.alpha=this.anims.cell2.alpha=1);ig.game.O1257&&c==ig.game.O1257.O2970&&this.reactTo("ends",a)},O5351:function(a,b){ig.game.O3957.O5215().done(function(){var c=!1,d=ig.game.O3957;1<=d.motionIds.length&&(d.selectedIndex=Math.floor(d.motionIds.length/
2),(c=d.O7251(a))||(c=d.O7251(a,!0)));!c&&b&&(ig.game.attachmentManager.O5645(ig.game.O1257,b),ig.game.O7836.O3933(b,null))}).fail(function(){b&&(ig.game.attachmentManager.O5645(ig.game.O1257,b),ig.game.O7836.O3933(b,null))})},logSaid:function(a){a&&(this.lastSaid.push(a),5<this.lastSaid.length&&this.lastSaid.splice(0,1))},update:function(){this.O9136();this.O9367||(this.pos=ig.game.O4507(this.posOriginal));if(this.attributes.O6312){var a=(new Date).getSeconds();a=Math.round(a*(this.attributes.slowChange?
.15:.5))%2;this.O8393=this.anims["cell"+(a+1)]}else this.O8123.delta()>=this.O9346&&ig.game.chance(.5)&&(this.O8393=this.anims["cell"+(this.O8393==this.anims.cell1?2:1)],this.O8123.reset());this.O3209();this.O2058();!this.O9523||ig.game.O1257.pos.x==this.O9523.x&&ig.game.O1257.pos.y==this.O9523.y||(ig.game.mediaDialog.O8112?ig.game.mediaDialog.O3967():ig.game.writableDialog.isOpen&&ig.game.writableDialog.close(),this.O9523=null);this.O430&&this.O430.delta()>=this.delaySeconds&&(this.delaySeconds=
this.delaySecondsDefault,this.O8253());this.O2479&&this.O2479.delta()>=this.O9964.O3181&&(this.O2719(this.O9964.interactionType,this.O9964.text,this.O9964.O7207),this.O2479=this.O9964=null);this.O6373&&this.O6373.O8720&&!this.O6373._kill&&!this.O430&&(ig.game.O1257&&this.O6373.O6028==ig.game.O1257.O2970&&this.reactTo("ends",this.O6373.givenName),this.O6373.kill());this.O5956=!!this.O9984;this.O9984=ml.Misc.O7862(this,ig.game.O1257,ig.game.O2116.O4219)&&ig.game.O1257&&this.checksNears&&this.O4280(ig.game.O1257);
this.O5193=this.O6456;this.O6456=ml.Misc.O7862(this,ig.game.O1257,ig.game.O2116.O6548)&&ig.game.O1257&&(1>=Math.abs(ig.game.O1257.vel.x)||this.checksNears||-1>ig.game.O1257.vel.y)&&this.O4280(ig.game.O1257);this.O8544=this.O6825;(this.O6825=ml.Misc.O7862(this,ig.game.O1257))&&0==ig.game.O1257.vel.x&&this.O6651&&0!=this.O6651.x?(this.O1509=null,this.data&&1<=this.data.length?(this.reactTo("viewed"),this.O6633()):this.O8402("viewed")):this.O6825&&!this.O8544?(this.O1509=null,this.data&&1<=this.data.length?
this.reactTo("reaches"):this.O8402("reaches")):this.O6456&&!this.O5193?(this.O1509=null,this.data&&1<=this.data.length?(this.O6633(),this.checksNears&&this.reactTo("nears")):this.O8402("nears")):this.O9984&&!this.O5956?(this.O1509=null,this.data&&1<=this.data.length?(this.O6633(),this.checksNears&&this.reactTo("approaches")):this.O8402("approaches")):!this.O6456&&this.O5193?(ig.game.mediaDialog.O8112&&ig.game.mediaDialog.O3967(),this.O9310()):this.O6456&&-10>ig.game.O1257.vel.y&&0==ig.game.O1257.vel.x&&
ig.game.O1257.O9165!=ig.game.O1257.O4583.CLIMBING&&this.data&&1<=this.data.length&&ml.Misc.O7862(this,ig.game.O1257)&&this.O9406();this.O5080?this.O9639(ig.game.O1257):this.O7828();a=null!=this.O6373;this.O6373=ig.game.O2116.O8583(this);if(this.attributes.solid)this.O6485(!(this.O6373&&this.O6373.attributes.passable));else{var b=this.O6373&&this.O6373.attributes.solid;this.boundingBox=this.O6373&&this.O6373.boundingBox?ig.game.O4507(this.O6373.boundingBox):ig.game.O4507(this.boundingBoxOriginal);
this.O3470();this.O6485(b)}!this.O6373&&a&&this.O8476();this.O5080||ig.game.decorator.O7715({pos:{x:this.pos.x-7,y:this.pos.y-7},size:{x:this.size.x,y:this.size.y}},this);ig.game.O1257&&(this.O6651=ig.game.O4507(ig.game.O1257.vel));this.parent()},O9406:function(){var a=!0;ig.game.O2116.O7663&&.5>=ig.game.O2116.O7663.delta()?a=!1:!ig.game.O1257||null==ig.game.O1257.miniJumpTimer&&null==ig.game.O1257.O6581?ig.game.O4296&&(void 0===this.O2584&&this.O5682&&(this.O2584=(a=ig.game.O6112.O8704({x:this.O5682.x,
y:this.O5682.y+1}))?a.thing:null),a=!this.O2584||-1===["PASS","CLIMB","PUSH","PUSHDIAG"].indexOf(this.O2584.base)):a=!1;a&&ig.game.O2116.O3180()&&(a=!1);a&&(this.reactTo("enters")&&(ig.game.O2116.O7663=new ml.Timer),this.O430||(this.O430=new ml.Timer))},O9136:function(){!this.O9113&&!ig.game.areaClosed&&!this.O7850&&ig.game.O2694&&0<=ig.game.O2694.delta()&&ig.game.O1257&&0===ig.game.O6550&&(!ig.game.O4223||this.O9367)&&(this.O5080||this.O9367||this.O2144(ig.game.O1257)<=ig.game.O2116.O9543)&&ig.game.O3957&&
ig.game.O3957.O4069&&(this.reactsTo&&0<=this.reactsTo.indexOf("someone_arrives")&&(this.O2519("arrives"),ig.game.O3957.O3127()),this.O7850=!0)},O9639:function(a){a&&(this.pos=ig.game.O4507(a.pos),this.pos.y-=ig.system.O2175+100,this.O4855&&this.O4855.update({x:a.pos.x+3,y:a.pos.y-.4*ig.system.height}))},O8476:function(){this.pos=ig.game.O4507(this.posOriginal);this.size=ig.game.O4507(this.sizeOriginal);this.offset=ig.game.O4507(this.offsetOriginal);this.boundingBox=ig.game.O4507(this.boundingBoxOriginal);
this.O3470()},O4280:function(a){var b=Math.abs(a.pos.x-this.pos.x)<=ig.game.O9925,c=null;b||(c=a.O8418&&a.pos.x<this.pos.x||!a.O8418&&a.pos.x>this.pos.x);return b||c},O3209:function(){this.O6857&&5<=this.O6857.delta()&&(this.O6857.reset(),this.O5607()||(this.anims.cell1.flip.x=this.anims.cell2.flip.x=this.O7329))},O5607:function(){var a=this.O1609(1.5*ig.game.O2116.O6548);a&&(this.anims.cell1.flip.x=this.anims.cell2.flip.x=this.pos.x<a.pos.x);return!!a},O1609:function(a){var b=null,c=null,d=ig.game.O5119.player;
if(d)for(var e=0;e<d.length;e++){var f=d[e];if(!f._killed&&this.O4280(f)){var g=this.O2144(f);g<=a&&(null==c||g<c)&&(b=f,c=g)}}return b},O8402:function(a){if(null==this.data&&!this.O9113){this.data=[];var b=this;ig.game.O4261.getItem_P(b.thingTypeId,"interact5").done(function(c){var d=c.textData;b.thingReferences=c.thingRefs;b.data=ig.game.O2116.O8047(d,b.thingReferences);ig.game.O2116.O2681(b);a&&b.reactTo(a)})}},O6633:function(){if(!this.O9367&&!this.attributes.unnamed){void 0===this.O2722&&(this.O2722=
ig.game.O2116.O9295(this.data));var a=this.givenName+"\r";this.O2722?a="up = enter\r":7>=ig.game.O9392&&(a+=(ig.ua.mobile?"action":"space")+"/type = interact");this.boundingBox?ig.game.actioninfo.open(this,this.pos.x+this.offset.x/2,this.pos.y+this.offset.y,a):ig.game.actioninfo.open(this,this.pos.x-4,this.pos.y,a)}},O9310:function(){this.attributes.unnamed||ig.game.actioninfo.close(this)},getResult:function(a,b,c,d){var e=null,f=[],g=this.O7947(),h=null;this.O2555?h=this.O2555.givenName:this.O6373&&
(h=this.O6373.givenName);if(this.data&&1<=this.data.length){b&&-1==b.indexOf("://")&&(b=b.toLowerCase());for(var k=0;k<this.data.length;k++){var l=this.data[k];if(c)l.marker!=c||l.condition&&!ig.game.O2116.O5410(a,b,l.condition,this.allHas,this.allIs,this.allNumber,this.reactsTo,this.O1509,this.O8146,this.lastHeard,g,h)||f.push(ig.game.O4507(l.result));else if(!l.marker){var m=!l.context;this.O5141&&(m=l.context==this.O5141);m&&(a&&l.interactionBased?ig.game.O2116.O5410(a,b,l.condition,this.allHas,
this.allIs,this.allNumber,this.reactsTo,this.O1509,this.O8146,this.lastHeard,g,h)&&f.push(ig.game.O4507(l.result)):!(a||l.interactionBased||l.condition&&!ig.game.O2116.O5410(a,b,l.condition,this.allHas,this.allIs,this.allNumber,this.reactsTo,this.O1509,this.O8146,this.lastHeard,g,h))&&f.push(ig.game.O4507(l.result)))}}1<=f.length&&(a=ig.game.O4293(0,f.length-1),e=f[a])}e||d||this.logSaid("");return e},draw:function(){if(!this.O5080){this.O9367||(this.pos=ig.game.O4507(this.posOriginal));var a=this.O6259(),
b=this.O6373;b&&b.attributes&&b.attributes.replaces||this.O8393.draw(a.x,a.y+(this.attributes&&this.attributes.affectsBelow?-19:0));b&&b.O8663(this,a)}},O2848:function(){this.O4855.draw()},O6259:function(){var a={x:this.pos.x+this.offset.x-ig.game._rscreen.x,y:this.pos.y+this.offset.y-ig.game._rscreen.y};this.boundingBox||(a.x-=5,a.y-=Math.floor(this.imageSize-ig.game.O9925));return a},O2550:function(a){this.parent(a)},O2534:function(a,b){a.O7729&&this.O2755!=a.throwId&&(this.O2755=a.throwId,this.reactTo("hits",
a.O4910));this.parent(a,b)},O2876:function(a){var b=null,c=ig.game.O1257.O2828.x+10;a=a.split(" ");3==a.length&&parseInt(a[0])==a[0]&&parseInt(a[1])==a[1]&&Math.abs(a[0])<=c&&Math.abs(a[1])<=c&&"string"===typeof a[2]&&24==a[2].length&&(b={opp:{x:Math.round(this.pos.x),y:Math.round(this.pos.y)},opv:{x:parseInt(a[0]),y:parseInt(a[1])},iid:a[2]});return b},O2371:function(a,b){if(a instanceof Array)for(b=0;b<a.length;b++){var c=this.O2876(a[b]);c&&this.O5753(c)}},O5753:function(a,b){var c=ig.game.O4261.getItemBasic(a.iid,
"ent_int_ti"),d=c&&!this.attributes.canHarmOrHasHighImpact&&ig.game.O2082.O2732(c.attributes);if(c&&!d){var e=this;c.imagesBeingGenerated.done(function(){var f={O8766:{width:c.img.width,height:c.img.height,flipX:0<a.opv.x?1:0,path:c.img.path,animSheet:ig.game.entityManager.getAnimationForEntity(c,0,!1)},itemId:c.id,soundId:c.soundId,O5089:c.base,attributes:c.attributes,O4910:c.name,O8985:a.opv,O1775:!0,originatorId:e.O2724(),throwId:b};ig.game.O9759(EntityThrownItem,a.opp.x,a.opp.y,f);ig.game.sounds.O9396(ig.game.sounds.whoosh,
e)})}},O2724:function(){return this.O5682?this.O5682.x+":"+this.O5682.y:""},O6485:function(a){this.collides=a?ig.Entity.COLLIDES.FIXED:ig.Entity.COLLIDES.NEVER},setFont:function(a){this.font=ig.game[a+"Font"]},tidyUp:function(){ig.game.camera.O5199&&ig.game.camera.O5199.O8711==this.O8711&&(ig.game.camera.O5199=null);this.O6373&&this.O6373.kill();this.O2555&&this.O2555.kill()}})});ig.baked=!0;
ig.module("game.entities.immobile.livanim").requires("impact.entity").defines(function(){window.EntityLivanim=ig.Entity.extend({size:{x:19,y:19},O2027:0,O8178:2,O8035:null,O5962:.5,O3640:null,O8706:!1,O1219:[],O6830:null,O9017:3,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,init:function(a,b,c){this.parent(a,b,c);ml.Misc.O9689(this,a,b,c);this.addAnim("cell1",1,[0]);this.addAnim("cell2",1,[1]);this.O8393=this.anims.cell1;this.O8035=new ml.Timer;this.O1219=ig.game.sounds.O3307(c.givenName);
this.O6717&&(this.O8393.flip.x=ig.game.chance(50))},update:function(){this.O8035.delta()>=this.O8178&&ig.game.chance(this.O5962)&&(this.O8035.reset(),this.O8393=this.O8393==this.anims.cell1?this.anims.cell2:this.anims.cell1);this.O8706||(this.O3640=null);this.O8706=!1},O2550:function(a){},playSound:function(){var a=!1;null==this.O6830&&(this.O6830=new ml.Timer,a=!0);if(a||this.O6830.delta()>=this.O9017){for(a=0;a<this.O1219.length;a++)ig.game.sounds.O9396(this.O1219[a],this);this.O6830.reset()}},
check:function(a){(1<=this.O1219.length||this.soundId)&&a instanceof EntityPlayer&&(this.O8706=!0,this.O3640!=a.O2970&&(this.O3640=a.O2970,this.soundId?ig.game.sounds.playIncludedSound(this):this.playSound()))}})});ig.baked=!0;
ig.module("game.entities.immobile.lqdflip").requires("impact.entity").defines(function(){window.EntityLqdflip=ig.Entity.extend({size:{x:19,y:19},isLiquid:!0,O1948:!0,O8178:.1,O8035:null,O5962:2,O2027:0,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,init:function(a,b,c){this.parent(a,b,c);this.addAnim("main",1,[0]);this.O8393.alpha=.5;this.O8035=new ml.Timer},update:function(){this.O8035.delta()>=this.O8178&&ig.game.chance(this.O5962)&&(this.O8393.flip.x=!this.O8393.flip.x,
this.O8035.reset())},draw:function(a){ig.game.O7456.O5687?a&&(this.O8393.alpha=.6,this.parent()):this.parent()},check:function(a){}})});ig.baked=!0;
ig.module("game.entities.immobile.liquid").requires("impact.entity").defines(function(){window.EntityLiquid=ig.Entity.extend({size:{x:19,y:19},isLiquid:!0,O1948:!0,O6218:.1,O8123:null,O1605:2,O2027:0,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,init:function(a,b,c){c.attributes&&(this.attributes=c.attributes);this.parent(a,b,c);this.addAnim("cell1",1,[0]);this.addAnim("cell2",1,[1]);this.O8393=this.anims.cell1;this.O8123=new ml.Timer;this.attributes||(this.attributes=
{})},update:function(){this.O8123.delta()>=this.O6218&&ig.game.chance(this.O1605)&&(this.O8123.reset(),this.O8393=this.O8393==this.anims.cell1?this.anims.cell2:this.anims.cell1,this.attributes.harmful&&ig.game.O1257.O2144(this)<=1.5*ig.game.O9925&&ig.game.O1257.O3914(2,null,!1))},draw:function(a){ig.game.O7606.isRunning&&"changeLiquid"==ig.game.O7606.O6567?a&&(this.O8393.alpha=.8,ml.Misc.O5847("difference"),this.parent(),ml.Misc.O3715()):this.attributes.moreOpaque?(this.O8393.alpha=a?.6:1,this.parent()):
this.attributes.veryOpaque?(this.O8393.alpha=a?.8:1,this.parent()):this.attributes.fullyOpaque?a&&(this.O8393.alpha=1,this.parent()):ig.game.O7456.O5687?a&&(this.O8393.alpha=.6,this.parent()):(this.O8393.alpha=.5,this.parent())},check:function(a){}})});ig.baked=!0;
ig.module("game.entities.decorative.crumbleblock").requires("impact.entity").defines(function(){window.EntityCrumbleBlock=ig.Entity.extend({size:{x:6,y:6},type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,bounciness:.3,friction:{x:10,y:10},maxVel:{x:100,y:500},lifeTimer:null,lifeTime:.2,O9266:0,opacity:.8,fading:!1,init:function(a,b,c){this.parent(a,b,c);this.animSheet||(this.animSheet=new ml.AnimationSheet("media/dummy.png",this.size.x,this.size.y));this.addAnim("main",
1,[0]);this.O9266=this.vel.x/900;this.lifeTimer=new ml.Timer},update:function(){!this.persistent&&this.lifeTime&&this.lifeTimer.delta()>this.lifeTime&&(this.fading=!0);this.fading&&(this.opacity-=3*ig.system.tick,0>=this.opacity&&this.kill());this.O8393.angle+=this.O9266;this.parent()},draw:function(){1!=this.opacity&&(ig.system.context.globalAlpha=this.opacity);this.parent();this.opacity&&(ig.system.context.globalAlpha=1)},O2550:function(a){this.pos.x+=this.vel.x*ig.system.tick;this.pos.y+=this.vel.y*
ig.system.tick}})});ig.baked=!0;
ig.module("game.entities.immobile.crumbling").requires("impact.entity","game.entities.decorative.crumbleblock").defines(function(){window.EntityCrumbling=ig.Entity.extend({O2027:0,size:{x:19,y:19},offset:{x:0,y:0},attributes:{},NAME:"CRUMBLING",type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.FIXED,O6765:null,state:0,STATES:{SOLID:0,UNSTABLE:1,CRUMBLED:2,SMASHED:3},TRIGGERTYPES:{NORMAL:0,SMASH:1},opacity:1,O4973:490,O5161:[],segmentAnimSheets:[],grid:3,O8498:6,O9540:1,init:function(a,
b,c){c.attributes&&(this.attributes=c.attributes);c.useKeyword&&(this.useKeyword=c.useKeyword);this.parent(a,b,c);this.addAnim("main",1,[0]);this.attributes||(this.attributes={});this.attributes.crumbleUpwards&&(this.O9540=-1);(this.attributes.strongWhenWalked||this.attributes.strongWhenWalkedAndBumped)&&this.O2232();this.O1179()},O2232:function(){if(this.thingTypeId){var a=ig.game.O4261.getItemBasic(this.thingTypeId,"ent_crm_suk");a&&a.useKeyword&&(this.useKeyword=a.useKeyword)}},O1179:function(){for(var a=
this.animSheet.image.data,b=this.O8498*ig.system.scale,c=0;c<this.grid;c++){this.segmentAnimSheets[c]=[];for(var d=0;d<this.grid;d++){var e=document.createElement("canvas");e.width=b;e.height=b;e.getContext("2d").drawImage(a,c*b,d*b,b,b,0,0,b,b);e=new ml.Image(null,null,null,e);e=new ml.AnimationSheet(null,this.O8498,this.O8498,e);this.segmentAnimSheets[c][d]=e}}},O3418:function(a){this.state!==a&&(a===this.STATES.UNSTABLE?(this.O7917(),this.state=this.STATES.UNSTABLE):a===this.STATES.CRUMBLED?(this.reactToStateTransitionCrumbled(),
this.state=this.STATES.CRUMBLED):a===this.STATES.SMASHED?(this.O4626(),this.state=this.STATES.SMASHED):a===this.STATES.SOLID&&(this.O2988(),this.state=this.STATES.SOLID))},update:function(){if(this.state===this.STATES.UNSTABLE&&ig.game.chance(20)){var a=ig.game.O4293(0,2);ig.game.spawnEntity(EntityCrumbleBlock,this.pos.x+a*this.O8498,this.pos.y+12,{vel:{x:0,y:0},opacity:ig.game.O4293(1,3)/10,animSheet:this.segmentAnimSheets[a][1],O2027:this.O9540})}if(this.state===this.STATES.SOLID&&1>this.opacity&&
(this.opacity=Math.min(this.opacity+.03,1),1==this.opacity))for(a=0;a<this.O5161.length;a++)this.O5161[a].kill();this.checkForQuakeBoostReaction();this.parent()},checkForQuakeBoostReaction:function(){this.attributes.quakeBoostTriggered&&ig.game.O7606.isRunning&&"quake"==ig.game.O7606.O6567&&ig.game.O7606.O7264&&ig.game.O7606.O7264.O8088&&this.state==this.STATES.SOLID&&ig.game.chance(20*ig.system.tick)&&ig.game.O7836.O2261(this.O5682,this.TRIGGERTYPES.NORMAL)},draw:function(){this.state!=this.STATES.CRUMBLED&&
this.state!=this.STATES.SMASHED&&(ig.system.context.globalAlpha=this.opacity,this.parent(),ig.system.context.globalAlpha=1)},O2550:function(a){},O2534:function(a,b){if(!this.useKeyword){var c=a instanceof EntityThrownItem&&(a.O7729||a.O1861),d=!0;this.attributes.strongWhenWalked&&(d=c||"x"==b||"y"==b&&-1>=a._my);var e=a&&a.attributes&&a.attributes.shatters;e&&(a.energy=0);this.attributes.strongWhenWalkedAndBumped&&d&&(d=c);!d||!a.O8088&&!c||this.justCollided||e||("x"==b?(d=Math.abs(a.prevVel.x),ig.game.sounds.collideSoft.play()):
d=Math.abs(a.prevVel.y),d>(c?100:this.O4973)||this.attributes.crumbleInstantly?(a.vel.x=a.prevVel.x,a.vel.y=a.prevVel.y,ig.game.O7836.O2261(this.O5682,this.TRIGGERTYPES.SMASH),this.O3521(a)):this.state!=this.STATES.UNSTABLE&&(ig.game.O7836.O2261(this.O5682,this.TRIGGERTYPES.NORMAL),this.O3521(a)))}},O3521:function(a){a.O8088&&(!this.O6765||3<=this.O6765.delta())&&(this.O6765=new ml.Timer,ig.game.O2116.O7884(ig.game.O1257,"crumbles",this.givenName))},O1758:function(a){ig.game.sounds.collideSoft.play();
ig.game.O7836.O2261(this.O5682,this.TRIGGERTYPES.NORMAL);ig.game.O2116.O7884(a,"crumbles",this.givenName)},O7917:function(){ig.game.sounds.O9396(ig.game.sounds.crumbling,this)},reactToStateTransitionCrumbled:function(){ig.game.sounds.collapse.play();this.collides=ig.Entity.COLLIDES.NEVER;this.O9080(!1)},O4626:function(){this.attributes.crumbleInstantly?this.reactToStateTransitionCrumbled():(ig.game.sounds.smash.play(),this.collides=ig.Entity.COLLIDES.NEVER,this.O9080(!0))},O2988:function(){this.collides=
ig.Entity.COLLIDES.FIXED;this.opacity=0},O9080:function(a){for(var b=0;b<this.grid;b++)for(var c=0;c<this.grid;c++)!this.attributes.leavesNoTrace&&ig.game.chance(30)&&this.O5161.push(ig.game.spawnEntity(EntityCrumbleBlock,this.pos.x+b*this.O8498,this.pos.y+c*this.O8498,{O2027:0,opacity:.3,persistent:!0,animSheet:this.segmentAnimSheets[b][c]})),a?ig.game.spawnEntity(EntityCrumbleBlock,this.pos.x+b*this.O8498,this.pos.y+c*this.O8498,{vel:{x:ig.game.O4293(-300,300),y:ig.game.O4293(-200,20)},animSheet:this.segmentAnimSheets[b][c],
O2027:this.O9540}):ig.game.spawnEntity(EntityCrumbleBlock,this.pos.x+b*this.O8498,this.pos.y+c*this.O8498,{vel:{x:ig.game.O4293(-40,40),y:ig.game.O4293(-20,20)},animSheet:this.segmentAnimSheets[b][c],O2027:this.O9540})},tidyUp:function(){this.O5161.forEach(function(a){a.kill()})}})});ig.baked=!0;
ig.module("game.entities.immobile.activator").requires("impact.entity").defines(function(){window.EntityActivator=ig.Entity.extend({toString:function(){return"ACTIVATOR"},NAME:"ACTIVATOR",size:{x:19,y:19},O2027:0,type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,suppressed:!1,TRIGGERTYPES:{NORMAL:0},init:function(a,b,c){c.attributes&&(this.attributes=c.attributes);this.parent(a,b,c);this.addAnim("main",1,[0]);this.attributes||(this.attributes={})},update:function(){this.touches(ig.game.O1257)?
this.attributes.needsPressing?ig.game.O7993()&&(this.soundId?ig.game.sounds.playIncludedSound(this):this.attributes.silent||ig.game.sounds.activate.play(),ig.game.O7836.O2261(this.O5682,this.TRIGGERTYPES.NORMAL),ig.game.O2116.O7945(this.pos,"sees","activates",this.givenName),ig.game.O2116.O7884(ig.game.O1257,"activates",this.givenName)):this.suppressed||(this.soundId?ig.game.sounds.playIncludedSound(this):this.attributes.silent||ig.game.sounds.activate.play(),ig.game.O7836.O2261(this.O5682,this.TRIGGERTYPES.NORMAL),
ig.game.O2116.O7945(this.pos,"sees","activates",this.givenName),ig.game.O2116.O7884(ig.game.O1257,"activates",this.givenName),this.suppressed=!0):this.suppressed=!1;this.parent()},draw:function(){this.parent()},O2550:function(a){this.parent(a)},O2534:function(a,b){}})});ig.baked=!0;
ig.module("game.entities.immobile.openable").requires("impact.entity").defines(function(){window.EntityOpenable=ig.Entity.extend({toString:function(){return"OPENABLE"},NAME:"OPENABLE",size:{x:19,y:19},pos:{x:0,y:0},origPos:{x:0,y:0},rotation:0,O2027:0,type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.FIXED,state:0,STATES:{CLOSED:0,OPEN:1},O5552:2,O3099:0,O7091:17,init:function(a,b,c){this.parent(a,b,c);this.addAnim("main",1,[0]);this.state=void 0!=c.state?c.state:0;this.origPos.x=
this.pos.x;this.origPos.y=this.pos.y},O3418:function(a,b){this.state!==a&&(a===this.STATES.CLOSED?(this.soundId&&ig.game.sounds.playIncludedSound(this),this.close(),this.state=this.STATES.CLOSED):a===this.STATES.OPEN&&(this.soundId&&ig.game.sounds.playIncludedSound(this),this.open(),this.state=this.STATES.OPEN,b&&(this.O3099=this.O7091)))},open:function(){this.collides=ig.Entity.COLLIDES.NEVER},close:function(){this.collides=ig.Entity.COLLIDES.FIXED},update:function(){this.state===this.STATES.CLOSED&&
0<this.O3099?this.O3099=Math.max(0,this.O3099-this.O5552):this.state===this.STATES.OPEN&&this.O3099<this.O7091&&(this.O3099=Math.min(this.O7091,this.O3099+this.O5552));0==this.rotation?(this.pos.x=this.origPos.x,this.pos.y=this.origPos.y+this.O3099,this.size={x:19,y:19-this.O3099},this.O8393.sheet.height=19-this.O3099):1==this.rotation?(this.pos.x=this.origPos.x,this.pos.y=this.origPos.y,this.size={x:19-this.O3099,y:19},this.O8393.sheet.width=19-this.O3099):2==this.rotation?(this.pos.x=this.origPos.x,
this.pos.y=this.origPos.y,this.size={x:19,y:19-this.O3099},this.O8393.sheet.height=19-this.O3099):3==this.rotation&&(this.pos.x=this.origPos.x+this.O3099,this.pos.y=this.origPos.y,this.size={x:19-this.O3099,y:19},this.O8393.sheet.width=19-this.O3099);this.parent()},draw:function(){this.parent()},O2550:function(a){this.parent(a)},O2534:function(a,b){}})});ig.baked=!0;
ig.module("game.entities.immobile.decoact").requires("impact.entity").defines(function(){window.EntityDecoact=ig.Entity.extend({toString:function(){return"DECOACT"},NAME:"DECOACT",size:{x:19,y:19},pos:{x:0,y:0},rotation:0,O2027:0,type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,state:0,STATES:{INACTIVE:0,ACTIVE:1},init:function(a,b,c){this.parent(a,b,c);this.addAnim("cellInactive",1,[0]);this.addAnim("cellActive",1,[1]);this.state=void 0!=c.state?c.state:0;this.O8393=
0==this.state?this.anims.cellInactive:this.anims.cellActive},O3418:function(a){this.state!==a&&(a===this.STATES.INACTIVE?(this.O5578(),this.state=this.STATES.INACTIVE):a===this.STATES.ACTIVE&&(this.O4985(),this.state=this.STATES.ACTIVE))},O4985:function(){this.O8393=this.anims.cellActive},O5578:function(){this.O8393=this.anims.cellInactive},update:function(){},draw:function(){this.parent()},O2550:function(a){this.parent(a)}})});ig.baked=!0;
ig.module("game.entities.immobile.decofb").requires("impact.entity").defines(function(){window.EntityDecofb=ig.Entity.extend({size:{x:38,y:38},O2027:0,type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,O5582:!0,init:function(a,b,c){c.animSheet&&(this.size.x=c.animSheet.width,this.size.y=c.animSheet.height);this.parent(a,b,c);this.addAnim("cellBack",1,[0]);this.addAnim("cellFront",1,[1]);this.O8393=this.anims.cellBack},update:function(){},draw:function(){var a=this.O6259({x:this.pos.x-
ig.game._rscreen.x,y:this.pos.y-ig.game._rscreen.y});this.anims.cellBack.draw(a.x,a.y)},O4481:function(){var a=this.O6259({x:this.pos.x-ig.game._rscreen.x,y:this.pos.y-ig.game._rscreen.y});this.anims.cellFront.draw(a.x,a.y)},O2550:function(a){},check:function(a){},O6259:function(a){this.size.x>ig.game.O9925?a.x-=Math.floor(this.size.x/4):this.size.x<ig.game.O9925&&(a.x+=Math.floor((ig.game.O9925-this.size.x)/2));a.y-=Math.floor(this.size.y-ig.game.O9925);return a}})});ig.baked=!0;
ig.module("game.entities.immobile.multithing").requires("impact.entity").defines(function(){window.EntityMultithing=ig.Entity.extend({size:{x:38,y:38},O2027:0,decorative:!1,type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,O2769:null,placementId:null,O7495:!1,O8109:!0,init:function(a,b,c){c.attributes&&(this.attributes=c.attributes);this.parent(a,b,c);this.placementId=a+"_"+b;this.addAnim("main",1,[0]);this.addAnim("back",1,[1]);this.attributes||(this.attributes=
{});this.attributes.inFront&&(this.decorative=!0);this.O2769={pos:this.O6259(ig.game.O4507(this.pos)),size:ig.game.O4507(this.size)}},update:function(){(this.O7495=ig.game.multithing&&ig.game.multithing.isOpen&&ig.game.multithing.placementId==this.placementId)?ig.game.actioninfo.isOpen&&ig.game.actioninfo.close(this):(this.O5193=this.O6456,(this.O6456=ml.Misc.O7862(this,ig.game.O1257))&&!this.O5193?(ig.game.actioninfo.open(this,this.pos.x,this.pos.y,this.givenName),ig.game.O2354=this):!this.O6456&&
this.O5193&&(ig.game.actioninfo.close(this),ig.game.O2354==this&&(ig.game.O2354=null)));ig.game.decorator.O7715(this.O2769,this)},draw:function(){var a=this.O6259({x:this.pos.x-ig.game._rscreen.x,y:this.pos.y-ig.game._rscreen.y});this.anims.main.draw(a.x,a.y)},openDialogIfNeeded:function(){ig.game.multithing&&!ig.game.multithing.isOpen&&ig.game.multithing.open(this,!this.attributes.noDustTrails)},O6259:function(a){this.size.x>ig.game.O9925?a.x-=Math.floor(this.size.x/4):this.size.x<ig.game.O9925&&
(a.x+=Math.floor((ig.game.O9925-this.size.x)/2));a.y-=Math.floor(this.size.y-ig.game.O9925);return a},tidyUp:function(){ig.game.multithing&&ig.game.multithing.isOpen&&ig.game.multithing.placementId==this.placementId&&ig.game.multithing.close();ig.game.O2354==this&&(ig.game.O2354=null)}})});ig.baked=!0;
ig.module("game.entities.immobile.decotch").requires("impact.entity").defines(function(){window.EntityDecotch=ig.Entity.extend({toString:function(){return"DECOTCH"},NAME:"DECOTCH",size:{x:19,y:19},pos:{x:0,y:0},rotation:0,O2027:0,suppressed:!1,type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,state:0,STATES:{INACTIVE:0,ACTIVE:1},TRIGGERTYPES:{NORMAL:0},init:function(a,b,c){c.attributes&&(this.attributes=c.attributes);this.parent(a,b,c);this.addAnim("cellInactive",
1,[0]);this.addAnim("cellActive",1,[1]);this.state=void 0!=c.state?c.state:0;this.O8393=this.state==this.STATES.INACTIVE?this.anims.cellInactive:this.anims.cellActive;this.attributes||(this.attributes={});this.soundId&&(this.type=ig.Entity.TYPE.B,this.O7852=ig.Entity.TYPE.A)},O3418:function(a){this.state!==a&&(a===this.STATES.INACTIVE?(this.O5578(),this.state=this.STATES.INACTIVE):a===this.STATES.ACTIVE&&(this.O4985(),this.state=this.STATES.ACTIVE,ig.game.sounds.playIncludedSound(this)))},O4985:function(){this.O8393=
this.anims.cellActive},O5578:function(){this.O8393=this.anims.cellInactive},update:function(){this.touches(ig.game.O1257)?this.attributes.needsPressing?ig.game.O7993()&&(ig.game.sounds.actionSoft.play(),ig.game.O7836.O2261(this.O5682,this.TRIGGERTYPES.NORMAL)):this.suppressed||(ig.game.sounds.actionSoft.play(),ig.game.O7836.O2261(this.O5682,this.TRIGGERTYPES.NORMAL),this.suppressed=!0):this.suppressed=!1;this.state==this.STATES.ACTIVE&&ig.game.decorator.O7715(this,this);this.parent()},draw:function(){this.parent()},
O2550:function(a){this.parent(a)},O2534:function(a,b){},check:function(a){if(this.soundId&&a instanceof EntityPlayer&&this.state==this.STATES.ACTIVE&&this.attributes.needsPressing){var b=this.pos.x+this.size.x/2,c=this.pos.y+this.size.y/2,d=a.pos.x+a.size.x/2,e=a.pos.y+a.size.y/2;(d<b&&0<a.vel.x||d>b&&0>a.vel.x||e<c&&0<a.vel.y||e>c&&0>a.vel.y)&&ig.game.sounds.playIncludedSound(this)}}})});ig.baked=!0;
ig.module("game.entities.immobile.gather").requires("impact.entity").defines(function(){window.EntityGather=ig.Entity.extend({toString:function(){return"GATHER"},NAME:"GATHER",size:{x:19,y:19},pos:{x:0,y:0},rotation:0,O2027:0,suppressed:!1,type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,O4103:null,O3878:1.5,state:0,STATES:{UNGATHERED:0,GATHERED:1},TRIGGERTYPES:{NORMAL:0},resistance:0,hasId:null,O8108:null,factor:{value:0,speed:0,speedStep:.001},factorOther:{value:0,
speed:0,speedStep:.001},factorMax:.25,O7391:.02,O7809:.001,init:function(a,b,c){c.attributes&&(this.attributes=c.attributes);c.hasId&&(this.hasId=c.hasId);this.parent(a,b,c);this.addAnim("ungathered",1,[0]);this.addAnim("gathered",1,[1]);this.state=this.state||this.STATES.UNGATHERED;this.O8393=this.state==this.STATES.UNGATHERED?this.anims.ungathered:this.anims.gathered;this.attributes||(this.attributes={});this.O1473()},O1473:function(){this.O1500();this.attributes.rotating&&(this.factor.speed=.01);
this.factor.value=.5*Math.random();this.factorOther.value=.5*Math.random()},O1500:function(){this.attributes.onlyReactToAction&&(this.attributes.resistant?this.resistance=5:this.attributes.veryResistant&&(this.resistance=10),this.attributes.randomizeResistance&&(this.resistance+=ig.game.O4293(-3,3)))},O3418:function(a,b){var c=a&&a.sta,d=a&&a.uid;a=a&&a.tid;this.state!==c&&(c===this.STATES.UNGATHERED?this.toUngathered():c===this.STATES.GATHERED&&(b||(this.O5684(),(c=ig.game.O4261.getItemBasic(this.thingTypeId,
"ent_gth_us"))&&ig.game.addStat(d,"gathered",c.name),this.O9777(a)),this.O4649()))},O5684:function(){this.soundId?ig.game.sounds.playIncludedSound(this):(this.attributes.edible&&this.playSound("munch"),this.attributes.valuable&&this.playSound("success"),this.attributes.cracking&&(ig.game.decorator.burst(this,10),this.playSound("smash")),this.attributes.edible||this.attributes.valuable||this.attributes.harvested||this.attributes.cracking||this.playSound("collect"))},playSound:function(a){ig.game.sounds.O9396(ig.game.sounds[a],
this,1)},O4649:function(a){this.O8393=this.anims.gathered;this.state=this.STATES.GATHERED;this.attributes.heals&&(ig.game.O1257.health=(ig.game.O1257.health+40).limit(0,100),ig.game.O3957&&ig.game.O3957.O8855("healed"));ig.game.decorator.O7772(this.pos)},toUngathered:function(){this.O1500();this.O8393=this.anims.ungathered;this.state=this.STATES.UNGATHERED},update:function(){this.touches(ig.game.O1257)?!this.suppressed&&this.state==this.STATES.UNGATHERED&&(this.attributes.harmful?(this.O8108&&1<=
this.O8108.delta()&&(this.O8108=null),this.O8108||(ig.game.O1257.O3914(40,this,!0),this.O8108=new ml.Timer)):this.attributes.deadly&&ig.game.O1257.kill(ig.game.deathTypes.DEADLY),this.O6694()&&!this.attributes.onlyReactToAction&&!this.attributes.onlyReactToThrow&&this.O7410()&&(this.attributes.harvested&&!this.O4103&&1>=Math.abs(ig.game.O1257.vel.x)&&(this.O4103=new ml.Timer,ig.game.sounds.O9396(ig.game.sounds.harvest,this)),!this.attributes.harvested||this.O4103&&this.O4103.delta()>=this.O3878))&&
(ig.game.O7836.O2261(this.O5682,this.TRIGGERTYPES.NORMAL),this.suppressed=!0,ig.game.O4261.getItem_P(this.thingTypeId,"gather_update").done(function(a){ig.game.O2116.O7884(ig.game.O1257,"gathers",a.name)})):(this.suppressed=!1,this.O4103&&(this.O4103=null,ig.O4534.stopAll()));this.state==this.STATES.UNGATHERED&&ig.game.decorator.O7715(this,this);this.O1407()},O1407:function(){this.attributes.rotating?(this.factor.value+=this.factor.speed,this.factor.value>=ig.game.fullAngle&&(this.factor.value=0),
this.O8393.angle=this.attributes.rotating?this.factor.value:-this.factor.value):(this.factor=this.O8979(this.factor),this.attributes.hovering&&(this.factorOther=this.O8979(this.factorOther),ig.game.chance(10)&&(this.factorOther=this.O8979(this.factorOther))),this.attributes.hovering&&(this.offset.x=10*this.factor.value,this.offset.y=10*this.factorOther.value))},O8979:function(a){a.speed+=a.speedStep;a.speed=a.speed.limit(-this.O7391,this.O7391);a.value+=a.speed;a.value=a.value.limit(-(4*this.factorMax),
4*this.factorMax);a.value<=-this.factorMax?a.speedStep=this.O7809:a.value>=this.factorMax&&(a.speedStep=-this.O7809);return a},O3203:function(a){!this.suppressed&&this.state==this.STATES.UNGATHERED&&!this.attributes.onlyReactToThrow&&this.O9184(a)&&this.O7410(!0)&&(ig.game.O7836.O2261(this.O5682,this.TRIGGERTYPES.NORMAL),this.suppressed=!0)},O9453:function(a){a&&!this.suppressed&&this.state==this.STATES.UNGATHERED&&(this.attributes.reactToThrow||this.attributes.onlyReactToThrow)&&this.O9184(a)&&this.O7410(!0)&&
(ig.game.O7836.O2261(this.O5682,this.TRIGGERTYPES.NORMAL),this.suppressed=!0)},O7410:function(a){(a=0>=--this.resistance)||(ig.game.decorator.burst(this,3),this.playSound("collapse"));return a},O6694:function(){var a=!0,b=ig.game.O4261.getItemBasic(this.thingTypeId,"ent_gth_guk");b.useKeyword&&(a=ig.game.O1257.attachments.h&&ml.Misc.O3249(ig.game.O1257.attachments.h.name,b.useKeyword)||ig.game.O1257.attachments.b&&ml.Misc.O3249(ig.game.O1257.attachments.b.name,b.useKeyword)||ig.game.O1257.attachments.w&&
ml.Misc.O3249(ig.game.O1257.attachments.w.name,b.useKeyword));return a},O9184:function(a){var b=!0,c=ig.game.O4261.getItemBasic(this.thingTypeId,"ent_gth_gukf");c.useKeyword&&(b=ml.Misc.O3249(a,c.useKeyword));return b},O977:function(a){var b=!0;if(this.attributes.sometimesHas&&a%3||this.attributes.rarelyHas&&a%15||this.attributes.veryRarelyHas&&a%50)b=!1;return b},O9777:function(a){if(this.hasId&&this.O977(a)){var b=ig.game.O4261.getItemBasic(this.hasId,"ent_gth_hei"),c=this;b.imagesBeingGenerated.done(function(){var d=
Math.round(c.pos.x+c.size.x/2);var e=Math.round(c.pos.y+c.size.y/2);var f={x:50*(a%2?-1:1),y:-320};ig.game.O1257.O4670++;f={O8766:{width:b.img.width,height:b.img.height,flipX:0<f.x?1:0,path:b.img.path,animSheet:ig.game.entityManager.getAnimationForEntity(b,0,!1)},itemId:b.id,O5089:b.base,attributes:b.attributes,O4910:b.name,O8985:f,O1775:!0,originatorId:c.O2724(),throwId:a};ig.game.O9759(EntityThrownItem,d,e,f);ig.game.sounds.O9396(ig.game.sounds.whoosh,c)})}},O2724:function(){return this.O5682?this.O5682.x+
":"+this.O5682.y:""},O2550:function(a){this.parent(a)},O2534:function(a,b){}})});ig.baked=!0;
ig.module("game.entities.immobile.deadlyem").requires("impact.entity").defines(function(){window.EntityDeadlyem=ig.Entity.extend({size:{x:13,y:13},offset:{x:3,y:3},pos:{x:0,y:0},origPos:{x:0,y:0},O2027:0,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,state:0,STATES:{HIDDEN:0,EMERGED:1},O3099:0,O8692:17,O1752:.5,O9031:3,init:function(a,b,c){this.parent(a,b,c);this.addAnim("main",1,[0]);this.state=void 0!=c.state?c.state:0;this.pos.x+=this.offset.x;this.pos.y+=this.offset.y;
this.origPos.x=this.pos.x;this.origPos.y=this.pos.y},O3418:function(a,b){this.state!==a&&(a===this.STATES.HIDDEN?this.state=this.STATES.HIDDEN:a===this.STATES.EMERGED&&(this.state=this.STATES.EMERGED,b||ig.game.sounds.O9396(ig.game.sounds.shortWhoosh,this)))},update:function(){this.state===this.STATES.HIDDEN&&this.O3099<this.O8692?this.O3099=Math.min(this.O8692,this.O3099+this.O1752):this.state===this.STATES.EMERGED&&0<this.O3099&&(this.O3099=Math.max(0,this.O3099-this.O9031));0==this.rotation?(this.pos.x=
this.origPos.x,this.pos.y=this.origPos.y+this.O3099,this.size={x:19,y:19-this.O3099},this.O8393.sheet.height=19-this.O3099):1==this.rotation?(this.pos.x=this.origPos.x,this.pos.y=this.origPos.y,this.size={x:19-this.O3099,y:19},this.O8393.sheet.width=19-this.O3099):2==this.rotation?(this.pos.x=this.origPos.x,this.pos.y=this.origPos.y,this.size={x:19,y:19-this.O3099},this.O8393.sheet.height=19-this.O3099):3==this.rotation&&(this.pos.x=this.origPos.x+this.O3099,this.pos.y=this.origPos.y,this.size={x:19-
this.O3099,y:19},this.O8393.sheet.width=19-this.O3099);this.parent()},draw:function(){this.parent()},O2550:function(a){},check:function(a){a.O8088&&a.kill(ig.game.deathTypes.DEADLY)}})});ig.baked=!0;
ig.module("game.entities.immobile.decoanim").requires("impact.entity").defines(function(){window.EntityDecoanim=ig.Entity.extend({size:{x:19,y:19},O2027:0,O8178:.1,O8035:null,O5962:4,type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,O6312:!1,O4302:5,O2703:void 0,angle:null,init:function(a,b,c){c.attributes&&(this.attributes=c.attributes);this.parent(a,b,c);this.addAnim("cell1",1,[0]);this.addAnim("cell2",1,[1]);this.O8393=this.anims.cell1;this.O8035=new ml.Timer;
this.attributes||(this.attributes={});this.attributes.inFront&&(this.decorative=!0);this.attributes.O6312&&(this.O6312=!0,this.O8178=1);this.attributes.slowChange&&(this.O8178=6);this.soundId&&!this.O6717&&!this.O7213&&(this.type=ig.Entity.TYPE.B,this.O7852=ig.Entity.TYPE.A,this.O1131(50,30));this.attributes.solid&&(this.collides=ig.Entity.COLLIDES.FIXED)},O1131:function(a,b){this.O2703={pos:ig.game.O4507(this.pos),size:ig.game.O4507(this.size)};this.size.x+=2*a;this.size.y+=2*b;this.pos.x-=a;this.pos.y-=
b;this.offset.x-=a;this.offset.y-=b},update:function(){if(this.attributes.pointsAtPerson&&ig.game.O1257&&this.O8393){this.angle=0;var a=ml.Misc.O2368(this);a&&!a.O9832("invisibility")&&!ig.game.O7606.O9761(a)&&(this.angle=this.angleTo(a)-Math.PI)}this.O7213||(this.O6312?(a=(new Date).getSeconds(),a=Math.round(a*(this.attributes.slowChange?.15:.5))%2,this.O8393=this.anims["cell"+(a+1)]):this.O8035.delta()>=this.O8178&&ig.game.chance(this.O5962)&&(this.O8035.reset(),this.O8393=this.O8393==this.anims.cell1?
this.anims.cell2:this.anims.cell1));ig.game.decorator.O7715(this.O2703?this.O2703:this,this);this.attributes.solid&&this.parent()},draw:function(){null!==this.angle&&this.O8393&&(this.O8393.angle=this.angle);this.parent()},O2550:function(a){},check:function(a){if(this.soundId&&a instanceof EntityPlayer){var b=this.pos.x+this.size.x/2,c=this.pos.y+this.size.y/2,d=a.pos.x+a.size.x/2,e=a.pos.y+a.size.y/2;(d<b&&0<a.vel.x||d>b&&0>a.vel.x||e<c&&0<a.vel.y||e>c&&0>a.vel.y)&&ig.game.sounds.playIncludedSound(this)}}})});
ig.baked=!0;
ig.module("game.entities.immobile.sparkling").requires("impact.entity").defines(function(){window.EntitySparkling=ig.Entity.extend({size:{x:19,y:19},O2027:0,type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,init:function(a,b,c){c.attributes&&(this.attributes=c.attributes);this.parent(a,b,c);this.addAnim("cell1",1,[0]);this.addAnim("cell2",1,[1]);this.O8393=this.anims.cell1;this.attributes||(this.attributes={});this.attributes.solid&&(this.collides=ig.Entity.COLLIDES.FIXED)},update:function(){this.attributes.solid&&
this.parent()},draw:function(){this.parent();var a=String(parseInt(.1*(this.pos.x+ig.game._rscreen.x)+.025*(this.pos.y+ig.game._rscreen.y)));a=a.substr(a.length-1);a=(this.attributes.sharp?[0,0,.5,.5,1,.5,.5,.5,0,0]:[0,.2,.4,.6,.8,1,.8,.6,.4,.2])[parseInt(a)];0!=a&&(this.anims.cell2.alpha=a,this.anims.cell2.draw(this.pos.x+this.offset.x-ig.game._rscreen.x,this.pos.y+this.offset.y-ig.game._rscreen.y))},O2550:function(a){},check:function(a){}})});ig.baked=!0;
ig.module("game.entities.immobile.flexible").requires("impact.entity").defines(function(){window.EntityFlexible=ig.Entity.extend({size:{x:19,y:7},O2027:0,O8178:6,O8035:null,O5962:4,type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.FIXED,O6941:3,init:function(a,b,c){c.attributes&&(this.attributes=c.attributes);this.parent(a,b,c);this.origPos=ig.game.O4507(this.pos);this.addAnim("cell1",1,[0]);this.addAnim("cell2",1,[1]);this.O8393=ig.game.chance(50)?this.anims.cell1:this.anims.cell2;
this.O8035=new ml.Timer;this.attributes||(this.attributes={});this.offset.y=this.O6941},update:function(){this.offset.y<this.O6941&&(this.offset.y+=.3,this.offset.y>this.O6941&&(this.offset.y=this.O6941));this.O8035.delta()>=this.O8178&&ig.game.chance(this.O5962)&&(this.O8035.reset(),this.O8393=this.O8393==this.anims.cell1?this.anims.cell2:this.anims.cell1);this.parent()},O2550:function(a){},O2534:function(a,b){"y"==b&&a.pos.y<this.pos.y&&(this.offset.y==this.O6941&&a.O7729&&ig.game.O2116.O7884(ig.game.O1257,
"activates",this.givenName),this.offset.y-=.6,a instanceof EntityThrownItem&&(this.offset.y-=1.5),0>this.offset.y&&(this.offset.y=0),this.attributes.crumbling&&0!=this.offset.y&&ig.game.chance(4)&&ig.game.decorator.O3250(this,this.rgb))}})});ig.baked=!0;
ig.module("game.entities.immobile.pointer").requires("impact.entity").defines(function(){window.EntityPointer=ig.Entity.extend({size:{x:38,y:38},type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,O6456:!1,O5193:!1,url:null,init:function(a,b,c){c.animSheet&&(this.size.x=c.animSheet.width,this.size.y=c.animSheet.height);this.parent(a,b,c);this.url=c.url;this.addAnim("main",1,[0])},update:function(){this.O5193=this.O6456;(this.O6456=this.touches(ig.game.O1257))&&ig.game.O7993()?
ml.Misc.getGridNeighborOfTypes(this.O5682,["MNTGROUND","MNTAIR","MNTWATER"])||ig.game.O9817.O2699(this.url).done(function(a){a&&void 0!=a.x&&void 0!=a.y&&ig.game.O2453.O1123(a)}):this.O6456&&!this.O5193?ig.game.actioninfo.open(this,this.pos.x,this.pos.y,"find"):!this.O6456&&this.O5193&&ig.game.actioninfo.close(this)},draw:function(){var a=this.O6259({x:this.pos.x-ig.game._rscreen.x,y:this.pos.y-ig.game._rscreen.y});this.anims.main.draw(a.x,a.y)},O6259:function(a){this.size.x>ig.game.O9925?a.x-=Math.floor(this.size.x/
4):this.size.x<ig.game.O9925&&(a.x+=Math.floor((ig.game.O9925-this.size.x)/2));a.y-=Math.floor(this.size.y-ig.game.O9925);return a}})});ig.baked=!0;
ig.module("game.entities.immobile.placename").requires("impact.entity").defines(function(){window.EntityPlacename=ig.Entity.extend({size:{x:38,y:38},type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,O6456:!1,O5193:!1,init:function(a,b,c){c.animSheet&&(this.size.x=c.animSheet.width,this.size.y=c.animSheet.height);this.parent(a,b,c);this.url=c.url;this.addAnim("main",1,[0])},update:function(){this.O5193=this.O6456;this.O6456=this.touches(ig.game.O1257);if(ig.game.isEditorHere||
ig.game.O1257&&2<=ig.game.O1257.rank)this.O6456&&!this.O5193?ig.game.actioninfo.open(this,this.pos.x,this.pos.y-9,"Collect+"+(ig.ua.mobile?"tap":"click")+" to return here",null,null,null,!0):!this.O6456&&this.O5193&&ig.game.actioninfo.close(this)},draw:function(){var a=this.O6259({x:this.pos.x-ig.game._rscreen.x,y:this.pos.y-ig.game._rscreen.y});this.anims.main.draw(a.x,a.y)},O6259:function(a){this.size.x>ig.game.O9925?a.x-=Math.floor(this.size.x/4):this.size.x<ig.game.O9925&&(a.x+=Math.floor((ig.game.O9925-
this.size.x)/2));a.y-=Math.floor(this.size.y-ig.game.O9925);return a},tidyUp:function(){ig.game.actioninfo.close(this)}})});ig.baked=!0;
ig.module("game.entities.immobile.writable").requires("impact.entity").defines(function(){window.EntityWritable=ig.Entity.extend({size:{x:19,y:19},O2027:0,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,O6456:!1,O5193:!1,areaGroupId:null,init:function(a,b,c){this.parent(a,b,c);this.addAnim("main",1,[0]);this.O8393=this.anims.main},update:function(){this.O5193=this.O6456;this.O6456=ml.Misc.O7862(this,ig.game.O1257)&&ig.game.O1257&&1>=Math.abs(ig.game.O1257.vel.x);.75>=
ig.game.O6550&&(this.O6456&&!this.O5193?(ig.game.isFullAccount&&ig.game.actioninfo.open(this,this.pos.x,this.pos.y,"Collect+"+(ig.ua.mobile?"tap":"click")+" to read elsewhere",null,null,null,!0),ig.game.writableDialog.open(this.thingTypeId,this.pos.x,this.pos.y)):!this.O6456&&this.O5193&&(ig.game.isFullAccount&&ig.game.actioninfo.close(this),ig.game.writableDialog.close()));this.O6456||ig.game.decorator.O7082(this)}})});ig.baked=!0;
ig.module("game.entities.immobile.readable").requires("impact.entity").defines(function(){window.EntityReadable=ig.Entity.extend({size:{x:19,y:19},O2027:0,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,O6456:!1,O5193:!1,textData:null,showBack:!0,init:function(a,b,c){this.rgb=c.rgb;this.rgb2=c.rgb2;c.attributes&&(this.attributes=c.attributes);this.parent(a,b,c);this.textData=c.textData;this.addAnim("main",1,[0]);this.O8393=this.anims.main},update:function(){this.O5193=
this.O6456;(this.O6456=ml.Misc.O7862(this,ig.game.O1257)&&ig.game.O1257&&1>=Math.abs(ig.game.O1257.vel.x))&&!this.O5193?this.O3893():!this.O6456&&this.O5193&&ig.game.readableDialog.close();ig.game.decorator.O7082(this)},O3893:function(){if(this.textData)ig.game.readableDialog.open(this.pos.x,this.pos.y,this.rgb,this.rgb2,this.textData,this.attributes,this.givenName);else{var a=this;ig.game.O4261.getItem_P(a.thingTypeId,"readable1").done(function(b){a.textData=b.textData;ig.game.readableDialog.open(a.pos.x,
a.pos.y,a.rgb,a.rgb2,a.textData,a.attributes,a.givenName)})}}})});ig.baked=!0;
ig.module("game.entities.immobile.sound").requires("impact.entity").defines(function(){window.EntitySound=ig.Entity.extend({size:{x:19,y:19},O2027:0,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,O4302:1,init:function(a,b,c){this.parent(a,b,c);this.addAnim("main",1,[0]);this.O1131(0,5)},O1131:function(a,b){this.size.x+=2*a;this.size.y+=2*b;this.pos.x-=a;this.pos.y-=b;this.offset.x-=a;this.offset.y-=b},update:function(){},O2550:function(a){},check:function(a){a instanceof
EntityPlayer&&2<=Math.abs(a.vel.x)+Math.abs(a.vel.y)&&ig.game.sounds.playIncludedSound(this,this.thingTypeId)}})});ig.baked=!0;
ig.module("game.entities.immobile.decobig").requires("impact.entity").defines(function(){window.EntityDecobig=ig.Entity.extend({size:{x:38,y:38},O2027:0,decorative:!1,type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,init:function(a,b,c){c.attributes&&(this.attributes=c.attributes);c.animSheet&&(this.size.x=c.animSheet.width,this.size.y=c.animSheet.height);this.parent(a,b,c);this.addAnim("main",1,[0]);this.attributes||(this.attributes={});this.attributes.inFront&&
(this.decorative=!0);if(this.attributes.inCenter||this.attributes.atBottom)"1453817600"<ml.Misc.getTimestampFromObjectId(c.thingTypeId).getTime()/1E3?this.attributes.inCenter?this.pos.y+=Math.round(this.size.y/4):this.attributes.atBottom&&(this.pos.y+=this.size.y-ig.game.O9925):this.attributes.inCenter?this.pos.y+=9:this.attributes.atBottom&&(this.pos.y+=19)},update:function(){var a={pos:this.O6259(ig.game.O4507(this.pos)),size:ig.game.O4507(this.size)};ig.game.decorator.O7715(a,this)},draw:function(){var a=
this.O6259({x:this.pos.x-ig.game._rscreen.x,y:this.pos.y-ig.game._rscreen.y});this.anims.main.draw(a.x,a.y)},O6259:function(a){this.size.x>ig.game.O9925?a.x-=Math.floor(this.size.x/4):this.size.x<ig.game.O9925&&(a.x+=Math.floor((ig.game.O9925-this.size.x)/2));a.y-=Math.floor(this.size.y-ig.game.O9925);return a}})});ig.baked=!0;
ig.module("game.entities.immobile.decovbig").requires("impact.entity").defines(function(){window.EntityDecovbig=ig.Entity.extend({size:{x:57,y:57},O2027:0,decorative:!1,type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,init:function(a,b,c){c.attributes&&(this.attributes=c.attributes);c.animSheet&&(this.size.x=c.animSheet.width,this.size.y=c.animSheet.height);this.parent(a,b,c);this.addAnim("main",1,[0]);this.attributes||(this.attributes={});this.attributes.inFront&&
(this.decorative=!0);this.attributes.inCenter?this.pos.y+=Math.round(this.size.y/3):this.attributes.atBottom&&(this.pos.y+=this.size.y-ig.game.O9925)},update:function(){var a={pos:this.O6259(ig.game.O4507(this.pos)),size:ig.game.O4507(this.size)};ig.game.decorator.O7715(a,this)},draw:function(){var a=this.O6259({x:this.pos.x-ig.game._rscreen.x,y:this.pos.y-ig.game._rscreen.y});this.anims.main.draw(a.x,a.y)},O6259:function(a){this.size.x>ig.game.O9925?a.x-=Math.floor(this.size.x/3):this.size.x<ig.game.O9925&&
(a.x+=Math.floor((ig.game.O9925-this.size.x)/2));a.y-=Math.floor(this.size.y-ig.game.O9925);return a}})});ig.baked=!0;
ig.module("game.entities.immobile.farback").requires("impact.entity").defines(function(){window.EntityFarback=ig.Entity.extend({size:{x:38,y:38},O2027:0,decorative:!1,type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,O8376:!0,rgb:[0,0,0],rgb2:[255,255,255],maxCells:1,parallaxOffset:{x:0,y:0},O9285:50,startOffset:{x:0,y:0},O4867:1,O8509:null,O9947:null,O9367:!1,O2710:null,O2652:void 0,lastPoint:void 0,O8257:!1,init:function(a,b,c){this.parent(a,b,c);this.maxCells=
Math.floor(this.animSheet.image.width/this.size.x);for(a=1;a<=this.maxCells;a++)this.addAnim("cell"+a,1,[a-1]);this.attributes||(this.attributes={});this.O9367&&(this.attributes.unfilled=!0);this.points=ig.game.farBackManager.O8707(this.text,this.attributes,this.maxCells,this.O9367);this.O9481();this.rgb&&"string"==typeof this.rgb&&(this.rgb=this.rgb.split(","));this.rgb2&&"string"==typeof this.rgb2&&(this.rgb2=this.rgb2.split(","));this.offset.x=ig.game.O2953;this.O9288();this.O8243()},O9481:function(){this.lastPoint=
this.O2652=void 0;for(var a=0;a<this.points.length;a++){var b=this.points[a];void 0!==b.x&&void 0!==b.y&&(this.O2652||(this.O2652=ig.game.O4507(b)),this.lastPoint=ig.game.O4507(b))}if(!this.O2652||!this.lastPoint||1>=this.points.length)this.attributes.unfilled=!0},O8243:function(){ig.game.O1257&&ig.game.O2694&&2<=ig.game.O2694.delta()&&!this.isCreatorLivePreview&&!this.O9367&&300>=this.O2144(ig.game.O1257)&&(this.attributes.leftward?this.startOffset.x=-12:this.attributes.rightward?this.startOffset.x=
12:this.attributes.upward?this.startOffset.y=-12:this.attributes.inward||(this.startOffset.y=12),this.O4867=0)},O9288:function(){this.attributes.shortGradient?this.O8509=57:this.attributes.gradient?this.O8509=114:this.attributes.longGradient&&(this.O8509=190);this.O8509*=ig.system.scale},update:function(){this.parallaxOffset=ig.game.farBackManager.O7858(this);this.O9161();!this.O8257&&ig.game.O1257&&this.O2144(ig.game.O1257)<=ig.system.widthHalf&&(ig.game.sounds.playIncludedSound(this,null,null,!0),
this.O8257=!0)},O9161:function(){this.startOffset.x=this.O4467(this.startOffset.x,50);this.startOffset.y=this.O4467(this.startOffset.y,50);1>this.O4867&&(this.O4867+=3*ig.system.tick,1<this.O4867&&(this.O4867=1))},O4467:function(a,b){0>a?(a+=b*ig.system.tick,0<a&&(a=0)):0<a&&(a-=b*ig.system.tick,0>a&&(a=0));return a},draw:function(){var a=1,b=parseInt(this.O2144(ig.game.O1257));450<b&&(a=.005*(200-(b-450)),0>a?a=0:1<a&&(a=1));a*=this.O4867;if(0<a){b=ig.system.context;var c=this.size.x/2,d=this.size.y/
2,e=this.points.length;b.globalAlpha=1;if(!this.attributes.unfilled){b.beginPath();var f="rgba("+this.rgb.join(",")+","+a+")";this.O8509?(this.O4500(a),b.fillStyle=this.O9947):b.fillStyle=f;this.attributes.leftward||this.attributes.rightward?b.moveTo(this.O722(this.O2652.x),0):this.attributes.inward||b.moveTo(0,this.O2321(this.O2652.y));for(f=0;f<e;f++){var g=this.points[f];void 0!==g.x&&b.lineTo(this.O722(g.x),this.O2321(g.y))}this.attributes.leftward?(b.lineTo(this.O722(this.lastPoint.x),ig.system.O5809),
b.lineTo(0,ig.system.O5809),b.lineTo(0,0)):this.attributes.rightward?(b.lineTo(this.O722(this.lastPoint.x),ig.system.O5809),b.lineTo(ig.system.realWidth,ig.system.O5809),b.lineTo(ig.system.realWidth,0)):this.attributes.upward?(b.lineTo(ig.system.realWidth,this.O2321(this.lastPoint.y)),b.lineTo(ig.system.realWidth,0),b.lineTo(0,0)):this.attributes.inward?b.lineTo(this.O722(this.O2652.x),this.O2321(this.O2652.y)):(b.lineTo(ig.system.realWidth,this.O2321(this.lastPoint.y)),b.lineTo(ig.system.realWidth,
ig.system.O5809),b.lineTo(0,ig.system.O5809));b.closePath();b.fill()}var h=0;b.globalAlpha=a;if(this.O9367){var k=0;for(f=0;f<e;f++)if(g=this.points[f],g.cell&&void 0!==g.x&&void 0!==g.y){k++;break}}for(f=0;f<e;f++)if((g=this.points[f],g.cell)&&(!(this.O9367&&k>0)||void 0!==g.x&&void 0!==g.y)){var l=void 0!==g.y?g.y:0;a="cell"+g.cell;var m=this.O722((void 0!==g.x?g.x:0)+g.cellOffset.x,!0)-c;l=this.O2321(l+g.cellOffset.y,!0)-d;this.anims[a].angle=g.cellRotation;this.anims[a].flip.x=g.cellFlipX;this.anims[a].flip.y=
g.cellFlipY;this.anims[a].draw(m,l);if(++h>=this.O9285)break}b.globalAlpha=1}},O4500:function(a){var b=this.O722(),c=this.O2321();this.O2710&&this.O2710.x==b&&this.O2710.y==c&&this.O2710.opacity==a||(this.O2710={x:b,y:c,opacity:a},this.O9947=null,this.O9947=this.attributes.leftward?ig.system.context.createLinearGradient(b,0,b-this.O8509,0):this.attributes.rightward?ig.system.context.createLinearGradient(b,0,b+this.O8509,0):this.attributes.upward?ig.system.context.createLinearGradient(0,c,0,c-this.O8509):
ig.system.context.createLinearGradient(0,c,0,c+this.O8509),this.O9947.addColorStop(0,"rgba("+this.rgb.join(",")+","+a+")"),this.O9947.addColorStop(1,"rgba("+this.rgb2.join(",")+","+a+")"))},O722:function(a,b){void 0===a&&(a=0);a=this.pos.x+a+this.offset.x-ig.game._rscreen.x+this.parallaxOffset.x+this.startOffset.x;b||(a*=ig.system.scale);return a},O2321:function(a,b){void 0===a&&(a=0);a=this.pos.y+a+this.offset.y-ig.game._rscreen.y+this.parallaxOffset.y+this.startOffset.y;b||(a*=ig.system.scale);
return a}})});ig.baked=!0;
ig.module("game.entities.immobile.furry").requires("impact.entity").defines(function(){window.EntityFurry=ig.Entity.extend({size:{x:11,y:19},type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,O2027:0,rotation:0,isTouched:!1,O9908:!1,O4859:0,O2181:0,touchPlayerVelocity:{x:0,y:0},decorative:!0,attributes:{},O5560:Math.PI/180,isRound:!1,init:function(a,b,c){c&&c.attributes&&(this.attributes=c.attributes);this.parent(a,b,c);this.attributes||(this.attributes={});this.decorative=
!this.attributes.behind;this.addAnim("normal",1,[0]);this.O8393.pivot={x:this.size.x/2,y:this.size.y};this.pos.x+=Math.floor((ig.game.O9925-this.size.x)/2);this.attributes.placeVariance&&this.O5682&&0==(this.O5682.x+this.O5682.y)%2&&(this.pos.y+=1);this.isRound=this.attributes.roundOrderlyTouchRotation||this.attributes.roundVariedTouchRotation||this.attributes.roundTouchExpand||this.attributes.roundTouchCollapse},update:function(){this.O5548();ig.game.decorator.O7715(this,this)},O5548:function(){var a=
ml.Misc.O2368(this);a&&((this.isTouched=ml.Misc.O7862(this,a))?(this.O2181=.15,this.touchPlayerVelocity={x:a.vel.x,y:a.vel.y},!this.O9908&&25<=this.touchPlayerVelocity.y&&(!this.attributes.unrippable&&ig.game.chance(50)&&this.O2335(),ig.game.sounds.footfalls_grass.play())):(this.O2181=-.05,this.touchPlayerVelocity.x*=.9,this.touchPlayerVelocity.y*=.9,.01>=Math.abs(this.touchPlayerVelocity.x)&&(this.touchPlayerVelocity.x=0),.01>=Math.abs(this.touchPlayerVelocity.y)&&(this.touchPlayerVelocity.y=0)));
this.O4859+=60*this.O2181*ig.system.tick;0>=this.O4859?this.O2181=this.O4859=0:1<=this.O4859&&(this.O4859=1,this.O2181=0);this.O9908=this.isTouched},O2335:function(){var a=ig.game.O4261.getItemBasic(this.thingTypeId,"ent_fur");if(a){var b={x:0,y:0},c=void 0;this.attributes.ripsFloatAway?(b.x=ml.Misc.O9058(-50,50),b.y=ml.Misc.O9058(-50,50),c=0):(b.x=0!=this.touchPlayerVelocity.x?.5*this.touchPlayerVelocity.x:ig.game.O4293(10,30)*(ig.game.chance()?1:-1),b.y=-(Math.abs(.5*this.touchPlayerVelocity.y)+
ig.game.O4293(0,40)));a={O8766:{width:a.img.width,height:a.img.height,flipX:0,path:a.img.path,animSheet:ig.game.entityManager.getAnimationForEntity(a,0,!1)},itemId:a.id,O5089:a.base,attributes:a.attributes,O4910:a.name,O8985:b,originatorId:this.O2724(),throwId:ig.game.strings.O4619(),O2027:c};ig.game.O9759(EntityThrownItem,Math.floor(this.pos.x),Math.floor(this.pos.y),a)}},O2724:function(){return this.O5682?this.O5682.x+":"+this.O5682.y:""},draw:function(){var a=this.O4859;0==a&&!this.attributes.orderly&&
(a=.25);this.attributes.lessSkew?a*=.5:this.attributes.extraSkew&&(a*=1.5);if(this.isRound)this.O5818(a);else{var b=!0,c=this.attributes.sparse?2:1,d=0,e=4;for(this.attributes.single&&(e=d=2);d<=e;d+=c){var f=this.pos.x,g=this.pos.y,h=3*(d-2);f+=h;h=.08*h*a;h+=.005*this.touchPlayerVelocity.x*a;h+=.01*ig.game.O7736;this.attributes.single&&(h+=.002*this.touchPlayerVelocity.y*a);this.attributes.weedy&&1==d%2&&(h*=-1.5);b&&!this.attributes.orderly&&(g+=1);this.attributes.smallPush&&(f+=.01*this.touchPlayerVelocity.x,
h=.001*this.touchPlayerVelocity.x);this.O8393.angle=h;this.O8393.draw(f-this.offset.x-ig.game._rscreen.x,g-this.offset.y-ig.game._rscreen.y,!0);b=!b}}},O5818:function(a){for(var b=this.attributes.sparse?4:8,c=360/b,d=this.pos.x,e=this.pos.y-ig.game.O9925/2,f=0;f<b;f++){var g=f*c;this.attributes.roundVariedTouchRotation?g+=10*this.O4859*(0==f%2?-1:1):this.attributes.roundOrderlyTouchRotation&&(g+=.2*this.touchPlayerVelocity.x*a,g+=.2*this.touchPlayerVelocity.y*a);this.attributes.weedy&&(g+=1==f%2?
-5:5);var h=d,k=e;if(this.attributes.roundTouchExpand||this.attributes.roundTouchCollapse){var l=Math.cos(g*this.O5560+180),m=Math.sin(g*this.O5560+180),n=4;this.attributes.roundTouchCollapse&&(n*=-1);h+=this.O4859*l*n;k+=this.O4859*m*n}!this.attributes.orderly&&1==f%2&&(h+=2,k+=2);this.O8393.angle=g*this.O5560;this.O8393.draw(h-this.offset.x-ig.game._rscreen.x,k-this.offset.y-ig.game._rscreen.y,!0)}},check:function(){}})});ig.baked=!0;
ig.module("game.entities.immobile.drifty").requires("impact.entity").defines(function(){window.EntityDrifty=ig.Entity.extend({size:{x:11,y:19},type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,O2027:0,rotation:0,isTouched:!1,O9908:!1,O4859:0,O2181:0,touchPlayerVelocity:{x:0,y:0},decorative:!1,attributes:{},parts:[],maxParts:5,init:function(a,b,c){c&&c.attributes&&(this.attributes=c.attributes);this.parent(a,b,c);this.attributes||(this.attributes={});this.decorative=
!!this.attributes.inFront;this.addAnim("normal",1,[0]);this.O8393.pivot={x:this.size.x/2,y:this.size.y};this.pos.x+=Math.floor((ig.game.O9925-this.size.x)/2);this.O9528()},O9528:function(){this.attributes.more?this.maxParts=7:this.attributes.manyMore&&(this.maxParts=9);for(var a=0;a<this.maxParts;a++)this.parts.push(this.O7916(a));for(a=0;250>=a;a++)this.O9562()},O7916:function(a){a={x:2*(a-Math.floor(this.maxParts/2)),y:ml.Misc.O9058(0,5),velocity:{x:0,y:ml.Misc.O9058(-2,-6)},opacity:.1,O2173:ml.Misc.O9058(3,
4),O8996:ml.Misc.O9058(-.2,-.4),angle:0,torque:ml.Misc.O9058(-.075,.075),number:a,doFlipX:!1,doFlipY:!1,swingX:0,swingVelocityX:0};this.attributes.startLow&&(a.y+=ig.game.O2953);this.attributes.startVeryLow?a.y+=ig.game.O9925:this.attributes.startHigh?a.y-=ig.game.O2953:this.attributes.startVeryHigh&&(a.y-=ig.game.O9925);this.attributes.downwards&&(a.y-=9,a.velocity.y*=-1);this.attributes.swingingHorizontally&&(a.swingVelocityX=1*ig.game.chance(50)?-1:1);this.attributes.randomizeFlipX&&(a.doFlipX=
ig.game.chance(50));this.attributes.randomizeFlipY&&(a.doFlipY=ig.game.chance(50));this.attributes.noRotation?a.torque=0:this.attributes.fastRotation&&(a.torque*=3);this.attributes.sidewaysSpeed?a.velocity.x=ml.Misc.O9058(-3,3):this.attributes.fastSidewaysSpeed&&(a.velocity.x=ml.Misc.O9058(-6,6));this.attributes.static?a.velocity.y=0:this.attributes.fast?this.O4311(a,3):this.attributes.veryFast?this.O4311(a,10):this.attributes.fastest&&this.O4311(a,30);this.attributes.fadeFast?a.O8996*=2:this.attributes.fadeVeryFast?
a.O8996*=6:this.attributes.fadeFastest&&(a.O8996*=20);return a},O4311:function(a,b){a.velocity.y*=b},update:function(){this.attributes.noTouchReaction||this.O5548();this.O9562();ig.game.decorator.O7715(this,this)},O9562:function(){for(var a=0;a<this.parts.length;a++){var b=this.parts[a];this.O6833(b);1<=b.opacity?(b.opacity=1,b.O2173=b.O8996):0>=b.opacity&&(b.opacity=0,this.parts[a]=this.O7916(ig.game.O4293(0,this.parts.length-1)))}},O6833:function(a){a.x+=a.velocity.x*ig.system.tick;a.y+=a.velocity.y*
ig.system.tick;if(!this.attributes.noTouchReaction){var b=.002*(1+.25*a.number);this.attributes.reverseTouchReaction&&(b*=-1);a.x+=this.touchPlayerVelocity.x*b;a.y+=this.touchPlayerVelocity.y*b}this.attributes.swingingHorizontally&&this.O3402(a);b=.002;this.attributes.affectedMoreByEnvironment&&(b*=4);a.x+=ig.game.O7736*b;a.opacity+=a.O2173*ig.system.tick;a.angle+=a.torque*ig.system.tick},O3402:function(a){a.swingX+=a.swingVelocityX*ig.system.tick;1<a.swingX?(a.swingX=1,a.swingVelocityX=-Math.abs(a.swingVelocityX)):
-1>a.swingX&&(a.swingX=-1,a.swingVelocityX=Math.abs(a.swingVelocityX));a.x+=.15*a.swingX},draw:function(){this.attributes.bright&&!ig.ua.mobile&&ml.Misc.O5847("lighter");for(var a=0;a<this.parts.length;a++)ig.system.context.globalAlpha=this.parts[a].opacity,this.O5230(this.parts[a]);ig.system.context.globalAlpha=1;this.attributes.bright&&!ig.ua.mobile&&ml.Misc.O3715()},O5230:function(a){var b=this.pos.x+a.x,c=this.pos.y+a.y;this.O8393.flip.x=a.doFlipX;this.O8393.flip.y=a.doFlipY;this.O8393.angle=
a.angle;this.O8393.draw(b-this.offset.x-ig.game._rscreen.x,c-this.offset.y-ig.game._rscreen.y,!0)},check:function(){},O5548:function(){var a=ml.Misc.O2368(this);a&&((this.isTouched=ml.Misc.O7862(this,a))?(this.O2181=.15,this.touchPlayerVelocity={x:a.vel.x,y:a.vel.y}):(this.O2181=-.05,this.touchPlayerVelocity.x*=.9,this.touchPlayerVelocity.y*=.9,.01>=Math.abs(this.touchPlayerVelocity.x)&&(this.touchPlayerVelocity.x=0),.01>=Math.abs(this.touchPlayerVelocity.y)&&(this.touchPlayerVelocity.y=0)));this.O4859+=
60*this.O2181*ig.system.tick;0>=this.O4859?this.O2181=this.O4859=0:1<=this.O4859&&(this.O4859=1,this.O2181=0);this.O9908=this.isTouched}})});ig.baked=!0;
ig.module("game.entities.immobile.clothy").requires("impact.entity").defines(function(){window.EntityClothy=ig.Entity.extend({size:{x:11,y:11},type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,O2027:0,rotation:0,isTouched:!1,O9908:!1,O4859:0,O2181:0,touchPlayerVelocity:{x:0,y:0},decorative:!1,attributes:{},parts:[{x:-1,y:-1,angle:-.1},{x:1,y:-1,angle:.1},{x:-1,y:1,angle:.1},{x:1,y:1,angle:-.1},{x:0,y:0,angle:0}],init:function(a,b,c){c&&c.attributes&&(this.attributes=
c.attributes);this.parent(a,b,c);this.attributes||(this.attributes={});this.decorative=!!this.attributes.inFront;this.addAnim("normal",1,[0]);this.pos.x+=Math.floor((ig.game.O9925-this.size.x)/2);this.pos.y+=Math.floor((ig.game.O9925-this.size.y)/2);this.attributes.placeVariance&&this.O5682&&0==(this.O5682.x+this.O5682.y)%2&&this.O2150();this.attributes.flipAngles&&this.O2150()},O2150:function(){for(var a=0;a<this.parts.length;a++)this.parts[a].angle*=-1},update:function(){this.O5548()},O5548:function(){var a=
ml.Misc.O2368(this);a&&((this.isTouched=ml.Misc.O7862(this,a))?(this.O2181=.15,this.touchPlayerVelocity={x:a.vel.x,y:a.vel.y},50<=Math.abs(this.touchPlayerVelocity.x)+Math.abs(this.touchPlayerVelocity.y)&&ig.game.chance(1)&&ig.game.sounds.cloth.play()):(this.O2181=-.05,this.touchPlayerVelocity.x*=.9,this.touchPlayerVelocity.y*=.9,.01>=Math.abs(this.touchPlayerVelocity.x)&&(this.touchPlayerVelocity.x=0),.01>=Math.abs(this.touchPlayerVelocity.y)&&(this.touchPlayerVelocity.y=0)));this.O4859+=60*this.O2181*
ig.system.tick;0>=this.O4859?this.O2181=this.O4859=0:1<=this.O4859&&(this.O4859=1,this.O2181=0);this.O9908=this.isTouched},draw:function(){for(var a=ig.game.O9925/4,b=0;b<this.parts.length;b++){var c=this.parts[b],d=this.pos.x,e=this.pos.y;d+=c.x*a;e+=c.y*a;var f=2==b||3==b,g=f?.03:.01,h=g;this.attributes.lightweight&&(g*=2);d+=ml.Misc.O4787(this.touchPlayerVelocity.x,150)*g;e+=ml.Misc.O4787(this.touchPlayerVelocity.y,150)*h;d+=ig.game.O7736*(f?.07:.025);c=c.angle;c*=2*(this.O4859+(this.attributes.orderly?
0:1));this.O8393.angle=c;this.O8393.draw(d-this.offset.x-ig.game._rscreen.x,e-this.offset.y-ig.game._rscreen.y,!0)}},check:function(){}})});ig.baked=!0;
ig.module("game.entities.immobile.lively").requires("impact.entity").defines(function(){window.EntityLively=ig.Entity.extend({size:{x:19,y:19},O2027:0,O8178:.1,O8035:null,O5962:4,type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,attributes:{},O4064:!1,O7859:!1,factor:{value:0,speed:0,speedStep:.001},factorOther:{value:0,speed:0,speedStep:.001},factorMax:.25,O7391:.02,O7809:.001,init:function(a,b,c){c.attributes&&(this.attributes=c.attributes);this.parent(a,b,c);
this.attributes||(this.attributes={});this.attributes.inFront&&(this.decorative=!0);this.addAnim("cell1",1,[0]);this.addAnim("cell2",1,[1]);this.O8393=this.anims.cell1;this.O8035=new ml.Timer;this.attributes||(this.attributes={});this.O1473()},O1473:function(){this.O7859=this.attributes.movingUpRight||this.attributes.movingDownRight||this.attributes.movingDownLeft||this.attributes.movingUpLeft;this.O4064=this.attributes.movingUp||this.attributes.movingDown||this.attributes.movingLeft||this.attributes.movingRight||
this.O7859;this.attributes.swinging?(this.factor.speed=.01,this.offset.y=2):this.attributes.waving?(this.factor.speed=.01,this.offset.y=-2):this.attributes.flailingLeft?(this.factor.speed=.01,this.offset.x=-2):this.attributes.flailingRight?(this.factor.speed=.01,this.offset.x=2):this.attributes.rotating||this.attributes.rotatingCounterClockwise||this.attributes.rotatingBoth?this.factor.speed=.01:this.attributes.randomizedSlow&&(this.factorMax=.25,this.O7391=.005,this.O7809=8E-4);this.O4064||(this.factor.value=
.5*Math.random(),this.factorOther.value=.5*Math.random())},O1407:function(){if(this.attributes.rotatingBoth)this.factor.value+=this.factor.speed,this.factor.value>=ig.game.fullAngle&&(this.factor.value=0),this.anims.cell1.angle=this.factor.value,this.anims.cell2.angle=-this.factor.value;else if(this.attributes.rotating||this.attributes.rotatingCounterClockwise)this.factor.value+=this.factor.speed,this.factor.value>=ig.game.fullAngle&&(this.factor.value=0),this.O8393.angle=this.attributes.rotating?
this.factor.value:-this.factor.value;else if(this.O4064||this.O7859)ig.game.O7456.O5687&&(this.O7859=this.O4064=!1);else{this.factor=this.O8979(this.factor);if(this.attributes.randomized||this.attributes.randomizedSlow||this.attributes.swarm)this.factorOther=this.O8979(this.factorOther),ig.game.chance(10)&&(this.factorOther=this.O8979(this.factorOther));this.attributes.swarm?(this.offset.x=10*this.factor.value,this.offset.y=10*this.factorOther.value):this.attributes.randomized||this.attributes.randomizedSlow?
(this.offset.x=10*this.factor.value,this.offset.y=10*this.factorOther.value):this.attributes.hovering?this.offset.y=10*this.factor.value:this.attributes.shaking?this.offset.x=10*this.factor.value:this.attributes.waving?(this.offset.x=10*this.factor.value,this.O8393.angle=-this.factor.value):this.attributes.swinging?(this.offset.x=10*this.factor.value,this.O8393.angle=this.factor.value):this.attributes.flailingLeft?(this.offset.y=10*this.factor.value,this.O8393.angle=this.factor.value):this.attributes.flailingRight?
(this.offset.y=10*this.factor.value,this.O8393.angle=-this.factor.value):this.attributes.rocking&&(this.O8393.angle=this.factor.value)}},O8979:function(a){a.speed+=a.speedStep;a.speed=a.speed.limit(-this.O7391,this.O7391);a.value+=a.speed;a.value=a.value.limit(-(4*this.factorMax),4*this.factorMax);a.value<=-this.factorMax?a.speedStep=this.O7809:a.value>=this.factorMax&&(a.speedStep=-this.O7809);return a},update:function(){!this.attributes.rotatingBoth&&this.O8035.delta()>=this.O8178&&ig.game.chance(this.O5962)&&
(this.O8035.reset(),this.O8393=this.O8393==this.anims.cell1?this.anims.cell2:this.anims.cell1);this.O8609();this.O1407()},O8609:function(){if(this.O9044()){var a=this.O2682();if(null!=a&&ig.game.chance(2)){this.O8376=!0;var b={x:ig.game.O4293(-10,10),y:ig.game.O4293(-10,10)};this.attributes.emitting&&ml.Misc.O9216(b);this.attributes.emittingUp?b={x:0,y:-Math.abs(b.y)}:this.attributes.emittingDown?b={x:0,y:2*Math.abs(b.y)}:this.attributes.emittingLeft?b={x:-Math.abs(b.x),y:0}:this.attributes.emittingRight&&
(b={x:Math.abs(b.x),y:0});ig.game.O9759(EntitySpot,this.pos.x,this.pos.y,{O7942:.75,O4405:80,O2329:2,fadingInc:2,attribute:a,vel:b,O6475:!1,animSheet:this.animSheet})}}},O2682:function(){var a=null;this.attributes.emitting?a="emitting":this.attributes.brightEmitting?a="brightEmitting":this.attributes.emittingUp?a="emittingUp":this.attributes.emittingDown?a="emittingDown":this.attributes.emittingLeft?a="emittingLeft":this.attributes.emittingRight&&(a="emittingRight");return a},O9044:function(){return ig.game.O5119.default&&
350>ig.game.O5119.default.length},draw:function(){if(!this.O4064||ig.game.O4296&&ig.game.O4873.O9498)if(this.attributes.rotatingBoth)this.anims.cell2.draw(this.pos.x-ig.game._rscreen.x+this.offset.x,this.pos.y-ig.game._rscreen.y-this.offset.y),this.parent();else if(this.attributes.swarm){if(this.O3428&&this.O8393){var a=this.pos.x-ig.game._rscreen.x,b=this.pos.y-ig.game._rscreen.y;this.O8393.draw(a-this.offset.x+this.factorOther.value,b-this.offset.y);this.O8393.draw(a+this.offset.x,b-this.offset.y-
10*this.factorOther.value);this.O8393.draw(a+this.offset.x+20*this.factor.value,b+this.offset.y)}}else this.attributes.foaming&&this.O9044()&&ig.game.chance(2)&&(a={x:ig.game.O4293(-10,10),y:ig.game.O4293(0,5)},ml.Misc.O9216(a),ig.game.O9759(EntitySpot,this.pos.x,this.pos.y,{opacity:100,O4405:100,O2329:1.5,fadingInc:2,vel:a,O6475:!1,animSheet:this.animSheet})),this.parent();else this.O5335()},O5335:function(){var a=this.pos.x-ig.game._rscreen.x+this.offset.x;var b=this.pos.y-ig.game._rscreen.y-this.offset.y;
var c=a;var d=b;var e=this.O7859?ig.game.O5698:ig.game.O9405;if(this.attributes.movingUp||this.attributes.movingUpLeft||this.attributes.movingUpRight)b-=e,d-=e-ig.game.O9925;if(this.attributes.movingDown||this.attributes.movingDownLeft||this.attributes.movingDownRight)b+=e-ig.game.O9925,d+=e;if(this.attributes.movingLeft||this.attributes.movingDownLeft||this.attributes.movingUpLeft)a-=e,c-=e-ig.game.O9925;if(this.attributes.movingRight||this.attributes.movingDownRight||this.attributes.movingUpRight)a+=
e-ig.game.O9925,c+=e;e=this.O7511();ig.system.context.save();ig.system.context.beginPath();ig.system.context.rect(e.x,e.y,e.width,e.height);ig.system.context.clip();this.O8393.draw(a,b);this.O8393.draw(c,d);this.O7859&&(this.O8393.draw(a+ig.game.O9925,b),this.O8393.draw(c-ig.game.O9925,d));ig.system.context.restore()},O7511:function(){var a={x:this.pos.x+this.offset.x-ig.game._rscreen.x,y:this.pos.y+this.offset.y-ig.game._rscreen.y,width:ig.game.O9925,height:ig.game.O9925};a.x*=ig.system.scale;a.y*=
ig.system.scale;a.width*=ig.system.scale;a.height*=ig.system.scale;a.x=Math.round(a.x);a.y=Math.round(a.y);return a},O2550:function(a){},check:function(){}})});ig.baked=!0;
ig.module("game.entities.immobile.viewable").requires("impact.entity").defines(function(){window.EntityViewable=ig.Entity.extend({size:{x:19,y:19},O2027:0,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,O6456:!1,O5193:!1,soundId:void 0,init:function(a,b,c){c.attributes&&(this.attributes=c.attributes);this.parent(a,b,c);this.addAnim("main",1,[0]);this.O8393=this.anims.main;this.attributes||(this.attributes={})},update:function(){this.O5193=this.O6456;(this.O6456=ml.Misc.O7862(this,
ig.game.O1257)&&ig.game.O1257&&1>=Math.abs(ig.game.O1257.vel.x))&&!this.O5193?ig.game.viewableDialog.open(this.pos.x,this.pos.y,this.animSheet,null,this.soundId,void 0,this.attributes):!this.O6456&&this.O5193&&ig.game.viewableDialog.close();ig.game.decorator.O7082(this)},draw:function(){this.parent()},O2550:function(a){this.parent(a)},check:function(a){}})});ig.baked=!0;
ig.module("game.entities.immobile.dynathing").requires("impact.entity","game.ui.speechdisplay").defines(function(){EntityDynathing=ig.Entity.extend({subEntities:{},frameData:{},maxCells:1,frame:0,frameMax:null,size:{x:29,y:29},O2027:0,type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,defaultPivot:{x:14.5,y:14.5},O1100:0,velMax:5,O9126:!1,O8950:!1,O5541:!1,O5581:10,O9374:!1,O9048:null,isBehind:!1,givenName:void 0,fullyOpaque:!0,isStack:!1,O9744:!1,O4529:!1,O3179:!1,
O2532:1,baseType:"DYNATHING",targetPos:{x:null,y:null},targetPosPrevious:{x:null,y:null},O6028:void 0,rgba:null,O4220:null,O8376:!0,O4870:!0,attributes:{},O4855:null,O5042:null,hasSpeech:!0,O8491:!0,emitsId:null,O1553:"default",O2563:"default",O5576:!1,O2892:null,canUseCrop:!0,O5125:!1,O8584:60,elapsedTime:0,targetFPS:null,lastProcessedFrame:-1,O8268:[],O5822:[],O2154:null,O9341:!1,grabCell:null,O4624:null,O3598:!1,O9749:50,O7503:null,init:function(a,b,c){c.attributes&&(this.attributes=c.attributes);
this.isWearablePlus=c.isWearablePlus;this.soundId=c.soundId;this.givenName=c.givenName;this.isWearablePlus||(this.emitsId=c.emitsId);this.O9744=c.O9744;this.O3598=!!c.O3598;this.O9367=c.O9367;this.O6028=c.O6028;this.O9744&&(this.O5581=1);this.isWearablePlus&&(this.attributes.actionable=!1);this.isStack=!this.O9744&&this.attributes&&(this.attributes.attachable||this.attributes.follows||this.attributes.closelyFollows);this.O9744&&this.attributes.startsOnTouch&&delete this.attributes.startsOnTouch;this.attributes.solid&&
this.O6190();this.attributes.inFront&&(this.decorative=!0);if(c.O9048){if(!c.img){this.kill();return}this.O9048=c.O9048;this.O9048.O2555=this;this.pos.x=a;this.pos.y=b;this.animSheet=new ml.AnimationSheet(null,this.size.x,this.size.y,c.img)}else this.parent(a,b,c);this.O9744&&this.attributes&&!this.attributes.nonFlipping&&(void 0!==c.O4529&&(this.O4529=c.O4529),void 0!==c.O3179&&(this.O3179=c.O3179),this.O7582());!this.O9367&&ig.game.O4873.O6714(this.pos)&&!this.isCreatorLivePreview&&(ig.game.O4296&&
(this.canUseCrop=!1),ig.game.O4223&&(this.O8491=!!this.O9744,this.hasSpeech=!1));this.O9744&&ig.game.O4223&&(this.hasSpeech=!1);this.O4855=new SpeechDisplay(this);this.O9374=!!this.O9048;a=c.text;this.maxCells=Math.floor(this.animSheet.image.width/this.size.x);this.O9341=ml.Misc.O7017(this.animSheet);for(b=1;b<=this.maxCells;b++)this.addAnim("e"+b,1,[b-1]),this.O9341&&this.O4388(b,this.animSheet);this.O9341&&(this.anims=this.animSheet=null);this.attributes||(this.attributes={});this.O9048?this.attributes.startsOnTouch&&
delete this.attributes.startsOnTouch:this.O6717?(this.O1100=ig.game.O7606.O9268(),this.attributes.startsOnTouch&&delete this.attributes.startsOnTouch):!this.O9744&&!c.O4000&&(this.O1100=ig.game.O4293(0,60));this.isCreatorLivePreview&&(this.attributes.startsOnTouch&&delete this.attributes.startsOnTouch,this.O1100=0);this.reset();this.O5576=!1;this.O6479();try{b={},ig.game.O7456.O6419&&(this.O8584=ig.game.O7456.O6419),this.frameData=ig.game.O5907.O3681(a,this.maxCells,b),this.O8950=b.O8950,this.O5541=
b.O5541,b.containsLight&&(this.O4220=1)}catch(d){ig.game.isLocal&&(console.log("A Dynamic guarded against this error:"),console.log(d)),this.frameData={"default":{}}}this.targetFPS=ig.game.O5907.O2324;this.frameMax=this.O9367&&!this.O7213?ig.game.O5907.O9809*this.targetFPS:this.O6717?ig.game.O7606.O3373*this.targetFPS:ig.game.O5907.O5469*this.targetFPS;this.O5541&&(this.id=(c.O5682?c.O5682.x+"_"+c.O5682.y+"_":"")+ig.game.O4293(1E6,1E7));this.attributes.startsOnTouch&&!this.O9744&&!this.isStack&&(this.type=
ig.Entity.TYPE.B,this.O7852=ig.Entity.TYPE.A);this.attributes.behind&&!this.isStack&&(this.isBehind=!0)},O6479:function(){this.pos.x-=(this.size.x-ig.game.O9925)/2;this.pos.y-=this.size.y-ig.game.O9925},O4388:function(a,b){var c=document.createElement("canvas"),d="e"+a,e=ig.system.scale;c.width=this.size.x*e;c.height=this.size.y*e;c.getContext("2d").drawImage(b.image.data,(a-1)*this.size.x*e,0,this.size.x*e,this.size.y*e,0,0,this.size.x*e,this.size.y*e);e=new Image(this.size.x*e,this.size.y*e);e.src=
c.toDataURL("image/png");c=new ml.Image(null,null,null,e);this.O8268[d]=new ml.AnimationSheet(null,this.size.x,this.size.y,c);this.O5822[d]=new ml.Animation(this.O8268[d],1,[0],null,d)},reset:function(a){this.elapsedTime=this.frame=0;this.lastProcessedFrame=-1;this.O1863();a||(this.O2563=this.O1553="default",this.O5576=!0);for(a=1;a<=this.maxCells;a++)this.subEntities["e"+a]={pos:{x:0,y:0},targetPos:{x:null,y:null},O5877:{x:null,y:null},vel:{x:0,y:0},accel:{x:0,y:0},text:null,font:"whiteSmallFont",
say:null,align:ig.Font.ALIGN.CENTER,opacity:0,O8891:null,O1451:null,rotation:0,O2538:null,O4732:null,flip:{x:!1,y:!1},zIndex:a,pivot:ig.game.O4507(this.defaultPivot),cropRect:null,rgb:[0,0,0],targetRgb:[null,null,null],rgbStep:[null,null,null],bright:!1};this.attributes.startsOnTouch&&(this.O9126=!0)},O8015:function(){this.O9744&&this.O4529!=this.O3179&&!this.attributes.nonFlipping&&(this.O2532=(this.O3179=this.O4529)?-1:1,this.reset(),this.update())},O7582:function(){this.O2532=this.O4529?-1:1},
O9186:function(a){this.attributes.follows||this.attributes.closelyFollows?this.targetPos=ig.game.O4507(a):this.attributes.attachable&&(this.pos=ig.game.O4507(a))},O5889:function(){if(this.O9744&&(null!=this.targetPos.x||null!=this.targetPos.y)){null==this.O7503&&(this.O7503=125+ml.Misc.distort(25));var a=ig.system.tick*this.O7503;this.attributes.follows&&(a*=.75);if(null!=this.targetPos.x){var b=a,c=Math.abs(this.pos.x-this.targetPos.x);5>=c?b*=.5:76<=c&&(b*=2);this.pos.x<this.targetPos.x?(this.pos.x+=
b,this.pos.x>=this.targetPos.x&&(this.pos.x=this.targetPos.x,this.targetPos.x=null)):this.pos.x>this.targetPos.x&&(this.pos.x-=b,this.pos.x<=this.targetPos.x&&(this.pos.x=this.targetPos.x,this.targetPos.x=null))}null!=this.targetPos.y&&(this.attributes.closelyFollows&&(a*=1.5),b=Math.abs(this.pos.y-this.targetPos.y),5>=b?this.pos.y>this.targetPos.y&&(a*=.5):76<=b&&(a*=2),this.pos.y<this.targetPos.y?(this.pos.y+=a,this.pos.y>=this.targetPos.y&&(this.pos.y=this.targetPos.y,this.targetPos.y=null)):this.pos.y>
this.targetPos.y&&(this.pos.y-=a,this.pos.y<=this.targetPos.y&&(this.pos.y=this.targetPos.y,this.targetPos.y=null)));if(null==this.targetPos.x||null==this.targetPos.y)this.O7503=null}},update:function(a){if(!this._killed&&!this.O5125){this.O4923(a);this.O8015();this.O5889();if(this.isStack){this.O5193=this.O6456;this.O6456=ml.Misc.O7862(this,ig.game.O1257);var b=this.attributes.attachable?"attach":"be followed";this.attributes.replaces&&(b="change to");this.O6456&&!this.O5193?ig.game.actioninfo.open(this,
this.pos.x,this.pos.y+9,b,ig.game.attachmentManager.O9284(this.thingTypeId)):!this.O6456&&this.O5193&&ig.game.actioninfo.close(this)}if(0!=this.frame&&0<this.O1100)this.O1100--;else if(0==this.frame||!this.O9126){this.O9126||(this.elapsedTime+=ig.system.tick);for(var c=Math.floor(this.elapsedTime*this.targetFPS),d=c-this.frame,e=!1,f=this.lastProcessedFrame+1;f<=c;f++){for(b=1;b<=ig.game.O5907.O7134;b++)if(this.frameData[this.O1553]){var g=this.frameData[this.O1553]["f"+f+"_"+b];if(g){if(g.restart){this.O1863();
if(this.O9374){this.kill();return}b=!(this.O1553==="action"||this.O1553==="randomize"||this.O1553==="private randomize"||this.O1553==="moved"||this.O1553.indexOf("every ")===0);this.reset(b);this.processFrame(0);e=!0;break}for(var h=g.spreadOverFrames,k=1;k<=this.maxCells;k++){var l="e"+k;g[l]&&this.O2983(this.subEntities[l],g[l],h,k)}}}if(e)break}if(e)return;this.frame=this.lastProcessedFrame=c;if(d>0)for(k=1;k<=this.maxCells;k++)this.O7015(this.subEntities["e"+k],d);for(b=1;b<=ig.game.O5907.O7134;b++)if(this.frameData[this.O1553]&&
(g=this.frameData[this.O1553]["f"+this.frame+"_"+b]))if(g.playSound){if(0<this.O5581||ig.game.chance(15))g=null,1>=this.O5581&&!this.O9744&&(g=.15),ig.game.sounds.playIncludedSound(this,null,g)&&!this.O7213&&this.O5581--}else if(g.say)this.O3703(g.say);else if(g.remove&&this.O9744&&a&&a==ig.game.O1257){ig.game.attachmentManager.O3578(ig.game.O1257,ig.game.attachmentManager.slots.WEARABLE,!0);return}}this.O8054();this.O4855.update({x:this.pos.x+10,y:this.pos.y})}this.attributes.solid&&this.parent();
ig.game.decorator.O7715(this,this)},O5909:function(a){if(a&&this.grabCell){var b=this.subEntities["e"+this.grabCell];a.pos.x=this.pos.x+b.pos.x+b.pivot.x;a.pos.y=this.pos.y+b.pos.y+b.pivot.y;a.O8393&&(a.O8393.angle=b.rotation)}},O4923:function(a){if(a&&a.vel){var b="default";this.O5576?"action"==this.O1553?b="action":a.isSitting?b="sit":a.isLying?b="lie":a.O9165==a.O4583.CLIMBING?b="climb":a.O9165==a.O4583.SWIMMING?b="swim":0>a.vel.y?b=a.attachments.m?"mounted rise":"rise":0<a.vel.y?b=a.attachments.m?
"mounted fall":"fall":0!=a.vel.x?b="move":a.anims&&a.O8393==a.anims.creating&&(b="create"):0!=a.vel.x||0!=a.vel.y?(this.O5576=!0,0>a.vel.y?b=a.attachments.m?"mounted rise":"rise":0<a.vel.y?b=a.attachments.m?"mounted fall":"fall":0!=a.vel.x?b="move":b="default"):b="start"}else if(this.O7213?"randomize"!=this.O1553&&"private randomize"!=this.O1553&&(this.multithingPrivate&&this.multithingRandomize&&this.frameData["private randomize"]?(b="private randomize",this.multithingRandomize=!1):this.multithingPrivate&&
this.frameData["private"]?(b="private",this.multithingRandomize=!1):this.multithingRandomize&&this.frameData.randomize?(b="randomize",this.multithingRandomize=!1):this.multithingStatePositiveNegative&&this.frameData[this.multithingStatePositiveNegative]?b=this.multithingStatePositiveNegative:this.multithingStateEvenOdd&&this.frameData[this.multithingStateEvenOdd]?b=this.multithingStateEvenOdd:this.multithingMoved&&this.frameData.moved?(b="moved",this.multithingMoved=!1):void 0!==this.multithingState&&
(b="state "+this.multithingState)):this.O3598&&ig.game.playerDialog&&ig.game.playerDialog.O3191&&(b=ig.game.playerDialog.O3191.toLowerCase(),a={visited:"album"},b="profile "+(a[b]?a[b]:b)),!this.detectedMode){a=ig.game.O4086.getTimeSinceMidnightObjectRounded();var c=this.O2154;if(null!==a.hours&&c&&"default"==this.O1553){var d=this.frameData;a.hours!=c.hours&&d["every day"]&&0==a.hours?b="every day":a.hours!=c.hours&&d["every 12 hours"]&&0==a.hours%12?b="every 12 hours":a.hours!=c.hours&&d["every 6 hours"]&&
0==a.hours%6?b="every 6 hours":a.hours!=c.hours&&d["every 3 hours"]&&0==a.hours%3?b="every 3 hours":a.hours!=c.hours&&d["every hour"]?b="every hour":a.minutes!=c.minutes&&(0==a.minutes%30&&d["every 30 minutes"]?b="every 30 minutes":0==a.minutes%15&&d["every 15 minutes"]?b="every 15 minutes":0==a.minutes%10&&d["every 10 minutes"]?b="every 10 minutes":0==a.minutes%5&&d["every 5 minutes"]?b="every 5 minutes":0==a.minutes%4&&d["every 4 minutes"]?b="every 4 minutes":0==a.minutes%3&&d["every 3 minutes"]?
b="every 3 minutes":0==a.minutes%2&&d["every 2 minutes"]?b="every 2 minutes":d["every minute"]&&(b="every minute"))}this.O2154=ig.game.O4507(a)}b&&this.O7444(b)},O7444:function(a){a!=this.O1553&&(this.O1553=this.frameData[a]?a:"default",this.O1553!=this.O2563&&(this.reset(!0),this.processFrame(0),this.O2563=this.O1553))},O5432:function(a){this.attributes.actionable&&(!this.O2892||.5<=this.O2892.delta())&&(this.O2892=new ml.Timer,this.emitsId||ig.game.sounds.playIncludedSound(this),this.reset(),this.O7444("action"),
this.update(),a&&(ig.game.O2116.O7884(ig.game.O1257,"uses",this.givenName),ig.game.O7836.O2982()))},O8054:function(){this.rgba=null;for(var a=[],b=1;b<=this.maxCells;b++){var c=this.subEntities["e"+b];c.rgb&&(0!=c.rgb[0]||0!=c.rgb[1]||0!=c.rgb[2])&&a.push([c.rgb[0],c.rgb[1],c.rgb[2],c.opacity])}1==a.length?this.rgba=a[0]:2<=a.length&&(this.rgba=ig.game.O8894.O7524(a));if(this.rgba){for(b=0;3>b;b++)this.rgba[b]=Math.round(this.rgba[b]);this.rgba[3]=ig.game.O8894.O6081(this.rgba[3],0,1)}this.rgba&&
(0==this.rgba[3]||0==this.rgba[0]&&0==this.rgba[1]&&0==this.rgba[2])&&(this.rgba=null)},O1863:function(a){if(this.O5541){this.grabCell=null;var b=ig.game.O5119.player;if(b)for(var c=0;c<b.length;c++){var d=b[c];d.dynathingWhichGrabbedMe&&d.dynathingWhichGrabbedMe.id==this.id&&(d.O8393&&d.O2966(),d.dynathingWhichGrabbedMe=null,a&&(!this.O4624||1<=this.O4624.delta()))&&(this.O4624=new ml.Timer,ig.game.sounds.shortWhoosh.play())}}},O7827:function(){for(var a=1;a<=ig.game.O5907.O7134;a++)if(this.frameData[this.O1553]){var b=
this.frameData[this.O1553]["f"+this.frame+"_"+a],c=!1,d;for(d in this.frameData[this.O1553])if(this.frameData[this.O1553].hasOwnProperty(d)){var e=this.frameData[this.O1553][d];if(e&&e.restart){c=!0;break}}if(b&&b.restart||this.frame>=this.frameMax&&!c)this.O1863(),this.O9374?this.kill():(b=!(this.O1553==="action"||this.O1553==="randomize"||this.O1553==="private randomize"||this.O1553==="moved"||this.O1553.indexOf("every ")===0),this.reset(b),this.processFrame(0)),this.isCreatorLivePreview&&ig.game.O1795&&
ig.game.painter.O2242()}},O8475:function(){},processFrame:function(a){for(var b=1;b<=ig.game.O5907.O7134;b++)if(this.frameData[this.O1553]){var c=this.frameData[this.O1553]["f"+a+"_"+b];if(c)for(var d=c.spreadOverFrames,e=1;e<=this.maxCells;e++){var f="e"+e;c[f]&&this.O2983(this.subEntities[f],c[f],d,e)}}this.lastProcessedFrame=a},kill:function(){this.O9048&&this.O9048.O6693(this.givenName,this.attributes&&this.attributes.replaces,this.O6028);this.parent()},O7015:function(a,b){b||=1;if(null!=a.O8891){var c=
a.O1451*b;a.opacity>a.O8891?(a.opacity-=c,a.opacity<=a.O8891&&this.O3223(a)):a.opacity<a.O8891&&(a.opacity+=c,a.opacity>=a.O8891&&this.O3223(a))}null!=a.targetPos.x&&(c=a.O5877.x*b,a.pos.x>a.targetPos.x?(a.pos.x-=c,a.pos.x<=a.targetPos.x&&this.O8988(a)):a.pos.x<a.targetPos.x&&(a.pos.x+=c,a.pos.x>=a.targetPos.x&&this.O8988(a)));null!=a.targetPos.y&&(c=a.O5877.y*b,a.pos.y>a.targetPos.y?(a.pos.y-=c,a.pos.y<=a.targetPos.y&&this.O152(a)):a.pos.y<a.targetPos.y&&(a.pos.y+=c,a.pos.y>=a.targetPos.y&&this.O152(a)));
null!=a.O2538&&(c=a.O4732*b,a.rotation>a.O2538?(a.rotation-=c,a.rotation<=a.O2538&&this.O2745(a)):a.rotation<a.O2538&&(a.rotation+=c,a.rotation>=a.O2538&&this.O2745(a)));for(c=0;c<a.rgb.length;c++)if(null!=a.targetRgb[c]){var d=a.rgbStep[c]*b;a.rgb[c]>a.targetRgb[c]?(a.rgb[c]-=d,a.rgb[c]<=a.targetRgb[c]&&(a.rgb=ig.game.O4507(a.targetRgb),a.targetRgb=[null,null,null],a.rgbStep=[null,null,null])):a.rgb[c]<a.targetRgb[c]&&(a.rgb[c]+=d,a.rgb[c]>=a.targetRgb[c]&&(a.rgb=ig.game.O4507(a.targetRgb),a.targetRgb=
[null,null,null],a.rgbStep=[null,null,null]))}a.accel.x?(a.vel.x+=a.accel.x*b,a.pos.x+=a.vel.x*b,Math.abs(a.vel.x)>this.velMax&&(a.vel.x=parseInt(a.vel.x).limit(-this.velMax,this.velMax))):a.accel.y&&(a.vel.y+=a.accel.y*b,a.pos.y+=a.vel.y*b,Math.abs(a.vel.y)>this.velMax&&(a.vel.y=parseInt(a.vel.y).limit(-this.velMax,this.velMax)));500<Math.abs(a.pos.x)&&(a.pos.x=a.pos.x.limit(-500,500));500<Math.abs(a.pos.y)&&(a.pos.y=a.pos.y.limit(-500,500));c=this.O1940(a);null!==c&&(a.rotation=c)},O3223:function(a){a.opacity=
a.O8891;a.O8891=null;a.O1451=null},O2745:function(a){a.rotation=a.O2538;a.O2538=null;a.O4732=null},O8988:function(a){a.pos.x=a.targetPos.x;a.targetPos.x=null;a.O5877.x=null},O152:function(a){a.pos.y=a.targetPos.y;a.targetPos.y=null;a.O5877.y=null},O2983:function(a,b,c,d){var e=ig.game.O5907.otherMax;if(void 0!=c&&0<c)void 0!=b.opacity&&(a.O8891=b.opacity,a.O1451=Math.abs(a.O8891-a.opacity)/c),void 0!=b.left?(a.targetPos.x=a.pos.x-b.left*this.O2532,a.O5877.x=Math.abs(a.targetPos.x-a.pos.x)/c):void 0!=
b.right&&(a.targetPos.x=a.pos.x+b.right*this.O2532,a.O5877.x=Math.abs(a.targetPos.x-a.pos.x)/c),void 0!=b.up?(a.targetPos.y=a.pos.y-b.up,a.O5877.y=Math.abs(a.targetPos.y-a.pos.y)/c):void 0!=b.down&&(a.targetPos.y=a.pos.y+b.down,a.O5877.y=Math.abs(a.targetPos.y-a.pos.y)/c),void 0!=b.position&&b.position.length>=2&&(a.targetPos.x=b.position[0]*this.O2532,a.O5877.x=Math.abs(a.targetPos.x-a.pos.x)/c,a.targetPos.y=b.position[1],a.O5877.y=Math.abs(a.targetPos.y-a.pos.y)/c),void 0!=b.rotate?(a.O2538=a.rotation+
b.rotate*this.O2532,a.O4732=Math.abs(a.O2538-a.rotation)/c):void 0!=b.rotation&&(a.O2538=b.rotation*this.O2532,a.O4732=Math.abs(a.O2538-a.rotation)/c),void 0!=b.light&&(a.targetRgb=ig.game.O4507(b.light),a.rgbStep=[Math.abs(a.targetRgb[0]-a.rgb[0])/c,Math.abs(a.targetRgb[1]-a.rgb[1])/c,Math.abs(a.targetRgb[2]-a.rgb[2])/c]);else{void 0!=b.opacity&&(a.opacity=b.opacity);void 0!=b.rotate?(null==a.rotation&&(a.rotation=0),a.rotation+=b.rotate*this.O2532):void 0!=b.rotation&&(a.rotation=b.rotation*this.O2532);
void 0!=b.right&&(a.pos.x+=b.right*this.O2532);void 0!=b.left&&(a.pos.x-=b.left*this.O2532);void 0!=b.up&&(a.pos.y-=b.up);void 0!=b.down&&(a.pos.y+=b.down);void 0!=b.position&&b.position.length>=2&&(a.pos.x=b.position[0]*this.O2532,a.pos.y=b.position[1]);void 0!=b.bright&&(a.bright=!0);void 0!=b.unbright&&(a.bright=!1);this.attributes.startsOnTouch&&!this.O9367&&(void 0!=b.grab&&(this.grabCell=d),void 0!=b.ungrab&&this.grabCell==d&&this.O1863(!0));void 0!=b.crop&&this.canUseCrop&&(a.cropRect={x:b.crop[0],
y:b.crop[1],width:b.crop[2],height:b.crop[3]});if(!ig.game.settings.photosensitiveGuard){if(b.shape||b.circle)if(c=(this.O9744||this.O3598||ig.game.O4296&&!this.O9367)&&!this.isCreatorLivePreview,d=void 0==b.pivot||this.O2428(b.pivot[0])&&this.O2428(b.pivot[1]),!c||d)void 0==b.shape||c&&!this.O1760(b.shape)||(a.polygonPoints=b.shape),void 0==b.circle||c&&!this.O4358(b.circle)||(a.circle={position:{x:b.circle[0],y:b.circle[1]},radius:Math.abs(b.circle[2])});void 0!=b.fill&&(a.fillMode=this.O3598?"lighter":
b.fill[0],a.fillRgba="rgba("+b.fill[1]+","+b.fill[2]+","+b.fill[3]+","+b.fill[4]+")");void 0!=b.outline&&(a.outlineWidth=b.outline[0],a.outlineRgba="rgba("+b.outline[1]+","+b.outline[2]+","+b.outline[3]+","+b.outline[4]+")");if(void 0!=b.gradient){c=0;if(7==b.gradient.length)a.O9947=null,a.radialGradient={center:{x:b.gradient[c++],y:b.gradient[c++]},radius:b.gradient[c++]};else if(10==b.gradient.length)a.O9947=null,a.radialGradient={center:{x:b.gradient[c++],y:b.gradient[c++]},radius:b.gradient[c++],
center2:{x:b.gradient[c++],y:b.gradient[c++]},radius2:b.gradient[c++]};else for(a.radialGradient=null,a.O9947=[],d=0;4>d;d++)a.O9947[d]=b.gradient[d],c++;a.fillRgbaEnd="rgba("+b.gradient[c++]+","+b.gradient[c++]+","+b.gradient[c++]+","+b.gradient[c++]+")"}}void 0!==a.pos.x&&null!==a.pos.x&&(a.pos.x=a.pos.x.limit(-e,e));void 0!==a.pos.y&&null!==a.pos.y&&(a.pos.y=a.pos.y.limit(-e,e));void 0!=b.light&&(a.rgb=ig.game.O4507(b.light));(b.text||""===b.text)&&this.O8491&&(a.text=ig.game.strings.replaceAll(b.text,
ig.game.O5907.O1274,"\n"),a.text=ig.game.strings.O7686(a.text,this.O9744?50:300));b.font&&(a.font=b.font);void 0!==b.align&&(a.align=b.align)}void 0!=b.pivot&&(a.pivot.x=b.pivot[0],a.pivot.y=b.pivot[1]);void 0!=b.accelerateLeft?a.accel.x=-b.accelerateLeft*this.O2532:void 0!=b.accelerateRight&&(a.accel.x=b.accelerateRight*this.O2532);void 0!=b.accelerateUp?a.accel.y=-b.accelerateUp:void 0!=b.accelerateDown&&(a.accel.y=b.accelerateDown);void 0!=b.zIndex&&(a.zIndex=b.zIndex);void 0!=b.flipHorizontal&&
(a.flip.x=!a.flip.x);void 0!=b.flipVertical&&(a.flip.y=!a.flip.y);void 0!=b.secondsAngle?a.secondsAngle=!0:void 0!=b.secondsAngleInSteps?a.secondsAngleInSteps=!0:void 0!=b.minutesAngle?a.minutesAngle=!0:void 0!=b.minutesAngleInSteps?a.minutesAngleInSteps=!0:void 0!=b.hoursAngle?a.hoursAngle=!0:void 0!=b.hoursAngleInSteps&&(a.hoursAngleInSteps=!0)},draw:function(a,b,c){if(!this.O5125){this.O8015();a=this.pos.x-ig.game._rscreen.x;var d=this.pos.y-ig.game._rscreen.y;if(this.O8950)for(var e=1;e<=this.maxCells;++e)for(var f=
1;f<=this.maxCells;++f){var g=this.subEntities["e"+f];g.zIndex==e&&this.O5646(a,d,f,g,b,c)}else for(f=1;f<=this.maxCells;++f)this.O5646(a,d,f,this.subEntities["e"+f],b,c);this.O7827()}},O2848:function(){this.O5125||this.O4855.draw()},O5646:function(a,b,c,d,e,f){if(d&&0<d.opacity&&(!d.cropRect||!ig.game.O7456.O9760())&&(this.O3598&&(d.bright=!0,.8<d.opacity&&(d.opacity=.8)),d.bright&&ml.Misc.O5847("lighter"),c=this.O9341?this.O5822["e"+c]:this.anims["e"+c])){c.flip.x=this.O4529&&!this.attributes.nonFlipping?
!d.flip.x:d.flip.x;c.flip.y=d.flip.y;c.angle=d.rotation;if(c.flip.x){var g=this.size.x/2;d.pivot.x<g?c.pivot.x=this.size.x-d.pivot.x:d.pivot.x>g&&(c.pivot.x=Math.abs(d.pivot.x-this.size.x));c.pivot.y=d.pivot.y;d.pivot.x>this.size.x&&(c.pivot.x*=-1)}else c.pivot.x=d.pivot.x,c.pivot.y=d.pivot.y;c.alpha=d.opacity;a=a+d.pos.x-this.offset.x;b=b+d.pos.y-this.offset.y;f&&(a+=f.x*(c.flip.x?-1:1),b+=f.y);d.cropRect&&(f=this.O7511(d.cropRect),ig.system.context.save(),ig.system.context.beginPath(),ig.system.context.rect(f.x,
f.y,f.width,f.height),ig.system.context.clip());d.polygonPoints&&this.O8550(c,d);d.circle&&this.O5519(c,d);c.draw(a,b);d.text&&!e&&(ig.system.context.globalAlpha=.8*d.opacity,ig.game[d.font].draw(this.O5979(d.text),a+c.pivot.x,b+Math.round(c.pivot.y-2.5),d.align),ig.system.context.globalAlpha=1);d.cropRect&&ig.system.context.restore();d.bright&&ml.Misc.O3715();ig.game.O7606&&ig.game.O7606.isRunning&&"dynamicOrigin"==ig.game.O7606.O6567&&this.O5976(a,b,c.pivot.x,c.pivot.y,c.angle)}},O8550:function(a,
b){var c=this.O9787(a,b);ig.system.context.fillStyle=this.O4904(a,b);ig.system.context.beginPath();ig.system.context.moveTo(c[0].x,c[0].y);for(a=1;a<c.length;a++)ig.system.context.lineTo(c[a].x,c[a].y);ig.system.context.closePath();b.fillMode&&ml.Misc.O5847(b.fillMode);ig.system.context.fill();this.O7421(b);b.fillMode&&ml.Misc.O3715()},O5519:function(a,b){ig.system.context.fillStyle=this.O4904(a,b);ig.system.context.beginPath();a=this.O8568(a,b,{x:b.circle.position.x,y:b.circle.position.y});ig.system.context.arc(a.x,
a.y,b.circle.radius*ig.system.scale,0,2*Math.PI);ig.system.context.closePath();b.fillMode&&ml.Misc.O5847(b.fillMode);ig.system.context.fill();this.O7421(b);b.fillMode&&ml.Misc.O3715()},O7421:function(a){a.outlineWidth&&(ig.system.context.strokeStyle=a.outlineRgba,ig.system.context.lineWidth=a.outlineWidth*ig.system.scale,ig.system.context.stroke())},O9787:function(a,b){for(var c=[],d=0,e=0;e<b.polygonPoints.length-1;e+=2)c[d]=this.O8568(a,b,{x:b.polygonPoints[e],y:b.polygonPoints[e+1]}),d++;return c},
O4904:function(a,b){var c=b.fillRgba&&typeof b.fillRgba==="string"&&b.fillRgba.indexOf("undefined")===-1&&b.fillRgba.indexOf("NaN")===-1&&b.fillRgba.indexOf("null")===-1?b.fillRgba:"rgba(255,255,255,1)";if(b.O9947||b.radialGradient){if(b.O9947){var d=this.O8568(a,b,{x:b.O9947[0],y:b.O9947[1]});var e=this.O8568(a,b,{x:b.O9947[2],y:b.O9947[3]});d=ig.system.context.createLinearGradient(d.x,d.y,e.x,e.y)}else d=this.O8568(a,b,{x:b.radialGradient.center.x,y:b.radialGradient.center.y}),b.radialGradient.center2?
(e=this.O8568(a,b,{x:b.radialGradient.center2.x,y:b.radialGradient.center2.y}),d=ig.system.context.createRadialGradient(d.x,d.y,b.radialGradient.radius*ig.system.scale,e.x,e.y,b.radialGradient.radius2*ig.system.scale)):d=ig.system.context.createRadialGradient(d.x,d.y,0,d.x,d.y,b.radialGradient.radius*ig.system.scale);d.addColorStop(0,c);d.addColorStop(1,b.fillRgbaEnd);c=d}return c},O8568:function(a,b,c){0!=a.angle&&(c=this.O9789(c,a.pivot,a.angle));c.x=(this.pos.x+this.offset.x-ig.game._rscreen.x+
b.pos.x+c.x)*ig.system.scale;c.y=(this.pos.y+this.offset.y-ig.game._rscreen.y+b.pos.y+c.y)*ig.system.scale;return c},O9789:function(a,b,c){var d=Math.cos(-c);c=Math.sin(-c);return{x:d*(a.x-b.x)+c*(a.y-b.y)+b.x,y:d*(a.y-b.y)-c*(a.x-b.x)+b.y}},O5976:function(a,b,c,d,e){0!=e&&(b=this.O1566(a+c-15,b+d-15,a,b,-e),a=b.x,b=b.y);c=this.pos.x-this.offset.x-ig.game._rscreen.x+this.size.x/2;d=this.pos.y-this.offset.y-ig.game._rscreen.y+this.size.y/2+4;a+=this.size.x/2;b+=this.size.y/2;a*=ig.system.scale;b*=
ig.system.scale;c*=ig.system.scale;d*=ig.system.scale;e=Math.abs(c-a)+Math.abs(d-b);if(e>=5*ig.system.scale){var f=ig.system.context;f.save();f.strokeStyle="rgba(255, 255, 255, 1)";ig.system.context.lineWidth=ig.system.scale;f.setLineDash([5*ig.system.scale,5*ig.system.scale]);f.shadowColor="rgba(0, 0, 0, 0.5)";f.shadowOffsetY=ig.system.scale;f.beginPath();f.moveTo(c,d);f.lineTo(a,b);f.stroke();e>=8*ig.system.scale&&this.O9208(c,d,a,b,3*ig.system.scale);f.restore()}},O9208:function(a,b,c,d,e){context=
ig.system.context;context.fillStyle="rgba(255, 255, 255, 1)";var f=c,g=d;context.beginPath();a=Math.atan2(d-b,c-a);f-=e*Math.cos(a);g-=e*Math.sin(a);b=e*Math.cos(a)+f;c=e*Math.sin(a)+g;context.moveTo(b,c);a+=1/3*2*Math.PI;b=e*Math.cos(a)+f;c=e*Math.sin(a)+g;context.lineTo(b,c);a+=1/3*2*Math.PI;b=e*Math.cos(a)+f;c=e*Math.sin(a)+g;context.lineTo(b,c);context.closePath();context.fill()},O1566:function(a,b,c,d,e){var f=Math.cos(e);e=Math.sin(e);return{x:f*(c-a)+e*(d-b)+a,y:f*(d-b)-e*(c-a)+b}},O2321:function(a){ml.Misc.O5090(a)||
(a=0);a=ml.Misc.O9024(a,-this.maxPos,this.maxPos);return(this.pos.y+a-this.offset.y-ig.game._rscreen.y+(this.attributes.follows?4:9.5))*ig.system.scale},O1940:function(a){var b=null;if(null!==ig.game.O4086.timeSinceMidnightObject.hours){var c=ig.game.O4086.timeSinceMidnightObject.hours,d=ig.game.O4086.timeSinceMidnightObject.minutes,e=ig.game.O4086.timeSinceMidnightObject.seconds;if(a.secondsAngle||a.secondsAngleInSteps)a.secondsAngleInSteps&&(e=Math.floor(e)),b=this.O2524(e/60*360);else if(a.minutesAngle||
a.minutesAngleInSteps)a.minutesAngleInSteps&&(d=Math.floor(d)),b=this.O2524(d/60*360);else if(a.hoursAngle||a.hoursAngleInSteps)a.hoursAngleInSteps&&(c=Math.floor(c)),b=this.O2524(c/12*360);b&&(a.flip.x&&(b*=-1),a.flip.y&&(b*=-1))}return b},O2524:function(a){return Math.PI/180*a},O3683:function(a){return 180/Math.PI*a},O3703:function(a){this.O8491&&(a=this.O5979(a),ig.system.context.globalAlpha=.8,this.O9069()||this.O4855.O4505(a,null,!0),ig.system.context.globalAlpha=1)},O5979:function(a){if(0<=
a.indexOf("[time]")){var b=new Date(ig.game.O4086.milliseconds);b=ig.game.strings.O3776(b.getUTCHours())+":"+ig.game.strings.O3776(b.getUTCMinutes());a=ig.game.strings.replaceAll(a,"[time]",b)}0<=a.indexOf("[date]")&&(b=ig.game.strings.O7882(new Date(ig.game.O4086.milliseconds)),a=ig.game.strings.replaceAll(a,"[date]",b));0<=a.indexOf("[people]")&&(b=0,ig.game.O5119&&ig.game.O5119.player&&(b=ig.game.O5119.player.length),a=ig.game.strings.replaceAll(a,"[people]",String(b)));0<=a.indexOf("[center distance]")&&
(b=ig.game.O4873.O9593(this.pos),a=ig.game.strings.replaceAll(a,"[center distance]",b));0<=a.indexOf("[state]")&&(b=void 0!==this.multithingState?this.multithingState:"",a=ig.game.strings.replaceAll(a,"[state]",b));this.O9367&&ig.game.holderDialog&&ig.game.holderDialog.isOpen&&(0<=a.indexOf("[holder page]")&&(a=ig.game.strings.replaceAll(a,"[holder page]",ig.game.holderDialog.O8753+1)),0<=a.indexOf("[holder page count]")&&(b=ig.game.holderDialog.items?ig.game.holderDialog.items.length-1:1,1>b&&(b=
1),a=ig.game.strings.replaceAll(a,"[holder page count]",b)));if(0<=a.indexOf("[name]")&&ig.game.O5119.player){b="";if(this.O9367&&ig.game.O1257)b=ig.game.O1257.screenName;else if(this.O9744&&this.parentScreenName)b=this.parentScreenName;else{var c;if(c=!this.O5042||ig.game.chance(10)?ml.Misc.O2368(this):this.O5042)this.O5042=c,b=c.screenName}a=ig.game.strings.replaceAll(a,"[name]",b)}return a},O9069:function(){var a=!1,b=this.O4855.O5805();b&&!b.moving&&(a=!0);return a},O7511:function(a){a={x:this.pos.x+
this.offset.x-ig.game._rscreen.x+a.x,y:this.pos.y+this.offset.y-ig.game._rscreen.y+a.y,width:a.width,height:a.height};a.x*=ig.system.scale;a.y*=ig.system.scale;a.width*=ig.system.scale;a.height*=ig.system.scale;a.x=Math.round(a.x);a.y=Math.round(a.y);return a},check:function(a){this.O9126&&a instanceof EntityPlayer&&25<=Math.abs(a.vel.x)+Math.abs(a.vel.y)&&(ig.game.O2116.O7945(this.pos,"sees","activates",this.givenName),ig.game.O2116.O7884(a,"activates",this.givenName),this.O9126=!1,a.forceSend=!0,
this.grabAllNearbyPlayersIfNeeded())},grabAllNearbyPlayersIfNeeded:function(){if(this.grabCell){var a=ig.game.O5119.player;if(a)for(var b=0;b<a.length;b++){var c=a[b];this.O2144(c)<=30&&(c.dynathingWhichGrabbedMe=this,c.vel={x:0,y:0},c.accel={x:0,y:0},!this.O4624||this.O4624.delta()>=1)&&(this.O4624=new ml.Timer,ig.game.sounds.shortWhoosh.play())}}},O2534:function(a,b){this.parent(a,b)},O2550:function(a){this.attributes.solid&&this.parent(a)},O6190:function(){this.offset.x=(this.size.x-ig.game.O9925)/
2;this.offset.y=this.size.y-ig.game.O9925;this.pos.x+=this.offset.x;this.pos.y+=this.offset.y;this.size={x:ig.game.O9925,y:ig.game.O9925};this.collides=ig.Entity.COLLIDES.FIXED},O1760:function(a){for(var b=!0,c=0;c<a.length;c++)if(Math.abs(a[c])>this.O9749){b=!1;break}return b},O4358:function(a){for(var b=!0,c=0;c<a.length;c++)if(Math.abs(a[c])>this.O9749){b=!1;break}return b},O2428:function(a){return Math.abs(a)<=this.O9749}})});ig.baked=!0;
ig.module("game.entities.immobile.transform").requires("impact.entity").defines(function(){EntityTransform=ig.Entity.extend({size:{x:38,y:38},O2027:0,type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,maxCells:4,O9844:null,secondsPerTransform:null,thingReferences:void 0,O6547:null,cellOrder:null,O3542:void 0,O5825:0,O4629:void 0,init:function(a,b,c){c.attributes&&(this.attributes=c.attributes);this.secondsPerTransform=c.secPerTransform?parseInt(c.secPerTransform):
ml.Misc.O7579();this.parent(a,b,c);this.maxCells=Math.floor(this.animSheet.image.width/this.size.x);for(a=1;a<=this.maxCells;a++)this.addAnim("cell"+a,1,[a-1]);this.attributes||(this.attributes={});this.attributes.inFront&&(this.decorative=!0);this.attributes.inCenter?this.pos.y+=9:this.attributes.atBottom&&(this.pos.y+=19);this.O9367||this.O4426()},O4426:function(){var a=ig.game.O6112.O8617(this.O5682);a&&a.ts?this.O9844=a.ts:this.O6952()},O6952:function(){this.O5825++;var a=this;ig.game.O9817.O3670(this.O5682,
ig.game.O4873.O8027,ig.game.O4873.currentArea,this).done(function(b){b?a.O9844=new Date(b.ts):1==a.O5825?setTimeout(function(){a.O6952()},500):a.O9844=new Date})},update:function(){if(this.O9844||this.O9367){var a=this.O6547;this.O6547=this.O9367?1:this.O2510();if(!this.O9367)if(this.O5193=this.O6456&&a==this.O6547,(this.O6456=ml.Misc.O7862(this,ig.game.O1257))&&!this.O5193){if(this.O6547==this.maxCells){if(void 0===this.thingReferences){this.thingReferences=null;var b=this;ig.game.O4261.getItem_P(b.thingTypeId,
"transform1").done(function(c){b.thingReferences=c.thingRefs;b.O5193=!1})}this.thingReferences&&1<=this.thingReferences.length&&(void 0===this.O3542&&(this.O3542=this.O1659()),a=this.thingReferences[this.O3542][1],a=ig.game.strings.O3089(a,25),ig.game.O6140=this,this.attributes.unlabeled||ig.game.actioninfo.open(this,this.pos.x,this.pos.y,a,ig.game.attachmentManager.O9284(this.thingTypeId)))}}else!this.O6456&&this.O5193&&(ig.game.O6140==this&&(ig.game.O6140=void 0),ig.game.actioninfo.isOpen&&!this.attributes.unlabeled&&
ig.game.actioninfo.close(this));this.attributes.effectsOnlyAtLastCell&&this.O6547!=this.maxCells||(a={pos:this.O6259(ig.game.O4507(this.pos)),size:ig.game.O4507(this.size)},ig.game.decorator.O7715(a,this))}},O1659:function(){ig.game.seedableRandom.setSeed(this.O9844);return ig.game.seedableRandom.O4293(0,this.thingReferences.length-1)},O4147:function(){var a=this.O1659(),b=this.thingReferences[a][0];ig.game.O6140==this&&(ig.game.O6140=void 0);ig.game.actioninfo.close(this);ig.game.sounds.playIncludedSound(this);
var c=ig.game.O4261.getItemBasic(b,"ent_trn");c.imagesBeingGenerated.done(function(){switch(c.base){case "READABLE":case "MEDIUM":ig.game.O7747.O9935(b);break;default:var d=ig.game.attachmentManager.O6854(c.base);ig.game.O1257.attachments[d]&&ig.game.O7836.O9073(d,null);ig.game.attachmentManager.O1336(ig.game.O1257,d,b);ig.game.O7836.O9073(d,b);ig.game.sounds.pickup.play()}})},draw:function(){if((this.O9844||this.O9367)&&null!==this.O6547&&this.anims["cell"+this.O6547]){var a=this.O6259({x:this.pos.x-
ig.game._rscreen.x,y:this.pos.y-ig.game._rscreen.y});this.anims["cell"+this.O6547].draw(a.x,a.y)}},O2510:function(){var a=Math.floor(((new Date).getTime()-this.O9844.getTime())/1E3);this.O4033();if(this.attributes.cycles)a=Math.floor(a/this.secondsPerTransform+this.O4629)%this.maxCells+1;else if(this.attributes.cyclesForthAndBack){if(!this.cellOrder){this.cellOrder=[];for(var b=1;b<=this.maxCells;b++)this.cellOrder.push(b);for(b=this.maxCells-1;2<=b;b--)this.cellOrder.push(b)}a=this.cellOrder[Math.floor(a/
this.secondsPerTransform+this.O4629)%this.cellOrder.length]}else a=Math.floor(a/this.secondsPerTransform+this.O4629)+1,a>this.maxCells&&(a=this.maxCells);return a},O4033:function(){void 0===this.O4629&&(this.attributes.startRandomly?(ig.game.seedableRandom.setSeed(this.O9844),this.O4629=this.attributes.cyclesForthAndBack?ig.game.seedableRandom.O4293(0,2*(this.maxCells-1)):ig.game.seedableRandom.O4293(0,this.maxCells-1)):this.O4629=0)},O6259:function(a){a.x-=Math.floor(this.size.x/4);a.y-=Math.floor(this.size.y-
ig.game.O9925);return a}})});ig.baked=!0;
ig.module("game.entities.immobile.happening").requires("impact.entity").defines(function(){EntityHappening=ig.Entity.extend({size:{x:29,y:29},O2027:0,type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,startsOnTouch:!0,O9126:!1,O3679:null,O7434:[0,0,0,1],iframe:null,subChannel:null,timer:null,O6895:!1,O3838:!1,O8082:"*",O1623:!1,O8112:!1,O4725:3,O5469:7200,O9207:null,O6328:10,maxCells:null,O6809:1E4,O5560:Math.PI/180,O1207:100,O7492:100,O7616:50,maxPos:1E3,code:null,
textSize:null,O3407:!0,O1161:0,O5300:!1,O9282:null,O9367:!1,O6717:!1,O4000:!1,frameId:null,O9048:null,O3070:null,isClosing:!1,O9890:null,O6380:!1,init:function(a,b,c){c.attributes&&(this.attributes=c.attributes);this.parent(a,b,c);this.attributes||(this.attributes={});this.subChannel=ig.game.O4293(1,1E8);this.frameId="happeningFrame_"+this.subChannel;this.attributes.offersEditing&&(this.O6717||this.O9367)&&(this.attributes.offersEditing=!1);this.maxCells=Math.floor(this.animSheet.image.width/this.size.x);
for(a=1;a<=this.maxCells;a++)this.addAnim("cell_"+a,1,[a-1]);if(ig.game.O4482&&"INDIVIDUALS"==ig.game.O5549||this.O6717){if(this.startsOnTouch=!this.O6717&&!this.O4000)this.type=ig.Entity.TYPE.B,this.O7852=ig.Entity.TYPE.A,this.O9126=!0;this.O8112=!0}this.O3070=ig.game.O4507(this.pos);this.O6717&&(this.O9890=ig.game.O7606.O7264)},O5769:function(){var a=1;this.O5682&&(a+=Math.abs(this.O5682.x,this.O5682.y));a+=(new Date).getUTCHours();ig.game.areaName&&(a+=ml.Misc.O4612(ig.game.areaName,1E3));return a+
ml.Misc.O4612(this.thingTypeId,1E3)},update:function(){if(this.O8112&&!this.O9126&&!this.isClosing)if(this.O9207&&this.O9207.delta()>this.O5469)ig.game.userScriptEditor&&ig.game.userScriptEditor.O5634(),this.reset();else if(this.O3679&&this.O3679.doEnd||ig.input.pressed("esc"))ig.game.userScriptEditor&&ig.game.userScriptEditor.O5634(),this.reset(),this.startsOnTouch&&(this.O9126=!0),ig.game.O7606.O3901()&&(ig.game.O7606.O2236(),ig.game.O7606.stop());else if(this.iframe||this.O6061(),this.O6895&&this.O3838&&
this.iframe){var a=!1;this.timer||(this.timer=new ml.Timer,a=!0,this.O9207=new ml.Timer);this.O1533();var b=this.timer.delta();a||this.O1623?(this.O1623=!1,this.timer.reset(),this.iframe.postMessage(this.O9249(),this.O8082)):b>=this.O4725&&(ig.game.O1257.say("oops, a happening stopped as it took too long"),this.tidyUp())}this.O1161=0},O1533:function(){this.attributes.follows&&this.O9048&&(this.pos=ig.game.O4507(this.O9048.pos))},O6061:function(){if(!ig.game.areaClosed){var a=this,b=!this.textSize,
c=this.attributes.offersEditing;!this.O6717&&(b||c&&this.thingTypeId==localStorage.lastSavedOffersEditingItemId)?ig.game.O9817.O6885().done(function(d){ig.game.userScriptEditor&&(a.code=d.contents?d.contents:a.O5382(),ig.game.userScriptEditor.open(a.code,a))}):!this.O6717&&c?ig.game.O4261.getItem_P(a.thingTypeId,"happening_load1").done(function(d){a.code=d.textData;a.code||(a.code="");ig.game.userScriptEditor&&ig.game.userScriptEditor.open(a.code,a,!1,void 0,a.thingTypeId)}):a.O6380||ig.game.O4261.getItem_P(a.thingTypeId,
"happening_load2").done(function(d){ml.Misc.O1536(d)?(a.code=d.textData,a.code||(a.code=""),a.O1761()):a.O6380=!0})}},O7979:function(a){if(this.O8112){if(ig.game.userScriptEditor&&ig.game.userScriptEditor.isOpen){var b=a.lineNumber-this.O1208().split("\r").length+1;ig.game.userScriptEditor.O5966(a.message,b,a.columnNumber);ig.game.userScriptEditor.O5634();this.reset()}else{var c="line "+a.lineNumber+", "+a.message.toLowerCase();ig.game.O1257.say("this happening has an issue");setTimeout(function(){ig.game.O1257.say('"'+
c+'"')},1500)}this.tidyUp()}},O1208:function(){return ig.game.userScriptManager.getDeterministicRandomizationCodeStart(this.O5769())},O9249:function(){var a={};a.tick=ig.system.tick;if(this.O5300){var b=ig.game.O4507(this.pos);b=this.O6259(b);a.sight={placements:ig.game.brainManager.O5614(b),entities:ig.game.brainManager.O5735(this.O9890),scope:ig.game.brainManager.O7590};a.x=this.pos.x;a.y=this.pos.y;a.width=this.size.x;a.height=this.size.y}return a},draw:function(){this.O1161++;if(1<=this.O1161&&
3>=this.O1161&&this.anims&&this.anims.cell_1){if((this.O9367||2==this.O1161)&&!this.O6717){var a=this.O6259({x:this.O3070.x-ig.game._rscreen.x,y:this.O3070.y-ig.game._rscreen.y});this.anims.cell_1.alpha=1;this.O3679&&void 0!==this.O3679.itemAlpha&&ml.Misc.O5090(this.O3679.itemAlpha)&&(this.anims.cell_1.alpha=ml.Misc.O9024(this.O3679.itemAlpha,0,1));0<this.anims.cell_1.alpha&&(this.anims.cell_1.angle=0,this.anims.cell_1.flip={x:!1,y:!1},this.anims.cell_1.draw(a.x,a.y));this.O3824()}if(this.O3679&&
!this.O9367){switch(this.O1161){case 1:var b=this.O3679.back;break;case 2:b=this.O3679;break;case 3:b=this.O3679.front}this.O4942(b)}}},O3824:function(){this.O3679&&this.O3679.doPlaySound&&this.soundId&&(this.O9282&&2<this.O9282.delta()&&(this.O9282=null),this.O9282||(ig.game.sounds.playIncludedSound(this),this.O9282=new ml.Timer))},O6259:function(a){a.x-=5;a.y-=10;return a},O4942:function(a){if(a){if(a.particles&&Array.isArray(a.particles))for(var b=parseInt(a.particles.length).limit(0,this.O1207),
c=0;c<b;c++)this.O1565(a.particles[c]);if(a.lines&&Array.isArray(a.lines))for(b=parseInt(a.lines.length).limit(0,this.O1207),c=0;c<b;c++)this.O9576(a.lines[c]);if(a.rectangles&&Array.isArray(a.rectangles))for(b=parseInt(a.rectangles.length).limit(0,this.O1207),c=0;c<b;c++)this.O1264(a.rectangles[c]);if(a.polygons&&Array.isArray(a.polygons))for(b=parseInt(a.polygons.length).limit(0,this.O1207),c=0;c<b;c++)this.O8550(a.polygons[c]);if(a.circles&&Array.isArray(a.circles))for(b=parseInt(a.circles.length).limit(0,
this.O1207),c=0;c<b;c++)this.O5519(a.circles[c]);if(a.items&&Array.isArray(a.items))for(b=parseInt(a.items.length).limit(0,this.O7492),c=0;c<b;c++)this.O5405(a.items[c]);if(a.texts&&Array.isArray(a.texts))for(b=parseInt(a.texts.length).limit(0,this.O1207),c=0;c<b;c++)this.O1888(a.texts[c])}},O4195:function(a){var b=null;if(a){for(var c in ig.game.brainManager.enumMode)if(a==ig.game.brainManager.enumMode[c]){b=c;break}switch(b){case "bright":b="lighten";break;case "dark":b="darken";break;case "default":b=
null}}return b},O9576:function(a){if("object"==typeof a){var b=ig.system.context;b.beginPath();var c=this.O8370(a);this.O6334(a);this.O9472(a);b.moveTo(this.O722(a.x1),this.O2321(a.y1));b.lineTo(this.O722(a.x2),this.O2321(a.y2));b.stroke();this.O3732(c)}},O8550:function(a){if(a.points&&Array.isArray(a.points)&&3<=a.points.length){var b=ig.system.context;b.beginPath();var c=this.O8370(a);this.O6334(a,!0);this.O9472(a);var d=a.points[0];b.moveTo(this.O722(d.x),this.O2321(d.y));for(var e=parseInt(a.points.length).limit(0,
this.O7616),f=1;f<e;f++)d=a.points[f],b.lineTo(this.O722(d.x),this.O2321(d.y));b.closePath();a.filled?b.fill():b.stroke();this.O3732(c)}},O1264:function(a){if("object"==typeof a){var b=ig.system.context;b.beginPath();var c=this.O8370(a);this.O6334(a,!0);this.O9472(a);ml.Misc.O5090(a.x1)||(a.x1=1);ml.Misc.O5090(a.y1)||(a.y1=1);ml.Misc.O5090(a.x2)||(a.x2=2);ml.Misc.O5090(a.y2)||(a.y2=2);var d=ml.Misc.O9024(a.x2-a.x1,1,2E3),e=ml.Misc.O9024(a.y2-a.y1,1,2E3);b.rect(this.O722(a.x1),this.O2321(a.y1),d*ig.system.scale,
e*ig.system.scale);a.filled?b.fill():b.stroke();this.O3732(c)}},O1565:function(a){if("object"==typeof a){var b=ig.system.context;b.beginPath();var c=this.O8370(a),d="rgba("+this.O6504(a.rgba).join(",")+")";ig.system.context.fillStyle=d;this.O9472(a);d=ig.system.scale*a.thickness;var e=ig.system.scale*a.thickness;b.rect(this.O722(a.x)-d/2,this.O2321(a.y)-e/2,d,e);b.fill();this.O3732(c)}},O5519:function(a){if("object"==typeof a){var b=ig.system.context;b.beginPath();var c=this.O8370(a);this.O6334(a,
!0);this.O9472(a);a.radius&&ml.Misc.O5090(a.radius)||(a.radius=ig.game.O2953);b.arc(this.O722(a.x),this.O2321(a.y),ml.Misc.O9024(a.radius,1,500)*ig.system.scale,0,2*Math.PI,!1);a.filled?b.fill():b.stroke();this.O3732(c)}},O1888:function(a){if("object"==typeof a){var b=this.O8370(a),c=1;void 0!==a.alpha&&ml.Misc.O5090(a.alpha)&&(c=ml.Misc.O9024(a.alpha,0,1));if(0<c){1!=c&&(ig.system.context.globalAlpha=a.alpha);var d=a.content&&"string"===typeof a.content?a.content:"";d=ig.game.strings.O3089(d,250);
var e=ig.Font.ALIGN.CENTER;a.align&&(a.align==ig.game.brainManager.enumAlign.left?e=ig.Font.ALIGN.LEFT:a.align==ig.game.brainManager.enumAlign.right&&(e=ig.Font.ALIGN.RIGHT));var f="whiteSmallFont";a.font&&(a.font==ig.game.brainManager.enumFont.white?f="whiteFont":a.font==ig.game.brainManager.enumFont.blackSmall?f="blackSmallFont":a.font==ig.game.brainManager.enumFont.black&&(f="blackFont"));var g=a.x;a=a.y;g=this.pos.x+10+g-ig.game._rscreen.x;a=this.pos.y+5+a-ig.game._rscreen.y;ig.game[f].draw(d,
g,a,e);1!=c&&(ig.system.context.globalAlpha=1)}this.O3732(b)}},O5405:function(a){if("object"==typeof a){var b=this.O8370(a);ml.Misc.O5090(a.cell)?a.cell=parseInt(a.cell).limit(1,this.maxCells):a.cell=1;var c=this.anims["cell_"+a.cell];c&&(ml.Misc.O5090(a.alpha)?c.alpha=ml.Misc.O9024(a.alpha,0,1):c.alpha=1,0<c.alpha&&(a.pivot&&void 0!==a.pivot.x&&void 0!==a.pivot.y&&ml.Misc.O5090(a.pivot.x)&&ml.Misc.O5090(a.pivot.y)?(c.pivot.x=a.pivot.x,c.pivot.y=a.pivot.y):(c.pivot.x=this.size.x/2,c.pivot.y=this.size.y/
2),c.flip.x=a.flip&&void 0!==a.flip.x?!!a.flip.x:!1,c.flip.y=a.flip&&void 0!==a.flip.y?!!a.flip.y:!1,a.rotation&&ml.Misc.O5090(a.rotation)?(angle=parseInt(a.rotation).limit(-this.O6809,this.O6809),c.angle=angle*this.O5560):c.angle&&(c.angle=0),a=this.O6259({x:a.x,y:a.y}),a.x=this.pos.x-this.offset.x+a.x-ig.game._rscreen.x,a.y=this.pos.y-this.offset.y+a.y-ig.game._rscreen.y,c.draw(a.x,a.y)));this.O3732(b)}},O3732:function(a){a&&ml.Misc.O3715()},O9472:function(a){a&&(a.thickness&&ml.Misc.O5090(a.thickness)?
a.thickness=parseFloat(a.thickness).limit(1,this.O6328):a.thickness=1,ig.system.context.lineWidth=a.thickness*ig.system.scale)},O6334:function(a,b){var c="rgba("+this.O6504(a.rgba).join(",")+")";ig.system.context.strokeStyle=c;b&&a.filled&&(ig.system.context.fillStyle=c)},O8370:function(a){(a=this.O4195(a.mode))&&ml.Misc.O5847(a);return a},O6504:function(a){Array.isArray(a)&&ml.Misc.O2249(a[0])&&ml.Misc.O2249(a[1])&&ml.Misc.O2249(a[2])&&ml.Misc.O5090(a[3])?(a[0]=parseInt(a[0]).limit(0,255),a[1]=parseInt(a[1]).limit(0,
255),a[2]=parseInt(a[2]).limit(0,255),a[3]=ml.Misc.O9024(a[3],0,1)):a=null;a||=this.O7434;return a},O722:function(a){ml.Misc.O5090(a)||(a=0);a=ml.Misc.O9024(a,-this.maxPos,this.maxPos);return(this.pos.x+a-this.offset.x-ig.game._rscreen.x+(this.attributes.follows?4:9.5))*ig.system.scale},O2321:function(a){ml.Misc.O5090(a)||(a=0);a=ml.Misc.O9024(a,-this.maxPos,this.maxPos);return(this.pos.y+a-this.offset.y-ig.game._rscreen.y+(this.attributes.follows?4:9.5))*ig.system.scale},check:function(a){if(this.O9126&&
!this.isClosing&&a instanceof EntityPlayer){var b=a.O8393&&(!a.O8393.flip.x&&a.pos.x>this.pos.x||a.O8393.flip.x&&a.pos.x<this.pos.x),c=!this.textSize||this.attributes.offersEditing;2<=Math.abs(a.vel.x)+Math.abs(a.vel.y)&&b&&(!c||a.O8088)&&(a.O8088&&(ig.game.O2116.O7945(this.pos,"sees","activates",this.givenName),ig.game.O2116.O7884(a,"activates",this.givenName)),this.attributes.follows&&(this.O9048=a),this.O9890=a,this.O9126=!1)}},O2534:function(a,b){this.O9126&&!this.isClosing&&this.parent(a,b)},
O2550:function(a){},O1761:function(){if(!this.isClosing){jQuery("#"+this.frameId).remove();var a=ml.Misc.O7959()?"/":"//thingistan-sandbox.pages.dev/";a+="_sandbox/automation/?v="+ig.game.O4035;a+="#happening_"+this.subChannel;var b=window.frames.length;this.iframe=jQuery('<iframe id="'+this.frameId+'" class="happeningFrame" sandbox="allow-scripts" src="'+a+'"></iframe>');this.iframe.appendTo("body");this.iframe=window.frames[b];this.timer=null;this.O1623=this.O3838=this.O6895=!1;this.O5300=this.O9234()}},
O9234:function(){return this.code&&(0<=this.code.indexOf(".sight")||0<=this.code.indexOf("my.x")||0<=this.code.indexOf("my.y")||0<=this.code.indexOf("my.width")||0<=this.code.indexOf("my.height"))},receiveMessageFromExternal:function(a){!this.isClosing&&a&&"fromChild"==a.internal_type&&(this.O6895?(this.O3838?(this.O1623=!0,this.O3679=a?a:{},ig.game.userScriptEditor&&ig.game.userScriptEditor.isOpen&&(a.internal_doClearLog&&ig.game.userScriptEditor.O6229(),a.internal_logText&&"string"===typeof a.internal_logText&&
ig.game.userScriptEditor.O7382(ig.game.brainManager.O2444(a.internal_logText)))):a.internal_didLoadWorker&&(this.O8112=this.O3838=!0),a.internal_error&&this.O7979(a.internal_error)):a.internal_didLoadInitial&&(this.O6895=!0,a=this.O1208()+this.code,this.iframe&&this.iframe.postMessage({internal_codeToLoad:a,internal_mainFunctionName:"update"},this.O8082)))},reset:function(){this.tidyUp();this.startsOnTouch&&(this.O9126=!0);this.O8112=!0},tidyUp:function(){this.O9048=null;this.O1623=this.O3838=this.O6895=
!1;this.O9207=this.O3679=null;this.O8112=!1;this.O9282=this.code=this.timer=null;jQuery("#"+this.frameId).remove();this.iframe=null},O5382:function(){return"// An example script\r\rvar particles = [ { x: 0, y: -30, thickness: 5 } ];\r\rfunction update(my) { \r   particles[0].x += my.tick * 10; \r   \r   return {particles: particles};\r}\r"},userScriptEditorRunStarted:function(a){this.reset();this.code=a;this.O9126=!1;var b=this;setTimeout(function(){b.O1761()},300);return!0},userScriptEditorRunEnded:function(){ig.game.userScriptEditor&&
ig.game.userScriptEditor.O5634();this.reset();this.O9126=!1},userScriptEditorClosed:function(){this.O8112=this.O9126=!1;this.isClosing=!0;var a=this;setTimeout(function(){a.O9126=!0;a.O8112=!0;a.isClosing=!1},1500)},userScriptEditorOpenHelp:function(){ml.Misc.openUrl("/info-happening")}})});ig.baked=!0;
ig.module("game.entities.immobile.changer").requires("impact.entity").defines(function(){window.EntityChanger=ig.Entity.extend({size:{x:19,y:19},O2027:0,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,O6456:!1,O5193:!1,betweenDefaultAndPlayer:!0,baseType:"CHANGER",init:function(a,b,c){this.parent(a,b,c);this.addAnim("main",1,[0])},update:function(){this.O5193=this.O6456;(this.O6456=this.touches(ig.game.O1257))&&!this.O5193?ig.game.actioninfo.open(this,this.pos.x,this.pos.y,
null,!0,"drag creations over to change",null,!1):!this.O6456&&this.O5193&&ig.game.actioninfo.close(this)}})});ig.baked=!0;
ig.module("game.entities.immobile.brain").requires("impact.entity").defines(function(){window.EntityBrain=ig.Entity.extend({size:{x:19,y:19},O2027:0,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,O6456:!1,O5193:!1,baseType:"BRAIN",isStack:!0,givenName:"",init:function(a,b,c){this.parent(a,b,c);this.addAnim("main",1,[0]);this.O8393.flip.x=!!((a-b)%2)},update:function(){this.O5193=this.O6456;(this.O6456=ml.Misc.O7862(this,ig.game.O1257))&&ig.game.O1257.attachments.br?
ig.game.actioninfo.close(this):this.O6456&&!this.O5193?ig.game.actioninfo.open(this,this.pos.x,this.pos.y,"equip "+ig.game.strings.O7686(this.givenName,10),ig.game.attachmentManager.O9284(this.thingTypeId)):!this.O6456&&this.O5193&&ig.game.actioninfo.close(this)},draw:function(){this.O8393&&ig.game.attachmentManager.O2548(this)},O2550:function(a){this.parent(a)}})});ig.baked=!0;
ig.module("game.entities.immobile.liner").requires("impact.entity").defines(function(){window.EntityLiner=ig.Entity.extend({size:{x:15,y:15},O2027:0,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,O6456:!1,O5193:!1,baseType:"LINER",isStack:!0,init:function(a,b,c){this.parent(a,b,c);this.addAnim("main",1,[0]);this.O8393.flip.x=!!((a-b)%2)},update:function(){this.O5193=this.O6456;(this.O6456=ml.Misc.O7862(this,ig.game.O1257))&&!this.O5193?2>=ig.game.O1257.rank&&ig.game.actioninfo.open(this,
this.pos.x,this.pos.y,"hold",ig.game.attachmentManager.O9284(this.thingTypeId)):!this.O6456&&this.O5193&&ig.game.actioninfo.close(this);ig.game.decorator.O7715(this,this)},draw:function(){this.O8393&&ig.game.attachmentManager.O2548(this)},O2550:function(a){this.parent(a)}})});ig.baked=!0;
ig.module("game.entities.immobile.stackhold").requires("impact.entity").defines(function(){window.EntityStackhold=ig.Entity.extend({size:{x:15,y:15},O2027:0,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,O6456:!1,O5193:!1,baseType:"STACKHOLD",isStack:!0,init:function(a,b,c){this.parent(a,b,c);this.addAnim("main",1,[0]);c.attributes&&c.attributes.nonFlipping||(this.O8393.flip.x=this.O6717?ig.game.chance(50):!!((a-b)%2))},update:function(){this.O5193=this.O6456;(this.O6456=
ml.Misc.O7862(this,ig.game.O1257))&&!this.O5193?2>=ig.game.O1257.rank&&ig.game.actioninfo.open(this,this.pos.x,this.pos.y,"hold",ig.game.attachmentManager.O9284(this.thingTypeId)):!this.O6456&&this.O5193&&ig.game.actioninfo.close(this);ig.game.decorator.O7715(this,this)},draw:function(){this.O8393&&ig.game.attachmentManager.O2548(this)},O2550:function(a){this.parent(a)}})});ig.baked=!0;
ig.module("game.entities.immobile.emitter").requires("impact.entity").defines(function(){window.EntityEmitter=ig.Entity.extend({size:{x:15,y:15},O2027:0,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,O6456:!1,O5193:!1,baseType:"EMITTER",isStack:!0,init:function(a,b,c){this.parent(a,b,c);this.addAnim("main",1,[0]);this.O8393.flip.x=!!((a-b)%2)},update:function(){this.O5193=this.O6456;(this.O6456=ml.Misc.O7862(this,ig.game.O1257))&&!this.O5193?2>=ig.game.O1257.rank&&
ig.game.actioninfo.open(this,this.pos.x,this.pos.y,"hold",ig.game.attachmentManager.O9284(this.thingTypeId)):!this.O6456&&this.O5193&&ig.game.actioninfo.close(this);ig.game.decorator.O7715(this,this)},draw:function(){this.O8393&&ig.game.attachmentManager.O2548(this)},O2550:function(a){this.parent(a)}})});ig.baked=!0;
ig.module("game.entities.immobile.aimable").requires("impact.entity").defines(function(){window.EntityAimable=ig.Entity.extend({size:{x:15,y:15},O2027:0,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,O6456:!1,O5193:!1,baseType:"AIMABLE",isStack:!0,init:function(a,b,c){this.parent(a,b,c);this.addAnim("main",1,[0]);this.O8393.flip.x=!!((a-b)%2)},update:function(){this.O5193=this.O6456;(this.O6456=ml.Misc.O7862(this,ig.game.O1257))&&!this.O5193?2>=ig.game.O1257.rank&&
ig.game.actioninfo.open(this,this.pos.x,this.pos.y,"hold",ig.game.attachmentManager.O9284(this.thingTypeId)):!this.O6456&&this.O5193&&ig.game.actioninfo.close(this);ig.game.decorator.O7715(this,this)},draw:function(){this.O8393&&ig.game.attachmentManager.O2548(this)},O2550:function(a){this.parent(a)}})});ig.baked=!0;
ig.module("game.entities.immobile.interenv").requires("impact.entity").defines(function(){window.EntityInterenv=ig.Entity.extend({size:{x:19,y:19},O2027:0,type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,O8376:!0,init:function(a,b,c){this.parent(a,b,c);this.addAnim("main",1,[0]);this.O8393=this.anims.main}})});ig.baked=!0;
ig.module("game.entities.immobile.equipment").requires("impact.entity").defines(function(){window.EntityEquipment=ig.Entity.extend({size:{x:15,y:15},O2027:0,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,O6456:!1,O5193:!1,baseType:"EQUIPMENT",isStack:!0,init:function(a,b,c){this.parent(a,b,c);this.addAnim("main",1,[0]);this.O8393.flip.x=!!((a-b)%2)},update:function(){this.O5193=this.O6456;(this.O6456=ml.Misc.O7862(this,ig.game.O1257))&&!this.O5193?2>=ig.game.O1257.rank&&
ig.game.actioninfo.open(this,this.pos.x,this.pos.y,"hold",ig.game.attachmentManager.O9284(this.thingTypeId)):!this.O6456&&this.O5193&&ig.game.actioninfo.close(this);ig.game.decorator.O7715(this,this)},draw:function(){this.O8393&&ig.game.attachmentManager.O2548(this)},O2550:function(a){this.parent(a)}})});ig.baked=!0;
ig.module("game.entities.immobile.consumab").requires("impact.entity").defines(function(){window.EntityConsumab=ig.Entity.extend({size:{x:15,y:15},O2027:0,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,O6456:!1,O5193:!1,baseType:"CONSUMAB",isStack:!0,init:function(a,b,c){this.parent(a,b,c);this.addAnim("main",1,[0]);this.O8393.flip.x=this.O6717?ig.game.chance(50):!!((a-b)%2)},update:function(){this.O5193=this.O6456;(this.O6456=ml.Misc.O7862(this,ig.game.O1257))&&!this.O5193?
2>=ig.game.O1257.rank&&ig.game.actioninfo.open(this,this.pos.x,this.pos.y,"hold",ig.game.attachmentManager.O9284(this.thingTypeId)):!this.O6456&&this.O5193&&ig.game.actioninfo.close(this);ig.game.decorator.O7715(this,this)},draw:function(){this.O8393&&ig.game.attachmentManager.O2548(this)},O2550:function(a){this.parent(a)}})});ig.baked=!0;
ig.module("game.entities.immobile.hook").requires("impact.entity").defines(function(){window.EntityHook=ig.Entity.extend({size:{x:15,y:15},O2027:0,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,O6456:!1,O5193:!1,baseType:"HOOK",isStack:!0,init:function(a,b,c){this.parent(a,b,c);this.addAnim("main",1,[0]);this.O8393.flip.x=!!((a-b)%2)},update:function(){this.O5193=this.O6456;(this.O6456=ml.Misc.O7862(this,ig.game.O1257))&&!this.O5193?2>=ig.game.O1257.rank&&ig.game.actioninfo.open(this,
this.pos.x,this.pos.y,"hold",ig.game.attachmentManager.O9284(this.thingTypeId)):!this.O6456&&this.O5193&&ig.game.actioninfo.close(this);ig.game.decorator.O7715(this,this)},draw:function(){this.O8393&&ig.game.attachmentManager.O2548(this)},O2550:function(a){this.parent(a)}})});ig.baked=!0;
ig.module("game.entities.immobile.stackwear").requires("impact.entity").defines(function(){window.EntityStackwear=ig.Entity.extend({size:{x:19,y:19},O2027:0,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,O6456:!1,O5193:!1,baseType:"STACKWEAR",isStack:!0,init:function(a,b,c){c.attributes&&(this.attributes=c.attributes);this.parent(a,b,c);c.animSheet&&c.animSheet.image&&(this.size.x=c.animSheet.image.width/2,this.size.y=c.animSheet.image.height);this.addAnim("main",1,
[0]);this.attributes&&this.attributes.nonFlipping||(this.O8393.flip.x=!this.O9367&&!!((a-b)%2));this.O9367||(this.O8393.angle=.5*(this.O8393.flip.x?-1:1))},update:function(){this.O5193=this.O6456;(this.O6456=ml.Misc.O7862(this,ig.game.O1257))&&!this.O5193?2>=ig.game.O1257.rank&&ig.game.actioninfo.open(this,this.pos.x,this.pos.y,"wear",ig.game.attachmentManager.O9284(this.thingTypeId)):!this.O6456&&this.O5193&&ig.game.actioninfo.close(this);ig.game.decorator.O7715(this,this)},draw:function(){this.O9367?
this.parent():ig.game.attachmentManager.O1927(this,"STACKWEAR")},O2550:function(a){this.parent(a)}})});ig.baked=!0;
ig.module("game.entities.immobile.stackwearb").requires("impact.entity").defines(function(){window.EntityStackwearb=ig.Entity.extend({size:{x:19,y:19},O2027:0,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,O6456:!1,O5193:!1,isOld:!1,baseType:"STACKWEARB",isStack:!0,O3452:!1,O8715:!1,mover:{thing:null},O7050:null,O1954:null,eyesTimer:null,O6191:!1,mouthTimer:null,O7931:!1,O6319:null,O3070:{x:null,y:null},moveOffset:{x:0,y:0},O7329:void 0,O8376:!0,isSolid:!1,O6897:!1,
init:function(a,b,c){this.O3070={x:a,y:b};this.isOld=c.animSheet.image.width/ig.game.O1828!=parseInt(c.animSheet.image.width/ig.game.O1828);this.size.x=c.animSheet.image.width/(this.isOld?ig.game.O6965:ig.game.O1828);this.size.y=c.animSheet.image.height;c.animSheet.width=this.size.x;this.parent(a,b,c);this.O7329=!this.O9367&&!!((a-b)%2);this.addAnim("main",1,[0]);this.addAnim("blink",1,[this.isOld?6:7]);this.addAnim("run",1,[1]);this.addAnim("talk",1,[8]);this.addAnim("climbing",1,[4]);this.anims.main.flip.x=
this.O7329;this.anims.blink.flip.x=this.O7329;this.anims.talk.flip.x=this.O7329;this.anims.run.flip.x=this.O7329;this.O8393=this.anims.main;this.O4494(!1);this.O4365();this.mover.thing?this.O8711=this.thingTypeId+"_"+a+"_"+b:delete this.givenName;if(this.O9367||this.O6717)this.angle=0,this.O7329=!1,this.O8393.angle=this.angle,this.O8393.flip.x=this.O7329,this.O6717&&(this.O7329=this.O8393.flip.x=ig.game.chance(50))},O4874:function(){var a=null;if(this.O5682&&null!==this.O5682.y&&void 0!==this.O5682.y){var b=
ig.game.O6112.O8704({x:this.O5682.x,y:this.O5682.y-1});b&&b.thing&&(a=b.thing)}return a},O4365:function(){this.O7329=!!((this.O3070.x-this.O3070.y)%2);this.O3452&&!this.isOld&&(this.O7329=!this.O7329);if(this.O8393=this.anims.main){this.O8393.flip.x=this.O7329;if(this.O3452||this.mover.thing||this.O7213){this.O6191=!0;if(!this.O7213||this.blinkInMultithing)this.eyesTimer=new ml.Timer;var a=0;this.pos.y=this.O3070.y+(ig.game.O9925-this.size.y)}else a=.5*(this.O8393.flip.x?-1:1),this.pos.y=this.O3070.y;
this.anims.main.angle=a;this.anims.blink.angle=a;this.O8715=this.O3452}this.O8376=!!this.mover.thing;this.O8770();var b=this;if(this.mover.thing&&this.mover.thing.holdableId&&!this.mover.holdable){var c=ig.game.O4261.getItemBasic(this.mover.thing.holdableId,"ent_swb1");c.imagesBeingGenerated.done(function(){ig.game.O2225.O5196(b,c)})}if(this.mover.thing&&this.mover.thing.wearableId&&!this.mover.wearable){var d=ig.game.O4261.getItemBasic(this.mover.thing.wearableId,"ent_swb2");d.imagesBeingGenerated.done(function(){ig.game.O2225.O9815(b,
d)})}},O8770:function(){this.isSolid=!!this.mover.thing&&this.mover.thing.attributes&&(this.mover.thing.attributes.solid||this.mover.thing.attributes.harmful||this.mover.thing.attributes.deadly)&&0<this.mover.health;this.O1884()},O1884:function(){this.collides=this.isSolid?ig.Entity.COLLIDES.ACTIVE:ig.Entity.COLLIDES.NEVER},O2534:function(a,b){if(this.isSolid){if(this.mover&&this.mover.health&&this.mover.thing&&a&&a.specs&&a.specs.harm){var c=ig.game.O4293(6,10);ig.game.decorator.burst(this,c);a.O7729&&
(this.mover.health-=a.specs.harm,ig.game.O7836.O7548(this.O8711,this.mover.health),0>=this.mover.health&&(ig.game.O2116.O7884(ig.game.O1257,"kills",this.givenName),this.mover.health=0))}ig.game.O2225.O1992(this,a,b);this.parent(a,b)}},update:function(){this.O4494();this.O3452?this.O6847():this.mover.thing?ig.game.O2225.O9070(this):this.O7213?this.blinkInMultithing&&this.O6837():(this.O5193=this.O6456,(this.O6456=ml.Misc.O7862(this,ig.game.O1257))&&!this.O5193?2>=ig.game.O1257.rank&&ig.game.actioninfo.open(this,
this.pos.x,this.pos.y,"change to",ig.game.attachmentManager.O9284(this.thingTypeId)):!this.O6456&&this.O5193&&ig.game.actioninfo.close(this));this.mover.thing&&0>=this.mover.health||ig.game.decorator.O7715(this,this);this.isSolid&&this.parent()},O4494:function(a){this.O3452=!1;this.mover.thing=null;var b=this.O4874();b&&("INTERACT"==b.base?(this.O3452=!(!b.attributes||!b.attributes.affectsBelow),this.isStack=!1):"MOVER"==b.base&&!this.isOld&&(this.mover.thing=b,this.mover.thing.id!=this.mover.idPrevious&&
(ig.game.O2225.O5733(this),a||this.O4365()),this.isStack=!1));this.mover.idPrevious&&!this.mover.thing&&(this.pos=ig.game.O4507(this.O3070),this.mover={thing:null},this.O6191=this.O6897=!1,this.moveOffset={x:0,y:0},a||this.O4365());this.O8715!=this.O3452&&(a||this.O4365())},O6837:function(){if(this.O6191){var a=1.3;this.O7213&&(a*=5);this.eyesTimer.delta()>=a&&ig.game.chance(1)&&(this.eyesTimer=new ml.Timer,this.O6191=!1)}else.12<=this.eyesTimer.delta()&&(this.eyesTimer=new ml.Timer,this.O6191=!0)},
O6847:function(){this.O6837();if(!this.isOld&&(this.O1954&&10<=this.O1954.delta()&&(this.O1954=null),null==this.O6319?!this.O7050&&null===this.O1954&&ig.game.chance(.2)&&(this.O6319=new ml.Timer,this.O8393=this.anims.run,this.O6655()):2<=this.O6319.delta()&&(this.O6319=null,this.O8393=this.anims.main),this.O1830(),this.O7050))if(this.mouthTimer){if(.15<=this.mouthTimer.delta()){var a=this.O7050.length;3<a?(this.O7050=this.O7050.substr(0,a-2),this.mouthTimer=new ml.Timer,ig.game.chance(70)&&(this.O7931=
!this.O7931)):(this.mouthTimer=this.O7050=null,this.O7931=!1,this.O1954=new ml.Timer)}}else this.mouthTimer=new ml.Timer,this.O7931=!0},draw:function(){if(this.O8393)if(this.O3452||this.mover.thing||this.O7213){this.O8393.angle=0;var a=!1;if(this.mover.thing){if(a=this.mover.attachedWearable&&this.mover.wearable&&this.mover.wearable.attributes&&this.mover.wearable.attributes.invisibility)ig.system.context.globalAlpha=.25,ml.Misc.O5847("xor");if(0>=this.mover.health)return;var b=ig.game.O9925-this.size.y;
this.pos.x=this.O3070.x+this.moveOffset.x;this.pos.y=this.O3070.y+this.moveOffset.y+b;b=this.pos.x-this.offset.x-ig.game._rscreen.x;var c=this.pos.y-this.offset.y-ig.game._rscreen.y;if(this.mover.thing.soundId&&!this.O6897&&ig.game.O1257){var d=Math.max(ig.system.widthHalf,ig.system.O2175);this.O2144(ig.game.O1257)<=d&&(ig.game.sounds.playIncludedSound(this,this.mover.thing.soundId),this.O6897=!0)}this.mover.angle&&(this.O8393.angle=this.mover.angle)}else b=this.pos.x-this.offset.x-ig.game._rscreen.x+
this.moveOffset.x,c=this.pos.y-this.offset.y-ig.game._rscreen.y+this.moveOffset.y;if(this.isOld)this.O6191?this.anims.main.draw(b,c):this.anims.blink&&this.anims.blink.draw(b,c);else if(this.O8393.draw(b,c),0==this.moveOffset.x||this.mover.thing&&this.O8393==this.anims.main)!this.O6191&&this.anims.blink&&(this.anims.blink.flip.x=this.O8393.flip.x,this.anims.blink.draw(b,c)),this.O7931&&this.anims.talk&&(this.anims.talk.flip.x=this.O8393.flip.x,this.anims.talk.draw(b,c));this.mover.wearable&&ig.game.O2225.O1370(this,
b,c);this.mover.holdable&&ig.game.O2225.O1664(this,b,c);a&&(ig.system.context.globalAlpha=1,ml.Misc.O3715())}else this.O9367||this.O6717?this.parent():ig.game.attachmentManager.O1927(this,"STACKWEARB")},O1830:function(){if(this.O6319){var a=this.O6319.delta(),b=.1;this.O7329&&(b*=-1);.75>=a?(this.moveOffset.x+=b,this.anims.run&&this.anims.main&&(this.O8393=.375>=a?this.anims.run:this.anims.main,this.O8393.flip.x=!this.O7329)):(this.moveOffset.x-=b,this.anims.run&&this.anims.main&&(this.O8393=a<=1.5*
.95?this.anims.run:this.anims.main,this.O8393.flip.x=this.O7329))}else if(0!=this.moveOffset.x&&(this.moveOffset.x=0),this.O8393=this.anims.main)this.O8393.flip.x=!this.O7329},O6655:function(){if(this.O8393){var a=this.mover.thing?{x:0,y:0}:this.moveOffset;ig.game.O9759(EntityDust,this.pos.x+this.size.x/2+7*(this.O8393.flip.x?-1:1)+a.x,this.pos.y+this.size.y-1+a.y,{vel:{x:20*(this.O8393.flip.x?-1:1)+(10*Math.random()-5),y:10*Math.random()-5}})}},O2550:function(a){this.isSolid&&this.parent(a)}})});
ig.baked=!0;
ig.module("game.entities.immobile.thrower").requires("impact.entity").defines(function(){window.EntityThrower=ig.Entity.extend({size:{x:19,y:19},offset:{x:0,y:0},O2027:0,opacity:1,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,attributes:{},throwDirection:0,O5682:{},O8376:!0,init:function(a,b,c){c.attributes&&(this.attributes=c.attributes);c.throwDirection&&(this.throwDirection=c.throwDirection);this.parent(a,b,c);this.addAnim("main",1,[0]);this.addAnim("throws",.5,
[1]);this.O8393=this.anims.main;this.attributes||(this.attributes={})},O8166:function(a){a&&1==a.id&&this.O3916(a.tid)},O3916:function(a){this.O610();this.O2824(a);this.O8393=this.anims.throws;var b=this;setTimeout(function(){b.O8393=b.anims.main},500)},O610:function(){if(this.attributes.throwsLiving){var a=this.O9352();if(1<=a.length){var b=this.O1105(),c=2.5;0==this.throwDirection&&(c=3);b.x*=c;b.y*=c;for(c=0;c<a.length;c++)a[c].vel=ig.game.O4507(b);ig.game.sounds.O9396(ig.game.sounds.whoosh,this)}}},
O2824:function(a){var b=this.O2408();if(b){var c=this.O1105();if(!b.attributes||!b.attributes.floaty&&!b.attributes.flies){var d=1==this.throwDirection||7==this.throwDirection;0==this.throwDirection?c.y*=1.75:d&&(c.x*=1.25,c.y*=1.25)}0!=c.x&&0!=c.y&&(c.x*=.8,c.y*=.8);a={O8766:{width:b.img.width,height:b.img.height,flipX:0<c.x?1:0,path:b.img.path,animSheet:ig.game.entityManager.getAnimationForEntity(b,0,!1)},itemId:b.id,O5089:b.base,attributes:b.attributes,O4910:b.name,O8985:c,O1861:!0,originatorId:this.O2724(),
throwId:a};ig.game.O9759(EntityThrownItem,Math.floor(this.pos.x+ig.game.O2953-(b.img.width?b.img.width/2:0)),Math.floor(this.pos.y+ig.game.O2953-(b.img.height?b.img.height/2:0)),a);ig.game.sounds.O9396(ig.game.sounds.whoosh,this)}},O1105:function(){var a={x:0,y:0},b=[[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1]][this.throwDirection];b&&(a=this.attributes.moreForce?200:100,a={x:b[0]*a,y:b[1]*a});return a},O9352:function(){var a=[],b=ig.game.O5119.player;if(b)for(var c=0;c<b.length;c++){var d=
b[c];d instanceof EntityPlayer&&!d._killed&&this.touches(d)&&a.push(d)}return a},O8961:function(){var a=null,b=ig.game.O5119.foreground;if(b)for(var c=0;c<b.length;c++){var d=b[c];if(d instanceof EntityThrownItem&&!d._killed&&("STACKHOLD"==d.O5089||"EMITTER"==d.O5089||"CONSUMAB"==d.O5089)&&ig.game.O1257.touches(d)){a=d;break}}return a},O2408:function(){for(var a,b=-1;1>=b;b++)for(var c=-1;1>=c;c++)if(0!=b||0!=c){var d=ig.game.O6112.O8617({x:this.O5682.x+b,y:this.O5682.y+c});if((d&&=ig.game.O4261.getItemBasic(d.tid,
"ent_thr"))&&("STACKHOLD"==d.base||"EMITTER"==d.base||"CONSUMAB"==d.base)){a=d;break}}return a},O2724:function(){return this.O5682?this.O5682.x+":"+this.O5682.y:""},update:function(){this.parent()},draw:function(){this.parent()}})});ig.baked=!0;
ig.module("game.entities.immobile.mntground").requires("impact.entity").defines(function(){window.EntityMntground=ig.Entity.extend({size:{x:38,y:38},O2027:0,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,O6456:!1,O5193:!1,betweenDefaultAndPlayer:!0,baseType:"MNTGROUND",isStack:!0,init:function(a,b,c){this.parent(a,b,c);this.addAnim("main",1,[0]);this.O8393.flip.x=this.O6717?0==this.vel.x?ig.game.chance(50):0<this.vel.x:!this.O9367&&!!((a-b)%2)},update:function(){this.O5193=
this.O6456;(this.O6456=this.touches(ig.game.O1257))&&!this.O5193?2>=ig.game.O1257.rank&&ig.game.actioninfo.open(this,this.pos.x,this.pos.y,"mount",ig.game.attachmentManager.O9284(this.thingTypeId)):!this.O6456&&this.O5193&&ig.game.actioninfo.close(this)},draw:function(){ig.game.attachmentManager.O1273(this)}})});ig.baked=!0;
ig.module("game.entities.immobile.mntair").requires("impact.entity").defines(function(){window.EntityMntair=ig.Entity.extend({size:{x:38,y:38},O2027:0,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,O6456:!1,O5193:!1,betweenDefaultAndPlayer:!0,baseType:"MNTAIR",isStack:!0,init:function(a,b,c){this.parent(a,b,c);this.addAnim("main",1,[0]);this.O8393.flip.x=this.O6717?0==this.vel.x?ig.game.chance(50):0<this.vel.x:!this.O9367&&!!((a-b)%2)},update:function(){this.O5193=
this.O6456;(this.O6456=this.touches(ig.game.O1257))&&!this.O5193?2>=ig.game.O1257.rank&&ig.game.actioninfo.open(this,this.pos.x,this.pos.y,"mount",ig.game.attachmentManager.O9284(this.thingTypeId)):!this.O6456&&this.O5193&&ig.game.actioninfo.close(this)},draw:function(){ig.game.attachmentManager.O1273(this)}})});ig.baked=!0;
ig.module("game.entities.immobile.stackinstr").requires("impact.entity").defines(function(){window.EntityStackinstr=ig.Entity.extend({size:{x:15,y:15},O2027:0,type:ig.Entity.TYPE.B,O7852:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,O6456:!1,O5193:!1,givenName:null,baseType:"STACKINSTR",isStack:!0,init:function(a,b,c){this.givenName=c.givenName;this.parent(a,b,c);this.addAnim("main",1,[0])},update:function(){this.O5193=this.O6456;(this.O6456=ml.Misc.O7862(this,ig.game.O1257))&&!this.O5193?2>=
ig.game.O1257.rank&&ig.game.actioninfo.open(this,this.pos.x,this.pos.y,"play",ig.game.attachmentManager.O9284(this.thingTypeId)):!this.O6456&&this.O5193&&ig.game.actioninfo.close(this)},draw:function(){this.O8393&&ig.game.attachmentManager.O2548(this)},O2550:function(a){this.parent(a)}})});ig.baked=!0;
ig.module("game.ui.panelitem").requires("game.entities.decorative.footdust").defines(function(){window.UIPanelItem=ig.Class.extend({pos:{x:0,y:0},nudge:{x:0,y:0},homePos:{x:0,y:0},size:{x:38,y:19},O1920:4,O1017:0,waggleVel:0,O1747:0,O4004:5,O2348:null,thing:null,timesCd:null,O2500:!1,binable:!1,withStats:!1,O9862:!1,O6241:10,O8971:10,rotation:0,flip:0,O2093:null,O3529:.6,O8662:!1,isOpen:!1,O8517:{timer:null,O1345:2,fadeTime:.5,opacity:.8,O3370:.8},O9878:!0,init:function(a,b,c,d,e,f){this.binable=
d;this.withStats=e;this.parentPanel=f;if((this.thing=a)&&this.thing.dataLoading){var g=this;this.thing.dataLoading.done(function(){g.O6661()});this.pos.x=b;this.pos.y=c;this.homePos.x=b;this.homePos.y=c}else console.error("Broken panel item?")},O6661:function(){this.rotation=this.thing&&this.thing.defRot?this.thing.defRot:0;if(this.thing&&"MIFT"==this.thing.base){var a=this.thing.id;ig.game.panelSet.O2915[a]||ig.game.O9817.O1021(a).done(function(b){ig.game.panelSet.O2915[a]=b})}},O3567:function(){var a=
this;ig.game.O9817.O2289(this.thing.id,this).done(function(b){b&&(a.timesCd=b.timesCd)})},O8299:function(){var a=ig.input.mouse.x,b=ig.input.mouse.y;b=this.pos.y-this.O1920<=b&&b<=this.pos.y+this.size.y;return this.pos.x-this.O1920<=a&&a<=this.pos.x+this.size.x+this.O1920&&b},update:function(){this.withStats&&!this.O9862&&(this.O9862=!0,this.O3567());var a=ig.input.released("click");this.O2008();ig.game.O4774.O3044()&&this.O8299()&&!this.O2500&&(ig.input.state("shift")?ig.game.O7747.O6398(this.thing.id):
ig.input.state("ctrl")&&ig.game.O1795?ig.game.painter.O8725(this.thing.id):ig.game.O1795?ig.game.painter.O3362(this.thing.id):ig.game.itemContextMenu.O9094(this));if(!a&&ig.game.O4774.O4920()&&this.O8299()){if(ig.input.O3657()){ig.game.O6921.O8945();return}if(ig.game.O1795)console.log("hai"),"CHANGER"!=this.thing.base&&("HOLDER"!=this.thing.base||ig.game.O1795&&ig.game.painter.thingReferencesDialog&&ig.game.painter.thingReferencesDialog.isOpen)?(ig.game.sounds.pickup.play(),ig.game.O7747.O1618(this.thing.id,
this,this.parentPanel.panelName,this.thing.name,this.thing.base)):ig.game.O7747.O9935(this.thing.id,this);else{ig.game.areaDialog&&ig.game.areaDialog.isOpen&&"INTERACT"==this.thing.base&&ig.game.areaDialog.O4374(this.thing.id);if(ig.game.areaDialog&&ig.game.areaDialog.isOpen&&"GENERATOR"==this.thing.base)ig.game.areaDialog.O7380(this.thing.id);else if(ig.game.writableDialog&&ig.game.writableDialog.isOpen&&!ig.input.state("ctrl")&&(ig.game.writableDialog.O4917?ig.game.writableDialog.O1090(this.thing):
ig.game.writableDialog.O9701&&ig.game.writableDialog.O2750(this.thing),(!this.thing||"HOLDER"!=this.thing.base||ig.game.writableDialog.O9701)&&this.thing&&"WRITABLE"!=this.thing.base))return;ig.input.state("ctrl")?(this.binable&&(ig.ua.mobile&&ig.O4534.stopAll(),this.parentPanel.removeItem(this.thing)),this.O2348=null):(this.O2500=!0,ig.game.O3199={tid:this.thing.id,rotation:this.rotation,flip:this.flip,O1292:this.thing.O1292&&this.thing.O1292(),rotatable:this.thing.rotatable,flippable:this.thing.flippable,
base:this.thing.base},"boostDragInfo"==ig.game.alertDialog.contextId&&ig.game.alertDialog.close(),this.binable&&(ig.game.isDraggingTilePlacementBinable=!0),this.O2348=new ml.Timer,ig.game.sounds.pickup.play())}}if(!a&&ig.input.state("click")&&this.O2500){ig.game.O3957&&ig.game.O3957.O5184(this.thing)&&this.pos.x<ig.game.panelSet.panelPos.x&&!ig.game.O3957.isOpen&&ig.game.O3957.tryOpen();this.pos.x=ig.input.mouse.x-this.size.x/2;this.pos.y=ig.input.mouse.y-this.size.y/2;(ig.input.pressed("rightclick")||
ig.input.state("ctrl")&&ig.input.pressed("r"))&&ig.game.O6921.O8945();if(ig.ua.mobile){var b=30>=Math.abs(this.homePos.x-ig.input.mouse.x)+Math.abs(this.homePos.y-ig.input.mouse.y);b&&this.O2348&&.75<=this.O2348.delta()&&(this.pos.x=this.homePos.x,this.pos.y=this.homePos.y,ig.game.itemContextMenu.O9094(this),this.O2500=!1,ig.game.O3199=!1,ig.game.isDraggingTilePlacementBinable=!1,this.O2348=null)}ig.game.O3957&&ig.game.O3957.O1372(this.thing)&&ig.game.O3957.isOpen&&ig.game.O3957.O1827({x:this.pos.x,
y:this.pos.y});this.O9878&&ig.game.panelSet&&1===ig.game.panelSet.tabState&&ig.game.panelSet.O6777.O6905()}if(this.O2500&&a&&!ig.input.O3657())if(ig.input.mouse.x<ig.game.panelSet.panelPos.x)ig.game.boostDialog&&ig.game.boostDialog.O1497()?ig.game.boostDialog.O6441(this.thing):ig.game.holderDialog&&ig.game.holderDialog.O1176()?(ig.game.O4774.O6730(),ig.game.holderDialog.addItem(this.thing.id,ig.game.O3199.rotation,ig.game.O3199.flip)):ig.game.multithing&&ig.game.multithing.O1176()?(ig.game.O4774.O6730(),
ig.game.multithing.addItem(this.thing.id,ig.game.O3199.rotation,ig.game.O3199.flip)):(a=!1,ig.game.O3957&&ig.game.O3957.O1372(this.thing)&&ig.game.O3957.isOpen&&(a=ig.game.O3957.O3114({x:this.pos.x,y:this.pos.y},this.thing)),a||("INTERMOT"!=this.thing.base&&"MIFT"!=this.thing.base?ig.game.O4774.O9524()&&ig.game.attachmentManager.O5110(ig.game.O3199.base,this.thing.attributes)&&!ig.game.settings.getGlue(ig.game.attachmentManager.O6854(ig.game.O3199.base))?(ig.game.O1257.O1832=null,ig.game.attachmentManager.O1158(this.thing)):
ig.game.mapPlacementValidation.O9195(this.thing,void 0,!0)&&ig.game.O6112.O9873(this.thing.id,ig.game.O3199.rotation,ig.game.O3199.flip):ig.game.sounds.nocando.play())),this.pos.x=this.homePos.x,this.pos.y=this.homePos.y,this.O2500=!1,ig.game.O3199=!1,ig.game.isDraggingTilePlacementBinable=!1,this.O2348=null;else{b=50>=Math.abs(this.homePos.x-ig.input.mouse.x)+Math.abs(this.homePos.y-ig.input.mouse.y);this.O2500=!1;ig.game.O3199=!1;ig.game.isDraggingTilePlacementBinable=!1;this.pos.x=this.homePos.x;
this.pos.y=this.homePos.y;if(this.binable&&ig.game.panelSet.O3700())this.parentPanel.removeItem(this.thing);else if(ig.game.panelSet.O3303()||ig.game.panelSet.O2486())ig.game.painter.isRunning||(ig.game.panelSet.O9162.O9505(),ig.game.painter.mode="cloneOld"),ig.game.O7747.O1618(this.thing.id,this,this.parentPanel.panelName,this.thing.name),2!=ig.game.panelSet.tabState&&ig.game.panelSet.O6923(2);else if(b&&this.O2348&&.4>=this.O2348.delta()&&this.thing)ig.game.O7747.O9935(this.thing.id,this);else if(this.O9878&&
1===ig.game.panelSet.tabState&&ig.game.panelSet.O7518()){a=ig.game.panelSet.O6777.O3457({x:ig.input.mouse.x,y:ig.input.mouse.y+ig.game.panelSet.O6777.O1466});b=-1;for(var c=0;c<this.parentPanel.tiles.length;c++)if(this.parentPanel.tiles[c].thing.id===this.thing.id){b=c+1;break}b!==-1&&a>b&&a--;ig.game.O7747.O1015(this.thing.id,a);ig.game.O3199=!1}ig.ua.mobile||(this.O2348=null)}},draw:function(){if(this.thing){var a=!0,b=!1;if("MIFT"==this.thing.base){var c=ig.game.panelSet.O2915[this.thing.id],d=
!!c;a=d&&c.isPaid;d||(b=!0);c&&c.isPaid&&!c.deliverySeenBySender&&(ig.game.O2694&&2<=ig.game.O2694.delta()&&0>=ig.game.O6550&&this.thing.img&&this.thing.img.loaded?(b=!1,a=!0,c.deliverySeenBySender=!0,this.O9289(),ig.game.O9817.O6304(c.miftId)):b=!0)}this.O2500&&(ig.system.context.globalAlpha=ig.game.O2435-.2,a?this.thing.draw(this.homePos.x,this.homePos.y,this.rotation,this.flip,1):ig.game.O8159.draw(this.homePos.x,this.homePos.y,ig.system.context.globalAlpha,ig.game.O8159.unverifiedMiftPlaceholder),
ig.system.context.globalAlpha=1);ig.system.context.globalAlpha=ig.game.O2435;this.thing.name&&(c=this.thing.name.length>this.O6241?this.thing.name.substring(0,this.O6241-1)+"..":this.thing.name,ig.system.context.globalAlpha=this.hasDropOverAction?1:ig.game.O2435-.1,ig.game.blackSmallFont.draw(c,this.homePos.x+this.nudge.x,this.homePos.y+this.nudge.y+this.size.y+2),ig.system.context.globalAlpha=ig.game.O2435-.3,c=this.thing.O5083().length>this.O8971?this.thing.O5083().substring(0,this.O8971-1)+"..":
this.thing.O5083(),ig.game.blackSmallFont.draw(c,this.homePos.x+this.nudge.x,this.homePos.y+this.nudge.y+this.size.y+8),ig.system.context.globalAlpha=1,delete this.hasDropOverAction);this.withStats&&this.thing.name&&"MIFT"!=this.thing.base&&(ig.game.O8159.O3783(this.homePos.x+20,this.homePos.y,.3),ig.game.blackFont.alpha=.3,ig.game.blackFont.draw(ig.game.strings.O9754(this.timesCd),this.homePos.x+22,this.homePos.y+10,ig.Font.ALIGN.LEFT),ig.game.blackFont.alpha=1);c="MOTION"==this.thing.base||"INTERMOT"==
this.thing.base?2:null;"DECOFB"==this.thing.base&&(c=1);if(this.O2500)if(a){ig.system.context.globalAlpha=1;a=b=0;(0<=ig.game.O3841.indexOf(this.thing.base)||0<=ig.game.O8463.indexOf(this.thing.base))&&this.thing.img&&this.thing.imagesGenerated?(1<this.thing.cellCount&&(b=this.thing.img.width/this.thing.cellCount,b=b>ig.game.O9925?.5*Math.round(b-ig.game.O9925):9),this.thing.img.height>ig.game.O9925&&(a=.5*-Math.round(this.thing.img.height-ig.game.O9925))):b=9;var e=this.thing.O1292&&this.thing.O1292()?
0:ig.game.O3199.rotation;this.thing.draw(this.pos.x+this.nudge.x+this.O1017+b,this.pos.y+this.nudge.y+a,e,ig.game.O3199.flip,1,c);this.thing.O1292&&this.thing.O1292()&&ig.game.O6921.O8517.timer&&ig.game.O6921.O1239(ig.game.O6921.O8517,this.pos.x+this.nudge.x,this.pos.y+this.nudge.y)}else ig.game.O8159.draw(this.pos.x+9,this.pos.y,.7,ig.game.O8159.unverifiedMiftPlaceholder);else ig.system.context.globalAlpha=ig.game.O2435+.2,b||(a?this.thing&&this.thing.img&&this.thing.imagesGenerated&&("HOLDER"==
this.thing.base?(e=ig.game.holderDialog&&ig.game.holderDialog.isOpen&&ig.game.holderDialog.O5028&&ig.game.holderDialog.holderId==this.thing.id,this.O8397(this.pos.x+this.nudge.x+this.O1017,this.pos.y+this.nudge.y,this.thing.cellCount,e)):"HAPPENING"==this.thing.base?this.O8397(this.pos.x+this.nudge.x+this.O1017,this.pos.y+this.nudge.y,this.thing.cellCount,e):(0<=ig.game.O3841.indexOf(this.thing.base)||0<=ig.game.O8463.indexOf(this.thing.base))&&(.5*this.thing.img.width>ig.game.O9925||this.thing.img.height>
ig.game.O9925)?this.O4705(this.pos.x+this.nudge.x+this.O1017,this.pos.y+this.nudge.y,this.thing.cellCount,this.thing.base,c):this.thing.draw(this.pos.x+this.nudge.x+this.O1017,this.pos.y+this.nudge.y,this.rotation,this.flip,1,c)):ig.game.O8159.draw(this.pos.x,this.pos.y,ig.system.context.globalAlpha,ig.game.O8159.unverifiedMiftPlaceholder));ig.ua.mobile||this.O2500||ig.game.O6921.O3007FromMap||!this.O8299()||ig.input.state("ctrl")||ig.game.O8159.O2930(this.homePos.x+this.nudge.x,this.homePos.y+this.nudge.y);
ig.system.context.globalAlpha=1}},O9289:function(){ig.game.decorator.O2468(this.homePos.x,this.homePos.y,ig.game.O9925,ig.game.O9925,!0);ig.game.sounds.collected.play();setTimeout(function(){ig.game.sounds.new_mift.play()},500);for(var a=[{x:-50,y:0},{x:50,y:0},{x:0,y:-50},{x:0,y:50}],b=0;b<a.length;b++){var c=new ml.AnimationSheet(null,ig.game.O9925,ig.game.O9925,this.thing.img);ig.game.spawnEntity(EntitySpot,this.homePos.x,this.homePos.y,{O7942:10,O4405:90,O2329:2,fadingInc:1.5,uiEntity:!0,vel:a[b],
O6475:!1,animSheet:c,O8060:.05,attribute:"miftSentEffect"})}ig.game.hasMinfinity||setTimeout(function(){ig.game.alertDialog.open('<p class="miftThankYouMessage">Thank you for supporting<br/>Manyzens & Thingistan!</p>',!0,null,null,null,!0,null,null,!0,null,null,!0)},2E3)},O8029:function(){if(this.checkWritableNewsTimer&&30<=this.checkWritableNewsTimer.delta())if(this.checkWritableNewsTimer=null,ig.game.writableDialog.isOpen&&ig.game.writableDialog.forumId==this.thing.id)this.checkWritableNewsTimer=
new ml.Timer;else{var a=localStorage.getItem("forumLastKnownCommentId_"+this.thing.id);if(a){var b=this;ig.game.O9817.O1272(this.thing.id,null).done(function(c){c&&c.id&&a!=c.id&&(ig.game.writableDialog.isOpen&&ig.game.writableDialog.forumId==b.thing.id||(b.waggle(),ig.game.sounds.shortWhoosh.play()),ig.game.O5285.setItem("forumLastKnownCommentId_"+b.thing.id,c.id));b.checkWritableNewsTimer=new ml.Timer})}}},O4705:function(a,b,c,d,e){a=ig.system.O8551(a);b=ig.system.O8551(b);c=this.thing.img.width/
c;d=this.thing.img.height;var f="created"==this.parentPanel.panelName?ig.game.O9925:c,g=d>ig.game.O9925?ig.game.O9925:d;f>c&&(f=c);g>d&&(g=d);f>ig.game.O4975&&(f=ig.game.O4975);f*=ig.system.scale;g*=ig.system.scale;ig.system.context.drawImage(this.thing.img.data,0,0,f,g,a,b,f,g);e&&ig.system.context.drawImage(this.thing.img.data,c*e*ig.system.scale,0,f,g,a,b,f,g)},O8397:function(a,b,c,d){a=ig.system.O8551(a);b=ig.system.O8551(b);c=ig.game.O9925*ig.system.scale;var e=ig.game.O9925*ig.system.scale,
f=5*ig.system.scale,g=10*ig.system.scale;d&&(f+=29*ig.system.scale);ig.system.context.drawImage(this.thing.img.data,f,g,c,e,a,b,c,e)},waggle:function(){this.waggleVel=2},O2008:function(){0!=this.waggleVel&&(this.O1747<=this.O4004?(this.O1017+=this.waggleVel,2<Math.abs(this.O1017)&&(this.waggleVel=-this.waggleVel,this.O1747++)):this.O1747=this.O1017=this.waggleVel=0)}})});ig.baked=!0;
ig.module("game.ui.panel").requires("game.ui.panelitem").defines(function(){window.UIPanel=ig.Class.extend({panelPos:{x:0,y:0},panelSize:{x:0,y:0},panelPadding:{x:8,y:9},O5649:0,buttonUpPos:{x:0,y:0},buttonDownPos:{x:0,y:0},O5452:9,O5279:5,O2705:.4,tiles:[],tilePage:1,O1875:10,moreTiles:!1,O6488:0,lastPage:0,panelName:"unknown",O9401:!1,O2182:!1,showStats:!1,O6808:38,O6025:1,O5946:null,O7004:1,O2546Countdown:-1,O2114:null,O7594:0,O5963:.5,isOpen:!1,isOpenOld:!1,O2564:!1,init:function(a,b,c){this.panelPos.x=
a;this.panelPos.y=b;this.panelSize=c;this.bottomYPos=this.panelPos.y+this.panelSize.y;this.buttonUpPos={x:this.panelPos.x+40,y:this.panelPos.y+6};this.buttonDownPos={x:this.panelPos.x+40,y:this.bottomYPos-9};this.O2114=ig.game.O8159.getImage(ig.game.O8159.pagingPosition)},O1266:function(){console.error("tilePanel loadtiles not overridden")},O4959:function(a,b,c,d){this.tiles=[];for(var e=0;e<a.length;e++){var f=a[e],g=0,h=e*this.O6808;g+=this.panelPos.x+this.panelPadding.x;h+=this.panelPos.y+this.panelPadding.y;
this.tiles.push(new UIPanelItem(f,g,h,this.O2182,this.showStats,this))}this.moreTiles=b;this.lastPage=c;this.O6488=d;this.O9401=!0;this.O9205()},update:function(){ig.game.playerDialog&&ig.game.playerDialog.dialogStates&&(ig.game.playerDialog.O3191==ig.game.playerDialog.dialogStates.VISITED||ig.game.playerDialog.O3191==ig.game.playerDialog.dialogStates.MIFTS||ig.game.playerDialog.O3191==ig.game.playerDialog.dialogStates.PEOPLE)||ig.game.holderDialog&&ig.game.holderDialog.O1176()||ig.game.cloneHistoryDialog&&
ig.game.cloneHistoryDialog.O1176()||this.O8575();this.O8917()},O6699:function(a){return Math.floor(a/this.O1875)+1},O9287:function(a){this.tilePage=a;return this.O1266()},O8917:function(){if(this.O9401){for(var a=0;a<this.tiles.length;a++)this.tiles[a].nudge={x:0,y:0};for(a=0;a<this.tiles.length;a++)this.tiles[a].update()}},O8575:function(){var a=0;1<this.tilePage&&(ig.input.pressed("wheelup")||ig.game.O4774.O7739(this.buttonUpPos.x-this.O5279,this.buttonUpPos.y-this.O5279,this.buttonUpPos.x+this.O5452+
this.O5279,this.buttonUpPos.y+this.O5452+this.O5279))?(ig.game.O4774.O6730(!0),a=-1):this.tilePage<this.lastPage&&this.moreTiles&&(ig.input.pressed("wheeldown")||ig.game.O4774.O7739(this.buttonDownPos.x-this.O5279,this.buttonDownPos.y-this.O5279,this.buttonDownPos.x+this.O5452+this.O5279,this.buttonDownPos.y+this.O5452+this.O5279))&&(ig.game.O4774.O6730(!0),a=1);0!=a&&(this.O7594+=10,100<this.O7594&&(this.O7594=100),this.O2546Countdown+=3,13<=this.O2546Countdown?(this.O2546Countdown=1,this.O7594=
100,this.tilePage=0>a?1:this.lastPage):this.tilePage=(this.tilePage+a).limit(0,this.lastPage),ig.game.sounds.click.play());0<=this.O2546Countdown&&(this.O2546Countdown--,0==this.O2546Countdown&&(this.O1266(),ig.game.O3957&&ig.game.O3957.O8855("search")));0<this.O7594&&(this.O7594-=.75)},draw:function(){this.O3483();this.O6512();this.O8151();!ig.game.panelSet.musicPlayer.O8112()&&ig.game.O6921&&null!==ig.game.O6921.originTileLocation.x&&this.drawBin();this.O9153();this.O4599()},O3483:function(){ig.system.context.globalAlpha=
ig.game.O2435;ig.game.O8159.O9722(this.panelPos.x,this.panelPos.y);ig.game.O8159.O8275(this.panelPos.x,this.bottomYPos);ig.system.context.globalAlpha=1;this.O9427()},O9427:function(){var a=ig.system.context;a.beginPath();a.fillStyle=ig.game.panelRgb?"rgba("+ig.game.panelRgb.fill.join(",")+","+ig.game.O2435+")":"rgba(195,181,171,"+ig.game.O2435+")";a.rect(this.panelPos.x*ig.system.scale,(this.panelPos.y+6)*ig.system.scale,3*ig.system.scale,(this.panelSize.y-6)*ig.system.scale);a.fill();a.beginPath();
a.rect((this.panelPos.x+this.panelSize.x-3)*ig.system.scale,(this.panelPos.y+6)*ig.system.scale,3*ig.system.scale,(this.panelSize.y-6)*ig.system.scale);a.fill();a.beginPath();a.fillStyle=ig.game.panelRgb?"rgba("+ig.game.panelRgb.fillDark.join(",")+","+ig.game.O2435+")":"rgba(135,126,119,"+ig.game.O2435+")";a.rect((this.panelPos.x+3)*ig.system.scale,(this.panelPos.y+6)*ig.system.scale,(this.panelSize.x-6)*ig.system.scale,(this.panelSize.y-6)*ig.system.scale);a.fill();a.closePath()},O6512:function(){1<
this.tilePage&&ig.game.O4774.O6559(this.buttonUpPos.x-this.O5279,this.buttonUpPos.y-this.O5279,this.buttonUpPos.x+this.O5452+this.O5279,this.buttonUpPos.y+this.O5452+this.O5279)&&(ig.game.O4774.O7551(),ig.system.context.globalAlpha=this.O2705,ig.game.O8159.O6068(this.buttonUpPos.x-this.O5279+2,this.buttonUpPos.y-this.O5279));1<this.tilePage&&ig.game.O8159.O5112(this.buttonUpPos.x,this.buttonUpPos.y,ig.game.O2435-.3);this.moreTiles&&ig.game.O4774.O6559(this.buttonDownPos.x-this.O5279,this.buttonDownPos.y-
this.O5279,this.buttonDownPos.x+this.O5452+this.O5279,this.buttonDownPos.y+this.O5452+this.O5279)&&(ig.game.O4774.O7551(),ig.system.context.globalAlpha=this.O2705,ig.game.O8159.O6068(this.buttonDownPos.x-this.O5279+2,this.buttonDownPos.y-this.O5279));this.moreTiles&&ig.game.O8159.O9461(this.buttonDownPos.x,this.buttonDownPos.y,ig.game.O2435-.3);ig.system.context.globalAlpha=1},O8151:function(){if(this.O9401){for(var a=-1,b=0;b<this.tiles.length;b++)this.tiles[b].O2500?a=b:this.tiles[b].draw();-1<
a&&this.tiles[a].draw()}},drawBin:function(){ig.system.context.globalAlpha=ig.game.O2435+.2;this.O2564=!1;ig.game.O6921.O3007FromMap||ig.game.isDraggingTilePlacementBinable?ig.game.panelSet.O3700()?(ig.game.O8159.O6480(ig.game.panelSet.binLocation.x,ig.game.panelSet.binLocation.y-2),this.O2564=!0):this.binShowDelayTimer?this.binShowDelayTimer.delta()>=this.O5963&&(ig.game.O8159.O9214(ig.game.panelSet.binLocation.x,ig.game.panelSet.binLocation.y-1),ig.game.O3310&&ig.game.O8159.drawPanelBinMessage(ig.game.panelSet.binLocation.x+
14,ig.game.panelSet.binLocation.y),ig.game.O3310&&ig.game.O3199.rotatable&&ig.game.O8159.O6689(ig.game.panelSet.binLocation.x-19,ig.game.panelSet.binLocation.y),this.O2564=!0):this.binShowDelayTimer=new ml.Timer:this.binShowDelayTimer=null;ig.system.context.globalAlpha=1;this.O5946&&(this.O5946.delta()<=this.O7004?(this.O5946.delta()>=this.O7004-.5&&(0<this.O6025?this.O6025-=.1:this.O5946=null),ig.game.O8159.O9214(ig.game.panelSet.binLocation.x+(4*Math.random()-2),ig.game.panelSet.binLocation.y+(4*
Math.random()-2),this.O6025)):this.O5946=null);return this.O2564},O9153:function(){if(10<=this.lastPage&&0<this.O7594){ig.system.context.globalAlpha=(.01*this.O7594).limit(0,.5);var a=0;0<this.tilePage&&(a=(this.tilePage-1)/this.lastPage);a*=this.panelSize.y-12-this.O5649;this.O2114.draw(Math.floor(this.panelPos.x+this.panelSize.x-11),Math.floor(this.panelPos.y+this.panelPadding.y+a));ig.system.context.globalAlpha=1}},O4599:function(){},O9205:function(){},O3798:function(a){this.isOpenOld=this.isOpen;
this.isOpen=a},O4979:function(){this.O5946=new ml.Timer;this.O6025=1}})});ig.baked=!0;
ig.module("game.entities.decorative.sparkle").requires("impact.entity").defines(function(){window.EntitySparkle=ig.Entity.extend({size:{x:5,y:5},type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,O2027:0,opacity:100,O4029:!1,decorative:!0,O6385:!1,delayMS:0,delaySeconds:0,O5585:null,init:function(a,b,c){this.animSheet=new ml.AnimationSheet(null,this.size.x,this.size.y,ig.game.O8159.getImage(c.O5856?c.O5856:ig.game.O8159.sparkle));this.parent(a,b,c);this.delaySeconds=
this.delayMS?this.delayMS/1E3:0;this.O5585=new ml.Timer},update:function(){this.O6385||(this.O6385=this.O5585.delta()>=this.delaySeconds)&&this.addAnim("sparkle",.05,[0,1,2,1,0]);this.O6385&&(0<this.anims.sparkle.loopCount&&this.kill(),this.O8393&&this.O8393.update(),this.O8393.alpha=.01*this.opacity,this.parent())},draw:function(){this.O6385&&(this.uiEntity?this.O8393&&this.O8393.draw(this.pos.x,this.pos.y):this.parent())},O2550:function(a){this.O6385&&(this.pos.x+=this.vel.x*ig.system.tick,this.pos.y+=
this.vel.y*ig.system.tick)},check:function(){}})});ig.baked=!0;
ig.module("game.entities.decorative.dust").requires("impact.entity").defines(function(){window.EntityDust=ig.Entity.extend({size:{x:6,y:5},maxVel:{x:100,y:100},friction:{x:0,y:0},type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,opacity:90,O6875:10,decay:2,O8608:0,decorative:!0,init:function(a,b,c){this.parent(a,b,c);this.O2027=0;this.animSheet=new ml.AnimationSheet(null,this.size.x,this.size.y,ig.game.O8159.getImage(ig.game.O8159.dust));this.addAnim("main",1,[0]);
this.decay*=ig.game.targetFps},update:function(){this.opacity-=this.decay*ig.system.tick;0>=this.opacity?(this.opacity=0,this.kill()):(this.last.x=this.pos.x,this.last.y=this.pos.y,this.O8608||(2<Math.abs(this.vel.x)&&(this.vel.x-=this.vel.x/this.O6875),2<Math.abs(this.vel.y)&&(this.vel.y-=this.vel.y/this.O6875)),this.pos.x+=this.vel.x*ig.system.tick,this.pos.y+=this.vel.y*ig.system.tick)},draw:function(){this.O3004&&ml.Misc.O5847("lighter");ig.system.context.globalAlpha=.01*this.opacity;this.uiEntity?
this.O8393&&this.O8393.draw(this.pos.x,this.pos.y):this.parent();ig.system.context.globalAlpha=1;this.O3004&&ml.Misc.O3715()},check:function(){}})});ig.baked=!0;
ig.module("game.entities.decorative.bigdust").requires("impact.entity").defines(function(){window.EntityBigDust=ig.Entity.extend({size:{x:9,y:9},maxVel:{x:100,y:100},friction:{x:0,y:0},type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,opacity:90,O6875:10,O8608:0,decay:2,windx:0,windy:0,decorative:!0,init:function(a,b,c){this.parent(a,b,c);this.O2027=0;this.animSheet=new ml.AnimationSheet(null,this.size.x,this.size.y,ig.game.O8159.getImage(ig.game.O8159.bigDust));
this.addAnim("main",1,[0]);this.pos.x-=3;this.pos.y-=3;this.decay*=ig.game.targetFps},update:function(){this.opacity-=this.decay*ig.system.tick;0>=this.opacity?(this.opacity=0,this.kill()):(this.last.x=this.pos.x,this.last.y=this.pos.y,this.O8608?this.vel.x-=this.O8608:(2<Math.abs(this.vel.x)&&(this.vel.x-=this.vel.x/this.O6875),2<Math.abs(this.vel.y)&&(this.vel.y-=this.vel.y/this.O6875)),this.vel.x+=this.windx,this.vel.y+=this.windy,this.pos.x+=this.vel.x*ig.system.tick,this.pos.y+=this.vel.y*ig.system.tick)},
draw:function(){this.O3004&&ml.Misc.O5847("lighter");ig.system.context.globalAlpha=.01*this.opacity;this.uiEntity?this.O8393&&this.O8393.draw(this.pos.x,this.pos.y):this.parent();ig.system.context.globalAlpha=1;this.O3004&&ml.Misc.O3715()},check:function(){}})});ig.baked=!0;
ig.module("game.entities.decorative.liquiddrop").requires("impact.entity").defines(function(){window.EntityLiquidDrop=ig.Entity.extend({size:{x:2,y:2},maxVel:{x:400,y:800},friction:{x:0,y:0},offset:{x:0,y:0},type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.B,collides:ig.Entity.COLLIDES.PASSIVE,opacity:50,decorative:!0,O2329:1,O8204:null,fading:!1,fadingInc:240,bounciness:0,O6385:!1,delayMS:0,delaySeconds:0,O5585:null,init:function(a,b,c){this.parent(a,b,c);this.animSheet=new ml.AnimationSheet(null,this.size.x,
this.size.y,ig.game.O8159.getImage(ig.game.O8159.whitePixel));this.addAnim("main",1,[0]);this.delaySeconds=this.delayMS?this.delayMS/1E3:0;this.O5585=new ml.Timer},update:function(){!this.O6385&&(this.O6385=this.O5585.delta()>=this.delaySeconds)&&(this.O8204=new ml.Timer);if(this.O6385){if(this.fading||this.O8204.delta()>this.O2329)this.opacity-=this.fadingInc*ig.system.tick;0>=this.opacity&&this.kill();this.O8393.alpha=.01*this.opacity;this.parent()}},check:function(a){this.O6385&&(a instanceof EntityLqdflip||
a instanceof EntityLiquid)&&(0<this.vel.y&&(this.vel.y/=6),this.fading=!0)},O2534:function(a,b){this.O6385&&this.stick("x"==b)},O2550:function(a){this.O6385&&((a.collision.y||a.collision.x)&&this.stick(a.collision.x),this.parent(a))},stick:function(a){this.O6385&&(a?(this.size.x=1,this.offset.x=-1,this.O8393.sheet.width=1):(this.size.y=1,this.offset.y=-1,this.O8393.sheet.height=1),this.vel.x=0,this.O2027=this.vel.y=0,this.fading=!0)}})});ig.baked=!0;
ig.module("game.entities.decorative.airbubble").requires("impact.entity").defines(function(){window.EntityAirBubble=ig.Entity.extend({size:{x:2,y:2},maxVel:{x:40,y:40},friction:{x:0,y:0},offset:{x:0,y:2},type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.B,collides:ig.Entity.COLLIDES.PASSIVE,opacity:60,decorative:!0,O2027:-.6,O2329:.8,O8204:null,fading:!1,fadingInc:180,init:function(a,b,c){this.parent(a,b,c);this.animSheet=new ml.AnimationSheet(null,this.size.x,this.size.y,ig.game.O8159.getImage(ig.game.O8159.whitePixel));
this.addAnim("main",1,[0]);this.O8204=new ml.Timer},update:function(){if(this.fading||this.O8204.delta()>this.O2329)this.opacity-=this.fadingInc*ig.system.tick;0>=this.opacity?this.kill():(this.O8393.alpha=.01*this.opacity,this.parent())},check:function(a){a instanceof EntityLqdflip||a instanceof EntityLiquid||this.kill()}})});ig.baked=!0;
ig.module("game.entities.decorative.spot").requires("impact.entity").defines(function(){window.EntitySpot=ig.Entity.extend({size:{x:2,y:2},maxVel:{x:400,y:800},friction:{x:0,y:0},offset:{x:0,y:0},type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,O9159:null,opacity:50,O4405:50,O7942:0,O6475:!0,O2329:2,O8204:null,O8546:!1,fading:!1,fadingInc:2,bounciness:0,O2027:0,rectangle:null,O1708:0,O8888:0,O9367:!1,uiEntity:!1,O2601:!1,init:function(a,b,c){this.id=++ig.Entity._lastId;
this.pos.x=a;this.pos.y=b;c.vel&&(this.vel.x=c.vel.x,this.vel.y=c.vel.y);this.uiEntity=!!c.uiEntity;this.O9367=!!c.O9367;c.rectangle&&(this.rectangle=c.rectangle);c.O2601&&(this.O2601=c.O2601);a=null;this.rectangle||(a=c.O5856?c.O5856:ig.game.O8159.whitePixel);b=["emittingLeft","emittingRight"];if(0<="mist reflections colorReflections sunshine glimmer glitter colorGlitter brightEmitting bristling bright rainCloud snowCloud heat lineSparks miftSentEffect".split(" ").indexOf(c.attribute)||c.isLighter)this.O9159=
"lighter";c.O7942&&(this.O7942=c.O7942,this.opacity=1);c.opacity&&(this.opacity=c.opacity);c.O4405&&(this.O4405=c.O4405);c.O2329&&(this.O2329=c.O2329);c.fadingInc&&(this.fadingInc=c.fadingInc);c.O8546&&(this.O8546=c.O8546);c.O2027&&(this.O2027=c.O2027);c.O1708&&(this.O1708=c.O1708);null!=c.O6475&&void 0!=c.O6475&&(this.O6475=c.O6475);c.decorative&&(this.decorative=c.decorative);c.O8060&&(this.O8060=c.O8060);this.rectangle||(c.animSheet?this.animSheet=c.animSheet:(this.size={x:a.width,y:a.height},
this.animSheet=new ml.AnimationSheet(null,this.size.x,this.size.y,ig.game.O8159.getImage(a))),this.addAnim("main",1,[c.cellToUse?c.cellToUse:0]),c.animSheet&&-1==b.indexOf(c.attribute)&&!c.nonFlipping&&(this.O8393.flip.x=1<=this.vel.x),c.flipX&&(this.O8393.flip.x=c.flipX));this.O8204=new ml.Timer;this.O7942*=ig.game.targetFps;this.fadingInc*=ig.game.targetFps},update:function(){if(this.O2601){var a=ig.game.farBackManager.O7858(this);this.offset.x=-1*a.x;this.offset.y=-1*a.y}0!=this.O7942&&(this.opacity+=
this.O7942*ig.system.tick,this.opacity>this.O4405&&(this.opacity=this.O4405,this.O7942=0));this.O1401();0!=this.O8060&&this.O8393&&(this.O8393.angle+=this.O8060);if(this.fading||this.O8204.delta()>this.O2329)this.O7942=0,this.opacity-=this.fadingInc*ig.system.tick;0>=this.opacity?this.kill():this.O8393&&(this.O8393.alpha=.01*this.opacity);this.parent()},O1401:function(){if(this.O1708||this.O8888)0>this.O1708?this.O8888+=.1:0<this.O1708&&(this.O8888-=.1),this.O1708+=this.O8888},draw:function(){this.O8546&&
(ig.system.context.fillStyle="rgba(255,255,255,"+.75*this.O8393.alpha+")",ig.system.context.fillRect(0,0,ig.system.realWidth,ig.system.O5809));var a=null;this.O1708&&(a=ig.game.O4507(this.pos),Math.abs(this.vel.x)>Math.abs(this.vel.y)?this.pos.y+=this.O1708:this.pos.x+=this.O1708);this.O9159?(ml.Misc.O5847(this.O9159),this.rectangle?this.O1264():this.uiEntity?this.O8393&&this.O8393.draw(this.pos.x,this.pos.y):this.parent(),ml.Misc.O3715()):(ml.Misc.O3715(),this.rectangle?this.O1264():this.uiEntity?
this.O8393&&this.O8393.draw(this.pos.x,this.pos.y):this.parent());this.O1708&&(this.pos=ig.game.O4507(a))},O5859:function(a){var b=ig.system.scale;return{x:(a.x-ig.game._rscreen.x)*b,y:(a.y-ig.game._rscreen.y)*b,width:a.width*b,height:a.height*b}},O1264:function(){if(this.rectangle.rgb){var a=ig.system.context,b={x:this.pos.x,y:this.pos.y,width:this.rectangle.width,height:this.rectangle.height};b=this.O5859(b);a.fillStyle="rgba("+this.rectangle.rgb+","+(2*this.opacity/100).limit(0,1)+")";a.fillRect(b.x,
b.y,b.width,b.height)}},check:function(a){},O2534:function(a,b){},O2550:function(a){this.pos.x+=this.vel.x*ig.system.tick;this.pos.y+=this.vel.y*ig.system.tick}})});ig.baked=!0;
ig.module("game.entities.decorative.fakeitem").requires("impact.entity").defines(function(){window.EntityFakeItem=ig.Entity.extend({size:{x:19,y:19},O2027:0,type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,decay:1,opacity:30,init:function(a,b,c){this.parent(a,b,c);this.addAnim("main",1,[0])},update:function(){0>=this.opacity&&this.kill();this.opacity-=this.decay;0>=this.opacity&&(this.opacity=0);this.O8393.alpha=this.opacity/100},draw:function(){this.parent()},
O2550:function(a){},check:function(a){}})});ig.baked=!0;
ig.module("game.entities.decorative.fakeitemcollecting").requires("impact.entity").defines(function(){window.EntityFakeItemCollecting=ig.Entity.extend({size:{x:19,y:19},maxVel:{x:1E3,y:1E3},O2027:0,type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,destinationPos:{x:0,y:0},opacity:40,posDifference:{x:0,y:0},O2443:0,O8057:0,scale:1,velFactor:2,player:null,catching:!1,init:function(a,b,c){this.parent(a,b,c);this.addAnim("main",1,[0]);this.O8393.alpha=this.opacity/100;
this.posDifference.x=this.destinationPos.x-this.pos.x;this.posDifference.y=this.destinationPos.y-this.pos.y;this.vel.x=this.posDifference.x*this.velFactor;this.vel.y=this.posDifference.y*this.velFactor;this.O2443=Math.sqrt(this.posDifference.x*this.posDifference.x+this.posDifference.y*this.posDifference.y)},update:function(){this.posDifference.x=this.destinationPos.x-this.pos.x;this.posDifference.y=this.destinationPos.y-this.pos.y;this.O8057=Math.sqrt(this.posDifference.x*this.posDifference.x+this.posDifference.y*
this.posDifference.y);80>this.O8057&&!this.catching&&(this.catching=!0);20>this.O8057&&(this.opacity=Math.max(0,this.opacity-10));10>this.O8057&&this.kill();this.O8393.alpha=this.opacity/100;this.parent()},draw:function(){this.parent()},O2550:function(a){this.pos.x+=this.vel.x*ig.system.tick;this.pos.y+=this.vel.y*ig.system.tick},check:function(a){}})});ig.baked=!0;
ig.module("game.entities.decorative.ghost").requires("impact.entity").defines(function(){window.EntityGhost=ig.Entity.extend({pos:{x:0,y:0},size:{x:0,y:0},vel:{x:0,y:0},maxVel:{x:400,y:800},friction:{x:10,y:10},rotation:0,O8060:0,energy:100,O5115:-.25,O7422:!0,type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,interactive:!1,O8376:!0,init:function(a,b,c){var d=c.O8766;d&&d.animSheet&&(this.pos.x=a,this.pos.y=b,this.size={x:d.animSheet.width,y:d.animSheet.height},
this.vel.x=1.1*c.O8985.x,this.vel.y=1.1*c.O8985.y,this.animSheet=d.animSheet,this.O8393=this.animNormal=new ml.Animation(c.O8766.animSheet,1,[0]),this.O8393.flip.x=c.O8766.O8393.flip.x,this.O8393.angle=0,this.O8060=.05*(this.O8393.flip.x?1:-1),"MNTAIR"==d.base&&(this.O8393=this.animFlap=new ml.Animation(this.animSheet,.5,[1,0]),this.O8393.flip.x=c.O8766.O8393.flip.x,this.O2027=this.O8393.angle=0,this.vel.y=-100,this.O8060=0))},update:function(){0<this.vel.y&&ig.game.chance(16)&&ig.game.O9759(EntityDust,
this.pos.x+this.size.x/2,this.pos.y+this.size.y/2);this.energy+=this.O5115;0>=this.energy&&this.kill();this.O8393&&(this.O8393.angle+=this.O8060);this.parent()},O2550:function(a){this.pos.x+=this.vel.x*ig.system.tick;this.pos.y+=this.vel.y*ig.system.tick}})});ig.baked=!0;
ig.module("game.core.decorator").requires("game.entities.decorative.sparkle","game.entities.decorative.dust","game.entities.decorative.bigdust","game.entities.decorative.liquiddrop","game.entities.decorative.airbubble","game.entities.decorative.spot","game.entities.decorative.fakeitem","game.entities.decorative.fakeitemcollecting","game.entities.decorative.ghost").defines(function(){window.Decorator=ig.Class.extend({maxDistanceForTrails:1E3,O9433:function(a){this.O8389(a.pos)},O6626:function(a){var b;
var c=b=16;a&&(a.attachments.b&&(c=a.attachments.b.animSheet.width-5,b=a.attachments.b.animSheet.height),this.O2468(a.pos.x-3,a.pos.y-3,c,b,!1))},O2468:function(a,b,c,d,e,f){f=f?f:10;a-=5;b-=5;c=(c?c:19)+5;d=(d?d:19)+5;for(var g=0;g<f;g++)this.O4360(a,b,c,d,e,100*g)},O3835:function(){ig.game.decorator.O2468(ig.game.areaCenterLocation.x*ig.game.O9925,ig.game.areaCenterLocation.y*ig.game.O9925,null,null,!1,25)},O8009:function(a,b,c,d,e){e=e?e:10;a-=5;b-=5;this.O8902(a,b,c,d);for(var f=0;f<e;f++)this.O8902(a,
b,c,d,70*f)},O9250:function(a,b,c){ig.game.O9759(EntitySparkle,a,b,{uiEntity:c})},O4360:function(a,b,c,d,e,f){ig.game.O9759(EntitySparkle,a+c*Math.random(),b+d*Math.random(),{uiEntity:e,delayMS:f})},O8902:function(a,b,c,d){if(c||d)c+=c*(Math.random()-.5)/10,d+=d*(Math.random()-.5)/10;c={uiEntity:!1,vel:{x:c,y:d},O5856:ig.game.O8159.actionSparkle};ig.game.O9759(EntitySparkle,a+2+15*Math.random(),b+5+15*Math.random(),c)},O1403:function(a){var b=a.pos.x+4;a=a.pos.y-3;ig.game.O9759(EntityDust,b,a,{vel:{x:-20+
this.mRnd(10),y:15+this.mRnd(10)}});ig.game.O9759(EntityDust,b,a,{vel:{x:-40+this.mRnd(10),y:15+this.mRnd(10)}});ig.game.O9759(EntityDust,b,a,{vel:{x:20+this.mRnd(10),y:15+this.mRnd(10)}});ig.game.O9759(EntityDust,b,a,{vel:{x:40+this.mRnd(10),y:15+this.mRnd(10)}})},O4005:function(a,b,c,d){ig.game.sounds&&ig.game.sounds.instruments&&(b=(c-ig.game.sounds.instruments[b].minOctave)*ig.game.sounds.tones.length+ig.game.sounds.tones.indexOf(d),0<b&&(b/=2.5),b=a.pos.x-3+b,a.O8393&&a.O8393.flip.x&&(b-=3),
ig.game.O9759(EntitySparkle,b,a.pos.y+3,{vel:{x:0,y:-20}}))},playingInstrumentKitNumber:function(a,b,c){ig.game.painter&&ig.game.painter.types&&ig.game.sounds&&ig.game.sounds.instruments&&(b=a.pos.x-3+c/(ig.game.sounds.instruments[b].max/ig.game.painter.types.instrument.O9925.width+.1),a.O8393&&a.O8393.flip.x&&(b-=3),ig.game.O9759(EntitySparkle,b,a.pos.y+3,{vel:{x:0,y:-20}}))},O7566:function(a){var b=a.pos.x+7+ig.game.O4293(-7,7);a=a.pos.y+7+ig.game.O4293(-7,7);ig.game.O9759(EntitySparkle,b,a,{vel:{x:0,
y:-20}})},O6655:function(a){if(!ig.game.O7456.O5687||ig.game.chance(10)){var b=a.pos.x+4,c=a.pos.y+9;a=Math.abs(a.vel.x)+Math.abs(a.vel.y);for(var d=Math.min(a/10,90),e=0;e<Math.round(a/50);e++)this.chance(5)&&ig.game.O9759(EntityDust,b+this.mRnd(12),c+this.mRnd(12),{vel:{x:0,y:0},O8608:.1,opacity:d,decay:.8,zIndex:-1})}},O1631:function(a,b){var c,d,e,f;b?1==b&&(c=a.pos.x,d=a.pos.y+8,f=-50,e=50):(c=a.pos.x+4,d=a.pos.y+17,f=-50,e=40);ig.game.O9759(EntityBigDust,c,d,{vel:{x:-e/2+this.mRnd(10),y:f+this.mRnd(10)}});
ig.game.O9759(EntityBigDust,c,d,{vel:{x:-e+this.mRnd(10),y:f+this.mRnd(10)}});ig.game.O9759(EntityBigDust,c,d,{vel:{x:e/2+this.mRnd(10),y:f+this.mRnd(10)}});ig.game.O9759(EntityBigDust,c,d,{vel:{x:e+this.mRnd(10),y:f+this.mRnd(10)}})},O4707:function(a){var b=a.pos.x+a.size.x/2-2;a=a.pos.y+a.size.y;ig.game.O9759(EntityDust,b,a,{vel:{x:-20+this.mRnd(10),y:-10+this.mRnd(10)}});ig.game.O9759(EntityDust,b,a,{vel:{x:20+this.mRnd(10),y:-10+this.mRnd(10)}})},O3148:function(a){var b=a.pos.x+a.size.x/2-2;a=
a.pos.y+a.size.y-5;ig.game.O9759(EntityDust,b,a,{vel:{x:-20+this.mRnd(10),y:-10+this.mRnd(10)}});ig.game.O9759(EntityDust,b,a,{vel:{x:20+this.mRnd(10),y:-10+this.mRnd(10)}})},O7237:function(a){var b=a.pos.x+a.size.x/2-2;a=a.pos.y+a.size.y;ig.game.O9759(EntityBigDust,b,a,{vel:{x:-20+this.mRnd(10),y:-20+this.mRnd(10)}});ig.game.O9759(EntityBigDust,b,a,{vel:{x:-40+this.mRnd(10),y:-20+this.mRnd(10)}});ig.game.O9759(EntityBigDust,b,a,{vel:{x:20+this.mRnd(10),y:-20+this.mRnd(10)}});ig.game.O9759(EntityBigDust,
b,a,{vel:{x:40+this.mRnd(10),y:-20+this.mRnd(10)}})},O4822:function(a){if((!ig.game.O7456.O5687||ig.game.isEditorHere)&&!this.O6157()&&.3>=100*Math.random()&&ig.game.O5119.default&&300>=ig.game.O5119.default.length){var b=a.x+9+ig.game.O4293(-4,4);a=a.y+9+ig.game.O4293(-4,4);var c={x:ig.game.O4293(-2,2),y:ig.game.O4293(-2,2)};ig.game.O9759(EntitySpot,b,a,{O5856:ig.game.O8159.dust,O7942:.3,O4405:30,O2329:3,fadingInc:1,vel:c})}},O7564:function(a,b){var c=a.x+9;a=a.y+9;ig.game.O9759(this.O4801(40,EntityDust,
EntityBigDust),c+this.mRnd(10),a+this.mRnd(10),{vel:{x:-20+this.mRnd(10),y:-10+this.mRnd(10)},uiEntity:b,decay:1.3,windy:-.5});ig.game.O9759(this.O4801(40,EntityDust,EntityBigDust),c+this.mRnd(10),a+this.mRnd(10),{vel:{x:-10+this.mRnd(10),y:-5+this.mRnd(10)},uiEntity:b,decay:1.3,windy:-.5});ig.game.O7456.O5687||(ig.game.O9759(this.O4801(40,EntityDust,EntityBigDust),c+this.mRnd(10),a+this.mRnd(10),{vel:{x:-20+this.mRnd(10),y:10+this.mRnd(10)},uiEntity:b,decay:1.3,windy:-.5}),ig.game.O9759(this.O4801(40,
EntityDust,EntityBigDust),c+this.mRnd(10),a+this.mRnd(10),{vel:{x:20+this.mRnd(10),y:-10+this.mRnd(10)},uiEntity:b,decay:1.3,windy:-.5}),ig.game.O9759(this.O4801(40,EntityDust,EntityBigDust),c+this.mRnd(10),a+this.mRnd(10),{vel:{x:20+this.mRnd(10),y:10+this.mRnd(10)},uiEntity:b,decay:1.3,windy:-.5}),ig.game.O9759(this.O4801(40,EntityDust,EntityBigDust),c+this.mRnd(10),a+this.mRnd(10),{vel:{x:-10+this.mRnd(10),y:5+this.mRnd(10)},uiEntity:b,decay:1.3,windy:-.5}),ig.game.O9759(this.O4801(40,EntityDust,
EntityBigDust),c+this.mRnd(10),a+this.mRnd(10),{vel:{x:10+this.mRnd(10),y:-5+this.mRnd(10)},uiEntity:b,decay:1.3,windy:-.5}),ig.game.O9759(this.O4801(40,EntityDust,EntityBigDust),c+this.mRnd(10),a+this.mRnd(10),{vel:{x:10+this.mRnd(10),y:5+this.mRnd(10)},uiEntity:b,decay:1.3,windy:-.5}))},O7772:function(a){var b=a.x+9;a=a.y+9;ig.game.chance(50)&&ig.game.O9759(this.O4801(40,EntityDust,EntityBigDust),b+this.mRnd(10),a+this.mRnd(10),{vel:{x:-20+this.mRnd(10),y:-10+this.mRnd(10)},decay:5,windy:-.5});
ig.game.chance(50)&&ig.game.O9759(this.O4801(40,EntityDust,EntityBigDust),b+this.mRnd(10),a+this.mRnd(10),{vel:{x:-10+this.mRnd(10),y:-5+this.mRnd(10)},decay:5,windy:-.5});ig.game.O7456.O5687||(ig.game.chance(50)&&ig.game.O9759(this.O4801(40,EntityDust,EntityBigDust),b+this.mRnd(10),a+this.mRnd(10),{vel:{x:-20+this.mRnd(10),y:10+this.mRnd(10)},decay:5,windy:-.5}),ig.game.chance(50)&&ig.game.O9759(this.O4801(40,EntityDust,EntityBigDust),b+this.mRnd(10),a+this.mRnd(10),{vel:{x:20+this.mRnd(10),y:-10+
this.mRnd(10)},decay:5,windy:-.5}),ig.game.chance(50)&&ig.game.O9759(this.O4801(40,EntityDust,EntityBigDust),b+this.mRnd(10),a+this.mRnd(10),{vel:{x:20+this.mRnd(10),y:10+this.mRnd(10)},decay:5,windy:-.5}),ig.game.chance(50)&&ig.game.O9759(this.O4801(40,EntityDust,EntityBigDust),b+this.mRnd(10),a+this.mRnd(10),{vel:{x:-10+this.mRnd(10),y:5+this.mRnd(10)},decay:5,windy:-.5}),ig.game.chance(50)&&ig.game.O9759(this.O4801(40,EntityDust,EntityBigDust),b+this.mRnd(10),a+this.mRnd(10),{vel:{x:10+this.mRnd(10),
y:-5+this.mRnd(10)},decay:5,windy:-.5}),ig.game.chance(50)&&ig.game.O9759(this.O4801(40,EntityDust,EntityBigDust),b+this.mRnd(10),a+this.mRnd(10),{vel:{x:10+this.mRnd(10),y:5+this.mRnd(10)},decay:5,windy:-.5}))},O4562:function(a){var b=a.x+9;a=a.y+9;ig.game.O9759(this.O4801(60,EntityDust,EntityBigDust),b-2,a+2,{vel:{x:-40+this.mRnd(10),y:40+this.mRnd(10)},decay:2,windy:-.5});ig.game.O9759(this.O4801(60,EntityDust,EntityBigDust),b-2,a+2,{vel:{x:-20+this.mRnd(10),y:-20+this.mRnd(10)},decay:2,windy:-.5});
ig.game.O7456.O5687||(ig.game.O9759(this.O4801(60,EntityDust,EntityBigDust),b-2,a-2,{vel:{x:-40+this.mRnd(10),y:-40+this.mRnd(10)},decay:2,windy:-.5}),ig.game.O9759(this.O4801(60,EntityDust,EntityBigDust),b+2,a+2,{vel:{x:40+this.mRnd(10),y:40+this.mRnd(10)},decay:2,windy:-.5}),ig.game.O9759(this.O4801(60,EntityDust,EntityBigDust),b+2,a-2,{vel:{x:40+this.mRnd(10),y:-40+this.mRnd(10)},decay:2,windy:-.5}),ig.game.O9759(this.O4801(60,EntityDust,EntityBigDust),b-2,a-2,{vel:{x:-20+this.mRnd(10),y:-20+this.mRnd(10)},
decay:2,windy:-.5}),ig.game.O9759(this.O4801(60,EntityDust,EntityBigDust),b+2,a+2,{vel:{x:20+this.mRnd(10),y:20+this.mRnd(10)},decay:2,windy:-.5}),ig.game.O9759(this.O4801(60,EntityDust,EntityBigDust),b+2,a-2,{vel:{x:20+this.mRnd(10),y:20+this.mRnd(10)},decay:2,windy:-.5}))},O6524:function(a){var b=a.pos.x+4;a=a.pos.y-2;ig.game.O9759(EntityDust,b+this.mRnd(6),a,{vel:{x:0,y:10},zIndex:-1});ig.game.O9759(EntityDust,b+this.mRnd(6),a,{vel:{x:0,y:10},zIndex:-1})},emitDeathDust:function(a){var b=a.x+9;
a=a.y+9;ig.game.O9759(EntityBigDust,b+this.mRnd(10),a+this.mRnd(10),{vel:{x:-20+this.mRnd(10),y:-10+this.mRnd(10)},decay:1.3,windy:-.5});ig.game.O9759(EntityBigDust,b+this.mRnd(10),a+this.mRnd(10),{vel:{x:-20+this.mRnd(10),y:10+this.mRnd(10)},decay:1.3,windy:-.5});ig.game.O9759(EntityBigDust,b+this.mRnd(10),a+this.mRnd(10),{vel:{x:20+this.mRnd(10),y:-10+this.mRnd(10)},decay:1.3,windy:-.5});ig.game.O9759(EntityBigDust,b+this.mRnd(10),a+this.mRnd(10),{vel:{x:20+this.mRnd(10),y:10+this.mRnd(10)},decay:1.3,
windy:-.5});ig.game.O9759(EntityBigDust,b+this.mRnd(10),a+this.mRnd(10),{vel:{x:-10+this.mRnd(10),y:-5+this.mRnd(10)},decay:1.3,windy:-.5});ig.game.O9759(EntityBigDust,b+this.mRnd(10),a+this.mRnd(10),{vel:{x:-10+this.mRnd(10),y:5+this.mRnd(10)},decay:1.3,windy:-.5});ig.game.O9759(EntityBigDust,b+this.mRnd(10),a+this.mRnd(10),{vel:{x:10+this.mRnd(10),y:-5+this.mRnd(10)},decay:1.3,windy:-.5});ig.game.O9759(EntityBigDust,b+this.mRnd(10),a+this.mRnd(10),{vel:{x:10+this.mRnd(10),y:5+this.mRnd(10)},decay:1.3,
windy:-.5})},O8389:function(a){var b=a.x+4;a=a.y+6;ig.game.O9759(EntityBigDust,b+this.mRnd(10),a+this.mRnd(10),{vel:{x:-20+this.mRnd(10),y:-10+this.mRnd(10)},decay:1.3,windy:-.5});ig.game.O9759(EntityBigDust,b+this.mRnd(10),a+this.mRnd(10),{vel:{x:-20+this.mRnd(10),y:10+this.mRnd(10)},decay:1.3,windy:-.5});ig.game.O9759(EntityBigDust,b+this.mRnd(10),a+this.mRnd(10),{vel:{x:20+this.mRnd(10),y:-10+this.mRnd(10)},decay:1.3,windy:-.5});ig.game.O9759(EntityBigDust,b+this.mRnd(10),a+this.mRnd(10),{vel:{x:20+
this.mRnd(10),y:10+this.mRnd(10)},decay:1.3,windy:-.5});ig.game.O9759(EntityBigDust,b+this.mRnd(10),a+this.mRnd(10),{vel:{x:-10+this.mRnd(10),y:-5+this.mRnd(10)},decay:1.3,windy:-.5});ig.game.O9759(EntityBigDust,b+this.mRnd(10),a+this.mRnd(10),{vel:{x:-10+this.mRnd(10),y:5+this.mRnd(10)},decay:1.3,windy:-.5});ig.game.O9759(EntityBigDust,b+this.mRnd(10),a+this.mRnd(10),{vel:{x:10+this.mRnd(10),y:-5+this.mRnd(10)},decay:1.3,windy:-.5});ig.game.O9759(EntityBigDust,b+this.mRnd(10),a+this.mRnd(10),{vel:{x:10+
this.mRnd(10),y:5+this.mRnd(10)},decay:1.3,windy:-.5})},O1478:function(a){a&&(a=this.O5249(a),ig.game.O9759(EntityBigDust,a.x,a.y,{vel:{x:0,y:0},decay:1.3,windy:-.5}))},O4815:function(a){ig.game.O9759(EntityBigDust,a.x,a.y,{vel:{x:0,y:0},decay:1.3,windy:-.5})},splash:function(a,b){var c=a.vel,d=a.pos,e=a instanceof EntityThrownItem;if(70<c.y||e){c=Math.min(c.y/(e?600:a.O3599.y),1);for(var f=20*c,g=1;g<=f;g++){var h=200*Math.random();ig.game.O9759(EntityLiquidDrop,d.x+4,d.y+2,{delayMS:h,vel:{x:-200*
c*(.2+.6/f*g),y:-500*c*Math.random()}})}for(g=1;g<=f;g++)h=200*Math.random(),ig.game.O9759(EntityLiquidDrop,d.x+10,d.y+2,{delayMS:h,vel:{x:-200*-c*(.2+.6/f*g),y:-500*c*Math.random()}});for(g=1;g<=f;g++)h=10*Math.random(),ig.game.O9759(EntityLiquidDrop,d.x+8,d.y+2,{delayMS:h,vel:{x:-20+40*Math.random(),y:-350*c*Math.random()},opacity:20});e&&(c=Math.max(.1,Math.min(.8,c)));ig.game.sounds.O9396(b?ig.game.sounds.splashThick:ig.game.sounds.splash,a,c)}ig.game.sounds.O9396(b?ig.game.sounds.diveThick:ig.game.sounds.dive,
a)},burst:function(a,b,c,d){if(ig.game.O5119.default&&600>=ig.game.O5119.default.length){b||=ig.game.O4293(12,18);for(var e=0;e<b;e++){var f={};f.x=ig.game.O4293(10,150)*(ig.game.chance(50)?-1:1);f.y=ig.game.O4293(10,150)*(ig.game.chance(50)?-1:1);ig.game.chance(50)&&(f.x=a.vel.x,f.y=a.vel.y);var g=c?ig.game.O8159["glitter"+ig.game.O4293(1,6)]:ig.game.chance(90)?ig.game.O8159.whitePixel:ig.game.O8159.whitePixelSmall;ig.game.O9759(EntitySpot,a.pos.x,a.pos.y,{O5856:g,vel:f,O2027:.75,O6475:!1})}if(d)for(c=
0;c<b;c++)f={},f.x=ig.game.O4293(10,150)*(ig.game.chance(50)?-1:1),f.y=ig.game.O4293(10,150)*(ig.game.chance(50)?-1:1),ig.game.O9759(EntityLiquidDrop,a.pos.x,a.pos.y+16,{vel:f})}},O9976:function(a){ig.game.O9759(EntityLiquidDrop,a.pos.x+19*Math.random(),a.pos.y+19)},O3205:function(a,b){ig.game.O9759(EntityAirBubble,a.x,a.y,{vel:{x:b.x,y:b.y}})},O1417:function(a,b){b?this.O3205({x:a.x+9+6*Math.random(),y:a.y},{x:0,y:0}):this.O3205({x:a.x-2+6*Math.random(),y:a.y},{x:0,y:0})},O6997:function(a,b,c){c?
ig.game.O9759(EntityAirBubble,a.x-2+6*Math.random(),a.y+18-6*Math.random(),{vel:{x:-b.x,y:50},O2027:-.1,O2329:.1,opacity:50}):ig.game.O9759(EntityAirBubble,a.x+7+6*Math.random(),a.y+18-6*Math.random(),{vel:{x:-b.x,y:50},O2027:-.1,O2329:.1,opacity:50})},O4905:function(a,b,c,d){c=ig.game.O6112.O2132(c,d);a=ig.game.O7465(a);ig.game.O9759(EntityThrownItem,a.pos.x,a.pos.y,{thingTypeId:b.tid,animSheet:ig.game.entityManager.getAnimationForEntity(b.tid,b.rotation,b.flip),O6814:c})},O3984:function(a,b,c,d,
e,f,g,h){d&&(b=ig.game.O6112.O2132(c.x,c.y));b.x>=a.pos.x?a.O1593():a.O2626();void 0===e&&(e=12);void 0===f&&(f=45);void 0===g&&(g=25);void 0===h&&(h=!1);ig.game.O7456.O5687&&(g=35);c=b.x-a.pos.x;b=b.y-a.pos.y;d=Math.sqrt(c*c+b*b);if(d<=ig.game.decorator.maxDistanceForTrails){g=Math.floor(d/g);c/=g;for(var k=b/g,l=1;l<=g;l++)b=c*l,d=k*l,ig.game.O9759(EntityDust,a.pos.x+5+b+Math.random()*e-e/2,a.pos.y+5+d+Math.random()*e-e/2,{decay:l/g,opacity:f,O3004:h}),ig.game.chance(15)&&ig.game.O9759(EntityBigDust,
a.pos.x+5+b+Math.random()*e-e/2,a.pos.y+5+d+Math.random()*e-e/2,{decay:l/g,opacity:f,O8582:!0,O3004:h})}},O6735:function(a,b){this.O3984(a,null,b,!0)},O2640:function(a,b){this.O3984(a,b,null,!1)},O5961:function(a,b){if(a&&b){b=ig.game.O6112.O2132(b.x,b.y);var c=a.pos.x-b.x;a=a.pos.y-b.y;var d=Math.sqrt(c*c+a*a);if(d<=ig.game.decorator.maxDistanceForTrails){d=Math.floor(d/5);c/=d;for(var e=a/d,f=1;f<=d;f++){a=c*f;var g=e*f;ig.game.O9759(EntitySparkle,b.x+a+5+10*Math.random()-5,b.y+g+5+10*Math.random()-
5,{opacity:40,delayMS:400*Math.random()})}}}},O6400:function(a){ig.game.chance(4)&&ig.game.O9759(EntityDust,a.x+3,a.y+5,{vel:{x:this.mRnd(150),y:-100+this.mRnd(100)},decay:1.5,O8582:!0});ig.game.chance(10)&&ig.game.O9759(EntityBigDust,a.x+4+this.mRnd(12),a.y+13,{vel:{x:this.mRnd(4),y:-2+this.mRnd(2)},decay:1.5,O8582:!0})},O9820:function(a){ig.game.chance(.25)&&(a=this.O4918(this.O5249(a),a.size.x/2),ig.game.O9759(EntitySparkle,a.x-1,a.y-1,{O5856:ig.game.O8159.dangerSparkle}))},O7082:function(a){ig.game.chance(.4)&&
(a=this.O4918(this.O5249(a),a.size.x/2),ig.game.O9759(EntitySparkle,a.x-1,a.y-1,{O5856:ig.game.O8159.actionSparkle}))},O6381:function(a){if(!ig.game.O7456.O5687&&ig.game.chance(2)){a=this.O4918(this.O5249(a),a.size.x/2);var b=this.O4918(null,10);ig.game.chance(50)?b.x=0:b.y=0;ig.game.O9759(EntitySpot,a.x,a.y,{uiEntity:!1,vel:b,O2329:1,O6475:!1})}},O5484:function(a,b,c,d){void 0===c&&(c=5);ig.game.chance(c)&&(a=b?this.O7556(a):{x:this.distort(a.pos.x+9,8),y:this.distort(a.pos.y,5)},b={x:this.distort(0,
1),y:this.distort(-10,5)},ml.Misc.O9216(b),c=ig.game.chance(70)?ig.game.O8159.smoke:ig.game.O8159.bigSmoke,a.x=Math.floor(a.x-c.width/2),ig.game.O9759(EntitySpot,a.x,a.y,{O5856:c,O6475:!1,decorative:!0,vel:b,O9367:d}))},O6157:function(){return(!ig.game.O2694||7.5>=ig.game.O2694.delta())&&ig.game.O4296&&ig.game.O4873.O9498()},O7715:function(a,b,c,d,e){var f=this.O6157();if(a&&b&&b.attributes){var g=!0;ig.game.O7456.O5687&&(g=f?ig.game.chance(5):ig.game.O5119.default&&500<=ig.game.O5119.default.length?
ig.game.chance(15):ig.game.chance(50));g&&b.attributes.airOnlyEffects&&!e&&(g=!1);if(g){b.attributes.hot&&(c!=ig.game.attachmentManager.slots.MOUNTABLE||ig.game.chance(40))&&this.O5484(a,!0,void 0,b.O9367);b.attributes.bubbly&&ig.game.chance(1)&&this.O5621(a,b.O9367,c==ig.game.attachmentManager.slots.HOLDABLE);b.attributes.steamy&&ig.game.chance(1)&&this.O7841(a,b.O9367,c==ig.game.attachmentManager.slots.HOLDABLE);b.attributes.shiny&&ig.game.chance(1)&&(f=this.O5249(a),f=this.O4918(f,ig.game.O2953-
2),e={O5856:ig.game.O8159.sparkle,O9367:b.O9367},ig.game.O9759(EntitySparkle,f.x,f.y,e));f=4;e=8;b.attributes.sprinkling&&b.attributes.dripping&&(f*=.5,e*=.5);if(b.attributes.sprinkling&&ig.game.chance(e)){g=this.O5249(a);g=this.O4918(g,ig.game.O2953-4);e={x:ig.game.O4293(-50,50),y:ig.game.O4293(-150,-200)};var h=ig.game.O4293(-4,1);0==b.rotation?g.y=a.pos.y+h:1==b.rotation?(g.x=a.pos.x+a.size.x+h,e={x:Math.abs(.5*e.y),y:e.x}):2==b.rotation?(g.y=a.pos.y+a.size.y+h,e.y=0):3==b.rotation&&(g.x=a.pos.x+
-1*h,e={x:-Math.abs(.5*e.y),y:e.x});e={O4405:100,O2329:2,fadingInc:2,attribute:"sprinkling",O6475:!1,decorative:!1,O2027:.5,rectangle:{width:2,height:2,rgb:b.rgb},vel:e,O9367:b.O9367};ig.game.O9759(EntitySpot,g.x,g.y,e)}b.attributes.dripping&&ig.game.chance(f)&&(g=this.O5249(a),g=this.O4918(g,ig.game.O2953-2),e={O7942:1.5,O4405:100,O2329:2,fadingInc:2,attribute:"dripping",O6475:!1,decorative:ig.game.chance(50),O2027:.2,rectangle:{width:2,height:2,rgb:b.rgb},O9367:b.O9367},ig.game.O9759(EntitySpot,
g.x,g.y,e));if(b.attributes.bristling&&ig.game.chance(2)){e={x:ig.game.O4293(-10,10),y:ig.game.O4293(-10,10)};f=this.O5249(a);if(a.size.x>ig.game.O4975||a.size.y>ig.game.O4975)f=this.O7556(a);e={O7942:.75,O4405:80,O2329:2,fadingInc:2,attribute:"bristling",vel:e,O6475:!1,decorative:c==ig.game.attachmentManager.slots.HOLDABLE||ig.game.chance(50),O5856:ig.game.O8159.whitePixel,O9367:b.O9367};ig.game.O9759(EntitySpot,f.x,f.y,e)}}(d||c==ig.game.attachmentManager.slots.MOUNTABLE)&&b.attributes.colorTrail&&
ig.game.chance(d?20:5)&&(c=ig.game.O4293(1,6),e={O5856:ig.game.O8159["glitter"+c],O2329:.5,O7942:20,fadingInc:5,O4405:70,O6475:!1,decorative:ig.game.chance(50),O9367:b.O9367},b=this.distort(a.pos.x+a.size.x/2,5),c=this.distort(a.pos.y+a.size.y/2,5),ig.game.O9759(EntitySpot,b,c,e),d&&ig.game.chance(5)&&(d=ig.game.O4293(1,ig.game.sounds.environmentSounds.glimmer),ig.game.sounds.O9396(ig.game.sounds["environment_glimmer_"+d],a,.8)))}},O3250:function(a,b){b||="30,30,30";a=this.O5249(a);a=this.O4918(a,
ig.game.O2953-2);a.y-=5;b={O7942:1.5,O4405:100,O2329:2,fadingInc:2,attribute:"dripping",O6475:!1,decorative:ig.game.chance(50),O2027:.2,rectangle:{width:2,height:2,rgb:b}};ig.game.O9759(EntitySpot,a.x,a.y,b)},O7556:function(a){return{x:ig.game.O4293(a.pos.x,a.pos.x+a.size.x),y:ig.game.O4293(a.pos.y,a.pos.y+a.size.y)}},O5621:function(a,b,c){a=this.O7556(a);var d={x:0,y:this.distort(-10,5)};ml.Misc.O9216(d);var e=ig.game.O8159["bubble"+ig.game.O4293(1,ig.game.O4293(1,3),3)];b={O5856:e,O2329:1.5,O7942:2,
fadingInc:5,O4405:50,O6475:!1,O9367:b,decorative:c};b.vel={x:d.x,y:d.y};a.x=Math.floor(a.x-e.width/2);ig.game.O9759(EntitySpot,a.x,a.y,b)},O7841:function(a,b,c){a=this.O7556(a);var d={x:this.distort(0,1),y:this.distort(-6,3)};ml.Misc.O9216(d);var e=ig.game.chance(40)?ig.game.O8159.steam:ig.game.O8159.bigSteam;b={O5856:e,O7942:5,O4405:35,fadingInc:.5,O6475:!1,O9367:b,decorative:c};b.vel={x:d.x,y:d.y};a.x=Math.floor(a.x-e.width/2);ig.game.O9759(EntitySpot,a.x,a.y,b)},O9016:function(a){var b=ig.game.O1257.pos,
c=b.x-a.x,d=b.y-a.y;b=Math.sqrt(c*c+d*d);if(b<=ig.game.decorator.maxDistanceForTrails){b=Math.floor(b/20);c/=b;for(var e=d/b,f=1;f<=b;f++){d=c*f;var g=e*f;ig.game.O9759(EntityDust,a.x+5+d+12*Math.random()-6,a.y+5+g+12*Math.random()-6,{decay:f/b,opacity:35,O3004:!1})}}},O4918:function(a,b){null==a&&(a={x:0,y:0});return{x:a.x+ml.Misc.O9058(-b,b),y:a.y+ml.Misc.O9058(-b,b)}},O5249:function(a){return{x:Math.floor(a.pos.x+a.size.x/2-1),y:Math.floor(a.pos.y+a.size.y/2-1)}},mRnd:function(a){return Math.random()*
a-a/2},chance:function(a){return Math.random()<=a/100},distort:function(a,b){return a+ig.game.O4293(-b,b)},O4801:function(a,b,c){return 100*Math.random()<=a?b:c}})});ig.baked=!0;
ig.module("game.ui.panel-collected").requires("game.ui.panelitem","game.ui.panel","game.core.decorator").defines(function(){window.UIPanelCollected=UIPanel.extend({panelName:"collected",O2182:!0,showStats:!1,O1466:12,init:function(a,b,c){this.parent(a,b,c);this.decorator=new Decorator;this.O1875=Math.floor(this.panelSize.y/this.O6808);this.O1266()},O1266:function(a){a||(this.O9401=!1);a=ig.game.O7747.getCollectedItemsForPlayer(this.tilePage,this.O1875,this);a.done(this.O4959);return a},refresh:function(a){this.O1266(a)},
O4138:function(a){this.O1266().done(function(){this.O3488(a)})},O3488:function(a){ig.game.O1168&&(a=this.tiles[a-1])&&this.decorator.O2468(a.homePos.x,a.homePos.y,19,19,!0)},removeItem:function(a){var b=a.id;ig.game.O7747.removeItemFromCollection(a.id,this).done(function(){1==this.tiles.length&&1<this.tilePage&&this.tilePage--;this.O1266();ig.game.sounds.bin.play();this.O4979();ig.game.holderDialog&&b==ig.game.holderDialog.holderId&&ig.game.holderDialog.isOpen&&ig.game.holderDialog.O5028&&ig.game.holderDialog.close()})},
O4599:function(){3>this.O6488&&(ig.system.context.globalAlpha=.35,ig.game.O8159.O9435(this.panelPos.x+11,123),ig.system.context.globalAlpha=1)},O3457:function(a){var b=this.O1875;void 0===a&&(a={x:ig.input.mouse.x,y:ig.input.mouse.y});a.x>this.panelPos.x&&a.x<this.panelPos.x+this.panelSize.x&&a.y>this.panelPos.y&&a.y<=this.panelPos.y+this.panelSize.y&&(b=Math.floor((a.y-this.panelPos.y)/this.O6808)+1);b=Math.min(this.O1875,b);return Math.min(this.tiles.length+1,b)},O6905:function(){if(ig.game.panelSet.O2072PanelBody()){var a=
this.O3457({x:ig.input.mouse.x,y:ig.input.mouse.y+this.O1466});if(a=this.tiles[a-1])a&&0<=ig.game.O9643.indexOf(a.thing.base)?a.hasDropOverAction=!0:(a.nudge.x=0,a.nudge.y=5)}},O1580:function(){var a=null;if(ig.game.panelSet.O2072PanelBody()){var b=this.O3457({x:ig.input.mouse.x,y:ig.input.mouse.y+this.O1466});(b=this.tiles[b-1])&&b.thing&&0<=ig.game.O9643.indexOf(b.thing.base)&&(a={type:b.thing.base,id:b.thing.id})}return a},O7277:function(a){var b=this.O6699(a);this.O9287(b).done(function(){var c=
this.tiles[a-(b-1)*this.O1875];c&&c.waggle()})},O9624:function(a,b){if(this.O9401&&this.tiles.length>0)for(var c=0;c<this.tiles.length;c++)if(this.tiles[c].thing.id===a){a=this.tiles.splice(c,1)[0];this.tiles.splice(Math.min(b-1,this.tiles.length),0,a);for(b=0;b<this.tiles.length;b++)a=b*this.O6808,this.tiles[b].homePos.y=a+(this.panelPos.y+this.panelPadding.y),this.tiles[b].pos.y=a+(this.panelPos.y+this.panelPadding.y);break}}})});ig.baked=!0;
ig.module("game.ui.panel-created").requires("game.ui.panelitem","game.ui.panel").defines(function(){window.UIPanelCreated=UIPanel.extend({panelName:"created",O2182:!0,showStats:!0,O1875:5,createNewButtonSize:{x:59,y:12},O7322:{},painterCanvasSize:{x:166,y:240},lastId:null,init:function(a,b,c){this.parent(a,b,c);this.panelPadding.y=32;this.buttonUpPos.y+=24;this.O5649=22;this.O1875=Math.floor((this.panelSize.y-this.O5649)/this.O6808);this.O7322={x:this.panelPos.x+6,y:this.panelPos.y+12};this.O1266()},
O1266:function(a){this.O9401=!1;var b=ig.game.O7747.O5352(this.tilePage,this.O1875,this);b.done(this.O4959);b.done(a)},O9205:function(){},removeItem:function(a){var b=this,c=a.id;ig.game.panelSet.panels[ig.game.panelSet.tabEnum.search].O5744();a=ig.game.O7747.O4678(a.id);a.done(function(){1==b.tiles.length&&1<b.tilePage&&b.tilePage--;b.O1266();ig.game.sounds.bin.play();b.O4979();ig.game.holderDialog&&c==ig.game.holderDialog.holderId&&ig.game.holderDialog.isOpen&&ig.game.holderDialog.O5028&&ig.game.holderDialog.close()});
a.fail(function(){ig.game.sounds.nocando.play()})},update:function(){ig.game.O1168&&ig.game.O4774.O7739(this.O7322.x,this.O7322.y,this.O7322.x+this.createNewButtonSize.x,this.O7322.y+this.createNewButtonSize.y)&&(ig.game.O4774.O6730(!0),ig.game.painter&&ig.game.O1795?ig.game.painter.close():this.O9505());this.parent()},O4599:function(){ig.system.context.globalAlpha=ig.game.O2435-.1;ig.game.O1257.rank>=ig.game.O6604?ig.game.O8159.O1047(this.O7322.x,this.O7322.y):ig.game.O8159.O7476(this.O7322.x,this.O7322.y);
ig.system.context.globalAlpha=1},O9505:function(){ig.game.O1257.rank>=ig.game.O6604?ig.game.writableDialog.isOpen||(ig.game.O2974(),ig.game.painter.launch()):ig.game.O1002.O7063()},O1096:function(){this.tilePage=1;ig.game.panelSet.O6923(2);this.O1266(function(){this.tiles[0]&&this.tiles[0].thing&&(ig.game.painter.O4411(),"MIFT"!=this.tiles[0].thing.base&&(ig.game.sounds.collected.play(),this.O7615()))})},O7615:function(){var a=this.tiles[0];a&&ig.game.decorator.O2468(a.homePos.x,a.homePos.y,19,19,
!0)}})});ig.baked=!0;
ig.module("game.ui.panel-search").requires("game.ui.panelitem","game.ui.panel").defines(function(){window.UIPanelSearch=UIPanel.extend({panelName:"search",O2182:!0,showStats:!1,O9066:"",O7319:[],O5991:"searchInput",O8650:!1,O8094:"",O5503:!0,O1868:!1,O2754:.5,O8024:.75,O4636:null,O1212:.5,universeSearchPos:{x:null,y:null},init:function(a,b,c){this.parent(a,b,c);this.panelPadding.y=25;this.buttonUpPos.y+=18;this.O5649=30;this.O1875=Math.floor((this.panelSize.y-this.O5649)/this.O6808);this.universeSearchPos=
{x:this.panelPos.x+5,y:this.panelPos.y+this.panelSize.y+9};a=localStorage.getItem("savedSearchString");b=localStorage.getItem("savedSearchResultsPage")||1;a&&""!=a&&(this.O9066=a,this.tilePage=b);this.O1266()},O1266:function(){this.O9401=!1;var a=ig.game.O7747.O4762(this.O9066,this.tilePage,this.O1875,this);a.done(function(b,c){this.O4959(b,c)});return a},O4959:function(a,b){this.tiles=[];if(a&&0!=a.length){this.O1868=!1;for(var c=0;c<a.length;c++){var d=a[c],e=0,f=c*this.O6808;e+=this.panelPos.x+
this.panelPadding.x;f+=this.panelPos.y+this.panelPadding.y;this.tiles.push(new UIPanelItem(d,e,f,this.O2182,this.showStats,this))}this.moreTiles=b}else this.O1868=!0;this.O9401=!0;this.O9205()},O9205:function(){},O8575:function(){null!=this.O4636&&this.O4636.delta()>this.O1212&&(this.O4636=null);if(this.O9401&&null==this.O4636){var a=ig.input.pressed("wheelup"),b=ig.input.pressed("wheeldown"),c=ig.game.O4774.O7739(this.buttonUpPos.x-this.O5279,this.buttonUpPos.y-this.O5279,this.buttonUpPos.x+this.O5452+
this.O5279,this.buttonUpPos.y+this.O5452+this.O5279),d=ig.game.O4774.O7739(this.buttonDownPos.x-this.O5279,this.buttonDownPos.y-this.O5279,this.buttonDownPos.x+this.O5452+this.O5279,this.buttonDownPos.y+this.O5452+this.O5279);1<this.tilePage&&(a||c)?(--this.tilePage,ig.game.O5285.setItem("savedSearchPage",this.tilePage),ig.game.sounds.click.play(),this.O4636=new ml.Timer,this.O1266(),ig.game.O3957&&ig.game.O3957.O8855("search")):this.moreTiles&&(b||d)&&(this.tilePage+=1,ig.game.O5285.setItem("savedSearchPage",
this.tilePage),ig.game.sounds.click.play(),this.O4636=new ml.Timer,this.O1266(),ig.game.O3957&&ig.game.O3957.O8855("search"))}},O8758:function(){if(ig.game.O1168&&!ig.game.O7088){var a=jQuery('<input type="text" class="dialogInputBox" id="'+this.O5991+'" value=""/>'),b=jQuery("#"+ig.game.canvasId),c=b.position(),d=b.width();b=ig.system.scale;var e=37*b,f=5*b;d=d-e-14*b;var g=26*b;a.appendTo("body");a.css("padding",1*b+"px");a.css("width",e+"px");a.css("height",f+"px");a.css("font-size",Math.floor(3.5*
b)+"px");a.css("border-width",1*b+"px");a.css("left",c.left+d);a.css("top",c.top+g);a.css("opacity",""+this.O2754);jQuery("#"+this.O5991).attr("value",""!=this.O9066?this.O9066:this.O8094);var h=this;jQuery("#"+this.O5991).keyup(function(k){13==k.keyCode?h.O5071():""==jQuery(this).val()&&(localStorage.removeItem("savedSearchString"),localStorage.removeItem("savedSearchResultsPage"),h.O9066="",h.tilePage=1,h.O1266())});jQuery("#"+this.O5991).keydown(function(k){if(0<=[37,38,39,40].indexOf(k.keyCode))h.O9609();
else{k=["wwww","aaaa","ssss","dddd"];var l=jQuery(this).val().slice(-k[0].length);0<=k.indexOf(l)?(jQuery(this).val(""),h.O9609()):ig.game.O3957&&ig.game.O3957.O8855("search")}});jQuery("#"+this.O5991).click(function(k){h.O5945()});a.css("visibility","visible");this.O8650=!0}},O5945:function(){jQuery("#"+this.O5991).select();jQuery("#"+this.O5991).css("opacity",""+this.O8024);this.inputBoxHasFocus=!0},O9609:function(){this.isOpen&&this.inputBoxHasFocus&&jQuery("#"+this.O5991).is(":focus")&&(jQuery("#"+
this.O5991).blur(),jQuery("#"+this.O5991).css("opacity",""+this.O2754),jQuery("#"+ig.game.canvasId).focus(),this.inputBoxHasFocus=!1)},O5071:function(){ig.game.sounds.click.play();this.O9066=jQuery("#"+this.O5991).val();ig.game.O5285.setItem("savedSearchString",this.O9066);this.tilePage=1;this.O1266()},O8351:function(){jQuery("#"+this.O5991).remove();this.O8650=!1},removeItem:function(a){var b=this;a=ig.game.O7747.O4678(a.id);a.done(function(){1==b.tiles.length&&1<b.tilePage&&b.tilePage--;b.O1266();
ig.game.sounds.bin.play();b.O4979()});a.fail(function(){ig.game.sounds.nocando.play()})},update:function(){this.parent();this.O7028()},O7028:function(){if(!this.O2564){var a=this.universeSearchPos.x,b=this.universeSearchPos.y;ig.game.O4774.O7739(a,b,a+ig.game.O8159.universeSearchChecked.width,b+ig.game.O8159.universeSearchChecked.height)&&(1>=ig.game.O1257.rank&&!ig.game.hasMinfinity?ig.game.O1002.O7063():ig.game.universeSearchChecked||ig.game.hasMinfinity?(ig.game.universeSearchChecked=!ig.game.universeSearchChecked,
localStorage.setItem(ig.game.O1031,ig.game.universeSearchChecked?"true":"false"),this.O2951(),this.tilePage=1,this.O9066="",this.O5071()):(ig.game.sounds.click.play(),ig.game.O9663.O6169()))}},draw:function(){this.parent();this.O981()},O981:function(){!this.O2564&&ig.game.O1257.rank>=ig.game.O3774&&(ig.game.universeSearchChecked?ig.game.O8159.O9757(this.universeSearchPos.x,this.universeSearchPos.y):ig.game.O8159.O8061(this.universeSearchPos.x,this.universeSearchPos.y))},O9153:function(){},O4599:function(){this.O1868&&
null!=this.O9066&&""!=ig.game.strings.trim(this.O9066)&&ig.game.O8159.O6065(this.panelPos.x+21,this.panelPos.y+27,.5)},O5744:function(){(0<=this.O9066.indexOf("in bin")||0<=this.O9066.indexOf("in:bin"))&&this.O2951()},O2951:function(){localStorage.removeItem("savedSearchResultsPage");this.tiles=[];this.O7319=[]}})});ig.baked=!0;
ig.module("game.ui.musicplayer").defines(function(){window.UIMusicPlayer=ig.Class.extend({init:function(a){this.settingOn=0!=localStorage.getItem(this.O3990);this.sheet=ig.game.O8159.getImage(ig.game.O8159.musicPlayer);this.O3275=ig.game.O8159.getImage(ig.game.O8159.checkMark);this.pos={x:a.x-19,y:a.y-1}},update:function(){if(this.O8112()){if(ig.input.pressed("click")){var a=ig.game.O4774.O7739(this.pos.x+12,this.pos.y,this.pos.x+35,this.pos.y+7),b=!a&&ig.game.O4774.O7739(this.pos.x,this.pos.y+11,
this.pos.x+6,this.pos.y+17),c=!a&&!b&&ig.game.O4774.O7739(this.pos.x+16,this.pos.y+11,this.pos.x+47,this.pos.y+17);a?(this.O2954(),ig.game.sounds.click.play()):b?ml.Misc.openUrl(this.url):c&&ig.game.playerDialog.openForPlayerId(this.O5589)}0>this.O5115&&(this.energy+=this.O5115,0>=this.energy&&(this.energy=this.O5115=0,this.url=null))}},draw:function(){if(this.O8112()){var a=ig.system.context.globalAlpha;ig.system.context.globalAlpha=(.01*this.energy).limit(0,1);this.sheet.draw(this.pos.x,this.pos.y);
this.settingOn&&this.O3275.draw(this.pos.x+27,this.pos.y+2);ig.system.context.globalAlpha=a}},O8112:function(){return!!this.url&&ig.game.panelSet.tabState!=ig.game.panelSet.tabEnum.search},O8469:function(a,b,c,d){var e=0===a.indexOf("https://soundcloud.com/"),f=!c;if(e&&!this.O6264(a)&&(f||this.isUrlWhitelisted(a)||ig.game.isFullAccount||this.O2420()||localStorage.muscicPlayerLastUrlPastedAndPlayed==a)){if(f=ml.Misc.O4671(b))f.O8088&&!c&&ig.game.settings.set("doPlaySound",!0),c&&(this.settingOn=!0),
this.addUrl(a,b,d),localStorage.muscicPlayerLastUrlPastedAndPlayed=a,c&&ig.game.isFullAccount&&ig.game.O1168||f.O3592(a,!0,34)}else e=!1;return e},O2420:function(){var a=localStorage.getItem("portaller_lastAreaGroupName");return a&&"null"!=a&&a!=ig.game.O9720},isUrlWhitelisted:function(a){for(var b=!1,c="jphilipp sameythehedgewhatever silversands-2 musea-stad-antwerpen zebraphone negy_evszak alexwloch mike-ferguson-27".split(" "),d=0;d<c.length;d++)if(0<=a.indexOf(c[d])){b=!0;break}return b},O6264:function(a){for(var b=
!1,c=["starbound","kevin-adams"],d=0;d<c.length;d++)if(0<=a.indexOf(c[d])){b=!0;break}return b},url:null,O3327:null,settingOn:!0,sheet:null,O3275:null,O5589:null,pos:{x:0,y:0},O3990:"musicPlayerSettingOn",timeout:null,energy:100,O5115:0,O6340:null,O6238:!1,addUrl:function(a,b,c){this.O3327&&this.O3967();this.url=a;this.O6238=c;this.O5589=b;this.energy=430;this.settingOn?this.O5185():this.O5115=-1},O5185:function(){if(ig.game.settings.doPlaySound&&0===this.url.indexOf("https://soundcloud.com")){var a=
this.url.split("?trackId=");2==a.length?(this.url=a[0],this.O2156(a[1])):(window.consoleref.log("Fetching trackId for "+this.url),this.O1480(this.url))}},O2156:function(a){var b="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/"+ig.game.strings.O9955(a)+"&amp;color=%23ff5500&amp;auto_play=true&amp;hide_related=true&amp;show_comments=false&amp;show_user=false&amp;show_reposts=false&amp;show_teaser=false&amp;visual=false";0==jQuery("#widgetIframe").length?jQuery('<iframe id="widgetIframe" src="'+
b+'" allow="autoplay; fullscreen" allowfullscreen width="0" height="0" frameborder="0"></iframe>').appendTo("body"):jQuery("#widgetIframe").attr("src",b);this.O3327=!0;ig.game.O8577();this.O6238&&(this.O6238=!1,ig.game.O7836.O8548(this.url+"?trackId="+a))},O1480:function(a){a="https://w.soundcloud.com/player/?url="+ig.game.strings.O9955(encodeURIComponent(a))+"&amp;color=%23ff5500&amp;auto_play=true&amp;hide_related=true&amp;show_comments=false&amp;show_user=false&amp;show_reposts=false&amp;show_teaser=false&amp;visual=false";
0==jQuery("#widgetIframe").length?jQuery('<iframe id="widgetIframe" src="'+a+'" allow="autoplay *; fullscreen; encrypted-media *" allowfullscreen width="0" height="0" frameborder="0"></iframe>').appendTo("body"):jQuery("#widgetIframe").attr("src",a);this.O3327=!0;ig.game.O8577();this.O6238&&(this.O6238=!1,ig.game.O7836.O8548(this.url))},O3967:function(){jQuery("#widgetIframe").remove();this.O5589=null;this.O3327=!1;ig.game.O8577()},O2954:function(){this.settingOn=!this.settingOn;ig.game.O5285.setItem(this.O3990,
this.settingOn?1:0);this.settingOn?this.url&&(this.O5185(),this.O5115=0,this.energy=100):(this.energy=250,this.O3967(),this.O5115=-1)}})});ig.baked=!0;
ig.module("game.ui.panelset").requires("game.ui.panel-collected","game.ui.panel-created","game.ui.panel-search","game.ui.musicplayer").defines(function(){window.UIPanelSet=ig.Class.extend({panelPos:{x:370,y:3},panelSize:{x:54,y:232},O9925:19,tabHeight:14,tabState:1,O5677:1,panels:[],O6777:null,O9162:null,O4056:null,binLocation:{x:0,y:0},binSize:{x:12,y:14},binMargin:{x:6,y:-2},expandAdPos:{x:0,y:0},hideButton:{x:0,y:5,width:5,height:9},showButton:{x:0,y:5,width:18,height:9},O9076:.5,musicPlayer:null,
tabEnum:{collected:1,created:2,search:3},O7097:18,O9078:18,O8836:16,tabImage:{collected:{image:null},created:{image:null},search:{image:null}},tabImageOffset:{x:0,y:-5},O2373:1.5,O2915:{},init:function(){this.hideButton.x=ig.system.width-this.hideButton.width-this.panelSize.x-9;this.showButton.x=ig.system.width-this.showButton.width-5;this.panelSize.y=Math.max(100,ig.system.height-ig.game.O8159.panelBottom.y-this.tabHeight-this.panelPos.y-4);this.panelPos.x=ig.system.width-this.panelSize.x-3;this.binLocation.x=
this.panelPos.x+this.panelSize.x/2-5;this.binLocation.y=this.panelPos.y+this.panelSize.y+20;this.expandAdPos.x=this.binLocation.x+22;this.expandAdPos.y=this.binLocation.y+10;this.musicPlayer=new UIMusicPlayer(this.binLocation);this.panels[this.tabEnum.collected]=this.O6777=new UIPanelCollected(this.panelPos.x,this.panelPos.y+this.tabHeight,this.panelSize);this.panels[this.tabEnum.created]=this.O9162=new UIPanelCreated(this.panelPos.x,this.panelPos.y+this.tabHeight,this.panelSize);this.panels[this.tabEnum.search]=
this.O4056=new UIPanelSearch(this.panelPos.x,this.panelPos.y+this.tabHeight,this.panelSize);if(ig.game.isFullAccount){this.panels[this.tabEnum.collected].O3798(!0);var a=localStorage.getItem("lastTabOpen");a&&jQuery.isNumeric(a)&&(this.tabState=Math.floor(a),this.O5677=Math.floor(this.tabState),this.panels[this.tabEnum.collected].O3798(this.tabState==this.tabEnum.collected),this.panels[this.tabEnum.created].O3798(this.tabState==this.tabEnum.created),this.panels[this.tabEnum.search].O3798(this.tabState==
this.tabEnum.search))}},update:function(){if(ig.game.O1168){if(ig.game.O4774.O7739(this.panelPos.x,this.panelPos.y,this.panelPos.x+this.O7097,this.panelPos.y+this.tabHeight))this.O5677=this.tabState,this.tabState=this.tabEnum.collected,this.O5677!=this.tabState&&ig.game.O5285.setItem("lastTabOpen",""+this.tabState),ig.game.sounds.click.play(),this.panels[this.tabEnum.collected].O3798(!0),this.panels[this.tabEnum.created].O3798(!1),this.panels[this.tabEnum.search].O3798(!1);else if(ig.game.O4774.O7739(this.panelPos.x+
this.O7097,this.panelPos.y,this.panelPos.x+this.O7097+this.O9078,this.panelPos.y+this.tabHeight))this.tabState==this.tabEnum.created?ig.game.O1795||this.O9162.O9505():(this.O5677=this.tabState,this.tabState=this.tabEnum.created),this.O5677!=this.tabState&&ig.game.O5285.setItem("lastTabOpen",""+this.tabState),ig.game.sounds.click.play(),this.panels[this.tabEnum.collected].O3798(!1),this.panels[this.tabEnum.created].O3798(!0),this.panels[this.tabEnum.search].O3798(!1);else if(ig.game.O4774.O7739(this.panelPos.x+
this.O7097+this.O9078,this.panelPos.y,this.panelPos.x+this.O7097+this.O9078+this.O8836,this.panelPos.y+this.tabHeight))this.O5677=this.tabState,this.tabState=this.tabEnum.search,this.O5677!=this.tabState&&ig.game.O5285.setItem("lastTabOpen",""+this.tabState),ig.game.sounds.click.play(),this.panels[this.tabEnum.collected].O3798(!1),this.panels[this.tabEnum.created].O3798(!1),this.panels[this.tabEnum.search].O3798(!0);else if(ig.game.isFullAccount&&ig.game.settings.showMainUI){var a=this.hideButton;
ig.game.O4774.O7739(a.x-12,a.y,a.x+a.width+12,a.y+a.height+8)&&(ig.game.O4774.O6730(!0),ml.Misc.O1184())}this.musicPlayer.update();this.O6043();this.O4370();this.panels[this.tabState].update()}else ig.game.isFullAccount&&ig.game.settings.showMainUI&&(a=this.showButton,ig.game.O4774.O7739(a.x,a.y,a.x+a.width,a.y+a.height+8)&&(ig.game.O4774.O6730(!0),ml.Misc.O1184()))},O4370:function(){var a=ig.input.pressed("f3"),b=this.panels[this.tabEnum.search];b&&a&&!jQuery("#"+b.O5991).is(":focus")&&(this.O6923(this.tabEnum.search),
b.O5945())},O6043:function(){var a=this.panels[this.tabEnum.search];a.isOpen!=a.O8650&&(a.isOpen?a.O8758():a.O8351())},draw:function(){var a=ig.game.isFullAccount&&ig.game.settings.showMainUI&&!ig.game.O1257.O4292();ig.game.O1168?(ig.system.context.globalAlpha=ig.game.O2435,this.O7396(this.panels[this.tabEnum.collected].isOpen),this.O9430(this.panels[this.tabEnum.created].isOpen),this.O2090(this.panels[this.tabEnum.search].isOpen),ig.system.context.globalAlpha=1,this.panels[this.tabState].draw(),
this.musicPlayer.draw(),a&&ig.game.O8159.O9685(this.hideButton.x,this.hideButton.y,this.O9076)):a&&ig.game.O8159.O4713(this.showButton.x,this.showButton.y,this.O9076)},O7179:function(a,b,c,d,e,f){a.image?a.image.loaded&&(ig.game.O8159.draw(c,d,ig.system.context.globalAlpha,ig.game.O8159["panelTab"+(f?"Small":"")+(e?"On":"Off")]),a.image.draw(c+this.tabImageOffset.x,d+this.tabImageOffset.y+(e?-2:0),0,0,ig.game.O9925,ig.game.O9925)):a.image=new ml.Image(ig.game.itemImageResourcePrefix+b)},O7396:function(a){var b=
this.panelPos.x,c=this.panelPos.y;ig.game.settings.collectedTabItemId?this.O7179(this.tabImage.collected,ig.game.settings.collectedTabItemId,b,c,a):a?ig.game.O8159.O8904(b,c):ig.game.O8159.O2706(b,c)},O9430:function(a){var b=this.panelPos.x+this.O7097+1,c=this.panelPos.y;ig.game.settings.createdTabItemId?this.O7179(this.tabImage.created,ig.game.settings.createdTabItemId,b,c,a):a?ig.game.O8159.O6223(b,c):ig.game.O8159.O7840(b,c)},O2090:function(a){var b=this.panelPos.x+this.O7097+this.O9078+2,c=this.panelPos.y;
ig.game.settings.searchTabItemId?this.O7179(this.tabImage.search,ig.game.settings.searchTabItemId,b,c,a,!0):a?ig.game.O8159.O5099(b,c):ig.game.O8159.O5588(b,c)},O3700:function(){return ig.game.O1168&&ig.input.mouse.x>this.binLocation.x-this.binMargin.x&&ig.input.mouse.x<this.binLocation.x+this.binSize.x+this.binMargin.x&&ig.input.mouse.y>this.binLocation.y-this.binMargin.y&&ig.input.mouse.y<this.binLocation.y+this.binSize.y+this.binMargin.y},O2486:function(){return ig.game.O1168&&ig.input.mouse.x>=
ig.system.width-40&&ig.input.mouse.x<=ig.system.width-10&&20>=ig.input.mouse.y},O3303:function(){var a=this.O9162.O7322,b=this.O9162.createNewButtonSize,c=!1;ig.game.O1168&&a&&b&&(c=this.tabState==this.tabEnum.created&&ig.input.mouse.x>a.x-4&&ig.input.mouse.x<a.x+b.x+4&&ig.input.mouse.y>a.y-4&&ig.input.mouse.y<a.y+b.y+4);return c},O2072PanelBody:function(){return ig.game.O1168&&ig.input.mouse.x>this.panelPos.x&&ig.input.mouse.x<this.panelPos.x+this.panelSize.x&&ig.input.mouse.y>this.panelPos.y+this.tabHeight&&
ig.input.mouse.y<this.panelPos.y+this.tabHeight+this.panelSize.y},O7518:function(){return ig.game.O1168&&ig.input.mouse.x>this.panelPos.x&&ig.input.mouse.x<this.panelPos.x+this.panelSize.x&&ig.input.mouse.y>this.panelPos.y&&ig.input.mouse.y<this.panelPos.y+this.tabHeight+this.panelSize.y+30},O6923:function(a){this.tabState!=a&&(this.O5677=this.tabState,this.tabState=a,this.panels[this.tabEnum.collected].O3798(this.tabState==this.tabEnum.collected),this.panels[this.tabEnum.created].O3798(this.tabState==
this.tabEnum.created),this.panels[this.tabEnum.search].O3798(this.tabState==this.tabEnum.search),this.O6043())},O2073:function(){this.O6923(this.O5677)},O7277:function(a){this.O6777.O7277(a)},showBinContents:function(){this.panels[this.tabEnum.search].O9066="in bin";this.O6923(this.tabEnum.search);this.panels[this.tabEnum.search].O5071()},O3843:function(){}})});ig.baked=!0;
ig.module("game.ui.avatarselectbutton").defines(function(){window.AvatarSelectButton=ig.Class.extend({O1436:null,O1310:null,pos:{x:0,y:0},anim:null,size:{x:23,y:23},avatarDrawOffset:{x:2,y:2},clipSize:{x:19,y:19},anims:[],O8393:0,flipx:!1,isCurrent:!1,isReady:!1,avatarButtonSpriteSheetCoords:{x:153,y:53},init:function(a,b,c,d){this.pos.x=a;this.pos.y=b;this.O1436=c;d&&(this.isCurrent=d);this.O1310=ig.game.O4261.getItemBasic(c,"ui_asb");var e=this;this.O1310.imagesBeingGenerated.done(function(){e.isReady=
!0})},update:function(){},draw:function(){ig.game.O8159.O5232(this.pos.x,this.pos.y);this.isReady&&(ig.system.context.save(),ig.system.context.beginPath(),ig.system.context.rect((this.pos.x+this.avatarDrawOffset.x)*ig.system.scale,(this.pos.y+this.avatarDrawOffset.y)*ig.system.scale,this.clipSize.x*ig.system.scale,this.clipSize.y*ig.system.scale),ig.system.context.clip(),this.O1310.draw(this.pos.x+this.avatarDrawOffset.x,this.pos.y+this.avatarDrawOffset.y,0,0,1,null),ig.system.context.restore())},
O8072:function(){return ig.game.O4774.O7739(this.pos.x,this.pos.y,this.pos.x+this.size.x,this.pos.y+this.size.y)},O7758:function(){ig.game.O1257.O6868(this.O1436)}})});ig.baked=!0;
ig.module("game.ui.avatarselectbuttonlegacy").defines(function(){window.AvatarSelectButtonLegacy=ig.Class.extend({O1436:null,pos:{x:0,y:0},anim:null,size:{x:23,y:23},anims:[],O8393:0,flipx:!1,isCurrent:!1,avatarButtonSpriteSheetCoords:{x:153,y:53},init:function(a,b,c,d){this.pos.x=a;this.pos.y=b;this.O1436=c;d&&(this.isCurrent=d);a=new ml.AnimationSheet(ig.game.O1946+"media/avatar-spritesheets/"+this.O1436+".png",16,19);this.anims[0]=new ml.Animation(a,1,[0],!1);this.O8393=0;this.isCurrent&&(this.anims[this.O8393].flip.x=
!this.flipx,this.anims[this.O8393].update())},update:function(){},draw:function(){ig.game.O8159.O5232(this.pos.x,this.pos.y);this.anims[this.O8393].draw(this.pos.x+4,this.pos.y+2)},O8072:function(){return ig.game.O4774.O7739(this.pos.x,this.pos.y,this.pos.x+this.size.x,this.pos.y+this.size.y)},O7758:function(){ig.game.O1257.O6050(this.O1436)}})});ig.baked=!0;
ig.module("game.ui.components.uidialog").defines(function(){window.UIDialog=ig.Class.extend({isOpen:!1,toClose:!1,O6146:!1,O2945:!1,pos:{x:0,y:0},size:{x:0,y:0},opacity:1,clickSpots:[],O3270:null,init:function(){},update:function(){if(this.isOpen){ig.input.pressed("esc")&&(ig.input.O6501(),this.close());if(this.clickSpots)for(var a=0;a<this.clickSpots.length;a++)this.clickSpots.update();ig.game.O4774.O8299(this.pos.x,this.pos.y,this.pos.x+this.size.x,this.pos.y+this.size.y)&&(ig.game.O4774.O7551(),
ig.game.O4774.O4920()&&ig.game.O4774.O6730(!1));this.O6146&&ig.game.O4774.O4920()&&!ig.game.O4774.O8299(this.pos.x,this.pos.y,this.pos.x+this.size.x,this.pos.y+this.size.y)&&this.close();this.O2945&&ig.game.O2571()&&this.close();this.O3403()}},close:function(){ig.game.O1839=null;this.toClose=!0},O3403:function(){this.toClose&&(this.toClose=this.isOpen=!1)},open:function(){ig.game.O2974();this.toClose=!1;this.isOpen=!0},draw:function(){},O1176:function(){var a=!1;this.isOpen&&(a=ig.input.mouse.x>=
this.pos.x&&ig.input.mouse.x<=this.pos.x+this.size.x&&ig.input.mouse.y>=this.pos.y&&ig.input.mouse.y<=this.pos.y+this.size.y);return a}})});ig.baked=!0;
ig.module("game.ui.components.uiclickspot").defines(function(){window.UIClickSpot=ig.Class.extend({O8072:!1,isHovered:!1,doPlaySound:!0,pos:{x:0,y:0},size:{x:0,y:0},opacity:1,parent:null,DOMBased:!1,O9697:null,DOMId:null,init:function(a,b,c,d){this.pos=a;this.size=b;if(this.DOMBased=c)this.DOMId=d,this.O9697=this.O6489()},update:function(){var a=this.pos.x+this.size.x,b=this.pos.y+this.size.y;if(ig.game.O3310)(this.O8072=(this.isHovered=ig.game.O4774.O8299(this.pos.x,this.pos.y,a,b))&&ig.game.O4774.O4920())&&
this.onClick&&(ig.game.O4774.O6730(this.doPlaySound),this.O9023());else for(var c in ig.input.touches){var d=ig.input.touches[c];if(d.x>=this.pos.x&&d.x<=a&&d.y>=this.pos.y&&d.y<=b){"down"==d.state?(this.O4838&&this.O8595(),ig.game.O4774.O4920()&&this.onClick&&(this.clicked=!0,ig.game.O4774.O6730(this.doPlaySound),this.O9023())):"up"==d.state&&this.O7211&&this.O8424();break}}return this.O8072},O9023:function(){this.onClick()},O8595:function(){this.O4838()},O8424:function(){this.O7211()},onClick:function(){},
O4838:function(){},O7211:function(){},draw:function(){},O8621:function(){var a=ig.system.context;var b=this.pos.y;var c=this.size.x;var d=this.size.y;var e=ig.system.scale;var f=this.pos.x*e;b*=e;c*=e;d*=e;a.beginPath();a.rect(f,b,c,d);a.lineWidth=1;a.strokeStyle="red";a.stroke()},remove:function(){this.DOMBased&&jQuery(this.O9697).remove()},O6489:function(){var a=jQuery('<div class="'+this.DOMId+'" style="position:absolute;visibility:hidden;display:block;"/>'),b=jQuery("#"+ig.game.canvasId).position();
a.appendTo("body");a.css("width",this.size.x*ig.system.scale+"px");a.css("height",this.size.y*ig.system.scale+"px");a.css("top",this.pos.y*ig.system.scale+b.top);a.css("left",this.pos.x*ig.system.scale+b.left);a.css("visibility","visible");return a}})});ig.baked=!0;
ig.module("game.ui.profileitem").defines(function(){window.ProfileItem=ig.Class.extend({pos:{x:0,y:0},homePos:{x:0,y:0},size:{x:19,y:19},O1920:4,thing:null,O2500:!1,O6241:7,rotation:0,flip:0,O7109:null,isCustom:!1,O8508:!1,init:function(a,b,c,d,e){this.isCustom=!!d;this.O8508=!!e;(this.thing=a)&&a.defRot&&(this.rotation=a.defRot);this.pos.x=b;this.pos.y=c;this.homePos.x=b;this.homePos.y=c},O8299:function(){var a=this.pos.y-this.O1920<=ig.input.mouse.y&&ig.input.mouse.y<=this.pos.y+this.size.y;return this.pos.x-
this.O1920<=ig.input.mouse.x&&ig.input.mouse.x<=this.pos.x+this.size.x+this.O1920&&a},update:function(){ig.ua.mobile?ig.game.itemContextMenu&&ig.game.itemContextMenu.isOpen||(this.O8299()&&ig.input.state("click")?(this.O7109||(this.O7109=new ml.Timer),.75<=this.O7109.delta()&&(ig.game.itemContextMenu.O3076(null,this.thing,this.pos,!0,void 0,!0),this.O7109=null)):this.O7109&&!ig.input.state("click")&&!this.O8299()&&(this.O7109=null),this.O8299()&&ig.input.pressed("click")&&this.thing&&(!this.O7109||
.25>=this.O7109.delta())&&this.O9297()):ig.game.O4774.O3044()&&this.O8299()&&!this.O2500?(ig.game.itemContextMenu.O3076(null,this.thing,this.pos,!0,void 0,!0),ig.game.O4774.O5457(!0)):this.O8299()&&ig.input.pressed("click")&&this.thing&&this.O9297()},O9297:function(){var a="READABLE WRITABLE VIEWABLE HOLDER MEDIUM HELPER SOUND MUSIC".split(" ");this.isCustom&&0<=a.indexOf(this.thing.base)&&(ig.game.O4774.O6730(!0),ig.game.writableDialog&&ig.game.writableDialog.isOpen&&ig.game.writableDialog.close(),
ig.game.readableDialog&&ig.game.readableDialog.isOpen&&ig.game.readableDialog.close(),ig.game.mediaDialog&&ig.game.mediaDialog.isOpen&&ig.game.mediaDialog.close(),"HOLDER"==this.thing.base?ig.game.holderDialog&&ig.game.holderDialog.isOpen&&ig.game.holderDialog.holderId==this.thing.id?ig.game.holderDialog.close():ig.game.O7747.O9935(this.thing.id):(ig.game.holderDialog&&ig.game.holderDialog.isOpen&&ig.game.holderDialog.close(),ig.game.O7747.O9935(this.thing.id)))},draw:function(){"HOLDER"==this.thing.base&&
this.thing.img&&this.thing.imagesGenerated?this.O8397(this.pos.x,this.pos.y,this.thing.cellCount,ig.game.holderDialog&&ig.game.holderDialog.isOpen&&ig.game.holderDialog.holderId==this.thing.id):(0<=ig.game.O3841.indexOf(this.thing.base)||0<=ig.game.O8463.indexOf(this.thing.base))&&this.thing.img&&this.thing.imagesGenerated&&!this.O8508?this.O4705(this.pos.x,this.pos.y,this.thing.cellCount):this.thing.draw(this.pos.x,this.pos.y,this.rotation,this.flip,1)},O4705:function(a,b,c){a=ig.system.O8551(a);
b=ig.system.O8551(b);var d=this.thing.img.width/c;c=this.thing.img.height;d=d>ig.game.O9925?ig.game.O9925:d;c=c>ig.game.O9925?ig.game.O9925:c;ig.system.context.drawImage(this.thing.img.data,0,0,(0+d)*ig.system.scale,(0+c)*ig.system.scale,a,b,d*ig.system.scale,c*ig.system.scale)},O8397:function(a,b,c,d){a=ig.system.O8551(a);b=ig.system.O8551(b);c=ig.game.O9925*ig.system.scale;var e=ig.game.O9925*ig.system.scale,f=5*ig.system.scale,g=10*ig.system.scale;d&&(f+=29*ig.system.scale);ig.system.context.drawImage(this.thing.img.data,
f,g,c,e,a,b,c,e)}})});ig.baked=!0;
ig.module("game.core.datedpageddata").defines(function(){window.DatedPagedData=function(a,b,c,d){this.pageSize=a;this.httpApiLoadFunction=b;this.httpApiOptions=c;this.dateFieldName=d||"ts";this.data=[];this.hasNextPage=this.hasPreviousPage=!1;this.O3697()};window.DatedPagedData.prototype.O3697=function(){var a=jQuery.Deferred();this.hasNextPage=this.hasPreviousPage=!1;var b=this;this.httpApiLoadFunction(null,null,this.pageSize+1,this.httpApiOptions).done(function(c){c=c&&c.results;b.hasPreviousPage=
!1;b.hasNextPage=c&&c.length>b.pageSize;b.data=c&&c.slice(0,b.pageSize);a.resolve(b.data)}).fail(function(){console.log("fail");a.reject()});return a.promise()};window.DatedPagedData.prototype.O5762=function(){var a=jQuery.Deferred(),b=this.data&&this.data[0]&&this.data[0][this.dateFieldName];this.hasNextPage=this.hasPreviousPage=!1;var c=this;this.httpApiLoadFunction(null,b,this.pageSize+1,this.httpApiOptions).done(function(d){d=d&&d.results;c.hasPreviousPage=d&&d.length>c.pageSize;c.hasNextPage=
!0;c.data=c.hasPreviousPage?d&&d.slice(1,c.pageSize+1):d;a.resolve(c.data)}).fail(function(){a.reject()});return a.promise()};window.DatedPagedData.prototype.O8657=function(){var a=jQuery.Deferred(),b=this.data&&this.data.length&&this.data[this.data.length-1][this.dateFieldName];this.hasNextPage=this.hasPreviousPage=!1;var c=this;this.httpApiLoadFunction(b,null,this.pageSize+1,this.httpApiOptions).done(function(d){d=d&&d.results;c.hasPreviousPage=!0;c.hasNextPage=d&&d.length>c.pageSize;c.data=d&&
d.slice(0,c.pageSize);a.resolve(c.data)}).fail(function(){a.reject()});return a.promise()}});ig.baked=!0;
ig.module("game.ui.playerdialog").requires("game.ui.avatarselectbutton","game.ui.avatarselectbuttonlegacy","game.core.decorator","game.ui.components.uidialog","game.ui.components.uiclickspot","game.ui.profileitem","game.core.datedpageddata").defines(function(){window.PlayerDialog=UIDialog.extend({backgroundSpriteSheetCoords:{x:0,y:53},margin:4,menuPos:{x:93,y:19},O6668:14,thumbDataPos:{x:125,y:95},thumbUpSymbolPos:{x:147,y:92},flagSymbolPos:{x:135,y:93},O6991:.6,O7540:null,okButtonPos:{x:58,y:60},
okButtonSize:{x:47,y:12},O3003:[],avatarButtonSize:{x:23,y:23},avatarButtonSpacing:{x:10,y:10},O1482:null,clickspotBodyPos:{x:0,y:0},clickspotBodySize:{x:32,y:11},O4457:null,O7230Pos:{x:126,y:69},O7230Size:{x:32,y:11},O2644:null,O5770Pos:{x:128,y:2},O5770Size:{x:19,y:9},O2992:null,clickspotNamePos:{x:32,y:0},clickspotNameSize:{x:32,y:11},O1561:null,clickspotPeoplePos:{x:0,y:11},clickspotPeopleSize:{x:65,y:11},O8889:null,O4714Pos:{x:0,y:33},O4714Size:{x:65,y:11},O7439:null,clickspotVisitedPos:{x:0,
y:22},clickspotVisitedSize:{x:65,y:11},O7803:null,clicktextSignoutPos:{x:42,y:77},O9185:null,clicktextMinfinityPos:{x:125,y:94},O8160:null,clickspotClosePos:{x:151,y:2},O3613:null,clickspotInfoPos:{x:139,y:3},clickspotCloseSize:{x:9,y:9},O6882:null,clickspotThumbSize:{x:11,y:10},O3618:null,O1474:null,O5137Pos:{x:3,y:3},O9920:null,O9702:null,O4006Pos:{x:120,y:1},O1293:null,O8350:null,O3322Pos:{x:4,y:98},O6323:null,O7682Pos:{x:93,y:69},O7682Size:{x:26,y:11},O9512:null,clickspotFindButtonPos:{x:0,y:36},
clickspotFindButtonSize:{x:65,y:11},O9800:null,O2879Pos:{x:123,y:92},O7493:null,clickspotMoreAvatarsPos:{x:76,y:88},clickspotMoreAvatarsSize:{x:11,y:11},O4824:null,O125Pos:{x:134,y:91},textOrPos:{x:14,y:13},O6981:null,clicktextBlockPos:{x:25,y:13},O6948:null,clickspotAddToPeoplePos:{x:0,y:0},clickspotAddToPeopleSize:{x:65,y:11},O8270:null,clickspotVisitedFindButtonPos:{x:29,y:90},clickspotVisitedFindButtonSize:{x:26,y:11},O8202:null,clickspotVisitedTransportButtonPos:{x:108,y:90},clickspotVisitedTransportButtonSize:{x:26,
y:11},O1512:null,O3785Pos:{x:76,y:94},O3202:null,clickspotVisitedTransportOverlayPos:{x:27,y:32},clickspotVisitedTransportOverlaySize:{x:109,y:53},O6801:null,clickspotVisitedInfoButtonPos:{x:30,y:20},clickspotVisitedInfoButtonSize:{x:12,y:11},O4122:null,clickspotVisitedZoomButtonPos:{x:121,y:21},clickspotVisitedZoomButtonSize:{x:11,y:10},O5810:null,O8229Pos:{x:125,y:2},O8229Size:{x:10,y:9},O5177:.4,O8547:.25,O5616:[],O9465:[],O8005:[],O8428:[],O5767:[],O8788:[],O8306:[],O4808:[],O2784:[],clickspotNameOk:{x1:58,
y1:60,x2:105,y2:70},clickspotChangeName:{x1:10,y1:2,x2:70,y2:11},O2209:null,clickspotPageButtonLeftPos:{x:8,y:95},clickspotPageButtonLeftSize:{x:10,y:10},O8908:null,clickspotPageButtonRightPos:{x:146,y:95},clickspotPageButtonRightSize:{x:10,y:10},O3870:null,clickspotPageButtonUpPos:{x:150,y:16},clickspotPageButtonUpSize:{x:10,y:10},O8579:null,clickspotPageButtonDownPos:{x:150,y:95},clickspotPageButtonDownSize:{x:10,y:10},O6541:null,clickspotBackArrowPos:{x:0,y:1},clickspotBackArrowSize:{x:9,y:10},
O8439:.5,O7642:.22,O6170:.4,O9192:5,flagged:!1,doSparkleMiftsButton:!1,pos:{x:0,y:0},standardPos:{x:0,y:0},size:{x:163,y:109},maxX:0,minX:5,O3191:"main",O3854:15,O5901:void 0,isOpen:!1,O7723:null,O9445:!1,O2861:0,O4809:!1,O3068:null,O5434:null,O9886:"...",visitedEmptyTextPos:{x:80,y:50},visitedFramePos:{x:38,y:20},visitedThumbPos:{x:41,y:23},visitedThumbSize:{x:80,y:62},O6818:"",O4322:0,nameToDisplayOffset:{x:15,y:4},O2945:!0,O2189:null,O3460:null,O3485:null,miftSettings:{itemsPerPage:4,offset:{x:5,
y:16},padding:4,O3018:.6,showPrivate:!1,publicPrivateToggleOffset:{x:87,y:3}},O7003:null,O8893:!1,O3365:!1,O5583:null,O9292:-1,O2887:["w","h","m","wp"],O8563:["wearable","holdable","mountable","wearablePlus"],O9802:["wearable","holdable","mountable","wearable+"],O2554:["w","h","m","wp"],backAlpha:.9,O9254:0,init:function(a,b){this.pos.x=a;this.pos.y=b;this.standardPos.x=ig.ua.mobile?Math.round(ig.system.widthHalf-this.size.x/2+60):Math.round(ig.system.widthHalf-this.size.x/2);this.standardPos.y=Math.round(ig.system.O2175+
16);this.maxX=ig.system.width-20-this.size.x;this.standardPos.y+this.size.y>ig.system.height&&(this.standardPos.y=Math.round(ig.system.height-this.size.y-6));this.O4367();this.decorator=new Decorator;jQuery("body").on("keyup blur","#nameChange",this.O1191);var c=this;jQuery("body").on("keydown","#nameChange",function(d){c.O1907(d,c)})},O7845:function(){this.openForPlayerId(ig.game.O1257.O2970,{x:this.standardPos.x,y:this.standardPos.y},ig.game.isEditorHere)},openForPlayerId:function(a,b,c){this.O9445=
!1;if(ig.game.areaDialog&&ig.game.areaDialog.isOpen&&("addEditor"==ig.game.areaDialog.mode||"addSuperEditor"==ig.game.areaDialog.mode))ig.game.areaDialog.O9218(a);else if(!(ig.game.areaDialog&&ig.game.areaDialog.isOpen&&ig.game.areaDialog.O5612)||ig.game.areaDialog.isSubAreaDialog||"ANY"==ig.game.O5549||ig.game.areaDialog.editors&&ig.game.areaDialog.editors[a]||c)if(ig.game.O1795&&ig.game.painter.data&&"mift"==ig.game.painter.data.type)ig.game.painter.O9193(a);else{ig.game.areaDialog&&ig.game.areaDialog.isOpen&&
ig.game.areaDialog.close();this.O2861=0;var d=this;ig.game.O9817.O4406(a,ig.game.O4873.O8027,ig.game.areaId).done(function(e){if(e){b?(ig.ua.mobile?d.setPos(b.x-60,d.standardPos.y):d.setPos(b.x-15,d.standardPos.y),ig.ua.mobile?d.setPos(b.x-60,d.standardPos.y):d.setPos(b.x-15,d.standardPos.y)):(d.setPos(d.standardPos.x,d.standardPos.y),d.setPos(d.standardPos.x,d.standardPos.y));ig.game.writableDialog&&ig.game.writableDialog.isOpen?d.pos.y=ig.system.height-6-d.size.y:ig.game.statsDialog&&ig.game.statsDialog.isOpen&&
(d.pos.y=30);ig.game.friendsDialog.isOpen&&(d.pos.x=ig.game.friendsDialog.pos.x+ig.game.friendsDialog.size.x+15,d.pos.x>d.maxX&&(d.pos.x=d.maxX));d.O4949();d.O7723.O8088=a==ig.game.O1257.O2970;d.O7723.name=e.screenName;d.O7723.id=a;d.O7723.rank=e.rank;d.O7723.ageInDays=e.ageDays;d.O7723.O5755=e.stat_ItemsPlaced;d.O7723.aggregateVotes=e.aggregateVotes;d.O7723.isOnline=e.online;d.O7723.unfindable=e.unfindable;d.O7723.isFullAccount=e.isFullAccount;d.O7723.isAreaBanned=null;d.O7723.O3092=null;d.O7723.O3323=
null;d.O7723.isEditorHere=e.isEditorHere;d.O7723.hasMinfinity=!!e.hasMinfinity;d.O7723.isBacker=e.isBacker;d.O7723.O3734=e.profileItemIds;d.O7723.customProfileColor=ig.game.colors.O7394(e.profileColor);d.O7723.O3816=e.profileBackId;d.O7723.O6351=e.profileDynaId;d.wallpaperImage=null;d.O5901=void 0;d.O3365=!1;d.O3613=null;if(!d.O7723.O8088&&d.O4434()){var f=ig.game.O4873.O1051();ig.game.O9817.O9361(f,d.O7723.id).done(function(g){d.O7723.isAreaBanned=g&&g.isBanned;g&&(d.O7723.O3092=g.banReason,d.O7723.O3323=
g.banIssuedByUserId)})}d.flagged=e.flagged;d.O7723.O8088&&d.O9513();d._open()}})}else confirm("DO YOU WANT TO ADD THIS PERSON AS EDITOR?")&&(ig.game.areaDialog.mode="addEditor",ig.game.areaDialog.O9218(a));ig.game.O8518.O7650(a)&&ig.game.O9817.O5613(a,this)},_open:function(){this.loadAsyncData();this.O4805();this.O4256();this.O3191=this.dialogStates.MAIN;this.O6323=null;this.O9239();this.O1515();ig.game.O2974(!1,!1,!1,!1,!0);this.toClose=!1;this.O4669();this.backAlpha=.9;this.isOpen=!0;null!=this.O7540&&
(this.O7540==this.dialogStates.VISITED&&this.O1299(),this.O7540=null)},O1515:function(){this.O6818=this.O7723.name;this.O4322=ig.game.whiteFont.O2880(this.O6818);this.clickspotBackArrowSize.x=this.nameToDisplayOffset.x+this.O4322+23},loadAsyncData:function(){var a=this;null==this.O7723.O5755&&ig.game.O9817.O4260(this.O7723.id,this).done(function(b){a.O7723.O5755=b.total});null==this.O7723.ageInDays&&ig.game.O9817.getAgeInDaysForPlayer_P(this.O7723.id,this).done(function(b){a.O7723.ageInDays=b.total});
!this.O7723.O8088&&ig.game.isFullAccount&&(ig.game.O8518.O1906(this.O7723.id,this).done(function(b){a.O7723.O8593=b}),ig.game.O8518.O1163(this.O7723.id,this).done(function(b){a.O7723.isOneOfOurBlockedPeople=b;a.O6981&&a.O6981.O3550(a.O7723.isOneOfOurBlockedPeople?"unblock":"block")}))},O4434:function(){var a=!1;ig.game.isFullAccount&&1<=ig.game.O1257.rank&&this.O7723&&(ig.game.O4482&&"INDIVIDUALS"==ig.game.O5549?a=ig.game.isEditorHere&&!this.O7723.isEditorHere:0!=ig.game.O4873.O8027&&(a=5<=ig.game.O1257.rank&&
(!this.O7723.isFullAccount||4>=this.O7723.rank)));return a},O5284:function(a,b){this.O2189=new DatedPagedData(this.miftSettings.itemsPerPage,ig.game.O9817.O3509,{id:a,priv:!1},"ts");b&&(this.O3460=new DatedPagedData(this.miftSettings.itemsPerPage,ig.game.O9817.O3509,{id:a,priv:!0},"ts"));this.O3485=this.O2189},O4805:function(){ig.game.O9817.O4236(this.O7723.id,this).done(function(a){this.O4844(a)})},O4949:function(){this.O7723={rank:null,name:null,id:null,O8088:!1,O5755:null,ageInDays:null,topItems:[],
isEditorHere:!1,isFullAccount:!1,O8593:!1,isAreaBanned:null,O3092:null,O3323:null,O3734:null,customProfileColor:null,O3816:null,O6351:null};this.miftSettings.showPrivate=!1;this.O3485=this.O2189;this.newMiftsOverlayAlpha=0},close:function(){ig.game.areaDialog&&(ig.game.areaDialog.mode=null);this.O5901&&(this.O5901&&this.O5901.tidyUp&&this.O5901.tidyUp(),delete this.O5901);this.O6705();ig.game.readableDialog&&ig.game.readableDialog.isOpen&&this.O3365&&ig.game.readableDialog.close();this.O3191=this.dialogStates.MAIN;
this.O3613=null;this.O3365=!1;this.O3603();this.doSparkleMiftsButton=!1;ig.game.O1257.O9960=null;this.O4256();this.O6495();this.parent()},O6705:function(){if(this.O7723&&this.O7723.topItems&&ig.game.O7763&&ig.game.O7763.isPlaying)for(var a=0;a<this.O7723.topItems.length;a++){var b=this.O7723.topItems[a];b&&b.thing&&ig.game.O7763.O9727==b.thing.id&&ig.game.O7763.O3926()}},O4367:function(){function a(c){null!=c&&(c.x+=b.menuPos.x,c.y+=b.menuPos.y);return c}var b=this;a(this.clickspotBodyPos);a(this.clickspotNamePos);
a(this.clickspotPeoplePos);a(this.clickspotVisitedPos);a(this.clicktextSignoutPos);a(this.clicktextBlockPos);a(this.textOrPos);a(this.clickspotAddToPeoplePos);a(this.clickspotFindButtonPos);a(this.O4714Pos);this.O6323&&a(this.O6323)},O9239:function(){function a(f){return{x:f.x+b.pos.x,y:f.y+b.pos.y}}var b=this;this.O1293=null;b.O5616=[];b.O9465=[];b.O8005=[];b.O8428=[];b.O5767=[];b.O8788=[];b.O8306=[];b.O4808=[];b.O2784=[];this.O8160=new UIClickSpot(a(this.clickspotClosePos),this.clickspotCloseSize,
!1,null);this.O8160.onClick=function(){b.close()};this.O5616.push(this.O8160);this.O8350=new UIClickSpot(a({x:this.O7723.isFullAccount?this.O3322Pos.x:80,y:this.O3322Pos.y}),{x:38,y:6},!1,null);this.O8350.onClick=function(){b.O8762()};this.O9465.push(this.O8350);this.O8005.push(this.O8350);if(this.O7723.isFullAccount&&this.O7723.hasMinfinity){var c={x:ig.game.O8159.backerOrMinfinityIcon.width,y:ig.game.O8159.backerOrMinfinityIcon.height};this.O1474=new UIClickSpot(a(this.O5137Pos),c,!1,null);this.O1474.onClick=
function(){ig.game.O9663.openMainDialog();ig.game.sounds.whoosh.play();b.close()};this.O5616.push(this.O1474)}this.O6541=new UIClickSpot(a(this.clickspotBackArrowPos),this.clickspotBackArrowSize,!1,null);this.O6541.onClick=function(){b.O3191!=b.dialogStates.MAIN&&(ig.game.sounds.click.play(),b.O4256(),b.O3191=b.dialogStates.MAIN,b.O6495(),b.O9445=!1)};this.O6541.doPlaySound=!1;this.O5616.push(this.O6541);this.O1482=new UIClickSpot(a(this.clickspotBodyPos),this.clickspotBodySize,!1,null);this.O1482.onClick=
function(){1<=ig.game.O1257.rank?(ig.game.O1189.register(ig.game.O1189.types.OPENED_CHNG_BODY),b.O3191=b.dialogStates.BODY):ig.game.O1002.O7063()};this.O9465.push(this.O1482);this.O7723.isFullAccount&&ig.game.O1257.rank>=ig.game.O3774&&(this.O4457=new UIClickSpot(a(this.O7230Pos),this.O7230Size,!1,null),this.O4457.onClick=function(){b.O5284(b.O7723.id,b.O7723.O8088);b.O3191=b.dialogStates.MIFTS},ig.game.isFullAccount&&this.O9465.push(this.O4457),this.O8005.push(this.O4457));this.O7230PageButtonUp=
new UIClickSpot(a(this.clickspotPageButtonUpPos),this.clickspotPageButtonUpSize,!1,null);this.O7230PageButtonUp.onClick=function(){b.O4062()};this.O4808.push(this.O7230PageButtonUp);this.O2784.push(this.O7230PageButtonUp);this.O7230PageButtonDown=new UIClickSpot(a(this.clickspotPageButtonDownPos),this.clickspotPageButtonDownSize,!1,null);this.O7230PageButtonDown.onClick=function(){b.O4168()};this.O4808.push(this.O7230PageButtonDown);this.O2784.push(this.O7230PageButtonDown);this.O2644=null;this.O7723.O8088||
(this.O2644=new UIClickSpot(a(this.O5770Pos),this.O5770Size,!1,null),this.O2644.onClick=function(){ig.game.isFullAccount?b.addMift():ig.game.bottomMenu.O6979(!0)},this.O4808.push(this.O2644),this.O2784.push(this.O2644));this.O9911()?(c={x:ig.game.O8159.collectButton.width,y:ig.game.O8159.collectButton.height},this.O9920=new UIClickSpot(a(this.O4006Pos),c,!1,null),this.O9920.onClick=function(){ig.game.O7747.O1015(b.O7723.attachmentId,ig.game.panelSet.panels[ig.game.panelSet.tabEnum.collected].O1875+
1)},this.O9465.push(this.O9920)):this.O9920=null;this.O7723.O8088&&ig.game.isFullAccount&&ig.game.O1257.attachments&&ig.game.O1257.attachments.b&&!ig.game.attachmentManager.O3420(ig.game.O1257)?(c={x:ig.game.O8159.collectButton.width,y:ig.game.O8159.collectButton.height},this.O9702=new UIClickSpot(a(this.O4006Pos),c,!1,null),this.O9702.onClick=function(){ig.game.O1257.attachments.b&&ig.game.O7747.O1015(ig.game.O1257.attachments.b.id,ig.game.panelSet.panels[ig.game.panelSet.tabEnum.collected].O1875+
1)},this.O8428.push(this.O9702)):this.O9702=null;ig.game.O1257.isFullAccount||!ig.game.O7894?(this.O2992=new UIClickSpot(a(this.clickspotNamePos),this.clickspotNameSize,!1,null),this.O2992.onClick=function(){1<=ig.game.O1257.rank?(b.O3191=b.dialogStates.NAME,b.O7477()):ig.game.O1002.O7063()},this.O9465.push(this.O2992)):this.O2992=null;if(!this.O7723.O8088&&this.O4434()){if(c={x:ig.game.O8159.areaBanButton.width,y:ig.game.O8159.areaBanButton.height},this.O9800=new UIClickSpot(a(this.O2879Pos),c,!1,
null),this.O9800.doPlaySound=!1,this.O9800.onClick=function(){b.O6850()},this.O8005.push(this.O9800),c=ml.Misc.O4671(this.O7723.id),ig.game.multithing&&ig.game.multithing.isOpen&&ig.game.multithing.O8308()&&c&&c.viewingMultithingPlacementId==ig.game.multithing.placementId){var d=!!ig.game.multithing.participants[this.O7723.id];c=(d?"remove from":"add to")+" "+ig.game.multithing.name;this.O1293=new UIClickText(a({x:this.size.x/2,y:-14}),c,ig.game.blackWhiteFont,"#FFFFFF",.5,void 0,!0);this.O1293.onClick=
function(){var f=ml.Misc.O4671(b.O7723.id);f&&(d?ig.game.O3447.removeParticipant(f):ig.game.O3447.addParticipant(f));b.close()};this.O8005.push(this.O1293)}}else this.O9800=null;this.O7723.O8088?(this.O8889=new UIClickSpot(a(this.O4714Pos),this.O4714Size,!1,null),this.O8889.onClick=function(){b.O8851()},this.O9465.push(this.O8889)):this.O8889=null;this.O7723.isFullAccount&&(this.O1561=new UIClickSpot(a(this.clickspotPeoplePos),this.clickspotPeopleSize,!1,null),this.O1561.onClick=function(){1<=ig.game.O1257.rank?
ig.game.friendsDialog.open():ig.game.O1002.O7063()},this.O9465.push(this.O1561),this.O7723.isOnline&&!this.O7723.unfindable&&ig.game.isFullAccount&&(this.O6323=new UIClickSpot(a(this.O7682Pos),this.O7682Size,!1,null),this.O6323.onClick=function(){ig.game.O2453.O8449(b.O7723.id,b.O7723.name);b.close()},this.O8005.push(this.O6323)),this.O7439=new UIClickSpot(a(this.clickspotVisitedPos),this.clickspotVisitedSize,!1,null),this.O7439.onClick=function(){b.O1299()},this.O9465.push(this.O7439),this.O8005.push(this.O7439),
ig.ua.steam||(this.O7803=new UIClickText(a(this.clicktextSignoutPos),"LOGOUT",ig.game.blackSmallFont,"#000000",this.O8547),this.O7803.onClick=function(){b.signOut()},this.O9465.push(this.O7803)),this.O6948=new UIClickSpot(a(this.clickspotAddToPeoplePos),this.clickspotAddToPeopleSize,!1,null),this.O6948.onClick=function(){ig.game.isFullAccount?b.O7723.O8593?(ig.game.O8518.O2809(b.O7723.id),b.O7723.O8593=!1):(ig.game.O8518.O8464(b.O7723.id),b.O7723.O8593=!0):ig.game.bottomMenu.O6979(!0)},this.O8005.push(this.O6948),
this.O2362()&&(this.O9512=new UIClickSpot(a(this.clickspotFindButtonPos),this.clickspotFindButtonSize,!1,null),this.O9512.onClick=function(){ig.game.areaDialog.O9833(b.O7723.id,b.O7723.name,!b.O7723.isEditorHere)},this.O8005.push(this.O9512)));c=this.O7723.isFullAccount?ig.game.O4507(this.clicktextBlockPos):{x:4,y:97};var e=this.O7723.isOneOfOurBlockedPeople?"unblock":"block";this.O6981=new UIClickText(a(c),e,ig.game.blackSmallFont,"#000000",this.O5177-.1);this.O6981.onClick=function(){ig.game.isFullAccount?
(b.O7723.isOneOfOurBlockedPeople?(ig.game.O8518.O1969(b.O7723.id),b.O7723.isOneOfOurBlockedPeople=!1,b.O6981.text="block"):b.O7723.O8593||(ig.game.O8518.O4092(b.O7723.id),b.O7723.isOneOfOurBlockedPeople=!0,b.O6981.text="unblock"),ig.game.writableDialog.isOpen&&ig.game.writableDialog.O9394()):ig.game.bottomMenu.O6979(!0)};this.O6981.name="block";this.O8005.push(this.O6981);this.O8270=new UIClickSpot(a(this.clickspotVisitedFindButtonPos),this.clickspotVisitedFindButtonSize,!1,null);this.O8270.onClick=
function(){b.O3068&&(ig.game.O2453.O1123(b.O3068.loc),b.close())};this.O8788.push(this.O8270);this.O8306.push(this.O8270);this.O8202=new UIClickSpot(a(this.clickspotVisitedTransportButtonPos),this.clickspotVisitedTransportButtonSize,!1,null);this.O8202.onClick=function(){b.O3068&&(ig.game.portaller.O2121(b.O3068._id),b.close())};this.O8788.push(this.O8202);c={x:ig.game.O8159.addHomeButton.width,y:ig.game.O8159.addHomeButton.height};this.O1512=new UIClickSpot(a(this.O3785Pos),c,!1,null);this.O1512.onClick=
function(){b.O3068&&(ig.game.O1276==b.O3068._id?ig.game.O9817.O7966(null).done(function(){ig.game.O1276=null;ig.game.sounds.pickup.play()}).fail(function(){}):ig.game.O9817.O7966(b.O3068._id).done(function(){ig.game.O1276=b.O3068._id;ig.game.sounds.success.play()}).fail(function(){}))};this.O8788.push(this.O1512);this.O3202=new UIClickSpot(a(this.clickspotVisitedTransportOverlayPos),this.clickspotVisitedTransportOverlaySize,!1,null);this.O3202.onClick=function(){b.O3068&&(ig.game.portaller.O2121(b.O3068._id),
b.close())};this.O8788.push(this.O3202);this.O6801=new UIClickSpot(a(this.clickspotVisitedInfoButtonPos),this.clickspotVisitedInfoButtonSize,!1,null);this.O6801.onClick=function(){b.O3068&&(ig.game.myLocationDialog.O4883(b.O3068.shortCode,b.O3068.isPrivate),b.close())};this.O8788.push(this.O6801);ig.ua.mobile||(this.O5810=new UIClickSpot(a(this.O8229Pos),this.O8229Size,!1,null),this.O5810.onClick=function(){b.close();ig.game.albumDialog.open(b.O7723.id)},this.O8788.push(this.O5810),this.O8306.push(this.O5810));
ig.ua.mobile||(this.O4122=new UIClickSpot(a(this.clickspotVisitedZoomButtonPos),this.clickspotVisitedZoomButtonSize,!1,null),this.O4122.onClick=function(){ig.ua.mobile||b.O3068&&ml.Misc.openUrl(ig.game.O3186.O1398(b.O3068.shortCode))},this.O8788.push(this.O4122),this.O8306.push(this.O4122));this.O7493=new UIClickSpot(a(this.clickspotMoreAvatarsPos),this.clickspotMoreAvatarsSize,!1,null);this.O7493.onClick=function(){b.O9513()};this.O8428.push(this.O7493);this.O4824=new UIClickText(a(this.O125Pos),
"more...",ig.game.blackSmallFont,"#000000",.5);this.O4824.onClick=function(){ig.game.areaSearchDialog.open("bodies")};this.O8428.push(this.O4824);this.O6882=new UIClickSpot(a(this.thumbUpSymbolPos),this.clickspotThumbSize,!1,null);this.O6882.onClick=function(){ig.game.isFullAccount?b.O5829():ig.game.bottomMenu.O6979(!0)};this.O8005.push(this.O6882);!ig.game.O1002.O3256(ig.game.O1002.O9903.REPORT_PERSON)||this.O7723&&this.O7723.O8088||(c={x:ig.game.O8159.flagOn.width,y:ig.game.O8159.flagOn.height},
this.O3618=new UIClickSpot(a(this.flagSymbolPos),c,!1,null),this.O3618.onClick=function(){ig.game.isFullAccount?b.flagged?b.O131():b.addFlag():ig.game.bottomMenu.O6979(!0)},this.O9465.push(this.O3618),this.O8005.push(this.O3618));this.O3870=new UIClickSpot(a(this.clickspotPageButtonUpPos),this.clickspotPageButtonUpSize,!1,null);this.O3870.onClick=function(){b.O2926()};this.O8788.push(this.O3870);this.O8306.push(this.O3870);this.O8579=new UIClickSpot(a(this.clickspotPageButtonDownPos),this.clickspotPageButtonDownSize,
!1,null);this.O8579.onClick=function(){b.O6010()};this.O8788.push(this.O8579);this.O8306.push(this.O8579)},O2362:function(){return ig.game.O4482&&!ig.game.O4296&&ig.game.O6612&&!ig.game.O1958&&1<=ig.game.O1257.rank},O8552:function(a){return{x:a.x+this.pos.x,y:a.y+this.pos.y}},O6850:function(){if(this.O4434())if(this.O7723.isAreaBanned){if(this.O7723.isAreaBanned){b="<p>This person is locked from this area.</p><p>";if(this.O7723.O3092&&""!=this.O7723.O3092)this.O7723.O3323==ig.game.O1257.O2970&&(b+=
"Your reason (only visible to you):<br/><em>"+ig.game.strings.O9955(this.O7723.O3092)+"</em>");else var a="ig.game.playerDialog.openForPlayerId('"+ig.game.strings.O9955(this.O7723.O3323)+"')",b=b+('The reason is visible to <span class="pseudoLink" onclick="'+a+'">the person who issued the lock</a>.');ig.game.alertDialog.open(b+'</p><a href="javascript:ig.game.playerDialog.O3335()" class="okButton">Remove Lock</a>',!0,null,null,null,!0,null,null,null,null,null,!0)}}else ig.game.sounds.click.play(),
b='<p><span style="opacity: .75">Lock '+(ig.game.strings.O9955(this.O7723.name)+" "),b=b+" out of "+ig.game.strings.O9955(ig.game.O4223?"Area "+ig.game.O4873.currentArea:ig.game.O9720),ig.game.O4296||(b+=" and<br/>its Writables "),b=b+' for <select id="banTime"><option value="1">1 MINUTE</option><option value="'+(this.O3854+'" selected="selected">'+this.O3854+" MINUTES</option>"),ig.game.O4296||(b+='<option value="1440">1 DAY</option>',b+='<option value="10080">1 WEEK</option>',b+='<option value="null">FOREVER (UNTIL REMOVED)</option>'),
ig.game.alertDialog.open(b+'</select><p><input type="text" id="lockReason" maxlength="255" style="width: 90%; text-transform: uppercase;" placeholder="LOCK REASON (PLEASE TRY TELL THIS PERSON BEFORE, TOO)" /><span id="lockReasonBeSpecific" style="color: red; display: none">Please elaborate with more specifics</span></p><a href="javascript:ig.game.playerDialog.O1732()" class="okButton">Ok</a></p>',!0,null,null,null,!0,null,null,null,null,null,!0)},O1732:function(){if(this.O4434()){var a=jQuery("#banTime").val();
"null"==a&&(a=null);var b=this,c=ig.game.O4873.O1051(),d=jQuery("#lockReason").val();d&&=ig.game.strings.trim(d);var e=d&&15<=d.length||0<=d.indexOf(" ");d?ig.game.O4296&&!e?(jQuery("#lockReasonBeSpecific").show(),ig.game.sounds.nocando.play()):(void 0===d&&(d=null),ig.game.alertDialog.close(),ig.game.O9817.O4185(c,this.O7723.id,a,d).done(function(f){f&&f.banApplied?(b.O7723.isAreaBanned=!0,b.O7723.O3092=d,b.O7723.O3323=ig.game.O1257.O2970,ig.game.sounds.putdown.play()):ig.game.sounds.nocando.play()})):
(jQuery("#lockReason").attr("placeholder","PLEASE PROVIDE A LOCK REASON"),jQuery("#lockReason").addClass("missingValueInputBox"),ig.game.sounds.nocando.play())}},O3335:function(){if(this.O4434()){ig.game.sounds.click.play();ig.game.alertDialog.close();var a=ig.game.O4873.O1051(),b=this;ig.game.O9817.O8438(a,this.O7723.id).done(function(c){c&&c.banRemoved&&(b.O7723.isAreaBanned=!1,ig.game.sounds.pickup.play())})}},addFlag:function(){var a=this;ig.game.alertDialog.O5816("Please enter reason for reporting this person:",
null,function(b){b&&""!=ig.game.strings.trim(b)&&ig.game.O9817.O9902(a.O7723.id,b,a).done(function(c){a.flagged=!!c})},"Report",null,null,null,null,ig.game.O3962)},O131:function(){var a=this;ig.game.O9817.O9902(this.O7723.id,null,this).done(function(b){a.flagged=!!b})},O8326:function(){var a=this;this.O4809=!1;this.O5434=this.O3068=null;this.O7723.O8088?ig.game.O8518.O7990(this.O2861,this).done(function(b,c){a.O4809=c;if(a.O3068=b)ig.game.O3186.O5880(a.O3068.shortCode).done(function(d){a.O5434=d}),
ig.game.O6112.O2132(a.O3068.loc.x,a.O3068.loc.y)}):ig.game.O8518.O2256(this.O7723.id,this.O2861,this).done(function(b,c){a.O4809=c;(a.O3068=b)&&ig.game.O3186.O5880(a.O3068.shortCode).done(function(d){a.O5434=d})})},update:function(){if(this.isOpen){for(var a=0;a<this.O5616.length;a++)this.O5616[a].update();if(this.O3191==this.dialogStates.MAIN){if(this.O7723.O8088)for(a=0;a<this.O9465.length;a++)this.O9465[a].update();else for(a=0;a<this.O8005.length;a++)this.O8005[a].update();for(a=0;a<this.O7723.topItems.length;a++)this.O7723.topItems[a].update()}else if(this.O3191==
this.dialogStates.BODY)for(this.O1640(),a=0;a<this.O8428.length;a++)this.O8428[a].update();else if(this.O3191==this.dialogStates.NAME)ig.game.O4774.O8784(this.clickspotNameOk,this.pos.x,this.pos.y)&&(ig.game.O4774.O6730(!0),this.O9509(),this.O4256(),this.O3191=this.dialogStates.MAIN);else if(this.O3191==this.dialogStates.MIFTS)this.O7046();else if(this.O3191==this.dialogStates.VISITED)if(ig.input.pressed("wheelup")?this.O2926():ig.input.pressed("wheeldown")&&this.O6010(),this.O7723.O8088)for(a=0;a<
this.O8788.length;a++)this.O8788[a].update();else for(a=0;a<this.O8306.length;a++)this.O8306[a].update();else this.O3191==this.dialogStates.ATTACHMENTS&&this.O3600();this.O5901&&this.O5901.update&&this.O5901.update()}this.O4370();this.O7878();this.parent()},O4669:function(){if(this.O7723&&this.O7723.O6351&&void 0===this.O5901){this.O5901=null;var a=this,b=ig.game.O4261.getItemBasic(this.O7723.O6351,"ui_pld4");b.imagesBeingGenerated.done(function(){var c={thingTypeId:b.id,flip:0,attributes:b.attributes,
animSheet:ig.game.entityManager.getAnimationForEntity(b,0,0),O9367:!0,O9113:!0,O3598:!0};ig.game.entityManager.O5746(b.O4927(),b,c,!0);var d=a.pos.x+Math.round(a.size.x/2-9.5+ig.game._rscreen.x),e=a.pos.y+Math.round(a.size.y/2-5+ig.game._rscreen.y),f="Entity"+ig.game.strings.toUpperCaseFirst(b.base.toLowerCase());ig.global[f]||(f="EntityDefault");a.O5901=new ig.global[f](d,e,c);a.O5901.update()})}},O4370:function(){ig.input.pressed("f2")&&(this.isOpen&&this.O7723.O8088?this.O3191==this.dialogStates.VISITED?
this.close():this.O1299():(this.O7540=this.dialogStates.VISITED,this.O7845()))},O1299:function(){this.O3191=this.dialogStates.VISITED;this.O8326()},O2926:function(){0<this.O2861&&(this.O2861--,this.O8326())},O6010:function(){this.O4809&&(this.O2861++,this.O8326())},O5829:function(a){if(1<=ig.game.O1257.rank){if(!this.lastThumbUpTimer||.5<=this.lastThumbUpTimer.delta())a||=this.O7723.id,ig.game.O1002.O3897(ig.game.O1002.O9903.VOTE)&&(ig.game.O5058.O5547(a),ig.game.O9464[a]||(ig.game.O9464[a]=!0,ig.game.O7836.O3658(a)),
this.close()),this.lastThumbUpTimer=new ml.Timer,ig.game.O3957&&ig.game.O3957.O8855("upvote")}else ig.game.O1002.O7063()},O7477:function(){this.O4256();var a=jQuery('<input type="text" id="nameChange" style="position:absolute;visibility:hidden;border-style:solid;border-color:#000; display:block" value="'+ig.game.O1257.screenName+'" />'),b=jQuery("#"+ig.game.canvasId).position();a.appendTo("body");a.css("font-size",5*ig.system.scale+"px");a.css("font-family","'Press Start 2P', sans-serif");a.css("border-width",
ig.system.scale+"px");a.css("border-left-color","rgba(0,0,0,.4)");a.css("border-top-color","rgba(0,0,0,.4)");a.css("border-right-color","rgba(255,255,255,1)");a.css("border-bottom-color","rgba(255,255,255,1)");a.css("background-color","rgba(0,0,0,.12)");a.css("color","#333333");a.css("padding",ig.system.scale+"px");a.css("width",this.size.x*ig.system.scale-40+"px");a.css("text-transform","uppercase");var c=(this.size.x*ig.system.scale-a.width())/2-3,d=(this.size.y*ig.system.scale-a.height())/2;a.css("top",
(this.pos.y-12)*ig.system.scale+b.top+d);a.css("left",this.pos.x*ig.system.scale+b.left+c);a.css("visibility","visible");a.focus()},O4256:function(){jQuery("#nameChange").remove()},O1191:function(){var a=jQuery(this).val(),b=ig.game.validations.playerName.clean(a);a!=b&&jQuery(this).val(b)},O1907:function(a,b){13==(a.keyCode?a.keyCode:a.which)&&(b.O9509(),b.O4256(),b.O3191=b.dialogStates.MAIN)},truncate:function(){var a=jQuery(this).val(),b=a.replace(/[^0-9a-zA-Z!? .,-]/g,"");a!=b&&jQuery(this).val(b)},
draw:function(){if(this.isOpen){this.O2793();var a=4;0>=this.O7723.rank&&(ig.system.context.globalAlpha=.5,ig.game.O8159.draw(this.pos.x+4,this.pos.y+1,ig.system.context.globalAlpha,ig.game.O8159.rankBlack0),ig.system.context.globalAlpha=1,a+=11);if(this.O7723.hasMinfinity||this.O7723.isBacker)ig.game.O8159.draw(this.pos.x+a-1,this.pos.y+3,1,ig.game.O8159.backerOrMinfinityIcon),a+=11;ig.system.context.globalAlpha=.8;ig.game.blackFont.draw(this.O6818,this.pos.x+a,this.pos.y+this.nameToDisplayOffset.y);
ig.system.context.globalAlpha=1;this.O3191!=this.dialogStates.MAIN&&ig.game.O8159.O3557(this.pos.x+a+this.O4322+3,this.pos.y+3);if(this.O3191==this.dialogStates.MAIN){if(this.O7723.isFullAccount){for(b=this.O7723.topItems.length-1;0<=b;b--)this.O7723.topItems[b].draw();null!=this.O3613&&ig.game.O8159.O6000(this.pos.x+this.clickspotInfoPos.x,this.pos.y+this.clickspotInfoPos.y,.9)}ig.system.context.globalAlpha=this.O6991;a=ig.system.context.globalAlpha;ig.system.context.globalAlpha=.4;b="Days: "+(this.O7723.ageInDays?
Math.round(this.O7723.ageInDays):"-");ig.game.blackSmallFont.draw(b,this.pos.x+4+(this.O7723.isFullAccount?0:84),this.pos.y+98,ig.Font.ALIGN.LEFT);this.O7723.isFullAccount&&(ig.game.blackSmallFont.draw("Placed: "+this.O5972(this.O7723.O5755),this.pos.x+4,this.pos.y+92,ig.Font.ALIGN.LEFT),ig.game.O1257.rank>=ig.game.O3774&&ig.game.O8159.O1697(this.pos.x+this.O7230Pos.x,this.pos.y+this.O7230Pos.y,.6));ig.system.context.globalAlpha=a;this.doSparkleMiftsButton&&ig.game.chance(4)&&ig.game.decorator.O9250(this.pos.x+
this.O7230Pos.x+ig.game.O4293(0,this.O7230Size.x)-3,this.pos.y+this.O7230Pos.y+ig.game.O4293(0,this.O7230Size.y)-3,!0);!this.O7723.O8088&&this.O7723.isFullAccount&&ig.game.O8159.O4832(this.pos.x+this.thumbUpSymbolPos.x,this.pos.y+this.thumbUpSymbolPos.y,.5);this.O3618&&!this.O7723.O8088&&(this.flagged?ig.game.O8159.O7515(this.pos.x+this.flagSymbolPos.x,this.pos.y+this.flagSymbolPos.y,.8):ig.game.O8159.O6235(this.pos.x+this.flagSymbolPos.x,this.pos.y+this.flagSymbolPos.y,.5));ig.system.context.globalAlpha=
1;if(this.O7723.O8088){if(this.O7723.isFullAccount){var b=0;ig.game.O8159.draw(this.pos.x+this.menuPos.x,this.pos.y+this.menuPos.y+11*b,.6,ig.game.O8159.playerDialogBodyButton);ig.game.O8159.draw(this.pos.x+this.menuPos.x+32,this.pos.y+this.menuPos.y+11*b++,.6,ig.game.O8159.playerDialogNameButton);ig.game.O8159.draw(this.pos.x+this.menuPos.x,this.pos.y+this.menuPos.y+11*b++,.6,ig.game.O8159.playerDialogMyFriendsButton);ig.game.O8159.draw(this.pos.x+this.menuPos.x,this.pos.y+this.menuPos.y+11*b++,
.6,ig.game.O8159.playerDialogSnapsButton);this.O8889&&ig.game.O8159.draw(this.pos.x+this.menuPos.x,this.pos.y+this.menuPos.y+11*b++,.6,ig.game.O8159.playerDialogAttachmentsButton);ig.ua.mobile||(ig.game.O8159.draw(this.pos.x+this.menuPos.x+57,this.pos.y+this.menuPos.y+14,1,ig.game.O8159.playerDialogMyFriendsShortcut),ig.game.O8159.draw(this.pos.x+this.menuPos.x+57,this.pos.y+this.menuPos.y+25,1,ig.game.O8159.playerDialogMyLocationShortcut))}else ig.system.context.globalAlpha=.5,ig.game.blackSmallFont.draw("After logging in you\r\nwill find a friends\r\nlist, album and more\r\nhere",
this.pos.x+5,this.pos.y+21,.3),ig.system.context.globalAlpha=1,ig.game.O8159.draw(this.pos.x+this.menuPos.x,this.pos.y+this.menuPos.y,.6,ig.game.O8159.playerDialogBodyButton),this.O2992&&ig.game.O8159.draw(this.pos.x+this.menuPos.x+32,this.pos.y+this.menuPos.y,.6,ig.game.O8159.playerDialogNameButton);for(b=0;b<this.O9465.length;b++)this.O9465[b].draw&&this.O9465[b].draw()}else{a=!this.O7723.O8593||this.O7723.isOneOfOurBlockedPeople;for(b=0;b<this.O8005.length;b++)("block"!=this.O8005[b].name||a)&&
this.O8005[b].draw&&this.O8005[b].draw();this.O7723.isFullAccount?(b="playerDialogAddToMyFriendsButton"+(this.O7723.O8593?"_active":""),ig.game.O8159.draw(this.pos.x+this.menuPos.x,this.pos.y+this.menuPos.y,.6,ig.game.O8159[b]),ig.game.O8159.draw(this.pos.x+this.menuPos.x,this.pos.y+this.menuPos.y+22,.6,ig.game.O8159.playerDialogSnapsButton),a&&(ig.system.context.globalAlpha=this.O5177-.1,ig.game.blackSmallFont.draw("OR",this.pos.x+this.textOrPos.x,this.pos.y+this.textOrPos.y),ig.system.context.globalAlpha=
1),this.O7723.O8593&&ig.game.O8159.O3965(this.pos.x+this.menuPos.x,this.pos.y+this.menuPos.y,.8),this.O2362()&&(b="playerDialogEditorButton"+(this.O7723.isEditorHere?"_active":""),ig.game.O8159.draw(this.pos.x+this.menuPos.x,this.pos.y+this.clickspotFindButtonPos.y,.6,ig.game.O8159[b])),this.O6323&&ig.game.O8159.O3773(this.pos.x+this.O7682Pos.x,this.pos.y+this.O7682Pos.y,.8)):(ig.system.context.globalAlpha=.5,ig.game.blackSmallFont.draw("This person hasn't logged in",this.pos.x+this.size.x/2,this.pos.y+
this.size.y/2-3,ig.Font.ALIGN.CENTER),ig.system.context.globalAlpha=1,this.O1293&&this.O1293.draw());this.O9800&&this.O4434()&&(b="areaBanButton"+(this.O7723.isAreaBanned?"Active":""),ig.game.O8159.draw(this.pos.x+this.O2879Pos.x,this.pos.y+this.O2879Pos.y,.5+(this.O7723.isAreaBanned?.3:0),ig.game.O8159[b]))}}else this.O3191==this.dialogStates.BODY?(this.O9702&&(ig.system.context.globalAlpha=.75,ig.game.O8159.O6099(this.pos.x+this.O4006Pos.x,this.pos.y+this.O4006Pos.y),ig.system.context.globalAlpha=
1),this.O4865Buttons(),ig.game.O8159.O8309(this.pos.x+this.clickspotMoreAvatarsPos.x,this.pos.y+this.clickspotMoreAvatarsPos.y,.5),this.O4824.draw()):this.O3191==this.dialogStates.MIFTS?this.drawMiftsPage():this.O3191==this.dialogStates.NAME?ig.ua.mobile||ig.game.O8159.O1234(this.pos.x+this.okButtonPos.x,this.pos.y+this.okButtonPos.y,.65):this.O3191==this.dialogStates.VISITED?this.O3068&&this.O5434?this.O5330(this.O3068):(ig.system.context.globalAlpha=this.O5177,ig.game.blackSmallFont.draw(this.O9886,
this.pos.x+this.visitedEmptyTextPos.x,this.pos.y+this.visitedEmptyTextPos.y,ig.Font.ALIGN.CENTER),ig.system.context.globalAlpha=1):this.O3191==this.dialogStates.ATTACHMENTS&&this.O7632()}},O6859:function(){return this.isOpen&&this.O3191==this.dialogStates.ATTACHMENTS&&(ig.game.isEditorHere||this.O2887[this.O9292]==ig.game.attachmentManager.slots.WEARABLE_PLUS)},O1336:function(a){var b=this.O2887[this.O9292],c=ig.game.attachmentManager.O9507(b);0<=c.indexOf(a.base)?ig.game.O1257.attachments[this.O2887[this.O9292]]?
ig.game.sounds.nocando.play():ig.game.attachmentManager.O7355(ig.game.O1257,b,a.id,void 0,a.base):(a=ml.Misc.O5563(c,null,!0),ig.game.alertDialog.O3813("Please only pick "+a))},O9957:function(a,b){b=new UIClickText({x:this.pos.x+5,y:this.pos.y+21+18*a},b,ig.game.blackFont,"#000000",1);var c=this;b.onClick=function(){c.O9292=a;c.O6495()};return b},O8851:function(){var a=this.pos.x+61,b=this.pos.y+20,c=this,d=ig.game.O8159;this.clicktextAttachmentTabs=[];for(var e=0;e<this.O2887.length;e++)this.clicktextAttachmentTabs[e]=
this.O9957(e,this.O9802[e]);this.clicktextFindAttachment=new UIClickText({x:this.pos.x+61,y:this.pos.y+30},"find...",ig.game.blackSmallFont,"#000000",.25);this.clicktextFindAttachment.onClick=function(){var f=null;switch(c.O8563[c.O9292]){case "wearable":case "wearablePlus":f="wearables";break;case "holdable":f="holdables";break;case "mountable":f="mountables"}ig.game.areaSearchDialog.open(f)};this.clicktextRemoveAttachment=new UIClickText({x:a+92,y:b},"x",ig.game.blackSmallFont,"#000000",.5);this.clicktextRemoveAttachment.onClick=
function(){var f=c.O9292,g=c.O8563[f];"wearablePlus"!=g&&ig.game.settings.getGlue(g)&&ig.game.settings.O7706(g);ig.game.attachmentManager.O3578(ig.game.O1257,c.O2887[f],!0)};this.clickspotGlueAttachment=new UIClickSpot({x:a,y:b+19},{x:25,y:6});this.clickspotGlueAttachment.onClick=function(){ig.game.settings.O7706(c.O8563[c.O9292])};this.clickspotWearablePlusFollows=new UIClickSpot({x:a,y:b+19},{x:25,y:6});this.clickspotWearablePlusFollows.onClick=function(){ig.game.settings.O3305()};this.clickspotCollectAttachment=
new UIClickSpot({x:a+81,y:b+17},{x:d.collectButton.width,y:d.collectButton.height});this.clickspotCollectAttachment.onClick=function(){var f=ig.game.O1257.attachments[c.O2887[c.O9292]];f&&ig.game.O7747.O1015(f.id,ig.game.panelSet.panels[ig.game.panelSet.tabEnum.collected].O1875+1)};this.clickspotMoveAttachment=[];b+=35;e=0;this.clickspotMoveAttachment[e]=new UIClickSpot({x:a+15,y:b},{x:d.arrowUp.width,y:d.arrowUp.height});this.clickspotMoveAttachment[e].onClick=function(){c.O8734({x:0,y:-1})};this.clickspotMoveAttachment[e++].spriteSheetItem=
d.arrowUp;this.clickspotMoveAttachment[e]=new UIClickSpot({x:a+15,y:b+26},{x:d.arrowDown.width,y:d.arrowDown.height});this.clickspotMoveAttachment[e].onClick=function(){c.O8734({x:0,y:1})};this.clickspotMoveAttachment[e++].spriteSheetItem=d.arrowDown;this.clickspotMoveAttachment[e]=new UIClickSpot({x:a,y:b+14},{x:d.arrowLeft.width,y:d.arrowLeft.height});this.clickspotMoveAttachment[e].onClick=function(){c.O8734({x:-1,y:0})};this.clickspotMoveAttachment[e++].spriteSheetItem=d.arrowLeft;this.clickspotMoveAttachment[e]=
new UIClickSpot({x:a+27,y:b+14},{x:d.arrowRight.width,y:d.arrowRight.height});this.clickspotMoveAttachment[e].onClick=function(){c.O8734({x:1,y:0})};this.clickspotMoveAttachment[e++].spriteSheetItem=d.arrowRight;for(e=0;e<this.clickspotMoveAttachment.length;e++)this.clickspotMoveAttachment[e].doPlaySound=!1;for(e=this.O9292=0;e<this.O2887.length;e++)if(ig.game.O1257.attachments[this.O2887[e]]){this.O9292=e;break}this.O3191=this.dialogStates.ATTACHMENTS},O8734:function(a){ig.game.O1257.O8393&&ig.game.O1257.O8393.flip.x&&
(a.x*=-1);ig.game.O1257.O8734(this.O2887[this.O9292],a);this.O2067()},O2067:function(){this.movedAttachmentTimer&&clearTimeout(this.movedAttachmentTimer);this.O9254=-1;var a=this;this.movedAttachmentTimer=setTimeout(function(){a.O9254=1},2E3)},O6495:function(){this.O9254=1},O3603:function(){this.clicktextAttachmentTabs=[];this.clickspotMoveAttachment=this.clickspotAttachmentMover=this.clickspotCollectAttachment=this.clickspotWearablePlusFollows=this.clickspotGlueAttachment=this.clicktextRemoveAttachment=
this.clicktextFindAttachment=null;this.O6495();this.O9292=-1},O1374:function(a){return 0<=["w","h","wp"].indexOf(a)},O3600:function(){for(var a=0;a<this.O2887.length;a++){var b=this.O2887[a],c=ig.game.O1257.attachments[b],d=a==this.O9292,e="wp"==b;if(this.clicktextAttachmentTabs&&this.clicktextAttachmentTabs[a]&&(this.clicktextAttachmentTabs[a].update(),d))if(c){e?this.clickspotWearablePlusFollows.update():this.clickspotGlueAttachment.update();this.clickspotCollectAttachment.update();if(this.O1374(b))for(b=
0;b<this.clickspotMoveAttachment.length;b++)this.clickspotMoveAttachment[b].update();this.clicktextRemoveAttachment.update()}else this.clicktextFindAttachment&&this.clicktextFindAttachment.update()}},O7632:function(){for(var a=this.pos.x+61,b=this.pos.y+20,c=ig.system.context,d=0;d<this.O2887.length;d++){var e=this.O2887[d],f=ig.game.O1257.attachments[e],g=d==this.O9292,h=this.O8563[this.O9292],k="wp"==e;if(this.clicktextAttachmentTabs){var l=this.clicktextAttachmentTabs[d];l.alpha=g?.9:.4;l.draw()}if(g)if(f){g=
f.name;g=ig.game.strings.O7686(g,22,!0);(l=window.Item.prototype.BASE_TYPES[f.base].verbose)||(l=window.Item.prototype.BASE_TYPES[f.base].name);c.globalAlpha=.8;ig.game.blackSmallFont.draw(g,a,b);c.globalAlpha=.4;ig.game.blackSmallFont.draw(l,a,b+7);g=this.clickspotGlueAttachment.pos;k?"DYNATHING"==f.base&&(f="checkbox"+(ig.game.settings.wearablePlusFollows?"Active":""),ig.game.O8159.draw(g.x,g.y,1,ig.game.O8159[f]),c.globalAlpha=.4,ig.game.blackSmallFont.draw("slowly follows",g.x+11,g.y+2)):(f="checkbox"+
(ig.game.settings.getGlue(h)?"Active":""),ig.game.O8159.draw(g.x,g.y,1,ig.game.O8159[f]),c.globalAlpha=.4,ig.game.blackSmallFont.draw("glue",g.x+11,g.y+2));c.globalAlpha=1;ig.game.O8159.O6099(this.clickspotCollectAttachment.pos.x,this.clickspotCollectAttachment.pos.y);if(this.O1374(e)){c.globalAlpha=1;for(e=0;e<this.clickspotMoveAttachment.length;e++)f=this.clickspotMoveAttachment[e],ig.game.O8159.draw(f.pos.x,f.pos.y,1,f.spriteSheetItem);ig.ua.mobile||(c.globalAlpha=.25,ig.game.blackSmallFont.draw("Shift+(Ctrl)+Arrows",
a,b+78))}c.globalAlpha=1;this.clicktextRemoveAttachment.draw()}else{if(ig.game.isEditorHere||"wearablePlus"==h)c.globalAlpha=.35,ig.game.blackSmallFont.draw("pick from side panel >>",a,b),c.globalAlpha=1;this.clicktextFindAttachment.draw();k&&(c.globalAlpha=.35,ig.game.blackSmallFont.draw("+ always glued\n+ any area\n+ no physical effects\n",a,b+55),c.globalAlpha=1)}}},O7878:function(){0!=this.O9254&&(this.backAlpha+=4*this.O9254*ig.system.tick,0>this.O9254&&.4>=this.backAlpha?(this.backAlpha=.4,
this.O9254=0):0<this.O9254&&.9<=this.backAlpha&&(this.backAlpha=.9,this.O9254=0))},O2793:function(){var a=[238,238,238],b=this.O7723.customProfileColor;b&&ig.game.colors.dialogRgbs[b].O5379&&(a=ig.game.colors.dialogRgbs[b].O5379);b=ig.system.scale;var c=this.pos.x,d=this.pos.y,e=this.pos.x+this.size.x,f=this.pos.y+this.size.y,g=ig.system.context;g.beginPath();g.fillStyle="rgba("+a.join(",")+","+this.backAlpha+")";g.moveTo((c+2)*b,d*b);g.lineTo((e-2)*b,d*b);g.lineTo(e*b,(d+2)*b);g.lineTo(e*b,(f-2)*
b);g.lineTo((e-2)*b,f*b);g.lineTo((c+2)*b,f*b);g.lineTo(c*b,(f-2)*b);g.lineTo(c*b,(d+2)*b);g.fill();g.closePath();g.beginPath();g.lineWidth=1*b;g.strokeStyle="rgba(0,0,0,.15)";g.moveTo((c+4)*b,(d+13)*b);g.lineTo((e-4)*b,(d+13)*b);g.stroke();g.closePath();g.beginPath();g.strokeStyle="rgba(255,255,255,.6)";g.moveTo((c+4)*b,(d+13+1)*b);g.lineTo((e-4)*b,(d+13+1)*b);g.stroke();g.closePath();this.O2613();this.O5779();ig.game.O8159.draw(this.pos.x+150,this.pos.y+2,.7,ig.game.O8159.closeButton)},O5779:function(){this.O5901&&
this.O5901.draw&&this.O5901.draw()},O2613:function(){if(this.O7723.O3816)if(this.wallpaperImage){if(this.wallpaperImage.loaded){var a=this.pos.x,b=this.pos.y+13,c=this.pos.x+this.size.x,d=this.pos.y+this.size.y-3,e=.8;this.O7723.customProfileColor&&(e="white"==this.O7723.customProfileColor?1:"yellow"==this.O7723.customProfileColor?.9:"cyan"==this.O7723.customProfileColor?.8:0<=["pink","purple"].indexOf(this.O7723.customProfileColor)?.4:0<=["black","blue","red"].indexOf(this.O7723.customProfileColor)?
.3:.7);ig.system.context.globalAlpha=e;for(ml.Misc.O5847("lighten");a<c;a+=this.wallpaperImage.width)for(e=b;e<d;e+=this.wallpaperImage.height){var f=this.wallpaperImage.width,g=this.wallpaperImage.height;a+f>c&&(f-=a+f-c);e+g>d&&(g-=e+g-d);this.wallpaperImage.draw(a,e,0,0,f,g)}ml.Misc.O3715();ig.system.context.globalAlpha=1}}else this.wallpaperImage=new ml.Image(ig.game.itemImageResourcePrefix+this.O7723.O3816)},O5972:function(a){var b="0";null!=a&&void 0!=a&&0!=a&&(b=100>a?"1+":1E3>a?"100+":1E4>
a?"1k+":1E5>a?"10k+":"++");return b},O7046:function(){this.doSparkleMiftsButton=!1;for(var a=this.miftSettings.offset,b=this.miftSettings.padding,c=0;c<this.O3485.data.length&&c<this.miftSettings.itemsPerPage;c++){var d=this.O3485.data[c];if(d&&d.itemId){var e=ig.game.O4261.getItemBasic(d.itemId,"ui_pld3");if(e){var f=this.pos.x+a.x,g=this.pos.y+a.y+(ig.game.O9925+b)*c,h=ig.game.O4774.O7739(f+ig.game.O9925,g,f+this.size.x*this.miftSettings.O3018,g+ig.game.O9925),k=ig.game.O4774.O7739(f,g,f+ig.game.O9925,
g+ig.game.O9925);f=ig.game.O4774.O3781(f,g,f+ig.game.O9925,g+ig.game.O9925);h?(ig.game.O4774.O6730(!0),this.openForPlayerId(d.fromId)):k&&ig.input.state("ctrl")||k&&ig.ua.mobile||f?(ig.game.O4774.O6730(!1),ig.game.O4774.O5457(!1),this.O9331(d._id,d.fromName,d.ts,d.isPrivate,d.itemId)):k&&(ig.game.O4774.O6730(!1),e.soundId&&ig.game.sounds.O9961(e.soundId))}}}ig.input.pressed("wheelup")?this.O4062():ig.input.pressed("wheeldown")&&this.O4168();if(this.O7723.O8088){for(c=0;c<this.O4808.length;c++)this.O4808[c].update();
a=this.miftSettings.publicPrivateToggleOffset;f=this.pos.x+a.x;g=this.pos.y+a.y;ig.game.O4774.O7739(f-2,g-2,f+19+4,g+4+4)?(ig.game.O4774.O6730(!0),this.miftSettings.showPrivate=!1,this.O3485=this.O2189):ig.game.O4774.O7739(f+28-2,g-2,f+28+27+4,g+4+4)&&(ig.game.O4774.O6730(!0),this.miftSettings.showPrivate=!0,this.O3485=this.O3460)}else for(c=0;c<this.O2784.length;c++)this.O2784[c].update()},drawMiftsPage:function(){0<this.newMiftsOverlayAlpha&&(ig.system.context.fillStyle="rgba(255,255,255,"+this.newMiftsOverlayAlpha+
")",ig.system.context.fillRect(0,0,ig.system.realWidth,ig.system.O5809));this.miftSettings.showPrivate&&(ig.system.context.fillStyle="rgba(155,141,85,.5)",ig.system.context.fillRect((this.pos.x+4)*ig.system.scale,(this.pos.y+13)*ig.system.scale,(this.size.x-4-3)*ig.system.scale,(this.size.y-13-5)*ig.system.scale));if(this.O7723.O8088){var a=this.miftSettings.publicPrivateToggleOffset;ig.game.O8159.draw(this.pos.x+a.x,this.pos.y+a.y,.8,ig.game.O8159["miftPublicPrivateToggle_"+(this.miftSettings.showPrivate?
"private":"public")])}a=this.miftSettings.offset;for(var b=this.miftSettings.padding,c=!1,d=0;d<this.O3485.data.length&&d<this.miftSettings.itemsPerPage;d++){var e=this.O3485.data[d];if(e&&e.itemId){var f=ig.game.O4261.getItemBasic(e.itemId,"ui_pld1");if(f){var g=this.pos.x+a.x,h=this.pos.y+a.y+(ig.game.O9925+b)*d,k=!e.deliverySeenByRecipient;k&&(c=!0,this.O7723.O8088&&!e.animation&&(e.animation={offsetY:-30,velocityY:1.25,O1611:.75,alpha:0,textAlphaFactor:0}));var l=c&&!k?.3:1,m=1;if(e.animation){.25<
e.animation.velocityY&&(e.animation.velocityY*=.95);e.animation.offsetY+=e.animation.velocityY;if(0<=e.animation.offsetY&&0<e.animation.velocityY&&(e.animation.offsetY=0,e.animation.velocityY=0,0==d&&ig.game.sounds.putdown.play(),ig.game.O9817.O5850(e._id),e.deliverySeenByRecipient=!0,f.soundId)){var n=f.soundId;setTimeout(function(){ig.game.sounds.O9961(n)},(d+1)*(0==d?1E3:3E3))}e.animation.alpha+=.05;e.animation.textAlphaFactor+=.01;1<e.animation.alpha&&(e.animation.alpha=1);1<e.animation.textAlphaFactor&&
(e.animation.textAlphaFactor=1);0>e.animation.O1611&&(e.animation.O1611=0);this.newMiftsOverlayAlpha=e.animation.O1611-=.005;ml.Misc.O5847("xor");f.draw(g,h,0,0,.25*e.animation.alpha);ml.Misc.O3715();f.draw(g,h+e.animation.offsetY,0,0,e.animation.alpha);m=e.animation.textAlphaFactor}else f.draw(g,h,0,0,l);ig.system.context.globalAlpha=.7*m*l;f=e.text;f=ig.game.strings.replaceAll(e.text,"\r\n","  ");f=ig.game.strings.replaceAll(e.text,"\r","  ");f=ig.game.strings.replaceAll(e.text,"\n","  ");f=ig.game.strings.O5024(f,
30);for(var p=0;p<f.length;p++)ig.game.blackSmallFont.draw(f[p],g+ig.game.O9925+6,h+7*p+1);p="-"+e.fromName;ig.game.O4774.O8299(g+ig.game.O9925,h,g+this.size.x*this.miftSettings.O3018,h+ig.game.O9925)?ig.system.context.globalAlpha=.6*m*l:ig.system.context.globalAlpha=.4*m*l;ig.game.blackSmallFont.draw(p,g+ig.game.O9925+6,h+7*f.length+1);ig.system.context.globalAlpha=1;e=48>=(new Date-Date.parse(e.ts))/1E3/60/60;(k||e)&&ig.game.chance(4)&&(e=k=ig.game.O9925,ig.game.chance(20)&&(k=this.size.x-40,e=
14),ig.game.decorator.O9250(g+ig.game.O4293(0,k),h+ig.game.O4293(0,e),!0))}}}c&&!this.O9445&&(ig.game.sounds.environment_glimmer_8.play(),ig.game.sounds.whoosh.play(),this.O9445=!0);this.O3485.hasPreviousPage&&ig.game.O8159.O5112(this.pos.x+this.clickspotPageButtonUpPos.x,this.pos.y+this.clickspotPageButtonUpPos.y,this.O8439);this.O3485.hasNextPage&&ig.game.O8159.O9461(this.pos.x+this.clickspotPageButtonDownPos.x,this.pos.y+this.clickspotPageButtonDownPos.y,this.O8439);this.O2644&&ig.game.O8159.O3386(this.pos.x+
this.O5770Pos.x,this.pos.y+this.O5770Pos.y,.8);0==this.O3485.data.length&&(ig.system.context.globalAlpha=.5,ig.game.blackSmallFont.draw("No MIFTs here yet",this.pos.x+this.size.x/2,this.pos.y+this.size.y/2-1,ig.Font.ALIGN.CENTER),ig.system.context.globalAlpha=1);this.O7723.O8088&&!this.miftSettings.showPrivate&&this.O3460&&this.O3460.data&&this.O3460.data[0]&&!this.O3460.data[0].deliverySeenByRecipient&&ig.game.chance(4)&&(a=this.miftSettings.publicPrivateToggleOffset,ig.game.decorator.O9250(this.pos.x+
a.x+27+ig.game.O4293(0,27),this.pos.y+a.y+ig.game.O4293(0,3),!0))},O9331:function(a,b,c,d,e){var f=this;ig.game.O4261.getItem_P(e,"ui_miftcontext").done(function(g){var h="",k="ig.game.playerDialog.O9676('"+ig.game.strings.O9955(a)+"')",l="ig.game.playerDialog.O9743('"+ig.game.strings.O9955(a)+"')";h=h+"<p>Mifted by "+(ig.game.strings.O9955(b)+" on "+ig.game.strings.O7882(new Date(c)));h+="</p>";g&&g.info&&(h+=ig.game.strings.O7812(g.info,"opacity: 60%"));f.O7723.O8088&&(h+="<p>",h+='<span class="pseudoLink" onclick="'+
k+'">Remove</span>',d||(h+=' | <span class="pseudoLink" onclick="'+l+'">Make Private</span>'),h+="</p>");ig.game.alertDialog.open(h,!0,null,null,null,!0)})},O9676:function(a){if(confirm("Remove MIFT? This cannot be undone.")){var b=this;ig.game.alertDialog.close();ig.game.O9817.O6359(a).done(function(c){c&&c.isHidden?(ig.game.sounds.success.play(),b.close()):ig.game.sounds.nocando.play()})}},O9743:function(a){if(confirm("Make MIFT private? This cannot be undone.")){var b=this;ig.game.alertDialog.close();
ig.game.O9817.O3069(a).done(function(c){c&&c.isPrivate?(ig.game.sounds.success.play(),b.close()):ig.game.sounds.nocando.play()})}},addMift:function(){ig.game.writableDialog.isOpen&&ig.game.writableDialog.close();ig.game.painter.prop||(ig.game.painter.prop={});ig.game.painter.O7192="mift";ig.game.painter.O5715={toId:this.O7723.id};ig.game.panelSet.O9162.O9505();this.close()},O4062:function(){this.O3485.hasPreviousPage&&this.O3485.O5762()},O4168:function(){this.O3485.hasNextPage&&this.O3485.O8657()},
O5330:function(a){var b=this.pos.x+this.visitedThumbPos.x-14,c=this.pos.y+this.visitedThumbPos.y-5,d=1.36*this.visitedThumbSize.x,e=1.36*this.visitedThumbSize.y,f=ig.system.scale,g=ig.system.context;g.fillStyle="rgba(255, 255, 255, .8)";a&&a.isPrivate&&(g.fillStyle="rgba(155, 141, 85, .9)");g.fillRect((b-3)*f,(c-2)*f,(d+6)*f,(e+4)*f);g.drawImage(this.O5434,b*f,c*f,d*f,e*f);ig.ua.mobile||ig.game.O8159.draw(this.pos.x+this.O8229Pos.x,this.pos.y+this.O8229Pos.y,1,ig.game.O8159.openAlbumButton);if(ig.game.O4774.O8299(b-
3,c-2,b+d+6,c+e+4)||ig.ua.mobile)ig.ua.mobile||ig.game.O8159.O7685(this.pos.x+this.clickspotVisitedZoomButtonPos.x,this.pos.y+this.clickspotVisitedZoomButtonPos.y,.4),this.O7723.O8088&&(ig.game.O8159.O4184(this.pos.x+this.clickspotVisitedInfoButtonPos.x,this.pos.y+this.clickspotVisitedInfoButtonPos.y,.4),ig.game.O8159.O5694(this.pos.x+this.clickspotVisitedTransportButtonPos.x,this.pos.y+this.clickspotVisitedTransportButtonPos.y,.8),this.O3068&&(ig.game.O1276==this.O3068._id?ig.game.O8159.draw(this.pos.x+
this.O3785Pos.x,this.pos.y+this.O3785Pos.y,1,ig.game.O8159.addHomeButtonActive):ig.game.O8159.draw(this.pos.x+this.O3785Pos.x,this.pos.y+this.O3785Pos.y,.4,ig.game.O8159.addHomeButton))),ig.game.O8159.O3773(this.pos.x+this.clickspotVisitedFindButtonPos.x,this.pos.y+this.clickspotVisitedFindButtonPos.y,.8);this.O8429(0<this.O2861,this.O4809)},O4644:function(a,b){a&&ig.game.O4774.O8299(this.pos.x+this.clickspotPageButtonLeftPos.x-this.O9192,this.pos.y+this.clickspotPageButtonLeftPos.y-this.O9192,this.pos.x+
this.clickspotPageButtonLeftPos.x+this.clickspotPageButtonLeftSize.x+this.O9192,this.pos.y+this.clickspotPageButtonLeftPos.y+this.clickspotPageButtonLeftSize.y+this.O9192)&&ig.game.O8159.O6068(this.pos.x+this.clickspotPageButtonLeftPos.x-this.O9192+3,this.pos.y+this.clickspotPageButtonLeftPos.y-this.O9192+1,this.O6170);ig.game.O8159.O6783(this.pos.x+this.clickspotPageButtonLeftPos.x,this.pos.y+this.clickspotPageButtonLeftPos.y,a?this.O8439:this.O7642);b&&ig.game.O4774.O8299(this.pos.x+this.clickspotPageButtonRightPos.x-
this.O9192,this.pos.y+this.clickspotPageButtonRightPos.y-this.O9192,this.pos.x+this.clickspotPageButtonRightPos.x+this.clickspotPageButtonRightSize.x+this.O9192,this.pos.y+this.clickspotPageButtonRightPos.y+this.clickspotPageButtonRightSize.y+this.O9192)&&ig.game.O8159.O6068(this.pos.x+this.clickspotPageButtonRightPos.x-this.O9192+3,this.pos.y+this.clickspotPageButtonRightPos.y-this.O9192+1,this.O6170);ig.game.O8159.O9451(this.pos.x+this.clickspotPageButtonRightPos.x,this.pos.y+this.clickspotPageButtonRightPos.y,
b?this.O8439:this.O7642)},O8429:function(a,b){a&&ig.game.O4774.O8299(this.pos.x+this.clickspotPageButtonUpPos.x-this.O9192,this.pos.y+this.clickspotPageButtonUpPos.y-this.O9192,this.pos.x+this.clickspotPageButtonUpPos.x+this.clickspotPageButtonUpSize.x+this.O9192,this.pos.y+this.clickspotPageButtonUpPos.y+this.clickspotPageButtonUpSize.y+this.O9192)&&ig.game.O8159.O6068(this.pos.x+this.clickspotPageButtonUpPos.x-this.O9192+3,this.pos.y+this.clickspotPageButtonUpPos.y-this.O9192+1,this.O6170);ig.game.O8159.O5112(this.pos.x+
this.clickspotPageButtonUpPos.x,this.pos.y+this.clickspotPageButtonUpPos.y,a?this.O8439:this.O7642);b&&ig.game.O4774.O8299(this.pos.x+this.clickspotPageButtonDownPos.x-this.O9192,this.pos.y+this.clickspotPageButtonDownPos.y-this.O9192,this.pos.x+this.clickspotPageButtonDownPos.x+this.clickspotPageButtonDownSize.x+this.O9192,this.pos.y+this.clickspotPageButtonDownPos.y+this.clickspotPageButtonDownSize.y+this.O9192)&&ig.game.O8159.O6068(this.pos.x+this.clickspotPageButtonDownPos.x-this.O9192+3,this.pos.y+
this.clickspotPageButtonDownPos.y-this.O9192+1,this.O6170);ig.game.O8159.O9461(this.pos.x+this.clickspotPageButtonDownPos.x,this.pos.y+this.clickspotPageButtonDownPos.y,b?this.O8439:this.O7642)},setPos:function(a,b){this.pos.x=Math.min(Math.max(a,this.minX),this.maxX);this.pos.y=b;this.midX=this.pos.x+this.size.x/2},O9513:function(){ig.game.O9817.O3628(10,this).done(function(a){for(var b=0,c=0;2>c;c++)for(var d=0;5>d;d++)4>b&&ig.game.chance(24)?(b++,this.O3003[5*c+d]=new AvatarSelectButtonLegacy(this.pos.x+
this.margin+(this.avatarButtonSize.x+this.avatarButtonSpacing.x)*d,this.pos.y+this.O6668+10+(this.avatarButtonSize.y+this.avatarButtonSpacing.y)*c,ml.Misc.O7790(!1,void 0))):this.O3003[5*c+d]=new AvatarSelectButton(this.pos.x+this.margin+(this.avatarButtonSize.x+this.avatarButtonSpacing.x)*d,this.pos.y+this.O6668+10+(this.avatarButtonSize.y+this.avatarButtonSpacing.y)*c,a[5*c+d])})},O4865Buttons:function(){for(var a=0;a<this.O3003.length;++a)this.O3003[a].draw()},O9736:function(){for(var a=0;a<this.O3003.length;++a)this.O3003[a].update()},
O1640:function(){for(var a=0;a<this.O3003.length;++a)if(this.O3003[a].O8072()){this.O3191=this.dialogStates.MAIN;this.O3003[a].O7758();this.close();break}},O9509:function(){var a=jQuery("#nameChange").val();a=ig.game.strings.trim(a);""!=a&&ig.game.O1257.screenName!=a&&(ig.game.validations.playerName.isValid(a)?(ig.game.O1257.O9882(a),this.O7723.name=a,this.O1515(),ig.game.sounds.success.play()):ig.game.sounds.nocando.play())},signOut:function(){var a="<p>If you're on a shared computer, to complete the process please also logout of "+
ig.game.strings.O9955(ml.Misc.O4413())+" afterwards.</p>";ig.game.alertDialog.open(a+'<p><a href="javascript:ig.game.playerDialog.O9612()">Logout of Thingistan now<a/></p>',!0,void 0,void 0,void 0,!0)},O9612:function(){for(var a=["savedSearchString","savedSearchResultsPage","creatorEmergencyBackupData","search_String","search_PageNo","search_PageSize","search_Data","musicPlayerSettingOn","lastTabOpen","savedIssueToTracker_forwardedToIssuesPage","adsShownLog","openedFlagsAlertDialogDate","didSeeTrailer",
"skipNextAd","wasAskedAboutGuidance","portaller_currentAreaGroupName","lastDisplayedAdDateStamp","adsShownLog","doPlaySound","extraZoom","ignoreWasdMovement","lastDateTimeWhereNoAdLoaded","hideUI","lastMinfinityExpiryReminded","areaSearchQuery","didSearchTypeInCreator","didSeeRingRankGoneInfo_v1_06","adWasCollapsedOnDate","wasInformedAboutLegacyRingInfo",ig.game.bottomMenu.O2258,ig.game.bottomMenu.isOnNewFlagAlertSystemKey],b=0;b<a.length;b++)localStorage.removeItem(a[b]);delete sessionStorage.urlCacheAppend_collectedItems;
delete sessionStorage.urlCacheAppend_createdItems;delete sessionStorage.getLoginTokenAfterLoggingIn;0>=ig.game.O1257.rank&&(localStorage.someoneLoggedOutWhileBeingSoftbannedDateStamp=new Date);window.location.replace("/logout");this.close()},aboutInfoClicked:function(a){ig.game.readableDialog&&ig.game.readableDialog.isOpen&&this.O3365?(this.O3365=!1,ig.game.readableDialog.close()):(ig.game.holderDialog&&ig.game.holderDialog.isOpen&&ig.game.holderDialog.close(),this.O3365=!0,ig.game.O7747.O9935(a))},
O8762:function(){var a=this,b=this.O7723.id;ig.game.O8518.O8175(b).done(function(c){var d=ml.Misc.getTimestampFromObjectId(a.O7723.id);d='<p style="opacity: 0.5">Born into this universe<br/>'+ig.game.strings.O6141(d,!1," ")+" at</p><p>"+a.O5197(d.toISOString())+" Thingistan Time</p>";c&&!c.hiddenInFriendsList&&(c.online?(d+='<p style="color: green">Currently on</p>',ig.game.O8518.O7650(b)&&(d+='<p><span class="pseudolink pingFriendLink" id="pingFriendLink_'+b+'" onclick="ig.game.friendsDialog.pingFriend(\''+
(b+'\')" style="font-size: 100%">Ping</span></p>'))):d+='<p style="opacity: 0.5">Last on '+ig.game.strings.O3041(c.lastSeen,void 0," ")+"</p>");ig.game.alertDialog.open({html:d,O5358:!0})})},O5197:function(a){return a.substr(0,10)+" "+a.substr(11,8)},O4844:function(a){this.topItems=[];var b=this.O7723.O3734;b&&jQuery.isArray(b)||(b=[]);a&&jQuery.isArray(a)||(a=[]);if(b&&jQuery.isArray(b))for(var c=b.length-1;0<=c;c--)if(b[c]){var d=a.indexOf(b[c]);0<=d&&a.splice(d,1);a.unshift(b[c])}Math.min(a.length,
9);c=0;for(d=1;3>=d;d++)for(var e=1;3>=e;e++){var f=a[c];f&&this.O5598(f,e,d,c,b);c++}},O5598:function(a,b,c,d,e){var f=this,g=ig.game.O4261.getItemBasic(a,"ui_pld2");e=0<=e.indexOf(a);this.O7723.topItems.push(new ProfileItem(g,this.pos.x+28*(b-1)+5,this.pos.y+24*(c-1)+19,e,e&&1>=d));e&&!this.O9911()&&ig.game.O4261.getItem_P(a,"ui_pld2").done(function(h){h&&"info"==h.name&&null==f.O3613&&"READABLE"==h.base&&(f.O3613=new UIClickSpot(f.O8552(f.clickspotInfoPos),{x:ig.game.O8159.aboutInfoButton.width,
y:ig.game.O8159.aboutInfoButton.height},!1,null),f.O3613.onClick=function(){f.aboutInfoClicked(a)},f.O9465.push(f.O3613),f.O8005.push(f.O3613))})},O9911:function(){return this.O7723.O8088&&ig.game.isFullAccount&&this.O7723.attachmentId},dialogStates:{MAIN:"main",BODY:"body",NAME:"name",VISITED:"visited",MIFTS:"mifts",ATTACHMENTS:"attachments"}})});ig.baked=!0;
ig.module("game.ui.mylocationdialog").requires("game.ui.components.uidialog").defines(function(){window.MyLocationDialog=UIDialog.extend({alpha:.7,submitted:!1,O4301:!1,listed:!1,isPrivate:!1,O2054:jQuery.Deferred(),O6146:!0,O2945:!0,O8160:null,clickspotClosePos:{x:131,y:2},clickspotCloseSize:{x:9,y:9},O3035:null,clickspotAddButtonPos:{x:27,y:100},clickspotAddButtonSize:{x:44,y:12},O7986:null,clickspotListedPubliclyPos:{x:79,y:101},clickspotListedPubliclySize:{x:57,y:10},O1821:null,clickspotShareFbButtonPos:{x:27,
y:5},clickspotShareFbButtonSize:{x:86,y:69},framePos:{x:27,y:5},shotPos:{},shotSize:{},findSymbolPos:{x:8,y:73},eyeSymbolPos:{x:8,y:86},locationUrlElementPos:{x:27,y:75},snapshotUrlElementPos:{x:27,y:86},urlElementSize:{width:105,height:4},O2278:null,screenShotSize:{x:80,y:62},screenShotSourcePos:{x:50,y:50},screenShotSourceSize:{x:164,y:124},O7368:1,O4625:.03,shortCode:"",clickspots:[],fullPreviewCanvas:null,thumbPreviewCanvas:null,init:function(){this.size.x=ig.game.O8159.bottomMenuVisitedDialog.width;
this.size.y=ig.game.O8159.bottomMenuVisitedDialog.height;this.pos.x=ig.system.widthHalf-this.size.y/2-32;this.pos.y=ig.system.O2175-this.size.y/2+75;ig.ua.mobile&&ig.system.O9756()&&(this.pos.y-=60);this.shotPos.x=(this.pos.x+this.framePos.x+3)*ig.system.scale;this.shotPos.y=(this.pos.y+this.framePos.y+3)*ig.system.scale;this.shotSize.x=this.screenShotSize.x*ig.system.scale;this.shotSize.y=this.screenShotSize.y*ig.system.scale;var a=this;this.O8160=new UIClickSpot({x:this.pos.x+this.clickspotClosePos.x,
y:this.pos.y+this.clickspotClosePos.y},this.clickspotCloseSize,!1,null);this.O8160.onClick=function(){a.close()};this.clickspots.push(this.O8160);this.O3035=new UIClickSpot({x:this.pos.x+this.clickspotAddButtonPos.x,y:this.pos.y+this.clickspotAddButtonPos.y},this.clickspotAddButtonSize,!1,null);this.O3035.onClick=function(){a.O8813()};this.clickspots.push(this.O3035);this.O7986=new UIClickSpot({x:this.pos.x+this.clickspotListedPubliclyPos.x,y:this.pos.y+this.clickspotListedPubliclyPos.y},this.clickspotListedPubliclySize,
!1,null);this.O7986.onClick=function(){a.submitted&&a.listed&&a.O3379()};this.clickspots.push(this.O7986);this.O8040()},O8040:function(){var a=328,b=248;ig.ua.mobile?(a*=.65,b*=.65,this.screenShotSourcePos={x:(ig.system.widthHalf-a/2)*ig.system.scale,y:(ig.system.O2175-b/2)*ig.system.scale-20},this.screenShotSourceSize={x:a*ig.system.scale,y:b*ig.system.scale}):(this.screenShotSourcePos.x=(ig.system.widthHalf-20)*ig.system.scale-a/2*ig.system.scale,this.screenShotSourcePos.y=ig.system.O2175*ig.system.scale-
130*ig.system.scale,this.screenShotSourceSize.x=a*ig.system.scale,this.screenShotSourceSize.y=b*ig.system.scale)},update:function(){if(this.isOpen){for(var a=0;a<this.clickspots.length;a++)this.clickspots[a].update();0<this.O7368&&(this.O7368=Math.max(this.O7368-this.O4625,0))}ig.input.pressed("f4")&&!ig.input.state("alt")&&(this.isOpen?this.close():ig.game.bottomMenu.subMenus[0].O4460());this.parent()},draw:function(){this.isOpen&&(ig.game.O8159.O2631(this.pos.x,this.pos.y,this.alpha),ig.game.O8159.O7962(this.pos.x+
this.framePos.x,this.pos.y+this.framePos.y,this.alpha),ig.ua.mobile||(ig.game.O8159.O1012(this.pos.x+this.findSymbolPos.x,this.pos.y+this.findSymbolPos.y,this.alpha),ig.game.O8159.O6552(this.pos.x+this.eyeSymbolPos.x,this.pos.y+this.eyeSymbolPos.y,this.alpha)),this.O704(),0<this.O7368&&(ig.system.context.fillStyle="rgba(255, 255, 255,"+this.O7368+")",ig.system.context.fillRect(this.shotPos.x,this.shotPos.y,this.shotSize.x,this.shotSize.y)),(this.submitted||this.O4301)&&this.listed?(ig.game.O8159.drawVisitedLocationVisitedButtonOn(this.pos.x+
this.clickspotAddButtonPos.x,this.pos.y+this.clickspotAddButtonPos.y),this.O4301||(this.isPrivate?ig.game.O8159.O2886(this.pos.x+this.clickspotListedPubliclyPos.x,this.pos.y+this.clickspotListedPubliclyPos.y):ig.game.O8159.O9440(this.pos.x+this.clickspotListedPubliclyPos.x,this.pos.y+this.clickspotListedPubliclyPos.y))):(ig.game.O8159.O9206(this.pos.x+this.clickspotAddButtonPos.x,this.pos.y+this.clickspotAddButtonPos.y),this.isListedPublicly=!0))},O704:function(){this.thumbPreviewCanvas&&ig.system.context.drawImage(this.thumbPreviewCanvas,
this.shotPos.x,this.shotPos.y,this.shotSize.x,this.shotSize.y)},open:function(){var a=this;this.isPrivate=this.listed=this.submitted=!1;this.O2054=jQuery.Deferred();this.capture();this.O4750().done(function(){a.O5664();a.O2060();ig.game.sounds.whoosh.play();a.O7368=1});ig.game.O3957&&ig.game.O3957.O8855("snap");this.parent()},O4883:function(a,b){var c=this;this.shortCode=a;this.isPrivate=b;this.O5664();this.submitted=this.listed=!0;this.O7368=0;ig.game.O3186.O5880(a).done(function(d){c.thumbPreviewCanvas=
d;c.toClose=!1;c.isOpen=!0})},close:function(){this.O3976();this.parent()},O9133:function(){this.submitted||this.O4301||(this.O4301=!0,this.O9850(!1),this.O2054.done(function(){this.submitted=!0;this.O4301=!1}).fail(function(){this.O4301=!1}))},O8813:function(){this.O4301||(this.submitted?this.toggleListedStatus():(this.listed=this.O4301=!0,this.O9850(!0),this.O2054.done(function(){this.submitted=!0;this.O4301=!1}).fail(function(){this.O4301=this.listed=!1})),ig.game.O1189.register(ig.game.O1189.types.ADDED_SNAPSHOT))},
toggleListedStatus:function(){var a=this;ig.game.O9817.O9628(this.shortCode,!this.listed).done(function(){a.listed=!a.listed})},O3379:function(){var a=this;ig.game.O9817.O7584(this.shortCode,!this.isPrivate).done(function(){a.isPrivate=!a.isPrivate})},capture:function(){this.fullPreviewCanvas=document.createElement("canvas");this.fullPreviewCanvas.setAttribute("id","fullPreviewCanvas");this.fullPreviewCanvas.setAttribute("width",this.screenShotSourceSize.x);this.fullPreviewCanvas.setAttribute("height",
this.screenShotSourceSize.y);this.fullPreviewCanvas.setAttribute("style","visibility:hidden");document.body.appendChild(this.fullPreviewCanvas);var a=this.fullPreviewCanvas.getContext("2d");this.thumbPreviewCanvas=document.createElement("canvas");this.thumbPreviewCanvas.setAttribute("id","thumbPreviewCanvas");this.thumbPreviewCanvas.setAttribute("width",this.screenShotSize.x*ig.system.scale);this.thumbPreviewCanvas.setAttribute("height",this.screenShotSize.y*ig.system.scale);this.thumbPreviewCanvas.setAttribute("style",
"visibility:hidden");document.body.appendChild(this.thumbPreviewCanvas);this.thumbPreviewCanvas.getContext("2d").drawImage(ig.system.canvas,this.screenShotSourcePos.x,this.screenShotSourcePos.y,this.screenShotSourceSize.x,this.screenShotSourceSize.y,0,0,this.screenShotSize.x*ig.system.scale,this.screenShotSize.y*ig.system.scale);a.drawImage(ig.system.canvas,this.screenShotSourcePos.x,this.screenShotSourcePos.y,this.screenShotSourceSize.x,this.screenShotSourceSize.y,0,0,this.screenShotSourceSize.x,
this.screenShotSourceSize.y)},O2060:function(){var a=this.fullPreviewCanvas.getContext("2d"),b=(ig.game.O1257.screenName+" at "+ig.game.root).toUpperCase();ig.game.O1460&&(b+="/"+String(ig.game.O1460).toUpperCase());a.font="14px 'Press Start 2P'";a.fillStyle="rgba(0, 0, 0, 0.3)";a.fillText(b,10,this.screenShotSourceSize.y-7);a.fillStyle="rgba(255, 255, 255, 0.4)";a.fillText(b,10,this.screenShotSourceSize.y-10)},O4750:function(){var a=jQuery.Deferred(),b=this;ig.game.O9817.O5105().done(function(c){b.shortCode=
c;a.resolve()});return a.promise()},O9850:function(a){try{var b=this.fullPreviewCanvas.toDataURL(),c=this.thumbPreviewCanvas.toDataURL()}catch(d){ig.game.errorManager.warn("toDataURL Security exception for mylocationdialog");this.close();return}ig.game.O9817.O4171(this.shortCode,ig.game.O4873.O2192(),b,c,a,this.isPrivate,this).done(function(){this.O2054.resolveWith(this)}).fail(function(){this.O2054.rejectWith(this)});return this.O2054.promise()},O5390:function(){ig.system.context.beginPath();ig.system.context.rect(this.screenShotSourcePos.x,
this.screenShotSourcePos.y,this.screenShotSourceSize.x,this.screenShotSourceSize.y);ig.system.context.lineWidth=2;ig.system.context.strokeStyle="black";ig.system.context.stroke()},O7762:function(){var a=ig.game.socialIntegration.getFacebookPostUrl(this.shortCode);this.submitted?window.location=a:this.O9850(!1).done(function(){window.location=a})},O4063:function(a,b,c,d){d=jQuery('<input type="text" id="'+b+'" class="domElement bottomMenuVisitedUrl" onclick="this.select()" readonly="readonly" value="'+
d+'" />');this.O8355(d,a,c);d.appendTo("body");ig.ua.mobile||d.css("visibility","visible");b=jQuery('<div id="'+b+'Fader" class="domElement bottomMenuVisitedUrlFader"></div>');this.O8355(b,a,c,{width:1,height:1});b.css("background-size",this.urlElementSize.width/5*ig.system.scale+"px "+this.urlElementSize.height*ig.system.scale+"px");b.appendTo("body");b.css("visibility","visible");return d},O8355:function(a,b,c,d){void 0==d&&(d={width:0,height:0});a.css("font-size",4*ig.system.scale+"px");a.css("border-width",
ig.system.scale+"px");a.css("padding",ig.system.scale+"px");a.css("width",this.urlElementSize.width*ig.system.scale+"px");a.css("height",this.urlElementSize.height*ig.system.scale+"px");a.css("top",(this.pos.y+c.y)*ig.system.scale+b.top+d.height*ig.system.scale);a.css("left",(this.pos.x+c.x)*ig.system.scale+b.left+d.width*ig.system.scale)},O5664:function(){if(!ig.ua.mobile){this.O3976();var a=jQuery("#"+ig.game.canvasId).position(),b=this.O4063(a,"locationURL",this.locationUrlElementPos,ig.game.O3186.O4356(this.shortCode));
a=this.O4063(a,"snapshotURL",this.snapshotUrlElementPos,ig.game.O3186.O1398(this.shortCode));var c=this;b.click(function(){c.O9133()});a.click(function(){c.O9133()})}},O3976:function(){jQuery("#locationURL").remove();jQuery("#snapshotURL").remove();jQuery("#fullPreviewCanvas").remove();jQuery("#thumbPreviewCanvas").remove();jQuery(".bottomMenuVisitedUrlFader").remove()}})});ig.baked=!0;
ig.module("game.ui.components.uiclickspothelper").requires("game.ui.components.uiclicktext").defines(function(){window.UIClickSpotHelper=ig.Class.extend({items:null,contextRectangle:{x:null,y:null,width:null,height:null},O3191:null,init:function(a,b){this.items=a;this.contextRectangle=b;this.O1816()},O1816:function(){for(var a in this.items){var b=this.items[a];b.margin||(b.margin={x:0,y:0});b.x-=b.margin.x;b.y-=b.margin.y;b.width+=2*b.margin.x;b.height+=2*b.margin.y}},O1815:function(){for(var a in this.items){var b=
this.items[a];if(Array.isArray(b))for(var c=0;c<b.length;c++)this.O6740(b[c],a,c);else this.O6740(b,a,null)}},O9683:function(a){for(var b in this.items){var c=this.items[b];this.O1062(c)&&ig.game.O8159.draw(c.x+c.margin.x,c.y+c.margin.y,a,ig.game.O8159[c.group+"_"+b])}},O9380:function(){for(var a in this.items){var b=this.items[a];if(Array.isArray(b))for(var c=0;c<b.length;c++)this.O3246(b[c]);else this.O3246(b)}},O3246:function(a){this.O1062(a)&&a.doDebug&&a.clickspot&&a.clickspot.O8621()},O1062:function(a){return null==
this.O3191||null==a.O8537||void 0==a.O8537||"*"==a.O8537[0]||-1<jQuery.inArray(this.O3191,a.O8537)},O6740:function(a,b,c){if(this.O1062(a)){if(null==a.clickspot||void 0==a.clickspot)b=this.O8552(a),a.clickspot=new UIClickSpot(b,{x:b.width,y:b.height},!1,null),void 0!=a.doPlaySound&&null!=a.doPlaySound&&(a.clickspot.doPlaySound=a.doPlaySound),null!=c?(a.onClick&&(a.clickspot.onClick=function(){a.onClick(c)}),a.onRightClick&&(a.clickspot.onClick=function(){a.onClick(c)}),a.O4838&&(a.clickspot.O4838=
function(){a.O4838(c)}),a.O7211&&(a.clickspot.O7211=function(){a.O7211(c)})):(a.onClick&&(a.clickspot.onClick=function(){a.onClick()}),a.O4838&&(a.clickspot.O4838=function(){a.O4838()}),a.O7211&&(a.clickspot.O7211=function(){a.O7211()}));a.clickspot.update()}},removeItems:function(){for(var a in this.items){var b=this.items[a];if(Array.isArray(b))for(var c=0;c<b.length;c++)b[c].clickspot=null;else b.clickspot=null}},stretch:function(a,b,c,d){for(var e in this.items){var f=this.items[e];0!=a&&(f.x=
Math.ceil(f.x*a),f.width=Math.ceil(f.width*a),0!=c&&(f.x+=c));0!=b&&(f.y=Math.ceil(f.y*b),f.height=Math.ceil(f.height*b),0!=d&&(f.x+=d))}},O1131:function(a,b){for(var c in this.items){var d=this.items[c];0!=a&&(d.x=Math.ceil(d.x-a/2),d.width+=a);0!=b&&(d.y=Math.ceil(d.y-b/2),d.height+=b)}},O8552:function(a){return{x:this.contextRectangle.x+a.x,y:this.contextRectangle.y+a.y,width:a.width,height:a.height}}})});ig.baked=!0;
ig.module("game.ui.areadialog").requires("game.ui.components.uidialog","game.ui.components.uiclickspot","game.ui.components.uiclickspothelper","game.ui.components.uiclicktext").defines(function(){window.AreaDialog=UIDialog.extend({pos:{x:10,y:10},size:{x:207,y:174},backgroundImage:null,img:null,O8487:1,O3143:6,nameMaxLength:40,O9171:1,O8850:40,O1368:1,O9504:6,O1128:40,O8485:200,O5088:["ANY","INDIVIDUALS"],protectionPos:[{x:152,y:13},{x:152,y:29}],state:"",O9199:!1,O5319:!1,O7068:void 0,O1856:!1,O4054:!1,
O6409:!1,O1307:!1,O9006:!1,O4158:!1,O9739:!1,O4925:!1,O3204:null,data:{id:null,name:"",description:"",protection:"INDIVIDUALS",editors:[],supers:[],drift:{angle:0,speed:0},areaGroupId:null,interactingId:null,generatorId:null,isSubArea:!1,isSinglePersonExperience:!1,isLimitedToEditorsOnly:!1,isUnlisted:!1,backOverrideRgb:null,nonLoggedInChatIfEditorAround:!1,titleFont:null},driftRect:{x:132,y:119,width:18,height:18},backOverrideRgbRect:{x:193,y:123,width:9,height:9},O6314:0,driftImg:null,drifts:[{angle:0,
speed:0},{angle:270,speed:20},{angle:315,speed:20},{angle:0,speed:20},{angle:45,speed:20},{angle:90,speed:20},{angle:135,speed:20},{angle:180,speed:20},{angle:225,speed:20}],singlePersonExperienceRect:{x:132,y:19,width:9,height:9},limitedToEditorsOnlyRect:{x:132,y:94,width:9,height:9},interactingRect:{x:132,y:34,width:9,height:9},unlistedRect:{x:132,y:49,width:9,height:9},nonLoggedInChatIfEditorAroundRect:{x:132,y:64,width:9,height:9},generatorRect:{x:132,y:79,width:9,height:9},collectInteractingRect:{x:187,
y:33,width:null,height:null},collectGeneratorRect:{x:187,y:78,width:null,height:null},ageRect:{x:132,y:7,width:null,height:null},snapshotRect:{x:132,y:112,width:null,height:null},subAreaInfoRect:{x:7,y:118,width:110,height:50},O5739:null,flagRect:{x:133,y:158,width:5,height:8},titleRect:{x:3,y:4,width:114,height:8},sponsorRect:{x:60,y:6,width:60,height:8},descriptionRect:{x:3,y:26,width:113,height:38,padding:1},addressRect:{x:5,y:16,width:114,height:8},editorsRect:{x:2,y:70,width:109,height:90,padding:4},
saveRect:{x:170,y:154,width:null,height:null},closeRect:{x:194,y:4,width:9,height:9},O4328:.4,urlName:"",O9040:!1,O5612:!1,isSubAreaDialog:void 0,O5213:null,editors:{},O1089:null,O3269:null,snapshotImage:null,O2785:"*",editorshipToSet:{id:null,name:null,newState:null},O2017:null,O8388:null,O4847:!1,O8153:{},domElementIds:"createAreaTitle areaSponsor createAreaDescription createAreaEditors singlePersonExperienceLabel subAreaInfo".split(" "),areaNameSponsors:{},init:function(){},open:function(a,b){this.state=
"";ig.game.bottomMenu&&ig.game.bottomMenu.O5854();ig.game.writableDialog.isOpen&&ig.game.writableDialog.close();ig.game.readableDialog.isOpen&&ig.game.readableDialog.close();if(!a||ig.game.O1257.rank>=ig.game.O9753){this.O7068=void 0;this.O5612=!a&&ig.game.isEditorHere;this.pos.x=Math.floor(ig.system.widthHalf-this.size.x/2);this.pos.y=Math.floor(ig.system.O2175-this.size.y/2);this.pos.x+this.size.x>ig.system.width&&(this.pos.x=ig.system.width-this.size.x+4);0>this.pos.y&&(this.pos.y=-5);if(!this.isOpen){this.O7090();
b&&(this.O3269=b,this.O8647(b));this.editors={};this.data.id=ig.game.areaId;this.O5612&&(this.data.drift=ig.game.O4507(ig.game.areaDrift),this.data.areaGroupId=ig.game.areaGroupId,this.data.interactingId=ig.game.areaGlobalInteractingId,this.data.generatorId=ig.game.areaGenerator.itemId);this.data.isSinglePersonExperience=ig.game.O7283;this.data.isLimitedToEditorsOnly=ig.game.areaIsLimitedToEditorsOnly;this.data.isUnlisted=ig.game.areaUnlisted;this.data.nonLoggedInChatIfEditorAround=ig.game.nonLoggedInChatIfEditorAround;
this.data.backOverrideRgb=ig.game.O3134;this.data.titleFont=ig.game.areaTitleFont;if(this.O5612||!ig.game.isEditorHere)ig.game.O5549&&(this.data.protection=ig.game.O5549),ig.game.areaName&&(this.data.name=ig.game.areaName),ig.game.O3632&&(this.data.description=ig.game.O3632);this.O9040=a;ig.game.isEditorHere&&(this.editors[ig.game.O1257.O2970]={name:ig.game.O1257.name,isSuper:!0,isCreator:!0});var c=this;this.O9040||(this.O1856=!0,ig.game.O9817.O5486(this.data.id).done(function(d){d&&(c.editors=d,
c.O1856=!1,c.O1924(),c.O9860(),c.doAutoSave&&(c.doAutoSave=!1,setTimeout(function(){c.trySave()},3E3)))}));this.data.drift&&(this.O6314=this.O7797(this.data.drift));this.isSubAreaDialog=this.O9040&&!ig.game.O4296||this.O5612&&ig.game.O4873.O9144();this.howLongAgo=null;!ig.game.areaId||this.O9040||this.isSubAreaDialog||(a=ml.Misc.getTimestampFromObjectId(ig.game.areaId),this.howLongAgo=ig.game.strings.O6141(a,!0));this.isSubAreaDialog&&(this.data.areaGroupId=ig.game.areaGroupId,this.data.isSubArea=
!0);if(this.O5612||!ig.game.isEditorHere)this.urlName=this.O9822(this.data.name,!0);this.O4054=!this.O9040&&ig.game.isEditorHere&&("ANY"!=this.data.protection||this.data.isSinglePersonExperience);this.O1307=(this.O6409=!this.O9040&&ig.game.isEditorHere&&!this.isSubAreaDialog&&("ANY"!=this.data.protection||this.data.isUnlisted))&&!ig.game.O4296;(this.O4925=this.O9739=!this.O9040&&ig.game.isEditorHere&&("ANY"!=this.data.protection||5<=ig.game.O1257.rank))&&this.O9477();this.O4158=this.O9006=!this.O9040&&
ig.game.isEditorHere&&!this.isSubAreaDialog&&"INDIVIDUALS"==this.data.protection;this.O5664();a=ig.game.O1946+"media/create-area/";b=".png?v="+ig.game.version;this.img=new ml.Image(a+"background"+b,null,this);this.driftImg=new ml.Image(a+"drift"+b,null,this)}this.O3702();!ig.game.isEditorHere&&void 0===this.O7068&&ig.game.isFullAccount&&ig.game.O9817.O9645(ig.game.areaGroupId).done(function(d){c.O7068=d&&d.flagged});this.parent()}else 0<ig.game.O1257.rank?ig.game.alertDialog.open({html:"<p>Please first try out placing and removing in this shared region, and collect or create something. You can collect something by dragging it into your side panel. You will then soon be able to create your own new area.</p>"}):
ig.game.O1002.O7063();ig.game.isEditorHere&&!ig.game.areaAdForDisplay&&jQuery("#areaAdsInfo").fadeIn()},O9833:function(a,b,c){this.editorshipToSet={id:a,name:b,newState:!!c};this.O2017=a;this.open()},O1924:function(){var a=this.editorshipToSet&&this.editorshipToSet.id?this.editorshipToSet.id:null;if(a){var b=ig.game.strings.O9955(this.editorshipToSet.name);if(this.editorshipToSet.newState)this.O3204='<span style="color: green" class="blinksoftAnimation">+'+b+"</span>",this.editors[a]={name:this.editorshipToSet.name,
justAddedViaEditorshipToSet:!0},ig.game.sounds.success.play();else{var c=this.editors[a];c&&(c.isSuper?(this.O3204='<span style="color: red" class="blinksoftAnimation">'+b+"* can't be removed</span>",ig.game.sounds.nocando.play()):(this.O3204='<span style="text-decoration: line-through; color: rgba(0,0,0,0.5)" class="blinksoftAnimation">'+b+"</span>",delete this.editors[a],ig.game.sounds.pickup.play()))}}this.editorshipToSet={}},O4439:function(){this.isOpen||(ig.game.isFullAccount?ig.game.isEditorHere?
ig.game.areaDialog.open(!0):ig.game.alertDialog.open('<p>To create a new area, go <span class="pseudoLink" onclick="'+(ig.game.O4873.O8292?"ig.game.portaller.O6417(0)":"ig.game.portaller.startExitAreaTeleportingRequest()")+'">elsewhere</span> first'+(1>=ig.game.O1257.rank?" and create &amp; build there a bit":"")+".</p>",!0):ig.game.bottomMenu.O6979(!0))},O7090:function(){this.data={id:null,name:"",urlName:"",description:"",protection:"INDIVIDUALS",editors:[],supers:[],drift:{angle:0,speed:0},areaGroupId:null,
interactingId:null,generatorId:null,isSubArea:!1,backOverrideRgb:null};this.O6314=0;this.editors={};this.O5739=this.editorsListMessage=this.snapshotImage=this.O3269=this.O1089=null},O3702:function(){var a=this,b={};b.close={O8537:["*"],x:this.closeRect.x,y:this.closeRect.y,width:this.closeRect.width,height:this.closeRect.height,doDebug:!1,clickspot:null,onClick:function(){a.close()}};ig.game.isEditorHere?(b.save={O8537:[""],x:this.saveRect.x,y:this.saveRect.y,width:ig.game.O8159.bigOkButton.width,
height:ig.game.O8159.bigOkButton.height,doDebug:!1,clickspot:null,onClick:function(){a.trySave()}},this.O9040||(this.O9006&&(b.addRemoveInteracting={O8537:[""],x:this.interactingRect.x,y:this.interactingRect.y,width:this.interactingRect.width,height:this.interactingRect.height,doDebug:!1,clickspot:null,onClick:function(){a.O7581()}},b.collectInteracting={O8537:[""],x:this.collectInteractingRect.x,y:this.collectInteractingRect.y,width:ig.game.O8159.collectButton.width,height:ig.game.O8159.collectButton.height,
doDebug:!1,clickspot:null,onClick:function(){a.O6893(a.data.interactingId)}},b.collectInteracting.doPlaySound=!1),this.O4054&&(b.O5212={O8537:[""],x:this.singlePersonExperienceRect.x,y:this.singlePersonExperienceRect.y,width:this.singlePersonExperienceRect.width,height:this.singlePersonExperienceRect.height,doDebug:!1,clickspot:null,onClick:function(){a.O5212()}}),this.O4158&&(b.addRemoveGenerator={O8537:[""],x:this.generatorRect.x,y:this.generatorRect.y,width:this.generatorRect.width,height:this.generatorRect.height,
doDebug:!1,clickspot:null,onClick:function(){a.O6299()}},this.data.generatorId&&(b.collectGenerator={O8537:[""],x:this.collectGeneratorRect.x,y:this.collectGeneratorRect.y,width:ig.game.O8159.collectButton.width,height:ig.game.O8159.collectButton.height,doDebug:!1,clickspot:null,onClick:function(){a.O6893(a.data.generatorId)}},b.collectGenerator.doPlaySound=!1)),this.isSubAreaDialog||(this.O6409&&(b.O8773={O8537:[""],x:this.unlistedRect.x,y:this.unlistedRect.y,width:this.unlistedRect.width,height:this.unlistedRect.height,
doDebug:!1,clickspot:null,onClick:function(){a.O8773()}}),this.O1307&&(b.nonLoggedInChatIfEditorAround={O8537:[""],x:this.nonLoggedInChatIfEditorAroundRect.x,y:this.nonLoggedInChatIfEditorAroundRect.y,width:this.nonLoggedInChatIfEditorAroundRect.width,height:this.nonLoggedInChatIfEditorAroundRect.height,doDebug:!1,clickspot:null,onClick:function(){a.O1559()}}),this.O1307&&(b.isLimitedToEditorsOnly={O8537:[""],x:this.limitedToEditorsOnlyRect.x,y:this.limitedToEditorsOnlyRect.y,width:this.limitedToEditorsOnlyRect.width,
height:this.limitedToEditorsOnlyRect.height,doDebug:!1,clickspot:null,onClick:function(){a.toggleIsLimitedToEditorsOnly()}}))),this.O9739&&(b.drift={O8537:[""],x:this.driftRect.x,y:this.driftRect.y,width:this.driftRect.width,height:this.driftRect.height,doDebug:!1,clickspot:null,onClick:function(){a.snapshotImage||a.O2853()}}),this.O4925&&(b.backOverrideRgb={O8537:[""],x:this.backOverrideRgbRect.x,y:this.backOverrideRgbRect.y,width:this.backOverrideRgbRect.width,height:this.backOverrideRgbRect.height,
doDebug:!1,clickspot:null,onClick:function(){a.O7459()}},this.O8153={width:163,height:172},this.O8153.x=Math.floor(this.size.x/2-this.O8153.width/2),this.O8153.y=Math.floor(this.size.y/2-this.O8153.height/2),b.O8153={O8537:["pickBackOverrideRgb"],x:this.O8153.x,y:this.O8153.y,width:this.O8153.width,height:this.O8153.height,doDebug:!1,clickspot:null,onClick:function(){a.pickColorAndCloseColorPicker()}})):b.addRemoveFlag={O8537:[""],x:this.flagRect.x,y:this.flagRect.y,width:this.flagRect.width,height:this.flagRect.height,
doDebug:!1,clickspot:null,onClick:function(){a.O2045()}};this.clickSpots=new UIClickSpotHelper(b,{x:this.pos.x,y:this.pos.y,width:this.size.x,height:this.size.y});this.clickSpots.O3191=this.state},O7459:function(){ig.input.state("ctrl")?ig.game.alertDialog.O5816('Enter Red, Green, Blue (like "255,0,0") or leave empty:',this.data.backOverrideRgb,ig.game.areaDialog.O6553):this.data.backOverrideRgb?(this.data.backOverrideRgb=null,ig.game.sounds.pickup.play()):this.O5264()},O6553:function(a){var b=ig.game.areaDialog;
b.data.backOverrideRgb=b.O9131(a);b.data.backOverrideRgb?ig.game.sounds.success.play():ig.game.sounds.pickup.play()},O9131:function(a){var b=null;a&&"string"===typeof a&&(a=a.split(","),3<=a.length&&(b=this.O4853(a[0])+","+this.O4853(a[1])+","+this.O4853(a[2])));return b},O4853:function(a){var b=0;isNaN(a)||(b=parseInt(a),0>b?b=0:255<b&&(b=255));return b},O5264:function(){this.state="pickBackOverrideRgb";this.clickSpots.O3191=this.state;this.O8375()},pickColorAndCloseColorPicker:function(){var a=
ig.system.context.getImageData(Math.floor(ig.input.mouse.x*ig.system.scale),Math.floor(ig.input.mouse.y*ig.system.scale),1,1).data;a=[a[0],a[1],a[2]];this.data.backOverrideRgb=a.join(",");ig.game.sounds.success.play();this.state="";this.clickSpots.O3191=this.state;this.O6138()},O2045:function(){if(void 0!==this.O7068){var a=this;this.O7068?(this.O7068=!1,ig.game.O9817.O5122(ig.game.areaGroupId,null).done(function(b){a.O7068=!!b.flagged})):ig.game.alertDialog.O5816("Please enter reason for reporting this area:",
null,function(b){b&&""!=ig.game.strings.trim(b)&&ig.game.O9817.O5122(ig.game.areaGroupId,b).done(function(c){a.O7068=!!c.flagged})},"Report",null,null,null,null,ig.game.O3962)}},O7797:function(a){for(var b=0,c=0;c<this.drifts.length;c++){var d=this.drifts[c];if(a.angle==d.angle&&this.O5794(a.speed)==this.O5794(d.speed)){b=c;break}}return b},O5794:function(a){var b=null;a=Number(a);0<a?b=1:0>a?b=-1:0==a&&(b=0);return b},toggleProtection:function(a){this.data.protection=this.data.protection==this.O5088[0]?
this.O5088[1]:this.O5088[0];this.O9860()},trySave:function(){var a=jQuery("#createAreaTitle").val(),b=jQuery("#createAreaDescription").val(),c=["elsewhere","last","home"];if(this.O1856)this.O1668("Please wait while the editor list is being loaded");else if(this.O5319)this.O1668("This area name is not available");else if(a&&a!=a.trim())this.O1668("Name may not start with or end in spaces");else if(a&&ig.game.strings.O2646(a))this.O1668("Name may not include < or >");else if(ig.game.strings.O2646(b))this.O1668("Description may not include < or >");
else if(a&&0<=a.indexOf("  "))this.O1668("Name may not include double spaces");else if(this.O5612||!a||this.isSubAreaDialog||a.length>=this.O3143&&a.length<=this.nameMaxLength)if(this.data.name&&""!=this.data.name.length)if(!this.isSubAreaDialog||this.data.name.length>=this.O9171&&this.data.name.length<=this.O8850)if(this.isSubAreaDialog&&0<=c.indexOf(this.data.name.toLowerCase()))this.O1668("Sorry, this name cannot be used");else{var d=this;this.data.description=b;if("INDIVIDUALS"==this.data.protection){this.data.editors=
[];this.data.supers=[];for(var e in this.editors)e&&(this.data.editors.push(e),this.editors[e].isSuper&&this.data.supers.push(e))}this.data.drift&&0==this.data.drift.speed&&delete this.data.drift;this.O5612?ig.game.O9817.O1106(this.data.id,this.data).done(function(f){d.snapshotImage?ig.game.O1189.register(ig.game.O1189.types.CREATED_AREA_SNAPSHOT,function(){var g=d.snapshotImage.src.substr(22),h=ig.game.O4507(ig.game.customSnapshotDialog.size);ig.game.O9817.O6348(d.data.id,g,h.x,h.y).done(function(k){d.close();
location.reload()})}):("INDIVIDUALS"==ig.game.O5549&&ig.game.O7836.O7536(d.O2017),d.O2017?d.O2017=null:setTimeout(function(){location.reload()},500),d.close())}).fail(function(){ig.game.sounds.nocando.play()}):ig.game.O9817.createArea_P(this.data).done(function(f){f.tooMany?(ig.game.alertDialog.open("Sorry, you reached the current limit for creating "+(d.isSubAreaDialog?"sub-areas":"areas")+". Feel free to contact us at we@thingistan.com to discuss."),ig.game.sounds.nocando.play()):(d.close(),ig.game.O1189.register(ig.game.O1189.types.DID_CREATE_AREA,
function(){d.isSubAreaDialog?ig.game.portaller.O9838(d.data.name,1):(ig.game.sounds.ringportalling.play(),ig.game.O9710.O8410(d.urlName))}))}).fail(function(){ig.game.sounds.nocando.play();d.data.name=null;d.O8918()})}else this.O1668("Name must be between "+this.O9171+"-"+this.O8850+" letters");else this.O1668("Please enter an area name");else this.O1668("Name should use from "+this.O3143+"-"+this.nameMaxLength+" letters.",!0)},O1668:function(a,b){a="Oops: "+a;b&&(a="<p>"+a+"</p>");ig.game.alertDialog.open(a,
b);ig.game.sounds.nocando.play()},update:function(){this.isOpen&&(this.clickSpots.O1815(),this.O5213&&!this.snapshotImage&&this.O5213.update(),this.O1089&&this.O1089.update(),this.O5739&&this.O5739.update());this.parent()},O5212:function(){this.data.isSinglePersonExperience=!this.data.isSinglePersonExperience;this.data.isSinglePersonExperience&&ig.game.sounds.success.play()},O8773:function(){this.data.isUnlisted=!this.data.isUnlisted;this.data.isUnlisted&&ig.game.sounds.success.play()},O1559:function(){this.data.nonLoggedInChatIfEditorAround=
!this.data.nonLoggedInChatIfEditorAround;this.data.nonLoggedInChatIfEditorAround&&ig.game.sounds.success.play()},toggleIsLimitedToEditorsOnly:function(){this.data.isLimitedToEditorsOnly=!this.data.isLimitedToEditorsOnly;this.data.isLimitedToEditorsOnly&&ig.game.sounds.success.play()},O9860:function(){var a="";if(!this.O1856){if("INDIVIDUALS"==this.data.protection){var b='<span style="opacity: 0.5">'+this.O2785+"</span>",c="opacity: 0.5; margin-bottom: 20px;";this.O9040&&(c+="line-height: 1.5em;");
a+='<div style="'+c+'">'+(this.O9040?"Editors (can be changed later):":"Editors:")+"</div>";this.O3204&&(a+='<div style="margin-bottom: 15px">'+this.O3204+"</div>");a+='<table class="editorsTable">';for(var d in this.editors)if((c=this.editors[d])&&c.name){var e=d==ig.game.O1257.O2970;a+='<tr class="editorLine">';if(e)a+="<td>Me"+(ig.game.O6612?b:"")+"</td>",ig.game.isEditorHere&&(a+="<td>&nbsp;</td>");else if(c.justAddedViaEditorshipToSet)delete c.justAddedViaEditorshipToSet;else{a+="<td>";e=c.name;
e=ig.game.strings.replaceAll(e,this.O2785," ");e=e.trim();e=ig.game.strings.O7686(e,20);var f="ig.game.areaDialog.openPlayerProfile('"+ig.game.strings.O9955(d)+"')";a+='<span onclick="'+f+'" class="hoverPseudolink" style="color: rgba(0,0,0,0.85)">'+ig.game.strings.O9955(e)+"</span>";c.isSuper&&(a+=b);a+="</td>";if(c.justAdded||ig.game.O6612&&!c.isSuper)a+="<td>&nbsp;<span onclick=\"ig.game.areaDialog.O4597('"+d+'\')" class="pseudolink editorRemove">Remove</span></td>'}a+="</tr>"}a+="</table>";b=!this.O9040;
ig.game.O6612&&!this.O3204&&(a+='<div class="editorAddLine"><span onclick="ig.game.areaDialog.O8346()" class="pseudolink editorAdd">Add</span>',b&&(a+=' &nbsp;<span onclick="ig.game.areaDialog.O2081()" class="pseudolink superEditorAdd">Add*</span></div>'));b&&(a+='<div style="margin-top: 30px; opacity: 0.3; line-height: 1.6em">*<span class="pseudolink" onclick="ig.game.areaDialog.explainStarEditors()">Star editors</span> can edit this list</div>');this.O3204=null}else a+="<div>","CITIZENS"==this.data.protection&&
(a+="semi-"),a+="open edits",this.O9040&&(a+=" <span style='font-size: 90%; opacity: .5'>(can't be changed later)</span>"),a+="<br/>&nbsp;</div>";this.O9040&&5<=ig.game.O1257.rank&&(a+='<div class="toggleProtection" style="color: rgb(168,168,168)">&nbsp;<br/>&nbsp;<br/><span onclick="ig.game.areaDialog.toggleProtection()" class="pseudoLink" style="font-size: 90%">',a+="INDIVIDUALS"==this.data.protection?"set to open edits":"set to editor list",a+="</span>",a+="</div>");jQuery("#createAreaEditors").show()}jQuery("#createAreaEditors").html(a)},
explainStarEditors:function(){ig.game.alertDialog.open({html:"<p>Star editors can add or remove area editors. Once added, star editors are unremovable and equal co-owners of the area</p>",O3144:!0})},O4597:function(a){delete this.editors[a];ig.game.sounds.click.play();this.O9860()},O9218:function(a){var b=this;ig.game.O9817.O4406(a).done(function(c){c&&(b.editors[a]?ig.game.sounds.nocando.play():b.editors[a]={name:c.screenName,isSuper:"addSuperEditor"==b.mode,justAdded:!0},b.mode=null,ig.game.friendsDialog.close(),
b.O9860(),ig.game.writableDialog&&ig.game.writableDialog.isOpen&&ig.game.writableDialog.close(),ig.game.playerDialog&&ig.game.playerDialog.isOpen&&ig.game.playerDialog.close(),ig.game.sounds.success.play())})},O8346:function(){ig.game.sounds.click.play();this.mode="addEditor";ig.game.friendsDialog.open()},O2081:function(){this.mode="addSuperEditor";ig.game.alertDialog.open({html:'<p><span style="color: red">Caution:</span> Making someone a Star Editor fully shares ownership of the area, and can never be undone again.</p>',
O9267:function(){ig.game.friendsDialog.open()},O3144:!0})},draw:function(){this.isOpen&&this.img&&this.img.loaded&&this.driftImg&&this.driftImg.loaded&&(this.img.draw(this.pos.x,this.pos.y,0,0,this.size.x,this.size.y),this.O4686(),this.clickSpots.O9380(),this.O9571(),this.O2582(),this.O4074(),this.O5192(),this.O9652(),this.O8142(),this.O1765(),this.O1788(),this.drawIsLimitedToEditorsOnlyButton(),this.O7922(),this.drawFlagButton(),this.O1338(),this.clicktextEditorFootnote&&this.clicktextEditorFootnote.draw(),
this.O4596(),this.O2696(),this.O1897(),this.O6401(),this.O1057(),ig.game.isEditorHere&&ig.game.O8159.O6177(this.pos.x+this.saveRect.x,this.pos.y+this.saveRect.y),ig.game.O8159.O1246(this.pos.x+this.closeRect.x,this.pos.y+this.closeRect.y))},O4596:function(){this.O9006&&this.data.interactingId&&ig.game.O8159.draw(this.pos.x+this.collectInteractingRect.x,this.pos.y+this.collectInteractingRect.y,1,ig.game.O8159.collectButton)},O2696:function(){this.O4158&&this.data.generatorId&&ig.game.areaGenerator.O8112&&
ig.game.O8159.draw(this.pos.x+this.collectGeneratorRect.x,this.pos.y+this.collectGeneratorRect.y,1,ig.game.O8159.collectButton)},O1338:function(){!this.isSubAreaDialog&&!this.O9040&&ig.game.albumDialog.O4060()&&ig.game.O8159.draw(this.pos.x+124,this.pos.y+5,1,ig.game.O8159.openAlbumButton)},O1897:function(){if(ig.game.isEditorHere&&!this.isSubAreaDialog&&"INDIVIDUALS"==this.data.protection&&!this.O9040){if(!this.O1089){this.O1089=new UIClickText({x:this.pos.x+this.snapshotRect.x,y:this.pos.y+this.snapshotRect.y},
"+snapshot",ig.game.blackSmallFont,"#000000",this.O4328);this.O1089.playSound=!1;var a=this;this.O1089.onClick=function(){""==a.state&&(ig.game.areaDialog.snapshotImage?(ig.game.areaDialog.snapshotImage=null,ig.game.areaDialog.O3269=null,ig.game.areaDialog.O1089=null,ig.game.sounds.bin.play()):(ig.game.customSnapshotDialog.open(),ig.game.areaDialog.close()))}}if(this.snapshotImage&&this.snapshotImage.width){var b=this.snapshotImage.width/(ig.system.scale/2)-1;ig.system.context.drawImage(this.snapshotImage,
(this.pos.x+this.snapshotRect.x)*ig.system.scale,(this.pos.y+this.snapshotRect.y)*ig.system.scale,b,this.snapshotImage.height/(ig.system.scale/2)-1);"x"!=this.O1089.text&&(this.O1089.pos.x+=b/ig.system.scale+3,this.O1089.O3550("x"),this.O1089.alpha=.25)}this.O1089.draw()}},O6401:function(){if(this.O4158&&!this.data.generatorId&&!ig.game.areaGenerator.itemId&&!ig.game.areaGenerator.O8112){if(!this.O5739){this.O5739=new UIClickText({x:this.pos.x+this.generatorRect.x+53,y:this.pos.y+this.generatorRect.y+
2},"Try",ig.game.blackSmallFont,"#000000",this.O4328);var a=this;this.O5739.onClick=function(){a.data.generatorId||(ig.game.areaGenerator.O7719(),a.close())}}this.O5739.draw()}},drawFlagButton:function(){ig.game.isEditorHere||void 0===this.O7068||ig.game.O8159.draw(this.pos.x+this.flagRect.x,this.pos.y+this.flagRect.y,this.O7068?1:.5,ig.game.O8159["flag"+(this.O7068?"On":"Off")])},O5192:function(){if(this.O9006){var a=this.pos.x+this.interactingRect.x,b=this.pos.y+this.interactingRect.y;ig.game.O8159.draw(a,
b,1,ig.game.O8159["areaGlobalInteractingButton"+(this.data.interactingId?"Active":"Inactive")]);ig.system.context.globalAlpha=this.O4328;ig.game.blackSmallFont.draw("interacting",a+12,b+2);ig.system.context.globalAlpha=1}},O9652:function(){if(this.O4158){var a=this.pos.x+this.generatorRect.x,b=this.pos.y+this.generatorRect.y;ig.game.O8159.draw(a,b,1,ig.game.O8159["generatorButton"+(this.data.generatorId?"Active":"Inactive")]);ig.system.context.globalAlpha=this.O4328;ig.game.blackSmallFont.draw("generator",
a+12,b+2);ig.system.context.globalAlpha=1}},O8142:function(){if(this.O4054){var a=this.pos.x+this.singlePersonExperienceRect.x,b=this.pos.y+this.singlePersonExperienceRect.y;ig.game.O8159.draw(a,b,1,ig.game.O8159["singlePersonExperienceButton"+(this.data.isSinglePersonExperience?"Active":"Inactive")]);ig.system.context.globalAlpha=this.O4328;ig.game.blackSmallFont.draw("see no one",a+12,b+2);ig.system.context.globalAlpha=1}},O1765:function(){if(this.O6409){var a=this.pos.x+this.unlistedRect.x,b=this.pos.y+
this.unlistedRect.y;ig.game.O8159.draw(a,b,1,ig.game.O8159["unlistedButton"+(this.data.isUnlisted?"Active":"Inactive")]);ig.system.context.globalAlpha=this.O4328;ig.game.blackSmallFont.draw("hide in search",a+12,b+2);ig.system.context.globalAlpha=1}},O1788:function(){if(this.O1307){var a=this.pos.x+this.nonLoggedInChatIfEditorAroundRect.x,b=this.pos.y+this.nonLoggedInChatIfEditorAroundRect.y;ig.game.O8159.draw(a,b,1,ig.game.O8159["nonLoggedInChatIfEditorAroundButton"+(this.data.nonLoggedInChatIfEditorAround?
"Active":"Inactive")]);ig.system.context.globalAlpha=this.O4328;ig.game.blackSmallFont.draw("Explorer chat\nif editor here",a+12,b);ig.system.context.globalAlpha=1}},drawIsLimitedToEditorsOnlyButton:function(){if(this.O1307&&ig.game.O6612){var a=this.pos.x+this.limitedToEditorsOnlyRect.x,b=this.pos.y+this.limitedToEditorsOnlyRect.y;ig.game.O8159.draw(a,b,1,ig.game.O8159["isLimitedToEditorsOnlyButton"+(this.data.isLimitedToEditorsOnly?"Active":"Inactive")]);ig.system.context.globalAlpha=this.O4328;
ig.game.blackSmallFont.draw("Limit area\nto editors only",a+12,b);ig.system.context.globalAlpha=1}},O7922:function(){this.O4925&&(ig.game.O8159.draw(this.pos.x+this.backOverrideRgbRect.x,this.pos.y+this.backOverrideRgbRect.y,1,ig.game.O8159["backOverrideRgbButton"+(this.data.backOverrideRgb?"Active":"Inactive")]),this.data.backOverrideRgb&&(ig.system.context.fillStyle="rgb("+this.data.backOverrideRgb+")",this.fillRect(this.pos.x+this.backOverrideRgbRect.x+1,this.pos.y+this.backOverrideRgbRect.y+1,
this.backOverrideRgbRect.width-2,this.backOverrideRgbRect.height-2)))},O2853:function(){++this.O6314>=this.drifts.length&&(this.O6314=0);this.data.drift=ig.game.O4507(this.drifts[this.O6314])},O9477:function(){if(!this.O4847){var a="/media/color-picker.png?v="+ig.game.version;ig.game.isLocal||(a="//static.thingistan.com"+a);this.O8388=new Image;this.O8388.crossOrigin="Anonymous";var b=this;this.O8388.onload=function(){b.O4847=!0};this.O8388.src=a}},O1057:function(){"pickBackOverrideRgb"==this.state&&
this.O4847&&ig.system.context.drawImage(this.O8388,0,0,this.O8153.width,this.O8153.height,this.pos.x*ig.system.scale+this.O8153.x*ig.system.scale,this.pos.y*ig.system.scale+this.O8153.y*ig.system.scale,this.O8153.width*ig.system.scale,this.O8153.height*ig.system.scale)},O9571:function(){if(this.O9739&&!this.snapshotImage){var a=this.driftRect;this.driftImg.draw(this.pos.x+a.x,this.pos.y+a.y,this.O6314*(a.width+1),0,a.width,a.height);this.data.drift&&this.data.drift.speed?(!this.O5213&&this.O9739&&
(this.O5213=new UIClickText({x:this.pos.x+a.x+a.width+5,y:this.pos.y+a.y+a.height-7},String(this.data.drift.speed)+"%",ig.game.blackFont,"#000000",.5),this.O5213.onClick=function(){ig.game.alertDialog.O5816("Enter speed from 1 - 100%:",String(ig.game.areaDialog.data.drift.speed)+"%",ig.game.areaDialog.O1995)}),this.O5213&&(ig.system.context.globalAlpha=.5,this.O5213.draw(),ig.system.context.globalAlpha=1)):this.O5213&&(this.O5213=null)}},O1995:function(a){a&&(a=String(a),a=ig.game.strings.replaceAll(a,
"%",""),a==parseInt(a)?(a=parseInt(a),1<=a&&100>=a?(ig.game.areaDialog.data.drift.speed=a,ig.game.areaDialog.O5213.O3550(String(a)+"%")):ig.game.sounds.nocando.play()):ig.game.sounds.nocando.play())},O2582:function(){if(this.data.name&&!this.O9040){var a=this.data.name;a=ig.game.strings.O7686(a,30);var b=this.pos.x+this.titleRect.x+3,c=this.pos.y+this.titleRect.y+3,d=this.data.titleFont?this.data.titleFont+"Font":"blackFont";this.data.titleFont&&(--b,--c);ig.game[d].draw(a,b,c)}},O4074:function(){var a=
this.pos.x+this.addressRect.x+1,b=this.pos.y+this.addressRect.y+1;if(this.urlName){var c;this.isSubAreaDialog?c=ig.game.strings.O7686("Interacting: /to "+this.data.name,24):(c=this.urlName,0===c.indexOf("shortento")&&(c=c.substring(9)+" (shortened)"),c=15>=c.length?"thingistan.com/"+c:"../"+c,c=ig.game.strings.O7686(c,24));ig.system.context.globalAlpha=.9;ig.game.whiteSmallFont.draw(c,a,b);ig.system.context.globalAlpha=1}else this.O9040&&this.O5319&&(ig.system.context.globalAlpha=.4,ig.game.blackSmallFont.draw("oops, name unavailable",
a,b),ig.system.context.globalAlpha=1)},O1383:function(){if(!this.isSubAreaDialog)for(var a=0;a<this.O5088.length;a++){var b=this.protectionPos[a];this.data.protection==this.O5088[a]&&(ig.system.context.fillStyle="rgb(0,0,0)",this.fillRect(this.pos.x+b.x+3,this.pos.y+b.y+5,3,1),this.fillRect(this.pos.x+b.x+4,this.pos.y+b.y+4,1,3))}},O4686:function(){if(this.howLongAgo&&!this.isSubAreaDialog){var a=this.pos.x+this.ageRect.x,b=this.pos.y+this.ageRect.y;ig.system.context.globalAlpha=.5;ig.game.whiteSmallFont.draw(this.howLongAgo,
a,b);ig.system.context.globalAlpha=1}},close:function(){this.O8388=this.editorshipToSet=this.O2017=null;this.O4847=!1;this.mode=null;this.O3976();ig.game.isEditorHere&&!ig.game.areaAdForDisplay&&jQuery("#areaAdsInfo").fadeOut();this.parent()},openPlayerProfile:function(a){this.close();this.isOpen=!1;ig.game.playerDialog.openForPlayerId(a,void 0,!0)},O4796:function(){var a=null;this.data&&this.data.name&&(a=this.areaNameSponsors[this.data.name]);return a},O5664:function(){var a=this.O9040&&ig.game.isEditorHere;
this.isSubAreaDialog&&!this.O9040&&(a=!1);var b=this.isSubAreaDialog?"sub-area name":"area name",c=this.O9379(this.titleRect,void 0,a,0);a||(c+="font-weight: bold");a&&(b='<input type="text" style="'+c+'" maxLength="'+this.nameMaxLength+'" onkeyup="ig.game.areaDialog.O8918()" class="createAreaInput" id="createAreaTitle" placeholder="'+b+'" value="'+ig.game.strings.O9955(this.data.name)+'"'+(a?"":' readonly="readonly"')+"/>",jQuery(b).appendTo("body"));(b=this.O4796())&&!a&&(a='<div id="areaSponsor" style="'+
this.O9379(this.sponsorRect)+'"><span onclick="ig.game.areaDialog.openPlayerProfile(\''+b+'\')" class="pseudolink" style="color: rgb(160,130,0)">sponsor</span></div>',jQuery(a).appendTo("body"));this.isSubAreaDialog?(a='<div class="areaInfoLabel" id="subAreaInfo" style="'+this.O9379(this.subAreaInfoRect)+'opacity: 0.9">',a+="Sub-Areas are part of this main area and inherit the settings.",this.O5612||(a+="<br/><br/>(To create a new area, click 'Elsewhere' first)"),jQuery(a+"</div>").appendTo("body")):
(a=this.O9379(this.descriptionRect,void 0,ig.game.isEditorHere),a+="padding: "+this.descriptionRect.padding*ig.system.scale+"px;",a='<textarea type="text" style="'+(a+'color: rgba(0,0,0,0.85);" class="createAreaInput" id="createAreaDescription" ')+(ig.game.isEditorHere?"":" readonly ")+'placeholder="'+(ig.game.isEditorHere?"optional description":"")+'" maxLength="'+this.O8485+'">'+ig.game.strings.O9955(this.data.description)+"</textarea>",jQuery(a).appendTo("body"),a='<div style="'+this.O9379(this.editorsRect,
2,ig.game.O6612)+";padding: "+this.editorsRect.padding*ig.system.scale+'px;" class="createAreaInput" id="createAreaEditors"></div>',jQuery(a).appendTo("body"));jQuery("#createAreaDescription").keydown(function(d){d.stopPropagation()});this.O9860();this.data&&this.data.isSinglePersonExperience&&!ig.game.isEditorHere&&!this.data.isSubArea&&(a='<div style="'+this.O9379({x:-4,y:176,width:152,height:18},0)+'" id="singlePersonExperienceLabel">No one can see anyone else here</div>',jQuery(a).appendTo("body"))},
O3778:function(a){var b=ig.system.scale;a=a?"rgba(0,0,0,0.5)":"rgba(255,255,255,0)";return"border-left: "+b+"px solid "+a+"; border-top: "+b+"px solid "+a+";"},O8918:function(){var a=jQuery("#createAreaTitle").val();if(a&&(!this.isSubAreaDialog&&a.length>=this.O3143||this.isSubAreaDialog&&a.length>=this.O9171)){if(a!=this.data.name){var b=this,c=this.O9822(a);c&&(this.isSubAreaDialog?ig.game.O9817.O9533(c,this.data.areaGroupId).done(function(d){b.O9963(a,c,d&&d.unique)}):ig.game.O9817.O8620(c).done(function(d){b.O9963(a,
c,d&&d.ok)}))}}else this.urlName=this.data.name="",this.O5319=!1},O9963:function(a,b,c){a==jQuery("#createAreaTitle").val()&&(c?(this.data.name=ig.game.strings.trim(a),this.urlName=b,this.O5319=!1):(this.data.name=ig.game.strings.trim(a),this.urlName&&!this.O5319&&ig.game.sounds.nocando.play(),this.urlName="",this.O5319=!0))},O9822:function(a,b){var c="",d=this.isSubAreaDialog?this.O9171:this.O3143,e=this.isSubAreaDialog?this.O8850:this.nameMaxLength;if(a&&"string"==typeof a&&a==a.trim()&&(a.length>=
d&&a.length<=e||b)&&-1===a.indexOf("  ")){for(var f=0;f<a.length;f++){var g=a.substr(f,1);g=g.toLowerCase();0<="abcdefghijklmnopqrstuvwxyz0123456789-".indexOf(g)&&(c+=g)}b||c.length>=d&&c.length<=e||(c="")}return c},O7581:function(){"INDIVIDUALS"==this.data.protection&&(this.data.interactingId?(ig.game.sounds.bin.play(),this.data.interactingId=null):this.O9040||(this.data.interactingId=null,ig.game.alertDialog.open('<p>Now pick an Interacting from the right to add <a href="/info-interacting#areaGlobal" target="_blank">area-global</a> functionality.</p>',
!0,null,null,null,!0),ig.game.alertDialog.contextId="areaGlobalInteractingId"))},O6299:function(){"INDIVIDUALS"==this.data.protection&&(this.data.generatorId?(ig.game.sounds.bin.play(),this.data.generatorId=null):this.O9040||(this.data.generatorId=null,ig.game.alertDialog.open('<p>Now pick an <a href="/info-generator" target="_blank">Area Generator</a> from the right.</p>',!0,null,null,null,!0),ig.game.alertDialog.contextId="generatorId"))},O6893:function(a){if(a){var b=ig.game.panelSet.panels[ig.game.panelSet.tabEnum.collected];
1!=ig.game.panelSet.tabState&&ig.game.panelSet.O6923(1);ig.game.O7747.O1015(a,b.O1875)}},O4374:function(a){a&&(this.data.interactingId=a,ig.game.alertDialog.isOpen&&ig.game.alertDialog.close(),ig.game.sounds.success.play())},O7380:function(a){a&&(this.data.generatorId=a,ig.game.alertDialog.isOpen&&ig.game.alertDialog.close(),ig.game.sounds.success.play())},O9379:function(a,b,c,d){void 0===b&&(b=1);var e=jQuery("#"+ig.game.canvasId).position();a="font-size: "+Math.round(4+2.5*ig.system.scale)+"px;left: "+
Math.round(e.left+(this.pos.x+a.x+b)*ig.system.scale)+"px;top: "+Math.round(e.top+(this.pos.y+a.y+b)*ig.system.scale)+"px;width: "+(a.width-2*b)*ig.system.scale+"px;height: "+(a.height-2*b)*ig.system.scale+"px;";void 0!==c&&(void 0===d&&(d=.5),a=a+("background-color: rgba(255,255,255,"+(c?.9:d)+");")+this.O3778(c));return a},O3976:function(){for(var a=0;a<this.domElementIds.length;a++)jQuery("#"+this.domElementIds[a]).remove()},O8375:function(){for(var a=0;a<this.domElementIds.length;a++)jQuery("#"+
this.domElementIds[a]).hide()},O6138:function(){for(var a=0;a<this.domElementIds.length;a++)jQuery("#"+this.domElementIds[a]).show()},clearRect:function(a,b,c,d){ig.system.context.clearRect(Math.ceil(a*ig.system.scale),Math.ceil(b*ig.system.scale),Math.ceil(c*ig.system.scale),Math.ceil(d*ig.system.scale))},fillRect:function(a,b,c,d){ig.system.context.fillRect(Math.ceil(a*ig.system.scale),Math.ceil(b*ig.system.scale),Math.ceil(c*ig.system.scale),Math.ceil(d*ig.system.scale))},strokeRect:function(a,
b,c,d){ig.system.context.strokeRect(Math.ceil(a*ig.system.scale),Math.ceil(b*ig.system.scale),Math.ceil(c*ig.system.scale),Math.ceil(d*ig.system.scale))},fillText:function(a,b,c){ig.system.context.fillText(a,b*ig.system.scale,c*ig.system.scale)},O8647:function(a){var b=document.createElement("canvas");b.width=ig.game.customSnapshotDialog.size.x*ig.system.scale;b.height=ig.game.customSnapshotDialog.size.y*ig.system.scale;b.getContext("2d").putImageData(a,0,0);this.snapshotImage=document.createElement("img");
this.snapshotImage.src=b.toDataURL("image/png")}})});ig.baked=!0;
ig.module("game.ui.clonehistorydialog").requires("game.ui.components.uidialog","game.ui.components.uiclickspot","game.ui.components.uiclickspothelper").defines(function(){window.CloneHistoryDialog=UIDialog.extend({pos:{},size:{},entities:[],O1817:6,O5636:{},O9951:!1,hasNext:!1,O8753:0,O3626:null,positions:{},init:function(){this.positions.previousArrow={x:5,y:4};this.positions.nextArrow={x:18,y:this.positions.previousArrow.y}},open:function(a){this.isOpen&&this.close();this.entities=[];this.O8753=
0;this.size={x:ig.game.O8159.O4437.width,y:ig.game.O8159.O4437.height};this.O8010();this.O5636={x:Math.round(ig.game.O1257.pos.x),y:Math.round(ig.game.O1257.pos.y)};this.parent();this.O8881(a)},O8881:function(a){if(this.isOpen){var b=this.entities.length,c=this,d=a?a:this.entities[b-1].clonedFrom;if(d){var e=ig.game.O4261.getItemBasic(d,"ui_chd1_ok");e&&e.imagesBeingGenerated.done(function(){var f={thingTypeId:e.id,flip:0,attributes:e.attributes,animSheet:ig.game.entityManager.getAnimationForEntity(e,
0,0),O9367:!0,O9113:!0};ig.game.entityManager.O5746(e.O4927(),e,f,!0);var g=c.pos.x+c.size.x+ig.game._rscreen.x-30*(c.entities.length+1),h=c.pos.y+ig.game._rscreen.y+f.animSheet.height/2+12;"STACKWEARB"==e.base&&(h-=8);var k="Entity"+ig.game.strings.toUpperCaseFirst(e.base.toLowerCase());ig.global[k]||(k="EntityDefault");c.entities[b]=new ig.global[k](g,h,f);c.entities[b].clonedFrom=e.clonedFrom;c.entities[b].creatorName="";ig.game.O7747.O5849(d).done(function(l){c.entities[b]&&(c.entities[b].creatorName=
l&&l.name)});c.entities[b].update();c.entities.length<c.O1817&&setTimeout(function(){ig.game.cloneHistoryDialog.O8881()},5)})}}},draw:function(){this.isOpen&&(ig.game.O8159.draw(this.pos.x,this.pos.y,.85,ig.game.O8159.O4437),ig.game.O8159.draw(this.pos.x+32,this.pos.y+4,.85,ig.game.O8159.cloneHistoryHeader),this.O3265(),this.O9951&&ig.game.O8159.draw(this.pos.x+this.positions.previousArrow.x,this.pos.y+this.positions.previousArrow.y,.45,ig.game.O8159.previousArrow),this.hasNext&&ig.game.O8159.draw(this.pos.x+
this.positions.nextArrow.x,this.pos.y+this.positions.nextArrow.y,.45,ig.game.O8159.nextArrow))},O3265:function(){for(var a=this.entities.length-1;0<=a;a--){var b=this.entities[a];b&&b.draw()}for(a=this.entities.length-1;0<=a;a--)if((b=this.entities[a])&&b.isHovered&&!ig.ua.mobile){var c=b.pos.x+b.size.x/2-ig.game.screen.x,d=this.pos.y+this.size.y/2+13,e=0;b.creatorName&&(ml.Misc.O6657(ig.game.strings.O7686(b.creatorName,25),c,d+e),e+=7);b=ml.Misc.getTimestampFromObjectId(b.thingTypeId);ml.Misc.O6657(ig.game.strings.O6141(b,
!0," "),c,d+e)}},update:function(){this.O8010();this.O9951=this.entities.length>=this.O1817&&this.entities[this.entities.length-1].clonedFrom;this.hasNext=0>this.O8753;this.O1053();for(var a=ig.game.O4774.O4920(),b=ig.game.O4774.O3044(),c=this.O1176(),d=0;d<this.entities.length;d++){var e=this.entities[d];if(e&&(e.update(),e.isHovered&&(b||ig.ua.mobile&&a))){ig.game.O4774.O5457(!0);var f=ig.game.O4261.getItemBasic(e.thingTypeId,"ui_chd2");ig.game.itemContextMenu.O3076(e,f,{x:e.pos.x-ig.game._rscreen.x,
y:e.pos.y-ig.game._rscreen.y+23})}}c&&this.O9951&&ig.input.pressed("wheeldown")?(ig.game.O4774.O6730(!0),this.O5762()):c&&this.hasNext&&ig.input.pressed("wheelup")?(ig.game.O4774.O6730(!0),this.O8657()):this.O9951&&this.O7739("previousArrow")?(ig.game.O4774.O6730(!0),this.O5762()):this.hasNext&&this.O7739("nextArrow")?(ig.game.O4774.O6730(!0),this.O8657()):ig.game.O4774.O7739(this.pos.x+180,this.pos.y+4,this.pos.x+190,this.pos.y+10)&&(ig.game.O4774.O6730(!0),this.close());this.O5388();this.parent()},
O8010:function(){this.pos={x:ig.game.O1257.pos.x-ig.game._rscreen.x-this.size.x/2+(ig.game.O1168?20:0),y:ig.game.O1257.pos.y-ig.game._rscreen.y-this.size.y/2-30}},O1176:function(){var a=!1;this.isOpen&&(a=ig.input.mouse.x>=this.pos.x&&ig.input.mouse.x<=this.pos.x+this.size.x&&ig.input.mouse.y>=this.pos.y&&ig.input.mouse.y<=this.pos.y+this.size.y);return a},O7739:function(a){return ig.game.O4774.O7739(this.pos.x+this.positions[a].x,this.pos.y+this.positions[a].y,this.pos.x+this.positions[a].x+ig.game.O8159[a].width,
this.pos.y+this.positions[a].y+ig.game.O8159[a].height)},O5762:function(){this.O8753--;ig.game.itemContextMenu.isOpen&&ig.game.itemContextMenu.close();var a=this.entities[this.entities.length-1].clonedFrom;this.O3626=this.entities[0].thingTypeId;this.O8655();this.O8881(a)},O8657:function(){0>this.O8753&&(this.O8753++,ig.game.itemContextMenu.isOpen&&ig.game.itemContextMenu.close(),this.O8655(),this.O8881(this.O3626))},O1053:function(){for(var a=ig.game.O4774.O2478(),b=!1,c=0;c<this.entities.length;c++){var d=
this.entities[c];d&&(d.isHovered=!1,b||(d.isHovered=a.x>=d.pos.x&&a.x<=d.pos.x+d.size.x&&a.y>=d.pos.y&&a.y<=d.pos.y+d.size.y,d.isHovered&&(b=!0)))}},O5388:function(){ig.game.O1257&&this.O5636.x==Math.round(ig.game.O1257.pos.x)&&this.O5636.y==Math.round(ig.game.O1257.pos.y)||this.close()},close:function(){this.isOpen&&(ig.game.itemContextMenu.O3787&&ig.game.itemContextMenu.isOpen&&ig.game.itemContextMenu.close(),this.O8655(),this.O3626=null,this.parent())},O8655:function(){for(var a=0;a<this.entities.length;a++)this.entities[a]&&
this.entities[a].tidyUp&&this.entities[a].tidyUp(),delete this.entities[a];this.entities=[]}})});ig.baked=!0;
ig.module("game.ui.itemlistdialog").requires("game.ui.components.uidialog","game.ui.components.uiclickspot","game.ui.components.uiclickspothelper").defines(function(){window.ItemListDialog=UIDialog.extend({pos:{},size:{},entities:[],O5636:{},positions:{},gridSize:{x:7,y:6},title:null,open:function(a,b,c,d){this.isOpen&&this.close();this.title=c;this.entities=[];this.page=d;this.size={x:219,y:219};this.O8010();this.O5636={x:Math.round(ig.game.O1257.pos.x),y:Math.round(ig.game.O1257.pos.y)};this.parent();
this.O4039(a,b)},O4039:function(a,b){console.log("this.page = "+this.page);for(var c=this.gridSize.x*this.gridSize.y*this.page,d=0;d<this.gridSize.y&&c<a.length;d++)for(var e=0;e<this.gridSize.x&&c<a.length;e++)a[c]&&this.O9181(a[c],b,c,e,d),c++},O9181:function(a,b,c,d,e){var f=this,g=ig.game.O4261.getItemBasic(a.itemId,"ui_lid1");g.imagesBeingGenerated.done(function(){var h={thingTypeId:g.id,flip:0,attributes:g.attributes,animSheet:ig.game.entityManager.getAnimationForEntity(g,0,0),O9367:!0,O9113:!0};
ig.game.entityManager.O5746(g.O4927(),g,h,!0);var k=f.pos.x+ig.game._rscreen.x+30*d+10,l=f.pos.y+ig.game._rscreen.y+32*e+h.animSheet.height/2+12;"STACKWEARB"==g.base&&(l-=8);var m="Entity"+ig.game.strings.toUpperCaseFirst(g.base.toLowerCase());ig.global[m]||(m="EntityDefault");f.entities[c]=new ig.global[m](k,l,h);f.entities[c].itemListDialogLabel=ig.game.strings.O7317(a[b]);f.entities[c].update()})},draw:function(){this.isOpen&&(this.O1264(this.pos,this.size,[0,0,0,.65]),ig.game.O8159.draw(this.pos.x+
this.size.x-10,this.pos.y+2,.4,ig.game.O8159.closeButtonSemiTransparent),ig.system.context.globalAlpha=.5,ig.game.whiteFont.draw(this.title,this.pos.x+this.size.x/2,this.pos.y+4,ig.Font.ALIGN.CENTER),ig.system.context.globalAlpha=1,this.O3265())},O1264:function(a,b,c){var d=ig.system.context;d.fillStyle="rgba("+c.join(",")+")";d.fillRect(a.x*ig.system.scale,a.y*ig.system.scale,b.x*ig.system.scale,b.y*ig.system.scale)},O3265:function(){for(var a=0;a<this.entities.length;a++){var b=this.entities[a];
b&&b.draw()}for(a=0;a<this.entities.length;a++)if((b=this.entities[a])&&b.isHovered&&!ig.ua.mobile){var c=b.pos.x+b.size.x/2-ig.game.screen.x,d=b.pos.y+b.size.y/2-ig.game.screen.y;b.itemListDialogLabel&&ml.Misc.O6657(b.itemListDialogLabel,c,d+12)}},update:function(){this.O8010();this.O1053();var a=ig.game.O4774.O4920(),b=ig.game.O4774.O3044();this.O1176();for(var c=0;c<this.entities.length;c++){var d=this.entities[c];if(d&&(d.update(),d.isHovered&&(b||ig.ua.mobile&&a))){ig.game.O4774.O5457(!0);var e=
ig.game.O4261.getItemBasic(d.thingTypeId,"ui_lid2");ig.game.itemContextMenu.O3076(d,e,{x:d.pos.x-ig.game._rscreen.x,y:d.pos.y-ig.game._rscreen.y+4})}}ig.game.O4774.O7739(this.pos.x+this.size.x-11,this.pos.y,this.pos.x+this.size.x,this.pos.y+13)&&(ig.game.O4774.O6730(!0),this.close());this.O5388();this.parent()},O8010:function(){this.pos={x:ig.game.O1257.pos.x-ig.game._rscreen.x-this.size.x/2+(ig.game.O1168?20:0),y:ig.game.O1257.pos.y-ig.game._rscreen.y-this.size.y/2-30}},O1176:function(){var a=!1;
this.isOpen&&(a=ig.input.mouse.x>=this.pos.x&&ig.input.mouse.x<=this.pos.x+this.size.x&&ig.input.mouse.y>=this.pos.y&&ig.input.mouse.y<=this.pos.y+this.size.y);return a},O7739:function(a){return ig.game.O4774.O7739(this.pos.x+this.positions[a].x,this.pos.y+this.positions[a].y,this.pos.x+this.positions[a].x+ig.game.O8159[a].width,this.pos.y+this.positions[a].y+ig.game.O8159[a].height)},O1053:function(){for(var a=ig.game.O4774.O2478(),b=!1,c=0;c<this.entities.length;c++){var d=this.entities[c];d&&(d.isHovered=
!1,b||(d.isHovered=a.x>=d.pos.x&&a.x<=d.pos.x+d.size.x&&a.y>=d.pos.y&&a.y<=d.pos.y+d.size.y,d.isHovered&&(b=!0)))}},O5388:function(){ig.game.O1257&&this.O5636.x==Math.round(ig.game.O1257.pos.x)&&this.O5636.y==Math.round(ig.game.O1257.pos.y)||this.close()},close:function(){this.isOpen&&(ig.game.itemContextMenu.O3787&&ig.game.itemContextMenu.isOpen&&ig.game.itemContextMenu.close(),this.O8655(),this.parent())},O8655:function(){for(var a=0;a<this.entities.length;a++)this.entities[a]&&this.entities[a].tidyUp&&
this.entities[a].tidyUp(),delete this.entities[a];this.entities=[]}})});ig.baked=!0;
ig.module("game.ui.actioninfo").defines(function(){window.Actioninfo=ig.Class.extend({pos:{x:0,y:0},opacity:0,energy:0,O5115:0,O3038:3,O2074:"hold",O8684:0,isOpen:!1,O1866:"",showLabel:!0,O1250:!0,O9048:null,O9840:!1,open:function(a,b,c,d,e,f,g,h,k){this.isOpen&&this.O9048==a||(this.isOpen=!0,this.O9048=a,this.pos={x:b,y:c},this.O8684=void 0!=e&&null!=e?e:0,this.O2074=d,this.opacity=this.energy=0,this.showLabel=!g,this.O9840=k||ig.ua.isSteamBigPictureMode||ig.game.O1257&&1>=ig.game.O1257.rank||1>=
ig.game.O9392,this.O5115=this.O3038,this.O1866=ig.ua.mobile?"action button":"space",ig.ua.isSteamBigPictureMode&&(this.O1866="b button"),f&&(this.O1866=f),this.O1250=!h)},close:function(a){!this.isOpen||void 0!==a&&this.O9048!=a||(this.isOpen=!1,this.O5115=-this.O3038)},update:function(){!this.isOpen||this.O9048&&!this.O9048._killed||(this.O9048=null,this.close());if(0!=this.energy||0!=this.O5115)this.energy=(this.energy+this.O5115).limit(0,100),this.opacity=this.O9840?(this.energy/150).limit(0,1):
(60<this.energy?(this.energy-60)/100:0).limit(0,1)},draw:function(){if(0<this.opacity&&!ig.game.portaller.O7787){var a=this.pos.x-ig.game._rscreen.x+3,b=this.pos.y-ig.game._rscreen.y+22;if(this.showLabel){var c="",d=d=ig.game.O2953;this.O2074&&0<=this.O2074.indexOf("\r")?c=this.O2074:(this.O1250&&(c=this.O1866),this.O2074?(""!=c&&(c+=" = "),c+=this.O2074):d=ig.game.O2953-3);c=ig.game.strings.O5024(c,16);if(this.O9840){ml.Misc.O5847("darken");ig.system.context.globalAlpha=.15*this.opacity;for(var e=
0;e<c.length;e++)for(var f=-1;1>=f;f++)for(var g=-1;1>=g;g++)ig.game.blackFont.draw(c[e],a+d+f,b+7*e+g,ig.Font.ALIGN.CENTER)}ig.system.context.globalAlpha=this.opacity;ml.Misc.O5847("lighter");for(e=0;e<c.length;e++)ig.game.whiteFont.draw(c[e],a+d,b+7*e,ig.Font.ALIGN.CENTER);ml.Misc.O3715()}ig.system.context.globalAlpha=1}}})});ig.baked=!0;
ig.module("game.ui.instrumentdialog").requires("game.ui.components.uidialog").defines(function(){window.InstrumentDialog=UIDialog.extend({image:null,notes:null,instrument:null,isOpen:!1,O2945:!1,showNotes:!1,O1420:null,O6251:[],O3731:null,rgba:{r:255,g:255,b:255,alpha:.7},rgbaSharp:{r:40,g:40,b:40,alpha:1},rgbaEmphasis:{r:255,g:255,b:230,alpha:1},rgbaSharpEmphasis:{r:70,g:65,b:50,alpha:1},rgbaBorder:{r:128,g:128,b:128,alpha:1},O3634:-60,O3597:1.2,energySpeedDefault:-5,O7047:-3,O8131:void 0,doUseKeyboardToPlay:!1,
keyboardButton:{x:0,y:0,width:0,height:0},O7349:[],O4321:["c","e","g"],O7892:void 0,isSilent:!1,O8718:null,O9821:[],O4735:5,open:function(){this.O2661();this.O4816();this.O6251=[];this.O3731=null;this.parent();this.isOpen=!0;this.O8718=new ml.Timer;ig.game.O3368&&(this.showNotes=!0);ig.ua.mobile&&(ig.game.O1168&&ml.Misc.O1184(),ig.game.virtualKeyboard&&ig.game.virtualKeyboard.O3187(),ig.game.virtualJoystick&&ig.game.virtualJoystick.O3702())},O4816:function(a){if((null==this.notes||a)&&this.instrument){this.isSilent=
0===this.instrument.indexOf("silent_");this.notes=[];a=ig.game.O1168?80:8;var b=ig.game.sounds.instruments[this.instrument];if(ig.game.sounds.O7876(this.instrument)){var c=ig.game.sounds.O7486(),d=ig.game.sounds.O1366(),e=12,f=b.max,g=2;54==f&&(g=6);a=(ig.system.width-a)/f*g;var h=.18*ig.system.height;6==g&&(h=.06*ig.system.height);var k=e,l=ig.system.height-h*g-22;ig.ua.mobile&&(k=e-=8,l-=10);for(var m=1;m<=f;m++){var n={x:k,y:l,width:a,height:h};n={kitNumber:m,rect:n};b.isGuitar&&(n.noteLabel=c[d[m-
1]-1],k==e+a&&(n.extraBorderToLeft=!0),0<=[31,33,35].indexOf(d[m-1])&&(n.extraDotBelow=!0));this.notes.push(n);k+=a;0===m%(f/g)&&(k=e,l+=h)}}else for(n=b.minOctave,b=b.maxOctave,a=(ig.system.width-a)/(7*(b-n+1)),h=.36*ig.system.height,c=.75*a,d=.58*h,k=12,l=ig.system.height-h-22,ig.ua.mobile&&(k-=8,l-=10),0==b-n&&(k=ig.system.widthHalf-108),e=n;e<=b;e++)for(f=0;f<ig.game.sounds.tones.length;f++)g=ig.game.sounds.tones[f],m=0<=g.indexOf("s"),n={x:k,y:l,width:a,height:h},m&&(n.x-=c/2,n.width=c,n.height=
d),this.notes.push({octave:e,note:g,isSharp:m,rect:n}),k+=a,m&&(k-=a);1<=this.notes.length&&(this.keyboardButton={x:this.notes[0].rect.x+4,y:this.notes[0].rect.y+4,width:ig.game.O8159.keyboardToPlayOff.width,height:ig.game.O8159.keyboardToPlayOff.height});this.doUseKeyboardToPlay=localStorage.getItem("doUseKeyboardToPlay");void 0!=this.doUseKeyboardToPlay&&null!=this.doUseKeyboardToPlay&&(this.doUseKeyboardToPlay=1==this.doUseKeyboardToPlay||"1"==this.doUseKeyboardToPlay)}},O2661:function(){this.O7892=
ig.game.O4507(this.O4321)},update:function(){if(ig.game.painter&&ig.game.painter.isRunning)this.isOpen=!1;else{var a=ig.game.O1257.attachments[ig.game.attachmentManager.slots.HOLDABLE];a&&"STACKINSTR"==a.base?this.isOpen||this.open():this.isOpen&&(this.instrument=this.O1420=null,this.O6251=[],this.close());if(this.isOpen){ig.game.O3368&&!this.showNotes&&(this.showNotes=!0);if(this.O1420!=a.id&&(this.O1420=a.id,this.instrument=ig.game.sounds.O2056(a.name,a.attributes),this.notes=null,this.O4816(),
this.O8131={},a=localStorage.getItem(this.O2562())))try{this.O8131=JSON.parse(a)}catch(b){this.O8131={}}for(a=this.O6251.length-1;0<=a;a--)0<this.O6251[a].energy&&(this.O6251[a].energy+=this.O7047,0>=this.O6251[a].energy&&this.O6251.splice(a,1));!ig.ua.mobile&&ig.game.O4774.O4920()&&this.O1173(ig.input.mouse,this.keyboardButton)&&(ig.game.O4774.O6730(!1),this.doUseKeyboardToPlay=!this.doUseKeyboardToPlay,localStorage.setItem("doUseKeyboardToPlay",this.doUseKeyboardToPlay?1:0),ig.game.sounds.click.play());
this.O9711();ig.input.state("esc")&&ig.game.attachmentManager.O3578(ig.game.O1257,ig.game.attachmentManager.slots.HOLDABLE,!0)}}},O2562:function(){var a="default";this.instrument&&ig.game.sounds.O7876(this.instrument)&&(a="drums_"+ig.game.sounds.instruments[this.instrument].max);return"keyNotes_"+a},O3081:function(){var a=[16,27,32,37,38,39,40];if(this.doUseKeyboardToPlay&&this.instrument&&ig.game.O9590&&1<=ig.game.O9590.length)for(var b=0;b<ig.game.O9590.length;b++){var c=ig.game.O9590[b];if(ig.input.state("shift")){if(-1===
a.indexOf(c)){var d={};null!=(ig.game.sounds.O7876(this.instrument)?this.getNoteWithKitNumberAtMousePoint(d):this.O6230(d))&&(this.O5696(d.i),this.O8131["c"+c]=d.i,localStorage.setItem(this.O2562(),JSON.stringify(this.O8131)),this.playSound(this.notes[d.i]))}}else c=this.O8131["c"+c],void 0!==c&&null!==c&&this.notes[c]&&(this.O1009(this.notes[c]),this.playSound(this.notes[c]))}},O1009:function(a){this.O7892&&0<=this.O7892.length&&a&&a.note&&(a=this.O7892.indexOf(a.note),0<=a?(this.O7892.splice(a,
1),0==this.O7892.length&&(ig.game.O1189.register(ig.game.O1189.types.PLAYED_CHORD_WITH_KEYS),this.O2661())):this.O2661())},O5696:function(a){for(var b in this.O8131)this.O8131.hasOwnProperty(b)&&this.O8131[b]==a&&delete this.O8131[b]},O1971:function(a){var b=!1,c;for(c in a)if(a.hasOwnProperty(c)){b=!0;break}return b},playSound:function(a){a.kitNumber?(this.isSilent||ig.game.sounds.O4085(this.instrument,a.kitNumber,!0),ig.game.decorator.playingInstrumentKitNumber(ig.game.O1257,this.instrument,a.kitNumber)):
(this.O3491(a),this.isSilent||ig.game.sounds.O1069(this.instrument,a.octave,a.note,!0),ig.game.decorator.O4005(ig.game.O1257,this.instrument,a.octave,a.note));this.O3731=a;this.O3731.energy=100},O3491:function(a){for(var b=this.O7349.length-1;0<=b;b--)10<(new Date-Date.parse(this.O7349[b].timestamp))/1E3&&this.O7349.splice(b,1);a=ig.game.O4507(a);a.timestamp=new Date;this.O7349.push(a);15<this.O7349.length&&this.O7349.splice(this.O7349.length-1,1);a=this.O5475();b=this.O5475(!0);var c=ig.game.O2116.O4851("hears-notes",
a);c||=ig.game.O2116.O4851("hears-notes",b);ig.game.O2116.O7884(ig.game.O1257,"plays-notes",a);ig.game.O2116.O7884(ig.game.O1257,"plays-notes",b);c&&(this.O7349=[])},O5475:function(a){for(var b="",c=0;c<this.O7349.length;c++){var d=this.O7349[c];1<=c&&(b+=" ");b+=ig.game.strings.replaceAll(d.note,"s","")+(d.isSharp?"#":"");a&&(b+=d.octave)}return b},O9711:function(){this.O3081();this.O3731&&(0<this.O3731.energy&&(this.O3731.energy+=this.energySpeedDefault),0>=this.O3731.energy&&(this.O3731=null));
if(ig.game.O4774.O4920()){var a=ig.game.sounds.O7876(this.instrument)?this.getNoteWithKitNumberAtMousePoint():this.O6230();if(null!=a&&(ig.game.O4774.O6730(!1),this.O9821.push(a),this.O9821.length>this.O4735&&this.O9821.shift(),!ig.input.state("ctrl"))){for(a=0;a<this.O9821.length;a++)this.playSound(this.O9821[a]);this.O9821=[];ig.game.O2116.O7884(ig.game.O1257,"plays",ig.game.O1257.O8897())}}else if(ig.game.O4774.O3044()){var b=ig.game.sounds.O7876(this.instrument),c=ig.game.sounds.instruments[this.instrument];
a=b?this.getNoteWithKitNumberAtMousePoint():this.O6230();null!=a&&(!b||c.isGuitar?ig.game.O3368?ig.game.O4774.O5457(!1):(ig.game.O4774.O5457(!0),this.showNotes=!this.showNotes):ig.game.O4774.O5457())}},getNoteWithKitNumberAtMousePoint:function(a){for(var b={x:Math.floor(ig.input.mouse.x),y:Math.floor(ig.input.mouse.y)},c=0;c<this.notes.length;c++){var d=this.notes[c];if(this.O1173(b,d.rect))return a&&(a.i=c),d}return null},O6230:function(a){for(var b={x:Math.floor(ig.input.mouse.x),y:Math.floor(ig.input.mouse.y)},
c=0;1>=c;c++)for(var d=0==c,e=0;e<this.notes.length;e++){var f=this.notes[e];if((d&&f.isSharp||!d&&!f.isSharp)&&this.O1173(b,f.rect))return a&&(a.i=e),f}return null},O1173:function(a,b){return a.x>=b.x&&a.x<=b.x+b.width&&a.y>=b.y&&a.y<=b.y+b.height},O5320:function(a){return"rgba("+a.r+","+a.g+","+a.b+","+a.alpha+")"},O7691:function(a){this.O6251.push({note:a,energy:100})},O3220:function(a){for(var b=null,c=0;c<this.O6251.length;c++)0<this.O6251[c].energy&&this.O6251[c].note.instrument==this.instrument&&
this.O6251[c].note.octave==a.octave&&this.O6251[c].note.note==a.note&&(b=this.O6251[c]);return b},O6667:function(a){for(var b=null,c=0;c<this.O6251.length;c++)0<this.O6251[c].energy&&this.O6251[c].note.instrument==this.instrument&&this.O6251[c].note.kitNumber==a.kitNumber&&(b=this.O6251[c]);return b},draw:function(){if(this.isOpen&&this.instrument&&this.notes){if(ig.game.sounds.O7876(this.instrument)){for(var a=0;a<this.notes.length;a++){var b=this.notes[a],c=b.rect,d=this.rgba,e=this.O6667(b);e&&
(d=this.O8409(this.rgbaEmphasis,(.7+.0075*e.energy).limit(0,1)));this.O3731&&this.O3731.kitNumber==b.kitNumber&&(d=this.O9779(d,-Math.floor(this.O3731.energy/this.O3597)));ig.system.context.fillStyle=this.O5320(d);this.fillRect(c.x,c.y,c.width,c.height);ig.system.context.strokeStyle=this.O5320(this.rgbaBorder);ig.system.context.lineWidth=1*ig.system.scale;this.strokeRect(c.x,c.y,c.width,c.height);b.extraBorderToLeft&&(ig.system.context.lineWidth=2*ig.system.scale,this.strokeRect(c.x,c.y,1,c.height));
this.showNotes&&b.noteLabel&&(ig.system.context.globalAlpha=g?.35:.5,ig.game.blackFont.draw(b.noteLabel,c.x+c.width/2,c.y+c.height/2-2,ig.Font.ALIGN.CENTER),ig.system.context.globalAlpha=1)}for(a=0;a<this.notes.length;a++)b=this.notes[a],c=b.rect,b.extraDotBelow&&(ig.system.context.lineWidth=2*ig.system.scale,this.strokeRect(c.x+c.width/2-1,c.y+c.height-1,2,2))}else for(var f=0;1>=f;f++){var g=1==f,h=g?ig.game.whiteFont:ig.game.blackFont;for(a=0;a<this.notes.length;a++)if(b=this.notes[a],g&&b.isSharp||
!g&&!b.isSharp){c=b.rect;d=b.isSharp?this.rgbaSharp:this.rgba;if(e=this.O3220(b))b.isSharp?(d=this.O9779(this.rgbaSharp,Math.floor(e.energy/2).limit(0,30)),d.r=(d.r+15).limit(0,255),d.g=(d.g+10).limit(0,255)):d=this.O8409(this.rgbaEmphasis,(.7+.0075*e.energy).limit(0,1));this.O3731&&this.O3731.octave==b.octave&&this.O3731.note==b.note&&(d=this.O9779(d,-Math.floor(this.O3731.energy/this.O3597)));ig.system.context.fillStyle=this.O5320(d);this.fillRect(c.x,c.y,c.width,c.height);ig.system.context.strokeStyle=
this.O5320(this.rgbaBorder);ig.system.context.lineWidth=1*ig.system.scale;this.strokeRect(c.x,c.y,c.width,c.height);this.showNotes&&(d=b.note.replace("s","#"),"c"==d&&(d+=b.octave),ig.system.context.globalAlpha=g?.35:.5,h.draw(d,c.x+c.width/2,c.y+c.height-30,ig.Font.ALIGN.CENTER),ig.system.context.globalAlpha=1)}}ig.ua.mobile||(this.doUseKeyboardToPlay?(ig.game.O8159.draw(this.keyboardButton.x,this.keyboardButton.y,.75,ig.game.O8159.keyboardToPlayOn),!this.O1971(this.O8131)&&this.notes[0]&&this.notes[0].rect&&
this.O8316("shift+key assigns that key to the currently hovered note")):(ig.game.O8159.draw(this.keyboardButton.x,this.keyboardButton.y,.5,ig.game.O8159.keyboardToPlayOff),this.isSilent&&this.O8316("silent")))}},O8316:function(a){var b=this.O5371();if(0<b){var c=this.notes[0],d=this.notes[this.notes.length-1];d=c.rect.x+(c.rect.x+d.rect.x+d.rect.width)/2;c=c.rect.y+80;var e=ig.Font.ALIGN.CENTER;ig.system.context.globalAlpha=b;ig.game.blackFont.draw(a,d,c+1,e);ig.game.blackFont.draw(a,d,c-1,e);ig.game.blackFont.draw(a,
d-1,c,e);ig.game.blackFont.draw(a,d+1,c,e);ig.system.context.globalAlpha=1;ig.game.whiteFont.draw(a,d,c,e)}},O5371:function(){var a=.35;this.isSilent&&!this.doUseKeyboardToPlay&&(this.O8718?(a*=2-this.O8718.delta(),0>a&&(this.O8718=null)):a=0);return a},fillRect:function(a,b,c,d){ig.system.context.fillRect(Math.ceil(a*ig.system.scale),Math.ceil(b*ig.system.scale),Math.ceil(c*ig.system.scale),Math.ceil(d*ig.system.scale))},O8409:function(a,b){return{r:a.r,g:a.g,b:a.b,alpha:b}},O9779:function(a,b){return{r:(a.r+
b).limit(0,255),g:(a.g+b).limit(0,255),b:(a.b+b).limit(0,255),alpha:a.alpha}},strokeRect:function(a,b,c,d){ig.system.context.strokeRect(Math.ceil(a*ig.system.scale),Math.ceil(b*ig.system.scale),Math.ceil(c*ig.system.scale),Math.ceil(d*ig.system.scale))},close:function(){this.isOpen=!1;ig.ua.mobile&&(ig.game.virtualKeyboard&&ig.game.virtualKeyboard.O3187(),ig.game.virtualJoystick&&ig.game.virtualJoystick.O3702());this.parent()}})});ig.baked=!0;
ig.module("game.ui.boostdialog").requires("game.ui.components.uidialog").defines(function(){window.BoostDialog=UIDialog.extend({pos:{x:0,y:0},size:{x:0,y:0},offset:{x:0,y:0},isOpen:!1,O8159:null,rings:[{radius:57.5},{radius:99.5}],buttons:[[],[]],O3818:null,associatedItems:{},O1006:{},O1721:2,O6785:!1,O7109:null,O5918:.75,O9178:null,init:function(){ig.ua.phone&&(this.rings[0].radius-=17,this.rings[1].radius-=31)},open:function(){if(!this.isOpen)if(ig.game.O1257.rank>=this.O1721&&!ig.game.O7606.O5191){ig.game.O4437&&
ig.game.O4437.isOpen&&ig.game.O4437.close();this.O8159||(this.O8159=new SpriteSheetBoostDialog);this.O3818||(this.O3818=localStorage.selectedBoostCategory);var a=ig.ua.mobile;if(0==this.buttons[0].length){this.O8040();this.O6267(0);var b=this;this.associatedItems={};ig.game.O9817.O6780().done(function(c){c&&c.associations&&(b.associatedItems=c.associations);b.O7727();b.O3818&&b.O6267(1)})}else a&&this.reInit();ig.ua.mobile&&!ig.ua.phone&&jQuery('<div id="mobileCloseButton" onclick="ig.game.boostDialog.close()">&nbsp;X&nbsp;</div>').appendTo("body");
this.parent()}else ig.game.O1002.O7063()},O8040:function(){this.offset.x=ig.game.O1168?-12:0;this.size={x:this.O8159.background.width,y:this.O8159.background.height};this.pos.x=Math.floor(ig.system.widthHalf-this.size.x/2+this.offset.x);this.pos.y=Math.floor(ig.system.O2175-this.size.y/2+this.offset.y)},reInit:function(){this.O8040();this.O6267(0);this.O3818&&this.O6267(1)},O7727:function(){for(var a in this.associatedItems)this.O3546(a)},O3546:function(a){if(!this.O1006[a]){this.O1006[a]={isLoading:!0};
var b=this;ig.game.O4261.getItem_P(this.associatedItems[a],"d_boost1").done(function(c){b.O1006[a]={name:c.name}})}},O6267:function(a){if(0==a){this.buttons=[[],[]];for(var b in ig.game.O7606.names)this.buttons[a].push(this.getButtonData(b,a))}else for(b in this.buttons[a]=[],ig.game.O7606.names)if(b==this.O3818)for(var c=0;c<ig.game.O7606.names[b].length;c++)this.buttons[a].push(this.getButtonData(ig.game.O7606.names[b][c],a));this.O6302(a);ig.game.sounds.shortWhoosh.play()},getButtonData:function(a,
b){return{name:a,label:this.O5564(a),isHovered:!1,x:0,y:0,width:this.O8159["button_"+a].width,height:this.O8159["button_"+a].height,ring:b}},O5564:function(a){var b=ig.game.O7606.manualLabel[a];b||(0<=a.indexOf("_")&&(a=a.split("_")[0]),b=ig.game.strings.O2801(a));return b},O6302:function(a){for(var b=this.size.x,c=this.size.y,d=0,e=2*Math.PI/this.buttons[a].length,f=this.rings[a].radius,g=0;g<this.buttons[a].length;g++){var h=this.buttons[a][g];h.ring==a&&(h.x=this.pos.x+Math.round(b/2+f*Math.cos(d)-
h.width/2),h.y=this.pos.y+Math.round(c/2+f*Math.sin(d)-h.height/2),d+=e)}},update:function(){ig.input.state("ctrl")&&ig.input.pressed("b")&&(this.isOpen?(ig.input.O6501(),this.close()):this.open());if(this.isOpen){this.O8288();var a=!1,b=!1,c=!1,d=!1,e=!1;if(ig.ua.mobile){(c=!!ig.input.state("click"))&&!this.O6785&&(this.O7109=new ml.Timer);if(d=!c&&this.O6785)e=this.O7109&&this.O7109.delta()>=this.O5918,this.O7109=null;this.O6785=c}else b=(a=ig.game.O4774.O3044())||ig.game.O4774.O4920();for(var f=
0;f<this.rings.length;f++)for(var g=0;g<this.buttons[f].length;g++){var h=this.buttons[f][g];if(h.isHovered&&(b||d))if(0==h.ring)this.O3818=h.name==this.O3818?null:h.name,localStorage.selectedBoostCategory=this.O3818,this.O6267(1);else if(ig.input.state("ctrl")&&!a)0<=ig.game.O7606.O1452.indexOf(h.name)&&this.associatedItems[h.name]?(ig.game.O4774.O6730(!0),this.O1671(h.name)):ig.game.sounds.nocando.play();else if(ig.game.hasMinfinity||1<=ig.game.O7606.O1688||0<=ig.game.O7606.freeNames.indexOf(h.name))if(-1===
ig.game.O7606.O1452.indexOf(h.name)||this.associatedItems[h.name]){var k=(a||e)&&!!ig.game.O7606.O4266(this.O3818,h.name);a?ig.game.O4774.O5457(!0):ig.game.O4774.O6730(!0);this.O3627(h.name,k)}else this.O7523(h.name);else this.close(),setTimeout(function(){ig.game.O9663.openMainDialog()},150)}(b||c)&&22>=ml.Misc.O8674({x:this.pos.x+this.size.x/2,y:this.pos.y+this.size.y/2},ig.input.mouse)&&(ig.game.O4774.O6730(!0),ig.game.O9663.openMainDialog());ig.game.O1257&&(10<=Math.abs(ig.game.O1257.vel.x)||
-10>=ig.game.O1257.vel.y)&&this.close();this.parent()}},O3627:function(a,b){if(ig.game.O7606.O1632(a,this.O3818,b))if("personNextToMe"==this.O3818){var c=this.O4496(a);if(c)if("giveWhatIHold"==a){var d=ig.game.O1257.attachments.h&&ig.game.O1257.attachments.h.id,e=!!c.attachments.h;d&&!e?(ig.game.attachmentManager.O3578(ig.game.O1257,"h",!0),ig.game.O7606.start(a,null,d,b,c.O2970)):(ig.game.O1257.say("i must hold something, and they nothing"),this.close())}else ig.game.O7606.start(a,null,this.associatedItems[a],
b,c.O2970);else this.close()}else ig.game.O7606.start(a,null,this.associatedItems[a],b);else this.close()},O4496:function(a){var b=null,c=(a="giveWhatIHold"==a)?60:200,d=null,e=ig.game.O5119.player;if(e)for(var f=3<=e.length||a,g=ig.game.O1257.O8418?1:-1,h=0;h<e.length;h++){var k=e[h];if(!k._killed&&k.O2970!=ig.game.O1257.O2970){var l=!0;f&&(l=-1==g?ig.game.O1257.pos.x>k.pos.x:ig.game.O1257.pos.x<k.pos.x);l&&(l=ig.game.O1257.O2144(k),l<=c&&(null==d||l<d))&&(b=k,d=l)}}b||ig.game.O1257.say("there's no one "+
(a?"right ":"")+"next to me");return b},O7523:function(a){var b=ig.game.O7606.O6838(a),c="";25>=b.length?(c="Please drag and drop a "+ml.Misc.O5563(b,null,!0)+" from your collection onto this boost.",0===a.indexOf("happening")&&(c+=" It will show for yourself only when boosted.")):c="Please drag and drop something from your collection onto this boost.";ig.game.alertDialog.O3813(c);ig.game.alertDialog.contextId="boostDragInfo"},O8288:function(){var a=!1;this.O9178=null;for(var b=0;b<this.rings.length;b++)for(var c=
0;c<this.buttons[b].length;c++){var d=this.buttons[b][c];d.isHovered=!1;a||(d.isHovered=ig.input.mouse.x>=d.x&&ig.input.mouse.x<=d.x+d.width&&ig.input.mouse.y>=d.y&&ig.input.mouse.y<=d.y+d.height,d.isHovered&&(this.O9178=d.name,a=!0))}},O5851:function(){var a=[];ig.game.O7606.isRunning&&ig.game.O7606.O7264&&!ig.game.O7606.O7264.O8088?a=[ig.game.O7606.O7264.screenName,"started","a boost"]:this.O9178&&0<=ig.game.O7606.freeNames.indexOf(this.O9178)?a=["infinitely","available"]:ig.game.hasMinfinity?a=
["infinite","boosts"]:(a=ig.game.O7606.O1688,0>a&&(a=0),a=[a,"boost"+(1!=a?"s":""),"left"]);return a},draw:function(){if(this.isOpen){ig.ua.phone?this.O2898():this.O8159.draw(this.pos.x,this.pos.y,1,this.O8159.background);var a=this.O5851();ig.game.whiteFont.draw(a.join("\n"),this.pos.x+this.size.x/2,this.pos.y+this.size.y/2+(3==a.length?-11:-7),ig.Font.ALIGN.CENTER);for(a=0;a<this.rings.length;a++)for(var b=0;b<this.buttons[a].length;b++){var c=this.buttons[a][b],d=0;c&&c.isHovered&&!ig.ua.mobile&&
(d=-2);this.O8159.draw(c.x,c.y+d,1,this.O8159["button_"+this.buttons[a][b].name])}for(a=0;a<this.rings.length;a++)for(b=0;b<this.buttons[a].length;b++)if(c=this.buttons[a][b]){var e=c.name;if(this.O3818==e||c.isHovered&&!ig.ua.mobile){d=c.x+c.width/2;var f=c.y+c.height/2+8-2;c=ig.game.strings.O5024(c.label,16);var g=!1,h=ig.game.O7606.O4266(this.O3818,e);h&&(c.push(h),g=!0);0<=ig.game.O7606.O1452.indexOf(e)&&((e=this.O1006[e]?this.O1006[e].name:null)?c.unshift(ig.game.strings.O3089(e,20)):c.unshift("..."));
for(e=0;e<c.length;e++){h=1;var k=c[e];g&&e==c.length-1&&(h=.7,k=(ig.ua.mobile?"Long-tap":"R.Click")+" = "+k);ml.Misc.O6657(k,d,f+6*e,1*h,.7*h,1*h)}}}}},O2898:function(){var a=ig.system.context,b=ig.system.realWidth/2+(ig.game.O1168?-24:0),c=ig.system.O5809/2;a.beginPath();a.fillStyle="rgba(0,0,0,1)";a.arc(b,c,20*ig.system.scale,0,2*Math.PI,!1);a.fill();a.closePath();a.beginPath();a.strokeStyle="rgba(0,0,0,1)";a.lineWidth=3*ig.system.scale;a.arc(b,c,this.rings[0].radius*ig.system.scale,0,2*Math.PI,
!1);a.stroke();a.closePath();a.beginPath();a.strokeStyle="rgba(0,0,0,1)";a.lineWidth=3*ig.system.scale;a.fillStyle="rgba(0,0,0,.25)";a.arc(b,c,this.rings[1].radius*ig.system.scale,0,2*Math.PI,!1);a.fill();a.stroke();a.closePath()},O6556:function(){for(var a=null,b=0;b<this.rings.length&&!a;b++)for(var c=0;c<this.buttons[b].length&&!a;c++){var d=this.buttons[b][c];d&&d.isHovered&&(a=d)}return a},O6441:function(a){this.O8288();var b=this.O6556();ig.game.alertDialog.close();var c=["WRITABLE","READABLE",
"MUSIC","SOUND"];if(b&&1==b.ring){b=b.name;var d=!0;0<=b.indexOf("setProfileItem_")&&-1===c.indexOf(a.base)&&(d=ig.game.O1257&&a.creatorId&&ig.game.O1257.O2970==a.creatorId);d?0<=ig.game.O7606.O1452.indexOf(b)?(c=ig.game.O7606.O6838(b),0<=c.indexOf(a.base)?ig.game.attachmentManager.O3248(a)?(ig.game.alertDialog.O3813("Only non-affecting Dynamics can be used."),ig.game.sounds.nocando.play()):this.O8271(b,a.id):(a=ml.Misc.O5563(c,!0),ig.game.alertDialog.O3813("You can only add "+a+"."),ig.game.sounds.nocando.play())):
(ig.game.alertDialog.O3813("This boost doesn't require an item."),ig.game.sounds.nocando.play()):ig.game.alertDialog.O3813("For this boost, please select an item you created (unless it's a "+ml.Misc.O5563(c)+").")}},O1497:function(){var a=null;this.isOpen&&(a=this.O6556());return a&&1==a.ring},O8271:function(a,b){this.associatedItems[a]=b;delete this.O1006[a];ig.game.sounds.putdown.play();this.O7727();ig.game.O9817.O5814(a,b).done(function(c){c&&c.ok&&ig.game.sounds.success.play()});ig.game.O7606.O5026(a,
b)},O1671:function(a){delete this.associatedItems[a];delete this.O1006[a];ig.game.O9817.O5814(a,null).done(function(b){b&&b.ok&&ig.game.sounds.bin.play()})},close:function(){jQuery("#mobileCloseButton").remove();ig.game.O8577();this.parent()}})});ig.baked=!0;
ig.module("game.ui.randomareasdialog").requires("game.ui.components.uidialog").defines(function(){window.RandomAreasDialog=UIDialog.extend({gridSize:{x:4,y:4},thumbSize:{x:50,y:50},O7760:{x:1,y:1},pos:{x:0,y:0},size:{x:0,y:0},offset:{x:0,y:0},isOpen:!1,areaNames:[],images:{},O4490:null,closeButtonPos:{x:0,y:0},open:function(){if(!this.isOpen){this.size.x=this.gridSize.x*this.thumbSize.x+2*this.O7760.x;this.size.y=this.size.x;this.pos.x=Math.floor(ig.system.widthHalf-this.size.x/2+this.offset.x);this.pos.y=
Math.floor(ig.system.O2175-this.size.y/2+this.offset.y);this.closeButtonPos={x:this.size.x-12,y:4};this.areaNames=[];var a=this;ig.game.O9817.O5421().done(function(b){b&&(a.areaNames=b.names,a.O6195())})}},update:function(){this.isOpen&&(ig.game.O4774.O4920()&&(this.O8523()?(ig.game.O4774.O6730(!0),this.close()):this.O4490&&(ig.game.O4774.O6730(!0),ml.Misc.O7959()&&(this.O4490="foobar"),ig.game.portaller.O6417(this.O4490),this.close())),this.parent())},O8523:function(){var a=this.pos.x+this.closeButtonPos.x,
b=this.pos.y+this.closeButtonPos.y,c=ig.game.O8159.closeXWhite.width,d=ig.game.O8159.closeXWhite.height;return ig.input.mouse.x>=a&&ig.input.mouse.y>=b&&ig.input.mouse.x<=a+c&&ig.input.mouse.y<=b+d},draw:function(){this.isOpen&&(this.O2793(),this.O1199(),ig.game.O8159.draw(this.pos.x+this.closeButtonPos.x,this.pos.y+this.closeButtonPos.y,.5,ig.game.O8159.closeButtonSemiTransparent))},O2793:function(){ig.system.context.fillStyle="rgba(0,0,0,.75)";this.fillRect(this.pos.x,this.pos.y,this.size.x,this.size.y)},
O1199:function(){var a=1,b=1;this.O4490=null;for(var c=0;c<this.areaNames.length;c++){var d=this.areaNames[c];this.O5343(d);var e=this.pos.x+(a-1)*this.thumbSize.x+this.O7760.x,f=this.pos.y+(b-1)*this.thumbSize.y+this.O7760.y;!this.O4490&&ig.input.mouse.x>=e&&ig.input.mouse.y>=f&&ig.input.mouse.x<=e+this.thumbSize.x&&ig.input.mouse.y<=f+this.thumbSize.y&&(this.O4490=d);this.images[d].loaded&&ig.system.context.drawImage(this.images[d],e*ig.system.scale,f*ig.system.scale,this.thumbSize.x*ig.system.scale,
this.thumbSize.y*ig.system.scale);if(this.O4490==d){d=ig.game.strings.O5024(d,16);e=Math.floor(e+this.thumbSize.x/2);f=f+this.thumbSize.y-13;for(var g=0;g<d.length;g++)ml.Misc.O6657(d[g],e,f+6*g,1,.7,1)}a++;if(a>this.gridSize.x&&(a=1,b++,b>this.gridSize.y))break}},O5343:function(a){if(!this.images[a]){var b=this;this.images[a]=new Image;this.images[a].src=this.O1185(a);this.images[a].onload=function(){b.images[a]&&(b.images[a].loaded=!0)}}},O1185:function(a){a=ig.game.areaDialog.O9822(a);a=a.toLowerCase();
a=ig.game.O3186.O5138(a,!0);return a+("?r="+ig.game.O4293(1E6,9E6))},fillRect:function(a,b,c,d){ig.system.context.fillRect(Math.ceil(a*ig.system.scale),Math.ceil(b*ig.system.scale),Math.ceil(c*ig.system.scale),Math.ceil(d*ig.system.scale))},close:function(){this.isOpen=!1;this.areaNames=[];this.images={};this.hoveredItem=null;this.parent()},O6195:function(){ig.game.O2974();this.toClose=!1;this.isOpen=!0}})});ig.baked=!0;
ig.module("game.ui.debugdialog").requires("game.ui.components.uidialog").defines(function(){window.DebugDialog=UIDialog.extend({values:{},iterators:{},O7417:1E6,textSize:18,lastSeenMeasureId:null,fpsPrefix:"",O8357:!1,O8913:!1,O4147:!1,O4260:void 0,O9459:void 0,O9439:0,O5643:1,O7371:2.5,O9463:1,O4596:2,init:function(){},update:function(){if(this.O8357)if(ig.game.entities&&this.O4258Update(ig.game.entities),ig.game.debugUpdateTimeAveCount=(ig.game.debugUpdateTimeAveCount||0)+1,ig.game.debugUpdateTimeAveTot=
(ig.game.debugUpdateTimeAveTot||0)+ig.game.O8246,ig.game.debugUpdateTimeAve=(ig.game.debugUpdateTimeAveTot/ig.game.debugUpdateTimeAveCount).toFixed(2),ig.game.debugDrawTimeAveCount=(ig.game.debugDrawTimeAveCount||0)+1,ig.game.debugDrawTimeAveTot=(ig.game.debugDrawTimeAveTot||0)+ig.game.O7903,ig.game.debugDrawTimeAve=(ig.game.debugDrawTimeAveTot/ig.game.debugDrawTimeAveCount).toFixed(2),ig.game.debugDrawBgTimeAveCount=(ig.game.debugDrawBgTimeAveCount||0)+1,ig.game.debugDrawBgTimeAveTot=(ig.game.debugDrawBgTimeAveTot||
0)+ig.game.debugDrawBgTime,ig.game.debugDrawBgTimeAve=(ig.game.debugDrawBgTimeAveTot/ig.game.debugDrawTimeAveCount).toFixed(2),ig.game.debugDrawUiTimeAveCount=(ig.game.debugDrawUiTimeAveCount||0)+1,ig.game.debugDrawUiTimeAveTot=(ig.game.debugDrawUiTimeAveTot||0)+ig.game.debugDrawUiTime,ig.game.debugDrawUiTimeAve=(ig.game.debugDrawUiTimeAveTot/ig.game.debugDrawUiTimeAveCount).toFixed(2),ig.game.debugDrawEntitiesTimeAveCount=(ig.game.debugDrawEntitiesTimeAveCount||0)+1,ig.game.debugDrawEntitiesTimeAveTot=
(ig.game.debugDrawEntitiesTimeAveTot||0)+ig.game.debugDrawEntitiesTime,ig.game.debugDrawEntitiesTimeAve=(ig.game.debugDrawEntitiesTimeAveTot/ig.game.debugDrawEntitiesTimeAveCount).toFixed(2),ig.game.O7456.measureId!==this.lastSeenMeasureId&&(this.lastSeenMeasureId=ig.game.O7456.measureId,this.fpsPrefix=""==this.fpsPrefix?" ":""),void 0!==this.O4260)this.set("Showing",this.O9459+" ("+this.O9439+")");else if(this.O4147)this.set("Showing all");else{this.set("Last FPS",null!==ig.game.O7456.O6419?this.fpsPrefix+
ig.game.O7456.O6419:"...");this.set("Item cache",ig.game.O4261.O3797()+" / "+ig.game.O4261.maxCacheSize);this.O8913&&(this.set("CurrentWS",ig.game.O7836.O7906().url),this.set("smId",ig.game.O7836.socketManagerId));var a=ig.game.O6112.O2337(ig.game.O1257.pos.x,ig.game.O1257.pos.y);this.set("People",ig.game.O5119.player&&ig.game.O5119.player.length);this.set("Onscreen Entities",ig.game.entities&&ig.game.entities.length);this.set("Offscreen Entities",ig.game.O2770&&ig.game.O2770.length);this.O8913&&
(a=ig.game.O4873.O9099(a),this.set("Sector",a.sector.x+","+a.sector.y),this.set("Offset",a.offset.x+","+a.offset.y),this.set("Total lights",ig.game.O5119.light&&ig.game.O5119.light.length),this.set("Mouse map loc",JSON.stringify(ig.game.O6112.O1858())),this.set("Draw ms",ig.game.O7903),this.set("Draw ms (ave)",ig.game.debugDrawTimeAve),this.set("Draw Bg ",ig.game.debugDrawBgTime),this.set("Draw Bg (ave)",ig.game.debugDrawBgTimeAve),this.set("Draw Entities ms",ig.game.debugDrawEntitiesTime),this.set("Draw Entities (ave)",
ig.game.debugDrawEntitiesTimeAve),this.set("Draw UI",ig.game.debugDrawUiTime),this.set("Draw UI (ave)",ig.game.debugDrawUiTimeAve),this.set("Update",ig.game.O8246),this.set("Update (ave)",ig.game.debugUpdateTimeAve),this.set("Update Entities ms",ig.game.debugUpdateEntitiesTime),this.set("Check Entities ms",ig.game.debugCheckEntitiesTime),this.set("Image scale time",ig.game.imageGenTime),this.set("Image gen time",ml.Image.prototype.resizeTimeMs))}},O5526:function(){this.O5643+=this.O7371*ig.system.tick;
this.O5643<=this.O9463?(this.O7371=Math.abs(this.O7371),this.O5643=this.O9463):this.O5643>=this.O4596&&(this.O7371=-Math.abs(this.O7371),this.O5643=this.O4596)},O4258Update:function(a){this.O9439=0;void 0!==this.O4260&&this.O5526();for(var b=0;b<a.length;b++){var c=a[b];if(void 0!==this.O4260)for(var d=0;d<this.O4260.length;d++)c instanceof this.O4260[d]&&this.O9439++}},O4692:function(a){for(var b=ig.system.scale,c=ig.system.context,d=0;d<a.length;d++){var e=a[d],f=!0;if(void 0!==this.O4260){f=!1;
for(var g=0;g<this.O4260.length;g++)e instanceof this.O4260[g]&&(f=!0)}f&&(c.beginPath(),c.rect((e.pos.x-e.offset.x-ig.game.screen.x)*b,(e.pos.y-e.offset.y-ig.game.screen.y)*b,e.size.x*b,e.size.y*b),c.lineWidth=b*this.O5643,c.strokeStyle="rgba(50,255,50,0.8)",c.stroke())}},set:function(a,b,c){a=a.toUpperCase();this.values[a]=b;c&&(this.iterators[a]||(this.iterators[a]=1),this.iterators[a]++,this.iterators[a]>=this.O7417&&(this.iterators[a]=0))},inc:function(a,b){this.values[a]=(this.values[a]||0)+
b},clear:function(){this.values={};this.iterators={};this.O4147=!1;this.O9439=this.O9459=this.O4260=void 0;this.O5643=1;this.O7371=2.5},O8242:function(){ig.game.debugDrawTimeAveCount=0;ig.game.debugDrawTimeAveTot=0;ig.game.debugDrawTimeAve=0;ig.game.debugDrawUiTimeAveCount=0;ig.game.debugDrawUiTimeAveTot=0;ig.game.debugDrawUiTimeAve=0},draw:function(){if(this.O8357){var a=0,b=!1,c;for(c in this.values)this.values.hasOwnProperty(c)&&(b||(this.O5949(),b=!0),this.O6696(a,c,this.values[c],this.iterators[c])),
a++;this.O4147?ig.game.backgroundMaps[1]&&ig.game.backgroundMaps[1].O5924():ig.game.entities&&this.O4692(ig.game.entities)}},O5949:function(){ig.system.context.font=this.textSize+"px monospace";ig.system.context.fillStyle="rgba(255,255,255,.85)"},O6696:function(a,b,c,d){d&&(c+=" ["+d+"]");a=30+(this.textSize+1)*a;void 0!==c&&(b+=": ");ig.system.context.fillText(b,20,a);void 0!==c&&ig.system.context.fillText(c,230,a)},O8427:function(){for(var a=[],b,c=0;c<ig.game.entities.length;c++)b=ig.game.entities[c],
b.animSheet&&b.animSheet.image&&-1==a.indexOf(b.animSheet.image.path)&&a.push(b.animSheet.image.path),b.baseType&&-1==a.indexOf(b.baseType)&&a.push(b.baseType);return a.concat(String.fromCharCode(13))}})});ig.baked=!0;
ig.module("game.ui.alertdialog").requires("game.ui.components.uidialog").defines(function(){window.AlertDialog=UIDialog.extend({isOpen:!1,O9267:null,O3434:null,doShowBig:!1,O8777:!1,isPrompt:!1,O5358:!1,O9805:!1,fontStyle:"",contextId:null,fullyOpaque:!1,O7826:null,O3244:!1,O2890:!1,O9608:!1,O3144:!1,O9030:null,O3300:null,O8739:!1,init:function(){this.fontStyle="font-size: "+(6+2*ig.system.scale)+"px;"},open:function(a,b,c,d,e,f,g,h,k,l,m,n){if(!this.isOpen){var p="";if("string"===typeof a)p=a;else{var q=
a;q.html?(p=q.html,b=!0):(p=q.text,b=!1);c=q.O9267;d=q.O3434;e=q.doShowBig;f=q.O5358;g=q.fullyOpaque;h=q.O8777;k=q.O3244;l=q.O2890;m=q.O9608;n=q.O3144}this.O5358=!!f;this.O3434=void 0==d||null==d?"OK":d;this.O5358&&!d&&(this.O3434="x");this.O9267=c;this.doShowBig=!!e;this.O3144=!!n;this.O8777=!!h;this.O3244=!!k;this.fullyOpaque=!!g;this.isPrompt=!1;this.O2890=!!l;this.O9608=!!m;this.O8739=!(!q||!q.O8739);this.O5719(p,b);this.isOpen=!0}},O3813:function(a){this.open(a,null,null,null,null,null,null,
null,null,null,null,!0)},O5782:function(a){this.open(a,!0,null,null,null,null,null,null,null,null,null,!0)},O2766:function(a,b){a="<p>"+ig.game.strings.O9955(a)+"</p>";this.O3300=b;this.open({html:a+'<div class="buttonPart"><a href="javascript:ig.game.alertDialog.O5128()" class="okButton">OK</a></div>',O5358:!0,O3144:!0})},O5128:function(){this.O3300&&(this.O3300(),this.O3300=null);this.close()},O5816:function(a,b,c,d,e,f,g,h,k,l,m){if(!this.isOpen){this.O5358=!1;if(null===k||void 0===k)k=1E6;e&&
(this.doShowBig=!0);this.O9805=!0;this.O3434=void 0==d||null==d?"OK":d;this.O9267=c;this.isPrompt=!0;if(void 0===b||null===b)b="";c="";a&&(c+='<div class="promptText" style="'+this.fontStyle+(m?"; text-transform: none":"")+'">'+ig.game.strings.O9955(a)+"</div>");a=f?"allowMixedCase":"allUpperCase";c+='<p class="promptInput" style="'+this.fontStyle+'">';e?(f=.8*ig.system.height*ig.system.scale-37*ig.system.scale,3<=ig.system.scale&&(f+=20),c+='<textarea id="promptInputBox" maxlength="'+k+'" spellcheck="false" class="'+
a+'" placeholder="" style="height: '+Math.round(f-10)+'px">'+ig.game.strings.O9955(b)+"</textarea>"):(f="",b&&(f=' value="'+ig.game.strings.O9955(b)+'"'),c+='<input type="text" id="promptInputBox"'+f+' maxlength="'+k+'" class="'+a+'"/>');c+="</p>";g&&(c+=g);this.O5719(c,!0,e,l);this.O7826=h;var n=this;e||(jQuery("#promptInputBox").keyup(function(p){13==p.keyCode&&ig.game.alertDialog.O2305();n.O7826&&n.O7826(jQuery("#promptInputBox").val())}),jQuery("#promptInputBox").click(function(p){jQuery("#promptInputBox").select()}));
this.isOpen=!0;jQuery("#promptInputBox").focus();this.O9030=e?document.getElementById("promptInputBox"):null}},update:function(){this.isOpen&&ig.input.pressed("esc")&&(ig.input.O6501(),this.close())},O5719:function(a,b,c,d){var e="";b?e=a:(e=ig.game.strings.O9955(a),e=this.O8854(e),e="<p>"+e+"</p>");a=ig.system.realWidth/2;b=ig.system.O5809/2;ig.ua.mobile&&(a=Math.floor(1.3*a),b=Math.floor(1.3*b));d?(a=120*ig.system.scale,b=90*ig.system.scale):this.doShowBig?(a=.8*ig.system.realWidth,b=.8*ig.system.O5809):
this.O3144?(d=400,a=ig.system.realWidth/3,b=ig.system.O5809/5,a<d&&(a=d),300>b&&(b=300)):this.O8777&&(d=300,a=.15*ig.system.realWidth,b=.9*ig.system.O5809,a<d&&(a=d));180>a&&(a=180);var f=jQuery("#"+ig.game.canvasId),g=f.position();d=f.width();f=f.height();d=g.left+d/2-a/2;g=g.top+f/2-b/2;this.O8777?g=d=10:this.O3244&&(g=10);f="";f=c?f+"overflow-y: hidden":f+"overflow-y: auto";this.O5358?(c=this.O8739?"close-button-extra-visible":"close-button",c="x"==this.O3434?'<img src="'+ml.Misc.O8283(c)+'" alt=""/>':
ig.game.strings.O9955(this.O3434),e='<div class="contentPart" style="'+f+'">'+e+'</div><a href="javascript:ig.game.alertDialog.O2305()" id="alertDialogCloseButton">'+(c+"</a>")):""!=this.O3434&&(c=b-45*ig.system.scale,3<=ig.system.scale&&(c+=20),e='<div class="contentPart" style="height: '+c+"px; "+f+'">'+e+"</div>",e+='<div class="buttonPart"><a href="javascript:ig.game.alertDialog.O2305()" class="okButton">'+ig.game.strings.O9955(this.O3434)+"</a></div>");this.O9805&&!this.O5358&&(e+='<a href="javascript:ig.game.alertDialog.O6660()" id="alertDialogCloseButton"><img src="'+
ml.Misc.O8283("close-button")+'" alt=""/></a>');c=this.fontStyle;c=this.O9608?c+"border: 0; background-color: transparent;":c+("border-top: "+ig.system.scale+"px solid #eee; border-left: "+ig.system.scale+"px solid #eee; border-bottom: "+ig.system.scale+"px solid #333; border-right: "+ig.system.scale+"px solid #333;");this.O2890&&(c+="overflow-y: hidden;");this.O5358&&(c+="padding-top: "+6*ig.system.scale+"px;");e=jQuery('<div id="alertDialog" style="'+c+'">'+e+"</div>");e.attr("width",a);e.attr("height",
b);e.css("width",a+"px");e.css("height",b+"px");e.css("left",d+"px");e.css("top",g+"px");this.fullyOpaque&&e.css("opacity","1");e.appendTo("body");this.size.x=a;this.size.y=b},O2305:function(){ig.game.O4774.O6730();ig.game.sounds.click.play();if(this.isPrompt&&this.O9267){var a=jQuery("#promptInputBox").val();this.O9267(a)}else this.O9267&&this.O9267();this.close();ig.game.O2453.O9874(!0)},O6660:function(){ig.game.sounds.click.play();this.close()},O8854:function(a){a=ig.game.strings.O7811(a);a=ig.game.strings.replaceAll("[["+
a+"]]","[[*","<strong>");a=ig.game.strings.replaceAll(a,"*]]","</strong>");a=ig.game.strings.replaceAll(a," *"," <strong>");a=ig.game.strings.replaceAll(a,"* ","</strong> ");a=ig.game.strings.replaceAll(a,"*\r","<strong>\r");a=ig.game.strings.replaceAll(a,"[[","");a=ig.game.strings.replaceAll(a,"]]","");return ig.game.strings.replaceAll(a,"\r",'<span class="separation"></span>')},draw:function(){},close:function(){this.isOpen&&!ig.game.areaClosed&&(this.contextId=null,jQuery("#alertDialog").remove(),
jQuery("#promptInputBox").remove(),ig.game.O8577(),this.isOpen=!1,ig.game.areaAdForDisplay||jQuery("#areaAdsInfo").fadeOut(),this.O8777=!1,this.doShowBig=!1,this.O3144=!1,this.fullyOpaque=!1,this.O3244=!1,this.O2890=!1,this.O9608=!1,this.isPrompt=!1,this.O5358=!1,this.O9805=!1,this.O8739=!1)},O3141:function(a){if(this.O9030){var b=this.O4703();this.O9030.value=ig.game.alertDialog.O9030.value.valueOf().substr(0,b)+a+ig.game.alertDialog.O9030.value.valueOf().substr(b);this.setCursorPos(b+a.length)}},
O4703:function(){return this.O9030.selectionStart},O1211:function(){return this.O9030?this.O9030.value:""},setCursorPos:function(a){this.O9030.selectionStart=a;this.O9030.selectionEnd=a}})});ig.baked=!0;
ig.module("game.ui.interactingdialog").requires("game.ui.components.uidialog").defines(function(){window.InteractingDialog=UIDialog.extend({isOpen:!1,open:function(a){if(!this.isOpen){this.isOpen=!0;var b=.8*ig.system.width,c=.8*ig.system.height;b=b.limit(180,300);var d=jQuery("#"+ig.game.canvasId),e=d.position(),f=d.width();d=d.height();f=e.left+f/2-b*ig.system.scale/2;e=e.top+d/2-c*ig.system.scale/2;d=1*ig.system.scale;a='<textarea id="interactingDialog" autofocus="autofocus" maxlength="1000000" style="font-size: '+
(6+2*ig.system.scale+"px;border-top: "+d+"px solid #eee; border-left: "+d+"px solid #eee; border-bottom: "+d+"px solid #eee; border-right: "+d+"px solid #eee;padding: "+3*ig.system.scale+'px">')+ig.game.strings.O9955(a)+"</textarea>";a=jQuery(a);a.attr("width",b*ig.system.scale);a.attr("height",c*ig.system.scale);a.css("width",b*ig.system.scale+"px");a.css("height",c*ig.system.scale+"px");a.css("left",f+"px");a.css("top",e+"px");a.appendTo("body")}}})});ig.baked=!0;
ig.module("game.ui.userscripteditor").requires("game.ui.components.uidialog").defines(function(){window.UserScriptEditor=UIDialog.extend({isOpen:!1,pos:{x:0,y:0},size:{x:0,y:0},runs:!1,textfield:null,tabString:"    ",logField:null,isVisible:!0,O7985:!0,O4791:null,O7664:!0,O1362:null,O8416:!0,O7377:null,open:function(a,b,c,d,e){!this.isOpen&&ig.game.O1257&&1<=ig.game.O1257.rank&&(this.isOpen||(this.runs=!1),this.O1362=b,this.O7664=!0,void 0!==c&&(this.O7664=!!c),this.O8416=!0,void 0!==d&&(this.O8416=
!!d),this.O7377=null,void 0!==e&&(this.O7377=e),ig.game.O1257&&(ig.game.O1257.vel={x:0,y:0},ig.game.O1257.accel={x:0,y:0},ig.game.O1257.setAnim(ig.game.O1257.anims.idle)),a||="",this.isOpen=!0,this.size={x:Math.round(ig.system.width/2),y:ig.system.height-28},d=jQuery("#"+ig.game.canvasId),b=d.position(),c=d.width(),d.height(),this.pos.x=b.left+c-this.size.x*ig.system.scale-10*ig.system.scale,ig.game.O1168&&(this.pos.x-=58*ig.system.scale),this.pos.y=b.top+3*ig.system.scale,this.O4791=a,a='<textarea id="userScriptEditorText" maxlength="1000000" spellcheck="false" style="font-size: '+
(this.O4338()+"px;"+this.O8480()+"padding: "+3*ig.system.scale+'px">')+ig.game.strings.O9955(a)+"</textarea>",a=jQuery(a),a.attr("width",this.size.x*ig.system.scale),a.attr("height",this.size.y*ig.system.scale),a.css("width",this.size.x*ig.system.scale+"px"),a.css("height",this.size.y*ig.system.scale+"px"),a.css("left",this.pos.x+"px"),a.css("top",this.pos.y+"px"),a.appendTo("body"),a=b.left+c-92*ig.system.scale,ig.game.O1168&&(a-=61*ig.system.scale),b=this.pos.y+10,c=50*ig.system.scale,d=6*ig.system.scale,
this.O8022(a,b,c),this.O1081(a+c+d+2*ig.system.scale,b),this.O9705(a+c+d+15*ig.system.scale+(3<=ig.system.scale?-2:3),b),this.textfield=document.getElementById("userScriptEditorText"),ig.game.camera.setOffset(),this.O3867(),jQuery("#userScriptEditorText").focus())},O8480:function(){var a=1*ig.system.scale;return"border-top: "+a+"px solid #ccc; border-left: "+a+"px solid #ccc; border-bottom: "+a+"px solid #ccc; border-right: "+a+"px solid #ccc;"},O8022:function(a,b,c){var d=jQuery('<div id="userScriptEditorStartStop" onclick="ig.game.userScriptEditor.O9648()"><span id="userScriptEditorStartStopLabel">&#9654;</span> <span class="userScriptEditorShortcut">ctrl+s</span></div>');
d.css("left",a+"px");d.css("top",b+"px");d.css("width",c+"px");d.css("padding-left",3*ig.system.scale+"px");d.css("padding-right",3*ig.system.scale+"px");d.appendTo("body")},O1081:function(a,b){var c=jQuery('<div id="userScriptEditorHelp" onclick="ig.game.sounds.click.play();ig.game.userScriptEditor.O1362.userScriptEditorOpenHelp()"><span id="userScriptEditorHelpLabel">?</span></div>');c.css("left",a+"px");c.css("top",b+"px");c.css("padding-left",3*ig.system.scale+"px");c.css("padding-right",3*ig.system.scale+
"px");c.appendTo("body")},O9705:function(a,b){var c=jQuery('<div id="userScriptEditorClose" onclick="ig.game.sounds.click.play();ig.game.userScriptEditor.close()"><span id="userScriptEditorCloseLabel">X</span></div>');c.css("left",a+"px");c.css("top",b+"px");c.css("padding-left",3*ig.system.scale+"px");c.css("padding-right",3*ig.system.scale+"px");c.appendTo("body")},O4338:function(){return 11+2*ig.system.scale},O6317:function(){var a='<textarea id="logFieldText" spellcheck="false" readonly="true" style="font-size: '+
(this.O4338()+"px;padding: "+3*ig.system.scale+"px;"+this.O8480())+'"></textarea>';a=jQuery(a);var b=Math.round(this.size.y/4);a.attr("width",this.size.x*ig.system.scale);a.attr("height",b*ig.system.scale);a.css("width",this.size.x*ig.system.scale+"px");a.css("height",b*ig.system.scale+"px");a.css("left",this.pos.x+"px");a.css("top",this.pos.y+this.size.y*ig.system.scale-b*ig.system.scale+"px");a.appendTo("body");a=this.size.y-b-6;jQuery("#userScriptEditorText").css("height",a*ig.system.scale+"px");
this.logField=document.getElementById("logFieldText")},update:function(){if(this.isOpen){this.isVisible=ig.game.settings.showMainUI;if(this.isVisible!=this.O7985){this.O7985=this.isVisible;for(var a=["userScriptEditorText","logFieldText","userScriptEditorHelp","userScriptEditorStartStop"],b=0;b<a.length;b++){var c=a[b];this.isVisible?jQuery("#"+c).show():jQuery("#"+c).hide()}ig.game.camera.setOffset()}this.O8416&&(ig.input.state("esc")||ig.input.pressed("d_arr"))&&this.close()}},O9672:function(){return this.isOpen&&
this.isVisible&&!this.runs&&jQuery("#userScriptEditorText").is(":focus")},O7748:function(){jQuery("#logFieldText").remove();jQuery("#userScriptEditorText").css("height",this.size.y*ig.system.scale+"px")},O9648:function(){ig.game.sounds.click.play();if(this.runs)this.O1362&&this.O1362.userScriptEditorRunEnded&&this.O1362.userScriptEditorRunEnded();else{window.consoleref.clear();ig.game.alertDialog.close();this.O7748();this.logField=null;var a=jQuery("#userScriptEditorText").val();this.O1362&&this.O1362.userScriptEditorRunStarted&&
this.O1362.userScriptEditorRunStarted(a)&&(this.runs=!0,jQuery("#userScriptEditorStartStopLabel").html("&#9632;"),jQuery("#userScriptEditorStartStop").toggleClass("userScriptEditorStartStopButtonRuns"));this.O3296(a)}},O3296:function(a){void 0===a&&(a=jQuery("#userScriptEditorText").val());if(!this.isCurrentlySaving&&a!=this.O4791){this.isCurrentlySaving=!0;this.O7377?localStorage.lastSavedOffersEditingItemId=this.O7377:delete localStorage.lastSavedOffersEditingItemId;var b=this;ig.game.O9817.O3553(a).done(function(c){if(!c||
!c.ok)throw Error("There was an issue saving the editor content.");b.O4791=a;b.isCurrentlySaving=!1})}},O3867:function(){var a=this;jQuery("#userScriptEditorText").on("keydown",function(b){b.stopPropagation();if(121==b.keyCode)ig.game.settings.O3865();else if(13==b.keyCode)a.textfield.selectionEnd>a.textfield.selectionStart||(b.preventDefault(),a.O8342());else if(b.ctrlKey&&83==b.keyCode)b.preventDefault(),a.O9648();else if(27==b.keyCode)b.preventDefault(),a.O8416&&ig.game.brainManager.unload(!0);
else if(9==b.keyCode){b.preventDefault();var c=a.textfield.value;c=c.replace(/\r\n/g,"\n");(c=a.O9765(c))||(c="");b.shiftKey?1<=c.length?a.O9776(ig.game.userScriptEditor.O1766):a.O4096():1<=c.length?a.O9776(ig.game.userScriptEditor.O5339):a.O3141(a.tabString)}})},O8342:function(){var a="",b=this.textfield.selectionStart,c=this.textfield.value.substr(0,b),d=this.textfield.value.substr(b),e=c.lastIndexOf("\n");if(0<=e&&e<b){e=c.substr(e,b).split("    ").length-1;for(var f=1;f<=e;f++)a+="    "}this.textfield.value=
c+"\n"+a+d;this.textfield.selectionStart=b+a.length+1;this.textfield.selectionEnd=this.textfield.selectionStart},O9765:function(a){var b="",c=this.textfield.selectionStart,d=this.textfield.selectionEnd;0<=c&&d>c&&(a||=this.textfield.value,b=a.substr(c,d-c));return this.lastSelection=b},O5339:function(a){a=ig.game.userScriptEditor.tabString+a.replace(/\n/g,"\n"+ig.game.userScriptEditor.tabString);var b=ig.game.userScriptEditor.tabString.length;a.substr(a.length-b)==ig.game.userScriptEditor.tabString&&
(a=a.substr(0,a.length-b));return a},O1766:function(a){a=a.replace(/\n    /g,"\n");var b=ig.game.userScriptEditor.tabString.length;a.substr(0,b)==ig.game.userScriptEditor.tabString&&(a=a.substr(b));return a},O4096:function(){var a=this.textfield.value,b=this.O4703(),c=this.tabString.length;a.substr(b-c,c)==this.tabString&&(a=a.substr(0,b-c)+a.substr(b,a.length-c),this.textfield.value=a,this.setCursorPos(b-c))},O3141:function(a){var b=this.O4703();this.textfield.value=ig.game.userScriptEditor.textfield.value.valueOf().substr(0,
b)+a+ig.game.userScriptEditor.textfield.value.valueOf().substr(b);this.setCursorPos(b+a.length)},O4703:function(){return this.textfield.selectionStart},O1211:function(){return this.textfield?this.textfield.value:""},setCursorPos:function(a){this.textfield.selectionStart=a;this.textfield.selectionEnd=a},O9776:function(a){var b=this.textfield.selectionStart,c=this.textfield.selectionEnd;if(0<=b&&c>b){var d=this.textfield.value,e=d.substr(b,c-b);a=a(e);a!=e&&(d=d.substr(0,b)+a+d.substr(c),this.textfield.value=
d,this.textfield.selectionStart=b,this.textfield.selectionEnd=b+a.length)}},close:function(){this.runs=!1;this.isOpen&&(this.O1362&&this.O1362.userScriptEditorClosed&&this.O1362.userScriptEditorClosed(),this.O1362=null,this.O7664&&this.O3296(),this.logField=this.textfield=null,jQuery("#userScriptEditorStartStop").remove(),jQuery("#userScriptEditorHelp").remove(),jQuery("#userScriptEditorClose").remove(),jQuery("#userScriptEditorText").remove(),jQuery("#logFieldText").remove(),ig.game.O8577(),this.runs=
this.isOpen=!1,ig.game.camera.setOffset())},O5966:function(a,b,c,d){this.O8367(this.textfield,b,c);ig.game.sounds.shortWhoosh.play();d||!ig.game.O1257?(a="\r\nOops, there's an error in line "+b+"\r\n\r\n"+a,ig.game.alertDialog.open(a,null,null,null,null,!0,null,!0)):ig.game.O1257.say(a.toLowerCase())},O8367:function(a,b,c){b--;c--;var d=a.value.split("\n"),e=0,f;for(f=0;f<d.length&&f!=b;f++)e+=d[f].length+1;e+=c;if(d[b])return f=d[b].length+e-c,b="undefined"!=typeof a.selectionStart,c=!b&&document.selection&&
document.selection.createRange,b?(a.focus(),a.selectionStart=e,a.selectionEnd=f,!0):c?(a.focus(),a.select(),a=document.selection.createRange(),a.collapse(!0),a.moveEnd("character",f),a.moveStart("character",e),a.select(),!0):!1;console.warn("Line number "+b+" not found in script.")},O7382:function(a){this.logField||this.O6317();this.logField.value+=a;this.logField.scrollTop=this.logField.scrollHeight},O6229:function(){this.logField&&(this.logField.value="")},O5634:function(){this.runs&&(this.runs=
!1,jQuery("#userScriptEditorStartStopLabel").html("&#9654;"),jQuery("#userScriptEditorStartStop").toggleClass("userScriptEditorStartStopButtonRuns"))}})});ig.baked=!0;
ig.module("game.ui.areasearchdialog").requires("game.ui.components.uidialog").defines(function(){window.AreaSearchDialog=UIDialog.extend({restrictToJustResults:!1,isOpen:!1,O5536:null,O7743:8,O3587:null,open:function(a,b){this.isOpen||(this.O3184(),this.parent(),this.restrictToJustResults=!!b,this.O5719(a),ig.game.sounds.shortWhoosh.play())},O3184:function(){this.O3587="pvp;party;parkour;adventure;trivia;puzzle;quiz;quest;game;hub;casino;store;bodies;items;chat;art;friends;racing;sport;movies;university;school;mall;help;beach;horror;bar;cafe;club;space;fun;castle;music;code;talk;science;skins;multis;board games".split(";");
this.O3587.sort()},O1652:function(){this.isOpen?this.close():this.open()},O5719:function(a){var b="";this.size.x=Math.min(200*ig.system.scale,ig.system.realWidth-50);this.size.y=Math.round(.75*ig.system.O5809);this.pos.x=Math.round(ig.system.realWidth/2-this.size.x/2);this.pos.y=Math.round(ig.system.O5809/2-this.size.y/2);var c=5+2*ig.system.scale+"px",d="position: absolute; background-color: rgba(230,230,230,.8);border-radius: 5px; font-family: 'Press Start 2P', sans-serif; color: black; overflow-y: auto; overflow-x: hidden; text-transform: uppercase; "+
c,e="font-family: 'Press Start 2P', sans-serif; background-color: white; border: "+ig.system.scale+"px inset white; padding: "+(ig.system.scale+1)+"px; text-transform: uppercase; font-size: "+(4+2*ig.system.scale)+"px; width: "+this.size.x/2+"px;",f="display: block; position: absolute; opacity: .4; left: "+(this.size.x-16*ig.system.scale)+"px; top: "+4*ig.system.scale+"px;",g=ml.Misc.O8283("close-button");a?delete sessionStorage.areaSearchQuery:a=sessionStorage.areaSearchQuery?ig.game.strings.O9955(sessionStorage.areaSearchQuery):
"";var h="text-align: left; padding-left: "+this.size.x/4+"px; padding-top: "+5*ig.system.scale+"px; ";this.restrictToJustResults&&(h+="display: none;");b=b+('<div id="areaSearchDialog" style="'+d+'"><p style="')+(h+'"><input type="text" id="searchBox" style="')+(e+'" value="'+a+'"/></p>');b+='<div id="searchResult"></div>';b+='<img src="'+g+'" style="'+f+'" onclick="ig.game.areaSearchDialog.close()"/>';b+=this.O2391();b+='<div id="totalUsersOnline" style="color: green"></div>';b+='<div class="areaSearchAd">'+
ig.game.O9620(!0)+"</div>";b+=this.O9054(!0);b+="</div>";b=jQuery(b);b.css("left",this.pos.x+"px");b.css("top",this.pos.y+"px");b.css("width",this.size.x+"px");b.css("height",this.size.y+"px");b.css("fontSize",c);b.appendTo("body");var k=this;jQuery("#searchBox").keyup(function(l){switch(l.keyCode){case 13:k.O5071();break;case 27:k.close();break;case 49:l.ctrlKey&&ig.game.areaList.O1299();break;case 50:l.ctrlKey&&ig.game.areaList.O4016();break;default:""==jQuery("#searchBox").val()&&(delete sessionStorage.areaSearchQuery,
k.O2729(""))}});jQuery("#searchBox").focus();a&&""!=a&&this.O5071();this.O2841()},O2841:function(){ig.game.O9817.O7035().done(function(a){jQuery("#totalUsersOnline").html("People on: "+a.all)})},O2391:function(){var a='<div id="searchSuggestions" style="color: rgba(0,0,0,.4); text-align: center; line-height: 2.5em; padding: 25px">';for(var b=0;b<this.O3587.length;b++){var c=ig.game.strings.O9955(this.O3587[b]);a+='<span class="pseudoLink" onclick="ig.game.areaSearchDialog.O9946(\''+(c+"')\">")+ig.game.strings.replaceAll(c,
" ","&nbsp;")+"</span> &nbsp; "}return a+"</div>"},O9946:function(a){jQuery("#searchBox").val(a);this.O5071()},O9054:function(a){var b="";if(!(this.restrictToJustResults||ig.ua.phone&&ig.system.O6256())){var c="display: block; color: rgba(0,0,0,.7); left: 0; width: 100%; ";c=a?c+("position: absolute; top: "+(this.size.y-105)+"px;"):c+"position: relative; top: 10px;";a=ig.game.isFullAccount&&!ig.ua.O1292?'<span style="opacity: .5; font-size: 90%">&nbsp; Ctrl+1</span>':"";var d=ig.game.isFullAccount&&
!ig.ua.O1292?'<span style="opacity: .5; font-size: 90%">&nbsp; Ctrl+2</span>':"";b+='<div id="searchFooter" style="'+c+'"><table style="width: 100%; margin-bottom: 15px; border-collapse: none"><tr><td>&nbsp;</td>';b+='<td style="width: 50%; padding: 3px; padding-bottom: 3px; padding-top: 3px; vertical-align: middle; background-color: white; border-radius: 4px; text-align: center;" onclick="ig.game.areaList.O1299()"><div style="text-decoration: none; cursor: default" class="pseudoLink">Visited'+a+
"</div></td>";b+="<td>&nbsp;</td>";b+='<td style="width: 50%; padding: 3px; padding-bottom: 3px; padding-top: 3px; vertical-align: middle; background-color: white; border-radius: 4px; text-align: center;" onclick="ig.game.areaList.O4016()"><div style="text-decoration: none; cursor: default" class="pseudoLink">Created'+d+"</div></td>";b+="<td>&nbsp;</td>";b+="</tr>";b+="<tr>";b+='<td colspace="5"></td>';b+="</tr>";b+="<tr>";b+="<td>&nbsp;</td>";b+='<td style="width: 50%; padding: 3px; padding-bottom: 3px; padding-top: 3px; vertical-align: middle; background-color: white; border-radius: 4px; text-align: center;" onclick="ig.game.randomAreasDialog.open()"><div style="text-decoration: none; cursor: default" class="pseudoLink">Areas of the Hour</div></td>';
b+="<td>&nbsp;</td>";b+='<td style="width: 50%; padding: 3px; padding-bottom: 3px; padding-top: 3px; vertical-align: middle; background-color: white; border-radius: 4px; text-align: center;" onclick="ig.game.areaSearchDialog.O5023()"><div style="text-decoration: none; cursor: default" class="pseudoLink">More...</div></td>';b+="<td>&nbsp;</td>";b+="</tr>";b+="</table>";b+="</div>"}return b},O5023:function(){var a=ig.game.isLocal?"546f1193fda1416015f93382":"53eb9f388534266f180e0fd2";ig.game.writableDialog&&
(ig.game.writableDialog.O557(a,!0),this.close())},O5071:function(){var a=this,b=jQuery("#searchBox").val();b=b.trim().toLowerCase();b=ig.game.strings.O1572(b,"  "," ");""==b?delete sessionStorage.areaSearchQuery:sessionStorage.areaSearchQuery=b;jQuery("#totalUsersOnline").remove();if(""==b)this.O2729("");else if(b=="areas 1-"+this.O7743){var c=a.O4455([],b);a.O6909(c,b)}else ig.game.O9817.O4953(b).done(function(d){d=a.O4455(d,b);a.O6909(d,b)})},O4455:function(a,b){a||=[];var c=[];switch(b){case "area 0":case "area 1":case "area 2":case "area 3":case "area 4":case "area 5":case "area 6":case "area 7":case "area 8":var d=
ig.game.strings.replaceAll(b,"area ","");b={name:b};b.thumbUrl=this.O4140(parseInt(d));c.push(b);break;case "area":case "areas":case "elsewhere":case "areas 1-"+this.O7743:this.O8411(c);break;case "chat":case "meet":case "friends":b={name:"area 0"},b.thumbUrl=this.O4140(0),c.push(b)}return c.concat(a)},O8411:function(a){this.O9732(a,3);for(var b=1;b<=this.O7743;b++)3!=b&&this.O9732(a,b)},O9732:function(a,b){var c={name:"area "+b};c.thumbUrl=this.O4140(b);a.push(c)},O4140:function(a){return ig.game.O1946+
"media/ring-thumb/"+a+".png?v="+ig.game.version},O2729:function(a){""==a&&jQuery("#searchSuggestions").show();jQuery("#searchResult").html('<p style="margin-top: 30px; opacity: .4">'+a+"</p>");jQuery("#searchFooter").show();jQuery(".areaSearchAd").hide()},O6909:function(a,b){var c="";jQuery("#searchFooter").hide();jQuery("#searchSuggestions").hide();jQuery(".areaSearchAd").hide();var d=0<=this.O3587.indexOf(b),e=b&&0<=b.indexOf("meaning of life");e&&(c+='<div class="glowAnimation" style="font-size: 300%; color: gold; font-weight: bold; text-align: center;margin-top: 50px; margin-bottom: 50px;">42</div>',
ig.game.sounds.laser_carving_1.play());if(a&&1<=a.length){var f=!1,g=40*ig.system.scale,h="margin: "+7*ig.system.scale+"px; text-align: left; clear: both; padding-right: 6px; background-color: rgba(255,255,255,.6); height: "+g+"px; border-radius: 5px; overflow: hidden;";g="float: left; width: "+g+"px; height: "+g+"px; float: left; margin-right: "+7*ig.system.scale+"px; display: block;";var k="opacity: .6; line-height: 16px; padding-top: "+3*ig.system.scale+"px; font-size: 90%";this.O5536=a;for(var l=
"",m=!1,n=0;n<a.length;n++){var p=a[n],q="";p.name=p.name.toLowerCase();var t=ig.game.strings.replaceAll(p.name," ",""),r=p.thumbUrl?p.thumbUrl:ig.game.O3186.O5138(t);q+='<div onclick="'+(t==ig.game.O1460?"ig.game.areaSearchDialog.close()":"ig.game.areaSearchDialog.O3848("+n+")")+'" style="'+h+'">';q+='   <img src="'+r+'" alt="" style="'+g+'" class="thumb"/>';q+='   <div style="padding-top: '+7*ig.system.scale+'px">';q+='       <div style="font-size: 110%; opacity: .8">'+ig.game.strings.O9955(p.name)+
"</div>";p.description&&(r=ig.game.strings.O3089(p.description,140),r=ig.game.strings.O9955(r),r=ig.game.strings.replaceAll(r,"   "," &nbsp; "),q+='       <div style="'+k+'">'+r+"</div>");q+="   </div>";q+="</div>";d&&this.O7007(p.description)?l+=q:c+=q;if(p.name==b||t==b)f=!0}c+=l;!e&&!f&&(c+='<div id="directToLink"></div>',m=!0);c+=this.O9054()}else e||(delete sessionStorage.areaSearchQuery,d=ml.Misc.O8283("nothing-found"),c+='<p style="text-align: center; padding-top: '+8*ig.system.scale+'px">',
c+='<img src="'+d+'" alt="" style="opacity: .5"/></p>',c+='<div id="directToLink"></div>',m=!0,c+=this.O9054(!0));jQuery("#searchResult").html(c);jQuery("img.thumb").on("error",function(){this.src=ig.game.O1946+"media/empty-area-thumb.png?v="+ig.game.version});if(m){var w=this;ig.game.O9817.O967(b).done(function(u){u&&u.ok&&jQuery("#directToLink").html(w.getDirectToLinkHtml(b))})}},getDirectToLinkHtml:function(a){var b='<p style="text-align: center; padding-top: '+(16*ig.system.scale+"px; padding-bottom: "+
16*ig.system.scale+'px">');var c="ig.game.portaller.O6417('"+ig.game.strings.O9955(a)+"',true);",d=ml.Misc.O8283("transport-button");b=b+('<img src="'+d+'" alt="" style="opacity: .3"/> <span class="pseudolink" onclick="')+(c+'" style="color: rgba(0,0,0,0.3)">to '+ig.game.strings.O9955(a)+"</span>");return b+"</p>"},O7007:function(a){var b=!1;if(a){a=a.toLowerCase();for(var c=0,d=0;d<this.O3587.length;d++){var e=this.O3587[d];if(ig.game.strings.O4941(a,e)&&(b=6<=++c))break}if(!b)for(b=!0,d=0;4>d;d++)if(e=
this.O3587[d],!ig.game.strings.O4941(a,e)){b=!1;break}}return b},O3848:function(a){var b=this.O5536[a].name;b=ml.Misc.O2174(b);ig.game.O1257.say("to "+b);setTimeout(function(){ig.game.portaller.O6417(b)},500);this.close()},close:function(){this.restrictToJustResults=!1;this.O5536=null;jQuery("#areaSearchDialog").remove();this.parent()}})});ig.baked=!0;
ig.module("game.ui.adcampaignsdialog").requires("game.ui.components.uidialog").defines(function(){window.AdCampaignsDialog=UIDialog.extend({isOpen:!1,O9938:!1,priceSlots:[{usd:5,impressions:1E4},{usd:10,impressions:3E4},{usd:40,impressions:25E4}],init:function(){if(this.O9938=-1!=window.location.href.indexOf("?adpaid")){window.history.pushState({},document.title,window.location.href.split("?")[0]);var a=this;setTimeout(function(){a.open()},1E3)}},open:function(){this.isOpen||(ig.game.isFullAccount?
(this.parent(),ig.game.writableDialog&&ig.game.writableDialog.isOpen&&ig.game.writableDialog.close(),this.O5719(),ig.game.sounds.shortWhoosh.play()):ig.game.bottomMenu.O6979(!0))},O5719:function(){var a="";this.size.x=380*ig.system.scale;this.size.y=Math.round(.75*ig.system.O5809);this.pos.x=Math.round(ig.system.realWidth/2-this.size.x/2);this.pos.y=Math.round(ig.system.O5809/2-this.size.y/2);var b=5+2*ig.system.scale+"px",c="position: absolute; background-color: rgba(230,230,230,.8);border-radius: 5px; font-family: 'Press Start 2P', sans-serif; color: black; overflow-y: auto; overflow-x: hidden; text-transform: uppercase; "+
b,d="display: block; position: absolute; opacity: .4; left: "+(this.size.x-16*ig.system.scale)+"px; top: "+4*ig.system.scale+"px;",e=ml.Misc.O8283("close-button");a+='<div id="adCampaignsDialog" style="'+c+'">';a+='<img src="'+e+'" style="'+d+'" onclick="ig.game.adCampaignsDialog.close()"/>';var f=this;this.O9629(function(g){f.O9938&&(ig.game.sounds.minfinity.play(),a+='<p style="color: green; margin-top: 60px">The ad is successfully running now! Thank you!</p>');a+=g;a+="</div>";g=jQuery(a);g.css("left",
f.pos.x+"px");g.css("top",f.pos.y+"px");g.css("width",f.size.x+"px");g.css("height",f.size.y+"px");g.css("fontSize",b);g.appendTo("body");f.O9938=!1})},O9629:function(a){var b="",c=this;ig.game.O9817.O2065().done(function(d){if((d=d&&d.campaigns)&&1<=d.length){b+='<table class="adCampaigns" id="adCampaignsOverview">';b+="<tr>";b+="<th>Link text</th><th>Area</th><th>Impressions</th><th>Start time</th><th>&nbsp;</th><th>&nbsp;</th>";b+="</tr>";for(var e=0;e<d.length;e++){var f=d[e],g=ig.game.strings.O9955(f.id);
b+="<tr>";b+="<td>"+c.O3047(f.title,f.id,f.remainingImpressions)+"</td>";b+="<td>"+c.O7940(f.areaName,f.id,f.remainingImpressions)+"</td>";b+="<td>"+(f.totalImpressions-f.remainingImpressions)+" of "+f.totalImpressions+"</td>";b+="<td>"+ig.game.strings.O9955(f.dateCreated)+"</td>";b+="<td>"+c.O3764(f)+"</td>";f=c.O7857();f+="visibility: hidden;";b+='<td><input type="button" id="updateAdCampaignButton_'+g+'" class="saveAdCampaignButton" value="Update" onclick="ig.game.adCampaignsDialog.updateCampaign(\''+
g+'\')" style="'+f+'" /></td>';b+="</tr>"}b+="</table>"}b+=c.O6583(0==d.length);a(b)})},O3764:function(a){var b="";if(0<a.remainingImpressions){var c=ig.game.strings.O9955(a.id);b+='<img src="'+this.O5044(a.paused)+'" class="disableContentSelect" onclick="ig.game.adCampaignsDialog.toggleAdPaused(\''+(c+'\')" style="opacity: 0.7" id="campaignPaused_')+c+'"/>'}else b="&nbsp;";return b},toggleAdPaused:function(a){var b=this.O7164(a);b=this.O5044(!b);jQuery("#campaignPaused_"+a).attr("src",b);this.showUpdateButton(a);
ig.game.sounds.click.play()},O7164:function(a){return 0<=jQuery("#campaignPaused_"+a).attr("src").indexOf("playPause/play")},O5305:function(a){return a?"true":"false"},O5044:function(a){return ml.Misc.O8283("playPause/"+(a?"play":"pause"))},O3354:function(a){return a&&"true"===a},O7857:function(){var a=ig.system.scale+"px solid rgba(0,0,0,0.4);";return"border: 0; border-bottom: "+a+"border-right: "+a},O3047:function(a,b,c){var d='<input type="text" id="campaignTitle'+(b?"_"+b:"")+'" style="'+this.O3107(!!a)+
'" size="35" maxlength="60"';a&&(d+=' value="'+ig.game.strings.O9955(a)+'"',d+=" oninput=\"ig.game.adCampaignsDialog.showUpdateButton('"+b+"')\"");0===c&&(d+=' readonly="readonly" ');return d+"/>"},O7940:function(a,b,c){var d='<input type="text" id="campaignAreaName'+(b?"_"+b:"")+'" style="'+this.O3107(!!a)+'" size="15" ';a&&(d+=' value="'+ig.game.strings.O9955(a)+'"',d+=" oninput=\"ig.game.adCampaignsDialog.showUpdateButton('"+b+"')\"");0===c&&(d+=' readonly="readonly" ');return d+"/>"},showUpdateButton:function(a){jQuery("#updateAdCampaignButton_"+
a).css("visibility","visible")},O3107:function(a){var b="text-transform: uppercase; background-color: rgba(255,255,255,"+(a?"0.65":"1")+");";a&&(b+="border: 0;");return b},O6583:function(a){var b='<div id="softError" style="visibility: hidden; color: red"></div><div style="margin-top: 40px">';a||(b+='<p><span class="pseudoLink" onclick="jQuery(\'#createCampaign\').slideToggle(300)">+ New ad...</strong></p>');b+='<div id="createCampaign" style="'+(a?"":"display: none")+'"><table class="adCampaigns"><tr>';
b+="<th>Link text</th><th>Area</th><th>Page views*</th><th></th>";b+="</tr>";b+="<tr>";b+="<td>"+this.O3047()+"</td>";b+="<td>thingistan.com/"+this.O7940()+"</td>";b+="<td>";b+='<select id="campaignMaxImpressions" style="font-size: 150%" size="3">';for(a=0;a<this.priceSlots.length;a++)b+='<option value="'+this.priceSlots[a].impressions+'">$'+this.priceSlots[a].usd+" &rarr; "+ig.game.strings.O7317(this.priceSlots[a].impressions)+"</option>";b+="</select>";b+="</td>";b+='<td><input type="button" class="saveAdCampaignButton" style="'+
this.O7857()+'" value="Create!" onclick="ig.game.adCampaignsDialog.saveNewCampaign()" /></td>';b+="</tr>";b+="</table>";b+='<p style="opacity: .4; line-height: 1.7em; font-size: 90%">*1 page view results in several appearances:<br/>On the side, in Writable threads, and on the Find Area dialog.<br/>Thank you for supporting Thingistan!</p>';b+="</div>";return b+"</div>"},saveNewCampaign:function(){var a=jQuery("#campaignTitle").val(),b=jQuery("#campaignAreaName").val(),c=jQuery("#campaignMaxImpressions").val();
a=a.toLowerCase().trim();b=b.toLowerCase().trim();b=ig.game.strings.replaceAll(b," ","");if(""==a||""==b||null==c)this.showSoftError("Please enter a link text, area name, and select the amount of impressions");else{var d=this;ig.game.O9817.O9256(b,a,c).done(function(e){var f=e.id;e=e.softError;f&&!ig.ua.steam&&(d.close(),localStorage.skipNextAd=!0,ig.game.iapManager.O1337(f));(f=d.O6989(e))&&d.showSoftError(f)})}},updateCampaign:function(a){var b=jQuery("#campaignTitle_"+a).val(),c=jQuery("#campaignAreaName_"+
a).val(),d=this.O7164(a);b=b.toLowerCase().trim();c=c.toLowerCase().trim();c=ig.game.strings.replaceAll(c," ","");if(""==b||""==c)ig.game.sounds.nocando.play();else{var e=this;ig.game.O9817.O9128(a,c,b,d).done(function(f){(f=e.O6989(f.softError))?e.showSoftError(f):(ig.game.sounds.success.play(),e.close())})}},O6989:function(a){switch(a){case "area_not_found":var b="Oops, this area doesn't exist"}return b},showSoftError:function(a){jQuery("#softError").html(a);jQuery("#softError").css({visibility:"visible"});
ig.game.sounds.nocando.play()},O7010:function(){jQuery("#softError").css({visibility:"hidden"});jQuery("#softError").html("")},close:function(){jQuery("#adCampaignsDialog").remove();this.parent()}})});ig.baked=!0;
ig.module("game.ui.arealist").defines(function(){window.AreaList=ig.Class.extend({thumbSize:0,O6047:"",init:function(){this.thumbSize=52*ig.system.scale;this.O6047="float: left; width: "+this.thumbSize+"px; height: "+this.thumbSize+"px"},O1299:function(){this.O8999(!0,!0)},O4016:function(){this.O8999(!1,!0,!0);ig.game.areaAdForDisplay||jQuery("#areaAdsInfo").fadeIn()},O7020:function(){var a=!0;if(ig.game.isFullAccount){if(ig.game.writableDialog&&ig.game.writableDialog.isOpen)return;ig.game.O2974();
ig.game.alertDialog&&ig.game.alertDialog.isOpen&&ig.game.alertDialog.close();jQuery("#readableDialog").remove();jQuery("#alertDialog").remove();ig.game.sounds.shortWhoosh.play();ig.game.alertDialog.open({html:" ",O5358:!0,fullyOpaque:!0});ig.game.alertDialog.contextId="areaThumbs";jQuery("#alertDialog").css("background-color","rgba(0,0,0,.75)").css("border",ig.system.scale+"px solid rgba(0,0,0,.75)").addClass("transparentScrollbar")}else ig.game.bottomMenu.O6979(!0),a=!1;return a},O7051:function(){if(this.O7020()){var a=
this,b=[];ig.game.O9817.O1389(this).done(function(c){for(var d=Math.min(c.length,20),e=0;e<d;e++)ig.game.O9817.O8175(c[e]).done(function(f){var g=f&&f.crAreaUrlName?f.crAreaUrlName:null;if(g&&-1===b.indexOf(g)){b.push(g);var h=ig.game.strings.O9955(g.toUpperCase());h+=" ("+f.crAreaTotalOnline+")";f=ig.game.O3186.O5138(g.toLowerCase());g=g==ig.game.O1460?"ig.game.alertDialog.close()":"ig.game.portaller.O6417('"+ig.game.strings.O9955(g)+"')";h='<img src="'+f+'" alt="" title="'+h+'" style="'+a.O6047+
'" onclick="'+g+'" />';jQuery(".contentPart").append(h)}})})}},O8999:function(a,b,c){if(this.O7020()){var d=this;ig.game.O9817.O8990().done(function(e){if(e&&1<=e.length){var f='<div style="text-align: center">';var g=function(n,p){var q=0;n.lastVisit>p.lastVisit?q=-1:n.lastVisit<p.lastVisit&&(q=1);return q};c?e.sort(ml.Misc.O9611):e.sort(g);for(g=0;g<e.length;g++){var h=e[g],k=ml.Misc.O6288(h.lastVisit);if((h.isCreator&&b||!h.isCreator&&a)&&!(a&&h.isCreator&&10<=k)){var l=h.urlName==ig.game.O1460;
k=ig.game.strings.O9955(h.name.toUpperCase());k+=" ("+(h.totalOnline?h.totalOnline:0)+" now   "+ig.game.strings.O7317(h.totalVisitors)+" all time)";k=k.toUpperCase();var m=ig.game.O3186.O5138(h.urlName.toLowerCase());h=l?"ig.game.alertDialog.close()":"ig.game.portaller.O6417('"+ig.game.strings.O9955(h.urlName)+"')";f+='<img src="'+m+'" alt="" title="'+k+'" style="'+d.O6047+'" onclick="'+h+'" />'}}if(a){for(g=1;8>=g;g++)h=(l=ig.game.O4223&&1==ig.game.O4873.O8027&&ig.game.O4873.currentArea==g)?"ig.game.alertDialog.close()":
"ig.game.portaller.O6417("+g+")",k="area "+g,k=k.toUpperCase(),m=ig.game.O1946+"media/ring-thumb/"+g+".png?v="+ig.game.version,f+='<img src="'+m+'" alt="" title="'+k+'" style="'+d.O6047+'" onclick="'+h+'" />';f+="</div>"}jQuery(".contentPart").html(f)}else ig.game.sounds.nocando.play()})}},close:function(){ig.game.alertDialog.close();ig.game.areaAdForDisplay||jQuery("#areaAdsInfo").fadeOut();this.parent()}})});ig.baked=!0;
ig.module("game.ui.thingreferencesdialog").requires("game.ui.components.uidialog").defines(function(){window.ThingReferencesDialog=UIDialog.extend({data:[],isOpen:!1,O4950:"thingReferencesDialog",O8642:"",open:function(a,b){if(!this.isOpen){this.isOpen=!0;this.O8642=b;this.data=a?a:[];a=.8*ig.system.height;b=jQuery("#"+ig.game.canvasId);var c=b.position(),d=b.width();b=b.height();d=c.left+d-70*ig.system.scale-60*ig.system.scale;c=c.top+b/2-a*ig.system.scale/2;b=1*ig.system.scale;b=jQuery('<div id="'+
this.O4950+'" style="font-size: '+(4+2*ig.system.scale+"px;border-top: "+b+"px solid #eee; border-left: "+b+"px solid #eee; border-bottom: "+b+"px solid #eee; border-right: "+b+"px solid #eee;padding: "+3*ig.system.scale+'px"></div>'));b.attr("width",60*ig.system.scale);b.attr("height",a*ig.system.scale);b.css("width",60*ig.system.scale+"px");b.css("height",a*ig.system.scale+"px");b.css("left",d+"px");b.css("top",c+"px");b.appendTo("body");this.update()}},update:function(){jQuery(".thingReference").remove();
jQuery(".thingReferenceFootnote").remove();for(var a=0;a<this.data.length;a++){var b=this.data[a],c=ig.game.strings.O9955(b[0]);b=ig.game.strings.O9955(b[1]);c='<div class="thingReference" data-id="'+c+'">'+b+"</div>";jQuery("#"+this.O4950).append(c)}0==this.data.length&&(a='<p class="thingReferenceFootnote">Add '+this.O8642+" From &gt;&gt;</p>",jQuery("#"+this.O4950).append(a));var d=this;jQuery(".thingReference").click(function(e){e=jQuery(this).attr("data-id");ig.input.state("ctrl")?d.removeItem(e):
(ig.game.O7747.O1015(e,2),1!=ig.game.panelSet.tabState&&ig.game.panelSet.O6923(1))})},addItem:function(a,b){if(a&&b){this.removeItem(a,!0);for(var c=b,d=0;this.O5546(b)&&!(b=c+" "+ ++d,1E4<=d););this.data.push([a,b]);ig.game.sounds.success.play();this.update()}},O5546:function(a){for(var b=!1,c=0;c<this.data.length;c++){var d=this.data[c];if(d&&d[1]&&d[1].toLowerCase()==a.toLowerCase()){b=!0;break}}return b},removeItem:function(a,b){for(var c=0;c<this.data.length;c++)if(a==this.data[c][0]){this.data.splice(c,
1);break}b||(ig.game.sounds.bin.play(),this.update())}})});ig.baked=!0;
ig.module("game.ui.friendsdialog").requires("game.ui.components.uidialog").defines(function(){window.FriendsDialog=UIDialog.extend({isOpen:!1,O4950:"friendsDialog",contentId:"contentPart",O5778:20,O3607:0,unfindable:void 0,statusText:void 0,O1960:500,fontStyle:"",O5398:"",O9272:null,receivedPingsByUserId:{},O1767:!1,totalOnlineDataCache:null,open:function(){if(!this.isOpen)if(this.O1767=!1,ig.game.writableDialog&&ig.game.writableDialog.isOpen&&ig.game.writableDialog.close(),1<=ig.game.O1257.rank){this.fontStyle=
"font-size: "+(6+2*ig.system.scale)+"px;";ig.game.O2974(null,null,null,!0);ig.game.O1189.register(ig.game.O1189.types.OPENED_PEOPLE);this.isOpen=!0;this.O5398="border-top: "+ig.system.scale+"px solid rgba(100,100,100,.4); border-bottom: 0; margin-top: "+2*ig.system.scale+"px; margin-bottom: "+2*ig.system.scale+"px";if(void 0===this.unfindable||void 0===this.statusText){var a=this;ig.game.settings.hideInFriendsList?this.O4404():ig.game.O8518.O8175(ig.game.O1257.O2970).done(function(b){b&&!b.hiddenInFriendsList&&
(a.unfindable=b.unfindable,a.statusText=b.status,a.O4404())})}else this.O4404();ig.game.O3957&&ig.game.O3957.O8855("check friends")}else ig.game.O1002.O7063()},update:function(){if(this.isOpen){if(ig.input.pressed("esc")||ig.input.pressed("f1"))ig.input.O6501(),this.close()}else ig.input.pressed("f1")&&this.open()},O9640:function(a){var b="";if(a){for(var c=0;0>=c;c++){var d=this.O8905(a&&a.core,1,c);b+=""==b?"Area ":"&nbsp; ";b+='<span class="pseudolink" onclick="ig.game.portaller.O6417('+(c+')">')+
c+"</span> ("+ig.game.strings.O9955(d)+")"}b+=" &nbsp; All: "+a.all}return b},O8905:function(a,b,c){var d=" ";if(a&&1<=a.length)for(var e=0;e<a.length;e++){var f=a[e];if(f.p==b&&f.a==c&&(f.n||0===f.n)){d=f.n;break}}return d},O4404:function(){var a=this;ig.game.O8518.O8857().done(function(){a.O4840()})},O4840:function(){var a="",b=3*ig.system.scale,c=.3;ig.ua.mobile&&ig.system.width>ig.system.height&&(c=.2);c*=ig.system.width;var d=ig.system.height-6;c=c.limit(145,300);var e=jQuery("#"+ig.game.canvasId).position();
this.pos={x:3,y:3};this.size={x:c,y:d};var f=e.left+b;b=e.top+b;e="left: "+(f+c*ig.system.scale-8*ig.system.scale)+"px; top: "+(b+1*ig.system.scale)+"px; cursor: default; background-color: transparent; border: 0; opacity: .25";a+='<div id="areasOverview" style="font-size: '+(4+2*ig.system.scale)+'px;">'+this.O9640()+"</div>";a+='<div id="'+this.contentId+'" class="contentPart"></div>';a+='<span id="friendsDialogCloseButton" style="'+e+'"><img src="'+ml.Misc.O8283("close-button")+'" alt=""/></span>';
e="";if(ig.game.settings.usePanelColorForOtherDialogs){var g=ig.game.settings.O8941();g&&(e+="background-color: rgba("+g.join(",")+",0.825);")}e+=this.fontStyle;a=jQuery('<div id="'+this.O4950+'" style="'+e+'">'+a+"</div>");a.attr("width",c*ig.system.scale);a.attr("height",d*ig.system.scale);a.css("width",c*ig.system.scale+"px");a.css("height",d*ig.system.scale+"px");a.css("left",f+"px");a.css("top",b+"px");a.css("border-radius","5px");a.appendTo("body");var h=this;ig.game.O9817.O7035().done(function(k){h.totalOnlineDataCache=
k;jQuery("#areasOverview").html(h.O9640(k))});jQuery("#"+this.O4950).scroll(function(){jQuery(this)[0].scrollHeight-jQuery(this).scrollTop()<=jQuery(this).outerHeight()&&h.O3119()}).on("click","#friendsDialogCloseButton",function(){h.O7532()}).on("click",".friendFindLink",function(k){var l=jQuery(k.target).data("id");ig.game.O9817.O5613(l,h).done(function(m){if(m){m=jQuery(k.target).data("name");var n=1==jQuery(k.target).data("exp"),p="1"==jQuery(k.target).data("areavisited"),q=jQuery(k.target).data("areaname");
q&&!p?ig.game.portaller.O9838(q):h.O2625(l,m,n)}})}).on("click",".friendName",function(k){ig.game.sounds.click.play();k=jQuery(k.target).data("id");h.O6133(k)});this.O3119()},mixRgbs:function(a,b){return[Math.floor((a[0]+b[0])/2),Math.floor((a[1]+b[1])/2),Math.floor((a[2]+b[2])/2)]},O7532:function(){ig.game.sounds.click.play();this.close()},close:function(){this.O3607=0;jQuery("#"+this.O4950).remove();ig.game.O8577();this.isOpen=!1},O3119:function(){var a=this;0==this.O3607&&ig.game.O8518.O8175(ig.game.O1257.O2970).done(function(c){c&&
!c.hiddenInFriendsList&&jQuery("#"+a.contentId).prepend(a.O7964(c))});var b=0;ig.game.O8518.O6681(this.O3607,this.O5778,this).done(function(c,d){c.forEach(function(e,f,g){++b<a.O5778&&a.O1917(e,a)});a.O3607++})},O1917:function(a,b){0==jQuery("#sep"+a).length&&(jQuery("#"+b.contentId).append('<div class="separator" style="'+b.O5398+'" id="sep'+a+'"></div>'),ig.game.O8518.O8175(a).done(function(c){c&&!c.hiddenInFriendsList?jQuery("#sep"+a).after(b.O1426(a,c)):jQuery("#sep"+a).remove()}))},O7964:function(a){return this.O1426(ig.game.O1257.O2970,
{name:"Me",online:!0,status:this.statusText,unfindable:this.unfindable,crAreaName:a?a.crAreaName:"",crAreaTotalOnline:a?a.crAreaTotalOnline:""})},O1426:function(a,b){var c=a==ig.game.O1257.O2970,d="",e=ig.game.strings.O9955(b.name);a=ig.game.strings.O9955(a);var f=b.status?ig.game.strings.O9955(b.status):"";f=this.O3800(f);if(c&&!ig.game.settings.hideInFriendsList)d+='<div class="separator" style="'+this.O5398+'"></div>',f||="...",f='<span id="ourStatus" onclick="ig.game.friendsDialog.O8939()">'+
f+"</span>",d+='<a class="friendName" data-id="'+a+'">'+e+"</a>",this.O9272=b.crAreaTotalOnline,b.unfindable?d+='<a class="findableToggler" href="javascript:ig.game.friendsDialog.O5302()">I\'m unfindable</a>':(d+='<span class="friendDistance">',ig.game.O4482?(d+="In "+ig.game.strings.O9955(ig.game.O9720),d=ig.game.O7283?d+' <span style="font-size: 75%; opacity: .7">(can\'t see others here)</span>':d+(b.crAreaTotalOnline?" ("+b.crAreaTotalOnline+")":"")):d=1==ig.game.O4873.O8027?d+this.O6467(ig.game.O4873.currentArea):
d+"In Inner Ring",d+='</span> &nbsp; <a class="findableToggler" href="javascript:ig.game.friendsDialog.O5302()">I\'m&nbsp;findable</a>');else{d+='<a class="friendName" data-id="'+a+'">'+e+"</a>";if(b.online){if(b.location&&!b.unfindable){c=ig.game.O4873.O3963(b.location);var g="";c||(1==b.location.p&&b.location.a?g=b.location.a:b.crAreaName&&(g=ig.game.strings.O9955(b.crAreaName)));e='<a class="friendFindLink pseudolink" data-id="'+a+'" data-name="'+e+'" data-exp="'+b.explored+'" data-areaname="'+
g+'" data-areavisited="'+(b.crAreaGroupVisited?1:0)+'">';g="";c?ig.game.O7283||(g=e+(b.distance?ig.game.strings.O9754(b.distance)+" from me":"")+"</a>"):g=b.crAreaName?"In "+e+ig.game.strings.O9955(b.crAreaName)+"</a>"+(b.crAreaTotalOnline?" ("+b.crAreaTotalOnline+")":""):1==b.location.p?this.O6467(b.location.a,e):"In Inner Ring</a>";""!=g&&(d+='<span class="friendDistance" style="'+(ig.ua.mobile?"line-height: 4em":"")+'">'+g+"</span>")}this.receivedPingsByUserId[a]&&(d+=this.O2514(this.receivedPingsByUserId[a]));
1<=ig.game.O1257.rank&&!ig.game.areaIsLimitedToEditorsOnly&&(d+='&nbsp; <span class="pseudolink pingFriendLink" id="pingFriendLink_'+a+'" onclick="ig.game.friendsDialog.pingFriend(\''+(a+'\')" style="')+(ig.ua.mobile?"line-height: 4em":"")+'">ping&nbsp;with&nbsp;my&nbsp;location</span>')}else d+='<span class="lessImportant lastSeenTime">'+ig.game.strings.O3041(b.lastSeen,void 0," ")+"</span>";this.O1767||(this.O1767=!0,ig.game.O1189.register(ig.game.O1189.types.SAW_FRIEND_ON_FRIENDS_LIST))}f&&(d+=
'<div class="friendStatus">'+f+"</div>");return d='<div id="user_'+a+'" class="friend '+(b.online?"isOnline":"isOffline")+'">'+d+"</div>"},O6467:function(a,b){void 0===b&&(b="");b="In "+b+"Area "+a+(b?"</a>":"");this.totalOnlineDataCache&&(a=this.O8905(this.totalOnlineDataCache&&this.totalOnlineDataCache.core,1,a),b+=" ("+a+")");return b},O5985:function(a,b){this.receivedPingsByUserId[a]={html:b,time:new Date}},O2514:function(a){var b='&nbsp; <br/><span class="pingedYouLog">[pinged you from '+a.html;
b+=" "+ig.game.strings.O6141(a.time,void 0," ");return b+"]</span>"},pingFriend:function(a){jQuery("#pingFriendLink_"+a).css("opacity",1);jQuery("#pingFriendLink_"+a).fadeOut(800,function(){jQuery(this).hide()});ig.game.sounds.ping.play();var b=this;ig.game.O9817.O5613(a,this).done(function(c){c&&ig.game.O7836.O5413(a,b.O9272)})},O3800:function(a){a&&(a=ig.game.strings.O9041(a),a=ig.game.strings.O5489(a),a=ig.game.strings.O4216(a),a=ig.game.strings.O5911(a,!0),a=ig.game.strings.O2025(a),a=ig.game.strings.O7811(a,
!0,!0),a=ig.game.strings.O4409(a));return a},O5302:function(){var a=this;ig.game.sounds.click.play();ig.game.O9817.O8211(this).done(function(b){a.unfindable=b.unfindable;a.O4272()})},O2625:function(a,b,c){this.close();c&&(c=ig.game.O8518.O1791(a),ig.game.userMapDialog.O6167(c.location));ig.game.O2453.O8449(a,b)},O8939:function(){var a="";this.statusText&&(a=ig.game.strings.O9955(this.statusText));a='<input type="text" value="'+a+'" placeholder="Your text" id="ourStatus" maxlength="'+this.O1960+'" style="'+
this.fontStyle+'" />';jQuery("#ourStatus").replaceWith(a);jQuery("#ourStatus").select();var b=this;jQuery("#ourStatus").keyup(function(c){13==c.keyCode&&b.O8478();27==c.keyCode&&b.O4272()});jQuery("#ourStatus").focusout(function(c){b.O4272()})},O8478:function(){var a=this,b=jQuery("#ourStatus").val();ig.game.O9817.O5298(b).done(function(c){a.statusText=ig.game.strings.trim(b);a.O4272();ig.game.sounds.success.play()})},O4272:function(){var a=this;ig.game.O8518.O8175(ig.game.O1257.O2970).done(function(b){b&&
!b.hiddenInFriendsList&&jQuery("#user_"+ig.game.O1257.O2970).replaceWith(a.O7964(b))})},O6133:function(a){ig.ua.phone||ig.ua.mobile&&ig.system.O6256()?(this.close(),ig.game.playerDialog.openForPlayerId(a)):ig.game.playerDialog.isOpen&&ig.game.playerDialog.O7723&&ig.game.playerDialog.O7723.id==a?ig.game.playerDialog.close():ig.game.playerDialog.openForPlayerId(a)}})});ig.baked=!0;
ig.module("game.ui.statsdialog").requires("game.ui.components.uidialog").defines(function(){window.StatsDialog=UIDialog.extend({data:{},isOpen:!1,O3062:null,O4950:"statsDialog",idPrefix:"i",backupKey:"areaStatsBackup",open:function(){if(!this.isOpen){this.isOpen=!0;this.data={};this.timer=new ml.Timer;jQuery('<div id="'+this.O4950+'" style="left: '+(40*ig.system.scale+"px; width: "+(ig.system.width*ig.system.scale-80*ig.system.scale)+"px;font-size: "+(4+2*ig.system.scale)+'px;"></div>')).appendTo("body");
this.loadBackupIfNeeded();this.O2621();this.O2598();this.O4547();var a=this;jQuery("#"+this.O4950).on("click",".personName",function(b){ig.game.sounds.click.play();b=jQuery(b.target).data("id");a.O6133(b)})}},O6133:function(a){ig.game.playerDialog.isOpen&&ig.game.playerDialog.O7723&&ig.game.playerDialog.O7723.id==a?ig.game.playerDialog.close():ig.game.playerDialog.openForPlayerId(a)},O2621:function(){var a=ig.game.O5119.player;if(a)for(var b=0;b<a.length;b++){var c=a[b];c._killed||this.O8354(c)}},
O8354:function(a){if(a&&a.O2970){var b=this.idPrefix+a.O2970;this.data[b]||(this.data[b]={},this.data[b].name=a.screenName,a.attachments&&(a.attachments.h&&(this.data[b].held={},this.data[b].held[a.attachments.h.name]=1),a.attachments.m&&(this.data[b].mounted=a.attachments.m.name),a.attachments.w&&(this.data[b].worn=a.attachments.w.name)))}},addStat:function(a,b,c,d){var e=["died","joined"];if(-1==="gathered removed built mounted worn held died joined".split(" ").indexOf(b))console.warn("Unsupported statType "+
b);else{var f=this.idPrefix+a;if(!this.data[f]){a=ml.Misc.O4671(a);if(!a)return;this.data[f]={name:a.screenName}}var g=this.data[f];if(c||0<=e.indexOf(b))this.O4285(g,b,c);else{var h=ig.game.O4261.getItemBasic(d,"ui_std");if(h){var k=this;h.imagesBeingGenerated.done(function(){k.O4285(g,b,h.name)})}}}},O4285:function(a,b,c){c=ig.game.strings.O7686(c,22,!0);switch(b){case "gathered":case "held":a[b]||(a[b]={});a[b][c]||(a[b][c]=0);a[b][c]++;break;case "removed":case "built":case "mounted":case "worn":a[b]=
c;break;case "died":case "joined":case "hitsGiven":case "hitsReceived":if(void 0===a[b]||null===a[b])a[b]=0;a[b]++}this.O4547()},O4547:function(){var a='<table><tr class="topRow"><th id="statsTitle">'+(this.O8062(this.O3062)+"</th><th>Gathered</th><th>Held</th><th>Last Worn &amp; Mounted</th><th>Last Built &amp; Removed</th><th>Died</th><th>Joined</th></tr>");var b=!1,c;for(c in this.data){var d=this.data[c],e=ig.game.strings.O9955(c.substr(1)),f=ig.game.strings.O9955(d.name);a+="<tr"+(b?' class="alternate"':
"")+">";a+='<th class="statsName"><a data-id="'+e+'" class="personName">'+f+"</a></th>";a+="<td>"+this.O8013(d.gathered)+"</td>";a+="<td>"+this.O8013(d.held)+"</td>";a+="<td>"+this.O8065(d)+"</td>";a+="<td>"+this.O9892(d)+"</td>";a+="<td>"+(d.died?d.died:"")+"</td>";a+="<td>"+(d.joined?d.joined:"")+"</td>";a+="</tr>";b=!b}a+="</table>";jQuery("#"+this.O4950).html(a)},O8065:function(a){var b=[];a.worn&&b.push("Worn "+ig.game.strings.O9955(a.worn));a.mounted&&b.push("Mounted "+ig.game.strings.O9955(a.mounted));
return b.join("<br/>")},O9892:function(a){var b=[];a.removed&&b.push("-"+ig.game.strings.O9955(a.removed));a.built&&b.push("+"+ig.game.strings.O9955(a.built));return b.join("<br/>")},O8013:function(a){var b="";a&&(b=JSON.stringify(a),b=ig.game.strings.replaceAll(b,"{",""),b=ig.game.strings.replaceAll(b,"}",""),b=ig.game.strings.replaceAll(b,'"',""),b=ig.game.strings.replaceAll(b,":",": "),b=ig.game.strings.O9955(b),b=ig.game.strings.replaceAll(b,",","<br/>"));return b},update:function(){this.isOpen&&
this.O2598()},O2598:function(){var a=Math.floor(this.timer.delta());if(a!=this.O3062){this.O3062=a;var b=""+this.O8062(a);jQuery("#statsTitle").html(b);a%2||this.O6928()}},O8062:function(a){return String(60>a?a+" seconds":Math.floor(a/60)+":"+a%60)},close:function(){this.O3062=0;this.timer=null;jQuery("#"+this.O4950).remove();ig.game.O8577();localStorage.removeItem(this.backupKey);this.isOpen=!1},O6928:function(){var a=0,b;for(b in this.data)a++;0<a?(a=JSON.stringify(this.data),ig.game.O5285.setItem(this.backupKey,
a)):null===localStorage.getItem(this.backupKey)&&localStorage.removeItem(this.backupKey)},loadBackupIfNeeded:function(){var a=localStorage.getItem(this.backupKey);a&&(this.data=JSON.parse(a),localStorage.removeItem(this.backupKey))}})});ig.baked=!0;
ig.module("game.ui.holderdialog").requires("game.ui.components.uidialog").defines(function(){window.HolderDialog=UIDialog.extend({isOpen:!1,holderId:null,animSheet:null,pos:{x:0,y:0},size:{x:null,y:null},backTileCount:{x:null,y:null},defaultBackTileCount:{x:8,y:7},O7487:8,O5028:!1,O1904:null,items:[[]],O8753:0,O7563:0,pageable:!1,O2440:!1,attributes:{},O7760:0,O7296:[0,0,0,1],O3566:null,O9554:!1,O9367:!0,backgroundAnim:null,O6097:null,O9990:{x:null,y:null},O7431:!1,O2702:!1,O8699:null,O4919:{},O2528:{},
screenPosAtStart:{x:null,y:null},O5363:!1,O8516:null,O4940:null,O5636:{},O5041:!1,O8589:null,O8986:!1,O8634:null,O4907:!1,open:function(a,b,c,d,e,f,g){if(!this.isOpen&&ig.game.O1257&&0==ig.game.O1257.vel.x){ig.game.writableDialog&&ig.game.writableDialog.isOpen&&!ig.game.writableDialog.O9701&&ig.game.writableDialog.close();this.O8986=!!e;this.O8688();ig.game.O1257.vel.y=0;ig.input.O6501();ig.game.O1257.accel={x:0,y:0};this.O5028=d||!(!b||!b.parentPanel);this.O5636={x:Math.round(ig.game.O1257.pos.x),
y:Math.round(ig.game.O1257.pos.y)};this.screenPosAtStart=ig.game.O4507(ig.game._rscreen);this.O4919={};this.O2528={};this.O8634=f;this.O4907=!!g;var h=ig.game.O4261.getItemBasic(a,"ui_hd4"),k=this;h&&h.imagesBeingGenerated.done(function(){ig.game.O9817.O2872(a).done(function(l){l&&(k.O3218(h,a,l,b,c),k.isOpen=!0)})})}},O3218:function(a,b,c,d,e){this.O9554=!!c.isCreator;this.O1151(c.contents);a.attributes&&(this.attributes=ig.game.O4507(a.attributes));this.O8753=0;c=this.items.length;this.pageable=
this.attributes.upDownPaging||this.attributes.leftRightPaging;this.attributes.openOnLastPage&&3<=c&&this.pageable&&(this.O8753=c-2);void 0!==this.O8634&&null!==this.O8634&&(this.O8753=this.O8634);void 0!==this.O8634&&(delete this.attributes.upDownPaging,delete this.attributes.leftRightPaging);this.O7563=this.O8753;this.holderId=b;this.animSheet=ig.game.entityManager.getAnimationForEntity(a,0,0);this.O1904=d;this.O2440=!(a.attributes&&a.attributes.nonSelectable);a.rgb&&(this.O7296=a.rgb.split(","),
this.O7296.push(1));this.O7760=0;this.attributes.border?this.O7760=1:this.attributes.thickBorder&&(this.O7760=3);this.O4347(e);this.O8040(a.attributes,a.backTileCount);this.O5363=10<=c||100<=this.getItemCount();this.O6766();this.O3043();this.O1878()},O1878:function(){if(this.O2440&&!this.O5028&&!this.O6166()){var a=this.O5788();a&&(a.isSelected=!0)}},O6166:function(){var a=null;if(this.O9194())for(var b=0;b<this.items[this.O8753].length;b++){var c=this.items[this.O8753][b];if(c.isSelected){a=c;break}}return a},
O6766:function(){this.backgroundAnim=[];for(var a=0;a<this.backTileCount.x;a++){this.backgroundAnim[a]=[];for(var b=0;b<this.backTileCount.y;b++)this.backgroundAnim[a][b]=new ml.Animation(this.animSheet,1,[2]),this.attributes.changingBack&&ig.game.chance(50)&&(this.backgroundAnim[a][b].flip.x=!this.backgroundAnim[a][b].flip.x)}},O9202:function(){var a=ig.game.O8159.pageButtonUp.width,b=ig.game.O8159.pageButtonUp.height;if(this.attributes.upDownPaging){var c=this.pos.x+this.size.x-5-a;this.O4919={x:c,
y:this.pos.y+5,width:a,height:b};this.O2528={x:c,y:this.pos.y+this.size.y-5-b,width:a,height:b};1==this.backTileCount.y&&(this.O4919.x-=a)}else this.attributes.leftRightPaging&&(c=this.pos.y+this.size.y-5-b,this.O4919={x:this.pos.x+5,y:c,width:a,height:b},this.O2528={x:this.pos.x+this.size.x-5-a,y:c,width:a,height:b},1==this.backTileCount.x&&(this.O4919.y-=b))},getItemCount:function(){var a=0;if(this.items)for(var b=0;b<this.items.length;b++)this.items[b]&&this.items[b].length&&(a+=this.items[b].length);
return a},O3043:function(){if(this.items)for(var a=0;a<this.items.length;a++)if(this.items[a]&&this.items[a].length)for(var b=0;b<this.items[a].length;b++){var c=this.items[a][b];a!=this.O8753&&this.O5363?(c.entity&&c.entity.tidyUp&&c.entity.tidyUp(),delete c.entity):c.entity||this.O4533(c)}},O4347:function(a){this.O5028||!this.O1904?a?ig.game.sounds.O9961(a):ig.game.sounds.shortWhoosh.play():this.O1904&&this.O1904.soundId?ig.game.sounds.playIncludedSound(this.O1904):ig.game.sounds.shortWhoosh.play()},
O8040:function(a,b){this.backTileCount=ig.game.O4507(this.defaultBackTileCount);b&&(a=String(b).split(","),this.backTileCount={x:parseInt(a[0]),y:parseInt(a[1])});this.size.x=this.backTileCount.x*ig.game.O9925;this.size.y=this.backTileCount.y*ig.game.O9925;this.O8010()},O4533:function(a){var b=ig.game.O4261.getItemBasic(a.id,"ui_hd2"),c=this;b.imagesBeingGenerated.done(function(){a.rot=void 0!=a.rot?a.rot:0;a.flip=void 0!=a.flip?a.flip:0;b.rot=a.rot;b.flip=a.flip;var d={thingTypeId:b.id,flip:b.flip,
attributes:b.attributes,animSheet:ig.game.entityManager.getAnimationForEntity(b,b.rot,b.flip),O9367:!0,O9113:c.O8986};ig.game.entityManager.O5746(b.O4927(),b,d,!0);var e={x:c.pos.x+ig.game._rscreen.x+a.x,y:c.pos.y+ig.game._rscreen.y+a.y};c.O2164(e);var f="Entity"+ig.game.strings.toUpperCaseFirst(b.base.toLowerCase());ig.global[f]||(f="EntityDefault");a.entity=new ig.global[f](e.x,e.y,d);a.name=b.name;a.base=b.base;a.attributes=ig.game.O4507(b.attributes);a.selectable=!(b.attributes&&b.attributes.nonSelectable);
c.O2440||(a.selectable=!1);a.rotatable=b.rotatable;a.flippable=b.flippable;a.textData=b.textData;a.entity.update()})},O8010:function(){var a=ig.system.width/2,b=ig.system.height/2;this.O5028?a=ig.system.width-this.size.x/2-60:ig.game.O1257&&(a=ig.game.O1257.pos.x-ig.game._rscreen.x,b=ig.game.O1257.pos.y-ig.game._rscreen.y);this.pos={x:a-this.size.x/2,y:b-this.size.y/2};this.O4907&&(this.pos.x=10);this.O5028?(this.pos.x+=this.screenPosAtStart.x-ig.game._rscreen.x,this.pos.y+=this.screenPosAtStart.y-
ig.game._rscreen.y):(this.pos.y-=Math.floor(5.5*ig.game.O9925),6<=this.backTileCount.y&&(this.pos.y+=ig.game.O9925));5>this.pos.y&&(this.pos.y+=Math.abs(this.pos.y-5));this.O9202()},update:function(){this.isOpen&&(this.O9589(),this.O8010(),this.O8525(),this.O2269(),ig.game.O1795||!ig.game.isEditorHere&&!this.O9554?this.O4210():this.O9049(),this.O8982(),this.O7715(),this.O6142(),this.O5388())},O5388:function(){ig.game.O1257&&this.O5636.x==Math.round(ig.game.O1257.pos.x)&&this.O5636.y==Math.round(ig.game.O1257.pos.y)||
this.close()},O9589:function(){this.O8753!=this.O7563&&(this.O7563=this.O8753,this.O5363&&this.O3043(),this.O1878())},O7715:function(){var a={pos:{x:this.pos.x+ig.game._rscreen.x,y:this.pos.y+ig.game._rscreen.y},size:ig.game.O4507(this.size)};ig.game.decorator.O7715(a,this)},O2269:function(){if(this.O9194())for(var a=this.items[this.O8753].length-1;0<=a;a--){var b=this.items[this.O8753][a];b&&(b.listId||(b.listId=ig.game.strings.O4619()),b.entity&&b.entity.update())}},O1490:function(a){var b=!1;if(this.O9194())for(var c=
this.items[this.O8753].length-1;0<=c;c--){var d=this.items[this.O8753][c];if(d.entity&&(this.O9554||d.selectable)&&(d.isHovered=!1,!b)){var e=d.entity;d.isHovered=a.x>=e.pos.x&&a.x<=e.pos.x+e.size.x&&a.y>=e.pos.y&&a.y<=e.pos.y+e.size.y;d.isHovered&&(b=!0)}}},O957:function(a){var b=ig.input.mouse;return b.x>=a.x&&b.x<=a.x+a.width&&b.y>=a.y&&b.y<=a.y+a.height},O9362:function(){var a=-1;if(this.O9194())for(var b=0;b<this.items[this.O8753].length;b++)if(this.items[this.O8753][b].isHovered){a=b;break}return a},
O9373:function(){var a=null;if(!ig.game.itemContextMenu.isOpen&&this.O9194())for(var b=0;b<this.items[this.O8753].length;b++){var c=this.items[this.O8753][b];if(c.isHovered){a=c;break}}return a},O4210:function(){if(!ig.game.itemContextMenu.isOpen&&(this.O1490(ig.game.O4774.O2478()),ig.game.O4774.O4920())){var a=this.O9373();a&&(ig.game.O4774.O6730(),this.O1174(a),ig.game.sounds.shortWhoosh.play())}},O9049:function(){if(!ig.game.O3199&&!ig.game.itemContextMenu.isOpen){var a=ig.game.O4774.O2478(),b=
ig.input.state("click"),c=-1,d=-1;if(!this.O3566){this.O1490(a);var e=this.O9362();0<=e&&(ig.game.O4774.O4920()&&!ig.game.O1795&&(this.O9554&&ig.input.state("ctrl")?(ig.game.O4774.O6730(),-1==d&&(d=e)):this.items[this.O8753][e].O1422||(c=e)),delete this.items[this.O8753][e].O1422)}0<=c?(c=this.items[this.O8753].splice(c,1)[0],ig.input.state("shift")&&this.attributes.snapToGrid&&(this.O5041=!0),c.isDragged=!0,"boostDragInfo"==ig.game.alertDialog.contextId&&ig.game.alertDialog.close(),this.O6097=new ml.Timer,
this.O9990=ig.game.O4507(a),c.isSelected=!1,this.O1981(),c.offsetOnDrag={x:0,y:0},c.entity&&c.entity.pos&&(c.offsetOnDrag={x:c.entity.pos.x-a.x,y:c.entity.pos.y-a.y}),ig.game.sounds.shortWhoosh.play(),this.items[this.O8753]||(this.items[this.O8753]=[]),this.items[this.O8753].push(c),this.O3566=c):0<=d&&this.O8669(d);this.O3566&&(c=this.O3566.offsetOnDrag,this.O3566.entity&&(this.O3566.entity.pos={x:a.x+c.x,y:a.y+c.y}),ig.game.panelSet&&1===ig.game.panelSet.tabState&&ig.game.panelSet.O6777.O6905(),
b||(delete this.O3566.isDragged,delete this.O3566.offsetOnDrag,a=this.O9990&&3>=ml.Misc.O8674(a,this.O9990)&&this.O6097&&.3>=this.O6097.delta(),this.O9990=this.O6097=null,this.O1981(),this.isSelected=!0,this.O3566.isHovered=!1,b=this.O1176(),c=a||!this.O9554||!b,a?this.O8516==this.O3566.listId&&this.O4940&&.5>=this.O4940.delta()&&ig.ua.mobile&&this.O9554?(this.O3505(),this.O8669(this.O3512(this.O3566.listId)),this.O4940=this.O8516=null):(this.O5528(this.O3566),this.O8516=this.O3566.listId,this.O4940=
new ml.Timer):this.O4940=this.O8516=null,this.O3566&&(b||this.O6434(this.O3566),c?this.O3566.entity&&(this.O3566.entity.pos.x=this.pos.x+ig.game._rscreen.x+this.O3566.x,this.O3566.entity.pos.y=this.pos.y+ig.game._rscreen.y+this.O3566.y):(this.O3566.entity&&(this.O3566.entity.pos.x=Math.round(this.O3566.entity.pos.x),this.O3566.entity.pos.y=Math.round(this.O3566.entity.pos.y)),a=this.O2164(this.O3566.entity.pos),this.O3566.x=Math.round(this.O3566.entity.pos.x-this.pos.x-ig.game._rscreen.x),this.O3566.y=
Math.round(this.O3566.entity.pos.y-this.pos.y-ig.game._rscreen.y),a&&(this.O3566.entity=null,this.O4533(this.O3566)),this.O1683()),this.O3566=null)))}},O8669:function(a){0<=a&&(this.O3566&&(this.O3566=null),this.items[this.O8753].splice(a,1),ig.game.sounds.bin.play(),this.O1683(!0))},O3512:function(a){var b=-1;if(this.O9194())for(var c=0;c<this.items[this.O8753].length;c++)if(this.items[this.O8753][c].listId==a){b=c;break}return b},O1981:function(){if(this.O9194())for(var a=this.items[this.O8753].length-
1;0<=a;a--){var b=this.items[this.O8753][a];b.isSelected&&delete b.isSelected}},O2164:function(a){var b=!1;if(this.attributes.snapToGrid){b=ig.game.O4507(a);var c=ig.game.O2953,d=a.x-this.pos.x-ig.game._rscreen.x,e=a.y-this.pos.y-ig.game._rscreen.y;d=Math.round(d/c)*c;e=Math.round(e/c)*c;a.x=d+this.pos.x+ig.game._rscreen.x;a.y=e+this.pos.y+ig.game._rscreen.y;b=a.x!=b.x||a.y!=b.y}return b},O6434:function(a){if(this.O8986&&ig.game.boostDialog&&ig.game.boostDialog.O1497())ig.game.boostDialog.O6441(a);
else if(ig.game.isEditorHere)if(ig.game.panelSet.O7518())if(ig.game.panelSet.O2486()||2==ig.game.panelSet.tabState&&ig.game.panelSet.O3303())this.close(),ig.game.painter&&ig.game.painter.O4466(a.id,a.base,a.name);else{if(1==ig.game.panelSet.tabState){var b=ig.game.panelSet.O6777.O3457({x:ig.input.mouse.x,y:ig.input.mouse.y+ig.game.panelSet.O6777.O1466});ig.game.O7747.O1015(a.id,b)}}else"INTERMOT"!=a.base&&(b={x:Math.round(ig.input.mouse.x),y:Math.round(ig.input.mouse.y)},this.O5041?(this.O9717(b),
this.O5041=!1):(b=ig.game.O6112.O8353(b.x,b.y),this.O2330(a,b)))},O9717:function(a){var b=0,c;if(this.O9194())for(var d=this.items[this.O8753].length-1;0<=d;d--)if(c=this.items[this.O8753][d],c.selectable)if(c.selected)this.O2330(c,ig.game.O6112.O8353(a.x,a.y));else{b+=ig.game.O6112.queuePerformDelayMs;var e=a.x+c.x-this.O3566.x,f=a.y+c.y-this.O3566.y;this.O4537(this.O2888(c),ig.game.O6112.O8353(e,f),!0,b)}},O4537:function(a,b,c,d){var e=this;setTimeout(function(){e.O2330(a,b,c,d)},d)},O2888:function(a){return{id:a.id,
x:a.x,y:a.y,rot:a.rot,flip:a.flip,base:a.base,selectable:a.selectable,selected:a.selected}},O2330:function(a,b,c){ig.game.mapPlacementValidation.O9195(a,c)&&ig.game.O6112.O2400(a.id,a.rot,a.flip,b,void 0,c)&&ig.game.O6112.O8598("build",a.id,b.x,b.y,a.rot,a.flip)},O8982:function(){if(ig.game.O9971())ig.input.O6501(),this.O8481("left");else if(ig.game.O8339())ig.input.O6501(),this.O8481("right");else if(ig.game.O9170())ig.input.O6501(),this.O8481("up");else if(ig.game.O4146())ig.input.O6501(),this.O8481("down");
else if(ig.input.pressed("enter")||ig.game.O7993())ig.input.O6501(),this.O1174(this.O8440()),this.close();if(this.pageable&&this.O1176()){var a=ig.game.O4774.O4920();if(ig.input.pressed("wheelup")||a&&this.O4919.O8112&&this.O957(this.O4919))0<this.O8753&&(this.O5179(),this.O8753--,ig.game.sounds.click.play()),ig.game.O4774.O6730();else if(ig.input.pressed("wheeldown")||a&&this.O2528.O8112&&this.O957(this.O2528))this.O8753<this.items.length-1&&(this.O5179(),this.O8753++,ig.game.sounds.click.play()),
ig.game.O4774.O6730()}this.O3566&&this.O3566.isDragged&&ig.game.O4774.O4920()&&ig.input.O3657()&&(ig.game.O4774.O6730(),this.O9484(this.O3566));if(ig.game.O4774.O3044())if(this.O3566&&this.O3566.isDragged)this.O9484(this.O3566);else if(a=this.O9373()){var b=ig.game.O4261.getItemBasic(a.id,"ui_hd3");b&&ig.game.itemContextMenu.O3076(a,b,this.getItemScreenPos(a))}if(ig.input.pressed("esc")||ig.game.O7993()&&!this.O2440)ig.input.O6501(),this.close();ig.game.O1257||this.close()},O9484:function(a){if(a.rotatable){a.flippable?
3==a.rot?(a.flip=a.flip?0:1,a.rot=0):a.rot++:a.rot=3==a.rot?0:a.rot+1;var b=ig.game.O4507(a.entity.pos);a.entity=null;this.O4533(a);a.entity&&(a.entity.pos=b);ig.game.sounds.shortWhoosh.play()}},getItemScreenPos:function(a){return{x:this.pos.x+a.x,y:this.pos.y+a.y}},O5528:function(a){if(ig.ua.mobile){if(!this.O8589){var b=this;this.O8589=setTimeout(function(){b.O1174(a)},400)}}else this.O1174(a)},O1174:function(a){if(a)if(ig.game.isEditorHere||ig.game.O9677&&"INTERACT"!=a.base||!this.O8986)ig.game.O1795&&
ig.game.painter.O2891()&&ig.game.alertDialog&&ig.game.alertDialog.isOpen?ig.game.O7747.O1618(a.id,null,a.name,a.base):(a.entity&&"INTERACT"==a.base&&a.entity.O9974(!0),ig.game.O7747.O9935(a.id),ig.game.O2116.O7884(ig.game.O1257,"holder-selects",a.name));else{var b="WRITABLE READABLE HOLDER MEDIUM MUSIC SOUND PLACENAME VIEWABLE HELPER STACKWEARB".split(" ");0<=["DYNATHING","STACKWEAR"].indexOf(a.base)?ig.game.attachmentManager.O3248(a.entity)?ig.game.O5058.O8943("editorOnly"):ig.game.O7747.O9935(a.id):
0<=b.indexOf(a.base)?ig.game.O7747.O9935(a.id):ig.game.O5058.O8943("editorOnly")}},O8481:function(a){if(this.attributes.nonSelectable)this.close();else{var b=this.O6435(a,!0);b||=this.O6435(a,!1);if(!b){var c=this.O4919.O8112,d=this.O2528.O8112;switch(a){case "left":c&&this.attributes.leftRightPaging&&this.O8753--;break;case "up":c&&this.attributes.upDownPaging&&this.O8753--;break;case "right":d&&this.attributes.leftRightPaging&&this.O8753++;break;case "down":d&&this.attributes.upDownPaging&&this.O8753++}}this.O8753==
this.O7563&&(b?(this.O1981(),b.isSelected=!0):this.close())}},O6435:function(a,b){var c=null,d=this.O8495();if(0<=d){var e=null,f=this.items[this.O8753][d];if(this.O9194())for(var g=this.items[this.O8753].length-1;0<=g;g--){var h=this.items[this.O8753][g];if(g!=d&&h.entity&&h.selectable&&this.O443(f.entity,h.entity,a,b)){var k=f.entity.O2144(h.entity);if(null==e||k<e)c=h,e=k}}}return c},O5788:function(){var a={x:this.size.x/2,y:this.size.y/2},b=null,c=null;if(this.O9194())for(var d=0;d<this.items[this.O8753].length;d++){var e=
this.items[this.O8753][d];if(e.selectable){var f=ml.Misc.O8674(a,{x:e.x,y:e.y});if(null==c||f<c)b=e,c=f}}return b},O443:function(a,b,c,d){var e=!1,f=a.pos.x+a.size.x/2;a=a.pos.y+a.size.y/2;var g=b.pos.x+b.size.x/2;b=b.pos.y+b.size.y/2;var h=Math.abs(f-g),k=Math.abs(a-b);switch(c){case "left":e=g<f&&(20>=k||!d);break;case "right":e=g>f&&(20>=k||!d);break;case "up":e=b<a&&(20>=h||!d);break;case "down":e=b>a&&(20>=h||!d)}return e},O8440:function(){var a=this.O8495();return 0<=a?this.items[this.O8753][a]:
null},O8495:function(){var a=-1;if(this.O9194())for(var b=this.items[this.O8753].length-1;0<=b;b--){var c=this.items[this.O8753][b];if(c.isSelected&&c.entity){a=b;break}}return a},draw:function(){this.isOpen&&(this.O2793(),this.O4614(),this.O2934(),this.O3265(),this.O7026(),this.drawEntityLabels(),this.O2848())},O7026:function(){if(this.O9194())for(var a=0;a<this.items[this.O8753].length;a++){var b=this.items[this.O8753][a];b.entity&&b.entity.isLiquid&&b.entity.draw(!0)}},O2793:function(){for(var a=
ig.game.O4507(this.pos),b=0;b<this.backTileCount.x;b++)for(var c=0;c<this.backTileCount.y;c++){var d=a.x+b*ig.game.O9925,e=a.y+c*ig.game.O9925;this.attributes.changingBack?ig.game.chance(.5)&&(this.backgroundAnim[b][c].flip.x=!this.backgroundAnim[b][c].flip.x):this.attributes.nonRandomBack||(this.backgroundAnim[b][c].flip.x=0===(b+c+this.O8753)%(this.attributes.patternedBack?2:3));this.backgroundAnim[b][c].flip.x&&(d-=10);this.backgroundAnim[b][c].draw(d,e)}},O8525:function(){this.O4919.O8112=this.pageable&&
0<this.O8753;this.O2528.O8112=this.pageable&&this.O8753<this.items.length-1},O2934:function(){this.O4919.O8112&&(this.attributes.upDownPaging?ig.game.O8159.O5112(this.O4919.x,this.O4919.y,.5):this.attributes.leftRightPaging&&ig.game.O8159.O6783(this.O4919.x,this.O4919.y,.5));this.O2528.O8112&&(this.attributes.upDownPaging?ig.game.O8159.O9461(this.O2528.x,this.O2528.y,.5):this.attributes.leftRightPaging&&ig.game.O8159.O9451(this.O2528.x,this.O2528.y,.5))},O4614:function(){if(1<=this.O7760){var a={top:{x:this.pos.x,
y:this.pos.y,width:this.size.x,height:this.O7760},left:{x:this.pos.x,y:this.pos.y,width:this.O7760,height:this.size.y},right:{x:this.pos.x+this.size.x-this.O7760,y:this.pos.y,width:this.O7760,height:this.size.y},bottom:{x:this.pos.x,y:this.pos.y+this.size.y-this.O7760,width:this.size.x,height:this.O7760}};ig.system.context.fillStyle="rgba("+this.O7296.join(",")+")";for(var b in a)this.fillRect(a[b]);3==this.O7760&&this.O4878()}},O4878:function(){var a=ig.system.context,b=this.pos.x*ig.system.scale,
c=this.pos.y*ig.system.scale,d=this.size.x*ig.system.scale,e=this.size.y*ig.system.scale,f=8*ig.system.scale;a.beginPath();a.moveTo(b,c);a.lineTo(b+f,c);a.lineTo(b,c+f);a.closePath();a.fill();a.beginPath();a.moveTo(b+d,c);a.lineTo(b+d,c+f);a.lineTo(b+d-f,c);a.closePath();a.fill();a.beginPath();a.moveTo(b,c+e);a.lineTo(b+f,c+e);a.lineTo(b,c+e-f);a.closePath();a.fill();a.beginPath();a.moveTo(b+d,c+e);a.lineTo(b+d-f,c+e);a.lineTo(b+d,c+e-f);a.closePath();a.fill()},fillRect:function(a){ig.system.context.fillRect(a.x*
ig.system.scale,a.y*ig.system.scale,a.width*ig.system.scale,a.height*ig.system.scale)},O3265:function(){if(this.O9194())for(var a=0;a<this.items[this.O8753].length;a++){var b=this.items[this.O8753][a];b.entity&&b.entity.draw()}},O2848:function(){if(this.O9194())for(var a=0;a<this.items[this.O8753].length;a++){var b=this.items[this.O8753][a];b.entity&&b.entity.hasSpeech&&b.entity.O2848()}},O9194:function(){return this.items&&this.items[this.O8753]&&0<=this.items[this.O8753].length},drawEntityLabels:function(){if(this.O9194())for(var a=
0;a<this.items[this.O8753].length;a++){var b=this.items[this.O8753][a],c=b.isHovered&&b.selectable&&!b.isDragged||b.isSelected;b.entity&&c&&this.O6657(ig.game.strings.O7686(b.name,25),b.entity.pos.x+b.entity.size.x/2-ig.game.screen.x,b.entity.pos.y+.75*b.entity.size.y-ig.game.screen.y,1)}},O6657:function(a,b,c,d){var e=ig.Font.ALIGN.CENTER;ig.system.context.globalAlpha=.35*d;ig.game.blackSmallFont.draw(a,b-1,c,e);ig.game.blackSmallFont.draw(a,b+1,c,e);ig.game.blackSmallFont.draw(a,b,c-1,e);ig.game.blackSmallFont.draw(a,
b,c+1,e);ig.system.context.globalAlpha=.85*d;ig.game.whiteSmallFont.draw(a,b,c,e)},addItem:function(a,b,c){var d=["MIFT"],e=ig.game.O4261.getItemBasic(a,"ui_hd1");e&&-1===d.indexOf(e.base)?(this.O1490(ig.game.O4774.O2478()),(d=this.O9373())&&0<=ig.game.O9643.indexOf(d.base)?ml.Misc.O4650(a,d.id,d.base):this.O9554&&a!=this.holderId&&(e=ig.game.O4774.O2478(),d=Math.round(e.x-this.pos.x-ig.game.screen.x-ig.game.O2953),e=Math.round(e.y-this.pos.y-ig.game.screen.y-ig.game.O2953),a={id:a,x:d,y:e,rot:b,
flip:c,O1422:!0},this.items[this.O8753]||(this.items[this.O8753]=[]),a=this.items[this.O8753].push(a),this.O4533(this.items[this.O8753][a-1]),this.O9194()&&1==this.items[this.O8753].length&&!this.O2528.O8112&&this.items.push([]),this.O1683(),ig.game.sounds.putdown.play(),this.attributes.snapToGrid&&ig.game.O1189.register(ig.game.O1189.types.PLACED_SOMETHING_IN_GRID_HOLDER))):ig.game.sounds.nocando.play()},O8940:function(){return this.defaultBackTileCount.x+","+this.defaultBackTileCount.y},O1151:function(a){this.items=
[[]];this.O8753=0;if(a&&1<=a.length)for(var b=this.O3754(a),c=0;c<=b;c++)for(var d=this.O8803(a,c),e=0;e<=d;e++)for(var f=0;f<a.length;f++){var g=a[f];g.z==e&&g.pageNo==c&&(g={id:g.itemId,x:g.x,y:g.y,rot:g.rot,flip:g.flip},this.items[c]||(this.items[c]=[]),this.items[c].push(g))}this.O9554&&this.items.push([])},O3754:function(a){for(var b=-1,c=0;c<a.length;c++){var d=a[c];d.pageNo>b&&(b=d.pageNo)}return b},O8803:function(a,b){for(var c=-1,d=0;d<a.length;d++){var e=a[d];e.pageNo==b&&e.z>c&&(c=e.z)}return c},
O6142:function(){this.O7431&&this.O8699&&10<=this.O8699.delta()&&(!this.O3566||!this.O3566.isDragged)&&this.O5179()},O1683:function(a){this.O7431=!0;this.O2702=!!a;this.O8699||(this.O8699=new ml.Timer)},O8688:function(){this.O7431=!1;this.O8699=null;this.O2702=!1},O5179:function(){if(this.O9554&&this.O7431){var a=[];if(this.O9194()){for(var b=!1,c=0;c<this.items[this.O8753].length&&!b;c++){var d=this.items[this.O8753][c];b||=!d.id;if(!b){var e={itemId:d.id,x:d.x,y:d.y,z:c,pageNo:this.O8753};d.rot&&
(e.rot=d.rot);d.flip&&(e.flip=d.flip);a.push(e)}}!b&&a&&0==a.length&&!this.O2702&&(b=!0);b||ig.game.O9817.O8993(this.holderId,this.O8753,a).done(function(f){})}this.O8688()}},O8655:function(){if(this.items&&this.items.length)for(var a=0;a<this.items.length;a++)if(this.items[a]&&this.items[a].length)for(var b=0;b<this.items[a].length;b++){var c=this.items[a][b];c.entity&&c.entity.tidyUp&&c.entity.tidyUp();delete c.entity}},O3505:function(){this.O8589&&(clearTimeout(this.O8589),this.O8589=null)},close:function(){this.isOpen&&
(this.O5041=!1,this.O4940=this.O8516=null,this.O8634=void 0,this.O5179(),this.O8655(),this.items=[[]],this.O1904&&this.O1904.O7956&&this.O1904.O7956(ig.game.O1257.O2970,!1,!this.O5028),ig.game.mediaDialog&&ig.game.mediaDialog.O8112&&"Embedding"==ig.game.mediaDialog.mediaType&&ig.game.mediaDialog.O3967(),this.O3505(),this.O8688(),this.ourPlayerPosAtOpen={x:null,y:null},this.isOpen=this.O2440=!1,this.animSheet=this.holderId=null,this.O9554=!1,this.O1904=null,this.pageable=this.O5028=!1,this.attributes=
{},this.parent())}})});ig.baked=!0;
ig.module("game.ui.multithing").requires("game.ui.components.uidialog").defines(function(){window.Multithing=UIDialog.extend({isOpen:!1,pos:{x:null,y:5},size:{x:342,y:190},participants:{},participantSections:[],neutralSections:[],maxParticipantsDefault:4,maxParticipantsPossible:8,placementId:null,O8766:null,O4730:!1,O4051:!1,O1119:!1,staticItems:[],movableItems:[],staticItemsAtStart:[],movableItemsAtStart:[],O6262:!1,O3065:null,draggedItemOffset:{x:0,y:0},O8083:0,name:null,O3405:"DECO DECOBIG DECOVBIG DECOFB LIVELY DYNATHING READABLE WRITABLE STACKHOLD SOLID DECOFG LIQUID GLOW ENVIRONM MEDIUM CONSUMAB EQUIPMENT EMITTER".split(" "),
O7120:"DECO SOLID DYNATHING STACKHOLD DECOANIM LIVELY DECOFG DECOFB LIQUID CONSUMAB EQUIPMENT EMITTER GLOW".split(" "),O1882:1E3,O4515:1E3,O6097:null,O9990:null,O5721:100,O2633:null,O2736:null,O6402:!1,menuEntries:null,clickSpotMenuEntries:null,O1713:!1,O3938:null,O4628:[],settings:{},O4708:{},O5265:null,O6498:null,showGrid:!1,O4578:null,O9726:0,O1506:!1,O9896:!1,O593:10,seedMax:1E6,O9212:[],O9278:100,O5940:!0,O5187:!0,open:function(a,b){this.isOpen||(this.O4578=new ml.Timer,this.O5187=b,this.O8083=
0,this.participants={},this.staticItems=[],this.movableItems=[],this.settings={},this.O9212=[],this.O5940=!0,this.O1119=this.O4051=this.O4730=!1,this.O2736=this.O2633=this.O9990=this.O6097=null,this.O6402=!1,this.clickSpotMenuEntries=this.menuEntries=null,this.O1713=!1,this.O3938=null,this.O4628=[],this.participantSections=[],this.neutralSections=[],this.O4708={},this.O6498=this.O5265=null,this.O6262=this.O9896=this.O1506=this.showGrid=!1,this.O3065=null,this.placementId=a.placementId,this.O8766=
a,this.id=a.thingTypeId,this.name=this.O8766.givenName,ig.game.O1257.viewingMultithingPlacementId=this.placementId,ig.game.O7836.O4739("startViewing",this.placementId),ig.game.sounds.shortWhoosh.play(),this.O8040(),this.O9071(),ig.game.O2116.O7884(ig.game.O1257,"activates",this.O8766.givenName),this.parent(),ig.ua.mobile&&ig.game.virtualJoystick.O3702())},O5353:function(){var a=ig.game.O1257,b=ig.game.O5119.player;if(b)for(var c=0;c<b.length;c++){var d=b[c];!d._killed&&d.O2970!=a.O2970&&d.viewingMultithingPlacementId&&
d.viewingMultithingSince&&d.viewingMultithingPlacementId==this.placementId&&(!a.viewingMultithingSince||d.viewingMultithingSince<a.viewingMultithingSince)&&(a=d)}return a},O8587:function(){this.menuEntries=[];var a=this;this.menuEntries.push({label:"restart",O8030:function(){a.restart()}});this.O1713&&(this.menuEntries.push({label:"set up statics",O8030:function(){a.O7866()},icon:"baseEditStatic"}),this.menuEntries.push({label:"set up movables",O8030:function(){a.O5129()},icon:"baseEditMovables"}),
this.menuEntries.push({label:"more",O8030:function(){a.O8644()},icon:"settingsIcon"}));this.menuEntries.push({label:"about multis...",O8030:function(){a.O9447()}})},O8040:function(){this.pos.x=ig.system.width<this.size.x?0:Math.floor(ig.system.width/2-this.size.x/2);ig.game.O1168&&(this.pos.x-=16);this.pos=this.O8829(this.pos)},update:function(){this.isOpen&&(this.O8766?(this.O1119&&!ig.game.alertDialog.isOpen&&(this.O1119=!1),this.O3198(),this.O1506&&this.O9896&&(this.O9896=!1,ig.game.O7836.O4739("askMasterForChangesSinceStart",
this.placementId)),this.O4119(),this.removeParticipantsWhoStoppedViewing(),this.O2928(),this.O4370(),this.O4250(),this.O8830(),this.O4578||this.O9980(),this.O2269(this.staticItems),this.O2269(this.movableItems),ig.input.pressed("esc")?ig.game.O1795||(ig.input.O6501(),this.close()):this.parent()):this.close())},O4119:function(){this.O4578&&4<=this.O4578.delta()&&0==this.O9726&&(console.log("First Multi changes response delayed, perhaps we weren't visible to other yet, retrying"),this.O9726++,this.O4578=
new ml.Timer,ig.game.O7836.O4739("askMasterForChangesSinceStart",this.placementId))},O3198:function(){if(!this.O1506){for(var a=!0,b=0;b<this.staticItems.length;b++){var c=this.staticItems[b];if(!c||!c.entity){a=!1;break}}if(a)for(b=0;b<this.movableItems.length;b++)if(c=this.movableItems[b],!c||!c.entity){a=!1;break}a&&this.O6091();this.O1506=a}},O4234:function(){if(1<=this.O9212.length){this.O5940=!1;var a=this.O9212.pop();switch(a.action){case "delete":this.doAddItem(a.id,a.rot,a.flip,a.x,a.y);
break;case "add":this.O5727(a.localId);break;case "startMove":var b=this.getItemByLocalId(this.staticItems,a.localId);b||=this.getItemByLocalId(this.movableItems,a.localId);b&&(b.targetX=a.x,b.targetY=a.y,b.flip=a.flip,b.rot=a.rot)}this.O5940=!0}},O4370:function(){if(this.O1713){if(this.O4730||this.O4051)if(ig.input.state("ctrl")&&ig.input.pressed("d")){ig.input.O6501();var a=this.O6498;if(a){var b=ig.input.state("shift")?{x:0,y:ig.game.O9925}:{x:ig.game.O9925,y:0};this.addItem(a.id,a.rot,a.flip,
a.x+b.x,a.y+b.y,a.wiggleSpeed,a.wiggleDistance)}}else ig.input.state("ctrl")&&ig.input.pressed("z")&&!ig.game.O1795&&(ig.input.O6501(),this.O4234());ig.input.state("ctrl")&&ig.input.pressed("g")?(ig.input.O6501(),this.showGrid=!this.showGrid,ig.game.sounds.click.play()):ig.input.state("ctrl")&&ig.input.pressed("k")?(ig.input.O6501(),this.O4730?this.O4446():this.O7866()):ig.input.state("ctrl")&&ig.input.pressed("l")&&(ig.input.O6501(),this.O4051?this.O4446():this.O5129())}},getItemChangesSinceStart:function(a,
b){for(var c=[],d=0;d<b.length;d++){var e=b[d],f=a[d];if(e.x!=f.x||e.y!=f.y||e.rot!=f.rot||e.flip!=f.flip||e.state!=f.state){var g={id:e.localId};if(e.x!=f.x||e.y!=f.y)g.x=e.x,g.y=e.y;e.rot!=f.rot&&(g.rot=parseInt(e.rot));e.flip!=f.flip&&(g.flip=parseInt(e.flip));e.state!=f.state&&(g.state=parseInt(e.state));c.push(g);e.changedByUs=!1}}return c},O8830:function(){this.O6402&&ig.game.O1257&&(0!=ig.game.O1257.vel.x||0!=ig.game.O1257.vel.y)&&(this.O6402=!1,this.clickSpotMenuEntries=null);if(this.O6402&&
(this.clickSpotMenuEntries||this.O5836(),this.clickSpotMenuEntries))for(var a=0;a<this.clickSpotMenuEntries.length;a++)this.clickSpotMenuEntries[a].update()},O5836:function(){var a=this.O8766;if(a){var b=ig.game.O8159.bottomMenuMoreMiddle.width,c=ig.game.O8159.bottomMenuMoreMiddle.height;this.clickSpotMenuEntries=[];for(var d=a.pos.x-ig.game._rscreen.x-32,e=this.menuEntries.length,f=0;f<e;f++)this.clickSpotMenuEntries[f]=new UIClickSpot({x:d,y:a.pos.y-ig.game._rscreen.y-e*c+f*c+22},{x:b,y:c},!1,null),
this.clickSpotMenuEntries[f].onClick=this.menuEntries[f].O8030,this.clickSpotMenuEntries[f].icon=this.menuEntries[f].icon}},O4250:function(){var a=this.O8766;if(a){if(!this.O2633){a=a.givenName;this.O2633=new UIClickText({x:0,y:0},a,ig.game.blackWhiteFont,"rgb(255,255,255)",.8);var b=this;this.O2633.onClick=function(){b.O5392()}}this.O2736||(this.O2736=new UIClickText({x:0,y:0},"x",ig.game.blackWhiteFont,"rgb(255,255,255)",.8),b=this,this.O2736.onClick=function(){b.O9998()});this.O3938||!this.O4730&&
!this.O4051||(a=this.O4730?">> statics done":">> movables done",this.O3938=new UIClickText({x:0,y:0},a,ig.game.blackWhiteFont,"rgb(255,255,255)",.8),b=this,this.O3938.onClick=function(){b.O4446()});this.O2736.update();this.O2633.update();this.O3938&&this.O3938.update()}},O2269:function(a){if(this.O8766){var b=ig.game.O4507(this.O8766.pos);b.y-=7*ig.game.O9925;for(var c=0;c<a.length;c++){var d=a[c];if(d&&d.entity){var e=void 0===d.targetX;if(e){var f=ig.game.O4507(d.entity.pos);d.entity.pos=b}this.O3956(d);
this.O8652(d);this.O3906(d);d.entity.update();e&&(d.entity.pos=f)}}}},O8652:function(a,b,c){if(void 0!==a.targetX&&void 0!==a.targetY){a.x=Math.floor((a.x+a.targetX)/2);a.y=Math.floor((a.y+a.targetY)/2);var d={x:a.x,y:a.y},e={x:a.targetX,y:a.targetY};b||this.O8235(a);if(b||2>=ml.Misc.O8674(d,e))a.x=a.targetX,a.y=a.targetY,delete a.targetX,delete a.targetY,a.isInOtherPrivateSection=this.O8783(a),c||this.O8994(this.movableItems),a.originIsCloseToTargetAtStart?(this.O9934(a),a.originIsCloseToTargetAtStart=
!1):this.O8235(a);a.entity&&(a.entity.pos.x=this.pos.x+a.x,a.entity.pos.y=this.pos.y+a.y,a.entity.O6479&&a.entity.O6479())}},O6091:function(){for(var a=0;a<this.staticItems.length;a++){var b=this.staticItems[a];b.isInOtherPrivateSection=this.O8783(b)}for(a=0;a<this.movableItems.length;a++)b=this.movableItems[a],b.isInOtherPrivateSection=this.O8783(b)},O3956:function(a){switch(a.base){case "DECOANIM":a.entity.O8393=a.entity.anims["cell"+(2==a.state||a.isInOtherPrivateSection?"2":"1")];break;case "DYNATHING":a.entity.multithingPrivate=
!!a.isInOtherPrivateSection,a.entity.multithingState=a.state,a.entity.multithingStatePositiveNegative=0==a.state?"neutral state":0<a.state?"positive state":"negative state",a.entity.multithingStateEvenOdd=this.O9384(a.state)?"even state":"odd state"}},O9384:function(a){return 0==a%2},O9238:function(a){var b=Math.floor(a.entity.size.x/2-1);a.x=a.x.limit(-b,this.size.x-a.entity.size.x+b);a.y=a.y.limit(-b,this.size.y-a.entity.size.y+b)},O9980:function(){if(this.O3065){var a=this.O3065;a.x=Math.round(ig.input.mouse.x+
this.draggedItemOffset.x);a.y=Math.round(ig.input.mouse.y+this.draggedItemOffset.y);this.O9238(a);a.entity.pos.x=this.pos.x+a.x;a.entity.pos.y=this.pos.y+a.y;this.O3206(a);a.entity.O6479&&a.entity.O6479();ig.game.chance(5)&&this.O8235(this.O3065)}ig.game.O4774.O3044()&&(ig.game.O4774.O5457(),this.O3065?this.O7522(this.O3065):ig.game.O3199||(this.O4730||this.O4051?(a=this.O4237(this.O4730?this.staticItems:this.movableItems))&&this.O2665(a):((a=this.O4237(this.movableItems))||(a=this.O4237(this.staticItems)),
a&&ig.game.itemContextMenu.O3076(a.entity,a,{x:this.pos.x+a.x,y:this.pos.y+a.y},void 0,!0))));if(ig.input.state("click"))!this.O6262&&this.O1176()&&(a=!0,ig.game.readableDialog&&ig.game.readableDialog.isOpen?(ig.game.readableDialog.close(),a=!1):ig.game.writableDialog&&ig.game.writableDialog.isOpen&&(ig.game.writableDialog.close(),a=!1),this.O3302(),a&&!this.O3065&&this.O2366(),this.O6097=new ml.Timer,this.O9990=this.O3151(),this.O6262=!0,ig.game.O3957&&ig.game.O3957.O8855("multi activity"));else if(this.O6262){if(this.O3065){a=
this.O3065;var b=this.O9990&&0>=ml.Misc.O8674(this.O3151(),this.O9990)&&this.O6097&&.3>=this.O6097.delta(),c={id:a.localId};if(a.rotatable||a.flippable)c.rot=a.rot;var d=this.getItemThisIsOn(this.staticItems,a),e=d&&d.attributes&&d.attributes.randomizer;b&&!e?void 0===a.state||!this.O4730&&!this.O4051&&a.entity&&a.entity.attributes&&a.entity.attributes.noOneClickStateChange||(a.state++,a.state>a.maxState&&(a.state=a.minState),this.O3404(a)):(a.isInOtherPrivateSection=this.O8783(a),e&&(b=ig.game.O4293(0,
this.seedMax),c.randomizerSeed=b,c.itemItsOnId=d.localId,this.O2947(d.localId,b)),this.O3274(a));c.x=void 0!==a.targetX?a.targetX:a.x;c.y=void 0!==a.targetY?a.targetY:a.y;this.O8601(ig.game.O1257,a);this.settings.neutralSectionsShuffle&&this.settings.hasNeutralSections&&this.getItemIsInSections(this.neutralSections,a)?(b=ig.game.O4293(0,this.seedMax),this.O3596(this.neutralSections,b),c.shuffleSeed=b):this.settings.participantSectionsShuffle&&this.settings.hasParticipantSections&&(d=this.O1535(this.participantSections,
a),0<=d&&(b=ig.game.O4293(0,this.seedMax),this.O3596([this.participantSections[d]],b),c.shuffleSeed=b,c.participantIndex=d));c.state=a.state;a.flippable&&(c.flip=a.flip);ig.game.O7836.O4739("itemChange",this.placementId,c);this.O6498=a;this.O3065=null}else this.O4237(this.staticItems);this.O8994(this.movableItems);this.O9990=this.O6097=null;this.O6262=!1}},O2665:function(a){var b=this,c=!1;var d='<div class="multithingSettings">';this.O4730?(d+="<p>static items don't have settings</p>",c=!0):this.O4051&&
(d+=this.O5163("wiggleSpeed","drag wiggle speed (0-100%)",a.wiggleSpeed,!0),d+=this.O5163("wiggleDistance","drag wiggle distance (0-100%)",a.wiggleDistance,!0));d+='<input type="hidden" id="itemSettingsLocalId" value="'+ig.game.strings.O9955(a.localId)+'"/>';ig.game.alertDialog.open({html:d+"</div>",O9267:function(){b.O4603()},O3144:c})},O4603:function(){if(this.O4051){var a=jQuery("#itemSettingsLocalId").val();if(a&&=this.getItemByLocalId(this.O4730?this.staticItems:this.movableItems,a))a.wiggleSpeed=
this.getValidPercentValue(jQuery("#wiggleSpeed").val()),a.wiggleDistance=this.getValidPercentValue(jQuery("#wiggleDistance").val()),a.wiggleSpeed||delete a.wiggleSpeed,a.wiggleDistance||delete a.wiggleDistance,delete a.wiggle,console.log("item now",a.wiggleSpeed,a.wiggleDistance)}},getValidPercentValue:function(a){var b=0;"string"===typeof a&&(a=ig.game.strings.replaceAll(a,"%",""),a=a.trim());a&&ml.Misc.O5090(a)&&(a=parseFloat(a),0>a?a=0:100<a&&(a=100),b=a);console.log("validV",b,typeof b);return b},
O3206:function(a){if(a.wiggle){a.wiggle.counterX||(a.wiggle.counterX=1);a.wiggle.counterY||(a.wiggle.counterY=1);var b=a.wiggle.speed/200,c=60*ig.system.tick;a.wiggle.counterX+=b*c;a.wiggle.counterY+=(b+.01)*c;ig.game.chance(50)&&a.wiggle.counterX+.02;ig.game.chance(50)&&a.wiggle.counterY+.02;1E6<=a.wiggle.counterX&&(a.wiggle.counterX=1);1E6<=a.wiggle.counterY&&(a.wiggle.counterY=1);b=a.entity.pos;b.x+=a.wiggle.distance/2*Math.cos(a.wiggle.counterX);b.y+=a.wiggle.distance/2*Math.cos(a.wiggle.counterY)}},
O3274:function(a){this.O5186(a)?(a.targetX=Math.round(a.x/ig.game.O9925)*ig.game.O9925,a.targetY=Math.round(a.y/ig.game.O9925)*ig.game.O9925):a.wiggle&&(delete a.wiggle,a.x=Math.round(a.entity.pos.x-this.pos.x),a.y=Math.round(a.entity.pos.y-this.pos.y),this.O9238(a),a.entity.pos.x=this.pos.x+a.x,a.entity.pos.y=this.pos.y+a.y,a.entity.O6479&&a.entity.O6479());if(a.entity){var b=!1;"DECOANIM"==a.base&&(b=ig.game.sounds.playIncludedSound(a.entity,void 0,void 0,!0,!0));b||ig.game.sounds.O2903(ig.game.sounds.shortWhoosh,
.35)}this.O3404(a);this.draggedItemStartPos&&(ml.Misc.O8674({x:this.draggedItemStartPos.x,y:this.draggedItemStartPos.y},{x:a.x,y:a.y})>=this.O593?this.O9934(a):this.O8235(a),this.draggedItemStartPos=null)},O3404:function(a){if(a.entity)switch(a.base){case "DYNATHING":a.entity.multithingMoved=!0;break;case "STACKWEARB":this.settings.livelyBodies&&(a.entity.O8393=a.entity.anims.run,a.entity.O8393.flip.x=!!a.flip,a.specialModeTimer=new ml.Timer)}},O5186:function(a){var b=!1;null!==this.settings.snapToGridRect.x&&
null!==this.settings.snapToGridRect.y&&(b=this.O4472(this.settings.snapToGridRect,ig.game.O9925),b=this.O7681({x:a.x,y:a.y},b));return b},O4472:function(a,b){return{x:a.x*b,y:a.y*b,width:a.width*b,height:a.height*b}},O7681:function(a,b){return a.x>=b.x&&a.x<=b.x+b.width&&a.y>=b.y&&a.y<=b.y+b.height},O3906:function(a){if(a.specialModeTimer&&.35<=a.specialModeTimer.delta()&&a.entity)switch(a.base){case "STACKWEARB":a.entity.O8393=a.entity.anims.main,a.entity.O8393.flip.x=!!a.flip}},getItemIsInSections:function(a,
b){for(var c=!1,d=0;d<a.length;d++)if(this.O1384(a[d],b)){c=!0;break}return c},O1535:function(a,b){for(var c=-1,d=0;d<a.length;d++)if(this.O1384(a[d],b)){c=d;break}return c},O3596:function(a,b){ig.game.seedableRandom.setSeed(b);this.O1853();this.O6976(this.movableItems);b=ig.game.seedableRandom.O4293(49,50);for(var c=0;c<a.length;c++){var d=this.getItemsInRect(a[c]);if(2<=d.length&&this.O1725())for(var e=1;e<=b;e++){var f=ig.game.seedableRandom.O4293(0,d.length-1),g=ig.game.seedableRandom.O4293(0,
d.length-1);f==g&&(f=0,g=d.length-1);f=d[f];g=d[g];f.targetX=g.x;f.targetY=g.y;g.targetX=f.x;g.targetY=f.y;e!=b&&(this.O8652(f,!0,!0),this.O8652(g,!0,!0))}}this.O8994(this.movableItems)},O1725:function(){for(var a=!0,b=0;b<this.movableItems.length;b++){var c=this.movableItems[b];if(void 0!==c.targetX||void 0!==c.targetY){a=!1;break}}return a},getItemsInRect:function(a){for(var b=[],c=0;c<this.movableItems.length;c++)this.O1384(a,this.movableItems[c])&&b.push(this.movableItems[c]);return b},O1384:function(a,
b){var c=!1;b.entity&&(c=b.x+b.entity.size.x/2,b=b.y+b.entity.size.y/2,c=c>=a.x&&c<=a.x+a.width&&b>=a.y&&b<=a.y+a.height);return c},getItemThisIsOn:function(a,b){if(b.entity){var c=b.entity.pos.x+b.entity.size.x/2;b=b.entity.pos.y+b.entity.size.y/2;for(var d=0;d<a.length;d++){var e=a[d];if(e.entity&&c>=e.entity.pos.x&&c<=e.entity.pos.x+e.entity.size.x&&b>=e.entity.pos.y&&b<=e.entity.pos.y+e.entity.size.y){var f=e;break}}}return f},O2947:function(a,b){ig.game.seedableRandom.setSeed(b);a=this.getItemByLocalId(this.staticItems,
a);this.O9019(a);a.entity&&("randomize"==a.entity.O1553||"private randomize"==a.entity.O1553?a.entity.reset(!0):a.entity.multithingRandomize=!0)},O3928:function(a,b){ig.game.seedableRandom.setSeed(b);a=this.getItemByLocalId(this.staticItems,randomizerId);this.O9019(a);a.entity&&("randomize"==a.entity.O1553?a.entity.reset(!0):a.entity.multithingRandomize=!0)},O9019:function(a){a=a.entity;this.O6976(this.movableItems);for(var b=0;b<this.movableItems.length;b++){var c=this.movableItems[b];if(c.entity){var d=
c.entity.pos.x+c.entity.size.x/2,e=c.entity.pos.y+c.entity.size.y/2;d>=a.pos.x&&d<=a.pos.x+a.size.x&&e>=a.pos.y&&e<=a.pos.y+a.size.y&&this.doRandomizeItem(c)}}this.O8994(this.movableItems)},doRandomizeItem:function(a){a.entity&&(a.state=ig.game.seedableRandom.O4293(a.minState,a.maxState),"randomize"==a.entity.O1553?a.entity.reset(!0):a.entity.multithingRandomize=!0,this.O8235(a,!0),this.O8235(a,!1,6,3))},O8235:function(a,b,c,d,e,f){if(this.O5187&&a.entity){void 0===d&&(d=1);for(var g=1;g<=d;g++){var h=
0,k=0;0<c&&(h=ig.game.O4293(-c,c),k=ig.game.O4293(-c,c));void 0===e&&(e=0);void 0===f&&(f=0);ig.game.spawnEntity(b?EntityBigDust:EntityDust,Math.floor(this.pos.x+a.x+a.entity.size.x/2+h+e),Math.floor(this.pos.y+a.y+a.entity.size.y/2+k+f),{uiEntity:!0,O3004:!0,decay:b?1.25:2})}}},O8994:function(a){a.sort(function(b,c){return b.y>c.y?1:b.y<c.y?-1:b.x>c.x?1:b.x<c.x?-1:b.localId<c.localId?1:-1})},O6976:function(a){a.sort(function(b,c){var d=0;b.localId>c.localId?d=1:b.localId<c.localId&&(d=-1);return d})},
O3151:function(){return{x:ig.input.mouse.x,y:ig.input.mouse.y}},O8783:function(a){return this.O3856(a,!0)},O3856:function(a,b){var c=[];if(this.settings.hasNeutralSections)for(var d=0;d<this.neutralSections.length;d++)c.push(this.neutralSections[d]);if(this.settings.hasParticipantSections)for(d=0;d<this.participantSections.length;d++){var e=!0;b&&(e=!this.participants[ig.game.O1257.O2970]||d!==this.participants[ig.game.O1257.O2970].index);e&&c.push(this.participantSections[d])}d=a.entity;e=void 0!==
a.targetX?a.targetX:a.x;b=void 0!==a.targetY?a.targetY:a.y;return this.O8087(c,a.entity?{x:e+d.size.x/2,y:b+d.size.y/2}:{x:e+ig.game.O2953,y:b+ig.game.O2953})},O4352:function(a){var b=!1;if(this.participants[ig.game.O1257.O2970]){b=[];for(var c=0;c<this.participantSections.length;c++)c==this.participants[ig.game.O1257.O2970].index&&b.push(this.participantSections[c]);c=a.entity;b=this.O8087(b,{x:(void 0!==a.targetX?a.targetX:a.x)+c.size.x/2,y:(void 0!==a.targetY?a.targetY:a.y)+c.size.y/2})}return b},
O8087:function(a,b){for(var c=!1,d=0;d<a.length&&!(c=a[d],c=b.x>=c.x&&b.x<=c.x+c.width&&b.y>=c.y&&b.y<=c.y+c.height);d++);return c},O8829:function(a){return{x:Math.floor(a.x/ig.system.scale)*ig.system.scale,y:Math.floor(a.y/ig.system.scale)*ig.system.scale}},O3302:function(){if((this.O4730||this.O4051||this.participants[ig.game.O1257.O2970])&&!ig.game.O3199&&!ig.game.O1795){var a=this.O4237(this.O4730?this.staticItems:this.movableItems);a&&(ig.input.state("ctrl")?this.O4730||this.O4051?this.O5727(a.localId):
this.O1713&&this.O1857():(this.O3065=a,this.draggedItemStartPos={x:a.x,y:a.y},this.draggedItemOffset={x:a.x-ig.input.mouse.x,y:a.y-ig.input.mouse.y},!this.O4730&&!this.O4051&&ig.game.sounds.playIncludedSound(this.O3065.entity),a.wiggleSpeed&&a.wiggleDistance&&(a.wiggle={speed:a.wiggleSpeed,distance:a.wiggleDistance}),this.O8235(a,!0),ig.game.sounds.shortWhoosh.play(),this.O8234({action:"startMove",localId:a.localId,x:a.x,y:a.y,rot:a.rot,flip:a.flip})))}},O8234:function(a){this.O5940&&(this.O4730||
this.O4051)&&(this.O9212.push(a),this.O9212.length>this.O9278&&this.O9212.shift())},O9934:function(a){this.O8235(a,!0,8,ig.game.O4293(2,3))},O2366:function(){if(!this.O4730&&!this.O4051){var a=this.O4237(this.staticItems);if(a)switch(a.base){case "READABLE":this.O8265(a);break;case "WRITABLE":this.O9437(a);break;case "MEDIUM":this.O9553(a);break;case "DYNATHING":this.O4283(a)}}},O4283:function(a){if(a&&a.attributes&&a.attributes.randomizer&&void 0!==a.state){var b={id:a.localId},c=ig.game.O4293(0,
this.seedMax);b.randomizerSeed=c;ig.game.seedableRandom.setSeed(c);this.doRandomizeItem(a);ig.game.O7836.O4739("itemChange",this.placementId,b)}},O9437:function(a){ig.game.writableDialog&&ig.game.writableDialog.isOpen?ig.game.writableDialog.close():ig.game.O7747.O9935(a.id,!0)},O9553:function(a){ig.game.mediaDialog&&ig.game.mediaDialog.O8112?ig.game.mediaDialog.O3967():ig.game.O7747.O9935(a.id,!0)},O8265:function(a){if(ig.game.readableDialog&&ig.game.readableDialog.isOpen)ig.game.readableDialog.close();
else if(!this.O8783(a))if(this.O4352(a)){var b=this,c=a.localId;ig.game.O4261.getItem_P(a.id,"multi").done(function(d){var e="width: 90%;";a.attributes&&a.attributes.sansSerifFont||(e+="text-transform: uppercase;");void 0===b.O4708[c]&&(b.O4708[c]=d.textData);d='<textarea id="locallyEditableText" style="'+e+'">'+ig.game.strings.O9955(b.O4708[c]);ig.game.alertDialog.open({html:d+"</textarea>",O5358:!0,O9267:function(){b.O4708[c]=jQuery("#locallyEditableText").val()}});jQuery("#locallyEditableText").css("height",
ig.game.alertDialog.size.y-50+"px")})}else ig.game.O7747.O9935(a.id,!0)},O5727:function(a){for(var b=0;1>=b;b++)for(var c=0==b?this.staticItems:this.movableItems,d=0;d<c.length;d++)if(c[d].localId==a){var e=c[d];this.O8234({action:"delete",id:e.id,x:e.x,y:e.y,rot:e.rot,flip:e.flip});c.splice(d,1);ig.game.sounds.bin.play();break}},O4237:function(a){var b=ig.game.O9925,c={};c.pos={x:ig.input.mouse.x,y:ig.input.mouse.y};c.size={x:0,y:0};c.pos=this.O8829(c.pos);for(var d=null,e=null,f=a.length-1;0<=f;f--){var g=
a[f];if(g.entity){var h=g.entity.O2144(c);h<=b&&(null===d||h<d)&&(d=h,e=g)}}return e},draw:function(){if(this.isOpen){this.O2613();this.settings.hasNeutralSections&&this.O1781(this.neutralSections);this.settings.hasParticipantSections&&this.O1781(this.participantSections,!0);var a=this.O7714();this.O9429();this.O6963(this.staticItems);this.settings.hasParticipantSections&&this.O1781(this.participantSections,!0,!0);this.O4578||this.O6963(this.movableItems);this.O6963(this.staticItems,!0);this.O4578||
this.O6963(this.movableItems,!0);this.O7441(a);this.O9918();this.O9675();this.drawMenuEntries()}},O9576:function(a,b,c,d){var e=ig.system.context;e.beginPath();e.moveTo(a*ig.system.scale,b*ig.system.scale);e.lineTo(c*ig.system.scale,d*ig.system.scale);e.stroke()},O9429:function(){if(this.showGrid){var a=ig.system.context;a.strokeStyle="rgba(255,255,255,.15)";a.lineWidth=ig.system.scale;ml.Misc.O5847("lighten");for(var b=ig.game.O9925;b<this.size.y;b+=ig.game.O9925){var c=this.pos.x,d=this.pos.y+b,
e=c+this.size.x,f=d;this.O9576(c,d,e,f)}for(b=ig.game.O9925;b<this.size.x;b+=ig.game.O9925)c=this.pos.x+b,d=this.pos.y,e=c,f=d+this.size.y,this.O9576(c,d,e,f);c=this.O6333()[0];c={x:this.pos.x+c.x,y:this.pos.y+this.size.y-c.width-c.y,width:c.width,height:c.width};a.fillStyle="rgba(255,255,255,.1)";ml.Misc.O3124(c,0);c=8*ig.game.O9925;c={x:this.pos.x+this.size.x/2-c/2,y:this.pos.y+this.size.y/2-c/2,width:c,height:c};a.strokeStyle="rgba(255,255,255,.3)";ml.Misc.O3124(c,0,!0);ml.Misc.O3715()}},O9918:function(){if(this.O4730||
this.O4051){ig.system.context.line=ig.system.scale;var a=this.pos.x,b=this.pos.y,c=this.size.x,d=this.size.y,e=1;e={x:a-e,y:b-e,width:c+2*e,height:d+2*e};ig.system.context.strokeStyle="rgba(255,255,255,.5)";ml.Misc.O5847("lighten");ml.Misc.O3124(e,0,!0);e=2;a={x:a-e,y:b-e,width:c+2*e,height:d+2*e};ig.system.context.strokeStyle="rgba(0,0,0,.5)";ml.Misc.O5847("darken");ml.Misc.O3124(a,0,!0);ml.Misc.O3715()}},O9675:function(){var a=this.O8766;a&&this.O2633&&(this.O2633.pos.x=a.pos.x-ig.game._rscreen.x-
this.O2633.size.x/2+4,this.O2633.pos.y=a.pos.y-ig.game._rscreen.y+23,this.O2736.pos.x=this.O2633.pos.x+this.O2633.size.x+8,this.O2736.pos.y=this.O2633.pos.y,this.O2633.draw(),this.O2736.draw(),this.O3938&&(this.O3938.pos.x=this.O2633.pos.x+this.O2633.size.x+28,this.O3938.pos.y=this.O2633.pos.y,a={x:this.O3938.pos.x-3,y:this.O3938.pos.y-1,width:this.O3938.size.x+6,height:this.O3938.size.y+2},ig.system.context.fillStyle="rgba(0,100,0,.5)",ml.Misc.O5847("darken"),ml.Misc.O3124(a),ml.Misc.O3715(),this.O3938.draw()))},
drawMenuEntries:function(){var a=this.O8766;if(this.O6402&&a&&this.clickSpotMenuEntries){a=this.clickSpotMenuEntries.length;for(var b=0;b<a;b++){var c=this.clickSpotMenuEntries[b],d="bottomMenuMore";d=0==b?d+"Top":b==a-1?d+"Bottom":d+"Middle";ig.game.O8159.draw(c.pos.x,c.pos.y,.8,ig.game.O8159[d]);c.icon&&ig.game.O8159.draw(c.pos.x+4,c.pos.y+3,.7,ig.game.O8159[c.icon]);ig.system.context.globalAlpha=.7;ig.game.blackFont.draw(this.menuEntries[b].label,c.pos.x+5+(c.icon?10:0),c.pos.y+5);ig.system.context.globalAlpha=
1}}},O7714:function(){var a={x:ig.game._rscreen.x,y:ig.game._rscreen.y};ig.game._rscreen.x=0;ig.game._rscreen.y=0;return a},O7441:function(a){ig.game._rscreen.x=a.x;ig.game._rscreen.y=a.y},O6963:function(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(d.entity)if("DECOFB"==d.base)b?d.entity.O4481():d.entity.draw();else if("LIQUID"==d.base)d.entity.draw(b);else{var e="DECOFG"==d.base||d.attributes&&d.attributes.inFront;(e&&b||!e&&!b)&&d.entity.draw()}}},O2613:function(){if(0<this.settings.wallpaperOpacity){1!=
this.settings.wallpaperOpacity&&(ig.system.context.globalAlpha=parseFloat(this.settings.wallpaperOpacity));for(var a=0;a<this.size.y;a+=ig.game.O4975)for(var b=0;b<this.size.x;b+=ig.game.O4975)this.O8766.anims.back.draw(this.pos.x+b,this.pos.y+a);1!=this.settings.wallpaperOpacity&&(ig.system.context.globalAlpha=1)}},O1781:function(a,b,c){ig.system.context.fillStyle="rgba(0,0,0,.2)";for(var d=0;d<a.length;d++){var e=ig.game.O4507(a[d]);e.x+=this.pos.x;e.y+=this.pos.y;this.settings.markSections&&!c&&
(ml.Misc.O5847("darken"),ml.Misc.O3124(e),ml.Misc.O3715());if(b&&c){var f=void 0!==this.settings.participantValueAtStart?.5:.25,g=this.O4711(d),h=null;g?g.entity&&(h=g.entity.O8088?"me":g.entity.screenName,void 0!==this.settings.participantValueAtStart&&(void 0===g.value&&(g.value=parseFloat(this.settings.participantValueAtStart)),h+=": "+String(this.settings.participantValuePrefix?this.settings.participantValuePrefix:"")+ig.game.strings.O2837(g.value))):b&&(this.O4730||this.O4051||this.O1119)&&(h=
"participant "+(d+1));if(h){var k=e.x+e.width/2;e=e.y+e.height-10;ig.system.context.globalAlpha=f;ig.game[this.settings.fontName+"Font"].draw(h,k,e,ig.Font.ALIGN.CENTER);ig.system.context.globalAlpha=1;if(g&&h!=g.lastLabelShown)for(g.lastLabelShown=h,f=-15;15>=f;f+=5)ig.game.decorator.O9250(k+f,e+ig.game.O4293(-4,5),!0)}}}},O4711:function(a){var b;for(b in this.participants)if(this.participants[b].index==a){var c=this.participants[b];break}return c},O9339:function(a,b,c,d){if(this.lockReceivedRemoteDataQueue){var e=
this;setTimeout(function(){e.O4628.push({mode:b,data:d})},100)}else this.O4628.push({mode:b,data:d,originator:a})},O2928:function(){if(this.O1506){this.lockReceivedRemoteDataQueue=!0;1<=this.O4628.length&&this.O1853();for(var a=0;a<this.O4628.length;a++){var b=this.O4628[a].data,c=this.O4628[a].originator;switch(this.O4628[a].mode){case "itemChange":this.O9530(b,c);break;case "changesSinceStart":if(this.O4578)if(this.hashOfFullSetupAtStart!=b.hashOfFullSetupAtStart)ig.game.O1257.say("i need to wait until next time"),
this.close();else{if(b.itemChanges){if(b.itemChanges.staticItems)for(a=0;a<b.itemChanges.staticItems.length;a++)this.O9530(b.itemChanges.staticItems[a],c,!0);if(b.itemChanges.movableItems)for(a=0;a<b.itemChanges.movableItems.length;a++)this.O9530(b.itemChanges.movableItems[a],c,!0);this.O1853()}b.participants&&(this.participants=ig.game.O4507(b.participants),this.expandParticipantEntities());this.O4578=null}break;case "askMasterForChangesSinceStart":this.O8308()&&(b={itemChanges:{}},b.itemChanges.movableItems=
this.getItemChangesSinceStart(this.movableItemsAtStart,this.movableItems),b.itemChanges.staticItems=this.getItemChangesSinceStart(this.staticItemsAtStart,this.staticItems),b.participants=this.O5537(),b.hashOfFullSetupAtStart=this.hashOfFullSetupAtStart,ig.game.O7836.O4739("changesSinceStart",this.placementId,b));break;case "addParticipant":b.userId&&(c=ml.Misc.O4671(b.userId))&&(this.addParticipant(c),c.O8088&&ig.game.O5058.O7948("i was added to "+this.name),ig.game.sounds.success.play());break;case "removeParticipant":b.userId&&
(c=ml.Misc.O4671(b.userId),this.removeParticipant(c),b.O2970==this.O8088&&ig.game.O5058.O7948("i was removed from "+this.name),ig.game.sounds.pickup.play());break;case "participantValueChange":if(!this.O4578&&b.userId&&void 0!==b.value&&(c=this.participants[b.userId])){var d=c.value;c.value=parseFloat(b.value);this.O1501(d,c.value)}break;case "resetParticipantValues":this.O4578||this.resetParticipantValues();break;case "restart":this.O1506=!1,this.O4708={},this.O9071(),ig.game.sounds.whoosh.play()}}this.O4628=
[];this.lockReceivedRemoteDataQueue=!1}},O5537:function(){var a={},b;for(b in this.participants){var c=this.participants[b];a[b]={index:c.index};void 0!==c.value&&(a[b].value=c.value)}return a},O1853:function(){for(var a=0;a<this.movableItems.length;a++)this.O8652(this.movableItems[a],!0)},O9530:function(a,b,c){var d=this.getItemByLocalId(this.movableItems,a.id);d||=this.getItemByLocalId(this.staticItems,a.id);if(d){c||(void 0!==a.x&&void 0!==a.x&&void 0!==d.x&&void 0!==d.y?(d.originIsCloseToTargetAtStart=
!1,ml.Misc.O8674({x:a.x,y:a.y},{x:d.x,y:d.y})>=this.O593?(this.O9934(d),d.originIsCloseToTargetAtStart=!0):this.O8235(d)):this.O8235(d,!0));ml.Misc.O2249(a.x)&&ml.Misc.O2249(a.y)&&(d.targetX=a.x,d.targetY=a.y,this.O3404(d));ml.Misc.O2249(a.rot)&&(d.rot=parseInt(a.rot),d.rotatable=!0,d.entity&&(d.entity=null,this.O4533(d)));ml.Misc.O2249(a.state)&&(d.state=a.state);void 0!==a.flip&&d.entity&&(d.flip=a.flip);void 0!==a.randomizerSeed&&(this.O8652(d,!0),a.itemItsOnId?this.O2947(a.itemItsOnId,a.randomizerSeed):
(ig.game.seedableRandom.setSeed(a.randomizerSeed),this.doRandomizeItem(d)));if(void 0!==a.shuffleSeed)if(this.O8652(d,!0),void 0!==a.participantIndex){var e=this.participantSections[a.participantIndex];e&&this.O3596([e],a.shuffleSeed)}else this.O3596(this.neutralSections,a.shuffleSeed);d.isInOtherPrivateSection=this.O8783(d);b&&!c&&this.O8601(b,d);c||ig.game.sounds.shortWhoosh.play()}},O8601:function(a,b){if(this.O5187&&b.entity){var c=a.pos.x-ig.game._rscreen.x;a=a.pos.y-ig.game._rscreen.y;var d=
this.pos.x+(void 0!==b.targetX?b.targetX:b.x)+b.entity.size.x/2-c;b=this.pos.y+(void 0!==b.targetY?b.targetY:b.y)+b.entity.size.y/2-a;var e=Math.sqrt(d*d+b*b)/25;d/=e;for(var f=b/e,g=1;g<=e;g++){b=d*g;var h=f*g;ig.game.O9759(EntityDust,c+5+b+12*Math.random()-6,a+5+h+12*Math.random()-6,{decay:g/e,opacity:45,uiEntity:!0,O3004:!0});ig.game.chance(15)&&ig.game.O9759(EntityBigDust,c+5+b+12*Math.random()-6,a+5+h+12*Math.random()-6,{decay:g/e,opacity:45,O8582:!0,uiEntity:!0,O3004:!0})}}},getItemByLocalId:function(a,
b){if(b)for(var c=0;c<a.length;c++)if(a[c].localId==b){var d=a[c];break}return d},O9071:function(a,b){var c=this;this.O8083=0;this.staticItems=[];this.movableItems=[];this.O9212=[];this.O1506=!1;this.O4578=new ml.Timer;this.O9896=!1;ig.game.O9817.O1311(this.id).done(function(d){c.hashOfFullSetupAtStart=ig.game.strings.O9900(JSON.stringify(d.data));var e=c.O9378(d.data);c.O1713=!!d.isCreator;c.O4931(e);if(0==c.settings.maxParticipants)c.O4578=null;else if(d=c.O5353())d.O8088?(c.addParticipant(ig.game.O1257),
c.O4578=null):c.O9896=!0;c.menuEntries||c.O8587();a?ig.game.O7836.O4739("restart",c.placementId):b&&b()})},O1947:function(){var a=this.O2747(),b=this;ig.game.O9817.O2557(this.id,a).done(function(c){c&&(b.restart(),ig.game.sounds.success.play())})},O2747:function(){var a={};this.O8994(this.staticItems);this.O8994(this.movableItems);a.itemProps=[];a.staticItemsPropIndexAndXY=[];a.movableItemsPropIndexAndXY=[];for(var b=0;1>=b;b++){var c,d;0==b?(c=this.staticItems,d=a.staticItemsPropIndexAndXY):(c=this.movableItems,
d=a.movableItemsPropIndexAndXY);for(var e=0;e<c.length;e++){var f=c[e],g=this.O6406(f),h=this.O2002(a.itemProps,g);-1==h&&(a.itemProps.push(g),h=a.itemProps.length-1);d.push([h,parseFloat(f.x),parseFloat(f.y)])}}a.settings=this.O8232();return a},O8232:function(){var a={},b=this.O4316(),c=this.settings,d;for(d in b){var e=JSON.stringify(b[d]),f=JSON.stringify(c[d]);e!=f&&(a[d]=ig.game.O4507(c[d]))}return a},O6406:function(a){var b={};b.id=a.id;a.state&&(b.state=parseInt(a.state));a.flip&&(b.flip=parseInt(a.flip));
a.rot&&(b.rot=parseInt(a.rot));a.wiggleSpeed&&(b.wiggleSpeed=parseFloat(a.wiggleSpeed));a.wiggleDistance&&(b.wiggleDistance=parseFloat(a.wiggleDistance));return b},O2002:function(a,b){for(var c=-1,d=0;d<a.length;d++){var e=a[d];if(e.id==b.id&&e.state==b.state&&e.rot==b.rot&&e.flip==b.flip&&e.wiggleSpeed==b.wiggleSpeed&&e.wiggleDistance==b.wiggleDistance){c=d;break}}return c},O9378:function(a){var b={staticItems:[],movableItems:[],settings:{}};if(a){Array.isArray(a.movableItemsPropIndexAndXY)||(a.movableItemsPropIndexAndXY=
[]);Array.isArray(a.staticItemsPropIndexAndXY)||(a.staticItemsPropIndexAndXY=[]);for(var c=0;1>=c;c++){var d,e;0==c?(e=a.staticItemsPropIndexAndXY,d=b.staticItems):(e=a.movableItemsPropIndexAndXY,d=b.movableItems);for(var f=0;f<e.length;f++){var g=e[f],h=g[1],k=g[2];g=a.itemProps[g[0]];var l={};l.id=g.id;l.x=h;l.y=k;g.state&&(l.state=parseInt(g.state));g.rot&&(l.rot=parseInt(g.rot));g.flip&&(l.flip=parseInt(g.flip));g.wiggleSpeed&&(l.wiggleSpeed=parseFloat(g.wiggleSpeed));g.wiggleDistance&&(l.wiggleDistance=
parseFloat(g.wiggleDistance));d.push(l)}}b.settings=a.settings;null===b.settings&&(b.settings=void 0)}return b},O9700:function(a){"string"===typeof a&&(a="true"===a);return a},O4931:function(a){this.staticItems=a.staticItems;this.movableItems=a.movableItems;this.settings=this.O4316();if(a.settings)for(var b in this.settings)void 0!==a.settings[b]&&(this.settings[b]=a.settings[b]);this.settings.markSections=this.O9700(this.settings.markSections);this.settings.hasParticipantSections=this.O9700(this.settings.hasParticipantSections);
this.settings.hasNeutralSections=this.O9700(this.settings.hasNeutralSections);this.settings.neutralSectionsShuffle=this.O9700(this.settings.neutralSectionsShuffle);this.settings.participantSectionsShuffle=this.O9700(this.settings.participantSectionsShuffle);void 0!==this.settings.participantValueAtStart&&(this.settings.participantValueAtStart=parseInt(this.settings.participantValueAtStart));void 0!==this.settings.maxParticipants&&(this.settings.maxParticipants=parseInt(this.settings.maxParticipants));
this.O4058();for(b=0;b<a.staticItems.length;b++){var c=this.staticItems[b];c.x=parseFloat(c.x);c.y=parseFloat(c.y);c.isStatic=!0;"fromCenterBelow"==this.settings.staticItemsRevealMode&&(c.targetX=c.x,c.targetY=c.y,c.x=this.size.x/2,c.y=this.size.y+ig.game.O9925)}for(b=0;b<a.movableItems.length;b++)c=this.movableItems[b],c.x=parseFloat(c.x),c.y=parseFloat(c.y),"fromCenterBelow"==this.settings.movableItemsRevealMode&&(c.targetX=c.x,c.targetY=c.y,c.x=this.size.x/2,c.y=this.size.y+ig.game.O9925);this.O8994(this.staticItems);
this.O8994(this.movableItems);this.movableItemsAtStart=ig.game.O4507(this.movableItems);this.staticItemsAtStart=ig.game.O4507(this.staticItems);for(b=0;b<a.staticItems.length;b++)this.O4533(this.staticItems[b]);for(b=0;b<a.movableItems.length;b++)this.O4533(this.movableItems[b]);this.O6311()},O4863:function(a){return{x:parseFloat(a.x),y:parseFloat(a.y),width:parseFloat(a.width),height:parseFloat(a.height)}},O4058:function(){if(this.settings.hasNeutralSections){var a=0;this.neutralSections[a]=this.O4863(this.settings.neutralSections[a])}if(this.settings.hasParticipantSections)for(this.participantSections=
[],a=0;a<this.settings.maxParticipants;a++)this.participantSections[a]=this.O4863(this.settings.participantSections[a]);for(a=0;a<this.movableItems.length;a++){var b=this.movableItems[a];b.entity&&(b.isInOtherPrivateSection=this.O8783(b))}},O6333:function(){var a=7*ig.game.O9925;return[{x:this.size.x/2-a/2,y:2,width:a,height:29}]},O9410:function(){var a=4*ig.game.O9925,b={x:2,y:31,width:a,height:a},c={x:this.size.x-a-2,y:31,width:a,height:a},d={x:2,y:2,width:98,height:24},e={x:b.x+b.width+4,y:this.size.y-
24-2,width:86.5,height:24};return[{x:this.size.x-a-2,y:this.size.y-a-2,width:a,height:a},{x:2,y:this.size.y-a-2,width:a,height:a},b,c,d,{x:this.size.x-d.width-2,y:2,width:d.width,height:24},e,{x:c.x-4-e.width,y:e.y,width:e.width,height:24}]},O4533:function(a){void 0===a.localId&&(a.localId=++this.O8083);var b=["DYNATHING","DECOANIM"],c=ig.game.O4261.getItemBasic(a.id,"ui_mt2"),d=this;c.imagesBeingGenerated.done(function(){a.rot=void 0!=a.rot?a.rot:0;a.flip=void 0!=a.flip?a.flip:0;c.rot=a.rot;c.flip=
a.flip;var e={thingTypeId:c.id,flip:c.flip,attributes:c.attributes,animSheet:ig.game.entityManager.getAnimationForEntity(c,c.rot,c.flip),O9367:!0,O9113:!0,O7213:!0};"STACKWEARB"==a.base&&(e.blinkInMultithing=d.settings.livelyBodies);ig.game.entityManager.O5746(c.O4927(),c,e,!0);var f=d.pos.x+a.x,g=d.pos.y+a.y;a.name=c.name;a.base=c.base;a.attributes=ig.game.O4507(c.attributes);a.rotatable=c.rotatable;a.flippable=a.isStatic||"STACKWEARB"==a.base;a.state||(a.state=void 0);if(0<=b.indexOf(a.base)){var h=
d.getStateRangeFromBaseAndName(a.base,a.name);h&&(a.minState=h.min,a.maxState=h.max,a.state||(a.state=a.minState))}h="Entity"+ig.game.strings.toUpperCaseFirst(c.base.toLowerCase());ig.global[h]||(h="EntityDefault");a.entity=new ig.global[h](f,g,e);a.entity.update();a.isInOtherPrivateSection=d.O8783(a)})},getStateRangeFromBaseAndName:function(a,b){if("DECOANIM"==a)var c={min:1,max:2};else"DYNATHING"==a&&(a=b.split(" "),a=a[a.length-1].split("-"),2==a.length&&(a[0]=a[0].trim(),a[1]=a[1].trim(),this.O8841(a[0])&&
this.O8841(a[1])&&(c={min:parseInt(a[0]),max:parseInt(a[1])})));return c},O8841:function(a){return!isNaN(a)&&a==parseInt(a)},addItem:function(a,b,c,d,e,f,g){if(this.O1713)if(this.O4730||this.O4051){var h,k,l;this.O4730?(h=this.O3405,k=this.O1882,l=this.staticItems):(h=this.O7120,k=this.O4515,l=this.movableItems);if(l.length<k){if(k=ig.game.O4261.getItemBasic(a,"ui_mt1"))0<=h.indexOf(k.base)?this.doAddItem(a,b,c,d,e,f,g):(ig.game.alertDialog.O3813("The following can be included for Multi "+(this.O4730?
" static background":"movables")+": "+ml.Misc.O5563(h)+"."),ig.game.sounds.nocando.play())}else ig.game.O1257.say("i reached the "+(this.O4730?"static":"movable")+" items limit"),ig.game.sounds.nocando.play()}else this.O5265={id:a,rotation:b,flip:c},this.O5265.x=Math.round(ig.input.mouse.x-this.pos.x-ig.game.O9925/2),this.O5265.y=Math.round(ig.input.mouse.y-this.pos.y-ig.game.O9925/2),this.O1857();else ig.game.sounds.nocando.play()},O1857:function(){ig.game.O1257.say("i need to go into set up mode");
this.O6402=!0;ig.game.sounds.shortWhoosh.play()},doAddItem:function(a,b,c,d,e,f,g){var h=this.O4730?this.staticItems:this.movableItems,k={};k.id=a;k.x=void 0!==d?d:Math.round(ig.input.mouse.x-this.pos.x-ig.game.O9925/2);k.y=void 0!==e?e:Math.round(ig.input.mouse.y-this.pos.y-ig.game.O9925/2);k.rot=parseInt(b);k.flip=parseInt(c);k.isStatic=this.O4730;f&&(k.wiggleSpeed=f);g&&(k.wiggleDistance=g);a=h.length;h[a]=k;this.O6498=h[a];this.O4533(h[a]);ig.game.sounds.putdown.play();this.O8234({action:"add",
localId:k.localId})},O7522:function(a){if(a.rotatable||a.flippable)a.rotatable?a.flippable?3==a.rot?(a.flip=a.flip?0:1,a.rot=0):a.rot++:a.rot=3==a.rot?0:a.rot+1:a.flippable&&(a.flip=a.flip?0:1,a.entity.O8393.flip.x=!!a.flip),"STACKWEARB"!=a.base&&(a.entity=null,this.O4533(a)),ig.game.sounds.shortWhoosh.play()},O8655:function(a){for(var b=0;b<a.length;b++){var c=a[b];c.entity&&c.entity.tidyUp&&c.entity.tidyUp();delete c.entity}},restart:function(){this.O6402=!1;this.O8308()?(this.O1506=!1,this.O4708=
{},this.O9071(!0),ig.game.sounds.whoosh.play()):ig.game.O1257.say("only the one who started can restart")},O7866:function(){this.O1713?this.O8308()?this.O4730||(this.O4051?(this.O1947(),this.O4730=!0,this.O4051=!1):(this.O4730=!0,this.O4051=!1,this.O9071()),this.O3938=null):this.O6634():this.O1989();this.O6402=!1},O6634:function(){ig.game.O1257.say(this.name+" was already started here")},O6311:function(){var a=this.O5265;a&&(this.addItem(a.id,a.rotation,a.flip,a.x,a.y),this.O5265=null)},O5129:function(){this.O1713?
this.O8308()?this.O4051||(this.O4730?(this.O1947(),this.O4730=!1,this.O4051=!0):(this.O4730=!1,this.O4051=!0,this.O9071()),this.O3938=null):this.O6634():this.O1989();this.O6402=!1},O4446:function(){this.O4051=this.O4730=!1;this.O3938=null;this.O1947()},O1989:function(){ig.game.alertDialog.O3813("only the creator can do this")},O9447:function(){ml.Misc.openUrl("/info-multi");this.O6402=!1},O5392:function(){this.O4730||this.O4051||ig.game.alertDialog&&ig.game.alertDialog.isOpen||(this.O6402=!this.O6402)},
O9998:function(){this.O4730||this.O4051?confirm("CANCEL CHANGES?")&&(this.O4051=this.O4730=!1,this.O3938=null,this.O9071()):this.close()},O8644:function(){var a=this;this.O9071(void 0,function(){a.O2031()})},O2031:function(){this.O6402=!1;for(var a="",b=this,c=this.O6333(),d=this.O9410(),e=[],f=0;f<=this.maxParticipantsPossible;f++)e.push(f);var g=[],h=[];f=1;for(var k in ig.game.availableFonts)g.push(k),h.push(f++);a=a+'<div class="multithingSettings">'+this.O7333("maxParticipants","Suggested max. active participants",
e,this.settings.maxParticipants);a+=this.O2787("hasNeutralSections","Has neutral section",this.settings.hasNeutralSections);a+=this.O2787("hasParticipantSections","Has participant sections",this.settings.hasParticipantSections);a+=this.O2787("markSections","Mark sections",this.settings.markSections);a+=this.O7333("fontName","font",g,this.settings.fontName,h);a+=this.O2787("neutralSectionsShuffle","Neutral section shuffles",this.settings.neutralSectionsShuffle);a+=this.O2787("participantSectionsShuffle",
"Participant sections shuffle",this.settings.participantSectionsShuffle);a+=this.O5163("wallpaperOpacity","Background opacity (0-1)",this.settings.wallpaperOpacity);a+=this.O5163("participantValueAtStart","Everyone's start value",this.settings.participantValueAtStart);a+=this.O5163("participantValuePrefix","Value prefix",this.settings.participantValuePrefix);a+=this.O7333("staticItemsRevealMode","Statics reveal mode",["none","fromCenterBelow"],this.settings.staticItemsRevealMode);a+=this.O7333("movableItemsRevealMode",
"Movables reveal mode",["none","fromCenterBelow"],this.settings.movableItemsRevealMode);a+=this.O2609("snapToGridRect","snap to grid (18 x 10)",this.settings.snapToGridRect,this.O1564());a+='<p class="pseudoLink" onclick="jQuery(\'#sectionPositions\').slideToggle()" style="background-color: rgba(0,0,0,.1)">Section Positions</p><div id="sectionPositions" style="display: none">';for(f=0;f<this.settings.neutralSections.length;f++)a+=this.O2609("neutralSections_0","neutral section",this.settings.neutralSections[f],
c[f]);for(f=0;f<this.settings.participantSections.length;f++)a+=this.O2609("participantSections_"+f,"participant section "+(f+1),this.settings.participantSections[f],d[f]);this.O1119=!0;ig.game.alertDialog.open({html:a+"</div></div>",O9267:function(){b.O2409()},O3434:"done",O8777:!0})},O4316:function(){return{hasNeutralSections:!1,hasParticipantSections:!1,markSections:!0,fontName:"blackWhite",neutralSectionsShuffle:!0,participantSectionsShuffle:!1,maxParticipants:this.maxParticipantsDefault,wallpaperOpacity:1,
staticItemsRevealMode:"none",movableItemsRevealMode:"none",participantValueAtStart:void 0,participantValuePrefix:void 0,snapToGridRect:this.O1564(),neutralSections:this.O6333(),participantSections:this.O9410()}},O1564:function(){return{x:null,y:null,width:null,height:null}},O7333:function(a,b,c,d,e){var f="min-width: "+30*ig.system.scale+"px";var g="<p>"+ig.game.strings.O9955(b)+": ";g+='<select id="'+ig.game.strings.O9955(a)+'" style="'+f+'" onchange="ig.game.multithing.O8198()">';for(a=0;a<c.length;a++){f=
c[a]==d?' selected="selected"':"";var h=c[a];e?b=e[a]:(b=h,"string"===typeof h&&(b=ig.game.strings.O2801(b).toUpperCase()));h=ig.game.strings.O9955(h);b=ig.game.strings.O9955(b);g+='<option value="'+h+'"'+f+">"+b+"</option>"}return g+"</select></p>"},O2609:function(a,b,c,d){b="<p>"+ig.game.strings.O9955(b)+":<br/>";var e={x:"left",y:"top"},f=0,g;for(g in c){var h=null!==c[g]?c[g]:"",k=d[g]?d[g]:"";b+='<span style="color: rgb(100,100,100); font-size: 90%">'+ig.game.strings.O9955(e[g]?e[g]:g)+'&nbsp;<input id="'+
ig.game.strings.O9955(a+"_"+g)+'" type="text" onchange="ig.game.multithing.O8198()" value="'+ig.game.strings.O9955(h)+'" placeholder="'+ig.game.strings.O9955(k)+'" style="width: 40px" />&nbsp;&nbsp;</span>';2==++f&&(b+="<br/>")}return b+"</p>"},O5163:function(a,b,c,d){void 0===c&&(c="");b="<p>"+ig.game.strings.O9955(b)+": ";b+='<input id="'+ig.game.strings.O9955(a)+'" type="text" ';d||(b+='onchange="ig.game.multithing.O8198()" ');b+='value="'+ig.game.strings.O9955(c)+'"/>';return b+"</p>"},O2787:function(a,
b,c){c=ig.game.O1946+"media/checkbox/"+(c?"on":"off")+"/"+Math.min(ig.system.scale,5)+".png";return'<p class="disableContentSelect" style="cursor: default" onclick="ig.game.settings.toggleCheckbox(\''+a+'\');ig.game.multithing.O8198()"><img src="'+c+'" alt="" id="checkbox_'+a+'" /> '+ig.game.strings.O9955(b)+'<span id="'+a+'Info" style="display: inline-block; opacity: .5; margin-left: 28px; font-size: 90%"></span></p>'},O8198:function(){this.settings.maxParticipants=parseInt(jQuery("#maxParticipants").val());
this.settings.hasNeutralSections=0<=jQuery("#checkbox_hasNeutralSections").attr("src").indexOf("/on/");this.settings.hasParticipantSections=0<=jQuery("#checkbox_hasParticipantSections").attr("src").indexOf("/on/");this.settings.markSections=0<=jQuery("#checkbox_markSections").attr("src").indexOf("/on/");this.settings.neutralSectionsShuffle=0<=jQuery("#checkbox_neutralSectionsShuffle").attr("src").indexOf("/on/");this.settings.participantSectionsShuffle=0<=jQuery("#checkbox_participantSectionsShuffle").attr("src").indexOf("/on/");
this.settings.fontName=jQuery("#fontName").val();this.settings.participantValueAtStart=jQuery("#participantValueAtStart").val();ml.Misc.O2249(this.settings.participantValueAtStart)?this.settings.participantValueAtStart=parseInt(this.settings.participantValueAtStart):this.settings.participantValueAtStart=void 0;this.settings.participantValuePrefix=String(jQuery("#participantValuePrefix").val());this.settings.participantValuePrefix=""==this.settings.participantValuePrefix?void 0:ig.game.strings.O3089(this.settings.participantValuePrefix,
15);this.settings.wallpaperOpacity=this.O4539(jQuery("#wallpaperOpacity").val(),this.settings.wallpaperOpacity);jQuery("#wallpaperOpacity").val(this.settings.wallpaperOpacity);this.settings.staticItemsRevealMode=jQuery("#staticItemsRevealMode").val();this.settings.movableItemsRevealMode=jQuery("#movableItemsRevealMode").val();this.settings.snapToGridRect=this.O4555("snapToGridRect",this.O1564());for(var a=this.O6333(),b=this.O9410(),c=0;c<this.settings.neutralSections.length;c++)this.settings.neutralSections[c]=
this.O4555("neutralSections_"+c,a[c]);for(c=0;c<this.settings.participantSections.length;c++)this.settings.participantSections[c]=this.O4555("participantSections_"+c,b[c]);this.O4058()},O4555:function(a,b){var c={x:0,y:0,width:1,height:1},d;for(d in c){var e=jQuery("#"+a+"_"+d).val();c[d]=""==e.trim()?b[d]:this.O2943(e)}c.x=ml.Misc.O9024(c.x,0,this.size.x);c.y=ml.Misc.O9024(c.y,0,this.size.y);c.width=ml.Misc.O9024(c.width,0,this.size.x);c.height=ml.Misc.O9024(c.height,0,this.size.y);c.x+c.width>this.size.x&&
(c.width=this.size.x-c.x);c.y+c.height>this.size.y&&(c.height=this.size.y-c.y);return c},O2943:function(a){a=ig.game.strings.replaceAll(a,",",".");return ml.Misc.O5090(a)?parseFloat(a):0},O4539:function(a,b){a=ig.game.strings.replaceAll(a,",",".");var c=parseFloat(a);5>=a.length&&ml.Misc.O5090(c)&&0<=c&&1>=c?a=c:(a=b,ig.game.sounds.nocando.play());return a},O2409:function(){this.O1119=!1;this.O1947()},resetParticipantValues:function(a){if(void 0!==this.settings.participantValueAtStart){for(var b in this.participants)this.participants[b].value=
parseFloat(this.settings.participantValueAtStart);a&&ig.game.O7836.O4739("resetParticipantValues",this.placementId);ig.game.sounds.click.play()}},O4778:function(a){if(this.isOpen&&a&&void 0!==this.settings.participantValueAtStart&&this.participants[ig.game.O1257.O2970])if("reset everyone"==a)this.resetParticipantValues(!0);else{var b=["plus","minus","times","divided_by","set"];a=a.toLowerCase().trim();a=ig.game.strings.replaceAll(a,"divided by","divided_by");a=ig.game.strings.replaceAll(a,"multiplied by",
"times");var c=a.split(" ");if(3<=c.length){if(0<=b.indexOf(c[0])){var d=c[0];var e=c[1];var f=ml.Misc.O9452(c," ",2)}else for(var g=0;g<b.length;g++)if(c=a.split(" "+b[g]+" "),2==c.length){f=c[0];d=b[g];e=c[1];break}void 0!==e&&(e=ml.Misc.O5090(e)?parseFloat(e):void 0);if(void 0!==d&&void 0!==e&&void 0!==f&&(a=this.O6261(f))){b=this.participants[a];c=b.value;switch(d){case "set":b.value=e;break;case "plus":b.value+=e;break;case "minus":b.value-=e;break;case "divided_by":b.value/=e;break;case "times":b.value*=
e}this.O1501(c,b.value);ig.game.O7836.O4739("participantValueChange",this.placementId,{userId:a,value:b.value})}}}},O1501:function(a,b){ig.game.sounds[b>a?"score_up":b<a?"score_down":"click"].play()},O6261:function(a){if("me"==a)var b=ig.game.O1257.O2970;else if("you"==a&&2==ml.Misc.O4952(this.participants))for(var c in this.participants){if(c!=ig.game.O1257.O2970){b=c;break}}else for(c in this.participants){var d=ml.Misc.O4671(c);if(d&&0===d.screenName.indexOf(a)){b=c;break}}return b},addParticipant:function(a){var b=
!1;!this.participants[a.O2970]&&!this.O5593()&&(this.participants[a.O2970]={entity:a,index:this.getLowestFreeIndex()},a.O8088&&this.O6091(),b=!0);return b},getLowestFreeIndex:function(){for(var a=-1,b=0;b<this.settings.maxParticipants;b++)if(!this.O4711(b)){a=b;break}return a},removeParticipant:function(a){delete this.participants[a.O2970];a.O8088&&this.O6091()},O8308:function(){var a=this.O5353();return!(!a||!a.O8088)},O5593:function(){return!this.settings.maxParticipants||ml.Misc.O4952(this.participants)>=
parseInt(this.settings.maxParticipants)},expandParticipantEntities:function(){for(var a in this.participants){var b=this.participants[a];b.entity||(b.entity=ml.Misc.O4671(a),b.entity||delete this.participants[a])}},removeParticipantsWhoStoppedViewing:function(){for(var a in this.participants)if(a!=ig.game.O1257.O2970){var b=this.participants[a];b.entity&&b.entity.viewingMultithingPlacementId==this.placementId?ml.Misc.O4671(a)||delete this.participants[a]:delete this.participants[a]}},close:function(){this.isOpen&&
(ig.game.O3447.O5922(ig.game.O1257,this.placementId),this.isOpen=!1,this.O8655(this.staticItems),this.O8655(this.movableItems),this.O4708={},this.placementId=this.masterUser=this.O4578=this.name=null,this.movableItemsAtStart=[],this.staticItemsAtStart=[],this.O9896=!1,this.O8766=null,this.O9212=[],this.O8083=0,this.staticItems=[],this.movableItems=[],this.O9990=this.O6097=this.O3065=null,this.participants={},this.menuEntries=null,this.parent(),ig.ua.mobile&&ig.game.virtualJoystick.O3702())}})});
ig.baked=!0;
ig.module("game.ui.motiondialogitem").defines(function(){window.UIMotionDialogItem=ig.Class.extend({pos:{x:0,y:0},nudge:{x:0,y:0},homePos:{x:0,y:0},size:{x:19,y:19},O1920:4,O1017:0,offset:{x:0,y:0},waggleVel:0,O1747:0,O4004:5,O2348:null,item:null,O2500:!1,binable:!1,O6241:14,rotation:0,flip:0,O2093:null,O3529:.6,O8662:!1,selected:!1,O7286:.6,O8565:1,O2777:0,init:function(a,b,c){this.testId=Math.random();this.item=a;var d=this;this.item.dataLoading.done(function(){d.O3944()});this.pos.x=b;this.pos.y=
c;this.homePos.x=b;this.homePos.y=c},O3944:function(){this.rotation=this.item&&this.item.defRot?this.item.defRot:0},O2367:function(){return ig.game.O4774.O6559(this.pos.x-this.O1920,this.pos.y-this.O1920,this.pos.x+this.size.x+this.O1920,this.pos.y+this.size.y+this.O1920)?(ig.game.O4774.O7551(),!0):!1},O8299:function(){return ig.game.O4774.O8299(this.pos.x-this.O1920,this.pos.y-this.O1920,this.pos.x+this.size.x+this.O1920,this.pos.y+this.size.y)},update:function(){this.O2008();ig.game.O3957.O3497&&
this.O3037()},O3037:function(){ig.game.O4774.O4920()&&this.O8299()&&!this.O2500&&(ig.game.O4774.O6730(),ig.input.state("ctrl")||ig.ua.mobile&&this.O2348&&.5>=this.O2348.delta()?(ig.ua.mobile&&ig.O4534.stopAll(),ig.game.O3957.O6587(this.item,this.item.id,function(){ig.game.O3957.close()}),this.O2348=null):(this.O2500=!0,ig.game.O3199={tid:this.item.id,rotation:0,flip:!1,O1292:!1,rotatable:!1,flippable:!1,base:this.item.base},ig.game.isDraggingTilePlacementBinable=!0,this.O2348=new ml.Timer,ig.game.sounds.pickup.play()));
ig.input.state("click")&&this.O2500&&(this.pos.x=ig.input.mouse.x-this.size.x/2,this.pos.y=ig.input.mouse.y-this.size.y/2,ig.game.O3957.O1827({x:this.pos.x,y:this.pos.y}));this.O2500&&ig.input.released("click")&&!ig.input.O3657()&&(ig.game.panelSet&&ig.input.mouse.x<ig.game.panelSet.panelPos.x?(ig.game.O4774.O9524()&&ig.game.attachmentManager.O5110(ig.game.O3199.base,ig.game.O3199.attributes)||ig.game.O3957.O3114({x:this.pos.x,y:this.pos.y},this.item),this.pos.x=this.homePos.x,this.pos.y=this.homePos.y,
this.O2500=!1,ig.game.O3199=!1,ig.game.isDraggingTilePlacementBinable=!1,this.O2348=null):(this.O2500=!1,ig.game.O3199=!1,ig.game.isDraggingTilePlacementBinable=!1,this.pos.x=this.homePos.x,this.pos.y=this.homePos.y,ig.game.panelSet.O3700()&&ig.game.O3957.O6587(this.item,this.item.id,function(){})))},draw:function(a){this.O2500&&(ig.system.context.globalAlpha=(this.O7286-.2)*this.O2777,this.item.draw(this.homePos.x+this.nudge.x,this.homePos.y+this.nudge.y,this.rotation,this.flip,1),ig.system.context.globalAlpha=
1);var b=this.selected?-2:0,c=ig.game.bottomMenu.subMenus&&ig.game.bottomMenu.subMenus[0]&&ig.game.bottomMenu.subMenus[0].O2751;if(a)a="MOTION"==this.item.base?2:void 0,this.O2500?(ig.system.context.globalAlpha=1,this.item.draw(this.pos.x+this.O1017,this.pos.y,ig.game.O3199.rotation,ig.game.O3199.flip,1,a)):c||(ig.system.context.globalAlpha=(this.selected?this.O8565:this.O7286)*this.O2777,this.item.draw(this.pos.x+this.nudge.x+this.O1017+this.offset.x,this.pos.y+this.nudge.y+this.offset.y+b,this.rotation,
this.flip,1,a));else if(b=!this.O2500&&!ig.game.O3199&&!ig.game.O6921.O3007FromMap&&this.O8299(),!c&&(b||this.selected)&&this.item.name)c=this.item.name.length>this.O6241?this.item.name.substring(0,this.O6241-1)+"..":this.item.name,ig.game.O3957.O6657(c,this.homePos.x+this.nudge.x+this.offset.x+this.size.x/2,this.homePos.y+this.nudge.y+this.size.y+2+this.offset.y,this.O2777);ig.system.context.globalAlpha=1;this.nudge={x:0,y:0}},O4705:function(a,b,c){a=ig.system.O8551(a);b=ig.system.O8551(b);var d=
this.item.img.width/c;c=this.item.img.height;d=d>ig.game.O9925?ig.game.O9925:d;c=c>ig.game.O9925?ig.game.O9925:c;ig.system.context.drawImage(this.item.img.data,0,0,(0+d)*ig.system.scale,(0+c)*ig.system.scale,a,b,d*ig.system.scale,c*ig.system.scale)},doNudge:function(){this.nudge={x:10,y:0}},waggle:function(){this.waggleVel=2},O2008:function(){0!=this.waggleVel&&(this.O1747<=this.O4004?(this.O1017+=this.waggleVel,2<Math.abs(this.O1017)&&(this.waggleVel=-this.waggleVel,this.O1747++)):this.O1747=this.O1017=
this.waggleVel=0)},O6347:function(){this.item&&this.item.id&&ig.game.attachmentManager.O1158(this.item,null,!0)}})});ig.baked=!0;
ig.module("game.ui.motiondialog").requires("game.ui.components.uidialog","game.ui.motiondialogitem").defines(function(){window.MotionDialog=UIDialog.extend({pos:{x:0,y:0},size:{x:0,y:0},isOpen:!1,O2777:0,O5260:null,O6146:!1,O2945:!1,O8992:null,motionIds:[],O3295:0,O6942:[],O3380:[],O7016:20,O9317:{},O8594:null,O8080:1,O9499:[],O5445AsSaved:[],O4164:!1,O8157:0,selectedIndex:0,rowMin:0,rowMax:0,O8448:!1,O3497:!1,O7101:16,O1510:2,O6241:14,O1942:null,O4069:!1,bodyIdOfLastMotionSetLoaded:null,init:function(){},
O8040:function(){var a=ig.ua.mobile?14:.25*ig.system.width;this.size.x=ig.system.width-(a+a);this.size.y=27;this.rowMax=this.rowMin=0;ig.game.O4482&&this.O3380&&1<=this.O3380.length&&(this.size.y+=28,this.rowMax++);this.pos.x=a;ig.game.O1168&&(this.pos.x-=17);this.pos.y=Math.round(ig.system.O2175+40);ig.ua.mobile&&(this.pos.y-=35);this.O8157=0},tryOpen:function(a){if(!(ig.game.O1257&&ig.game.O1257.attachments&&ig.game.O1257.attachments.br||this.isOpen||this.O3468())){var b=!0;!a&&(ig.game.O1257.attachments.h||
ig.game.O1257.attachments.w&&ig.game.O1257.attachments.w.emitsId||ig.game.O1257.O9832("actionable"))&&(b=null==ig.game.attachmentManager.O6791(ig.game.O1257,!0));if(b){this.O8040();this.targetY=this.pos.y;this.pos.y-=5;ig.game.O1795&&(this.pos.y=Math.floor(ig.system.height-35));this.O2777=.2;this.toClose=!1;this.isOpen=!0;1<=this.O3380.length&&(this.selectedIndex=Math.floor(this.O3380.length/2));ig.game.sounds.O2903(ig.game.sounds.whoosh,.5);var c=this;this.O5215().done(function(){c.O7919()})}}},
doPreload:function(){this.O5215().done(function(){})},O1372:function(a,b){var c=0<=["MOTION","STACKWEARB"].indexOf(a.base);"DYNATHING"==a.base&&(c=a.attributes&&(a.attributes.attachable||a.attributes.follows||a.attributes.closelyFollows)&&(!ig.game.attachmentManager.O3248(a)||b));return c},O5184:function(a){return this.O1372(a)&&"MOTION"==a.base},O3468:function(){var a=ig.game.O1257;return a.O5479&&a.O5479.thing&&"CLIMB"==a.O5479.thing.base},O5215:function(a){var b=jQuery.Deferred(),c=ig.game.O1257.attachments.b&&
ig.game.O1257.attachments.b.id;if(!c)return this.motionIds=[],this.O3295=0,this.O6942=[],this.O8157=this.rowMin=1,this.O8992=c,b.reject(),b.promise();if(this.O8992!=c||a){this.O8992=c;var d=this;this.O8992!=this.bodyIdOfLastMotionSetLoaded&&(this.O3497=!1,this.bodyIdOfLastMotionSetLoaded=this.O8992,ig.game.O9817.O2956(this.O8992).done(function(e){e&&e.ids?(d.motionIds=e.ids,d.O3295=e.midpoint,b.resolve()):(d.motionIds=[],d.O3295=0,d.O3380&&1<=d.O3380.length&&(d.O8157=1,d.rowMin=1));d.checkIfWeAreCreatorsOfThisBody(b)}))}else 0==
this.motionIds.length&&(this.O8157=this.rowMin=1,this.motionIds=[],this.O3295=0,this.O6942=[]),b.resolve();return b.promise()},checkIfWeAreCreatorsOfThisBody:function(a){var b=this;ig.game.O4261.getItem_P(b.O8992,"d_motion1").done(function(c){c.creatorId==ig.game.O1257.O2970?(b.O3497=!0,a.resolve()):(b.O8992=null,a.reject())}).fail(function(){a.reject()})},O7919:function(){var a=this.motionIds.length,b=this.O7101+2*this.O1510,c=a*b;c>this.size.x?(c=this.pos.x,b=this.size.x/a):c=this.pos.x+(this.size.x-
c)/2;this.O6942=[];for(var d=0;d<this.motionIds.length;d++){a=ig.game.O4261.getItemBasic(this.motionIds[d],"ui_md4");var e=c+d*b;var f=this.pos.y;this.O6942.push(new UIMotionDialogItem(a,e,f))}0==this.O8157&&(this.selectedIndex=Math.floor(this.motionIds.length/2))},update:function(){this.handleSetDidFinishInitialPossessionLoading();if(this.isOpen){this.pos.y<this.targetY&&(this.pos.y+=1.5,this.pos.y>this.targetY&&(this.pos.y=this.targetY));1>=this.O2777&&(this.O2777+=.2,1<this.O2777&&(this.O2777=
1));if(ig.game.O4146()&&this.O8157<this.rowMax)this.O8157++,this.selectedIndex=Math.floor(this.O7153()/2);else if(ig.game.O9170()&&this.O8157>this.rowMin)this.O8157--,this.selectedIndex=Math.floor(this.O7153()/2);else if(ig.input.pressed("esc")||ig.game.O9170()||ig.game.O1257.O9165==ig.game.O1257.O4583.CLIMBING&&!ig.game.O1257.O3226&&!ig.game.O1257.O4674Previous)ig.input.O6501(),this.close();else if(ig.game.O9971())1>=this.O6942.length&&0==this.O8157?this.close():this.selectedIndex--;else if(ig.game.O8339())1>=
this.O6942.length&&0==this.O8157?this.close():this.selectedIndex++;else if(ig.input.pressed("enter")||ig.game.O7993()){if(null!==this.selectedIndex&&void 0!==this.selectedIndex)if(0==this.O8157)this.O6942[this.selectedIndex]&&(this.O6942[this.selectedIndex].O6347(),ig.game.virtualJoystick.O9842=!1);else{var a=this.O3380[this.selectedIndex];a&&(ig.game.O7747.O9935(a.id,ig.game.O1257,void 0,!0),"DECO"==a.base&&(ig.game.O2116.O4851("sees",a.name),ig.game.O2116.O7884(ig.game.O1257,"does",a.name),ig.game.sounds.shortWhoosh.play()),
ig.game.O2116.O7884(ig.game.O1257,"selects",a.name));ig.game.virtualJoystick.O9842=!1}ig.input.O6501();this.close()}else if(ig.input.pressed("DELETE")){var b=this;this.O2339(function(){b.close()})}this.selectedIndex=this.selectedIndex.limit(0,this.O7153());this.O8386()}this.O2402();this.parent()},O7153:function(){return 0==this.O8157?1<=this.O6942.length?this.O6942.length-1:0:this.O3380&&1<=this.O3380.length?this.O3380.length-1:0},O8855:function(a){ig.game.O1257&&ig.game.attachmentManager&&!ig.game.attachmentManager.O3740(ig.game.O1257)&&
this.O6339(a)},O6339:function(a){if("string"===typeof a){a=a.toLowerCase();a=ig.game.strings.trim(a);var b=this;this.O5215().done(function(){1<=b.motionIds.length&&(b.O7251(a)?(b.O8157=0,b.selectedIndex=Math.floor(b.motionIds.length/2)):b.O7251(a,!0))})}},O7251:function(a,b){for(var c=!1,d=0;d<this.motionIds.length&&!c;d++){var e=ig.game.O4261.getItemBasic(this.motionIds[d],"ui_md3");if(e&&e.base&&e.name)for(var f=e.name.split(","),g=0;g<f.length&&!c;g++){var h=f[g].toLowerCase();h=ig.game.strings.trim(h);
var k=!1;if(b){var l=h.indexOf("*");"*"!=h&&0<=l&&a.length>=h.length-1&&(0==l?(h=h.substr(1),k=a.substr(a.length-h.length)):(h=h.substr(0,h.length-1),k=a.substr(0,h.length)),k=h==k)}else k=h==a;if(k){ig.game.attachmentManager.O1158(e,!0,!0);c=!0;this.isOpen&&this.close();break}}}return c},O9357:function(){if(!this.O8448){this.O8448=!0;var a=this;this.O5215().done(function(){if(1<=a.motionIds.length)for(var b=0;b<a.motionIds.length;b++)ig.game.O4261.getItemBasic(a.motionIds[b],"ui_md1")})}},O8386:function(){for(var a=
0;a<this.O6942.length;a++){var b=this.O6942[a];b.selected=a==this.selectedIndex&&0==this.O8157;b.O2777=this.O2777;b.pos.y=this.pos.y;ig.game.O1795||(b.offset.y=this.pos.y-this.targetY);b.update()}},draw:function(){this.isOpen&&(this.O2793(),this.O7219(),this.O4712())},O2793:function(){for(var a=.1*this.O2777,b=1;5>=b;b++){var c=b-1;this.O6308(this.pos.x-c,this.pos.y-.75*c,this.size.x+2*c,this.size.y+3*c,a)}0==this.motionIds.length&&this.O3497&&(ig.system.context.globalAlpha=.25*this.O2777,this.O5260||
(this.O5260=ig.game.O8159.getImage(ig.game.O8159.motionsDialogLabel)),this.O5260.draw(this.pos.x+this.size.x/2-this.O5260.width/2,this.pos.y+10),ig.system.context.globalAlpha=1);(!ig.game.isFullAccount||ig.game.O1257&&1>=ig.game.O1257.rank)&&0==this.motionIds.length&&0==this.O3380&&(ig.system.context.globalAlpha=.35*this.O2777,ig.game.whiteSmallFont.draw("motions + area possessions",this.pos.x+this.size.x/2,this.pos.y+this.size.y/2,ig.Font.ALIGN.CENTER),ig.system.context.globalAlpha=1)},O6308:function(a,
b,c,d,e){var f=ig.system.context;f.beginPath();f.fillStyle="rgba(0,0,0,"+e+")";f.fillRect(a*ig.system.scale,b*ig.system.scale,c*ig.system.scale,d*ig.system.scale)},O7219:function(){for(var a=1;2>=a;a++)for(var b=0;b<this.O6942.length;b++)this.O6942[b].draw(1==a)},O1827:function(a){var b=!1;this.O4525(a)&&(b=!0,a=this.O2540(a.x),a<this.O6942.length&&this.O6942[a].doNudge());return b},O3114:function(a,b){var c=!1;this.O4525(a)&&(c=!0,a=this.O2540(a.x),this.O8098(b.id,a));return c},O2540:function(a){for(var b=
this.O6942.length,c=0;c<this.O6942.length;c++)if(!this.O6942[c].O2500&&a<=this.O6942[c].pos.x+this.O6942[c].size.x){b=c;break}return b},O8098:function(a,b){if(ig.game.isFullAccount)if(this.O3497){this.bodyIdOfLastMotionSetLoaded=null;var c=this;ig.game.O9817.O9698(a,this.O8992,b).done(function(d){c.O5215(!0).done(function(){c.O7919();ig.game.sounds.putdown.play();ig.game.O1189.register(ig.game.O1189.types.ATTACHED_MOTION)})})}else ig.game.alertDialog.open("You can only add motions for bodies you've created.")},
O2339:function(a){var b=this.O6942[this.selectedIndex]&&this.O6942[this.selectedIndex].item&&this.O6942[this.selectedIndex].item.id;b&&this.O6587(this.O6942[this.selectedIndex].item,b,a)},O6587:function(a,b,c){var d=this;this.bodyIdOfLastMotionSetLoaded=null;ig.game.O4261.getItem_P(this.O8992,"d_motion2").done(function(e){e.creatorId==ig.game.O1257.O2970?ig.game.O9817.O8786(b,d.O8992).done(function(f){d.O5215(!0).done(function(){d.O7919();ig.game.sounds.bin.play();c()})}):ig.game.sounds.nocando.play()})},
O4525:function(a){return a.x>=this.pos.x-30&&a.x<=this.pos.x+this.size.x+30&&a.y>=this.pos.y-30&&a.y<=this.pos.y+this.size.y+30},close:function(){this.parent()},O8661:function(a,b){if(this.O4069){a=a.split(",");for(var c=0;c<a.length;c++){var d=a[c];-1===this.O1715(d)&&(this.O3380.length<this.O7016?(this.O3380.push(ig.game.O4261.getItemBasic(d,"ui_md2",void 0,!0)),b||(0==c&&(this.tryOpen(!0),this.O8157=1,this.selectedIndex=this.O3380.length-1),this.O3380[this.O3380.length-1].isNew=!0)):0==c&&ig.game.sounds.nocando.play())}}},
O9121:function(a,b){this.O4069&&(a=this.O1715(a),0<=a&&(delete this.O9317[this.O3380[a].id],this.O3380.splice(a,1),b||ig.game.sounds.pickup.play(),this.close()))},removeAllAreaPossessionItems:function(){if(1<=this.O3380.length){for(var a=[],b=0;b<this.O3380.length;b++)this.O3380[b].id&&a.push(this.O3380[b].id);this.O3380=[];this.O9317={};ig.game.sounds.pickup.play();this.close()}},O5861:function(a){ig.game.isEditorHere&&ig.game.O4482&&(a=ig.game.strings.replaceAll(a,"dontpossess ",""),a=ig.game.strings.replaceAll(a,
"!",""),a=a.trim().toLowerCase())&&("*"==a?this.removeAllAreaPossessionItems():(a=this.O5181(a))&&this.O9121(a))},O1715:function(a){var b=-1;if(a&&this.O3380)for(var c=0;c<this.O3380.length;c++){var d=this.O3380[c];if(d&&d.id==a){b=c;break}}return b},O5181:function(a){var b=null;if(a&&this.O3380)for(var c=0;c<this.O3380.length;c++){var d=this.O3380[c];if(d&&d.name.toLowerCase()==a){b=d.id;break}}return b},O5029:function(a){if(this.O4069){var b=!1;if(a&&this.O3380)if("*"==a)b=1<=this.O3380.length;
else{a=a.toLowerCase();for(var c=0;c<this.O3380.length;c++){var d=this.O3380[c];if(d&&d.name==a){b=!0;break}}}return b}},O4712:function(){if(1<=this.O3380.length){var a=ig.game.O9925+2;18<=this.O3380.length?a-=5:14<=this.O3380.length&&(a-=3);for(var b=1;2>=b;b++)for(var c=this.pos.x+this.size.x/2-this.O3380.length*a/2,d=0;d<this.O3380.length;d++){var e=this.O3380[d];if(e&&e.name&&e.img&&e.imagesGenerated){var f=c+d*a,g=this.pos.y+38,h=.6,k=d==this.selectedIndex&&1==this.O8157;k&&(g-=2,h=1);ig.game.O4774.O8299(f,
g,f+a,g+ig.game.O9925)&&(k=!0,ig.input.pressed("click")&&(ig.game.O7747.O9935(e.id,ig.game.O1257,void 0,!0),ig.game.O2116.O7884(ig.game.O1257,"selects",e.name),ig.input.O6501(),this.close()));if(1==b)if(ig.system.context.globalAlpha=h*this.O2777,h="MOTION"==e.base||"INTERMOT"==e.base?2:null,"DECOFB"==e.base&&(h=1),0<=ig.game.O3841.indexOf(e.base)&&(.5*e.img.width>ig.game.O9925||e.img.height>ig.game.O9925))this.O4705(e,f,g,e.cellCount,e.base,h);else{var l=k=0;e.img.width<ig.game.O9925&&(k=a/2-e.img.width/
2,l=ig.game.O2953-e.img.height/2);e.draw(f+k,g+l,0,0,1,h)}else k&&(h=e.name.length>this.O6241?e.name.substring(0,this.O6241-1)+"..":e.name,k=this.O9317[e.id],void 0!==k&&(h=ig.game.strings.O9754(k)+" "+h),this.O6657(h,f+ig.game.O2953,g+10,this.opacity)),e.isNew||e.isChangedUpwards?(delete e.isNew,delete e.isChangedUpwards,ig.game.decorator.O2468(f,g,ig.game.O9925.x,ig.game.O9925.y,!0),ig.game.sounds.putdown.play(),ig.game.sounds.collected.play()):e.isChangedDownwards&&(delete e.isChangedDownwards,
ig.game.decorator.O7564({x:f,y:g},!0),ig.game.sounds.pickup.play())}}ig.system.context.globalAlpha=1}},O6657:function(a,b,c,d){var e=ig.Font.ALIGN.CENTER;ig.system.context.globalAlpha=.35*d;ig.game.blackSmallFont.draw(a,b-1,c,e);ig.game.blackSmallFont.draw(a,b+1,c,e);ig.game.blackSmallFont.draw(a,b,c-1,e);ig.game.blackSmallFont.draw(a,b,c+1,e);ig.system.context.globalAlpha=.85*d;ig.game.whiteSmallFont.draw(a,b,c,e)},O4705:function(a,b,c,d,e,f){b=ig.system.O8551(b);c=ig.system.O8551(c);d=a.img.width/
d;var g=a.img.height;e=ig.game.O9925;g=g>ig.game.O9925?ig.game.O9925:g;e*=ig.system.scale;g*=ig.system.scale;ig.system.context.drawImage(a.img.data,0,0,e,g,b,c,e,g);f&&ig.system.context.drawImage(a.img.data,d*f*ig.system.scale,0,e,g,b,c,e,g)},O1602:function(){this.O1942&&this.O3380.push(ig.game.O4261.getItemBasic(this.O1942,"ui_md5",void 0,!0));if(ig.game.O2448){for(var a=0;a<ig.game.O2448.length;a++)this.O3380.push(ig.game.O4261.getItemBasic(ig.game.O2448[a],"ui_md6",void 0,!0));ig.game.O2448=null}ig.game.O7839&&
(this.O9317=ig.game.O4507(ig.game.O7839),ig.game.O7839=null,ig.game.O3957.O3127());this.O9499=this.O2901();this.O5445AsSaved=ig.game.O4507(this.O9317)},O3127:function(){for(var a in this.O9317){var b=ig.game.O2116.O3511[a];b&&(this.O9317[a]=ig.game.O2116.O6041(a,this.O9317[a]),0>=this.O9317[a]&&b.O5246&&this.O9121(a))}},handleSetDidFinishInitialPossessionLoading:function(){if(!this.O4069&&!ig.game.O2448&&!ig.game.O7839){for(var a=!1,b=this.O3380.length-1;0<=b&&!a;b--)this.O3380[b].name||this.O3380[b].O7880||
(a=!0);a&&0!=this.O3380.length||(this.O4069=!0)}},O5355:function(a){for(var b=0,c=0;c<this.O3380.length;c++){var d=this.O3380[c].name;if(d&&d.toLowerCase()==a){a=this.O3380[c].id;this.O9317[a]&&(b=parseInt(this.O9317[a]));break}}return b},O5121:function(a,b,c,d){if(this.O4069){var e=this.O1715(a);-1==e&&this.O8661(a,d);e=this.O1715(a);0<=e&&this.O1644(e,a,b,c,d)}},O1644:function(a,b,c,d,e){var f=!1;void 0===this.O9317[b]&&(this.O9317[b]=0,f=!0);var g=parseInt(this.O9317[b]),h=g;switch(d){case "+":g+=
parseInt(c);break;case "-":g-=parseInt(c);break;case "*":g*=parseInt(c);break;case ":":g=Math.round(g/parseInt(c));break;case "=":g=parseInt(c)}g=ig.game.O2116.O6041(b,g);this.O9317[b]=parseInt(g);c=ig.game.O2116.O3511[b];if(0>=g&&c&&c.O5246)this.O9121(b);else if(ig.game.O1257&&0==ig.game.O1257.vel.x&&0==ig.game.O1257.vel.y&&!e){if(g!=h||f)this.tryOpen(!0),this.O8157=1,this.selectedIndex=a;"="==d?this.O3380[a].isNew=!0:g>h?this.O3380[a].isChangedUpwards=!0:g<h&&(this.O3380[a].isChangedDownwards=!0)}},
O2402:function(){if(ig.game.O4482&&ig.game.areaGroupId&&this.O4069&&!this.O4164)if(this.O8594){if(this.O8594.delta()>=this.O8080&&(this.O8594=null,this.O1441())){var a=this;this.O4164=!0;var b=this.O2901(),c=ig.game.O4507(this.O9317);ig.game.O9817.O3334(ig.game.areaGroupId,b,c).done(function(d){if(d.ok)a.O9499=b,a.O5445AsSaved=c,a.O4164=!1;else throw Error("Could not save area possession set");})}}else this.O8594=new ml.Timer},O2901:function(){for(var a=[],b=0;b<this.O3380.length;b++)this.O3380[b].id&&
a.push(this.O3380[b].id);return a},O1441:function(){var a=!1;if(this.O3380.length!=this.O9499.length||this.O9317.length!=this.O5445AsSaved.length)a=!0;else{for(var b=0;b<this.O3380.length&&!a;b++)this.O3380[b]&&this.O9499[b]&&this.O3380[b].id!=this.O9499[b]&&(a=!0);if(!a)for(var c in this.O9317)if(this.O9317[c]!=this.O5445AsSaved[c]){a=!0;break}}return a}})});ig.baked=!0;
ig.module("game.ui.mediadialog").requires("game.ui.components.uidialog","impact.timer").defines(function(){window.MediaDialog=UIDialog.extend({url:null,size:{x:532,y:304},pos:{x:0,y:0},homePos:{x:0,y:0},mediaType:null,isYouTubeShort:!1,O1709:null,O8112:!1,O6340:null,O1112:null,O8318:null,O9492:null,textAlpha:.5,embedId:"mediaWidget",O2293:!1,mediaTypes:{YouTube:["http://www.youtube.com/","http://youtube.com/","http://m.youtube.com/","http://youtu.be/","https://www.youtube.com/"],Imgur:["http://i.imgur.com/",
"http://imgur.com/","https://i.imgur.com/","https://imgur.com/"],ManylandThirdPartyImage:["http://mlthirdpartycontent.com/image/"],ManylandSnapshot:["http://snapshot.thingistan.com/"],Writable:["writable://"],Vimeo:["http://vimeo.com/"],SoundCloud:["https://soundcloud.com/"],TikTok:"https://www.tiktok.com/ http://www.tiktok.com/ https://tiktok.com/ http://tiktok.com/ https://vm.tiktok.com/ http://vm.tiktok.com/".split(" ")},O8469:function(a,b,c,d,e){var f=!1;if(!ig.game.painter.isRunning)if(this.mediaType=
d?"Embedding":this.O8838(a),"vimeo"==this.mediaType&&!c&&(this.mediaType=null),ig.game.settings.photosensitiveGuard&&this.O6944(this.mediaType))f=!1;else{var g="Imgur"==this.mediaType||"ManylandThirdPartyImage"==this.mediaType||"ManylandSnapshot"==this.mediaType,h="YouTube"==this.mediaType||"Vimeo"==this.mediaType||"TikTok"==this.mediaType;d=h&&ig.game.O1257.O2868()&&1<=ig.game.O1257.attachments.h.lines.length;var k=b==ig.game.O1257.O2970;g=ig.game.settings&&!k&&(g&&ig.game.settings.blockImagePastes||
h&&ig.game.settings.blockVideoPastes);!this.mediaType||d||g||!this.O5329(a)&&"Writable"!=this.mediaType||(this.O8112&&this.O3967(),this.homePos=this.getPos(b),"YouTube"==this.mediaType&&(this.homePos.y-=25),this.url=a,this.O1709=b,this.O2293=!!c,this.O8112=!0,"Writable"==this.mediaType&&(this.O8112=!1),a=0<=["YouTube","Vimeo","SoundCloud","TikTok"].indexOf(this.mediaType),this.O2293||(c=ml.Misc.O4671(b))&&c.O8088&&"Imgur"!=this.mediaType&&"ManylandSnapshot"!=this.mediaType&&ig.game.settings.set("doPlaySound",
!0),"stream"==this.mediaType&&ig.ua.iPad||!ig.game.settings.doPlaySound&&a||this.O5185(b,!!e),f=!0)}return f},O6944:function(a){return 0<=["Imgur","Vimeo"].indexOf(a)},O8373:function(a){var b=this.O8838(a,!0);return 0<="YouTube Imgur ManylandSnapshot ManylandThirdPartyImage SoundCloud Writable".split(" ").indexOf(b)&&this.O9895(b,a)},O5185:function(a,b){if(a=this.O9895(this.mediaType,this.url))if("Writable"==this.mediaType)this.O7040(a);else{var c=this.O1800(this.homePos);this.size.y=(ig.system.O2175-
17-30)*ig.system.scale;this.size.x=Math.round(1.777*this.size.y);if("TikTok"==this.mediaType){var d=ig.ua.mobile?1.3:1.05;this.size.y=Math.floor(this.size.y*d);this.size.x=Math.round(.5625*this.size.y)}else this.isYouTubeShort?(d=ig.ua.mobile?1.3:1.05,this.size.y=Math.floor(this.size.y*d),this.size.x=Math.round(.5625*this.size.y)):"Embedding"!=this.mediaType||ig.ua.mobile&&ig.system.height>ig.system.width?!ig.ua.mobile&&0<=["Imgur","ManylandSnapshot","ManylandThirdPartyImage"].indexOf(this.mediaType)?
(d=1.2,this.size.y=Math.floor(this.size.y*d),this.size.x=Math.floor(this.size.x*d)):ig.ua.mobile&&ig.system.width>ig.system.height&&(d=1.75,this.size.y=Math.floor(this.size.y*d),this.size.x=Math.floor(this.size.x*d)):(d=ig.ua.mobile?1.8:1.3,0<=a.indexOf("//archive.org/embed/")&&(this.size.y*=1.05,this.size.x*=.9),this.size.y=Math.floor(this.size.y*d),this.size.x=Math.floor(this.size.x*d));b&&(this.size.x=this.size.y=0);c="left: "+c.x+"px; top: "+c.y+"px; width: "+this.size.x+"px; height: "+this.size.y+
"px; border: "+1*ig.system.scale+"px solid rgba(0,0,0,.5);";d="";0<=["Imgur","ManylandSnapshot","ManylandThirdPartyImage"].indexOf(this.mediaType)?(c+="background-color: transparent; border: 0;",d="ml.Misc.openUrl('"+ig.game.strings.O9955(a)+"')",b=a,b=ig.game.strings.replaceAll(a,"snapshot.thingistan.com","snapshot.thingistan.com"),d='<div id="'+this.embedId+'" style="'+c+'"><img src="'+ig.game.strings.O9955(b)+'" alt="" oncontextmenu="'+d+'" /></div>'):"TikTok"==this.mediaType||this.isYouTubeShort?
(c+="; border: 0; background-color: transparent;",d='<iframe  sandbox="allow-scripts allow-same-origin allow-pointer-lock allow-presentation"  allow="autoplay; fullscreen" allowfullscreen id="'+this.embedId+'" src="'+ig.game.strings.O9955(a)+'" style="'+c+'"></iframe>'):"Embedding"==this.mediaType?(c+="; border: 0; background-color: transparent;",ig.ua.iOS?d='<div id="'+this.embedId+'" style="'+(c+'; overflow: scroll !important; -webkit-overflow-scrolling: touch !important;"><object type="text/html" data="')+
ig.game.strings.O9955(a)+'" style="width: 100%; height: 5000px;"></object></div>':(c+="; overflow: auto;",d='<iframe  sandbox="allow-scripts allow-same-origin allow-pointer-lock allow-presentation" id="'+this.embedId+'" src="'+ig.game.strings.O9955(a)+'" style="'+c+'" referrerpolicy="no-referrer-when-downgrade"></iframe>')):d='<iframe  sandbox="allow-scripts allow-same-origin allow-pointer-lock allow-presentation"  allow="autoplay; fullscreen" allowfullscreen id="'+this.embedId+'" src="'+ig.game.strings.O9955(a)+
'" style="'+c+'"></iframe>';if(""!=d){ig.ua.iPad&&jQuery("#"+this.embedId).remove();jQuery(d).appendTo("body");if(!this.O2293){var e=this;ig.game.isFullAccount&&(this.O8318=new UIClickText({x:0,y:0},"by",ig.game.blackWhiteFont,"#000000",this.textAlpha),this.O8318.O1378=!1,this.O8318.onClick=function(){ml.Misc.openUrl(e.url)},this.O9492=new UIClickText({x:0,y:0},"video"==this.mediaType?"played by":"shown by",ig.game.blackWhiteFont,"#000000",this.textAlpha),this.O9492.O1378=!1,this.O9492.onClick=function(){ig.game.playerDialog.openForPlayerId(e.O1709)});
this.O1112=new UIClickText({x:0,y:0}," x ",ig.game.blackWhiteFont,"#000000",this.textAlpha);this.O1112.O1378=!1;this.O1112.onClick=function(){e.O3967()}}this.O8112=!0}}},O7040:function(a,b,c){a=a.split("://");if(2==a.length){a=a[1];var d=null,e=a.split("/");2==e.length&&(a=e[0],d=e[1]);a=ig.game.strings.replaceAll(a,"/","");ig.game.writableDialog.open(a,void 0,void 0,!1,d,b,c)}},O1800:function(a){var b=jQuery("#"+ig.game.canvasId).position();a={x:Math.round((a.x-ig.game._rscreen.x)*ig.system.scale-
this.size.x/2+b.left),y:Math.round((a.y-ig.game._rscreen.y)*ig.system.scale-this.size.y-1.25*ig.game.O9925*ig.system.scale+b.top)};ig.ua.mobile&&ig.system.width>ig.system.height&&("Embedding"==this.mediaType?a.y+=160:"YouTube"==this.mediaType&&(a.y+=140));return a},getPos:function(a){var b={x:20,y:20};(a=ml.Misc.O4671(a))&&(b=ig.game.O4507(a.pos));return b},O3967:function(){ig.ua.iPad?(jQuery("#"+this.embedId).attr("src",""),jQuery("#"+this.embedId).html(""),jQuery("#"+this.embedId).attr("style",
"display: none")):jQuery("#"+this.embedId).remove();this.O1709=ig.game.O2116.currentEmbeddingInteract=null;this.O8112=!1;ig.game.O8577()},update:function(){if(this.O8112){var a=this.O1800(this.homePos);0>a.x+this.size.x||0>a.y+this.size.y||a.x>window.innerWidth||a.y>window.innerHeight?this.O3967():(jQuery("#"+this.embedId).css("left",a.x+"px"),jQuery("#"+this.embedId).css("top",a.y+"px"));ig.game.O1795||(this.O6340?4>=this.O6340.delta()&&((!ig.game.panelSet||!ig.game.panelSet.O4056||!ig.game.panelSet.O4056.inputBoxHasFocus)&&
ig.system.canvas.focus(),this.O6340=new ml.Timer):this.O6340=new ml.Timer);this.O8318&&this.O8318.update();this.O9492&&this.O9492.update();this.O1112&&this.O1112.update();ig.input.state("esc")&&(ig.input.O6501(),this.O3967())}},draw:function(){if(this.O8112){var a=this.homePos.y-ig.game._rscreen.y-this.size.y/ig.system.scale-33,b=this.homePos.x-ig.game._rscreen.x-this.size.x/2/ig.system.scale+1,c=this.homePos.x-ig.game._rscreen.x+this.size.x/2/ig.system.scale;this.O8318&&(this.O8318.pos={x:b,y:a},
this.O8318.draw());this.O9492&&(this.O8318&&(ig.system.context.globalAlpha=this.textAlpha,ig.game.blackWhiteFont.draw("|",b+12,a),ig.system.context.globalAlpha=1),this.O9492.pos={x:b+19,y:a},this.O9492.draw());this.O1112&&(this.O1112.pos={x:c-7,y:a},this.O1112.draw())}},O8838:function(a,b){var c=null;if(null!=a&&""!=a&&"http://"!=a&&"https://"!=a)for(var d in this.mediaTypes)for(var e=this.mediaTypes[d],f=0;f<e.length;f++){var g=ig.game.strings.replaceAll(e[f],"http://","https://");if(0===a.indexOf(e[f])||
0===a.indexOf(g)){c=d;break}}"SoundCloud"==c&&!b&&(c=null);return c},O9895:function(a,b){var c=null;switch(a){case "YouTube":c=this.O1334(b);break;case "Imgur":c=this.O8695(b);break;case "ManylandSnapshot":c=this.O1074(b);break;case "Writable":c=this.O3439(b);break;case "ManylandThirdPartyImage":c=this.O3425(b);break;case "Vimeo":c=this.O4753(b);break;case "Embedding":c=this.O3158(b);break;case "SoundCloud":c=this.O9782(b);break;case "TikTok":c=this.O8465(b)}"Writable"!=a&&!this.O5329(c)&&(c=null);
return c},O5329:function(a){var b=!1;a&&(b=a.toLowerCase(),b=(0===a.indexOf("http://")||0===a.indexOf("https://")||0===a.indexOf("//"))&&-1===b.indexOf("javascript")&&-1===a.indexOf(" ")&&-1===a.indexOf('"')&&-1===a.indexOf("'")&&-1===a.indexOf("(")&&-1===a.indexOf(")")&&-1===a.indexOf(";")&&-1===a.indexOf("<")&&-1===a.indexOf(">")&&6<=a.length);return b},O2452:function(a){return 0===a.indexOf("https://soundcloud.com/")},O3158:function(a){a||="";a+=0<=a.indexOf("?")||0<=a.indexOf("#")?"&":"?";return a+
("embedSource=manyland&embedScale="+String(ig.system.scale))},O1334:function(a){var b=null,c=null,d="";this.isYouTubeShort=!1;if(a.indexOf("/shorts/")!==-1){if(a=a.match(/\/shorts\/([^/?&#]+)/))c=a[1],this.isYouTubeShort=!0}else a.indexOf("youtu.be/")!==-1?(a=a.match(/youtu\.be\/([^/?&#]+)/))&&(c=a[1]):(a=a.split("v="),1<=a.length&&(a=a[1])&&(c=a.indexOf("#"),-1!=c&&(d="&start="+a.substring(c+3),a=a.substring(0,c)),c=a.indexOf("&"),-1!=c&&(a=a.substring(0,c)),c=a));c&&(b="//www.youtube.com/embed/"+
c+"?autoplay=1&rel=0&controls=0&showinfo=0",d&&(b+=d));return b},O8695:function(a){var b=null;0<=a.indexOf("/gallery")||0<=a.indexOf("/a/")||(a=a.split("com/"),1<=a.length&&(b=a[1],a=b.split("."),1<=a.length&&(b=a[0]),b="//i.imgur.com/"+b+".jpg"));return b},O1074:function(a){return a},O3439:function(a){return a},O3425:function(a){return a},O4753:function(a){var b=null;(a=this.O3604(a,"http://vimeo.com/"))&&(b="//player.vimeo.com/video/"+a+"?title=0&amp;byline=0&amp;portrait=0&amp;autoplay=1");return b},
O9782:function(a){var b=null,c=this.O3604(a,"https://soundcloud.com/");c||this.O3604(a,"http://soundcloud.com/");c&&(b="https://soundcloud.com/"+c);return b},O3604:function(a,b){var c=null;a&&a.length>b.length&&0===a.indexOf(b)&&(c=a.substring(b.length));return c},O8465:function(a){var b=null,c=null;a.indexOf("vm.tiktok.com/")!==-1?(a=a.match(/vm\.tiktok\.com\/([^/?&#]+)/))&&(c=a[1]):a.indexOf("/video/")!==-1&&(a=a.match(/\/video\/(\d+)/))&&(c=a[1]);c&&(b="https://www.tiktok.com/player/v1/"+c+"?autoplay=1&music_info=0&description=0&onMute=0");
return b}})});ig.baked=!0;
ig.module("game.ui.writabledialog").requires("game.ui.components.uidialog").defines(function(){window.WritableDialog=UIDialog.extend({pos:{x:0,y:0},homePos:{x:0,y:0},size:{x:532,y:304},isOpen:!1,opacity:0,energy:0,O5115:0,O3038:5,energyMin:-150,energyMax:100,rgbBackground:null,rgbText:null,title:null,threadTitle:null,threadTitleClarification:null,threadId:null,O6726:null,O8721:null,threads:[],comments:[],forumId:null,attributes:{},O7851:{},O9931:!1,O4917:!1,O9701:null,O6399:"",O3070:null,O5250:!1,
O8033:!1,O8245:!1,O2925:30,O7773:20,O5538:1,O1076:50,isWriting:!1,O8028:!1,O5917:!1,O9240:!1,threadIsSticky:!1,O9294:!1,O7680:[],O6321:!1,O6826:0,O3994:4E4,O7970:null,O8241:!1,O7321:null,O3260:null,areaGroupId:null,hasCalendarEvents:null,O8924:null,O4172:5,O6643:null,O9290:200,O5771:!1,O4319:900,O2287:!1,isEditorOfAssociatedArea:!1,O8833:!1,O2193:!1,O8868:!1,canRead:!1,O3320:!1,O2341:"255,255,255",O1126:"0,0,0",O8433:"January February March April May June July August September October November December".split(" "),
O9463:!1,mainBoardId:null,onlyEditorsCanAddThreads:!1,onlyEditorsCanAddComments:!1,onlyEditorsCanRead:!1,O5188:[],O4585:null,postKeyRequired:!1,O7012:50,O3489:"gotcha",O8955:!1,O8967:!1,O8801:0,O2758:5,O7991:!1,O2715:3,rgbBackgroundOverride:null,rgbTextOverride:null,O1939:function(a){a&&ig.game.O1257&&this.open(a.id,ig.game.O1257.pos.x,ig.game.O1257.pos.y,!0)},O557:function(a,b){if(a){var c=this;ig.game.O4261.getItemBasic(a,"ui_wrd4").imagesBeingGenerated.done(function(){c.open(a,null,null,b)})}},
O3112:function(a,b,c){if(this.isOpen&&a==this.forumId)this.threadTitle=null,this.O3752(void 0,b);else{this.close();var d=this,e=ig.game.O4261.getItemBasic(a,"ui_wrd3");e&&e.imagesBeingGenerated.done(function(){d.open(a,null,null,!0,b)})}c||ig.game.sounds.click.play()},open:function(a,b,c,d,e,f,g){if(!this.isOpen&&a){this.mainBoardId="5391c17d7793ec237dbe56d5";this.O8967=!1;this.rgbBackgroundOverride=f;this.rgbTextOverride=g;if(void 0===b||null===b)b=ig.game.O1257.pos.x;if(void 0===c||null===c)c=ig.game.O1257.pos.y;
this.O5250=!!d;this.O3070={x:b,y:c};this.forumId=a;this.threadId=e;this.title=this.threadTitle=null;this.threads=[];this.comments=[];this.O7680=[];this.O8028=!1;this.O4585=this.areaGroupId=null;this.rgbBackground=this.O2341;this.rgbText=this.O1126;this.rgbBackgroundOverride&&(this.rgbBackground=this.rgbBackgroundOverride);this.rgbTextOverride&&(this.rgbText=this.rgbTextOverride);this.O9240=this.O5917=!1;this.O2744(b,c);this.O6826=0;this.O8241=!1;this.energy=this.energyMin;this.O5115=this.O3038=d?
25:5;this.O4917=!1;this.O9701=null;this.O6321=!1;this.O6643=this.O7970=null;this.O9931=this.O4868();this.hasCalendarEvents=this.O3260=this.O7321=this.O8924=null;this.onlyEditorsCanRead=this.onlyEditorsCanAddComments=this.onlyEditorsCanAddThreads=this.canRead=this.O2193=this.O8868=this.O8833=this.O2287=this.O5771=!1;this.attributes={};this.O5188=[];this.O8955=!1;ig.game.O2974();var h=this,k=ig.game.O4261.getItemBasic(this.forumId,"ui_wrd2");k?k.imagesBeingGenerated.done(function(){h.O8955||(h.title=
k.name,h.rgbBackground=k.rgb?k.rgb:h.O2341,h.rgbText=k.rgb2?k.rgb2:h.O1126,h.rgbBackgroundOverride&&(h.rgbBackground=h.rgbBackgroundOverride),h.rgbTextOverride&&(h.rgbText=h.rgbTextOverride),h.attributes=k.attributes?k.attributes:{},h.O5601()?(h.O5465(),h.postKeyRequired=!ig.game.O1189.check(ig.game.O1189.types.SOLVED_BASE_POST_KEY),h.O9950(f,g)):h.O4001()?(h.O5465(),h.O9950()):ig.game.O9817.O7334(h.forumId).done(function(l){h.O8955||(h.O5465(l),h.O9950(l))}),ig.game.O3957&&ig.game.O3957.O8855("read"))}):
h.close()}},O9950:function(a){this.toClose=!1;this.isOpen=!0;a&&(a.name&&(this.title=a.name),a.rgbBackground&&(this.rgbBackground=a.rgbBackground),a.rgbText&&(this.rgbText=a.rgbText),this.rgbBackgroundOverride&&(this.rgbBackground=this.rgbBackgroundOverride),this.rgbTextOverride&&(this.rgbText=this.rgbTextOverride));this.setInsetStyle();this.O5719();this.canRead?a&&a.isBannedFromAssociatedArea?this.O7569("Oops, editors blocked you from this Writable and its area"):(ig.game.O2116.O7884(ig.game.O1257,
"reads",this.title),this.threadId?this.O3752(void 0,this.threadId):this.O3752()):this.O7569("This Writable can only be read by its editors");this.O6195()},O7569:function(a){jQuery("#contentPart").html('<div class="writableHeader" style="text-align: center; margin-top: 50px; margin-left: 30px; margin-right: 30px">'+ig.game.strings.O9955(a)+"</div>")},O6195:function(){ig.game.O2974();this.toClose=!1;this.isOpen=!0},O4868:function(a){if(!this.forumId||!ig.game.O1257)return!1;a=this.mainBoardId==this.forumId;
this.O9463=0<=["531bf4de83eaa4ea1f0001e8","53eb8700864ee8d813183bd4","54c913c49aba66040d0801e0"].indexOf(ig.game.O1257.O2970);var b=["5443ee092d4423a55ec3c4aa","527f940256ced31014000112"];a=!a&&ig.game.O1257&&ig.game.O1257.rank>=this.O5538&&ig.game.isFullAccount&&-1===b.indexOf(ig.game.O1257.O2970)&&!this.O9463;this.O3320=this.O1180(this.forumId,ig.game.O1257.rank);a&&!this.O3320&&(a=!1);return a},openThreadDirectly:function(a){ig.game.O2974();a=ig.game.strings.replaceAll(a,"writable://","");a=a.split("/");
if(2==a.length){var b=a[0],c=a[1],d=ig.game.O4261.getItemBasic(b,"ui_wrd5");d.imagesBeingGenerated.done(function(){ig.game.writableDialog.open(b,ig.game.O1257.pos.x,ig.game.O1257.pos.y,d.rgb,d.rgb2,d.name,null,c)})}},O5465:function(a){this.onlyEditorsCanRead=this.onlyEditorsCanAddThreads=this.onlyEditorsCanAddComments=this.postKeyRequired=this.canRead=this.O2193=this.O8868=this.O8833=this.isEditorOfAssociatedArea=!1;a&&a.areaGroupId?(this.areaGroupId=a.areaGroupId,this.onlyEditorsCanAddComments=!!a.onlyEditorsCanAddComments,
this.onlyEditorsCanAddThreads=!!a.onlyEditorsCanAddThreads,this.onlyEditorsCanRead=!!a.onlyEditorsCanRead,this.postKeyRequired=!!a.postKeyRequired,"55801d92394cd5180f55f9de"==this.forumId&&(this.onlyEditorsCanAddThreads=!0),this.O8868=(this.O8833=this.isEditorOfAssociatedArea=a=!!a.isEditorOfAssociatedArea)||!this.onlyEditorsCanAddComments,this.O2193=a||!this.onlyEditorsCanAddThreads,this.canRead=a||!this.onlyEditorsCanRead):(this.isEditorOfAssociatedArea=!1,this.O8833=ig.game.O1257&&10<=ig.game.O1257.rank,
this.canRead=this.O2193=this.O8868=!0)},O3752:function(a,b){if(!this.O6321){this.O6321=!0;void 0==a&&(a=null);this.threadsId=null;this.O9294=this.threadIsSticky=!1;if(a){-1===this.O5188.indexOf(a)&&this.O5188.push(a);var c=this.O5188.length;if(c>=("suggestion board"==this.title?100:50)){this.O6321=!1;return}}c=this.O5188.length;var d=this;this.forumId&&ig.game.O9817.O4241(this.forumId,a).done(function(e){d.canRead?(d.O7970=e.time,e.areaGroupId&&(d.areaGroupId=e.areaGroupId),e.threads&&1<=e.threads.length?
a?0==e.threads.length?d.O8028=!0:(d.threads=d.threads.concat(e.threads),d.O5747sOverview(!0)):(d.threads=e.threads,d.O5431(d.threads),ig.game.O5285.setItem("forumLastKnownCommentId_"+d.forumId,d.threads[0].lastComment.id),d.O7914()):a||(d.threads=[],d.O7914()),d.O6321=!1,null===d.hasCalendarEvents&&d.loadCalendar(null,null,!0)):d.O5747sOverview(!0);b&&(d.threadTitle=d.O1094(b),d.O6321=!1,d.O7816(b))})}},O1094:function(a){if(this.threads)for(var b=0;b<this.threads.length;b++)if(this.threads[b]._id==
a){var c=this.threads[b].title;break}return c},O5431:function(a){if(a)for(var b=a.length-1;1<=b;b--){var c=a[b];"sticky"==c.titleClarification&&!c.wasMoved&&(c=a.splice(b,1)[0],c.wasMoved=!0,a.unshift(c))}},O7816:function(a,b,c,d,e,f){if(!this.O6321){this.O6321=!0;void 0==e&&(e=null);a&&(this.threadId=a);b&&(this.threadTitle=b);this.threadTitleClarification=this.O2542(a);c&&(this.O6726=c);d&&(this.O8721=d);var g=this;g.O6321=!0;f&&(this.O6643=e,e=f);ig.game.O9817.O5587(this.threadId,void 0,e).done(function(h){h.comments&&
1<=h.comments.length?(ig.game.debug.O8913&&console.log("getForumThreadComments result:",h),g.O7970=h.time,g.comments=h.comments,g.O5095(g.comments),g.O7914(),g.O8801=0):1>=g.O8801&&(g.threadLoadTries++,g.O6321=!1,f=e=null,g.O7816(a,b,c,d,e,f));g.O6321=!1})}},O6913:function(a){this.O7321=this.O3260=null;this.O5771=!0;this.O7816(a,this.O1624(a))},O1624:function(a){var b="";if(this.threads)for(var c=0;c<this.threads.length;c++){var d=this.threads[c];if(d._id==a){b=d.title;break}}return b},loadCalendar:function(a,
b,c){if(this.forumId&&!this.O6321){this.O6321=!0;void 0!=a&&(this.O7321=a);void 0==b&&(this.O3260=b);a=new Date;this.O7321||(this.O7321=new Date(a.getFullYear(),a.getMonth(),1));this.O3260||(this.O3260=new Date(a.getFullYear(),a.getMonth()+2,1));a=this.O7321.toISOString();b=this.O3260.toISOString();c&&(this.O7321=this.O3260=null);this.threadsId=null;var d=this;ig.game.O9817.O7627(this.forumId,a,b).done(function(e){d.O8924=null;e&&e.events&&(d.O8924=e.events);d.hasCalendarEvents=null!=d.O8924&&1<=
d.O8924.length;c?d.hasCalendarEvents?jQuery(".calendarLink").show():jQuery(".calendarLink").hide():d.O7914();d.O6321=!1})}},O2759:function(){if(!this.O6321&&(this.O6321=!0,null!=this.threadId)){var a=this;ig.game.O9817.O5587(this.threadId,this.comments[0].ts,null).done(function(b){a.isOpen&&b.comments&&1<=b.comments.length?(ig.game.debug.O8913&&console.log("getForumThreadComments result:",b),b.comments.reverse(),a.comments&&1<=a.comments.length&&2<=b.comments.length&&(a.O6643=b.comments[b.comments.length-
2].ts),a.comments=b.comments.concat(a.comments),a.O5095(a.comments),a.O7914()):a.O8241=!1;a.O6321=!1})}},O6198:function(){if(!this.O6321&&(this.O6321=!0,null!=this.threadId)){var a=this;ig.game.O9817.O5587(this.threadId,null,this.comments[this.comments.length-1].ts).done(function(b){a.isOpen&&b.comments&&1<=b.comments.length&&(a.comments=a.comments.concat(b.comments),a.O5095(a.comments),a.O7914());a.O6321=!1})}},tryShowThreadsWithoutLoading:function(){this.O3260=this.O7321=this.threadId=null;this.threads&&
1<=this.threads.length?this.O7914():this.O3752()},O7914:function(){this.O7321?this.O940():this.threadId?this.O9394():this.O5747sOverview()},O8570:function(){this.O8033=!this.O8033;jQuery("#addThreadLink").html("&nbsp;&nbsp;"+this.O1026());jQuery("#addThread").slideToggle(300);ig.game.sounds.click.play()},O1026:function(){var a="";if(!ig.game.isFullAccount||1>=ig.game.O9392)a='<span style="font-size: 80%; text-decoration: underline">Add New</span> ';return a+(this.O8033?ig.game.strings.arrows.up:ig.game.strings.arrows.down)},
O5747sOverview:function(a){this.O8721=this.O6726=this.threadId=this.threadTitle=null;this.O8033=this.O5917=this.O9240=!1;this.O9701=null;this.O6826=0;var b='<div class="writableHeader">'+ig.game.strings.O9955(this.title);!this.O2193||!this.O9931&&ig.game.isFullAccount||(b+=' &nbsp; <span class="pseudolink" id="addThreadLink" onclick="ig.game.writableDialog.O8570()">&nbsp;&nbsp;'+this.O1026()+"</span>");this.areaGroupId&&(b+=' <span class="pseudoLink areaInfoLink" style="font-size: 80%; opacity: .6; float: right"  onclick="ig.game.writableDialog.O1604()">...</span>');
var c=new Date;b+='<span class="calendarLink pseudolink" style="display: '+(this.hasCalendarEvents?"block":"none")+(this.areaGroupId?"; margin-right: 30px":"")+'" onclick="ig.game.writableDialog.loadCalendar()">'+this.O8433[c.getMonth()]+"</span>";c=new Date;b=b+"</div>"+this.O4105();b+='<table class="threads">';for(var d=0;d<this.threads.length;d++){var e=this.threads[d];if("hidden"!=e.titleClarification||ig.game.debug.O8913){var f=ig.game.strings.O9109(ig.game.strings.O9955(e.title)),g=localStorage.getItem("lastReadDate_"+
e._id),h=!1;this.O6713(new Date(e.lastComment.ts),c)<=this.O2925&&(h=void 0==g||new Date(e.lastComment.ts)>new Date(g));var k="null",l="null";h&&g&&(k="'"+g+"'",(g=localStorage.getItem("lastReadDateWithPadding_"+e._id))&&(l="'"+g+"'"));k="ig.game.writableDialog.O4553("+d+","+k+","+l+")";b+='<tr id="threadRow'+d+'">';b+='<td class="containsNew pseudolink" onclick="'+k+'">'+(h?ig.game.strings.arrows.right:"")+"</td>";b+='<td class="threadTitle pseudolink" onclick="'+k+'">'+f+this.O2921(e.titleClarification)+
(e.sticky?' <span class="stickyClarification">[sticky]</span>':"")+"</td>";b+='<td class="threadLastUser">';b+=ig.game.strings.O9955(this.O9360(e.lastComment.userName,e.lastComment.userId,!0));b+=' <span class="threadLastUserDateTime">'+ig.game.strings.O3177(e.lastComment.ts,this.O7970)+"</span>";b+="</td>";b+="</tr>"}}b+="</table>";jQuery("#contentPart").html(b);this.O1315();a||jQuery("#writableDialog").scrollTop(0)},O1604:function(){var a=this;ig.game.O9817.O3588(this.areaGroupId).done(function(b){b&&
(a.isEditorOfAssociatedArea?ig.game.O9817.O5456(a.forumId).done(function(c){c&&a.O6555(b,c)}):a.O6555(b))})},O6555:function(a,b){var c="<p>This Writable is maintained by the editors of "+ig.game.strings.O9955(a.name);if(this.onlyEditorsCanAddThreads||this.onlyEditorsCanAddComments||this.onlyEditorsCanRead)c+=" (only they can ",this.onlyEditorsCanRead?c+="add threads, add comments, and read":this.onlyEditorsCanAddComments?c+="add threads and comments":this.onlyEditorsCanAddThreads&&(c+="add threads"),
c+=" here)";if(a.editors){c+=":</p><p>";for(var d=0;d<a.editors.length;d++){var e=a.editors[d],f="ig.game.playerDialog.openForPlayerId('"+e.id+"')";1<=d&&(c+=", ");c+='<span class="pseudoLink" onclick="'+f+'">'+ig.game.strings.O9955(e.name)+"</span>";e.isListEditor&&(c+="*")}}c+="</p>";if(this.isEditorOfAssociatedArea&&b){d="";b.postKey&&(d=ig.game.strings.O9955(b.postKey));c+='<div><p>Post key: <input type="text" id="postKey" maxlength="'+this.O7012+'" style="text-transform: uppercase" value="'+
d+'"/> (<span class="pseudoLink" onclick="jQuery(\'#postKeyInfo\').slideToggle()">?</span>)</p><div id="postKeyInfo" style="display: none; background-color: rgb(245,245,245); border-radius: 5px; text-transform: uppercase; padding: 5px; margin: 10px; width: 80%; position: relative;margin-left: auto; margin-right: auto; color: rgba(0,0,0,.6)">   This optional key must be entered by everyone before making their first comment.    It can be mentioned in a rules sticky to require reading the rules before commenting.</div></div>';
var g=this;var h=function(){var k=jQuery("#postKey").val();k&&(k=ig.game.strings.replaceAll(k,"  "," "),k=k.toLowerCase().trim());k!=b.postKey&&(""==k&&(k=null),ig.game.O9817.O1387(g.forumId,k).done(function(l){l&&l.ok?(g.postKeyRequired=!!k,ig.game.sounds.success.play()):ig.game.sounds.nocando.play()}))}}ig.game.alertDialog.open({html:c,O9267:h})},O2921:function(a){var b="";a&&"locked"!=a&&"hidden"!=a&&(b=ig.game.strings.O9955(a),b=' <span class="titleClarification">['+b+"]</span>");return b},O4553:function(a,
b,c){ig.game.sounds.click.play();if(a=this.threads[a])this.threadIsSticky=!!a.sticky,this.O9294=!!a.locked,this.O7816(a._id,a.title,a.ts,a.lastComment.ts,b,c)},O2542:function(a){var b=null;if(this.threads)for(var c=0;c<this.threads.length;c++)if(this.threads[c]._id==a){b=this.threads[c].titleClarification;break}return b},O9394:function(a){if(this.comments&&this.comments[0]){this.O9701=null;this.O6826=0;var b='<div class="writableHeader"><span class="pseudolink arrowBack" onclick="ig.game.writableDialog.'+
(this.O5771?"loadCalendar":"tryShowThreadsWithoutLoading")+'();ig.game.sounds.click.play();">'+ig.game.strings.arrows.left+'&nbsp;&nbsp;</span> <span id="threadTitleInThread">'+ig.game.strings.O9109(ig.game.strings.O9955(this.threadTitle?this.threadTitle:""))+this.O2921(this.threadTitleClarification)+(this.threadIsSticky?' <span class="stickyClarification">[sticky]</span>':"")+"</span></div>";var c=ig.game.O9925*ig.system.scale,d="width: "+c+"px; height: "+c+"px",e=!1;b+='<div id="placeholderOlder"></div><table class="thread">';
for(var f=0;f<this.comments.length;f++){var g=this.comments[f],h=g.userId==ig.game.O1257.O2970,k=ig.game.strings.O9955(g.userId),l=ig.game.strings.O9955(this.O9360(g.userName,g.userId)),m=this.O9843(g._id);m&&(this.O4585=g._id);var n="";!e&&this.O6643&&new Date(g.ts)>new Date(this.O6643)&&(n=' id="placeToJumpTo"',e=!0);b+="<tr"+n+">";b+='<td class="userDateTime">';n=g.lastEdited&&this.getTimestampSecondsDifference(g.ts,g.lastEdited)>this.O4319;b+='<div class="userDateTimeWrapper" style="height: '+
(c+(n?56:41))+'px">';b+='<div class="user"><canvas class="userIcon i'+k+" "+(h?"ownUserIcon":"")+'" style="'+d+'" width="'+c+'" height="'+c+'"';h&&(b+=' onclick="ig.game.writableDialog.O4453()" ');b+="></canvas> ";b+='<span class="pseudolink threadUserName" onclick="javascript:ig.game.playerDialog.openForPlayerId('+this.O8976(k)+')">'+l+"</span></div>";this.O8241&&f==this.comments.length-1&&h||(b+='<div class="dateTime">'+ig.game.strings.O3177(g.ts,this.O7970)+(n?"/<br/>"+ig.game.strings.O3177(g.lastEdited,
this.O7970):"")+"</div>");b+="</div>";b+=this.O7885(g,h);if(h){var p="ig.game.writableDialog.O625('"+f+"')";b+='<div class="pseudolink editButton" onclick="'+p+'">'+ig.game.strings.arrows.right+"&nbsp;&nbsp;</div>"}else if(ig.game.O1257&&5<=ig.game.O1257.rank||this.O8833)p="ig.game.writableDialog.O2033('"+ig.game.strings.O9955(g._id)+"')",b+='<div id="editButton_'+g._id+'" class="pseudolink editButton" onclick="'+p+'">'+ig.game.strings.arrows.right+"&nbsp;&nbsp;</div>";b+='<div id="commentOptions_'+
g._id+'" class="commentOptions">';this.O8833&&(m?(h||(k="",this.threadTitleClarification&&(k=ig.game.strings.O9955(this.threadTitleClarification)),b+='<div class="clarification"><input type="text" id="clarificationInput" value="'+k+'" placeholder="title clarification"></div>'),b+='<div style="font-size: 75%">',b=this.threadIsSticky?b+('   <div class="pseudolink" onclick="ig.game.writableDialog.O3426(false)">'+ig.game.strings.arrows.right+"&nbsp;Unstickify&nbsp;thread</div>"):b+('   <div class="pseudolink" onclick="ig.game.writableDialog.O3426(true)">'+
ig.game.strings.arrows.right+"&nbsp;Stickify&nbsp;thread</div>"),b=this.O9294?b+('   <div class="pseudolink" onclick="ig.game.writableDialog.O1571(false)">'+ig.game.strings.arrows.right+"&nbsp;Unlock&nbsp;thread</div>"):b+('   <div class="pseudolink" onclick="ig.game.writableDialog.O1571(true)">'+ig.game.strings.arrows.right+"&nbsp;Lock&nbsp;thread</div>"),b+='   <div class="pseudolink" onclick="ig.game.writableDialog.O4665()">'+ig.game.strings.arrows.right+"&nbsp;Remove&nbsp;thread</div>"):(b+='<div style="font-size: 75%">',
k="'"+ig.game.strings.O9955(g._id)+"'",b+='   <div class="pseudolink" onclick="ig.game.writableDialog.O4068('+k+')">'+ig.game.strings.arrows.right+"&nbsp;Remove&nbsp;comment</div>"),b+="</div>");m&&(h||this.O8833)&&(b+='<div style="font-size: 75%">',b+='   <div class="pseudolink" onclick="ig.game.writableDialog.O9795()">'+ig.game.strings.arrows.right+"&nbsp;Get&nbsp;link</div>",b+="</div>");ig.game.O1257&&5<=ig.game.O1257.rank&&!h&&!this.O8833&&(b+='<div id="commentFlag_'+g._id+'" class="pseudolink commentFlag" onclick="'+
p+'"></div>');b+="</div>";b+="</td>";h=this.O5014(g.content,g.items);ig.game.settings&&ig.game.settings.showBlockedPeopleSpeech||!ig.game.O8518.O5167(g.userId)||(h=this.O3495(h));b+='<td class="commentContent" id="comment'+f+'">'+h+"</td>";b+="</tr>"}b=b+'</table><div id="placeholderNewer"></div>'+this.O4105();jQuery("#contentPart").html(b);this.O1315(this.comments);this.O8744();this.O9240=!this.O9843(this.comments[0]._id);this.O5917=new Date(this.O8721)>new Date(this.comments[this.comments.length-
1].ts);e&&(this.O6643=null,a?(b=document.getElementById("placeToJumpTo"))&&b.scrollIntoView():setTimeout(function(){var q=document.getElementById("placeToJumpTo");q&&q.scrollIntoView()},200));this.O8241?(a=jQuery("#writableDialog"),a.scrollTop(a[0].scrollHeight-a.height()),this.O8241=!1):this.O9240&&!a&&(jQuery("#writableDialog").scrollTop(0),this.O5771=!1);jQuery("#clarificationInput").keyup(function(q){13==q.keyCode&&ig.game.writableDialog.O3644()})}},O3495:function(a){var b="spoiler"+ig.game.O4293(1,
1E8);return'<span class="spoilerLink pseudolink" onclick="jQuery(\'#'+(b+'\').slideToggle()" style="opacity: 0.35">blocked ')+ig.game.strings.arrows.down+'</span>\r<div class="spoiler" id="'+b+'">'+a+"\r</div>"},O4068:function(a){var b=this;jQuery("#commentOptions_"+a).hide();ig.game.O9817.O1691(a).done(function(c){c&&c.ok&&(ig.game.sounds.success.play(),b.O3752(),b.O5747sOverview())})},O9795:function(){if(this.forumId&&this.threadId){var a="writable://"+this.forumId+"/"+this.threadId;a=ig.game.strings.O9955(a);
ig.game.alertDialog.open({html:'<p><input id="threadUrl" type="text" value="'+a+'" style="width: 90%; text-align: center; font-size: 120%; margin-top: 15px; font-weight: bold"/></p>',O3144:!0,O5358:!0});jQuery("#threadUrl").select()}},O3426:function(a){var b=this;ig.game.O9817.O3426(this.threadId,a).done(function(c){c&&c.ok?(ig.game.sounds.success.play(),b.O3752(),b.O5747sOverview()):ig.game.sounds.nocando.play()})},O1571:function(a){var b=this;ig.game.O9817.O1571(this.threadId,a).done(function(c){c&&
c.ok?(ig.game.sounds.success.play(),b.O3752(),b.O5747sOverview()):ig.game.sounds.nocando.play()})},O4665:function(){if(window.confirm("Remove this thread? This cannot be undone.")){var a=this;ig.game.O9817.O6136(this.threadId,!0).done(function(b){b&&b.ok?(ig.game.sounds.success.play(),a.O3752(),a.O5747sOverview()):ig.game.sounds.nocando.play()})}},O3644:function(){var a=this,b=jQuery("#clarificationInput").val();null!==b&&void 0!==b&&ig.game.O9817.O7831(this.threadId,b).done(function(c){c&&c.ok&&
(ig.game.sounds.success.play(),a.threadTitleClarification=b,a.O9394(),a.threads=[],a.O3752())})},getTimestampSecondsDifference:function(a,b){a=(new Date(b)).getTime()-(new Date(a)).getTime();return Math.abs(a/1E3)},O7885:function(a,b){var c="",d=this.O9191(a.totalLikes,a.oldestLikes,a.newestLikes);c+='<div class="commentUpvotes '+(d?"hasNoUpvotes":"hasUpvotes")+'">';var e=ig.game.isFullAccount&&ig.game.O1257.rank>=this.O5538,f=e||1<=a.totalLikes;f&&(c+='<span class="pseudolink commentUpvoteButton"><img src="'+
ml.Misc.O8283("comment-upvote-button")+'" alt="" ');e&&(c+="onclick=\"ig.game.writableDialog.O654('"+(a._id+"',"+(b?"true":"false")+')"'));f&&(c+="/></span>");c+='<span class="commentUpvotesList" id="commentUpvotesList'+a._id+'">'+d+"</span>";return c+"</div>"},O9191:function(a,b,c){var d="";a=a?parseInt(a):0;b=b&&1<=b.length?b:[];c=c&&1<=c.length?c:[];if(1<=a){for(;c.Length>this.O2758;)c.shift();b=b.concat(c);for(c=0;c<b.length;c++){var e=b[c],f="javascript:ig.game.playerDialog.openForPlayerId('"+
ig.game.strings.O9955(e.id)+"')";d+='<span class="pseudolink" onclick="'+f+'">'+ig.game.strings.O9955(this.O9360(e.n,e.id))+"</span>";d+="<br/>"}a>b.length&&(d+=" +&nbsp;"+(a-b.length))}return d},O3342:function(a,b){if(a){ig.game.sounds.clap.play();var c=this;ig.game.O9817.O7725(a).done(function(d){d&&!d.redundant&&(d=c.O9191(d.totalLikes,d.oldestLikes,d.newestLikes),jQuery("#commentUpvotesList"+a).html(d))})}},O654:function(a,b){if(a){var c=this;ig.game.O9817.O9880(a).done(function(d){d&&(d.isLiked?
ig.game.sounds.clap.play():ig.game.sounds.pickup.play(),d=c.O9191(d.totalLikes,d.oldestLikes,d.newestLikes),jQuery("#commentUpvotesList"+a).html(d))})}},O940:function(){var a="MON TUE WED THU FRI SAT SUN SUN".split(" ");var b='<div class="writableHeader"><span class="pseudolink arrowBack" onclick="ig.game.writableDialog.tryShowThreadsWithoutLoading();ig.game.sounds.click.play();">'+ig.game.strings.arrows.left+"&nbsp;&nbsp;</span></div>";var c=new Date,d=[this.O7321,new Date(this.O7321.getFullYear(),
this.O7321.getMonth()+1,1)];b+='<table class="calendar">';for(var e=0;e<d.length;e++){for(var f=d[e],g=new Date(f);0!=this.O9275(g);)g=this.addDays(g,-1);b+='<tr><th colspan="7">'+this.O8433[f.getMonth()]+" "+g.getFullYear()+"</th></tr>";for(var h=1;5>=h;h++){g.getDate();b+="<tr>";for(var k=1;7>=k;k++){var l=g.getDate();var m=g.getMonth()==c.getMonth()&&g.getDate()==c.getDate(),n="border: "+ig.system.scale+"px solid rgba("+this.rgbText+",.2);";m&&(n="background-color: rgba("+this.rgbText+",.2);");
b+='<td class="day day'+k+'" style="'+n+'">';g.getMonth()==f.getMonth()&&(b+='<div class="dayHeader">'+l+" "+a[k-1]+"</div>",b+=this.O2924(g,l));b+="</td>";g=this.addDays(g,1)}b+="</tr>"}}b=b+'</table><div class="pseudolink timeConverter" onclick="ig.game.writableDialog.O9459()">Times</div><div class="writableFooter"><span class="pseudolink arrowBack" onclick="ig.game.writableDialog.tryShowThreadsWithoutLoading();ig.game.sounds.click.play();">'+(ig.game.strings.arrows.left+"&nbsp;&nbsp;</span></div>");
jQuery("#contentPart").html(b)},O9459:function(){var a=new Date;var b='<table class="timeConverterTable">';for(var c=1;2>=c;c++){var d=1==c;b=d?b+'<tr class="localTime"><th>Your time:</th>':b+'<tr class="manylandTimeDisplay"><th>Thingistan Time (UTC):</th>';for(var e=8;31>=e;e++){var f=24>=e?e:e-24,g=new Date(a.getFullYear(),a.getMonth(),a.getDay(),f,0,0,0);g=d?ig.game.strings.pad(f):g.toISOString().substr(11,2);f=e==a.getHours()?' class="timeConverterNow"':"";b+="<td"+f+">"+g+"</td>"}b+="</tr>"}ig.game.alertDialog.open(b+
"</table>",!0,null,null,null,!0)},O2924:function(a,b){var c="";if(this.O8924&&1<=this.O8924.length){for(var d=[],e=0;e<this.O8924.length;e++){var f=this.O8924[e],g=new Date(f.eventDate),h=g.toISOString().substr(8,2);a.getMonth()==g.getMonth()&&parseInt(b)==parseInt(h)&&d.push(f)}if(1<=d.length){c+='<div class="dayContent">';d.sort(function(k,l){return new Date(k.eventDate)>new Date(l.eventDate)});for(e=0;e<d.length;e++){f=d[e];g="ig.game.writableDialog.O6913('"+ig.game.strings.O9955(f.threadId)+"')";
h=f.eventDate;h=h.substr(11,2)+":"+h.substr(14,2)+" MT";a=ig.game.strings.O7686(f.title,25);b=a.indexOf(" ");if(-1==b||15<=b)a=ig.game.strings.O7686(f.title,10);c+='<span class="calendarEvent pseudolink" onclick="'+g+'">'+h+": "+ig.game.strings.O9955(a)+"</span>"}c+="</div>"}}return c},addDays:function(a,b){var c=new Date(a);c.setDate(a.getDate()+b);return c},O9275:function(a){a=a.getDay()-1;return 0<=a?a:7},O5095:function(a){if(a&&1<=a.length){var b=a[a.length-1].ts,c="lastReadDate_"+this.threadId,
d=localStorage.getItem(c);if(!d||new Date(b)>=new Date(d))ig.game.O5285.setItem(c,b),2<=a.length&&(b=a.length-1-this.O4172,0>b&&(b=0),ig.game.O5285.setItem("lastReadDateWithPadding_"+this.threadId,a[b].ts))}},O9843:function(a){var b=!1;if(this.threads&&1<=this.threads.length)for(var c=0;c<this.threads.length;c++){var d=this.threads[c];if(d.firstCommentId&&d.firstCommentId==a){b=!0;break}}else b=a==this.O4585;return b},O625:function(a){ig.game.sounds.click.play();var b=this.comments[a];if(this.comments[a].currentlyEditing)this.O7680=
[],jQuery("#threadTitleInThread").html(ig.game.strings.O9955(this.threadTitle)),jQuery("#comment"+a).html(this.O5014(b.content,b.items)),this.O8744(),delete this.comments[a].currentlyEditing;else{b.currentlyEditing=!0;this.O7680=b.items?ig.game.O4507(b.items):[];var c="ig.game.writableDialog.O5725('"+b._id+"',"+a+")",d='<div id="addComment">';if(this.O9843(b._id)){var e='<input onclick="ig.game.writableDialog.O1477()" type="text" id="commentTitleInput" value="'+ig.game.strings.O9955(this.threadTitle)+
'" autocomplete="off" maxLength="'+this.O9290+'" onfocus="ig.game.writableDialog.O8648()" onblur="ig.game.writableDialog.O8173()" style="'+this.O6399+'" />';jQuery("#threadTitleInThread").html(e);this.O2033(b._id)}e="commentInput"+a;d+='<div><textarea onclick="ig.game.writableDialog.O1477()" maxlength="'+this.O3994+'" class="commentInput" id="'+e+'" style="'+this.O6399+'" onfocus="ig.game.writableDialog.O8648()" onblur="ig.game.writableDialog.O8173()">'+ig.game.strings.O9955(b.content)+"</textarea></div>"+
this.O8041(a)+'<p class="commentInputAdd"><img src="'+ml.Misc.O8283("ok-button")+'" onclick="'+c+'" alt=""/></p></div>';d+=this.O7350(e);jQuery("#comment"+a).html(d)}},O1477:function(){if(this.postKeyRequired&&this.O9931&&!ig.game.alertDialog.isOpen){var a=this;ig.game.alertDialog.O5816("Please enter post key (it may be found in the rules)",null,function(b){b&&(b=b.toLowerCase().trim(),a.O5601()?b==a.O3489?(ig.game.O1189.register(ig.game.O1189.types.SOLVED_BASE_POST_KEY),a.O8787()):a.O8736():ig.game.O9817.O5064(a.forumId,
b).done(function(c){c&&c.ok?a.O8787():a.O8736()}))},null,null,null,null,null,this.O7012,!0)}},O8787:function(){this.postKeyRequired=!1;ig.game.sounds.success.play()},O8736:function(){ig.game.alertDialog.O3813("Oops, that wasn't the right post key (the right one may be found in the sticky rules to this Writable).");ig.game.sounds.nocando.play()},O8041:function(a){a||="";var b=this.rgbText.split(","),c=127.5<=(parseInt(b[0])+parseInt(b[1])+parseInt(b[2]))/3?"white":"black";c="/"+c;b="";this.O7677()&&
(b='<div class="pseudolink toggleWritableHelp" onclick="ig.game.writableDialog.toggleEmojiHelp()">'+this.O7928("emoji-button"+c,"Emojis")+"</div>");var d=this.O7928("attach-button"+c,"Attach");a='<div class="pseudolink addItem" onclick="ig.game.writableDialog.O5900('+this.O8976("commentInput"+a)+')">'+d+"</div>";c='<div class="pseudolink textFormatHelp" onclick="ig.game.writableDialog.O4963()">'+this.O7928("text-format-button"+c,"Format")+"</div>";return b+a+c},O7928:function(a,b){b=b?ig.game.strings.O9955(b.toUpperCase()):
"";return'<img src="'+ml.Misc.O8283(a)+'" alt="'+b+'" title="'+b+'"/>'},O4963:function(){jQuery("#writableHelp").toggle();var a=document.getElementById("writableHelp");a&&a.scrollIntoView()},toggleEmojiHelp:function(){jQuery("#writableEmojiHelp").toggle();var a=document.getElementById("writableEmojiHelp");a&&a.scrollIntoView()},O7677:function(){return!ig.ua.steam},O7350:function(a){var b="";this.O7677()&&(b='<div id="writableEmojiHelp" class="disableContentSelect">'+this.O8901(a)+"</div>");return'<div id="writableHelp" class="disableContentSelect">_<em>Text</em>_&nbsp; &nbsp;**<strong style="font-size: 115%">Text</strong>**&nbsp; &nbsp;~~<del>Text</del>~~&nbsp; &nbsp;^^<span class="lessImportantText">Text</span>^^&nbsp; &nbsp;-green-<span style="color: green">Text</span>-green-&nbsp; &nbsp;-case-<span class="mixedCase">Text</span>-case-&nbsp; &nbsp;<br/>-rotate180-<span style="display: inline-block; transform: rotate(180deg)">text</span>-rotate180-&nbsp; &nbsp;Dates: 2015-12-20&nbsp;20:00 MT&nbsp; &nbsp;<a href="/info-text" target="_blank">...</a></div>'+
b},O8901:function(a){for(var b="",c="\ud83d\ude00 \ud83d\ude03 \ud83d\ude04 \ud83d\ude01 \ud83d\ude06 \ud83d\ude05 \ud83e\udd23 \ud83d\ude02 \ud83d\ude42 \ud83d\ude43 \ud83d\ude09 \ud83d\ude0a \ud83d\ude07 \ud83e\udd70 \ud83d\ude0d \ud83e\udd29 \ud83d\ude18 \ud83d\ude17 \ud83d\ude1a \ud83d\ude19 \ud83d\ude0b \ud83d\ude1b \ud83d\ude1c \ud83e\udd2a \ud83d\ude1d \ud83e\udd11 \ud83e\udd17 \ud83e\udd2d \ud83e\udd2b \ud83e\udd14 \ud83e\udd10 \ud83e\udd28 \ud83d\ude10 \ud83d\ude11 \ud83d\ude36 \ud83d\ude0f \ud83d\ude12 \ud83d\ude44 \ud83d\ude2c \ud83e\udd25 \ud83d\ude0c \ud83d\ude14 \ud83d\ude2a \ud83e\udd24 \ud83d\ude34 \ud83d\ude37 \ud83e\udd12 \ud83e\udd15 \ud83e\udd22 \ud83e\udd2e \ud83e\udd27 \ud83e\udd75 \ud83e\udd76 \ud83e\udd74 \ud83d\ude35 \ud83e\udd2f \ud83e\udd20 \ud83e\udd73 \ud83d\ude0e \ud83e\udd13 \ud83e\uddd0 \ud83d\ude15 \ud83d\ude1f \ud83d\ude41 \ud83d\ude2e \ud83d\ude2f \ud83d\ude32 \ud83d\ude33 \ud83e\udd7a \ud83d\ude26 \ud83d\ude27 \ud83d\ude28 \ud83d\ude30 \ud83d\ude25 \ud83d\ude22 \ud83d\ude2d \ud83d\ude31 \ud83d\ude16 \ud83d\ude23 \ud83d\ude1e \ud83d\ude13 \ud83d\ude29 \ud83d\ude2b \ud83e\udd71 \ud83d\ude24 \ud83d\ude21 \ud83d\ude20 \ud83e\udd2c \ud83d\ude08 \ud83d\udc7f \ud83d\udc97 \ud83d\udcaf \ud83d\udca5 \ud83d\udca3 \ud83d\udc4b \ud83e\udd1a \ud83d\udd90 \u270b \ud83d\udd96 \ud83d\udc4c \ud83e\udd0f \u270c \ud83e\udd1e \ud83e\udd1f \ud83e\udd18 \ud83e\udd19 \ud83d\udc48 \ud83d\udc49 \ud83d\udc46 \ud83d\udc47 \u261d \ud83d\udc4d \ud83d\udc4e \u270a \ud83d\udc4a \ud83e\udd1b \ud83e\udd1c \ud83d\udc4f \ud83d\ude4c \ud83d\udc50 \ud83e\udd32 \ud83e\udd1d \ud83d\ude4f \ud83d\udcaa \ud83d\udd25 \ud83d\ude80 \ud83d\udc8e \ud83d\ude48 \ud83d\ude49 \ud83d\ude4a \u26d4 \u26a1 \ud83c\udf45 \ud83c\udf55 \ud83c\udf77 \ud83c\udf53 \ud83c\udf7c \u2615 \ud83c\udf4f \ud83d\udc8a \u26bd \u26be \ud83c\udfae \ud83c\udfc6 \ud83c\udfb5 \u270d \ud83d\udc85 \ud83e\udd33 \ud83e\uddb5 \ud83e\uddb6 \ud83d\udc42 \ud83e\uddbb \ud83d\udc43 \ud83e\uddb7 \ud83e\uddb4 \ud83e\udde0 \ud83d\udc44 \ud83d\udc45 \ud83d\udc40 \ud83d\udc76 \ud83e\udd30 \ud83d\udc35 \ud83e\udda7 \ud83d\udc36 \ud83d\udc3a \ud83d\udc31 \ud83d\udc2f \ud83e\udd84 \u2600\ufe0f \ud83d\udc80 \ud83e\udd21 \ud83d\udc79 \ud83d\udc7a \ud83d\udc7b \ud83d\udc7d \ud83d\udc7e \ud83e\udd16 \ud83d\udc8b \ud83d\udc98 \ud83d\udc96 \ud83d\udcab \ud83d\udca6 \ud83d\udca8 \ud83d\udcac \ud83d\udca4 \u26ea \u2708\ufe0f \ud83e\udde8 \u2728 \ud83c\udfab \ud83c\udf9f\ufe0f \ud83c\udfc5 \ud83c\udfa4 \ud83c\udfb9 \ud83c\udfac \ud83c\udff9 \u26f8\ufe0f \ud83c\udf82 \ud83c\udf70 \ud83c\udf88 \ud83c\udf89 \ud83c\udf81 \ud83d\udd6f\ufe0f \ud83e\uddf1 \ud83d\udd79\ufe0f \ud83e\uddf8 \ud83d\udece\ufe0f \ud83e\uddf3 \u23f3 \u231a \u23f0 \ud83c\udf21\ufe0f \ud83c\udf80 \ud83d\udcde \u2328\ufe0f \ud83d\udcfa \ud83d\udcf7 \ud83d\udca1 \ud83d\udcd5 \ud83d\udcda \ud83d\udcdc \ud83d\udcb0 \ud83d\udce7 \ud83d\udce6 \ud83d\udced \u270f\ufe0f \ud83d\udd8c\ufe0f \ud83d\udcc5 \ud83d\udccc \ud83d\udccb \ud83d\udcca \ud83d\udcc8 \ud83d\udcc9 \ud83d\udd12 \ud83d\udd13 \ud83d\udd11 \ud83d\udd28 \ud83e\ude93 \ud83d\udee1\ufe0f \ud83d\udd17 \ud83d\udecf\ufe0f \ud83d\udeaa \ud83e\ude79 \ud83e\ude78 \ud83d\udc89 \ud83e\uddfc \ud83d\udcc1 \ud83d\udcb8 \ud83d\udd0e \ud83d\uddb1\ufe0f \ud83d\udcbb \ud83d\udd0b".split(" "),
d=0;d<c.length;d++){var e=c[d];b+="<span onclick=\"ig.game.writableDialog.insertText('"+(a+"','"+e+"')\">")+e+"</span> ";0==(d+1)%12&&(b+="<br/>")}return'<span style="font-size: 200%; line-height: 1.65em; cursor: default">'+b+"</span>"},insertText:function(a,b){if(a=document.getElementById(a)){var c=a.scrollTop,d=0,e=a.selectionStart||"0"==a.selectionStart?"ffLike":document.selection?"ie":!1;"ie"==e?(a.focus(),d=document.selection.createRange(),d.moveStart("character",-a.value.length),d=d.text.length):
"ffLike"==e&&(d=a.selectionStart);var f=a.value.substring(0,d),g=a.value.substring(d,a.value.length);a.value=f+b+g;d+=b.length;"ie"==e?(a.focus(),e=document.selection.createRange(),e.moveStart("character",-a.value.length),e.moveStart("character",d),e.moveEnd("character",0),e.select()):"ffLike"==e&&(a.selectionStart=d,a.selectionEnd=d,a.focus());a.scrollTop=c;ig.game.sounds.click.play()}},O5725:function(a,b){var c=jQuery("#commentInput"+b).val(),d=jQuery("#commentTitleInput").val();if(c&&""!=c.trim()){if(this.O9364(c)){var e=
this;this.O9843(a)&&!1===this.hasCalendarEvents&&(this.hasCalendarEvents=null);var f=!1;null!=d&&void 0!=d&&"string"===typeof d&&""==d.trim()&&(d=null,f=!0);var g=1<=this.O7680.length?this.O7680:null;ig.game.O9817.O3743(a,c,g,d).done(function(h){if(h.ok){ig.game.sounds.success.play();d&&(e.threads=[]);e.O7680=[];if(h=e.comments[b])h.content=c,h.items=g,h.currentlyEditing=!1,h=e.O5014(h.content,h.items),jQuery("#comment"+b).html(h),d?jQuery("#threadTitleInThread").html(ig.game.strings.O9955(d)):f&&
jQuery("#threadTitleInThread").html(ig.game.strings.O9955(e.threadTitle)),e.O8744();ig.game.O3957&&ig.game.O3957.O8855("write")}})}}else this.O9843(a)?(this.O8883(!1),this.O6940()):this.O4068(a)},O5014:function(a,b){a=ig.game.strings.O5143(a,this.rgbBackground,this.rgbText);b&&(a=this.O9474(a,b));a=ig.game.strings.O2025(a);return ig.game.strings.O4409(a)},O9360:function(a,b,c){a&&"string"===typeof a&&(a=a.toLowerCase(),b=a.indexOf(" "),c||-1==b||12<=b)&&(a=ig.game.strings.O7686(a,12));return a},O4105:function(){var a=
"",b=null==this.threadId;if(this.O9463)return"<p>"+ig.game.strings.O5493()+"</p>";if(b&&!this.O2193||!b&&!this.O8868)return a;if(this.threadId&&ig.game.isFullAccount&&!this.O3320)return a+'<p style="opacity: 0.5; font-style: italic; text-align: right">Please wait before commenting on this Writable</p>'+this.O2508(b);if(this.threadId&&5>ig.game.O1257.rank){var c=Date.now(),d=ml.Misc.getDateOfMongoId(this.threadId);if(d&&6<(c-d.getTime())/1E3/86400/30.4167)return'<p style="opacity: 0.25">This thread is so old that only some can still comment.</p>'}if(this.threadId&&
("locked"==this.threadTitleClarification||this.O9294))return a+this.O2508(b);c='<div class="pseudolink footerArrowBack" onclick="ig.game.writableDialog.tryShowThreadsWithoutLoading();ig.game.sounds.click.play();">'+ig.game.strings.arrows.left+"&nbsp;&nbsp;</div>";if(this.O9931||!ig.game.isFullAccount){d=ig.game.O9925*ig.system.scale;b&&(a+='<div id="addThread">',a+='<p><input type="text" id="commentTitleInput" onclick="ig.game.writableDialog.O1477()" placeholder="TITLE" autocomplete="off" maxLength="'+
this.O9290+'" onfocus="ig.game.writableDialog.O8648()" onblur="ig.game.writableDialog.O8173()" style="'+this.O6399+'" /></p>');a=a+'<table class="thread"><tr><td class="userDateTime"><div class="user"><canvas class="userIcon i'+(ig.game.O1257.O2970+'" id="editableProfilePic" style="width: '+(d+"px; height: "+d+"px; display: block;")+this.O6399+'width="'+d+'" height="'+d+'" onclick="ig.game.writableDialog.O4453()"></canvas> ');a+='<span class="threadUserName">'+ig.game.strings.O9955(this.O9360(ig.game.O1257.screenName,
ig.game.O1257.O2970))+"</span>";a=a+c+'</td><td class="commentContent">';ml.Misc.O8283("ok-button");c=localStorage.getItem("writableCommentBackup");if(null==c||void 0==c)c="";c=ig.game.strings.O9955(c);a+='<div id="addComment"><div><textarea onclick="ig.game.writableDialog.O1477()" maxlength="'+this.O3994+'" id="commentInput" style="'+this.O6399+'" onfocus="ig.game.writableDialog.O8648()" onblur="ig.game.writableDialog.O8173()" onkeyup="ig.game.writableDialog.O4622(this)">'+c+"</textarea></div>"+
this.O8041()+'<div class="commentInputAdd"><img src="'+ml.Misc.O8283("ok-button")+'" onclick="ig.game.writableDialog.O3306()" alt=""/></div></div>';a+="</tr>";a+="</table>";a+=this.O2508(b);a+=this.O7350("commentInput");b&&(a+="</div>")}else this.threadId&&(b="opacity: .2; text-align: center; border-top: "+ig.system.scale+"px solid rgba("+this.rgbText+",1); padding-top: 5px",ig.game.isFullAccount&&ig.game.O1257.rank<this.O5538&&(a+='<p style="'+b+'">Please wait a bit before adding comments</p>'),
a+=c);return a},O2508:function(a){var b="";!a&&ig.game.areaAdForDisplay&&(b=b+'<div class="writableAreaAd">'+ig.game.O9620(!0,!0),b+="</div>");return b},O9692:function(a){a="";748<this.size.x&&(a+='<div class="writableBannerAd" style="width: 100%; height: 90px; overflow: hidden; margin-top: 40px; margin-bottom: 40px;">\r\n    <div class="ympb_target" data-type="desktop-leaderboard-template" data-subtype="728x90" style="width: 728px; height: 90px; position: relative; margin-left: auto; margin-right: auto;"></div>\r\n',
a+="</div>\r\n");return a},O4622:function(a){""==a.value?(localStorage.removeItem("writableCommentBackup"),this.O6826=0):(this.O6826++,100==this.O6826&&(ig.game.O5285.setItem("writableCommentBackup",a.value),this.O6826=0))},O8648:function(){this.O9931?this.isWriting=!0:ig.game.bottomMenu.O6979(!0)},O8173:function(){this.isWriting=!1},O4453:function(){this.O9931?(this.O4917=!0,ig.game.O1168||ml.Misc.O1184(),ig.game.alertDialog.open("Pick a Thing to show here >>")):ig.game.bottomMenu.O6979(!0)},O6713:function(a,
b){return Math.abs(a-b)/864E5},O9485:function(){if(!this.O8245){this.O8245=!0;for(var a=new Date,b=localStorage.length-1;0<=b;b--){var c=localStorage.key(b);if(0===c.indexOf("lastReadDate_")||0===c.indexOf("lastReadDateWithPadding_")){var d=localStorage.getItem(c);d&&this.O6713(new Date(d),a)>=this.O2925&&localStorage.removeItem(c)}}}},O3727:function(){for(var a=localStorage.length-1;0<=a;a--){var b=localStorage.key(a);0===b.indexOf("lastReadDate_")&&localStorage.removeItem(b)}},O1090:function(a){ig.game.alertDialog.close();
if("DECO"==a.base){ig.game.sounds.putdown.play();this.O7851["i"+ig.game.O1257.O2970]=null;var b=this;ig.game.O9817.O2405(a.id).done(function(){b.O1315()})}else ig.game.sounds.nocando.play(),ig.game.alertDialog.open("Please pick type Thing only.");ig.game.writableDialog.O4917=!1},O1315:function(a){void 0==a&&(a=[]);var b={};a=ig.game.O4507(a);a.push({userId:ig.game.O1257.O2970});for(var c=0;c<a.length;c++){var d=a[c].userId;if(!b[d]){var e=this.O7851["i"+d];e?this.O9941(d,e):this.O7591(d);b[d]=!0}}},
O7591:function(a){var b=this;ig.game.O9817.O2991(a).done(function(c){c&&c.iconId&&(b.O7851["i"+a]=c.iconId,b.O9941(a,c.iconId))})},O9941:function(a,b){var c=new Image;c.src=this.O3503(b);c.onload=function(){jQuery(".i"+a).each(function(d){if(!c.width||!c.height||c.width==ig.game.O9925&&c.height==ig.game.O9925){this.style.display="block";d=this.getContext("2d");var e=ig.game.O9925*ig.system.scale;d.webkitImageSmoothingEnabled=!1;d.mozImageSmoothingEnabled=!1;d.imageSmoothingEnabled=!1;d.clearRect(0,
0,e,e);d.drawImage(c,0,0,e,e)}})}},O3503:function(a){return"test"==ig.game.mlenv||"production"==ig.game.mlenv?ig.game.itemImageResourcePrefix+a:window.Item.prototype.localMediaPath+a+".png"},O9474:function(a,b){if(b&&1<=b.length)for(var c=0;c<b.length;c++){var d=b[c];if(d&&ig.game.validations.O5241(d.id)){var e=ig.ua.chrome||ig.ua.steam,f=ig.game.strings.O7245(d.id),g=ig.game.strings.O7245(d.base),h=d.width*ig.system.scale;d=d.height*ig.system.scale;var k="ig.game.writableDialog.O5126(event,'"+f+
"','"+g+"')";e&&(k="ig.game.O7747.O9935('"+f+"')");e="";e+='<span class="commentInlineItemWrapper pseudolink" draggable="true" data-id="'+f+'" data-base="'+g+'" ';k&&(e+='onmouseup="'+k+'" ');e+="ondragstart=\"ig.game.writableDialog.O3288(event,'"+f+"','"+g+"')\" ";e+='ondrag="ig.game.writableDialog.handleDrag(event)" ';e+='ondragend="ig.game.writableDialog.O1200(event)" ';e+='style="width: '+h+"px; height: "+d+'px">';e+='<canvas class="commentInlineItem" style="width: '+h+"px; height: "+d+'px" width="'+
h+'" height="'+d+'" data-url="'+this.O3503(f)+'"></canvas>';e+="</span>";a=ig.game.strings.replaceAll(a,"["+(c+1)+"]"," "+e+" ")}}return a},O5126:function(a,b,c){a&&3==a.which?"SOUND"==c&&ig.game.sounds.O9961(b):this.O1015(b)},O3288:function(a,b,c){jQuery("#writableDialog").slideUp(100);ig.game.panelSet&&1!=ig.game.panelSet.tabState&&ig.game.panelSet.O6923(1);if(b&&ig.game.isFullAccount){var d=ig.game.O4261.getItemBasic(b,"drag_writable");d&&(ig.game.O3199={tid:b,rotation:0,rotatable:d.rotatable,
flippable:d.flippable,flip:0,O1292:d.O1292?d.O1292():!1,base:c||d.base,attributes:d.attributes},ig.game.O6921.O3007FromMap=!0,ig.input.actions.click=!0,a.dataTransfer&&(b=new Image,b.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",a.dataTransfer.setDragImage(b,0,0)))}},O1200:function(a){jQuery("#writableDialog").slideDown(300);ig.game.O3199=!1;ig.game.O6921.O3007FromMap=!1;ig.input.actions.click=!1;if(a.toElement&&a.toElement.dataset){var b=a.toElement.dataset.id;
a={x:Math.round(ig.input.mouse.x),y:Math.round(ig.input.mouse.y)};var c=ig.game.O6112.O8353(a.x,a.y);if(ig.game.O1168&&ig.game.panelSet&&a.x>=ig.game.panelSet.panelPos.x)a=ig.game.panelSet.O6777.O3457(a),ig.game.O7747.O1015(b,a,c);else{var d=ig.game.O4261.getItemBasic(b,"ui_wrd1");d&&d.imagesBeingGenerated.done(function(){ig.game.mapPlacementValidation.O9195(d,void 0,!0)&&ig.game.O6112.O2400(b,0,0,c)})}}},handleDrag:function(a){if(ig.game.O3199&&a.pageX&&a.pageY){for(var b=ig.system.canvas,c=0,d=
0;b;)c+=b.offsetLeft,d+=b.offsetTop,b=b.offsetParent;ig.input.mouse.x=(a.pageX-c)/ig.system.scale;ig.input.mouse.y=(a.pageY-d)/ig.system.scale}},O8744:function(){var a=this;jQuery(".commentInlineItem").each(function(b,c){b=jQuery(c).data("url");jQuery(c).removeData("url");a.O9622(c,b)})},O9622:function(a,b){var c=new Image;c.src=b;c.onload=function(){var d=a.getContext("2d");d.webkitImageSmoothingEnabled=!1;d.mozImageSmoothingEnabled=!1;d.imageSmoothingEnabled=!1;d.drawImage(c,0,0,a.width/ig.system.scale,
a.height/ig.system.scale,0,0,a.width,a.height)}},O1015:function(a){ig.game.isFullAccount&&(1!=ig.game.panelSet.tabState&&ig.game.panelSet.O6923(1),ig.game.O7747.O1015(a,2))},O5900:function(a){this.O7680&&(this.O7680.length<this.O1076?(this.O9701=a,ig.game.alertDialog.O3813("Pick something to add")):this.O7643())},O2750:function(a){ig.game.alertDialog.isOpen&&ig.game.alertDialog.close();if(this.O7680)if(this.O7680.length<this.O1076){if(a&&a.img&&a.img.loaded&&this.O9701)if("MIFT"==a.base)ig.game.alertDialog.open("Mifts can't be added to comments, but if you want to provide a template, you can save it as clonable Thing first."),
ig.game.sounds.nocando.play();else{ig.game.sounds.putdown.play();var b="#"+this.O9701,c=jQuery(b).val();if("string"===typeof c){var d=this.O9627(a);this.O7680.push({id:a.id,width:d.x,height:d.y,base:a.base});a=this.O7680.length-1;d=0==a?"\r\n":" ";""==c.trim()&&(d="");jQuery(b).val(c+(d+"["+(a+1)+"]"));b=jQuery(b);b.scrollTop(b[0].scrollHeight-b.height())}}}else this.O7643()},O7643:function(){ig.game.sounds.nocando.play();ig.game.alertDialog.open("Up to "+this.O1076+" can be added at once")},O9627:function(a){var b=
{x:a.img.width,y:a.img.height};switch(a.base){case "MNTGROUND":case "MNTAIR":case "DECOACT":case "DECOTCH":case "PORTAL":case "PORTALDIR":case "PORTALR":case "THROWER":case "LIQUID":case "HARMANIM":case "INTERACT":case "LIVANIM":case "DECOANIM":case "DECOFB":case "MULTITHING":case "SPARKLING":case "FLEXIBLE":case "LIVELY":case "GLOW":case "EMITTER":case "AIMABLE":case "STACKWEAR":b.x=a.img.width/2;b.y=a.img.height;break;case "MOTION":case "INTERMOT":case "HOLDER":b.x=a.img.width/3;b.y=a.img.height;
break;case "DYNATHING":case "HAPPENING":b.x=29;b.y=29;break;case "MUSICSHEET":b.x=32;b.y=36;break;case "STACKWEARB":var c=a.img.width/ig.game.O1828!=parseInt(a.img.width/ig.game.O1828)?ig.game.O6965:ig.game.O1828;b.x=a.img.width/c;b.y=a.img.height;break;case "VIEWABLE":case "FARBACK":case "TRANSFORM":b.x=ig.game.O4975,b.y=ig.game.O4975}return b},setInsetStyle:function(){var a="rgba(0,0,0,.5)",b="rgba(255,255,255,.5)",c=this.rgbBackground.split(",");c=(parseInt(c[0])+parseInt(c[1])+parseInt(c[2]))/
3;30>=c?a="rgba(80,80,80,.5)":225<=c&&(b="rgba(175,175,175,.5)");this.O6399="background-color: "+this.O3575()+";color: rgb("+this.rgbText+");border-top: "+ig.system.scale+"px solid "+a+";border-left: "+ig.system.scale+"px solid "+a+";border-bottom: "+ig.system.scale+"px solid "+b+";border-right: "+ig.system.scale+"px solid "+b+';"'},O8976:function(a){return"'"+a+"'"},O3306:function(){ig.game.sounds.click.play();this.O9931?(this.threadId?this.O8560():this.O1963(),ig.game.O1189.register(ig.game.O1189.types.SAVED_WRITABLE_COMMENT)):
ig.game.bottomMenu.O6979(!0)},O8883:function(a){(this.O2287=a)?(jQuery("#writableDialog").addClass("loading"),jQuery(".commentInputAdd").css("pointer-events","none"),jQuery(".commentInputAdd").css("opacity",.35)):(jQuery("#writableDialog").removeClass("loading"),jQuery(".commentInputAdd").css("pointer-events",""),jQuery(".commentInputAdd").css("opacity",.6))},O8560:function(){if(!this.O2287){this.O8883(!0);var a=jQuery("#commentInput").val(),b=this;a&&a.trim()?this.O9364(a)&&ig.game.O9817.O8071(this.threadId,
a,this.O7680&&1<=this.O7680.length?this.O7680:null).done(function(c){c&&c.commentId&&ig.game.O5285.setItem("forumLastKnownCommentId_"+b.forumId,c.commentId);b.threads=[];ig.game.sounds.success.play();b.O7680=[];b.pauseScrolling=!0;b.O8241=!0;b.O7816(null,null,null,null,2<=b.comments.length?b.comments[b.comments.length-2].ts:b.comments[b.comments.length-1].ts);localStorage.removeItem("writableCommentBackup");b.O8883(!1);ig.game.O2116.O7884(ig.game.O1257,"writes",b.title);ig.game.O3957&&ig.game.O3957.O8855("write")}):
(this.O8883(!1),this.O6940())}},O9364:function(a){var b=!0;a=ig.game.strings.replaceAll(a,"https://soundcloud.com/","");a=ig.game.strings.replaceAll(a,"http://thingistan.com/","");a=ig.game.strings.replaceAll(a,"http://snapshot.thingistan.com/","");if(ig.game.O1257.rank<this.O2715&&(a=a.toLowerCase(),0<=a.indexOf("imgur.com")||0<=a.indexOf("discordapp.com"))){var c=this;b=!1;ig.game.alertDialog.open({text:"Please wait before using external image hosts like Imgur",O3144:!0,O9267:function(){c.O8883(!1)}});
ig.game.sounds.nocando.play()}return b},O1963:function(){if(!this.O2287){this.O8883(!0);var a=jQuery("#commentTitleInput").val(),b=jQuery("#commentInput").val(),c=this;a&&a.trim()&&b&&b.trim()?this.O5683(a)?this.O9364(a+" "+b)&&(!1===this.hasCalendarEvents&&(this.hasCalendarEvents=null),ig.game.O9817.O5960(this.forumId,a,b,this.O7680&&1<=this.O7680.length?this.O7680:null).done(function(d){d&&d.commentId&&ig.game.O5285.setItem("forumLastKnownCommentId_"+c.forumId,d.commentId);c.threads=[];ig.game.sounds.success.play();
c.O7680=[];c.O3752();localStorage.removeItem("writableCommentBackup");c.O8883(!1);ig.game.O2116.O7884(ig.game.O1257,"writes",c.title);ig.game.O3957&&ig.game.O3957.O8855("write")}).fail(function(d){})):(this.O8883(!1),ig.game.alertDialog.open("<p>Please ensure you address the whole group of this Writable.</p><p>You can go to thingistan.com/support to contact us individually.</p>",!0)):(this.O8883(!1),ig.game.alertDialog.open("Please enter a title and comment"))}},O5683:function(a){var b=!0,c=ml.Misc.O7959()?
"538893e8235ede78191ae428":"5391c17d7793ec237dbe56d5";if(this.forumId==c){a=" "+this.O812(a)+" ";c="horatio scott philipp phil phillip phillipp philip".split(" ");for(var d=0;d<c.length;d++)0<=a.indexOf(" "+c[d]+" ")&&(b=!1)}return b},O812:function(a){var b="";a=a.toLowerCase();for(var c=0;c<a.length;c++){var d=a.substr(c,1);-1==="abcdefghijklmnopqrstuvwxyz0123456789 ".indexOf(d)&&(d=" ");b+=d}return b},O6940:function(){ig.game.alertDialog.O3813("Please enter a comment")},update:function(){this.energy=
(this.energy+this.O5115).limit(this.energyMin,this.energyMax);this.opacity=0>=this.energy?0:(this.energy/this.energyMax).limit(0,1);if(this.isOpen&&0<this.opacity){var a=this.O1800();jQuery("#writableDialog").css("left",a.x+"px");jQuery("#writableDialog").css("top",a.y+"px");jQuery("#writableDialog").css("opacity",this.opacity.toFixed(2));ig.game.camera.O1225>ig.game.camera.O4769&&(ig.game.camera.O1225-=2,ig.game.camera.O1225<ig.game.camera.O4769&&(ig.game.camera.O1225=ig.game.camera.O4769));this.O5250&&
this.O3809()&&this.close();this.O8618();!ig.input.pressed("esc")&&!ig.input.pressed("f1")||this.isWriting||(ig.input.O6501(),this.close())}},O3809:function(){return Math.round(this.O3070.x)!=Math.round(ig.game.O1257.pos.x)||Math.round(this.O3070.y)!=Math.round(ig.game.O1257.pos.y)},O8618:function(){300>=ig.system.height&&(ig.game.playerDialog&&ig.game.playerDialog.isOpen?this.O8967||(jQuery("#writableDialog").css("visibility","hidden"),this.O8967=!0):this.O8967&&(jQuery("#writableDialog").css("visibility",
"visible"),this.O8967=!1))},O2744:function(a,b){this.fontStyle="font-size: "+(5+2*ig.system.scale)+"px;";this.size={x:.5*ig.system.realWidth,y:.7*ig.system.O5809};this.homePos={x:a,y:b};this.pos={x:a,y:b};this.O1800(this.homePos);ig.system.width>ig.system.height?(this.size.y=(ig.system.height*(ig.ua.iPad?.75:.65)-27-10)*ig.system.scale,this.size.x=Math.round(1.777*this.size.y),900>=ig.system.O5809&&(this.size.x=.58*ig.system.realWidth,this.size.y=Math.round(1.2*this.size.y)),ig.ua.phone&&(this.size.x=
ig.game.O1168?window.innerWidth-100:window.innerWidth-70,this.size.y+=80)):(a=.85,ig.ua.phone&&(ig.game.O1168?(a=.8,this.homePos.x+=20):(a=.9,this.homePos.x+=12)),this.size.x=ig.system.width*a*ig.system.scale,this.size.y=ig.system.widthHalf*ig.system.scale,ig.ua.phone&&(this.size.y+=.3*ig.system.height))},O1800:function(){var a=jQuery("#"+ig.game.canvasId).position();a={x:Math.round((this.homePos.x-ig.game._rscreen.x)*ig.system.scale-this.size.x/2+a.left),y:Math.round((this.homePos.y-ig.game._rscreen.y)*
ig.system.scale-this.size.y-ig.game.O9925+a.top)};5>=a.y&&(a.y=5);return a},O5719:function(){var a=this.O1800(),b=jQuery('<div id="writableDialog" style="'+(this.fontStyle+"; color: rgb("+this.rgbText+');"')+(this.attributes.mixedCaseFont?' class="mixedCase"':"")+'>   <div id="contentPart" class="contentPart"></div></div>');b.css("left",a.x+"px");b.css("top",a.y+"px");b.css("width",this.size.x+"px");b.css("height",this.size.y+"px");b.css("background-color",this.O5759());b.appendTo("body");var c=this;
jQuery("#commentInput").click(function(d){jQuery("#commentInput").select()});jQuery("#writableDialog").contextmenu(function(){if(ig.input.state("shift")||ig.ua.mobile||ig.ua.firefox)c.O7991=!c.O7991,c.setInsetStyle(),jQuery("#writableDialog").css("background-color",c.O5759()),jQuery(".commentInput").css("background-color",c.O3575()),jQuery("textarea").css("background-color",c.O3575())});jQuery("#writableDialog").scroll(function(){if(!c.O8241&&!c.O6321&&!c.O3260)if(c.threadId)c.O9240&&1>=jQuery(this).scrollTop()?
c.O2759():c.O5917&&jQuery(this)[0].scrollHeight-jQuery(this).scrollTop()<=jQuery(this).outerHeight()+300&&c.O6198();else if(!c.O8028&&c.threads.length>=c.O7773&&jQuery(this)[0].scrollHeight-jQuery(this).scrollTop()<=jQuery(this).outerHeight()+4){var d=c.threads[c.threads.length-1].lastComment;d&&c.O3752(d.ts)}})},O5759:function(){return"rgba("+this.rgbBackground+","+(this.O7991?.65:1)+")"},O3575:function(){return"rgba("+this.rgbBackground+","+(this.O7991?.1:1)+")"},O5447:function(){!this.isWriting&&
""==jQuery("textarea").val()&&this.close()},close:function(){this.isOpen&&(this.O8955=!0,this.postKeyRequired=!1,this.threadId=null,this.threads=[],this.areaGroupId=null,this.O8028=!1,this.comments=[],this.forumId=null,this.O7680=[],this.O9485(),this.O4917=!1,this.O9701=null,jQuery("#writableDialog").remove(),ig.game.O8577(),this.isOpen=!1,this.O5115=-10,this.canRead=this.O8868=this.O2193=this.O8833=!1)},O2033:function(a){ig.game.sounds.click.play();jQuery("#editButton_"+a).remove();jQuery("#commentOptions_"+
a).show();var b=this;ig.game.O9817.O9457(a).done(function(c){b.O2593(a,!!c.flagged)})},O2593:function(a,b){b='<img src="'+ml.Misc.O8283("flag/"+(b?"on":"off"))+'" alt=""/>';b='<span class="pseudolink" onclick="ig.game.writableDialog.O3341(\''+(ig.game.strings.O9955(a)+"')\">")+b+"</span>";jQuery("#commentFlag_"+a).html(b)},O3341:function(a){if(a){ig.game.sounds.click.play();var b=this;ig.game.O9817.O9610(a).done(function(c){b.O2593(a,!!c.flagged)})}},O8597:function(a){var b=null;if(a&&"string"===
typeof a&&(a=a.match(/([0-9]{4}\-[0-9]{2}\-[0-9]{2}\s[0-9]{2}:[0-9]{2}\sMT)/gi))&&1<=a.length){b=[];for(var c=0;c<a.length;c++){var d=ig.game.strings.O4376(a[c]);b.push(d.toISOString())}}return b},O9460:function(a){return(a=this.O8597(a))?a[0]:null},O4001:function(){return 0<=["542a2a011b65581f4b95d23f","54b2968f0eae9dc73bea7165"].indexOf(this.forumId)},O5601:function(){return 0<=["53eb9f388534266f180e0fd2","546f1193fda1416015f93382","54047ec2a8ae726f4b84fcaf","54b2972713fdb55446ed7bc9","55a7e0510b6ad1054d45999c"].indexOf(this.forumId)},
O1180:function(a,b){var c=!1;a&&(c=0>=b?!1:1==b?-1===["54b2968f0eae9dc73bea7165","6102f138372bf325b48dc465"].indexOf(a.toString()):!0);return c}})});ig.baked=!0;
ig.module("game.ui.albumdialog").requires("game.ui.components.uidialog").defines(function(){window.AlbumDialog=UIDialog.extend({snaps:null,O8729:null,O3395:-1,O9269:4,userId:null,isLoading:!1,O8443:!1,open:function(a){if(!this.isLoading){this.initValues();this.userId=a?a:ig.game.O1257.O2970;this.O9033();var b=this;this.isLoading=!0;ig.game.O9817.O6455(this.userId).done(function(c){b.isLoading=!1;c&&c.shortCodes?b.doOpen(c.shortCodes):b.close()})}},O4060:function(){return!1},O8800:function(){if(!this.isLoading)if(this.O4060()){this.initValues();
this.O8443=!0;this.O9033();var a=this;this.isLoading=!0;ig.game.O9817.O1769(ig.game.O4873.O8027,ig.game.O4873.currentArea).done(function(b){a.isLoading=!1;b&&b.shortCodes&&1<=b.shortCodes.length?a.doOpen(b.shortCodes):(ig.game.sounds.nocando.play(),a.close())})}else ig.game.sounds.nocando.play()},initValues:function(){this.O8729=new ml.Timer;this.snaps=[];this.userId=null;this.O8443=!1},O9033:function(){ig.game.writableDialog&&ig.game.writableDialog.isOpen&&ig.game.writableDialog.close();jQuery('<div id="albumDialog" class="disableContentSelect"></div>').appendTo("body");
ig.ua.mobile&&jQuery('<div id="mobileCloseButton" onclick="ig.game.albumDialog.close()">&nbsp;X&nbsp;</div>').appendTo("body")},doOpen:function(a){this.snaps=a;this.O6531();ig.game.O2974();this.toClose=!1;this.isOpen=!0;var b=this;jQuery("#albumDialog").scroll(function(){jQuery(this)[0].scrollHeight-jQuery(this).scrollTop()<=jQuery(this).outerHeight()&&b.O6531()})},O6531:function(){for(var a="",b=this.O3395+this.O9269-1,c=this.O3395+1;c<=b&&c<this.snaps.length;c++){var d=this.snaps[c],e=ig.game.strings.O9955(d),
f="ig.game.albumDialog.O5267(event,'"+e+"')";d=ig.game.O3186.O1398(d,!0);a+='<div class="snap" id="snap'+e+'">';a+='<img src="'+d+'" alt="" onmouseup="'+f+'"/>';a+="</div>";this.O3395=c}console.log(a);a&&jQuery("#albumDialog").append(a)},O5267:function(a,b){var c=this.O8729&&.5>=this.O8729.delta();!ig.ua.mobile&&!c&&(a&&3==a.which?(console.log(this.userId),!this.O8443&&ig.game.O1257.O2970==this.userId&&(ig.game.myLocationDialog.O4883(b),this.close())):ig.input.state("ctrl")?ig.game.O1257.O2970==this.userId&&
(jQuery("#snap"+b).slideUp(),ig.game.O9817.O9628(b,!1).done(function(){ig.game.sounds.bin.play()})):(c=ig.game.O3186.O1398(b),ml.Misc.openUrl(c)))},update:function(){ig.game.isFullAccount&&ig.input.state("ctrl")&&ig.input.pressed("i")&&(this.isOpen?this.close():this.open());this.isOpen&&(ig.input.pressed("esc")||ig.game.O1257&&(0!=ig.game.O1257.vel.x||0!=ig.game.O1257.vel.y))&&this.close()},close:function(){jQuery("#albumDialog").remove();jQuery("#mobileCloseButton").remove();this.snaps=null;this.O3395=
0;ig.game.O8577();this.isOpen=!1;this.userId=null;this.O8443=!1;this.parent()}})});ig.baked=!0;
ig.module("game.ui.customsnapshotdialog").requires("game.ui.components.uidialog").defines(function(){window.CustomSnapshotDialog=UIDialog.extend({pos:{x:0,y:0},size:{x:52,y:52},isOpen:!1,open:function(){this.pixelData=null;document.body.style.cursor="crosshair";this.parent()},update:function(){this.isOpen&&(this.pos={x:ig.input.mouse.x-this.size.x/2,y:ig.input.mouse.y-this.size.y/2},ig.game.O4774.O4920()?(ig.game.O4774.O6730(!1),this.O2979()):ig.input.released("esc")&&(document.body.style.cursor=
"default",this.isOpen=!1,this.close(),ig.game.areaDialog.open(!1)))},O2979:function(){this.isOpen=!1;ig.game.sounds.whoosh.play();document.body.style.cursor="default";var a=ig.system.context.getImageData(Math.floor(this.pos.x*ig.system.scale),Math.floor(this.pos.y*ig.system.scale),this.size.x*ig.system.scale,this.size.y*ig.system.scale);this.close();ig.game.areaDialog.open(!1,a)},draw:function(){this.isOpen&&this.O1264()},O1264:function(){this.pos.x=ml.Misc.O9024(this.pos.x,2,ig.system.width-this.size.x-
2);this.pos.y=ml.Misc.O9024(this.pos.y,2,ig.system.height-this.size.y-2);var a=ig.system.context;var b=this.pos.y;var c=this.size.x;var d=this.size.y;var e=ig.system.scale;var f=this.pos.x*e;b*=e;c*=e;d*=e;e=ig.system.scale;a.fillStyle="rgba(255,255,255,.5)";var g=(b+ig.game.camera.screenTarget.y)%ig.system.scale;f-=(f+ig.game.camera.screenTarget.x)%ig.system.scale;b-=g;a.fillRect(f-e,b-e,e,d+2*e);a.fillRect(f+c+e,b-e,e,d+2*e);a.fillRect(f,b-e,c+e,e);a.fillRect(f-e,b+d+e,c+3*e,e)}})});ig.baked=!0;
ig.module("game.ui.readabledialog").requires("game.ui.components.uidialog").defines(function(){window.ReadableDialog=UIDialog.extend({pos:{x:0,y:0},homePos:{x:0,y:0},size:{x:532,y:304},isOpen:!1,offset:{x:-11,y:-44},opacity:0,energy:0,O5115:0,O3038:5,energyMin:-150,energyMax:100,dialogId:"readableDialog",rgbBackground:null,rgbText:null,content:"",showBack:!0,centered:!1,attributes:{},init:function(){this.fontStyle="font-size: "+(5+2*ig.system.scale)+"px;";this.size={x:.5*ig.system.realWidth,y:.7*
ig.system.O5809}},open:function(a,b,c,d,e,f,g){this.isOpen||(this.homePos={x:a,y:b},this.pos={x:a,y:b},this.O1800(this.homePos),this.size.y=(.65*ig.system.height-65-10)*ig.system.scale,this.size.x=Math.round(1.777*this.size.y),this.attributes=f?f:{},this.isOpen=!0,this.energy=this.energyMin,this.O5115=this.O3038,this.showBack=!(f&&f.noBack),this.centered=!(!f||!f.centered),this.rgbBackground=c?c:"255,255,255",this.rgbText=d?d:"0,0,0",this.content=e,ig.game.O2116.O7884(ig.game.O1257,"reads",g),this.O5719(),
ig.game.O3957&&ig.game.O3957.O8855("read"))},O1800:function(){var a=jQuery("#"+ig.game.canvasId).position();return{x:Math.round((this.homePos.x-ig.game._rscreen.x)*ig.system.scale-this.size.x/2+a.left),y:Math.round((this.homePos.y-ig.game._rscreen.y)*ig.system.scale-this.size.y-ig.game.O9925+a.top)}},O5719:function(){var a=this.O1800(),b=ig.game.strings.O5143(this.content,this.rgbBackground,this.rgbText),c=1;this.attributes.semiTransparentBack&&(c=.5);b='<div class="contentPart">'+b+"</div>";c=this.fontStyle+
"; background-color: "+(this.showBack?"rgba("+this.rgbBackground+","+c+")":"transparent")+"; color: rgb("+this.rgbText+");";this.centered&&(c+="text-align: center;");c+=this.O7732();var d="";this.attributes.serifFont?d=' class="serifReadable"':this.attributes.sansSerifFont&&(d=' class="sansSerifReadable"');b=jQuery('<div id="'+this.dialogId+'" style="'+c+'"'+d+">"+b+"</div>");b.css("left",a.x+"px");b.css("top",a.y+"px");b.css("width",this.size.x+"px");b.css("height",this.size.y+"px");b.appendTo("body");
jQuery("#messageInput").click(function(e){jQuery("#messageInput").select()})},O7732:function(){var a="",b=5,c=0;this.attributes.tiltLeft&&this.attributes.tiltRight?(b=ig.game.O4293(2,b),c=ig.game.chance(50)?-b:b):this.attributes.tiltLeft?c=-b:this.attributes.tiltRight&&(c=b);0!=c&&(a="transform: rotate("+c+"deg)");return a},update:function(){if(this.isOpen){this.energy=(this.energy+this.O5115).limit(this.energyMin,this.energyMax);this.opacity=0>=this.energy?0:(this.energy/this.energyMax).limit(0,
1);if(0<this.opacity){var a=this.O1800();jQuery("#"+this.dialogId).css("left",a.x+"px");jQuery("#"+this.dialogId).css("top",a.y+"px");jQuery("#"+this.dialogId).css("opacity",this.opacity.toFixed(2))}ig.game.O1257&&1<=Math.abs(ig.game.O1257.vel.x)&&this.close()}this.parent()},close:function(){this.isOpen&&(jQuery("#readableDialog").remove(),ig.game.O8577(),this.isOpen=!1,this.O5115=-10)}})});ig.baked=!0;
ig.module("game.ui.musicrecorder").defines(function(){window.MusicRecorder=ig.Class.extend({O3064:[],O6189:20,buttons:null,rect:{x:0,y:0,width:48,height:19},isOpen:!1,alpha:.8,O1737:"musicRecording",init:function(a){this.rect.x=ig.system.width-54;this.rect.y=ig.system.height-24;this.buttons={record:{x:0,y:0,states:["default","active1","active2"],state:"default"},play:{x:25,y:0,states:["default","active"],state:"default"},undo:{x:17,y:10,states:["default","delete"],state:"default"},ok:{x:28,y:10},
dataEmpty:{x:19,y:10,O5885:!1,state:"default"},dataFull:{x:7,y:10,O5885:!1}};for(var b in this.buttons){a=this.buttons[b];a.width=ig.game.O8159["musicRecorder_"+b+"_default"].width;a.height=ig.game.O8159["musicRecorder_"+b+"_default"].height;a.states||(a.states=["default"]);void 0==a.O5885&&(a.O5885=!0);a.spritesheetParts=[];for(var c=0;c<a.states.length;c++)a.spritesheetParts[a.states[c]]=ig.game.O8159.getImage(ig.game.O8159["musicRecorder_"+b+"_"+a.states[c]])}},update:function(){ig.game.instrumentDialog&&
this.isOpen!=ig.game.instrumentDialog.isOpen&&(ig.game.instrumentDialog.isOpen?this.open():this.close());if(this.isOpen){var a=ig.game.O7763;switch(this.O8002()){case "record":a.O2512?(a.O5077(),ig.game.O5285.setItem(this.O1737,JSON.stringify(a.data))):(null!=a.O9727&&(a.O3926(),a.O7090()),this.O6094(),a.O3573());break;case "play":a.isPlaying?(a.O3926(),a.O2512&&(a.O5077(),a.O9835())):a.O9835();break;case "undo":1<=this.O3064.length?a.O1749(this.O3064[this.O3064.length-1]):a.O7090();this.O3064.pop();
a.data?ig.game.sounds.pickup.play():ig.game.sounds.bin.play();ig.game.O5285.setItem(this.O1737,JSON.stringify(a.data));break;case "ok":ig.game.painter.musicData=ig.game.O4507(ig.game.O7763.data),ig.game.painter.O7192="music",ig.game.panelSet.O9162.O9505()}this.buttons.record.state=a.O2512?"active"+(Math.floor(a.O7485)%2?"1":"2"):"default";this.buttons.play.state=a.isPlaying?"active":"default";null!=a.data?(this.buttons.undo.state=this.buttons.ok.state=this.buttons.dataFull.state="default",this.O3064&&
0!=this.O3064.length||(this.buttons.undo.state="delete"),this.buttons.dataEmpty.state=null):(this.buttons.undo.state=this.buttons.ok.state=this.buttons.dataFull.state=null,this.buttons.dataEmpty.state="default");if(a.isPlaying||a.O2512)this.buttons.undo.state=null,this.buttons.ok.state=null;null!=a.O9727&&(this.buttons.record.state=null,this.buttons.dataFull.state=null,this.buttons.dataEmpty.state=null)}},O6094:function(){ig.game.O7763.data&&(this.O3064.length>this.O6189&&this.O3064.shift(),this.O3064[this.O3064.length]=
ig.game.O4507(ig.game.O7763.data))},O8002:function(){var a=null;if(ig.game.O4774.O4920()){var b={x:Math.floor(ig.input.mouse.x),y:Math.floor(ig.input.mouse.y)};if(this.O1173(b,this.rect))for(var c in this.buttons){var d=this.buttons[c],e={x:this.rect.x+d.x,y:this.rect.y+d.y,width:d.width,height:d.height};if(d.O5885&&d.state&&this.O1173(b,e)){ig.game.O4774.O6730(!0);a=c;break}}}return a},O1173:function(a,b){return a.x>=b.x&&a.x<=b.x+b.width&&a.y>=b.y&&a.y<=b.y+b.height},draw:function(){if(this.isOpen&&
3!=ig.game.panelSet.tabState){ig.system.context.globalAlpha=this.alpha;for(var a in this.buttons){var b=this.buttons[a];b.state&&b.spritesheetParts[b.state].draw(this.rect.x+b.x,this.rect.y+b.y)}ig.system.context.globalAlpha=1}},open:function(){if(!this.isOpen&&ig.game.isEditorHere){var a=ig.game.O7763;a.reset();try{var b=localStorage.getItem(this.O1737);b&&a.O1749(JSON.parse(b))}catch(c){localStorage.removeItem(this.O1737),ig.game.errorManager.warn("Music recording backup cleared due to issue")}this.O3064=
[];this.isOpen=!0;ig.game.panelSet&&3==ig.game.panelSet.tabState&&ig.game.panelSet.O6923(2)}},O7090:function(){this.O3064=[];localStorage.removeItem(this.O1737)},close:function(){this.O3064=[];this.isOpen=!1}})});ig.baked=!0;
ig.module("game.ui.viewabledialog").requires("game.ui.components.uidialog").defines(function(){window.ViewableDialog=UIDialog.extend({pos:{x:0,y:0},size:{x:38,y:38},isOpen:!1,offset:{x:-11,y:-44},cell:1,maxCell:2,O9926:3,cellTimer:null,opacity:0,energy:0,O5115:0,O3038:5,energyMin:-150,energyMax:100,image:null,O9954:!1,O6184:!1,init:function(){},open:function(a,b,c,d,e,f,g){!this.isOpen&&c.image&&c.image.loaded&&c.image.width&&(this.offset={x:-11,y:-44},ig.game.O1257.attachments.b&&ig.game.O1257.attachments.b.animSheet&&
(this.offset.y+=ig.game.O9925-ig.game.O1257.attachments.b.animSheet.height),this.O3038=5,this.O9926=3,g&&(g.slow?this.O9926=5:g.fast?(this.O9926=1.5,this.O3038=10):g.veryFast&&(this.O9926=.5,this.O3038=25)),this.isOpen=!0,this.O6184=!!d,this.maxCell=Math.floor(c.image.width/this.size.x)-1,this.pos={x:a,y:b},this.image=c.image,this.cell=1,this.cellTimer=null,this.energy=this.energyMin,f&&(this.energy=0),this.O5115=this.O3038,e&&ig.game.sounds.O9961(e))},update:function(){this.energy=(this.energy+this.O5115).limit(this.energyMin,
this.energyMax);this.opacity=0>=this.energy?0:(this.energy/this.energyMax).limit(0,1);!this.cellTimer&&this.energy==this.energyMax&&(this.cellTimer=new ml.Timer);this.isOpen&&this.cellTimer&&this.cellTimer.delta()>=this.O9926&&(this.cellTimer.reset(),this.cell++,this.cell>this.maxCell&&(this.O6184?(this.cell--,this.close()):this.cell=1))},draw:function(){0<this.opacity&&(ig.system.context.globalAlpha=this.opacity,ig.system.context.drawImage(this.image.data,this.cell*this.size.x*ig.system.scale,0,
this.size.x*ig.system.scale,this.size.y*ig.system.scale,(this.pos.x-ig.game._rscreen.x+this.offset.x)*ig.system.scale,(this.pos.y-ig.game._rscreen.y+this.offset.y)*ig.system.scale,this.size.x*ig.system.scale,this.size.y*ig.system.scale),ig.system.context.globalAlpha=1)},close:function(){this.isOpen&&(this.cellTimer=null,this.isOpen=!1,this.O5115=-10)}})});ig.baked=!0;
ig.module("game.ui.virtualjoystick").requires("game.ui.components.uidialog","game.ui.components.uiclickspot","game.ui.components.uiclickspothelper").defines(function(){window.VirtualJoystick=UIDialog.extend({state:"",input:{left:!1,right:!1,up:!1,down:!1,action:!1},inputPrevious:{left:!1,right:!1,up:!1,down:!1,action:!1},O9842:!1,clickSpots:null,alpha:.4,O5011:0,O4652:null,topY:0,O9656:!1,init:function(){ig.game.O3310||this.O3702()},O3702:function(){var a=this,b=0,c=-30,d=-36,e=ig.game.instrumentDialog&&
ig.game.instrumentDialog.isOpen?-80:0,f=0;ig.ua.phone?f=ig.system.O6256()?-58:-50:ig.ua.tablet&&(f=-90);c+=f;d+=f;ig.ua.mobile&&(ig.system.O9756()?(f=25,ig.game.virtualKeyboard&&ig.game.virtualKeyboard.isOpen&&(f-=50),c+=f,d+=f):ig.game.virtualKeyboard&&ig.game.virtualKeyboard.isOpen||(c+=23,d+=23));ig.game.O1168&&(b-=54);b={left:{x:5,y:ig.system.height+c+e,width:28,height:12,O8537:["*"],doDebug:!1,clickspot:null,doPlaySound:!1,group:"virtualJoystick",margin:{x:8,y:22},O4838:function(){a.input.left=
!0;a.input.right=!1},O7211:function(){a.input.left=!1}},right:{x:48,y:ig.system.height+c+e,width:28,height:12,O8537:["*"],doDebug:!1,clickspot:null,doPlaySound:!1,group:"virtualJoystick",margin:{x:8,y:22},O4838:function(){a.input.right=!0;a.input.left=!1},O7211:function(){a.input.right=!1}},up:{x:ig.system.width-31+b,y:ig.system.height+d+e,width:23,height:28,O8537:["*"],doDebug:!1,clickspot:null,doPlaySound:!1,group:"virtualJoystick",margin:{x:8,y:7},O4838:function(){a.input.up=!0;a.input.down=!1},
O7211:function(){a.input.up=!1}},down:{x:ig.system.width-31+b,y:ig.system.height+d+40+e,width:23,height:28,O8537:["*"],doDebug:!1,clickspot:null,doPlaySound:!1,group:"virtualJoystick",margin:{x:8,y:5},O4838:function(){a.input.down=!0;a.input.up=!1},O7211:function(){a.input.down=!1}},action:{x:ig.system.width-70+b,y:ig.system.height+d+3+e,width:23,height:24,O8537:["*"],doDebug:!1,clickspot:null,doPlaySound:!1,group:"virtualJoystick",margin:{x:8,y:10},O4838:function(){a.input.action||(a.input.action=
!0,a.O6246())},O7211:function(){a.input.action=!1}}};this.topY=ig.system.height+c+e;if(!(ig.ua.phone&&ig.system.height>ig.system.width))if(ig.game.multithing&&ig.game.multithing.isOpen)b.left.y+=47,b.right.y+=47,b.up.y+=47,b.action.y+=47,b.down.x-=80,b.down.y+=7;else if(ig.ua.phone||ig.game.virtualKeyboard&&ig.game.virtualKeyboard.isOpen&&(!ig.game.instrumentDialog||!ig.game.instrumentDialog.isOpen))b.down.x-=80,b.down.y=ig.system.height+d+e;this.clickSpots=new UIClickSpotHelper(b,{x:0,y:0,width:480,
height:320})},O6872:function(){this.O4652=new ml.Timer},update:function(){this.O9842=!1;this.O4652&&.75<=this.O4652.delta()&&(this.O4652=null);this.O8112()&&!ig.game.O3199&&(this.inputPrevious=ig.game.O4507(this.input),this.clickSpots.O3191=this.state,this.clickSpots.O1815(),0<this.O5011&&(this.O5011--,ig.game.attachmentManager.O6246(!0)),this.parent())},O6246:function(){this.O9842=!0;0>=this.O5011&&!ig.game.O1257.attachments[ig.game.attachmentManager.slots.HOLDABLE]&&(this.O5011=7)},draw:function(){this.O8112()&&
this.clickSpots.O9683(this.alpha)},O8112:function(){return ig.ua.mobile&&!ig.game.O2636(!0)&&!this.O4652&&!this.O9656},O2494:function(){3<=ig.game.O1257.rank||!this.O9656?this.O9656=!this.O9656:ig.game.sounds.nocando.play()},O6955:function(){return ig.ua.mobile},O4994:function(){return this.O8112&&(this.input.left||this.input.right||this.input.up||this.input.down||this.input.action)},stop:function(){this.input={left:!1,right:!1,up:!1,down:!1,action:!1}}})});ig.baked=!0;
ig.module("game.ui.virtualkeyboard").requires("game.ui.components.uidialog","game.ui.components.uiclickspot","game.ui.components.uiclickspothelper").defines(function(){VirtualKeyboard=UIDialog.extend({state:null,O4702:null,O8952:[],O7202:2,togglerMargin:{x:16,y:10},isOpen:!1,alpha:.5,O9382:null,O6234:!1,init:function(){this.O6234=!1;this.O3187()},O1247:function(){this.isOpen?this.close():ig.game.painter&&ig.game.painter.isRunning||(this.open(),ig.game.virtualJoystick.stop());ig.game.virtualJoystick&&
ig.game.virtualJoystick.O3702()},open:function(){this.isOpen=!0;this.O2968();this.state="default";this.O8952=[];ig.game.camera.setOffset();ig.game.virtualJoystick&&ig.game.virtualJoystick.O3702()},close:function(){jQuery("#nativeKeyboardInput").remove();this.O9382=null;this.isOpen=!1;ig.game.camera.setOffset();ig.game.virtualJoystick&&ig.game.virtualJoystick.O3702()},O3187:function(){var a=this,b=ig.game.O1168||ig.game.instrumentDialog&&ig.game.instrumentDialog.isOpen?55:0,c=ig.system.width/2-this.togglerMargin.x-
b-ig.game.O8159.virtualKeyboardOpenButton.width/2,d=ig.system.height-this.togglerMargin.y-15;ig.ua.tablet&&(c=ig.system.width-38-b);this.O4702=new UIClickSpotHelper({O1247:{O8537:["*"],x:c,y:d,width:ig.game.O8159.virtualKeyboardOpenButton.width+2*this.togglerMargin.x,height:ig.game.O8159.virtualKeyboardOpenButton.height+2*this.togglerMargin.y,doPlaySound:!0,doDebug:!1,onClick:function(){a.O1247()}}},{x:0,y:0,width:ig.system.width,height:ig.system.height})},update:function(){if(ig.ua.mobile){if(this.isOpen&&
this.O9382){var a=this.O9382.value;if(""!=a&&null!=a){this.O9382.value="";for(var b=0;b<a.length;b++){var c=a[b];this.O4025("key_"+c);ig.game.O5058.O9345(c);ig.game.O1257.O2274(c)}}}this.O4702.O3191=this.state;this.O4702.O1815()}},keyPressBackspace:function(){this.O4025("key_backspace");ig.game.O5058.O9664()},draw:function(){if(ig.ua.mobile){var a=this.O4702.items.O1247;ig.game.O8159.O8278(a.x+this.togglerMargin.x+3,a.y+this.togglerMargin.y,this.alpha);this.O4702.O9380()}},O4025:function(a){this.O8952.unshift(a);
this.O8952.length>this.O7202&&this.O8952.splice(this.O7202);(2<=this.O8952.length&&"key_newLine"==this.O8952[0]&&"key_newLine"==this.O8952[1]||1==this.O8952.length&&"key_newLine"==this.O8952[0])&&this.close()},O2968:function(){jQuery("#nativeKeyboardInput").remove();var a=jQuery('<input type="text" class="dialogInputBox" id="nativeKeyboardInput" autocomplete="off" autocorrect="off" autocapitalize="off" value=""/>');a.appendTo("body");a.css("padding",2*ig.system.scale+"px");a.css("width",50*ig.system.scale+
"px");a.css("font-size",5*ig.system.scale+"px");a.css("border-width",1*ig.system.scale+"px");a.css("left","50px");a.css("top","10px");a.css("visibility","visible");this.O6234&&(a.css("background-color","white"),a.css("color","black"),a.css("opacity","0.75"),a.css("width","70%"));a.focus();var b=this;jQuery("#nativeKeyboardInput").keyup(function(c){13==c.keyCode?b.O9104():8==c.keyCode&&b.keyPressBackspace()});jQuery("#nativeKeyboardInput").blur(function(c){b.close()});this.O9382=document.getElementById("nativeKeyboardInput")},
O9104:function(){ig.game.O5058.O3723();this.O4025("key_newLine");var a=ig.game.O5058.O1534.slice().reverse().join("");0===a.toLowerCase().indexOf("to ")&&ig.game.O5058.O4317(a);ig.game.O5058.O1534=[];ig.game.O5058.O2962=!1;ig.game.O1257.O6644=!1}})});ig.baked=!0;
ig.module("game.ui.healthbar").defines(function(){window.HealthBar=ig.Class.extend({prevHealth:0,pos:{x:0,y:0},barPos:{x:0,y:0},O1070:9,O2515:3,O7673:null,O7804:.5,O1483:.15,fadingOut:!1,fadeOutStep:.02,O8861:null,O6116:1.5,opacity:.8,O3898:.8,beatTimer:null,beatTime:.8,O2686:null,pulseTime:1,O5544:0,O1350:1.7,init:function(){this.prevHealth=ig.game.O1257.health},O4884:function(a,b){this.pos.x=a;this.pos.y=b;this.barPos.x=this.pos.x+this.O1070+this.O2515;this.barPos.y=this.pos.y+4},update:function(){ig.game.O1257.health<
this.prevHealth&&(this.fadingOut=!1,this.O7673=new ml.Timer,this.opacity=this.O3898);ig.game.O1257.health<ig.game.O1257.O4116&&this.O7673&&this.O7673.delta()>=this.O7804&&ig.game.autoHeals&&(ig.game.O1257.health=Math.min(ig.game.O1257.health+this.O1483,ig.game.O1257.O4116),ig.game.O1257.health==ig.game.O1257.O4116&&(this.O8861=new ml.Timer));this.O8861&&this.O8861.delta()>this.O6116&&(this.O8861=null,this.fadingOut=!0);this.fadingOut&&(this.opacity=Math.max(this.opacity-this.fadeOutStep,0),0==this.opacity&&
(this.fadingOut=!1));this.prevHealth=ig.game.O1257.health},draw:function(){if(ig.game.O1257.health<ig.game.O1257.O4116||this.O8861&&this.O8861.delta()<=this.O6116||this.fadingOut){ig.system.context.globalAlpha=this.opacity;ig.game.O8159.O9641(this.pos.x,this.pos.y+2);ig.game.O8159.O8789(this.barPos.x,this.barPos.y);for(var a=Math.floor(50/ig.game.O1257.O4116*ig.game.O1257.health),b=1;b<=a;b++)ig.game.O8159.O4169(this.barPos.x+b,this.barPos.y+1);ig.game.autoHeals&&ig.game.O1257.health<ig.game.O1257.O4116&&
(!this.O2686||this.O2686.delta()>this.pulseTime)&&this.O7673&&this.O7673.delta()>=this.O7804&&(ig.game.O8159.O1238(this.barPos.x+this.O5544,this.barPos.y),this.O5544+=this.O1350,this.O5544>=a-6&&(this.O5544=0,this.O2686=new ml.Timer));ig.system.context.globalAlpha=1;ig.game.O1257.health<ig.game.O1257.O4116&&!ig.game.O1257.isDead&&(!this.beatTimer||this.beatTimer.delta()>this.beatTime)&&(ig.game.autoHeals||this.O7673&&3>=this.O7673.delta())&&(ig.game.sounds.heartbeat.volume=ig.game.autoHeals?Math.min(1.1-
ig.game.O1257.health/ig.game.O1257.O4116,1):Math.max(0,Math.min(1-this.O7673.delta()/3,1)),ig.game.sounds.heartbeat.play(),this.beatTimer=new ml.Timer)}}})});ig.baked=!0;
ig.module("game.ui.bottommenu-more").requires("game.ui.components.uidialog","game.ui.components.uiclickspot").defines(function(){window.BottomMenuMore=UIDialog.extend({opacity:1,O6146:!0,O2945:!0,clickSpotMyLocation:null,clickSpotCreateArea:null,clickSpotFindAreas:null,clickSpotMap:null,clickSpotInvite:null,O8719:null,clickSpotPaste:null,clickSpotNews:null,clickSpotBoost:null,clickSpotSettings:null,clickSpotHelp:null,clickSpotHeight:0,O9845:null,O6739:null,O9316:!1,O2217:null,numberOfMenuItems:0,
O5987:.35,O2751:!1,O5472:!0,init:function(a,b,c){this.O5472=!ig.ua.android;this.numberOfMenuItems=ig.game.isFullAccount?11:5;!this.O5472&&ig.game.isFullAccount&&this.numberOfMenuItems--;this.size.x=ig.game.O8159.bottomMenuMoreMiddle.width;this.size.y=ig.game.O8159.bottomMenuMoreMiddle.height*this.numberOfMenuItems;this.clickSpotHeight=this.size.y/this.numberOfMenuItems;this.pos.x=a;this.pos.y=b-this.size.y-4;this.O3270=c},update:function(){this.O3591();this.isOpen&&(this.clickSpotMyLocation&&this.clickSpotMyLocation.update(),
this.clickSpotMap&&this.clickSpotMap.update(),this.clickSpotInvite&&this.clickSpotInvite.update(),this.O8719&&this.O8719.update(),this.clickSpotPaste&&this.clickSpotPaste.update(),this.clickSpotCreateArea&&this.clickSpotCreateArea.update(),this.clickSpotFindAreas&&this.clickSpotFindAreas.update(),this.clickSpotNews&&this.clickSpotNews.update(),this.clickSpotBoost&&this.clickSpotBoost.update(),this.clickSpotSettings&&this.clickSpotSettings.update(),this.clickSpotHelp&&this.clickSpotHelp.update(),this.O2217&&
this.O2217.update());this.parent()},draw:function(){if(this.isOpen){this.O2217&&this.O2217.draw();for(var a=this.pos.x+this.size.x-5,b=1;b<=this.numberOfMenuItems;b++){var c="bottomMenuMore";c=1==b?c+"Top":b==this.numberOfMenuItems?c+"Bottom":c+"Middle";ig.game.O8159.draw(this.pos.x,this.pos.y+(b-1)*ig.game.O8159.bottomMenuMoreMiddle.height,1,ig.game.O8159[c])}this.clickSpotMap&&(ig.game.O8159.draw(this.clickSpotMap.pos.x+5-1,this.clickSpotMap.pos.y+5-1,.6,ig.game.O8159.mapMenuIcon),ig.system.context.globalAlpha=
.7,ig.game.blackFont.draw("Map",this.clickSpotMap.pos.x+5+13,this.clickSpotMap.pos.y+5),ig.system.context.globalAlpha=1,ig.ua.mobile||(ig.system.context.globalAlpha=this.O5987,ig.game.blackFont.draw("f9",a,this.clickSpotMap.pos.y+5,ig.Font.ALIGN.RIGHT)));this.clickSpotNews&&(ig.game.O8159.draw(this.clickSpotNews.pos.x+5-1,this.clickSpotNews.pos.y+5-1,.6,ig.game.O8159.newsMenuIcon),ig.system.context.globalAlpha=.7,ig.game.blackFont.draw("News",this.clickSpotNews.pos.x+5+12,this.clickSpotNews.pos.y+
5),ig.system.context.globalAlpha=1);this.clickSpotFindAreas&&(ig.game.O8159.draw(this.clickSpotFindAreas.pos.x+5-2,this.clickSpotFindAreas.pos.y+5-2,.6,ig.game.O8159.findAreaIcon),ig.system.context.globalAlpha=.7,ig.game.blackFont.draw("Find Areas",this.clickSpotFindAreas.pos.x+15+5,this.clickSpotFindAreas.pos.y+5),ig.system.context.globalAlpha=1);this.clickSpotBoost&&(ig.game.O8159.draw(this.clickSpotBoost.pos.x+5-1,this.clickSpotBoost.pos.y+5-2,.6,ig.game.O8159.boostMenuIcon),ig.system.context.globalAlpha=
.7,ig.game.blackFont.draw("Boosts",this.clickSpotBoost.pos.x+5+10,this.clickSpotBoost.pos.y+5),ig.ua.mobile||(ig.system.context.globalAlpha=this.O5987,ig.game.blackFont.draw("ctrl+b",a,this.clickSpotBoost.pos.y+5,ig.Font.ALIGN.RIGHT)),ig.system.context.globalAlpha=1);this.clickSpotCreateArea&&(ig.game.O8159.draw(this.clickSpotCreateArea.pos.x+5-1,this.clickSpotCreateArea.pos.y+5-1,.6,ig.game.O8159.createAreaIcon),b=ig.game.O4296||!ig.game.isEditorHere?"Create Area":"Create Sub-Area",ig.game.O1257&&
ig.game.O1257.rank>=ig.game.O9753||(b="Create Area"),ig.system.context.globalAlpha=.7,ig.game.blackFont.draw(b,this.clickSpotCreateArea.pos.x+5+15,this.clickSpotCreateArea.pos.y+5),ig.system.context.globalAlpha=1);this.clickSpotInvite&&(ig.game.O8159.draw(this.clickSpotInvite.pos.x+5-1,this.clickSpotInvite.pos.y+5-1,.6,ig.game.O8159.inviteMenuIcon),ig.system.context.globalAlpha=.7,ig.game.blackFont.draw("Invite",this.clickSpotInvite.pos.x+5+12,this.clickSpotInvite.pos.y+5),ig.system.context.globalAlpha=
1);this.O8719&&(ig.game.O8159.draw(this.O8719.pos.x+5,this.O8719.pos.y+5-1,.6,ig.game.O8159.discordMenuIcon),ig.system.context.globalAlpha=.7,ig.game.blackFont.draw("Join Discord",this.O8719.pos.x+5+12,this.O8719.pos.y+5),ig.system.context.globalAlpha=1);this.clickSpotPaste&&(ig.game.O8159.draw(this.clickSpotPaste.pos.x+5-2,this.clickSpotPaste.pos.y+5-1,.6,ig.game.O8159.pasteMenuIcon),ig.system.context.globalAlpha=.7,ig.game.blackFont.draw("Paste",this.clickSpotPaste.pos.x+5+12,this.clickSpotPaste.pos.y+
5),ig.ua.mobile||(ig.system.context.globalAlpha=this.O5987,ig.game.blackFont.draw("ctrl+v",a,this.clickSpotPaste.pos.y+5,ig.Font.ALIGN.RIGHT)),ig.system.context.globalAlpha=1);this.clickSpotMyLocation&&(ig.game.O8159.draw(this.clickSpotMyLocation.pos.x+5-1,this.clickSpotMyLocation.pos.y+5-2,.6,ig.game.O8159.bottomMenuMoreHereIcon),ig.system.context.globalAlpha=.7,ig.game.blackFont.draw("Snapshot",this.clickSpotMyLocation.pos.x+5+15,this.clickSpotMyLocation.pos.y+5),ig.ua.mobile||(ig.system.context.globalAlpha=
this.O5987,ig.game.blackFont.draw("f4",a,this.clickSpotMyLocation.pos.y+5,ig.Font.ALIGN.RIGHT)),ig.system.context.globalAlpha=1);this.clickSpotHelp&&(ig.system.context.globalAlpha=.7,ig.game.blackFont.draw("Help",this.clickSpotHelp.pos.x+5,this.clickSpotHelp.pos.y+5),ig.system.context.globalAlpha=1);this.clickSpotSettings&&(ig.game.O8159.draw(this.clickSpotSettings.pos.x+5-1,this.clickSpotSettings.pos.y+5-2,.6,ig.game.O8159.settingsIcon),ig.system.context.globalAlpha=.7,ig.game.blackFont.draw("Settings",
this.clickSpotSettings.pos.x+5+10,this.clickSpotSettings.pos.y+5),ig.system.context.globalAlpha=1);this.O3617();ig.game.isFullAccount&&this.O7311()}},O7311:function(){var a="SUN MON TUE WED THU FRI SAT".split(" "),b=function(f){return 9>=f?"0"+f.toString():f},c=this.pos.x+46,d=this.pos.y+this.size.y-12;this.O6739||(this.O6739=new ml.Timer);2<=this.O6739.delta()&&(this.O6739.reset(),(this.O9316=!this.O9316)&&this.O9845.reset());var e=new Date(ig.game.O4086.milliseconds);ig.system.context.globalAlpha=
this.O5987;this.O9316?(b=a[e.getUTCDay()]+" "+this.O9393(e.getUTCDate()),ig.game.blackFont.draw(b,this.pos.x+this.size.x-4,d,ig.Font.ALIGN.RIGHT)):(this.O9845||(this.O9845=new ml.Timer),a=.5<=this.O9845.delta()?" ":":",1<=this.O9845.delta()&&(this.O9845=null),ig.game.blackFont.draw(b(e.getUTCHours()),c+7,d,ig.Font.ALIGN.RIGHT),ig.game.blackFont.draw(a,c+9,d-1,ig.Font.ALIGN.CENTER),ig.game.blackFont.draw(b(e.getUTCMinutes()),c+11,d),ig.game.blackFont.draw("MT",c+22,d));ig.system.context.globalAlpha=
1},O9393:function(a){a=a.toString();var b=a.substring(a.length-2);if("11"===b||"12"===b||"13"===b)b=a+"th";else switch(a.substring(a.length-1)){case "1":b=a+"st";break;case "2":b=a+"nd";break;case "3":b=a+"rd";break;default:b=a+"th"}return b},O3617:function(){if(ig.game.isFullAccount){var a=ig.game.bottomMenu.alerts;if(a&&0<ig.game.bottomMenu.O4354()){var b={news:this.clickSpotNews},c;for(c in a)if(("news"!=c||ig.game.bottomMenu.O5787())&&0<a[c]){var d=b[c];d&&ig.game.bottomMenu.O7228(d.pos.x+d.size.x-
7,d.pos.y+d.size.y-13,a[c])}}}},O4460:function(){this.close();this.O2751=ig.game.O1682=!0;ig.game.draw();ig.game.userMapDialog.O8040();ig.game.userMapDialog.draw();ig.game.O3957.draw();ig.game.O8894.O9203(ig.game.O1257)},open:function(){this.parent();var a=this,b=this.pos.x,c=this.pos.y,d={x:this.size.x,y:this.clickSpotHeight};if(ig.game.O4873.O3907()||ig.game.isEditorHere||ig.game.O4223){var e=ig.game.O1886(!1);e=ig.game.strings.O8631(e);e=ig.game.strings.O7686(e.trim(),20);this.O2217=new UIClickText({x:this.pos.x+
5,y:this.pos.y-10},e,ig.game.whiteFont,"#FFFFFF",1);this.O2217.onClick=function(){ig.game.virtualJoystick.O6872();ig.game.O4873.O8292()||ig.game.O4223?a.O8490():ig.game.areaDialog.open(!1)}}this.clickSpotFindAreas=new UIClickSpot({x:b,y:c},d,!1,null);this.clickSpotFindAreas.onClick=function(){ig.game.virtualJoystick.O6872();a.close();ig.game.areaSearchDialog&&ig.game.areaSearchDialog.open()};c+=this.clickSpotHeight;this.clickSpotCreateArea=new UIClickSpot({x:b,y:c},d,!1,null);this.clickSpotCreateArea.onClick=
function(){ig.game.virtualJoystick.O6872();a.close();ig.game.areaDialog.O4439()};c+=this.clickSpotHeight;ig.game.isFullAccount&&(this.clickSpotMyLocation=new UIClickSpot({x:b,y:c},d,!1,null),this.clickSpotMyLocation.onClick=function(){ig.game.virtualJoystick.O6872();a.O4460()},c+=this.clickSpotHeight);ig.game.isFullAccount&&(this.O5472&&(this.O8719=new UIClickSpot({x:b,y:c},d,!1,null),this.O8719.onClick=function(){window.open("https://thingistan.com/discord")==null&&(window.location="https://thingistan.com/discord")},
c+=this.clickSpotHeight),this.clickSpotMap=new UIClickSpot({x:b,y:c},d,!1,null),this.clickSpotMap.onClick=function(){ig.game.virtualJoystick.O6872();a.close();ig.game.userMapDialog.O4152()},c+=this.clickSpotHeight,this.O5472&&(this.clickSpotInvite=new UIClickSpot({x:b,y:c},d,!1,null),this.clickSpotInvite.onClick=function(){ig.game.virtualJoystick.O6872();a.close();ig.game.O5222()},c+=this.clickSpotHeight,this.clickSpotPaste=new UIClickSpot({x:b,y:c},d,!1,null),this.clickSpotPaste.onClick=function(){ig.game.virtualJoystick.O6872();
a.close();ml.Misc.O8763()},c+=this.clickSpotHeight));this.clickSpotNews=new UIClickSpot({x:b,y:c},d,!1,"clickSpotNews");this.clickSpotNews.onClick=function(){ig.game.virtualJoystick.O6872();a.close();a.O3270.O7315()};c+=this.clickSpotHeight;ig.game.isFullAccount&&(this.clickSpotBoost=new UIClickSpot({x:b,y:c},d,!1,null),this.clickSpotBoost.onClick=function(){ig.game.virtualJoystick.O6872();a.close();ig.game.boostDialog.isOpen?ig.game.boostDialog.close():ig.game.boostDialog.open()},c+=this.clickSpotHeight);
this.clickSpotSettings=new UIClickSpot({x:b,y:c},d,!1,null);this.clickSpotSettings.onClick=function(){ig.game.virtualJoystick.O6872();a.close();ig.game.settings.openDialog()};c+=this.clickSpotHeight;this.clickSpotHelp=new UIClickSpot({x:b,y:c},d,!0,"clickSpotHelp");jQuery(this.clickSpotHelp.O9697).click(function(){a.close();ml.Misc.O9447(!0)});c+=this.clickSpotHeight},O8490:function(){this.close();var a=ig.game.O4873.O8292()?0:ig.game.O4873.currentArea;a='<p><img src="'+(ig.game.O1946+"media/ring-thumb/"+
a+".png?v="+ig.game.version)+'" alt=""/></p>';ig.game.alertDialog.open({html:a+'<div class="pseudoLink" onclick="ig.game.areaSearchDialog.open(\'areas 1-8\')" style="text-transform: uppercase; opacity: .6">more...</div>',O5358:!0,O3144:!0})},O3591:function(){this.O2751&&(this.O2751=!1,ig.game.myLocationDialog.open())},close:function(){this.O6739=this.O9845=null;this.O9316=!1;this.O2217&&this.O2217.remove();this.clickSpotMyLocation&&this.clickSpotMyLocation.remove();this.clickSpotInvite&&this.clickSpotInvite.remove();
this.clickSpotPaste&&this.clickSpotPaste.remove();this.clickSpotMap&&this.clickSpotMap.remove();this.clickSpotNews&&this.clickSpotNews.remove();this.clickSpotCreateArea&&this.clickSpotCreateArea.remove();this.clickSpotFindAreas&&this.clickSpotFindAreas.remove();this.clickSpotBoost&&this.clickSpotBoost.remove();this.clickSpotSettings&&this.clickSpotSettings.remove();this.clickSpotHelp&&this.clickSpotHelp.remove();this.parent()}})});ig.baked=!0;
ig.module("game.ui.bottommenu").requires("game.ui.bottommenu-more","game.ui.components.uiclicktext").defines(function(){window.BottomMenu=ig.Class.extend({posRelativeToBottom:{x:4,y:7},pos:{},alpha:0,O3831:{},O2102:null,O9547:{},O3217:{},O6470:{},O8380:null,O5182:null,O8224:null,O7781:null,O5672:!1,subMenus:[],O3874:[],O9491:null,alerts:{visited:0,news:0,help:0},O1934:!1,O6165:null,O6031:null,O8624:!1,O9774:null,O5451:null,O5723:!0,O2202:null,O1280:!1,O9489:null,O7595:null,O6093:!1,O2258:"seenFlagTags",
isOnNewFlagAlertSystemKey:"isOnNewFlagAlertSystem",O9242:-1,init:function(){this.pos={x:4,y:7};this.O6093=120>=(ig.game.O2004?ig.game.O2004/60:0)||ig.game.O1257&&1>=ig.game.O1257.rank;this.O3831={x1:0,y1:0,x2:15,y2:10};this.O6093&&(this.O3831.x2+=22);var a=0;ig.ua.mobile&&(a=5,this.O3831.x1-=a,this.O3831.x2+=2*a,this.O3831.y1-=6,this.O3831.y2+=12);!ig.game.O4223&&-1===ig.game.O2791.indexOf(ig.game.O9720)&&(this.O8624=!0);this.O9274();this.O7335();if(ig.game.O4296||this.O3516())this.O2102=(this.O5723=
!ig.ua.mobile)?{x1:24,y1:-3,x2:null,y2:8}:{x1:5,y1:4,x2:null,y2:8},this.O6093&&(this.O2102.x1+=20),ig.ua.mobile&&(this.O2102.x1=9),this.O3516()?this.O2102.x2=this.O2102.x1+ig.game.O8159.meetPeople.width:(this.O2102.x2=this.O2102.x1+ig.game.O8159.meetPeopleSmall.width,ig.ua.mobile||(this.O2102.x1-=5)),ig.ua.mobile&&(this.O2102.y2+=5);this.alpha=.7;this.O3516()||(this.alpha-=.2);!ig.game.isFullAccount&&ig.game.O1257&&1<=ig.game.O1257.rank&&(this.O6031={x:parseInt(ig.system.widthHalf-ig.game.O8159.O6294.width/
2),y:ig.system.height-ig.game.O8159.O6294.height-5},ig.ua.iPad&&ig.system.height>ig.system.width&&!ig.game.isFullAccount&&this.O8624&&(this.O6031.x-=26),ig.ua.phone?(this.O6031.x=ig.system.width-ig.game.O8159.O6294.width-5,this.O6031.y=6):ig.ua.mobile&&ig.system.height>ig.system.width&&(this.O6031.x+=15),this.O9547={x1:this.O6031.x-8,y1:this.O6031.y-8,x2:this.O6031.x+ig.game.O8159.O6294.width+16,y2:this.O6031.y+ig.game.O8159.O6294.height+16},ig.game.O6672||(this.O1934=!0));for(var b=1;5>=b;b++)this.O3874[b]=
ig.game.O8159.getImage(ig.game.O8159["alertIcon"+b]);this.O9491=ig.game.O8159.getImage(ig.game.O8159.O9491);this.pos.y=ig.system.height-ig.game.O8159.bottomMenuButton.height-this.pos.y;this.subMenus.push(new BottomMenuMore(this.pos.x+this.O3831.x1+a,this.pos.y,this));ig.game.isFullAccount&&this.O4536();this.showFlagsAlertIfNeeded();this.O9242=this.subMenus.length-1},update:function(){ig.game.O4774.O8784(this.O3831,this.pos.x,this.pos.y)&&(ig.game.O4774.O6730(!0),ml.Misc.O1645(),this.O1807(this.O9242));
if(ig.game.settings.showMainUI)if(this.O9534(),this.O9274(),this.O7335(),this.O5118(),this.updateClicktextUprankedInfo(),this.O3923(),ig.game.O1276&&ig.game.O4774.O8784(this.O6470,0,0))ig.game.O1189.register(ig.game.O1189.types.TELEPORTED_HOME,function(){ig.game.O4774.O6730();ig.game.portaller.O2121(ig.game.O1276)});else if(this.O8624&&ig.game.O4774.O8784(this.O3217,0,0))ig.game.O4774.O6730(),ig.game.portaller.startExitAreaTeleportingRequest();else if(this.O5182&&ig.game.O4774.O8784(this.O5182,0,
0))ig.game.holderDialog.isOpen?ig.game.holderDialog.close():(console.clear(),console.log("We will try to open a Holder of a specific Id now, which may fail locally if that Id doesn't exist."),ig.game.holderDialog.open(ig.game.isLocal?"55ae5e57f7cb996010d2f958":"55ae6474cbc4a7db27499cb3"));else if(this.O2102&&(this.O5723&&ig.game.O4774.O8784(this.O2102,this.pos.x,this.pos.y)||ig.game.O4774.O8784(this.O2102,this.O2102.x1,this.O2102.y1))){ig.game.O1189.register(ig.game.O1189.types.USED_MEET);ig.game.O4774.O6730(!0);
var a=[0];a=a[ig.game.O4293(0,a.length-1)];ig.game.portaller.O6417(a)}for(a=0;a<this.subMenus.length;a++)this.subMenus[a].update();ig.input.pressed("f9")&&!ig.input.state("shift")&&ig.game.userMapDialog&&ig.game.O1257&&ig.game.userMapDialog.O4152();this.O1934&&ig.game.O4774.O8784(this.O9547,0,0)&&(top.location!=self.location?this.O5981():(ig.game.O4774.O6730(!0),this.O6979()));this.O5296()},O5981:function(){top.location=self.location.href},O5118:function(){if(ig.game.O7088){if(!this.O8224){var a=
{x:parseInt(ig.system.widthHalf),y:5};this.O8224=new UIClickText(a,"oops! so many people",ig.game.whiteSmallFont,"#ffffff",.7,void 0,!0);this.O8224.onClick=function(){ig.game.alertDialog.open({html:'<p><img src="'+ig.game.O1946+'media/emergency-whale.png" alt="" style="width: '+(90*ig.system.scale+"px\"/></p><p>Sorry, our servers are in coping mode as there's so many people on right now! We're working hard to resolve this. In the meantime, you can't see other people around or do item searches. Our apologies!</p>"),
O5358:!0});jQuery("#alertDialog").css("background-color","rgb(107,156,230)").css("color","rgb(255,255,255)")}}this.O8224&&this.O8224.update()}},O3923:function(){if(ig.game.O6672){if(!this.O7781){var a={x:parseInt(ig.system.widthHalf),y:5},b=this;this.O7781=new UIClickText(a,"servers are currently upgraded",ig.game.whiteSmallFont,"#ffffff",.7,void 0,!0);this.O7781.onClick=function(){b.O9745()}}this.O7781&&this.O7781.update()}},O9745:function(){ig.game.alertDialog.open({html:'<p><img src="'+ig.game.O1946+
'media/emergency-whale.png" alt="" style="width: '+(90*ig.system.scale+"px\"/></p><p>Sorry, creating, posting, logging in &amp; more are temporarily disabled as we're testing a server upgrade!</p>"),O5358:!0});jQuery("#alertDialog").css("background-color","rgb(107,156,230)").css("color","rgb(255,255,255)")},updateClicktextUprankedInfo:function(){if(ig.game.O1257&&ig.game.isFullAccount&&!this.O8380&&!this.openedUprankedInfo)if(1>=ig.game.O9392&&ig.game.O1257.rank==ig.game.O9753&&!ig.game.O1189.check(ig.game.O1189.types.DID_CREATE_AREA)){var a=
this,b={x:parseInt(ig.system.widthHalf),y:this.pos.y+1};this.O8380=new UIClickText(b,"did you know?",ig.game.whiteSmallFont,"#ffffff",.7,void 0,!0);this.O8380.onClick=function(){ig.game.alertDialog.O3813("You can now create new areas from the bottom-left menu. Thanks for being in Thingistan, and please make yourself at home!");a.openedUprankedInfo=!0;ig.game.sounds.success.play();ig.game.bottomMenu.O8380=null}}else 4==ig.game.O1257.rank&&ig.game.O1189.check(ig.game.O1189.types.ISSUED_CTEST)&&!ig.game.O1189.check(ig.game.O1189.types.PASSED_CTEST)&&
(a=this,b={x:parseInt(ig.system.widthHalf),y:this.pos.y+1},this.O8380=new UIClickText(b,"did you know?",ig.game.whiteSmallFont,"#ffffff",.7,void 0,!0),this.O8380.onClick=function(){ig.game.O1189.register(ig.game.O1189.types.PASSED_CTEST);a.openedUprankedInfo=!0;ig.game.sounds.success.play();ig.game.bottomMenu.O8380=null;ig.game.alertDialog.open({text:"You can now edit at spawn zone centers and the inner ring. Thank you for being in Thingistan!",O9267:function(){ig.game.O4873.O1492()&&ig.game.portaller.startExitAreaTeleportingRequest()},
O3144:!0})});this.O8380&&this.O8380.update()},O5296:function(){if(this.O2202){var a=this.O2202.delta();10<=a&&!this.O1280?(this.O1280=!0,jQuery("#pingFromFriend").fadeOut(1E3,function(){jQuery(this).remove()})):60<=a&&(this.O2202=null,this.O1280=!1)}},O9274:function(){var a=ig.game.O1276?"elsewhereButtonSmall":"elsewhereButton";ig.ua.mobile?this.O9774=ig.game.O1276?{x:3,y:4}:{x:6,y:6}:(this.O9774={x:ig.system.width-ig.game.O8159[a].width-6,y:ig.system.height-ig.game.O8159[a].height-6},ig.game.O1168&&
(this.O9774.x-=58),ig.ua.mobile&&(this.O9774.x-=26),ig.game.O1276&&(this.O9774.x-=20,this.O9774.y+=1));this.O8624&&(this.O3217={x1:this.O9774.x,y1:this.O9774.y,x2:this.O9774.x+ig.game.O8159[a].width,y2:this.O9774.y+ig.game.O8159[a].height},ig.ua.mobile&&(this.O3217.x1-=5,this.O3217.x2+=10,this.O3217.y1-=5,this.O3217.y2+=10));!ig.ua.mobile&&ig.game.O4296&&(!ig.game.isFullAccount||1>=ig.game.O9392)&&(a=this.O8624?this.O9774.x-82:ig.system.width-75,!this.O8624&&ig.game.O1168&&(a-=60),this.O5182={x1:a,
y1:ig.system.height-11},ig.game.O1276&&(this.O5182.x1-=24),this.O5182.x2=this.O5182.x1+ig.game.O8159.questionsAndFeedbackButton.width,this.O5182.y2=this.O5182.y1+ig.game.O8159.questionsAndFeedbackButton.height)},O7335:function(){ig.game.O1276&&(this.O5451={x:ig.system.width-ig.game.O8159.homeButton.width-5,y:ig.system.height-ig.game.O8159.homeButton.height-5},ig.game.O1168&&(this.O5451.x-=58),ig.ua.mobile&&(this.O5451.x=3,this.O5451.y=28),this.O6470={x1:this.O5451.x,y1:this.O5451.y,x2:this.O5451.x+
ig.game.O8159.homeButton.width,y2:this.O5451.y+ig.game.O8159.homeButton.height},ig.ua.mobile&&(this.O6470.y2+=5))},O6979:function(a){ig.game.O6672?this.O9745():ig.game.isFullAccount?ig.game.alertDialog.O3813("You are already logged in"):(ig.game.playerDialog&&ig.game.playerDialog.isOpen&&ig.game.playerDialog.close(),ig.game.bottomMenu.showLoginDialogWeb(a))},O6143:function(){ig.game.O6550="0.01";ig.game.alertDialog.close();ig.game.O8894.fadeInShroud(function(){window.location.href="//store.steampowered.com/app/342280"})},
showLoginDialogSteamAndWeb:function(a,b){var c='<div id="loginDialog"><p style="margin-bottom: 0; padding-bottom: 0">';c=(a?c+"<strong>To do this, please get Thingistan, also on Steam!</strong>":c+"<strong>Thingistan is also on Steam!</strong>")+"<br/><br/>Create items, areas, build &amp; live with us!<br/>+ 100 extra boosts!<br/>";c+="+ No ads!<br/>";c+="+ Help support the costs of running Thingistan!";c+="</p>";c+='<p style="margin-top: 0; padding-top: 20px"><span class="button" onclick="ig.game.bottomMenu.O6143()" style="cursor: pointer">&gt;&gt; Get at Steam&nbsp;</span></p>';
a=b?"ig.game.alertDialog.close()":"ig.game.bottomMenu.showLoginDialogWeb()";c+='<div style="border-top: '+ig.system.scale+'px solid rgba(0,0,0,.25); width: 80%; margin-left: auto; margin-right: auto"></div>';!ig.game.O1019||ml.Misc.O1673()||b?(c+='<p style="margin-bottom: 0; padding-bottom: 0">or '+(b?"take me":"login")+" to the ad-supported</p>",c+='<p style="margin-top: 0; padding-top: 20px"><span class="button" onclick="'+a+'" style="cursor: pointer">&gt;&gt; web version</span></p>'):c+='<p><span class="pseudoLink" style="color: #777; font-size: 90%" onclick="'+
a+'">I have an existing web account...</span></p>';c+="</div>";ig.game.alertDialog.open({html:c,O5358:!0})},showLoginDialogWeb:function(a){var b=ig.ua.isIOsUIWebView,c='<a class="button" href="/auth/google" onclick="javascript:'+(b?"ig.game.bottomMenu.O3761()":"ig.game.O9710.goToFullAccountLogin('google')")+';return false;">&gt;&gt;&nbsp;<span class="service">Google</span>&nbsp;</a>';var d='<div id="loginDialog"><div style="margin-top: 18px; margin-bottom: 10px">';d=(a?d+'To do this, please login to <img src="//static.thingistan.com/media/logo.png" alt=""/>,<br/>a universe we invent and live together!':
d+'Welcome to <img src="//static.thingistan.com/media/logo.png" alt=""/>,<br/>a universe we invent and live together!')+"</div>";ig.ua.phone||(d+=ml.Misc.O7125());d+='<p class="termsMention">If you agree to our spirit &amp; <a href="javascript:ig.game.bottomMenu.O4591()" target="_blank" id="termsLink">terms</a> and are between 13 and Infinity years old, ';ig.ua.mobile||(d+="<br/>");d=d+"join us with</p><p"+((ig.ua.phone?' style="line-height: 5em"':"")+">");d=b?d+('<a class="button" href="https://thingistan.com/auth/discord" onclick="javascript:ig.game.O9710.goToFullAccountLogin(\'discord\');return false;">&gt;&gt;&nbsp;<span class="service" id="discord">Discord</span></a> or <a class="button" href="https://thingistan.com/auth/amazon" onclick="javascript:ig.game.O9710.goToFullAccountLogin(\'amazon\');return false;">&gt;&gt;&nbsp;<span class="service" id="amazon">Amazon</span></a> <a href="javascript:ig.game.bottomMenu.O4655()" id="buttonsMoreToggle">or...</a> <span id="buttonsMore">'+
c+"</span>"):d+(c+' or <a class="button" href="https://thingistan.com/auth/discord" onclick="javascript:ig.game.O9710.goToFullAccountLogin(\'discord\');return false;">&gt;&gt;&nbsp;<span class="service" id="discord">Discord</span></a>');d+="</p></div>";ig.game.alertDialog.close();ig.game.alertDialog.open(d,!0,null,null,!0,!0,!0);ig.game.O5285.setItem("didSeeTrailer","1")},O3761:function(){ig.game.alertDialog.close();ig.game.alertDialog.O5816("PLEASE OPEN thingistan.com/#token IN YOUR MOBILE BROWSER, LOGIN, COPY THE TOKEN, AND PASTE HERE:",
void 0,ig.game.bottomMenu.O7210,void 0,!1,!0,void 0,void 0,void 0,void 0,!0)},O7210:function(a){a&&ig.game.O9817.O5074(a,this).done(function(){window.location.reload()}).fail(function(b,c){ig.game.alertDialog.open("oops, that didn't work... ");ig.game.sounds.nocando.play()})},O4655:function(){jQuery("#buttonsMore").toggle()},O4591:function(){ig.game.alertDialog.close();ig.game.alertDialog.open('<iframe src="/info#guidelines" style="width: 95%; height: 315px" sandbox></iframe>',!0,ig.game.bottomMenu.O6979)},
O1807:function(a){this.subMenus[a].isOpen?this.subMenus[a].close():(this.O6497(),this.subMenus[a].open())},O5854:function(){this.subMenus&&this.subMenus[this.O9242]&&this.subMenus[this.O9242].isOpen&&this.subMenus[this.O9242].close()},draw:function(){if(ig.game.settings.showMainUI){this.O8624&&(ig.game.O1276?ig.game.O8159.O7146(this.O9774.x,this.O9774.y,this.alpha):ig.game.O8159.O4615(this.O9774.x,this.O9774.y,this.alpha));if(this.O2102){var a=this.O5723?{x:this.pos.x,y:this.pos.y+1}:{x:0,y:0};this.O3516()?
ig.game.O8159.O8341(a.x+this.O2102.x1,a.y+this.O2102.y1,this.alpha):ig.game.O8159.O5271(a.x+this.O2102.x1,a.y+this.O2102.y1,this.alpha)}this.O5182&&ig.game.O8159.draw(this.O5182.x1,this.O5182.y1,this.alpha,ig.game.O8159.questionsAndFeedbackButton)}a=this.alpha;ig.game.settings.showMainUI||(a*=.3);this.O6093?ig.game.O8159.O7122(this.pos.x+1,this.pos.y-0-1,a):ig.game.O8159.O7832(this.pos.x+1,this.pos.y+0,a);for(a=0;a<this.subMenus.length;++a)this.subMenus[a].draw();ig.game.settings.showMainUI&&ig.game.O1276&&
ig.game.O8159.O9723(this.O5451.x,this.O5451.y,this.alpha);ig.game.isFullAccount?ig.game.settings.showMainUI&&this.O7705():this.O1934&&ig.game.O8159.O7731(this.O6031.x,this.O6031.y,this.alpha);ig.ua.phone&&this.O1934&&ig.game.O8159.O7731(this.O6031.x,this.O6031.y,this.alpha);ig.game.settings.showMainUI&&(this.O8380&&this.O8380.draw(),this.O8224&&this.O8224.draw(),this.O7781&&this.O7781.draw());this.O9241()},O3516:function(){return!(ig.game.O1257&&ig.game.isFullAccount&&ig.game.O1257.rank&&2<=ig.game.O1257.rank&&
7<=ig.game.O9392)},O9241:function(){if(ig.game.isFullAccount&&(!ig.game.O1189.check(ig.game.O1189.types.DID_INWORLD_BUILD)||!ig.game.O1189.check(ig.game.O1189.types.DID_INWORLD_REMOVE))){var a=ig.system.width/2,b=ig.system.height-17;ig.ua.phone&&(b-=14);var c="Ctrl-Click";ig.ua.mobile?c="Double-Tap":ig.ua.mac&&(c="Cmd-Click");c=ig.game.isEditorHere?"Welcome! Drag a block to build.\n"+(c+" a block to remove."):" To build, go to an area\nwhere you can edit.";ml.Misc.O6657(c,a,b,1)}},O7705:function(){if(!this.subMenus[this.subMenus.length-
1].isOpen){var a=this.O4354();0<a&&this.O7228(this.pos.x+7,this.pos.y-2,a)}},O4354:function(){var a=0,b;for(b in this.alerts)"uprankedInfo"==b||"news"==b&&!this.O5787()||(a+=this.alerts[b]);return a},O5787:function(){return ig.game.O1257&&2<=ig.game.O1257.rank&&!ig.game.isLocal},O7228:function(a,b,c){c>this.O3874.length?this.O9491&&this.O9491.draw(a,b):this.O3874[c]&&this.O3874[c].draw(a,b)},O2186:function(){this.O6497()},O6497:function(){},O4536:function(){var a=this;setTimeout(function(){ig.game.O9817.O2786().done(function(b){a.alerts.news=
b});ig.game.bottomMenu.O2160()},5E3)},O2160:function(){var a=this;setTimeout(function(){ig.game.O9817.O6662().done(function(b){0<(b&&b.count)&&a.O3039()})},3E3)},O7315:function(){ig.game.O9817.O3728(this).done(function(a){for(var b="",c,d,e=0;e<a.length;e++){d=a[e];ig.game.isFullAccount||(d.unread=!1);c=new Date(d.date);var f=[];d.unread&&f.push("newsIsUnread");d.isImportant&&f.push("newsIsImportant");b+='<p class="'+f.join(" ")+'">'+this.O8682(d.text)+'<span class="newsDate">'+ig.game.strings.O7882(c)+
"</span></p>"}ig.game.alertDialog.open('<div class="news">'+(b+'<p class="newsAlso">&gt;&gt; Also on <span class="pseudoLink" onclick="ml.Misc.openUrl(\'https://twitter.com/thingistan\')">Twitter</span> and <span class="pseudoLink" onclick="ml.Misc.openUrl(\'https://www.facebook.com/thingistan\')">Facebook</span></p></div>'),!0,null,null,null,!0);this.alerts.news=0})},O8682:function(a){var b=-1==a.indexOf("thingistan.com/#");a=ig.game.strings.O9955(a);return ig.game.strings.O7811(a,b,!0)},O3676:function(){var a=
this;ig.game.O9817.O5613(this.O9489,this).done(function(b){b&&ig.game.portaller.O6417(a.O7595)})},O3039:function(){jQuery("#pingFromFriend").remove();jQuery("#newMift").remove();jQuery("#flagsAlert").remove();jQuery('<div id="newMift" style="'+this.O7687()+'"><span class="pseudolink" onclick="ig.game.bottomMenu.O9924()">You received a new Mift!</span></div>').appendTo("body");ig.game.sounds.new_mift.play()},O7687:function(){var a="bottom: "+9*ig.system.scale+"px; font-size: "+(6+2*ig.system.scale)+
"px;";return ig.ua.shouldGetAds?a+("width: "+ig.system.width*ig.system.scale+"px;"):a+"width: 100%;"},O5711:function(){this.clearUnseenFlagTags();ig.game.flagsAlert?this.showFlagsAlertIfNeeded():ig.game.alertDialog.O5782('<p style="color: green"><strong>\u2713</strong> There are no flag alerts for you at the moment.</p>')},showFlagsAlertIfNeeded:function(){ig.game.flagsAlert?(this.unseenFlagTags=this.getUnseenFlagTags(),1<=this.unseenFlagTags.length&&("true"!=localStorage.getItem(this.isOnNewFlagAlertSystemKey)?
(localStorage.setItem(this.isOnNewFlagAlertSystemKey,"true"),this.O6793()):(jQuery("#pingFromFriend").remove(),jQuery("#newMift").remove(),jQuery("#flagsAlert").remove(),jQuery('<div id="flagsAlert" style="'+this.O7687()+'"><span class="pseudolink" onclick="ig.game.bottomMenu.showFlagsAlertDialog()">You have flag reports</span></div>').appendTo("body")))):this.clearUnseenFlagTags()},getUnseenFlagTags:function(){var a=[];if(ig.game.flagsAlertTags){var b=localStorage.getItem(this.O2258);if(b)try{b=
JSON.parse(b)}catch(e){console.log("--------- Invalid Json in seenFlagTags")}b&&Array.isArray(b)||(b=[]);for(var c=0;c<ig.game.flagsAlertTags.length;c++){var d=ig.game.flagsAlertTags[c];-1===b.indexOf(d)&&a.push(d)}}return a},O6793:function(){localStorage.setItem(this.O2258,JSON.stringify(ig.game.flagsAlertTags))},clearUnseenFlagTags:function(){localStorage.removeItem(this.O2258)},showFlagsAlertDialog:function(){var a="";this.O6793();jQuery("#flagsAlert").remove();a+='<p style="text-align: left">We hope showing you the flag reasons you received helps avoid a future automatic ban:</p><ul style="color: red">';
if(this.unseenFlagTags)for(var b=0;b<this.unseenFlagTags.length;b++){var c=this.unseenFlagTags[b],d="",e=null;switch(c){case "writable etiquette issues":e="/info#guidelines",d=", like personal attacks or discussing account issues"}c=ig.game.strings.O9955(c);e&&(c='<a href="'+e+'" target="_blank" style="color: red">'+c+"</a>");c+=ig.game.strings.O9955(d);a+="<li>"+c+"</li>"}ig.game.alertDialog.open(a+'</ul><p style="text-align: left">Flags in Thingistan are often given in regards to harassment, personal attacks, griefing or other things against <span class="pseudoLink" onclick="ml.Misc.openUrl(\'//thingistan.com/info#guidelines\')">the terms</span>. Thanks!</p>',
!0,null,null,null,!0)},O9924:function(){jQuery("#newMift").remove();ig.game.sounds.click.play();ig.game.playerDialog.O7845();ig.game.playerDialog.doSparkleMiftsButton=!0},receivedPing:function(a,b,c,d){var e=!1;if(ig.game.settings&&ig.game.settings.onlyFriendsCanPingUs){var f=this;ig.game.O8518.O1906(a,this).done(function(g){e=!g;f.O7400(a,b,c,d,e)})}else this.O7400(a,b,c,d,e)},O7400:function(a,b,c,d,e){this.O9489=a;this.O7595=c;var f='<span class="pseudolink" onclick="ig.game.playerDialog.openForPlayerId(\''+
(a+"')\">")+ig.game.strings.O9955(b)+"</span>";f+=" pings you from ";if(0==c||"0"==c)f+="inner ring";else if(ig.game.areaDialog){var g=c,h="12345678".split("");g="0"==c?"inner ring":0<=h.indexOf(String(c))?"outer ring":ig.game.areaDialog.O9822(g,!0);c='<span class="pseudolink" onclick="ig.game.bottomMenu.O3676()">'+ig.game.strings.O9955(g)+"</span>";f+=c;!e&&ig.game.friendsDialog&&ig.game.friendsDialog.O5985(a,c);ig.game.O7606&&ig.game.O7606.O5985(a,b,c)}d&&(f+=" ("+d+")");e||this.O2202||(jQuery("#pingFromFriend").remove(),
jQuery("#newMift").remove(),jQuery('<div id="pingFromFriend" style="'+this.O7687()+'">'+f+"</div>").appendTo("body"),ig.game.sounds.ping.play(),this.O2202=new ml.Timer)},O7426:function(){this.O3442()&&(ig.game.O1002.O8925(),ig.system.context.globalAlpha=this.alpha,ig.game.whiteSmallFont.draw(ig.game.O1257.screenName,ig.game.topLeftUIPos.x+22,ig.game.topLeftUIPos.y+2),ig.system.context.globalAlpha=1)},O3442:function(){return ig.game.O1257&&0>=ig.game.O1257.rank},O9534:function(){this.O3442()&&this.O3992()&&
(ig.game.O4774.O6730(!1),0==ig.game.O1257.rank?ig.game.O1002.O3585():ig.game.playerDialog.O7845())},O3992:function(){var a=ig.game.O4774.O8299(ig.game.topLeftUIPos.x,ig.game.topLeftUIPos.y-5,ig.game.topLeftUIPos.x+ig.game.namePxWidth+18,ig.game.topLeftUIPos.y+9);a&&ig.game.O4774.O7551();return a&&ig.game.O4774.O4920()}})});ig.baked=!0;
ig.module("game.ui.painter").requires("game.ui.interactingdialog","game.ui.thingreferencesdialog").defines(function(){window.Painter=ig.Class.extend({types:{solidGroup:{title:"solid",iconRow:1},solid:{title:"solid",key:"SOLID",iconRow:1,O3570:1,O5534:3,parent:"solidGroup"},passable:{title:"one-way",key:"PASS",O5534:3,O9762:!0,iconRow:18,O3570:19,parent:"solidGroup"},sticky:{title:"Sticky",key:"STICKY",O3570:47,iconRow:9,parent:"solidGroup"},backGroup:{title:"back",iconRow:22},thingBack:{title:"back",
key:"DECOBG",O3570:35,iconRow:22,parent:"backGroup"},farBack:{title:"far back",key:"FARBACK",iconRow:22,O5534:0,O9925:{width:38,height:38},O2867:!0,parent:"backGroup"},thingGroup:{title:"thing",iconRow:14},thing:{title:"thing",key:"DECO",O5534:1,O3570:15,parent:"thingGroup"},thingFront:{title:"thing in front",key:"DECOFG",O5534:1,O3570:16,parent:"thingGroup"},furry:{title:"furry",key:"FURRY",O9925:{width:11,height:19},O3570:61,parent:"thingGroup"},clothy:{title:"clothy",key:"CLOTHY",O9925:{width:11,
height:11},O3570:62,parent:"thingGroup"},drifty:{title:"drifty",key:"DRIFTY",O9925:{width:11,height:19},O3570:63,parent:"thingGroup"},changingThingGroup:{title:"changing thing",iconRow:15},animatedThing:{title:"changing thing",key:"DECOANIM",O2135:!0,O5534:1,iconRow:15,O3570:36,parent:"changingThingGroup"},lively:{title:"lively thing",key:"LIVELY",O3570:42,O2135:!0,O5534:0,parent:"changingThingGroup"},sparkling:{title:"sparkling",key:"SPARKLING",O2135:!0,O5534:0,iconRow:15,O3570:54,parent:"changingThingGroup"},
bigThingGroup:{title:"big thing",iconRow:44},bigThing:{title:"big thing",key:"DECOBIG",O3570:59,O5534:0,O9925:{width:38,height:38},O6611:!0,iconRow:44,parent:"bigThingGroup",O9245:!0},backAndFrontThing:{title:"back + front",key:"DECOFB",O5534:1,O3570:21,O2135:!0,O9925:{width:38,height:38},O6611:!0,parent:"bigThingGroup"},transforming:{title:"transforming",key:"TRANSFORM",O5534:0,O2867:!0,O9925:{width:38,height:38},O8687:!0,O5930:!0,parent:"bigThingGroup"},veryBigThing:{title:"very big thing",key:"DECOVBIG",
O3570:59,O5534:0,O9925:{width:57,height:57},O6611:!0,iconRow:44,parent:"bigThingGroup",O9245:!0},livingGroup:{title:"living",iconRow:5},living:{title:"flipping living",key:"LIVING",flips:!0,O5534:0,iconRow:5,O3570:39,parent:"livingGroup",O9925:{width:29,height:29},O6611:!0},livingChanging:{title:"changing living",key:"LIVANIM",O5534:0,iconRow:5,O3570:39,O2135:!0,parent:"livingGroup",O9925:{width:29,height:29},O6611:!0},livingMoving:{title:"moving living",key:"LIVMOV",O5534:0,iconRow:5,O3570:37,O2135:!0,
parent:"livingGroup",O9925:{width:29,height:29},O6611:!0},holdableGroup:{title:"holdable",iconRow:17},holdableItem:{title:"item",key:"STACKHOLD",O5534:0,O3570:25,O6611:!0,parent:"holdableGroup"},equipment:{title:"equipment",key:"EQUIPMENT",O5534:0,O3570:25,O6611:!0,O3397:!0,parent:"holdableGroup"},emitter:{title:"emitter",key:"EMITTER",O5534:0,O3570:25,O6611:!0,O2135:!0,O3397:!0,parent:"holdableGroup"},consumable:{title:"consumable",key:"CONSUMAB",O5534:0,O3570:25,O6611:!0,O3397:!0,parent:"holdableGroup"},
aimable:{title:"aimable",key:"AIMABLE",O5534:0,O6611:!0,O2135:!0,parent:"holdableGroup"},hook:{title:"swing line",key:"HOOK",O5534:0,O3570:25,O6611:!0,parent:"holdableGroup"},liner:{title:"liner",key:"LINER",O5534:0,O3570:25,O6611:!0,parent:"holdableGroup"},climbable:{title:"climbable",key:"CLIMB",iconRow:19,O5534:2,O3570:20},flexible:{title:"flexible",key:"FLEXIBLE",O3570:53,O2135:!0,O5534:1,iconRow:14},pushingGroup:{title:"pushing",iconRow:16},pushing:{title:"pushing",key:"PUSH",O9762:!0,iconRow:16,
O3570:17,parent:"pushingGroup"},pushingDiagonal:{title:"diagonal pushing",key:"PUSHDIAG",O9762:!0,iconRow:16,O3570:18,O5511:!0,parent:"pushingGroup"},bouncyGroup:{title:"bouncy",iconRow:10},bouncy:{title:"bouncy",key:"BOUNCEY",O9762:!0,O3570:10,parent:"bouncyGroup"},tiltedBouncy:{title:"tilted bouncy",key:"BOUNCEYT",O9762:!0,O3570:11,parent:"bouncyGroup",O5511:!0},movingGroup:{title:"moving",key:"MOVING",iconRow:3,O3570:3},moving:{title:"moving",key:"MOVING",O3570:3,parent:"movingGroup"},mover:{title:"mover",
key:"MOVER",O5534:0,parent:"movingGroup"},slidey:{title:"slidey",key:"SLIDEY",iconRow:7,O3570:7},slopeGroup:{title:"slope",iconRow:11},slope:{title:"slope",key:"SLOPE",O5511:!0,O9762:!0,O3570:12,parent:"slopeGroup",O5534:2},slideySlope:{title:"slidey slope",key:"SLSLOPE",O5511:!0,O9762:!0,O3570:13,parent:"slopeGroup",O5534:2},passableSlope:{title:"passable slope",key:"PASSSLOPE",O5511:!0,O9762:!0,O3570:12,parent:"slopeGroup",O5534:0},liquid:{title:"liquid",key:"LIQUID",iconRow:26,O3570:27,O2135:!0,
O5534:3},transportGroup:{title:"transporting",iconRow:20,O5534:3},transport:{title:"transporting",key:"PORTAL",iconRow:20,O2135:!0,O5534:3,parent:"transportGroup"},dirTransport:{title:"dir. transport.",key:"PORTALDIR",iconRow:20,O2135:!0,O9762:!0,O5534:3,parent:"transportGroup"},walkable:{title:"walkable",key:"WALKABLE",O3570:48,parent:"backGroup"},bodyGroup:{title:"body",iconRow:12},body:{title:"body",key:"STACKWEARB",O5534:0,O8687:!0,O5930:!0,O9925:{width:29,height:29},parent:"bodyGroup",O6611:!0},
motion:{title:"motion",key:"MOTION",O5534:0,O9925:{width:29,height:29},O2135:!0,O6611:!0,parent:"bodyGroup"},wearableGroup:{title:"wearable",iconRow:4},wearableBig:{title:"wearable",key:"STACKWEAR",O5534:0,O2135:!0,O3570:34,O9925:{width:38,height:38},parent:"wearableGroup"},wearable:{title:"smaller wearable",key:"STACKWEAR",O5534:0,O2135:!0,O3570:34,parent:"wearableGroup"},instrument:{title:"instrument",key:"STACKINSTR",O5534:0,iconRow:36,O3570:45,O6611:!0},soundGroup:{title:"music",iconRow:28},music:{title:"music",
key:"MUSIC",iconRow:28,O3570:44,O5534:0,O5930:!0,parent:"soundGroup"},musicSheet:{title:"music sheet",key:"MUSICSHEET",iconRow:28,O8687:!0,O5534:0,O2867:!0,O9925:{width:32,height:36},parent:"soundGroup"},lightGroup:{title:"light",iconRow:24},light:{title:"light",key:"LIGHT",O3570:33,O5534:0,parent:"lightGroup",O5930:!0},lighttop:{title:"top light",key:"LIGHTTOP",O3570:5,O5534:0,parent:"lightGroup",O5930:!0},fillLight:{title:"fill light",key:"FILLLIGHT",O3570:5,O5534:0,parent:"lightGroup",O5930:!0},
vignette:{title:"surround light",key:"VIGNETTE",O3570:5,O5534:0,parent:"lightGroup",O5930:!0},glow:{title:"light glow",key:"GLOW",O3570:6,O5534:0,parent:"lightGroup",O2135:!0,O9925:{width:38,height:38}},environmentGroup:{title:"environment",iconRow:33,O3570:46},environment:{title:"environment",key:"ENVIRONM",O5534:0,iconRow:33,O3570:46,O5930:!0,parent:"environmentGroup"},interactiveEnvironment:{title:"Interactive Env.",key:"INTERENV",O5534:0,O3570:51,parent:"environmentGroup"},mountableGroup:{title:"mountable",
iconRow:35},mountableGround:{title:"mountable",key:"MNTGROUND",iconRow:35,O5534:0,O5930:!0,O9925:{width:38,height:38},O2135:!0,O3866:!0,parent:"mountableGroup",O6611:!0},mountableAir:{title:"flying mountable",key:"MNTAIR",iconRow:35,O5534:0,O5930:!0,O9925:{width:38,height:38},O2135:!0,O3866:!0,parent:"mountableGroup",O6611:!0},placesGroup:{title:"Places",iconRow:39},pointer:{title:"pointer",key:"POINTER",iconRow:39,O3570:24,O5534:0,O9925:{width:38,height:38},parent:"placesGroup"},placeName:{title:"place name",
key:"PLACENAME",O3570:49,O5534:0,O6611:!0,O9925:{width:38,height:38},parent:"placesGroup"},harmfulGroup:{title:"harmful",iconRow:2},harmful:{title:"harmful",key:"HARM",iconRow:27,O3570:28,parent:"harmfulGroup",O5930:!0},harmfulAnim:{title:"changing harmful",key:"HARMANIM",O2135:!0,iconRow:27,O3570:28,parent:"harmfulGroup",O5930:!0},deadly:{title:"deadly",key:"DEADLY",iconRow:2,O3570:2,parent:"harmfulGroup",O5930:!0},viewableGroup:{title:"viewable",iconRow:34,O3570:40},viewable:{title:"viewable",key:"VIEWABLE",
O3570:40,O8687:!0,O9925:{width:38,height:38},O5534:0,O2867:!0,parent:"viewableGroup"},medium:{title:"medium",key:"MEDIUM",O5534:0,parent:"viewableGroup"},textualGroup:{title:"Textual",iconRow:40},readable:{title:"Readable",key:"READABLE",O3570:50,O5534:0,iconRow:40,parent:"textualGroup"},writable:{title:"Writable",key:"WRITABLE",O5534:0,parent:"textualGroup",O8137:2},holderGroup:{title:"Holder",iconRow:29},holder:{title:"holder",key:"HOLDER",iconRow:29,O5534:0,O2135:!0,O5930:!0,O9925:{width:29,height:29},
parent:"holderGroup"},multithing:{title:"multi",key:"MULTITHING",O3570:60,O5534:0,O2135:!0,O9925:{width:38,height:38},parent:"holderGroup"},interactingGroup:{title:"interacting",iconRow:42},interacting:{title:"interacting",key:"INTERACT",O3570:52,O5534:0,iconRow:5,O2135:!0,O9925:{width:29,height:29},parent:"interactingGroup"},interactingMotion:{title:"interact. motion",key:"INTERMOT",O5534:0,O9925:{width:29,height:29},O2135:!0,parent:"interactingGroup"},helper:{title:"helper",key:"HELPER",O5534:0,
parent:"interactingGroup",O3570:58},dynamicThing:{title:"dynamic",key:"DYNATHING",O8687:!0,iconRow:38,O5534:0,O9925:{width:29,height:29},O2867:!0},happeningGroup:{title:"automation",iconRow:47},happening:{title:"happening",key:"HAPPENING",O8687:!0,O9670:0,O9925:{width:29,height:29},O2867:!0,parent:"happeningGroup"},brain:{title:"brain",key:"BRAIN",O3570:55,O5534:0,parent:"happeningGroup"},generator:{title:"area generator",key:"GENERATOR",O3570:64,O5534:0,parent:"happeningGroup"},changer:{title:"changer",
key:"CHANGER",O3570:56,O5534:0,parent:"happeningGroup"}},isRunning:!1,isFocused:!0,O1115:!1,O5039:19,O5017:19,tileWidth:null,O2576:null,pageZoom:1,O8977:8,O5869:8,O4389:0,selectedCell:0,O8176:0,O1025:5,O4685:11,maxColors:56,transparentIndex:11,O4782:11,O6199:2,maxCells:2,O2737:0,O6076:null,cursorX:null,cursorY:null,O6396:!1,O5079:!1,O7724:!1,O5991:"nameInput",O8650:!1,context:null,images:{},imagePath:null,mode:"default",modeOld:"default",O3477:!0,O1333:[],O9545:{},O7126:2,O1613:17,O4380:null,timeouts:{preview:null,
O7659:null,O4210:null,O5100:null,drawBig:null},O4210:!1,O2190:"default",oldData:{name:null,type:null,direction:null},O2161:null,O3064:[],O6189:50,O1677:0,directionMax:4,O7106:8,O6759:0,O1155:!1,O9945:!1,drawImageMessageMaxOpacity:.6,O9368:null,O2152:!1,O9482:2,O9928:2,O6463:11,O4299:8,bodyCells:{stand:0,walk:1,jump:2,fall:3,climb:4,create:5,sit:6,blink:7,talk:8},bodyCellsOld:{stand:0,walk:1,jump:2,fall:3,climb:4,create:5,blink:6},O1879:null,previewColor:{r:0,g:0,b:0,alpha:1},backgroundRgb:{r:154,
g:150,b:145,alpha:1},canvasOverlayRgb:{r:125,g:125,b:125,alpha:1},O7189:{},O3774:10,O4400:{},O6433:null,O2911:null,areas:null,data:null,O3565:null,O1944:"rgb(182,179,175)",O9703:!0,O9897:0,O7659:1,O6394:2,O8103:6,O9096:null,avatarTemplatePosition:{x:0,y:0,rotation:0},O7192:null,O5715:null,colorPickerType:"b",colorPickerB:{rgbaBase:null,rgbaTint:null,baseY:null,tintX:null},O5324:!0,O2753:!1,interactingDialog:null,thingReferencesDialog:null,O4071:!1,O5813:!1,lastPointDrawn:{x:null,y:null},O8774:!1,
O3646:!1,lastPixelSeenOnClick:{x:null,y:null},O9027:"DYNATHING LIVING LIVANIM MOTION STACKHOLD STACKWEAR DECOANIM INTERMOT DECOTCH EQUIPMENT EMITTER CONSUMAB GATHER MNTGROUND MNTAIR ENVIRONM VIEWABLE ACTIVATOR OPENABLE HOLDER BRAIN CHANGER MIFT HAPPENING MOVER FARBACK TRANSFORM".split(" "),brushType:0,O3095:5,instruments:[],musicSheetSpecialIndex:{10:"terminator"},O7061:void 0,noteDelayMSDefault:250,noteDelayMSMin:50,noteDelayMSMax:2E3,O3219:50,O8954:5E3,O3775:5E3,O1171:1E5,O4635:60,O1143:!1,showGrid:!1,
O8212:!1,painterCanvasSize:{x:166,y:240},O9231:0,O9179:!1,O4099:["dynamicThing","farBack","lively"],O3584:!1,typesWithNoLivePreviewEver:["interacting","happening","changer"],livePreviewOffset:{x:0,y:0},O8737:!1,O1746:9,O6742:4,O3031:!1,O4897:!1,O2483:null,O5495:1E3,O3593:!0,O5205:0,O8630:!1,O4764:!1,O6920:[],O1107:[],O7169:{},O9370:null,O8214:87,O4032:.4,O839Default:.4,isDragging:!1,dragEdgeSize:6,dragEdgeOuterExtension:4,dragLastMouseX:null,dragLastMouseY:null,init:function(a){this.O1115||(this.imagePath=
"/media/painter/",ml.Misc.O7959()||(this.imagePath="//static.thingistan.com"+this.imagePath),this.O2037(),this.pageZoom=ig.system.scale,this.backgroundImage=a,this.O3942(),ig.game.O1257&&10<=ig.game.O1257.rank&&(this.types.sound={title:"sound",key:"SOUND",O3570:44,O5534:0,parent:"soundGroup"},this.types.ringPortal={title:"ring portal",key:"PORTALR",O2135:!0,parent:"transportGroup"},this.types.musical={title:"musical",key:"MUSICAL",parent:"soundGroup"}),ig.ua.mobile&&!ig.game.hasMinfinity&&delete this.types.mift,
this.O7692(),this.O6677(),this.O4782=this.transparentIndex,this.O2843())},O7692:function(){for(var a in this.types){var b=this.types[a];if(b.O9925==void 0||b.O9925==null)b.O9925={width:this.O5039,height:this.O5017}}},O2037:function(){this.instruments=this.O7653(ig.game.sounds.instruments);this.instruments.splice(10,0,null);this.instruments.splice(this.transparentIndex,0,null)},O3595:function(){var a=this.data&&this.data.type&&this.types[this.data.type].O9925?this.types[this.data.type].O9925:null;
a?(this.tileWidth=a.width,this.O2576=a.height):(this.tileWidth=this.O5039,this.O2576=this.O5017);var b=this.data&&(this.data.type=="motion"||this.data.type=="interactingMotion");this.O8977=this.tileWidth==ig.game.O4975&&this.O2576==ig.game.O4975?4:this.tileWidth==ig.game.O3759&&this.O2576==ig.game.O3759?2.665:this.tileWidth==29&&this.O2576==29||b?5.23:this.tileWidth==32&&this.O2576==36?4.23:this.tileWidth==76?2:this.O5869;a={x1:0,y1:0,width:166,height:261};var c={width:this.tileWidth*this.O8977-1,
height:this.O2576*this.O8977-1},d={width:this.O5039*this.O8977-1,height:this.O5017*this.O8977-1};this.O8977!=this.O5869&&(d={width:this.tileWidth*this.O8977-1,height:this.O2576*this.O8977-1},b&&(d={width:this.types.body.O9925.width*this.O8977,height:this.types.body.O9925.height*this.O8977-1+1},c.height+=1));b={x1:a.width/2-c.width/2,y1:13+d.height-c.height};var e={x1:7,y1:13};this.areas={all:a,drawing:c,O9420:d,O8423:b,O6074:e,typeIcon:{width:13,height:10},typePickerGrid:{width:81,height:10},drawBigMessage:{x1:c.width/
2+b.x1-30.5,y1:c.height/2+b.y1-7.5,width:61,height:15},textBoxPadding:{x1:2,y1:6},colorPicker:{x1:e.x1,y1:168,x2:e.x1+d.width,y2:194},typePicker:{x1:1,y1:16,width:164,y2:177},typePickerSelections:{x1:2,y1:27,width:162,height:170},typePickerSingleSelection:{x1:3,y1:3,width:17,height:17},closeButton:{x1:155,y1:2,x2:163,y2:10},colorPickerDialog:{x1:1,y1:2,x2:163,y2:169},colorPickerDialogInner:{x1:2,y1:2,x2:163,y2:171},colorPickerCloseButton:{x1:157,y1:4,x2:163,y2:11},colorPickerDot:{width:2,height:2},
colorPickerTypeToggler:{x1:3,y1:4,x2:9,y2:11},colorPickerB_base:{x1:148,y1:13,x2:163,y2:172},colorPickerB_tintOff:{x1:15,y1:4,x2:23,y2:10},colorPickerB_tint:{x1:25,y1:4,x2:146,y2:10},colorPickerB_main:{x1:2,y1:13,x2:147,y2:173},palettePageButton:{x1:146,y1:184,width:11,height:9},paletteBox:{width:12,height:12},paletteBoxes:{x1:8,y1:168},changeColor:{x1:4,y1:115,x2:161,y2:232},changeColorCloseButton:{x1:144,y1:116,x2:157,y2:127},changeColorOffset:{x1:5,y1:4,width:39,height:33},changeColorToggleStrength:{x1:132,
y1:94,width:4,height:4},betweenColorAndColorPicker:{y1:182},menu:{x1:6,y1:9,width:98,height:165},menuButton:{x1:7,y1:3,x2:17,y2:9},menuSymmetry:{x1:44,y1:34,x2:0,y2:0},mirrorFlipRotateSeparator1:{x1:37,y1:0},mirrorFlipRotateSeparator2:{x1:63,y1:0},symmetryLineX:{x1:82,y1:13,x2:83,y2:164},symmetryLineY:{x1:6,y1:88,x2:164,y2:83},cell0:{x1:21,y1:3,width:37,height:10},cell1:{x1:59,y1:3,width:36,height:10},playMusicButton:{x1:30,y1:217,width:30,height:9},convertMusicSheetButton:{x1:30,y1:227,width:30,
height:9},sizeButton:{x1:30,y1:217,width:30,height:9},needsButton:{x1:30,y1:227,width:30,height:9},timeButton:{x1:30,y1:217,width:30,height:9},givesButton:{x1:30,y1:227,width:30,height:9},useAtGetButtons:{x1:24,y1:2,width:124,height:10},useButton:{x1:97,y1:2,width:25,height:10},hasButton:{x1:124,y1:2,width:25,height:10},holdableButton:{x1:124,y1:2,width:25,height:10},motionIdButton:{x1:124,y1:2,width:25,height:10},wearableButton:{x1:97,y1:2,width:25,height:10},protectPercentButton:{x1:70,y1:2,width:25,
height:10},moverUseButton:{x1:43,y1:2,width:25,height:10},toButton:{x1:20,y1:3,width:25,height:10},drawTogetherButton:{x1:20,y1:3,width:34,height:9},dynamicTextButton:{x1:29,y1:217,width:30,height:9},specsButton:{x1:29,y1:217,width:30,height:9},dynamicHelpButton:{x1:29,y1:227,width:30,height:9},dynamicEmitsButton:{x1:61,y1:217,width:30,height:9},linerAddEnvironmentButton:{x1:96,y1:2,width:25,height:10},linerAddAtButton:{x1:124,y1:2,width:25,height:10},creditButton:{x1:114,y1:2,width:25,height:10},
useButtonAlternative:{x1:122,y1:2,width:25,height:10},multiCells:{x1:22,y1:3,width:108,height:10},optionalThirdCell:{x1:108,y1:3,width:30,height:10},cellAdd:{x1:134,y1:4,width:6,height:6},cellRemove:{x1:144,y1:4,width:6,height:6},fontSize:{width:4,height:4},drawInBothCells:{x1:108,y1:3,width:33,height:9},changeDirection:{x1:30,y1:225,width:11,height:11},changeBehavior:{x1:61,y1:217,width:30,height:9},soundButton:{x1:61,y1:217,width:30,height:9},changeAttributes:{x1:61,y1:227,width:30,height:9},changeNoteDelay:{x1:61,
y1:227,width:30,height:9},pasteButton:{x1:61,y1:227,width:30,height:9},pasteButtonAlternative:{x1:29,y1:227,width:30,height:9},rightsButton:{x1:30,y1:217,width:30,height:9},example:{x1:30,y1:217,x2:57,y2:236},moveAvatarArrows:{x1:30,y1:217,x2:58,y2:236},exampleText:{x1:30,y1:217,width:30,height:8},preview:{x1:7,y1:217,x2:7+this.O5039,y2:217+this.O5017},O9882:{x1:8,y1:201,x2:79,y2:207},changeTypeFuzzy:{x1:83,y1:197,width:83,height:18},changeType:{x1:86,y1:201,x2:158,y2:207},createButton:{x1:121,y1:219,
x2:157,y2:234},attributesPager:{x1:141,y1:17,width:9,height:9}};this.areas.textualButton={x1:this.areas.multiCells.x1+this.areas.multiCells.width/2,y1:this.areas.multiCells.y1,width:15,height:9};this.areas.textualButtonWhenAnimated=ig.game.O4507(this.areas.textualButton);this.areas.textualButtonWhenAnimated.x1+=40;this.areas.interactingHelpButton=ig.game.O4507(this.areas.textualButtonWhenAnimated);this.areas.interactingHelpButton.x1-=15;this.areas.helpButton=ig.game.O4507(this.areas.textualButtonWhenAnimated);
this.areas.helpButton.x1+=25;this.areas.brainHelpButton=ig.game.O4507(this.areas.helpButton);this.areas.thingReferencesButton=ig.game.O4507(this.areas.textualButtonWhenAnimated);this.areas.thingReferencesButton.x1+=19;this.O3565=this.areas.fontSize.width*this.pageZoom+'px "Press Start 2P"';this.O8790()},O8790:function(){for(var a in this.areas){var b=this.areas[a];if(b.x1==void 0||b.x1==null)b.x1=0;if(b.y1==void 0||b.y1==null)b.y1=0;this.areas[a]=b.width?{x1:parseInt(b.x1),y1:parseInt(b.y1),x2:parseInt(b.x1+
b.width),y2:parseInt(b.y1+b.height),width:parseInt(b.width),height:parseInt(b.height)}:b.x2?{x1:parseInt(b.x1),y1:parseInt(b.y1),x2:parseInt(b.x2),y2:parseInt(b.y2),width:parseInt(b.x2-b.x1),height:parseInt(b.y2-b.y1)}:{x1:parseInt(b.x1),y1:parseInt(b.y1),x2:0,y2:0,width:0,height:0}}},O2651:function(){var a=jQuery("#"+ig.game.canvasId),b=a.position(),c=a.width();a=jQuery('<canvas id="painter" style="position:absolute"/>');a.attr("width",this.painterCanvasSize.x*ig.system.scale);a.attr("height",this.painterCanvasSize.y*
ig.system.scale);a.css("width",this.painterCanvasSize.x*ig.system.scale+"px");a.css("height",this.painterCanvasSize.y*ig.system.scale+"px");b=b.left+c/2-this.painterCanvasSize.x*ig.system.scale/2;c=10*ig.system.scale;ig.ua.mobile&&ig.system.O9756()&&(c=0*ig.system.scale);a.css("top",c+"px");a.css("left",b+"px");a.css("opacity","1");a.appendTo("body");this.canvas=document.getElementById("painter")},O9227:function(){jQuery("#painter").remove();ig.game.O8577()},launch:function(){ig.game.boostDialog&&
ig.game.boostDialog.isOpen&&ig.game.boostDialog.close();this.O2651();this.currentLayer=0;this.O5813=!1;this.O7365();ig.game.O1257.accel={x:0,y:0};this.O2753=this.O4210=!1;this.lastPointDrawn={x:null,y:null};this.O3646=this.lineKeyIsPressed=!1;this.lastPixelSeenOnClick={x:null,y:null};this.O4897=this.O1143=!1;this.O2483=null;this.justOpened=this.isFocused=this.isRunning=!0;var a=this;setTimeout(function(){a.justOpened=!1},500);ig.game.O1795=ig.game.O1257.O1795=!0;this.data=this.O1335();this.colorPickerType=
localStorage.getItem("colorPickerType");this.colorPickerType!="a"&&this.colorPickerType!="b"&&(this.colorPickerType="a");this.O8758();var b=this.O8323();if(b)try{this.O4210=!1,this.O4828(),this.data=this.O1335(),this.O9181(b),a=this,setTimeout(function(){a.oldData={name:null,type:null,direction:null};a.O2086();a.O4210=!0;a.O6094()},200)}catch(d){ig.game.errorManager.warn("Creator backup cleared due to issue"),this.O4411(),this.O4210=!0}else if(this.O4828(),this.data=this.O1335(),this.O7192&&(this.O7969(this.O7192),
this.O7192=null),this.O5715){for(var c in this.O5715)this.data.prop[c]=this.O5715[c];this.O5715=null}ig.ua.smallMobile&&ig.system.width>ig.system.height&&ig.game.alertDialog.open("Please rotate device to portrait mode for creating",null,ig.game.painter.O6922)},O4828:function(){this.O6677();this.O8944();this.areas.all={x1:0,y1:0,width:this.canvas.width,height:this.canvas.height};var a=this.backgroundImage.data instanceof HTMLImageElement?this.O2906(this.backgroundImage.data).toDataURL("image/png"):
this.backgroundImage.data.toDataURL("image/png");this.canvas.style.backgroundImage="url("+a+")";this.context=this.canvas.getContext("2d");this.context.webkitImageSmoothingEnabled=!1;this.context.mozImageSmoothingEnabled=!1;this.context.imageSmoothingEnabled=!1;this.context.lineWidth=1*this.pageZoom;this.O1115||(this.O6257(["spritesheet"]),this.O5202());this.O7702();this.O6160();this.changePreviewColor();ig.game.O1257.rank<=1&&this.fadeInDrawBigMessage();this.O9309();this.O1115=!0;this.O2086();this.O4210=
!0},O6677:function(){this.tileWidth=this.O5039;this.O2576=this.O5017;this.O8977=this.O5869;this.O3595();this.O1333=[];this.O6932();this.selectedCell=this.O4389=0;this.O6394=2;this.O2737=this.selectedCell;this.O4782=this.transparentIndex;this.O9945=this.O1155=this.O2152=!1;this.O1879=null;this.previewColor={r:0,g:0,b:0,alpha:1};this.O2911=null;this.O9231=this.O8176=this.palettePage=this.O6759=0;this.maxCells=ig.game.O1828;if(this.data&&0<=["dynamicThing","happening","musicSheet","farBack","transforming"].indexOf(this.data.type)&&
(this.O8103="transforming"==this.data.type?this.O6742:"farBack"==this.data.type?this.O1746:9,this.O6394=1,this.data.pixels)){var a=this.O6664();if(0<=a&&(this.O6394=a+1,"dynamicThing"==this.data.type&&this.data.prop&&this.data.prop.text))for(;0<=this.data.prop.text.toLowerCase().indexOf("cell "+(this.O6394+1))&&this.O6394<this.O8103;)this.O6394++}this.data&&this.data.type&&this.types[this.data.type]&&this.types[this.data.type].O8687&&(this.maxCells=ig.game.O1828);if(this.data&&0<=["dynamicThing",
"happening","musicSheet","farBack","transforming"].indexOf(this.data.type)&&(this.O8103="transforming"==this.data.type?this.O6742:"farBack"==this.data.type?this.O1746:9,this.O6394=1,this.data.pixels)&&(a=this.O6664(),0<=a&&(this.O6394=a+1,"dynamicThing"==this.data.type&&this.data.prop&&this.data.prop.text)))for(;0<=this.data.prop.text.toLowerCase().indexOf("cell "+(this.O6394+1))&&this.O6394<this.O8103;)this.O6394++;this.data&&this.data.type&&this.types[this.data.type].O2867&&(this.maxCells=this.O8103);
this.data&&0<=["motion","interactingMotion","holder"].indexOf(this.data.type)&&(this.maxCells=3);this.avatarTemplatePosition={x:11,y:14,rotation:0}},O6664:function(){var a=-1;if(this.data&&this.data.pixels)for(var b=0;b<this.data.pixels.length;b++)this.O9884(b)&&(a=b);return a},O8758:function(){if(!this.O8650){var a=this.data&&this.data.name&&this.data.name!=""?ig.game.strings.O9955(this.data.name):"";a=jQuery('<input type="text" class="painterInputBox" id="'+this.O5991+'" value="'+a+'" placeholder="Name..." maxLength="'+
ig.game.validations.itemName.maxLength+'" autocomplete="off" />');var b=jQuery("#painter"),c=b.position();b.width();b=ig.system.scale;var d=69*b,e=7*b,f=8*b,g=201*b;a.appendTo("body");a.css("padding","0");a.css("width",d+"px");a.css("height",e+"px");a.css("font-size",Math.floor(4*b)+"px");a.css("border-width",1*b+"px");a.css("left",c.left+f);a.css("padding-left",3*b+"px");a.css("top",c.top+g);a.css("opacity",""+this.O2754);var h=this;jQuery("#"+this.O5991).keyup(function(k){k.keyCode==13&&h.O9609()});
a.css("visibility","visible");this.O8650=!0}},O8351:function(){jQuery("#"+this.O5991).remove();this.O8650=!1},O9609:function(){if(ig.ua.mobile||jQuery("#"+this.O5991).is(":focus")){jQuery("#"+this.O5991).blur();jQuery("#painter").focus();var a=jQuery("#"+this.O5991).val();if(a&&(this.data.name=ig.game.validations.itemName.clean(a),jQuery("#"+this.O5991).val(this.data.name),this.data.name!=a&&ig.game.strings.trim(this.data.name)!=ig.game.strings.trim(a)&&this.data.name.toLowerCase()!=a.toLowerCase()?
ig.game.alertDialog.open('Adjusted name to "'+this.data.name+'"'):this.O9564(this.data.name)&&!this.O4071&&this.O2316(),this.data.prop&&this.data.prop.attributes&&this.data.prop.attributes.indexOf("toArea")>=0)){var b=this;a=ig.game.strings.O4255(this.data.name,"to ");ig.game.O9817.O8620(a).done(function(c){c.ok&&(b.O5194(b.data.name),b.data.name="",jQuery("#"+b.O5991).val(b.data.name),ig.game.sounds.nocando.play())})}}},O2316:function(){ig.game.alertDialog.open({html:'<p>Please note that copyrighted creations are against the <span class="pseudoLink" onclick="ml.Misc.openUrl(\'/info#terms\')">terms</span>. Thanks!</p>',
O3144:!0});this.O4071=!0},O9564:function(a){for(var b=!1,c="mario yoshi sonic pikachu starbound terraria".split(" "),d=0;d<c.length&&!b;d++)b=a.indexOf(c[d])>=0;return b},O5202:function(){this.O3016();this.O8405();this.O6773();this.O9599();this.O7401();this.O1976("changeColorDialog",0,0,158,117);this.O1976("drawBig",98,163,61,15);this.O1976("drawBig3Borders",98,179,61,15);this.O1976("drawBig2Borders",98,212,61,15);this.O1976("drawBig1Border",30,212,55,15);this.O1976("drawBig5x5",98,232,61,15);this.O1976("colorPickerButton",
0,117,12,9);this.O1976("helpButton",326,547,11,9);this.O1976("textualButton",310,547,15,9);this.O1976("thingReferencesButton",338,547,11,9);this.O1976("textualButton_active",310,557,15,9);this.O1976("thingReferencesButton_active",338,557,11,9);this.O1976("addSound",99,441,50,6);this.O1976("removeSound",99,451,59,6);this.O1976("menu",375,ig.ua.mobile?510:327,this.areas.menu.width,this.areas.menu.height);ig.ua.mobile?this.O1976("canvasHelp",228,494,63,4):this.O1976("canvasHelp",228,489,77,4);this.O1976("canvasHelpAnimated",
228,484,58,4);this.O1976("playMusicSheetButtonOff",334,ig.ua.mobile?402:380,this.areas.playMusicButton.width,this.areas.playMusicButton.height);this.O1976("playMusicSheetButtonOn",334,ig.ua.mobile?413:391,this.areas.playMusicButton.width,this.areas.playMusicButton.height);this.O1976("convertMusicSheetButton",334,479,this.areas.convertMusicSheetButton.width,this.areas.convertMusicSheetButton.height);this.O1976("needsButton",231,426,this.areas.sizeButton.width,this.areas.needsButton.height);this.O1976("sizeButton",
231,436,this.areas.sizeButton.width,this.areas.sizeButton.height);this.O1976("timeButton",262,426,this.areas.sizeButton.width,this.areas.needsButton.height);this.O1976("givesButton",262,436,this.areas.sizeButton.width,this.areas.needsButton.height);this.O1976("givesButton_active",262,446,this.areas.sizeButton.width,this.areas.needsButton.height);this.O1976("canvasHelpOverlay",1,564,108,4);this.O1976("canvasHelpSit",1,569,94,4);this.O1976("buyNowButton",227,598,38,16);this.O1976("soundButton",231,
446,30,9);this.O1976("soundButton_active",231,456,30,9);this.O1976("attributesPager",267,601,9,9);this.O1976("useAtGetButtons",325,259,124,10);this.O1976("useButton",334,357,25,10);this.O1976("hasButton",334,368,25,10);this.O1976("motionIdButton",334,331,25,10);this.O1976("motionIdButtonActive",334,342,25,10);this.O1976("creditButton",413,201,32,10);this.O1976("holdableButton",308,468,25,10);this.O1976("holdableButtonActive",334,468,25,10);this.O1976("wearableButton",256,499,25,10);this.O1976("wearableButtonActive",
282,499,25,10);this.O1976("protectPercentButton",256,468,25,10);this.O1976("protectPercentButtonActive",282,468,25,10);this.O1976("moverUseButton",256,510,25,10);this.O1976("moverUseButtonActive",282,510,25,10);this.O1976("dynamicTextButton",334,600,30,9);this.O1976("dynamicHelpButton",334,610,30,9);this.O1976("dynamicEmitsButton",334,620,30,9);this.O1976("dynamicEmitsButtonActive",334,630,30,9);this.O1976("specsButton",334,640,30,9);this.O1976("toButton",449,296,25,9);this.O1976("toButtonActive",
449,306,25,9);this.O1976("drawTogetherButton",449,192,34,9);this.O1976("drawTogetherButtonActive",449,202,34,9);this.O1976("linerAddEnvironmentButton",415,271,25,10);this.O1976("linerAddEnvironmentButtonActive",415,282,25,10);this.O1976("linerAddAtButton",441,271,25,10);this.O1976("linerAddAtButtonActive",441,282,25,10);this.O1976("moveShortcutHi",101,202,43,5);this.O1976("menuArrowUp",81,117,11,7);this.O1976("symmetryLineX",158,0,1,152);this.O1976("symmetryLineY",282,173,152,1);this.O1976("typePicker",
0,257,194,182);this.O1976("colorPicker_typeA",324,0,164,172);this.O1976("colorPicker_typeB",160,0,164,172);this.O1976("musicDataFull",464,177,14,8);this.O1976("changeBehavior",98,154,this.areas.changeBehavior.x2-this.areas.changeBehavior.x1,this.areas.changeBehavior.y2-this.areas.changeBehavior.y1);this.O1976("changeAttributes",98,123,this.areas.changeAttributes.x2-this.areas.changeAttributes.x1,this.areas.changeAttributes.y2-this.areas.changeAttributes.y1);this.O1976("changeNoteDelay",334,489,this.areas.changeNoteDelay.width,
this.areas.changeAttributes.height);this.O1976("pasteButton",128,154,30,9);this.O1976("rightsButton",413,192,30,9);this.O1976("checkboxUnchecked",0,208,8,8);this.O1976("checkboxChecked",9,208,8,8);this.O1976("radioButtonUnchecked",0,217,8,8);this.O1976("radioButtonChecked",9,217,8,8);this.O1976("cells0active",197,172,73,10);this.O1976("cells1active",197,182,73,10);this.O1976("livePreviewPlayButton",13,118,7,7);this.O1976("cellsMotion0active",324,224,118,10);this.O1976("cellsMotion1active",324,234,
118,10);this.O1976("cellsMotion2active",324,245,118,10);this.O1976("cellsInteractingMotion0active",324,295,118,10);this.O1976("cellsInteractingMotion1active",324,305,118,10);this.O1976("cellsInteractingMotion2active",324,316,118,10);this.O1976("cellsHolder0active",228,566,118,10);this.O1976("cellsHolder1active",228,576,118,10);this.O1976("cellsHolder2active",228,587,118,10);this.O1976("cellsMultithing0active",228,636,73,10);this.O1976("cellsMultithing1active",228,646,73,10);this.O1976("cellsWearable0active",
197,197,73,10);this.O1976("cellsWearable1active",197,207,73,10);this.O1976("cellsEmitter0active",326,271,73,10);this.O1976("cellsEmitter1active",326,281,73,10);this.O1976("cellsAimable0active",227,615,73,10);this.O1976("cellsAimable1active",227,625,73,10);this.O1976("cellsGatherable0active",300,447,73,10);this.O1976("cellsGatherable1active",300,457,73,10);this.O1976("cellsBackAndFrontThing0active",300,425,73,10);this.O1976("cellsBackAndFrontThing1active",300,435,73,10);for(var a=282,b=190,c=0;c<ig.game.O1828;c++)this.O1976("multiCell"+
c,a+12*c,b,12,11),this.O1976("multiCell"+c+"active",a+12*c,b+11,12,11);a=239;b=524;for(c=0;c<ig.game.O1828;c++)this.O1976("multiCellDynamic"+c,a+12*c,b,12,11),this.O1976("multiCellDynamic"+c+"Active",a+12*c,b+11,12,11);this.O1976("viewableBase",309,502,18,10);this.O1976("viewableBaseActive",309,513,18,10);this.O1976("viewableMoreCell",328,502,18,10);this.O1976("viewableMoreCellActive",328,513,18,10);this.O1976("multiBase",309,524,18,10);this.O1976("multiBaseActive",309,535,18,10);this.O1976("multiMoreCell",
309,524,12,10);this.O1976("multiMoreCellActive",309,535,12,10);this.O1976("moreCellAdd",347,504,6,6);this.O1976("moreCellRemove",356,504,6,6);this.O1976("avatarModel_cell1",192,218,128,128);this.O1976("avatarModel_cell2",322,218,128,128);this.O1976("moveAvatarArrows",68,132,29,19);this.O1976("avatarTemplate",241,307,80,108);this.O1976("avatarTemplateBack",0,442,88,108)},O8944:function(){var a="slope slideySlope body viewable glow multiAnimatedThing".split(" "),b;for(b in this.types)if(a.indexOf(b)==
-1){var c=this.types[b];c.O5534&&c.O5534!=0&&(c.requiredBordersOriginal||(c.requiredBordersOriginal=c.O5534),c.requiredBordersOriginal<3&&ig.game.O1257.rank<2&&(c.O5534=3),ig.game.O1257.rank>=2&&(c.O5534=0))}},O3016:function(){var a,b=98,c=132;for(a=0;a<this.directionMax;a++)this.O1976("directionArrow_"+a,b+a*11,c,11,11),this.O1976("directionArrowDiagonal_"+a,b+a*11,c+11,11,11);b=0;c=243;for(a=0;a<this.O7106;a++)this.O1976("multiDirectionArrow_"+a,b+a*11,c,11,11)},O9599:function(){for(var a=1;a<this.O3774;a++)this.O1976("rank_"+
a,288+a*12,175,12,10)},O7401:function(){var a=ig.game.O2082.info,b;for(b in a){var c=this.O4799(b),d;for(d in a[b]){var e=a[b][d].icon;e&&this.O1976(c+"_attribute_"+d,1+(e-1)*12,705,11,8)}}},O8405:function(){for(var a in this.types){var b=this.types[a].O3570;if(b){var c=489,d=0;b>59?(b-=59,c=116,d=457):b>35&&(b-=35,c=199,d=225);b=d+(b-1)*20+1;if(this.types[a].O9762&&!this.types[a].O2711)for(d=0;d<this.directionMax;d++)this.O1976("example_"+a+"_"+d,c+d*28,b,27,19);else this.O1976("example_"+a,c,b,
27,19)}}},O6773:function(){for(var a in this.types){var b=this.types[a].iconRow;b&&this.O1976("typeIcon_"+a,168,172+(b-1)*this.areas.typeIcon.height,this.areas.typeIcon.width,this.areas.typeIcon.height)}},O1976:function(a,b,c,d,e,f){if(f==null||f==void 0)f="spritesheet";this.O4400[a]={spritesheet:f,x:b,y:c,width:d,height:e}},O4799:function(a){var b="";a=="LQDFLIP"&&(a="LIQUID");for(var c in this.types)if(this.types[c].key==a){b=c;break}return b},O6160:function(){this.handleMouseDownBound=this.O7170.bind(this);
this.handleMouseUpBound=this.O7558.bind(this);this.handleMouseMovedBound=this.O8752.bind(this);this.handleMouseWheelBound=this.O1056.bind(this);this.handleMouseLeaveBound=this.handleMouseLeave.bind(this);this.handleDocumentMouseUpBound=this.handleDocumentMouseUp.bind(this);this.handleDocumentMouseDownBound=this.handleDocumentMouseDown.bind(this);this.handleWindowMouseLeaveBound=this.handleWindowMouseLeave.bind(this);ig.ua.mobile?(this.O7950(this.canvas,"touchstart",this.handleMouseDownBound),this.O7950(this.canvas,
"touchend",this.handleMouseUpBound),this.O7950(this.canvas,"touchmove",this.handleMouseMovedBound)):(this.O7950(this.canvas,"mousedown",this.handleMouseDownBound),this.O7950(this.canvas,"mouseup",this.handleMouseUpBound),this.O7950(this.canvas,"mousemove",this.handleMouseMovedBound),this.O7950(this.canvas,"mousewheel",this.handleMouseWheelBound),this.O7950(this.canvas,"DOMMouseScroll",this.handleMouseWheelBound),this.O7950(this.canvas,"mouseleave",this.handleMouseLeaveBound),this.O7950(this.canvas,
"pointerdown",this.handleMouseDownBound),this.O7950(this.canvas,"pointerup",this.handleMouseUpBound),this.O7950(this.canvas,"pointermove",this.handleMouseMovedBound),this.O7950(this.canvas,"pointercancel",this.handleMouseUpBound));this.handleKeyDownBound=this.O9992.bind(this);this.handleKeyUpBound=this.O5626.bind(this);this.O5943Bound=this.O8412.bind(this);this.handleDocumentClickBound=this.handleDocumentClick.bind(this);this.O7950(window,"keydown",this.handleKeyDownBound);this.O7950(window,"keyup",
this.handleKeyUpBound);this.O7950(this.canvas,"dblclick",this.O5943Bound);this.bindEventCapture(document,"click",this.handleDocumentClickBound);this.O7950(document,"mouseup",this.handleDocumentMouseUpBound);this.bindEventCapture(document,"mousedown",this.handleDocumentMouseDownBound);this.O7950(document,"mouseleave",this.handleWindowMouseLeaveBound);this.canvas.style.touchAction="none"},O7702:function(){this.O9277(this.canvas,"pointerdown",this.handleMouseDownBound);this.O9277(this.canvas,"pointerup",
this.handleMouseUpBound);this.O9277(this.canvas,"pointermove",this.handleMouseMovedBound);this.O9277(this.canvas,"pointercancel",this.handleMouseUpBound);this.O9277(this.canvas,"mousedown",this.handleMouseDownBound);this.O9277(this.canvas,"mouseup",this.handleMouseUpBound);this.O9277(this.canvas,"mousemove",this.handleMouseMovedBound);this.O9277(this.canvas,"mousewheel",this.handleMouseWheelBound);this.O9277(this.canvas,"DOMMouseScroll",this.handleMouseWheelBound);this.O9277(this.canvas,"mouseleave",
this.handleMouseLeaveBound);this.O9277(this.canvas,"touchstart",this.handleMouseDownBound);this.O9277(this.canvas,"touchend",this.handleMouseUpBound);this.O9277(this.canvas,"touchmove",this.handleMouseMovedBound);this.O9277(window,"keydown",this.handleKeyDownBound);this.O9277(window,"keyup",this.handleKeyUpBound);this.O9277(this.canvas,"dblclick",this.O5943Bound);this.unbindEventCapture(document,"click",this.handleDocumentClickBound);this.O9277(document,"mouseup",this.handleDocumentMouseUpBound);
this.unbindEventCapture(document,"mousedown",this.handleDocumentMouseDownBound);this.O9277(document,"mouseleave",this.handleWindowMouseLeaveBound)},O7950:function(a,b,c){var d=a.addEventListener,e=!d&&a.attachEvent;d?a.addEventListener(b,c,!1):e&&a.attachEvent("on"+b,c)},bindEventCapture:function(a,b,c){var d=a.addEventListener,e=!d&&a.attachEvent;d?a.addEventListener(b,c,!0):e&&a.attachEvent("on"+b,c)},O9277:function(a,b,c){var d=a.addEventListener,e=!d&&a.attachEvent;d?a.removeEventListener(b,c,
!1):e&&a.detachEvent("on"+b,c)},unbindEventCapture:function(a,b,c){var d=a.addEventListener,e=!d&&a.attachEvent;d?a.removeEventListener(b,c,!0):e&&a.detachEvent("on"+b,c)},handleDocumentClick:function(a){if(this.isRunning&&!this.justOpened&&this.canvas&&!this.canvas.contains(a.target)&&!(this.isDragging||this.wasDraggingBeforeClick||ig.game.alertDialog&&ig.game.alertDialog.isOpen||this.interactingDialog&&this.interactingDialog.isOpen||this.O2190==="pickColor"||this.O2190==="floodFill")&&(a=a.target,
a.id==="canvas"||a.id===ig.game.canvasId)){if(ig.game.O1168&&ig.game.panelSet){a=ig.input.mouse.x;var b=ig.input.mouse.y,c=ig.game.panelSet.panelPos.x,d=ig.game.panelSet.panelPos.y,e=ig.game.panelSet.panelSize.x,f=ig.game.panelSet.panelSize.y+ig.game.panelSet.tabHeight;if(a>=c&&a<=c+e&&b>=d&&b<=d+f)return}this.unfocusPainter()}},focusPainter:function(){this.isFocused||(this.isFocused=!0,this.updatePainterVisualFocus())},unfocusPainter:function(){this.isFocused&&(this.isFocused=!1,this.updatePainterVisualFocus())},
updatePainterVisualFocus:function(){this.canvas&&(this.canvas.style.opacity=this.isFocused?"1":"0.7")},O2891:function(){return this.mode=="cloneOld"||this.thingReferencesDialog&&this.thingReferencesDialog.isOpen||this.data&&"interactiveEnvironment gatherable dynamicThing happening liner mover".split(" ").indexOf(this.data.type)>=0||this.data&&this.data.type&&this.O9027.indexOf(this.types[this.data.type].key)>=0||this.data&&this.data.type&&this.types[this.data.type].O3397},O9181:function(a,b){this.O2483=
a.id;a&&!ig.game.writableDialog.isOpen&&(this.O1550(this.O4799(a.type))?this.O7042(a,b):ig.game.O1002.O7063())},O8725:function(a){if(this.data&&this.data.colors){this.O6094();var b=this;ig.game.O9817.O4538(a).done(function(c){if(c&&c.imageData&&c.imageData.colors){b.data.colors=b.O5221();for(var d=0;d<c.imageData.colors.length&&d<b.data.colors.length;d++)b.data.colors[d]=c.imageData.colors[d];b.O2086();ig.game.sounds.success.play()}})}},O7042:function(a,b){ig.game.errorManager.setContext("painterCloningOldThing");
var c=this.data&&this.data.prop?this.data.prop.toId:null;this.O6677();this.data={name:a.name,type:a.type,direction:a.direction,prop:{musicData:null,textData:null,text:"",thingRefs:[],reactsTo:[],creditUrl:null,soundId:null,noteDelayMS:this.noteDelayMSDefault,attributes:[],useKeyword:null,atKeyword:null,getId:null,backTileCount:null,motionId:null,hasId:null,emitsId:null,boundingBox:null,boundingBox2:null,environmentId:null,specs:null,clonedFrom:null,changerId:null,holdableId:null,secPerTransform:null,
wearableId:null,protectPercent:null},colors:this.O9395(a.colors),pixels:[]};this.data.type&&this.data.type==this.data.type.toUpperCase()&&(this.data.type=this.O4799(a.type));"STACKWEAR"==a.type&&(this.data.type=a.pixels[0].length==this.types.wearable.O9925.width?"wearable":"wearableBig");a.prop&&(this.data.prop=ig.game.O4507(a.prop));b&&(this.data.prop.clonedFrom=b);this.data.prop.reactsTo||(this.data.prop.reactsTo=[]);this.O6677();this.data.pixels||(this.data.pixels=[]);for(b=0;b<this.maxCells;b++)this.data.pixels[b]=
this.O4281();b=a.pixels&&a.pixels[0]&&a.pixels[0][0]?a.pixels[0][0].length:ig.game.O9925;if((a.pixels&&a.pixels[0]?a.pixels[0].length:ig.game.O9925)==this.tileWidth&&b==this.O2576||"motion"==this.data.type||"interactingMotion"==this.data.type||"holder"==this.data.type)for(b=0;b<a.pixels.length;b++)this.data.pixels[b]=this.O5266(a.pixels[b]);else if("body"==this.data.type&&7==a.pixels.length)for(b=0;6>b;b++)this.data.pixels[b]=this.O8899(a.pixels[b]);else for(b=0;b<a.pixels.length;b++)this.data.pixels[b]=
this.O8899(a.pixels[b]);this.O2778();this.O8880();this.O1684();this.data.name&&jQuery("#"+this.O5991).val(this.data.name);ig.game.errorManager.O6908("painterCloningOldThing");ig.game.alertDialog&&ig.game.alertDialog.isOpen&&ig.game.alertDialog.close();this.O7969(this.data.type);this.O6094();c&&this.data&&"mift"==this.data.type&&this.data.prop&&(this.data.prop.toId=c);this.O2086()},O1550:function(a){var b=!0;a&&this.types&&this.types[a]&&this.types[a].O8137&&(b=ig.game.O1257.rank>=this.types[a].O8137);
return b},O6257:function(a){for(var b=a.length,c=0;c<b;c++){var d=a[c];this.images[d]=new Image;this.images[d].crossOrigin="Anonymous";var e=this;this.images[d].onload=function(){e.update()};this.images[d].src=this.imagePath+d+".png?v="+ig.game.version}},update:function(){this.context&&(this.clearRect(this.areas.all.x1,this.areas.all.y1,this.areas.all.width,this.areas.O9882.y1-2),this.O8723(),this.updatePalette(),this.O2057(),this.O4651(),this.O2018(),this.O9075())},O9075:function(){if(this.data&&
this.data.type&&this.types[this.data.type].O8137){var a=this.types[this.data.type].O8137;if(a>ig.game.O1257.rank){this.drawImage("rank_"+a,this.areas.O8423.x1+this.areas.drawing.width/2-6,this.areas.O8423.y1+this.areas.drawing.height/2-5);var b=this;null!=this.timeouts.O5100&&clearTimeout(this.timeouts.O5100);this.timeouts.O5100=setTimeout(function(){b.O5100()},1E3);ig.game.O1002.O7063()}}},O3888:function(){if(this.data&&this.data.type)if(0<=["dynamicThing","holder","happening","backAndFrontThing"].indexOf(this.data.type))this.context.fillStyle=
"rgba(0,0,0,.15)",this.fillRect(this.areas.O8423.x1+Math.round(this.types[this.data.type].O9925.width/2-ig.game.O2953)*this.O8977,this.areas.O8423.y1+Math.round(this.types[this.data.type].O9925.height-ig.game.O9925)*this.O8977,ig.game.O9925*this.O8977,ig.game.O9925*this.O8977);else if("wearableBig"==this.data.type){var a=this.areas.O8423.x1+10*this.O8977,b=this.areas.O8423.y1+11*this.O8977,c="avatarTemplate";1==this.selectedCell&&(c+="Back",a-=2*this.O8977);this.drawImageWithAlpha(c,a,b,.35)}else this.types[this.data.type].O3866&&
this.drawImageWithAlpha("avatarTemplate",this.areas.O8423.x1+(this.avatarTemplatePosition.x-1)*this.O8977,this.areas.O8423.y1+(this.avatarTemplatePosition.y-3)*this.O8977,.35)},O2086:function(){this.oldData.type=null;this.oldData.name=null;this.context&&(this.context.fillStyle=this.O1944,this.clearRect(this.areas.all.x1,this.areas.all.y1,this.areas.all.width,this.areas.all.height));this.update()},O2018:function(){if("menu"==this.mode){var a=.88;this.drawImage("menuArrowUp",this.areas.menuButton.x1,
this.areas.menuButton.y1);this.drawImageWithAlpha("menu",this.areas.menu.x1,this.areas.menu.y1,a);this.context.fillStyle="rgba(255,255,255,.4)";this.fillRect(this.areas.menu.x1+9+15*(this.brushType+1),115,13,13);var b=null;this.data.type&&0<=this.O9027.indexOf(this.types[this.data.type].key)?b=this.data.prop&&this.data.prop.soundId?"removeSound":"addSound":(b="addSound",a=.4);this.drawImageWithAlpha(b,this.areas.menu.x1+4,this.areas.menu.y1+124,a)}},O4651:function(){this.clearRects(["multiCells"]);
if(void 0!=this.data.type&&null!=this.data.type&&this.types[this.data.type]){if(this.types[this.data.type].O2135&&"glow"!=this.data.type){var a="";0<="wearable emitter gatherable motion holder aimable interactingMotion backAndFrontThing multithing".split(" ").indexOf(this.data.type)?a=ig.game.strings.toUpperCaseFirst(this.data.type):"wearableBig"==this.data.type&&(a="Wearable");this.drawImage("cells"+a+this.selectedCell+"active",this.areas.cell0.x1,this.areas.cell0.y1);this.types[this.data.type].O3866&&
this.drawImage("moveAvatarArrows",this.areas.example.x1,this.areas.example.y1);"aimable"==this.data.type?this.drawImage("specsButton",this.areas.specsButton.x1,this.areas.specsButton.y1):"interacting"==this.data.type?(this.drawImage("helpButton",this.areas.interactingHelpButton.x1,this.areas.interactingHelpButton.y1),a="textualButton"+(this.interactingDialog&&this.interactingDialog.isOpen?"_active":""),this.drawImage(a,this.areas.textualButtonWhenAnimated.x1,this.areas.textualButtonWhenAnimated.y1),
a="thingReferencesButton"+(this.thingReferencesDialog&&this.thingReferencesDialog.isOpen?"_active":""),this.drawImage(a,this.areas.thingReferencesButton.x1,this.areas.thingReferencesButton.y1)):"gatherable"==this.data.type&&(this.drawImage("useButton",this.areas.useButton.x1,this.areas.useButton.y1),this.drawImage("hasButton",this.areas.hasButton.x1,this.areas.hasButton.y1));"holder"==this.data.type?(this.drawImage("helpButton",this.areas.helpButton.x1,this.areas.helpButton.y1),2==this.selectedCell&&
(this.context.fillStyle=this.O5320(this.canvasOverlayRgb),this.fillRect(this.areas.O8423.x1,this.areas.O8423.y1,this.O8977*this.tileWidth,10*this.O8977),this.fillRect(this.areas.O8423.x1,this.areas.O8423.y1,5*this.O8977,29*this.O8977),this.fillRect(this.areas.O8423.x1+24*this.O8977,this.areas.O8423.y1,5*this.O8977,29*this.O8977))):"multithing"==this.data.type&&this.drawImage("helpButton",this.areas.helpButton.x1,this.areas.helpButton.y1)}else if("sound"==this.data.type)this.drawImage("creditButton",
this.areas.creditButton.x1,this.areas.creditButton.y1);else if("generator"==this.data.type)this.drawImage("textualButton",this.areas.textualButton.x1,this.areas.textualButton.y1),this.drawImage("helpButton",this.areas.brainHelpButton.x1,this.areas.brainHelpButton.y1);else if("readable"==this.data.type)this.drawImage("textualButton",this.areas.textualButton.x1,this.areas.textualButton.y1),this.drawImage("helpButton",this.areas.helpButton.x1,this.areas.helpButton.y1);else if("mift"==this.data.type)a=
"toButton"+(this.data.prop&&this.data.prop.toId?"Active":""),this.drawImage(a,this.areas.toButton.x1,this.areas.toButton.y1),a="textualButton"+(this.data.prop&&this.data.prop.text?"_active":""),this.drawImage(a,this.areas.textualButton.x1,this.areas.textualButton.y1),ig.game.hasMinfinity||this.drawImage("buyNowButton",this.areas.createButton.x1,this.areas.createButton.y1),a="soundButton"+(this.data.prop&&this.data.prop.soundId?"_active":""),this.drawImage(a,this.areas.changeBehavior.x1,this.areas.changeBehavior.y1);
else if(this.types[this.data.type].O9245)a="drawTogetherButton"+(this.O4764?"Active":""),this.drawImage(a,this.areas.drawTogetherButton.x1,this.areas.drawTogetherButton.y1);else if("brain"==this.data.type)this.drawImage("textualButton",this.areas.textualButton.x1,this.areas.textualButton.y1),this.drawImage("helpButton",this.areas.brainHelpButton.x1,this.areas.brainHelpButton.y1);else if("interactiveEnvironment"==this.data.type)this.drawImage("useAtGetButtons",this.areas.useAtGetButtons.x1,this.areas.useAtGetButtons.y1);
else if(0<=["glow","viewable"].indexOf(this.data.type))0==this.selectedCell&&(this.context.fillStyle=this.O5320(this.canvasOverlayRgb),this.fillRect(this.areas.O8423.x1,this.areas.O8423.y1,38*this.O8977,9*this.O8977),this.fillRect(this.areas.O8423.x1,this.areas.O8423.y1+28*this.O8977,38*this.O8977,10*this.O8977),this.fillRect(this.areas.O8423.x1,this.areas.O8423.y1,9*this.O8977,38*this.O8977),this.fillRect(this.areas.O8423.x1+28*this.O8977,this.areas.O8423.y1,10*this.O8977,38*this.O8977)),"viewable"==
this.data.type?this.O8499("viewable"):this.drawImage("cells"+this.selectedCell+"active",this.areas.cell0.x1,this.areas.cell0.y1);else if(this.types[this.data.type].O2867)this.O8499("multi"),"dynamicThing"==this.data.type?(this.drawImage("dynamicTextButton",this.areas.dynamicTextButton.x1,this.areas.dynamicTextButton.y1),this.drawImage("dynamicHelpButton",this.areas.dynamicHelpButton.x1,this.areas.dynamicHelpButton.y1),a="dynamicEmitsButton"+(this.data.prop&&this.data.prop.emitsId?"Active":""),this.drawImage(a,
this.areas.dynamicEmitsButton.x1,this.areas.dynamicEmitsButton.y1)):"farBack"==this.data.type?(this.drawImage("dynamicTextButton",this.areas.dynamicTextButton.x1,this.areas.dynamicTextButton.y1),this.drawImage("dynamicHelpButton",this.areas.dynamicHelpButton.x1,this.areas.dynamicHelpButton.y1)):"happening"==this.data.type?(this.drawImage("dynamicTextButton",this.areas.dynamicTextButton.x1,this.areas.dynamicTextButton.y1),this.drawImage("dynamicHelpButton",this.areas.dynamicHelpButton.x1,this.areas.dynamicHelpButton.y1)):
"musicSheet"==this.data.type&&(this.drawImage("playMusicSheetButton"+(this.O7061?"On":"Off"),this.areas.playMusicButton.x1,this.areas.playMusicButton.y1),this.drawImage("convertMusicSheetButton",this.areas.convertMusicSheetButton.x1,this.areas.convertMusicSheetButton.y1),this.drawImage("changeNoteDelay",this.areas.changeNoteDelay.x1,this.areas.changeNoteDelay.y1));else if("music"==this.data.type)this.data.prop&&this.data.prop.musicData&&this.drawImage("musicDataFull",this.areas.createButton.x1-18,
this.areas.createButton.y1+4);else if("mover"==this.data.type)this.drawImage("dynamicTextButton",this.areas.dynamicTextButton.x1,this.areas.dynamicTextButton.y1),this.drawImage("dynamicHelpButton",this.areas.dynamicHelpButton.x1,this.areas.dynamicHelpButton.y1),a="holdableButton"+(this.data.prop.holdableId?"Active":""),this.drawImage(a,this.areas.holdableButton.x1,this.areas.holdableButton.y1),a="wearableButton"+(this.data.prop.wearableId?"Active":""),this.drawImage(a,this.areas.wearableButton.x1,
this.areas.wearableButton.y1),a="protectPercentButton"+(this.data.prop.protectPercent?"Active":""),this.drawImage(a,this.areas.protectPercentButton.x1,this.areas.protectPercentButton.y1),a="moverUseButton"+(this.data.prop.useKeyword?"Active":""),this.drawImage(a,this.areas.moverUseButton.x1,this.areas.moverUseButton.y1);else if("liner"==this.data.type)a="linerAddEnvironmentButton"+(this.data.prop&&this.data.prop.environmentId?"Active":""),this.drawImage(a,this.areas.linerAddEnvironmentButton.x1,this.areas.linerAddEnvironmentButton.y1),
a="linerAddAtButton"+(this.data.prop&&this.data.prop.atKeyword?"Active":""),this.drawImage(a,this.areas.linerAddAtButton.x1,this.areas.linerAddAtButton.y1);else if("crumbling"==this.data.type&&this.data.prop&&this.data.prop.attributes&&(0<=this.data.prop.attributes.indexOf("strongWhenWalked")||0<=this.data.prop.attributes.indexOf("strongWhenWalkedAndBumped")))this.drawImage("useButton",this.areas.useButtonAlternative.x1,this.areas.useButtonAlternative.y1);else if("body"==this.data.type){for(a=0;a<
ig.game.O1828;a++)this.drawImage("multiCell"+a+(a==this.selectedCell?"active":""),this.areas.multiCells.x1+this.O4400.multiCell0.width*a,this.areas.multiCells.y1);this.clearRects(["example","exampleText"]);this.context.font=this.O3565;this.context.fillStyle="rgb(60,60,60)";this.fillText("stand walk jump fall climb create sit blink talk".split(" ")[this.selectedCell].toUpperCase(),this.areas.exampleText.x1,this.areas.exampleText.y1+5);this.drawImage("dynamicHelpButton",this.areas.dynamicHelpButton.x1,
this.areas.dynamicHelpButton.y1)}this.types[this.data.type].O3397&&(a="motionIdButton"+(this.data.prop&&this.data.prop.motionId?"Active":""),this.drawImage(a,this.areas.motionIdButton.x1,this.areas.motionIdButton.y1));"motion"==this.data.type||"interactingMotion"==this.data.type?(this.clearRects(["example","exampleText"]),"2"==this.selectedCell&&(this.context.font=this.O3565,this.context.fillStyle="rgb(60,60,60)",this.fillText("EMIT",this.areas.exampleText.x1,this.areas.exampleText.y1+5)),"motion"==
this.data.type&&this.drawImage("dynamicHelpButton",this.areas.dynamicHelpButton.x1,this.areas.dynamicHelpButton.y1)):"holder"==this.data.type?(this.drawImage("sizeButton",this.areas.sizeButton.x1,this.areas.sizeButton.y1),this.drawImage("needsButton",this.areas.needsButton.x1,this.areas.needsButton.y1)):"transforming"==this.data.type?(this.drawImage("timeButton",this.areas.timeButton.x1,this.areas.timeButton.y1),a="givesButton"+(this.thingReferencesDialog&&this.thingReferencesDialog.isOpen?"_active":
""),this.drawImage(a,this.areas.givesButton.x1,this.areas.givesButton.y1)):"pointer"==this.data.type?this.drawImage("helpButton",this.areas.helpButton.x1,this.areas.helpButton.y1):"placeName"==this.data.type&&this.drawImage("helpButton",this.areas.helpButton.x1,this.areas.helpButton.y1);this.O8958()&&this.drawImage("livePreviewPlayButton",this.areas.preview.x1+7,this.areas.preview.y1+6)}},O8499:function(a){for(var b=0;b<this.O6394;b++){var c=this.areas.multiCells.x1+this.O4400.multiCell0.width*b,
d=0==b?a+"Base":a+"MoreCell";0<=["dynamicThing","happening","musicSheet","farBack","transforming"].indexOf(this.data.type)&&(d="multiCellDynamic"+b);d+=b==this.selectedCell?"Active":"";this.drawImage(d,c,this.areas.multiCells.y1)}this.drawImage("moreCellAdd",this.areas.cellAdd.x1,this.areas.cellAdd.y1);this.drawImage("moreCellRemove",this.areas.cellRemove.x1,this.areas.cellRemove.y1)},O8494:function(a,b){return a.r==b.r&&a.g==b.g&&a.b==b.b&&a.alpha==b.alpha},O8876:function(a,b){return 20>=a.r&&20>=
b.r&&20>=a.g&&20>=b.g&&20>=a.b&&20>=b.b},O1722:function(a,b){for(var c=a.length==b.length,d=a.length,e=0;e<d&&c;e++)c=a[e]==b[e];return c},O1796:function(a){return a&&this.types[a]&&null!=this.types[a].O5534?this.types[a].O5534:4},O2057:function(){if(this.data.type!=this.oldData.type||this.data.name!=this.oldData.name||this.data.direction!=this.oldData.direction){if(this.data.type!=this.oldData.type){if(this.types[this.data.type]&&this.types[this.data.type].limitedDirections){var a=!0;this.oldData.type&&
this.types[this.oldData.type].limitedDirections&&(a=!this.O1722(this.types[this.data.type].limitedDirections,this.types[this.oldData.type].limitedDirections));a&&(this.data.direction=this.types[this.data.type].limitedDirections[0])}else this.data.direction=null!=this.data.type&&this.types[this.data.type].O9762?0:null;1>=ig.game.O1257.rank&&this.O1796(this.data.type)!=this.O1796(this.oldData.type)&&this.fadeInDrawBigMessage(!0)}this.oldData.name=this.data.name;this.oldData.type=this.data.type;this.oldData.direction=
this.data.direction;-1===["musicSheet","holder","dynamicThing","happening","farBack"].indexOf(this.data.type)&&this.clearRects("changeDirection O9882 changeType changeBehavior changeAttributes pasteButton pasteButtonAlternative".split(" "));jQuery("#"+this.O5991).attr("value",this.data.name);a=null!=this.data.type&&null!=this.types[this.data.type].title?this.types[this.data.type].title.toUpperCase():"";""!=a?(this.context.fillStyle=this.O1944,this.fillRect(this.areas.changeType.x1,this.areas.changeType.y1,
this.areas.changeType.width,this.areas.changeType.height),a=ig.game.strings.O7686(a,16,!0),this.context.font=this.O3565,this.context.fillStyle="rgb(90,90,90)",this.fillText(a,this.areas.changeType.x1+this.areas.textBoxPadding.x1,this.areas.changeType.y1+this.areas.textBoxPadding.y1+this.O9897)):this.clearRect(this.areas.changeType.x1,this.areas.changeType.y1,this.areas.changeType.width,this.areas.changeType.height);if(null!=this.data.type)switch(this.types[this.data.type].O3570&&(a=this.types[this.data.type].O2711?
"example_"+this.data.type:"example_"+this.data.type+(null!=this.data.direction?"_"+this.data.direction:""),this.drawImage(a,this.areas.example.x1,this.areas.example.y1)),null!=this.data.direction&&(a=this.types[this.data.type].O2711?"multiDirectionArrow_"+this.data.direction:"directionArrow"+(this.types[this.data.type].O5511?"Diagonal":"")+"_"+this.data.direction,this.drawImage(a,this.areas.changeDirection.x1,this.areas.changeDirection.y1)),this.types[this.data.type].parent&&this.drawImage("changeBehavior",
this.areas.changeBehavior.x1,this.areas.changeBehavior.y1),ig.game.O2082.info[this.types[this.data.type].key]&&this.drawImage("changeAttributes",this.areas.changeAttributes.x1,this.areas.changeAttributes.y1),this.data.type){case "medium":this.drawImage("pasteButton",this.areas.pasteButtonAlternative.x1,this.areas.pasteButtonAlternative.y1);break;case "pointer":this.drawImage("pasteButton",this.areas.pasteButton.x1,this.areas.pasteButton.y1);break;case "writable":this.drawImage("rightsButton",this.areas.rightsButton.x1,
this.areas.rightsButton.y1)}}},O3263:function(a){var b=[],c=a*this.O4685;1<=a&&c++;for(a=c+this.O4685;c<a;c++)b.push(c);return b},O7241:function(){return this.O3263(this.O8176)},updatePalette:function(){var a=this.O7241();for(b in a){var b=parseInt(b);var c=a[b];c==parseInt(c)&&this.O8304(c,b)}this.O8304(this.transparentIndex,this.transparentIndex);this.O5617();this.O5433()},O8304:function(a,b){b=this.O5705(a,b);this.O4276(b,a,this.data.colors[a]);this.O4389==a&&a!=this.transparentIndex?"pickColor"==
this.mode?this.clearRect(b.x,b.y+18,14,9):this.drawImageWithAlpha("colorPickerButton",b.x,b.y+14,.75):"pickColor"!=this.mode&&this.clearRect(b.x,b.y+15,12,11);a!=this.O4782||ig.ua.mobile||(this.context.font=this.O3565,a=this.data.colors[this.O4782],this.context.fillStyle=a&&1==a.alpha&&80>=(a.r+a.g+a.b)/3?"rgba(200,200,200,.5)":"rgba(0,0,0,.5)",this.fillText("R",b.x+4,b.y+8+this.O9897))},O5433:function(){if(this.O8459())for(var a=this.areas.palettePageButton,b=0;b<this.O1025;b++){var c=this.O3263(b),
d=a.y1+2*b;for(e in c){var e=parseInt(e);var f=c[e];if(f==parseInt(f)){f=this.data.colors[f];if(null==f||void 0==f)f={r:255,g:255,b:255,alpha:1};f=ig.game.O4507(f);f.alpha*=b==this.O8176?1:.35;this.context.fillStyle=this.O5320(f);this.fillRect(a.x1+e,d,1,1)}}}},O7741:function(){for(var a=0;a<this.O1025;a++){var b=this.O3263(a);for(c in b){var c=parseInt(c);var d=b[c];if(d==parseInt(d)&&d==this.O4389){this.O8176=a;break}}}},O1056:function(a){this.O2753=!0;a=0<(a.wheelDelta?a.wheelDelta:-1*a.detail)?
-1:1;"pickAttributes"==this.mode?this.O8630&&(this.O5205=0==this.O5205?1:0,this.O7098(),ig.game.sounds.click.play()):(this.O8176=(parseInt(this.O8176)+a).limit(0,this.O1025-1),this.update(),ig.game.sounds.click.play())},O8459:function(){return this.O2753||this.O7301()||this.O8458()},O7301:function(){for(var a=!1,b=this.O5320(this.O9632()),c=1;c<this.O1025;c++){var d=this.O3263(c);for(e in d){var e=parseInt(e);var f=d[e];if(f==parseInt(f)&&this.O5320(this.data.colors[d[e]])!=b){a=!0;break}}}return a},
O8458:function(){var a=!1,b=this.O3263(0),c=[];for(d in b){var d=parseInt(d);var e=b[d];e==parseInt(e)&&(e=this.O5320(this.data.colors[b[d]]),0<=c.indexOf(e)?a=!0:c.push(e))}return!a},O5617:function(){if(this.data&&this.data.type){var a=null,b={};this.data.prop&&this.data.prop.attributes&&(b=ig.game.O2082.O5656(this.data.prop.attributes));if("musicSheet"==this.data.type)this.musicSheetSpecialIndex[this.O4389]?a="terminator"==this.musicSheetSpecialIndex[this.O4389]?"->":this.musicSheetSpecialIndex[this.O4389]:
this.instruments[this.O4389]&&(a=this.instruments[this.O4389],(b=ig.game.O2082.info.STACKINSTR[a]?ig.game.O2082.info.STACKINSTR[a].label:a)&&(a=b),8==this.O4389&&(a=ig.game.strings.O7686(a,8)),9<=this.O4389&&11>=this.O4389&&(a=ig.game.strings.O7686(a,6)));else if(0==this.O4389)if("glow"==this.data.type)a="light glow";else if(0<=["light","lighttop","fillLight","vignette"].indexOf(this.data.type))a="light";else if(("holdableItem"==this.data.type||"emitter"==this.data.type)&&b.hook)a="swing line";else if(("holdableItem"==
this.data.type||"emitter"==this.data.type)&&b.affecting)a="affecting";else if("wearable"==this.data.type&&b.shaded)a="shade";else if(0<="animatedThing body touchableThing equipment interacting holder".split(" ").indexOf(this.data.type)&&b.dripping)a="drop";else if(0<=["animatedThing","body","touchableThing","equipment","holder"].indexOf(this.data.type)&&b.sprinkling)a="sprinkle";else if(0<=["holder"].indexOf(this.data.type)&&(b.border||b.thickBorder))a="border";else if("flexible"==this.data.type&&
b.crumbling)a="crumble";else if("liner"==this.data.type)a="line";else if("farBack"==this.data.type)a="fill";else{if("writable"==this.data.type||"readable"==this.data.type||"medium"==this.data.type&&b.O3756s)a="background"}else 1==this.O4389&&("writable"==this.data.type||"readable"==this.data.type||"medium"==this.data.type&&b.O3756s?a="text":"liner"==this.data.type&&b.coloredOutline?a="outline":"farBack"==this.data.type&&(b.gradient||b.shortGradient||b.longGradient)&&(a="gradient"));a&&(b=this.O4389,
b>this.O4685-1&&(b=this.O4389%this.O4685-1),b=this.O5705(this.O4389,b),this.context.fillStyle="rgba(0,0,0,.3)",this.fillText("= "+a.toUpperCase(),b.x+17,b.y+21+this.O9897))}},O4276:function(a,b,c){this.context.fillStyle=this.O5320(this.O4389==b?{r:80,g:80,b:80,alpha:1}:{r:132,g:132,b:132,alpha:1});this.fillRect(a.x,a.y,a.width,a.height);this.clearRect(a.x+1,a.y+1,a.width-2,a.height-2);this.context.fillStyle=this.O5320(c);this.fillRect(a.x+1,a.y+1,a.width-2,a.height-2)},O5705:function(a,b,c){if(void 0===
c||null==c)c=!1;var d=this.areas.paletteBox.width,e=this.areas.paletteBox.height;b=this.areas.paletteBoxes.x1+b*d;var f=this.areas.paletteBoxes.y1;a==this.transparentIndex&&(b+=6);c&&(b-=3,f+=6,d+=5,e+=5);return{x:b,y:f,width:d,height:e}},O8723:function(){var a=this.O9731(this.backgroundRgb);a.alpha=1;var b=this.data.type&&(this.types[this.data.type].O2135||this.types[this.data.type].O8687);this.data.type&&this.types[this.data.type].O9925&&this.types[this.data.type].O9925.width==this.O5039&&this.types[this.data.type].O9925.height==
this.O5017?(this.context.fillStyle=this.O5320(a),this.fillRect(this.areas.O6074.x1-2,this.areas.O6074.y1-2,this.areas.O9420.width+4,this.areas.O9420.height+4)):(this.context.fillStyle=this.O5320(this.canvasOverlayRgb),this.fillRect(this.areas.O6074.x1,this.areas.O6074.y1,this.areas.O9420.width+1,this.areas.O9420.height+1));a=2;ig.game.settings.hidePainterBack?(a=this.areas.drawing.width%2?1:2,this.context.fillStyle="rgba(99,99,99,1)",this.fillRect(this.areas.O8423.x1,this.areas.O8423.y1,this.areas.drawing.width+
a,this.areas.drawing.height+a)):this.clearRect(this.areas.O8423.x1,this.areas.O8423.y1,this.areas.drawing.width+a,this.areas.drawing.height+a);a=b&&!ig.ua.mobile?"canvasHelpAnimated":"canvasHelp";"body"==this.data.type&&(6==this.selectedCell?a="canvasHelpSit":7<=this.selectedCell&&(a="canvasHelpOverlay"));if(!ig.game.settings.hidePainterBack||"canvasHelp"!=a&&"canvasHelpAnimated"!=a){var c=this.O4400[a];this.drawImage(a,this.areas.O8423.x1+this.areas.drawing.width/2-c.width/2,this.areas.O8423.y1+
this.areas.drawing.height-2-c.height)}this.O3888();this.showGrid&&!this.O8212&&this.O9190();this.O1155&&this.drawImageWithAlpha("symmetryLineX",this.areas.symmetryLineX.x1,this.areas.symmetryLineX.y1,.4);this.O9945&&this.drawImageWithAlpha("symmetryLineY",this.areas.symmetryLineY.x1,this.areas.symmetryLineY.y1,.4);this.O4893();if(0<this.O4032&&b&&"wearable"!=this.data.type&&"wearableBig"!=this.data.type&&"musicSheet"!=this.data.type){b=null;if("body"==this.data.type)switch(this.selectedCell){case this.bodyCells.sit:case this.bodyCells.walk:case this.bodyCells.blink:case this.bodyCells.talk:b=
this.bodyCells.stand;break;case this.bodyCells.jump:b=this.bodyCells.stand;break;case this.bodyCells.fall:b=this.bodyCells.jump;break;case this.bodyCells.create:b=this.bodyCells.climb;break;case this.bodyCells.climb:b=this.bodyCells.create}else"viewable"==this.data.type||"glow"==this.data.type||("backAndFrontThing"==this.data.type?1==this.selectedCell&&(b=0):(b=0==this.selectedCell?1:0,this.types[this.data.type].O8687&&(b=this.selectedCell-1,0>b&&(b=ig.game.O1828-1))));if(null!=b)for(a=0;a<this.data.pixels[0].length;a++)for(c=
0;c<this.data.pixels[0][0].length;c++)if(this.data.pixels[b]&&this.data.pixels[b][a]&&void 0!=this.data.pixels[b][a][c]&&this.data.pixels[this.selectedCell]&&this.data.pixels[this.selectedCell][a]&&void 0!=this.data.pixels[this.selectedCell][a][c]){var d=this.data.colors[this.data.pixels[this.selectedCell][a][c]],e=this.data.colors[this.data.pixels[b][a][c]];d&&e&&(!d.alpha||0==d.alpha)&&0!=e.alpha&&this.O6912(a,c,{r:e.r,g:e.g,b:e.b,alpha:e.alpha*this.O4032})}}this.showGrid&&this.O8212&&this.O9190();
"musicSheet"==this.data.type&&(this.O1872(),this.O7061&&this.O9767());"music"==this.data.type&&!this.data.prop.musicData&&this.O9486()},O4893:function(){for(var a=0;a<this.tileWidth;a++)for(var b=0;b<this.O2576;b++)if(this.data.pixels[this.selectedCell]&&void 0!=this.data.pixels[this.selectedCell][a]&&void 0!=this.data.pixels[this.selectedCell][a][b]){var c=this.data.pixels[this.selectedCell][a][b];c!=this.transparentIndex&&this.O6912(a,b,this.data.colors[c])}},O9806:function(a,b){this.data.pixels[this.selectedCell]&&
void 0!=this.data.pixels[this.selectedCell][a]&&void 0!=this.data.pixels[this.selectedCell][a][b]&&this.O6912(a,b,this.data.colors[this.data.pixels[this.selectedCell][a][b]])},O6912:function(a,b,c){a=this.areas.O8423.x1+a*this.O8977;b=this.areas.O8423.y1+b*this.O8977;this.context.fillStyle=this.O5320(c);this.fillRect(a,b,this.O8977,this.O8977)},O4382:function(a,b){this.clearRect(this.areas.O8423.x1+a*this.O8977,this.areas.O8423.y1+b*this.O8977,this.O8977,this.O8977)},O9731:function(a){return{r:a.r,
g:a.g,b:a.b,alpha:a.alpha}},O3417:function(){for(var a=!1,b=0;b<this.maxCells&&!a;b++)for(var c=0;c<this.tileWidth&&!a;c++)for(var d=0;d<this.tileWidth&&!a;d++)a=this.data.pixels[b]&&this.data.pixels[b][c][d]!=this.transparentIndex;return a},O9884:function(a){var b=!1;if(null===a||void 0===a)a=this.selectedCell;if(this.data&&this.data.pixels&&this.data.pixels[a])for(var c=0;c<this.data.pixels[a].length;c++){for(var d=0;d<this.data.pixels[a][c].length&&!(b=this.data.pixels[a][c][d]!=this.transparentIndex);d++);
if(b)break}return b},O2178:function(){if(this.O4210)switch(this.mode!=this.modeOld&&(this.modeOld=this.mode,this.O3477=!1),this.O6396||(this.O3477=!0),this.mode){case "default":this.O3981();break;case "pickColor":this.O2768();break;case "pickType":this.O6656()}},O6469:function(){if(this.O4210)switch(this.mode!=this.modeOld&&(this.modeOld=this.mode,this.O3477=!1),this.O6396||(this.O3477=!0),this.lastPixelSeenOnClick={x:null,y:null},this.mode){case "default":this.O2545();this.O6094();break;case "pickColor":this.O3169();
this.O6094();break;case "menu":this.O9124();break;case "cloneOld":this.O8880();this.O2086();break;case "changeColor":this.O6421();break;case "pickAttributes":this.O8347()}},O3981:function(){if(this.O4210){var a=this.cursorX,b=this.cursorY;if(this.O6396||this.O5079||this.O7724){var c=this.areas.O8423.x1+this.areas.drawing.width,d=this.areas.O8423.y1+this.areas.drawing.height;d=a>=this.areas.O8423.x1&&a<=c&&b>=this.areas.O8423.y1&&b<=d;a=Math.floor((a-this.areas.O8423.x1)/this.O8977);b=Math.floor((b-
this.areas.O8423.y1)/this.O8977);var e=0<=a&&a<this.tileWidth&&0<=b&&b<this.O2576;c=this.O5079?this.O4782:this.O4389;if(this.data.pixels&&this.data.pixels[this.selectedCell]&&this.data.pixels[this.selectedCell][a]&&void 0!==this.data.pixels[this.selectedCell][a][b]){var f=e&&(this.lineKeyIsPressed||this.lastPixelSeenOnClick.x!=a||this.lastPixelSeenOnClick.y!=b||c!=this.data.pixels[this.selectedCell][a][b]);this.lastPixelSeenOnClick={x:a,y:b};if(d&&this.data.pixels[this.selectedCell]&&(d=this.O4698(a,
b),e&&this.O3477))if("pickColor"==this.O2190)this.O5079?this.O4782=this.data.pixels[this.selectedCell][a][b]:(this.O4389=this.data.pixels[this.selectedCell][a][b],this.O7741()),this.update();else if(f&&"floodFill"==this.O2190)this.O5996(a,b,c,d),this.O2905();else if(f||0!==this.brushType){this.O9237(this.data.pixels[this.selectedCell],a,b,c);for(e=0;e<d.length;e++){var g=d[e];this.O9237(this.data.pixels[this.selectedCell],g.x,g.y,c)}null!==this.lastPointDrawn.x&&null!==this.lastPointDrawn.y&&(d={x:a,
y:b},e=!this.O3593&&!this.O5808(d,this.lastPointDrawn),this.lineKeyIsPressed||e)&&(this.O9576(this.data.pixels[this.selectedCell],c,this.lastPointDrawn,d),!this.O1155||!this.O9945)&&(d=this.O4698(this.lastPointDrawn.x,this.lastPointDrawn.y),1<=d.length&&this.O9576(this.data.pixels[this.selectedCell],c,d[0],g));this.lastPointDrawn={x:a,y:b};this.O8737=!0;this.O3593=!1;this.update();this.O3490()}}}else this.O4764&&"pickColor"==this.O2190&&(a=Math.floor((a-this.areas.O8423.x1)/this.O8977),b=Math.floor((b-
this.areas.O8423.y1)/this.O8977),g=this.O8639(a,b),this.O9370.text(g),g=jQuery(this.canvas).offset(),a=g.left+this.cursorX*this.pageZoom,b=g.top+this.cursorY*this.pageZoom,this.O9370.css("left",a-50*this.pageZoom+"px"),this.O9370.css("top",b+-10*this.pageZoom+"px"),this.O9370.css("display","block"))}},O5808:function(a,b){return a.x>=b.x-1&&a.x<=b.x+1&&a.y>=b.y-1&&a.y<=b.y+1},O9576:function(a,b,c,d){if(c&&d){var e=c.x;c=c.y;var f=d.x;d=d.y;for(var g=Math.abs(f-e),h=Math.abs(d-c),k=e<f?1:-1,l=c<d?1:
-1,m=g-h;;){this.O9237(a,e,c,b);if(e==f&&c==d)break;var n=2*m;n>-h&&(m-=h,e+=k);n<g&&(m+=g,c+=l)}}},O9237:function(a,b,c,d){for(var e=[{margin:0,rounded:!1},{margin:1,rounded:!0},{margin:1,rounded:!1},{margin:2,rounded:!0},{margin:2,rounded:!1}][this.brushType],f=-e.margin;f<=e.margin;f++)for(var g=-e.margin;g<=e.margin;g++)e.rounded&&Math.abs(f)==e.margin&&Math.abs(g)==e.margin||this.O2986(a,b+f,c+g,d);"musicSheet"==this.data.type&&this.O3390(this.selectedCell,b,c)},O2986:function(a,b,c,d){if(a[b]&&
void 0!==a[b][c]){var e=!0;this.O3646&&(e=this.O6396&&a[b][c]==this.O4782||this.O5079&&a[b][c]==this.O4389);e&&(a[b][c]=d,this.O6197(a,b,c))}},O9190:function(){this.context.fillStyle="rgb(70,70,70)";for(var a=this.tileWidth/2,b=this.O2576/2,c=1;c<this.tileWidth;c++){var d=this.areas.O8423.x1+c*this.O8977-.5,e=this.areas.O8423.y1,f=c==a?2:1,g=this.tileWidth*this.O8977;this.fillRect(d,e,f,g)}for(a=1;a<this.O2576;a++)d=this.areas.O8423.x1,e=this.areas.O8423.y1+a*this.O8977-.5,f=this.O2576*this.O8977,
g=a==b?2:1,this.fillRect(d,e,f,g)},O5996:function(a,b,c,d){if(this.O4764)ig.game.sounds.nocando.play();else{this.O9885(!0,this.data.pixels[this.selectedCell][a][b],c);this.floodFill(a,b,this.data.pixels[this.selectedCell][a][b],c);for(a=0;a<d.length;a++)b=d[a],this.floodFill(b.x,b.y,this.data.pixels[this.selectedCell][b.x][b.y],c);this.O9885(!1);this.update()}},O4698:function(a,b){var c=[];if(this.O1155){var d=parseInt(this.tileWidth/2);a<d?c.push({x:this.tileWidth-a-1,y:b}):a>d&&c.push({x:Math.abs(a-
this.tileWidth)-1,y:b})}this.O9945&&(d=parseInt(this.O2576/2),b<d?c.push({x:a,y:this.O2576-b-1}):b>d&&c.push({x:a,y:Math.abs(b-this.O2576)-1}));2<=c.length&&c.push({x:c[0].x,y:c[1].y});return c},O9013:function(a){for(var b=this.O5266(a),c=0;c<this.tileWidth;c++)for(var d=0;d<this.O2576;d++)b[c][d]=a[this.tileWidth-c-1][d];return b},O8964:function(a){for(var b=this.O5266(a),c=0;c<this.tileWidth;c++)for(var d=0;d<this.O2576;d++)b[c][d]=a[c][this.O2576-d-1];return b},O2843:function(){this.O7189={reset:{x1:7,
y1:7},darker:{rgbStrong:{r:-27,g:-27,b:-27},rgbWeak:{r:-3,g:-3,b:-3},x1:43,y1:7},brighter:{rgbStrong:{r:27,g:27,b:27},rgbWeak:{r:3,g:3,b:3},x1:81,y1:7},moreRed:{rgbStrong:{r:45,g:-27,b:-27},rgbWeak:{r:23,g:-3,b:-3},x1:119,y1:7},moreGreen:{rgbStrong:{r:-27,g:45,b:-27},rgbWeak:{r:-3,g:23,b:-3},x1:7,y1:42},moreBlue:{rgbStrong:{r:-27,g:-27,b:45},rgbWeak:{r:-3,g:-3,b:23},x1:43,y1:42},moreCyan:{rgbStrong:{r:-27,g:27,b:27},rgbWeak:{r:-3,g:3,b:3},x1:81,y1:42},moreMagenta:{rgbStrong:{r:27,g:-27,b:27},rgbWeak:{r:3,
g:-3,b:3},x1:119,y1:42},moreYellow:{rgbStrong:{r:27,g:27,b:-27},rgbWeak:{r:3,g:3,b:-3},x1:7,y1:77},lessSaturation:{x1:43,y1:77},moreSaturation:{x1:81,y1:77},toggleStrength:{x1:119,y1:77}}},O7573:function(){this.O2086();this.drawImage("changeColorDialog",this.areas.changeColor.x1,this.areas.changeColor.y1);var a=this.O7189,b=this.O9395(this.data.colors),c;for(c in a)if("toggleStrength"!=c){var d=this.areas.changeColor.x1+a[c].x1+this.areas.changeColorOffset.x1,e=this.areas.changeColor.y1+a[c].y1+this.areas.changeColorOffset.y1;
switch(c){case "reset":this.data.colors=this.O9395(this.O6433);break;case "lessSaturation":this.O8834(-1);break;case "moreSaturation":this.O8834(1);break;default:this.O2491(this.O7189[c])}this.O4664(this.data.pixels[this.selectedCell],d,e);this.data.colors=this.O9395(b)}this.O9703?this.clearRect(this.O7189.toggleStrength):(this.context.fillStyle="rgb(255,255,255)",a=this.areas.changeColorToggleStrength,this.fillRect(this.areas.changeColor.x1+a.x1,this.areas.changeColor.y1+a.y1,a.width,a.height))},
O6421:function(){var a=this.cursorX,b=this.cursorY,c=this.O1173(a,b,this.areas.changeColorCloseButton),d=!c&&this.O1173(a,b,this.areas.changeColor);if(c)this.O8880(),this.O2206(),this.O2086();else if(d){c=this.O7189;for(var e in c)if(d={x1:this.areas.changeColor.x1+c[e].x1,y1:this.areas.changeColor.y1+c[e].y1},d.x2=d.x1+this.areas.changeColorOffset.width,d.y2=d.y1+this.areas.changeColorOffset.height,this.O1173(a,b,d)){switch(e){case "reset":this.data.colors=this.O9395(this.O6433);break;case "lessSaturation":this.O8834(-1);
break;case "moreSaturation":this.O8834(1);break;case "toggleStrength":this.O9703=!this.O9703;break;default:this.O2491(this.O7189[e])}this.O6094();ig.game.sounds.click.play();this.O7573()}}},O8834:function(a){a=1+(this.O9703?.25:.125)*a;for(var b=0;b<this.maxColors;b++)if(b!=this.transparentIndex&&(null==this.O9096||this.O9096==b)){var c=ml.Misc.O5498(this.data.colors[b]);c.saturation*=a;c=ml.Misc.O8488(c);this.data.colors[b]={r:c.r,g:c.g,b:c.b,alpha:1*this.data.colors[b].alpha}}},O2491:function(a){a=
this.O9703?a.rgbStrong:a.rgbWeak;for(var b=this.O9632(),c=0;c<this.maxColors;c++)if(c!=this.transparentIndex&&(null==this.O9096||this.O9096==c)){var d=this.data.colors[c],e=!0;this.O9096!==c&&this.O3455(d,b)&&(e=this.O2454(this.data.pixels,c));e&&(this.data.colors[c]={r:(d.r+a.r).limit(0,255),g:(d.g+a.g).limit(0,255),b:(d.b+a.b).limit(0,255),alpha:d.alpha})}},O3455:function(a,b){return a.r==b.r&&a.g==b.g&&a.b==b.b&&a.alpha==b.alpha},floodFill:function(a,b,c,d){c!=d&&this.data.pixels[this.selectedCell][a][b]==
c&&(this.data.pixels[this.selectedCell][a][b]=d,a<this.tileWidth-1&&this.data.pixels[this.selectedCell][a+1][b]==c&&this.floodFill(a+1,b,c,d),0<a&&this.data.pixels[this.selectedCell][a-1][b]==c&&this.floodFill(a-1,b,c,d),b<this.O2576-1&&this.data.pixels[this.selectedCell][a][b+1]==c&&this.floodFill(a,b+1,c,d),0<b&&this.data.pixels[this.selectedCell][a][b-1]==c&&this.floodFill(a,b-1,c,d))},O2545:function(){var a=this.cursorX,b=this.cursorY,c=this.data.type,d=null!=this.data.type&&this.types[this.data.type].O2135,
e=null!=this.data.type&&this.types[this.data.type].O8687;if(null!=this.data.direction&&this.O1173(a,b,this.areas.changeDirection))this.O5065(!0);else if("dynamicThing"==c&&this.O1173(a,b,this.areas.dynamicEmitsButton))this.data.prop.emitsId?(ig.game.sounds.bin.play(),this.data.prop.emitsId=null,this.O2086()):(this.data.prop.emitsId=null,ig.game.alertDialog.open('<p>Now pick a Holdable Item from the right.</p><p style="opacity: .6; font-size: 90%">It will be emitted at the first cell\'s position if you attach the Dynamic and press space or hit the action button (requires attribute Attachable, Follows or Closely Follows). An emitting sound can be added by using Add Sound for this Dynamic.</p>',
!0),ig.game.alertDialog.contextId="pickEmits");else if("liner"==c&&this.O1173(a,b,this.areas.linerAddEnvironmentButton))this.data.prop.environmentId?(ig.game.sounds.bin.play(),this.data.prop.environmentId=null,this.O2086()):(this.data.prop.environmentId=null,ig.game.alertDialog.open("Now pick an Environment from the right."),ig.game.alertDialog.contextId="pickEnvironment");else if("liner"==c&&this.O1173(a,b,this.areas.linerAddAtButton))ig.game.alertDialog.contextId=null,ig.game.alertDialog.O5816("Name of thing behind must contain:",
this.data.prop.atKeyword,ig.game.painter.O9035,void 0,void 0,void 0,void 0,void 0,ig.game.validations.itemName.maxLength);else if(this.O1173(a,b,this.areas.createButton))this.O7295();else if(this.O1173(a,b,this.areas.menuButton))this.O9598(),this.mode="menu",ig.game.sounds.click.play(),ig.game.O3957.O9357(),this.update();else if(this.O1173(a,b,this.areas.palettePageButton)&&this.O8459())this.O8176<this.O1025-1?this.O8176++:this.O8176=0,ig.game.sounds.click.play(),this.update();else if(this.O1173(a,
b,this.areas.closeButton)&&"default"==this.mode&&this.O3477)this.close();else if("interactiveEnvironment"==c&&this.O1173(a,b,this.areas.useAtGetButtons)&&!ig.game.alertDialog.isOpen)ig.game.alertDialog.contextId=null,a>this.areas.useAtGetButtons.x1+2/3*this.areas.useAtGetButtons.width?(ig.game.alertDialog.open("Now pick a holdable, mountable or wearable from the right."),ig.game.alertDialog.contextId="pickGetId"):a>this.areas.useAtGetButtons.x1+1/3*this.areas.useAtGetButtons.width?ig.game.alertDialog.O5816("Name of thing behind or below must contain (separate multiple with comma):",
this.data.prop.atKeyword,ig.game.painter.O9035):ig.game.alertDialog.O5816("Holdable Item or Equpiment name must contain (optional; separate multiple with comma):",this.data.prop.useKeyword,ig.game.painter.O5933);else if("readable"!=c&&"brain"!=c||!this.O1173(a,b,this.areas.textualButton))if("mift"==c&&this.O1173(a,b,this.areas.textualButton))ig.game.alertDialog.isOpen||(b=this.data.prop.text?this.data.prop.text:"",""==b&&""!=this.data.name&&null!=this.data.name&&"unnamed"!=this.data.name&&(b=this.data.name.trim()),
ig.game.alertDialog.O5816("Your message:",b,ig.game.painter.O9398,null,!0,!1,void 0,void 0,this.O4635,!0),ig.game.sounds.click.play());else if("mift"==c&&this.O1173(a,b,this.areas.toButton))ig.game.sounds.click.play(),ig.game.friendsDialog.open();else if(c&&this.types[c].O9245&&this.O1173(a,b,this.areas.drawTogetherButton))this.O4764?(this.O3942(),ig.game.sounds.pickup.play()):(this.O7002(),ig.game.sounds.click.play()),this.update();else if("interacting"==c&&this.O1173(a,b,this.areas.interactingHelpButton))ml.Misc.openUrl("/info-interacting"),
ig.game.sounds.click.play();else if("pointer"==c&&this.O1173(a,b,this.areas.helpButton))ig.game.alertDialog.O3813("Pointers, when activated, will provide a guiding arrow to the target location. Also, placing a Pointer next to a Mountable will steer the Mountable to the target when mounted."),ig.game.sounds.click.play();else if("placeName"==c&&this.O1173(a,b,this.areas.helpButton))ig.game.alertDialog.O3813("Place Names show a label on the map when placed. They will also transport one to their placed location when clicked in the side panel."),
ig.game.sounds.click.play();else if("holder"==c&&this.O1173(a,b,this.areas.helpButton))ml.Misc.openUrl("/info-holder"),ig.game.sounds.click.play();else if("readable"==c&&this.O1173(a,b,this.areas.helpButton))ml.Misc.openUrl("/info-text"),ig.game.sounds.click.play();else if("multithing"==c&&this.O1173(a,b,this.areas.helpButton))ml.Misc.openUrl("/info-multi"),ig.game.sounds.click.play();else if("brain"==c&&this.O1173(a,b,this.areas.brainHelpButton))ml.Misc.openUrl("/info-brain"),ig.game.sounds.click.play();
else if("dynamicThing"==c&&this.O1173(a,b,this.areas.dynamicHelpButton))ml.Misc.openUrl("/info-dynamic"),ig.game.sounds.click.play();else if("farBack"==c&&this.O1173(a,b,this.areas.dynamicHelpButton))ml.Misc.openUrl("/info-far-back"),ig.game.sounds.click.play();else if("mover"==c&&this.O1173(a,b,this.areas.dynamicHelpButton))ml.Misc.openUrl("/info-mover"),ig.game.sounds.click.play();else if("happening"==c&&this.O1173(a,b,this.areas.dynamicHelpButton))ml.Misc.openUrl("/info-happening"),ig.game.sounds.click.play();
else if("generator"==c&&this.O1173(a,b,this.areas.brainHelpButton))ml.Misc.openUrl("/info-generator"),ig.game.sounds.click.play();else if("body"!=c&&"motion"!=c||!this.O1173(a,b,this.areas.dynamicHelpButton))if("interacting"==c&&this.O1173(a,b,this.areas.textualButtonWhenAnimated))this.interactingDialog||(this.interactingDialog=new InteractingDialog),this.interactingDialog.isOpen?this.O5781():this.interactingDialog.open(this.data.prop.textData?this.data.prop.textData:""),this.O4651(),ig.game.sounds.click.play();
else if("dynamicThing"==c&&this.O1173(a,b,this.areas.dynamicTextButton))ig.game.alertDialog.isOpen||(b=this.data.prop.text?this.data.prop.text:"",ig.game.alertDialog.contextId="dynamicThingText",ig.game.alertDialog.O5816(null,b,ig.game.painter.O7542,null,!0,!1,void 0,void 0,this.O8954),ig.game.sounds.click.play(),jQuery("#alertDialog").css("width","50%").css("left","45%"));else if("farBack"==c&&this.O1173(a,b,this.areas.dynamicTextButton))ig.game.alertDialog.isOpen||(b=this.data.prop.text?this.data.prop.text:
"",ig.game.alertDialog.contextId="farBackText",ig.game.alertDialog.O5816(null,b,ig.game.painter.O7542,null,!0,!1,void 0,void 0,this.O3775),ig.game.sounds.click.play(),jQuery("#alertDialog").css("width","35%").css("top",10*ig.system.scale+"px").css("left","55%"),ig.ua.mobile||(jQuery("#alertDialog").css("height","55%"),jQuery("#promptInputBox").css("height",Math.round(.35*ig.system.O5809)+"px"),jQuery(".contentPart").css("height",Math.round(.425*ig.system.O5809)+"px")),jQuery("#promptInputBox").attr("placeholder",
"click in world to add coordinate"));else if("mover"==c&&this.O1173(a,b,this.areas.dynamicTextButton))ig.game.alertDialog.isOpen||(b=this.data.prop.text?this.data.prop.text:"",b=ig.game.O2225.O9047(b),ig.game.alertDialog.O5816(null,b,ig.game.painter.O7542,null,!0,!1,void 0,void 0,5E4),ig.game.sounds.click.play(),jQuery("#alertDialog").css("width","50%").css("left","45%"),jQuery("#alertDialog textarea").css("font-size","160%").css("letter-spacing","2px").css("font-family","monospace"));else if("mover"==
c&&this.O1173(a,b,this.areas.moverUseButton))ig.game.alertDialog.contextId=null,ig.game.alertDialog.O5816("To harm the Mover Body, equipment name must contain (optional; separate multiple with comma):",this.data.prop.useKeyword,ig.game.painter.O5933);else if(this.O1173(a,b,this.areas.preview))this.O3738()&&(this.O2905(),ig.game.sounds.click.play());else if("aimable"==c&&this.O1173(a,b,this.areas.specsButton))ig.game.alertDialog.isOpen||(this.O3441(),ig.game.sounds.click.play());else if("happening"==
c&&this.O1173(a,b,this.areas.dynamicTextButton))2<=ig.game.O1257.rank?ig.game.alertDialog.isOpen||(b=this.data.prop.textData?this.data.prop.textData:"",ig.game.alertDialog.O5816(null,b,ig.game.painter.textDataSaved,null,!0,!0),jQuery("#promptInputBox").attr("placeholder",this.O1463()),ig.game.sounds.click.play()):ig.game.O1002.O7063();else if("generator"==c&&this.O1173(a,b,this.areas.textualButton))2<=ig.game.O1257.rank?ig.game.alertDialog.isOpen||(b=this.data.prop.textData?this.data.prop.textData:
"",ig.game.alertDialog.O5816(null,b,ig.game.painter.textDataSaved,null,!0,!0),jQuery("#promptInputBox").attr("placeholder",'Test your code first by clicking "Generator" on the area dialog'),ig.game.sounds.click.play()):ig.game.O1002.O7063();else if("interacting"==c&&this.O1173(a,b,this.areas.thingReferencesButton))this.thingReferencesDialog||(this.thingReferencesDialog=new ThingReferencesDialog),this.thingReferencesDialog.isOpen?this.O4412():this.thingReferencesDialog.open(ig.game.O4507(this.data.prop.thingRefs),
"Item, Interacting Motion, Sound + More"),this.O4651(),ig.game.sounds.click.play();else if("musicSheet"==c&&this.O1173(a,b,this.areas.changeAttributes))ig.game.alertDialog.O5816("Please enter note interval in milliseconds from "+this.noteDelayMSMin+" - "+this.noteDelayMSMax+" in steps of "+this.O3219,this.data.prop.noteDelayMS?this.data.prop.noteDelayMS:this.noteDelayMSDefault,ig.game.painter.O2429);else if(this.O1173(a,b,this.areas.changeAttributes)&&this.data.type&&ig.game.O2082.info[this.types[this.data.type].key])this.O7098(),
ig.game.sounds.click.play();else if(this.O1173(a,b,this.areas.pasteButtonAlternative)&&this.data.type&&0<=["medium"].indexOf(this.data.type))this.handlePasteMedium();else if(this.O1173(a,b,this.areas.rightsButton)&&this.data.type&&0<=["writable"].indexOf(this.data.type))this.O8793();else if(this.O1173(a,b,this.areas.pasteButton)&&this.data.type&&0<=["pointer"].indexOf(this.data.type))this.O8162();else if("gatherable"==c&&this.O1173(a,b,this.areas.useButton))ig.game.alertDialog.contextId=null,ig.game.alertDialog.O5816("Holdable Item and Equipment, Wearable or Body name must contain (optional; separate multiple with comma):",
this.data.prop.useKeyword,ig.game.painter.O5933);else if("crumbling"==c&&this.O1173(a,b,this.areas.useButtonAlternative))ig.game.alertDialog.contextId=null,ig.game.alertDialog.O5816("Holdable Equipment name must contain (optional; separate multiple with comma):",this.data.prop.useKeyword,ig.game.painter.O5933);else if("gatherable"==c&&this.O1173(a,b,this.areas.hasButton))this.data.prop.hasId=null,ig.game.alertDialog.open("Now pick a Holdable Item, Equipment, Consumable or Instrument from the right."),
ig.game.alertDialog.contextId="pickHasId";else if("mover"==c&&this.O1173(a,b,this.areas.holdableButton))this.data.prop.holdableId?(ig.game.sounds.bin.play(),this.data.prop.holdableId=null,this.O2086()):(ig.game.sounds.click.play(),this.data.prop.holdableId=null,this.data.prop.holdableId=null,ig.game.alertDialog.open("To set an Equipment for the Mover Body, pick one from the right.",null,null,null,null,!0),ig.game.alertDialog.contextId="pickHoldableId");else if("mover"==c&&this.O1173(a,b,this.areas.wearableButton))this.data.prop.wearableId?
(ig.game.sounds.bin.play(),this.data.prop.wearableId=null,this.O2086()):(ig.game.sounds.click.play(),this.data.prop.wearableId=null,this.data.prop.wearableId=null,ig.game.alertDialog.open("To set a Wearable for the Mover Body, pick one from the right.",null,null,null,null,!0),ig.game.alertDialog.contextId="pickWearableId");else if("mover"==c&&this.O1173(a,b,this.areas.protectPercentButton))ig.game.alertDialog.contextId=null,ig.game.alertDialog.O5816("Enter Mover Body hit protection from 0-100%:",
String(this.data.prop.protectPercent?this.data.prop.protectPercent:0),ig.game.painter.O5411,void 0,void 0,void 0,void 0,void 0,4);else if("sound"==c&&this.O1173(a,b,this.areas.creditButton)){if(b=this.data.prop.creditUrl)b=ig.game.sounds.O937(b);ig.game.alertDialog.O5816("Paste the FreeSound.org or similar URL as appropriate:",b,ig.game.painter.O8379)}else if("transforming"==c&&this.O1173(a,b,this.areas.timeButton))this.O2493();else if("transforming"==c&&this.O1173(a,b,this.areas.givesButton))this.thingReferencesDialog||
(this.thingReferencesDialog=new ThingReferencesDialog),this.thingReferencesDialog.isOpen?this.O4412():this.thingReferencesDialog.open(ig.game.O4507(this.data.prop.thingRefs),"Optional Holdable, Wearable, Mountable, Body, Medium or Readable to be Given At Last Cell"),this.O4651(),ig.game.sounds.click.play();else if("holder"==c&&this.O1173(a,b,this.areas.needsButton))ig.game.alertDialog.contextId=null,ig.game.alertDialog.O5816("Holdable item or equipment name must contain:",this.data.prop.useKeyword,
ig.game.painter.O5933,void 0,void 0,void 0,void 0,void 0,ig.game.validations.itemName.maxLength,!0);else if("holder"==c&&this.O1173(a,b,this.areas.sizeButton))ig.game.alertDialog.contextId=null,b=this.data.prop.backTileCount?this.data.prop.backTileCount:ig.game.holderDialog.O8940(),ig.game.alertDialog.O5816("Enter size x,y (from 1-8):",b,ig.game.painter.O1836,void 0,void 0,void 0,void 0,void 0,10,!0);else if(this.data.type&&this.types[this.data.type].O3397&&this.O1173(a,b,this.areas.motionIdButton))this.data.prop.motionId?
(ig.game.sounds.bin.play(),this.data.prop.motionId=null,this.O2086()):(ig.game.sounds.click.play(),this.data.prop.motionId=null,ig.game.alertDialog.open("Now optionally, pick a Motion from the right.",null,null,null,null,!0),ig.game.alertDialog.contextId="motionId");else if(d&&this.O1173(a,b,this.areas.cell0))this.O2737=this.selectedCell=0,ig.game.sounds.click.play(),this.update();else if(d&&this.O1173(a,b,this.areas.cell1))this.O2737=this.selectedCell=1,ig.game.sounds.click.play(),this.update();
else if(this.data.type&&this.types[this.data.type].O2867&&this.O1173(a,b,this.areas.cellAdd))"musicSheet"==this.data.type&&(this.O8103=9),this.O6394<this.O8103&&(this.O6394++,this.selectedCell=this.O6394-1,this.O3315(50),ig.game.sounds.click.play(),this.update(),this.O2905());else if(this.data.type&&this.types[this.data.type].O2867&&this.O1173(a,b,this.areas.cellRemove))b=0<=["dynamicThing","happening","musicSheet","farBack"].indexOf(this.data.type)?1:2,this.O6394>b&&(this.O6394--,this.selectedCell=
this.O6394-1,this.O3315(50),ig.game.sounds.click.play(),this.update(),this.O2905());else if("musicSheet"==this.data.type&&this.O1173(a,b,this.areas.playMusicButton))ig.game.sounds.click.play(),this.O6352();else if("musicSheet"==this.data.type&&this.O1173(a,b,this.areas.convertMusicSheetButton))ig.game.sounds.click.play(),confirm("Convert to type Music? (If you haven't already, it's suggested you cancel and save a backup of the Music Sheet first.)")&&this.O3093();else if(this.data.type&&this.types[this.data.type].O2867&&
this.O1173(a,b,this.areas.multiCells))b=this.areas.multiCells.width/ig.game.O1828,a-=this.areas.multiCells.x1,b=0<a?Math.floor(a/b):0,b>ig.game.O1828-1&&(b=ig.game.O1828-1),a=!1,b<this.O6394&&(a=b==this.selectedCell,this.selectedCell=b,this.O2737=null,ig.game.sounds.click.play()),this.update(),"musicSheet"==this.data.type&&(a?this.O6352():this.O7061&&(this.O9598(),this.O3532()),this.O4651());else if(e&&this.O1173(a,b,this.areas.multiCells))b=this.areas.multiCells.width/ig.game.O1828,a-=this.areas.multiCells.x1,
b=0<a?Math.floor(a/b):0,b>ig.game.O1828-1&&(b=ig.game.O1828-1),this.O2737=this.selectedCell=b,ig.game.sounds.click.play(),this.update();else if(0<=["motion","interactingMotion","holder"].indexOf(this.data.type)&&this.O1173(a,b,this.areas.optionalThirdCell))this.O2737=this.selectedCell=2,ig.game.sounds.click.play(),this.update();else if(this.O1173(a,b,this.areas.colorPicker)){d=this.O7241();c=null;for(f in d){var f=parseInt(f);e=d[f];if(e==parseInt(e)){var g=this.O5705(e,f);g.height+=12;if(this.O6789(a,
b,g)){c=e;break}}}null==c&&(c=this.transparentIndex);null!=c&&((a=this.O4389==c&&c!=this.transparentIndex&&b>this.areas.betweenColorAndColorPicker.y1,this.O3646||!this.O7724&&!a)?b<this.areas.betweenColorAndColorPicker.y1&&(this.O3646?this.O1784(this.O4389,c):this.O5079?this.O4782=c:this.O4389=c,this.update()):this.O3477&&(this.O4389!=this.transparentIndex?this.O8871():ig.game.sounds.nocando.play()))}else this.data&&this.data.type&&this.types[this.data.type].O3866&&this.O1173(a,b,this.areas.moveAvatarArrows)?
(f=[[{rotation:-1},{y:-1},{rotation:1}],[{x:-1},{y:1},{x:1}]],a-=this.areas.moveAvatarArrows.x1,b-=this.areas.moveAvatarArrows.y1,d=c=0,e=this.areas.moveAvatarArrows.width/f[0].length,g=this.areas.moveAvatarArrows.height/f.length,0<a&&(c=Math.floor(a/e)),0<b&&(d=Math.floor(b/g)),(b=f[d]&&f[d][c]?f[d][c]:null)&&(b.x||b.y)&&(this.O3315(50),ig.game.sounds.click.play(),this.O8512(b),this.update())):this.O1173(a,b,this.areas.changeTypeFuzzy)?this.O3477&&"pickType"!=this.mode&&(this.O9716(),ig.game.sounds.click.play()):
this.O1173(a,b,this.areas.soundButton)&&"mift"==this.data.type?(this.O9221(),ig.game.sounds.click.play(),this.O2086()):this.O1173(a,b,this.areas.changeBehavior)&&this.data.type&&this.types[this.data.type].parent&&(this.O5100(),ig.game.sounds.click.play());else ml.Misc.openUrl("/info-tips#bodyMotion"),ig.game.sounds.click.play();else 2<=ig.game.O1257.rank?ig.game.alertDialog.isOpen||(b=this.data.prop.textData?this.data.prop.textData:"",a="brain"==c||this.data.prop.attributes&&0<=this.data.prop.attributes.indexOf("sansSerifFont"),
ig.game.alertDialog.O5816(null,b,ig.game.painter.textDataSaved,null,!0,a),"brain"==c&&jQuery("#promptInputBox").attr("placeholder",this.O1463()),ig.game.sounds.click.play()):ig.game.O1002.O7063()},O1784:function(a,b){if(a!=this.transparentIndex&&b!=this.transparentIndex&&a!=b){var c=this.data.colors[a];this.data.colors[a]=this.data.colors[b];this.data.colors[b]=c;if(this.data.pixels)for(c=0;c<this.data.pixels.length;c++)for(var d=this.data.pixels[c],e=0;e<d.length;e++)for(var f=0;f<d[e].length;f++)d[e][f]==
a?d[e][f]=b:d[e][f]==b&&(d[e][f]=a);ig.game.sounds.shortWhoosh.play()}else ig.game.sounds.nocando.play()},O1463:function(){return"DURING DEVELOPMENT, LEAVE THIS EMPTY, PLACE THE CREATION IN THE WORLD AND WALK OVER IT"},O6035:function(a,b,c,d,e,f){var g="";e||=ig.game.strings.O2801(a);g+='<p class="specPart"><span class="specLabel">'+ig.game.strings.O9955(e)+"</span> &nbsp;";g+='<select id="'+a+'" onChange="ig.game.painter.O5036(\''+a+"')\">";e=this.data.prop.specs&&void 0!==this.data.prop.specs[a]?
this.data.prop.specs[a]:b[a];if(d)for(var h=0;h<d.length;h++){c=d[h];var k=c==e?' selected="selected"':"",l=c==b[a]?'style="background-color: rgb(210,210,210)"':"";g+='<option value="'+c+'"'+k+" "+l+">"+c+"</option>"}else for(h=0;100>=h;h+=5)k=h==e?' selected="selected"':"",l=h==b[a]?'style="background-color: rgb(210,210,210)"':"",g+='<option value="'+h+'"'+k+" "+l+">"+(f&&0==h?"~":"")+h+(c?"%":"")+"</option>";g=g+'</select> &nbsp; <span class="specInfo" id="specInfo'+(a+'">'+this.O1172(e,b[a])+"</span>");
return g+"</p>"},O1172:function(a,b){a-=b;b="";0>a?(a!=parseInt(a)&&(a=a.toFixed(2)),b=a):0<a&&(a!=parseInt(a)&&(a=a.toFixed(2)),b="+"+a);return b},O5036:function(a){var b=ig.game.O9968.O6753(),c=jQuery("#"+a).val();b=this.O1172(c,b[a]);jQuery("#specInfo"+a).html(b)},O3441:function(){var a="",b=ig.game.O9968.O6753();a+=this.O6035("recoil",b,!0);a+=this.O6035("accuracy",b,!0);a+=this.O6035("harm",b,!0);for(var c=[],d=1;20>=d;d++)c.push(d);for(d=25;50>=d;d+=5)c.push(d);for(d=60;100>=d;d+=10)c.push(d);
a+=this.O6035("shotsPerAmmo",b,!1,c);c=[];for(d=.25;1>=d;d+=.05)c.push(d.toFixed(2));for(d=1;2>=d;d+=.25)c.push(d.toFixed(2));a+=this.O6035("secondsBetweenShots",b,!1,c,"seconds betw. shots");c=[];for(d=.5;10>=d;d+=.5)c.push(d.toFixed(1));for(d=11;15>=d;d+=1)c.push(d.toFixed(1));a+=this.O6035("secondsToReload",b,!1,c);c=[];a+=this.O6035("weight",b,!1,null,"shot weight",!0);ig.game.alertDialog.open({html:a,O9267:function(){ig.game.painter.O5815()}})},O5815:function(a){a=ig.game.painter;var b=ig.game.O9968.O6753();
a.data.prop.specs={};var c=jQuery("#recoil").val();c!=b.recoil&&(a.data.prop.specs.recoil=parseInt(c));c=jQuery("#accuracy").val();c!=b.accuracy&&(a.data.prop.specs.accuracy=parseInt(c));c=jQuery("#harm").val();c!=b.harm&&(a.data.prop.specs.harm=parseInt(c));c=jQuery("#secondsBetweenShots").val();c!=b.secondsBetweenShots&&(a.data.prop.specs.secondsBetweenShots=parseFloat(c));c=jQuery("#secondsToReload").val();c!=b.secondsToReload&&(a.data.prop.specs.secondsToReload=parseFloat(c));c=jQuery("#shotsPerAmmo").val();
c!=b.shotsPerAmmo&&(a.data.prop.specs.shotsPerAmmo=parseInt(c));c=jQuery("#weight").val();c!=b.weight&&(a.data.prop.specs.weight=parseInt(c))},textDataSaved:function(a){ig.game.painter.data.prop.textData=a;ig.game.sounds.success.play()},O7542:function(a){var b=ig.game.painter;"mover"==b.data.type?(b.data.prop.text=ig.game.O2225.O5374(a),b.data.prop.text.length>ig.game.O2225.textMaxLength&&(b.data.prop.text=b.data.prop.text.substr(0,ig.game.O2225.textMaxLength),ig.game.sounds.nocando.play(),setTimeout(function(){ig.game.alertDialog.open("Oops... the text was too long and has been shortened.")},
100))):b.data.prop.text=a;ig.game.alertDialog.contextId=null;b.O2086();b.O2905()},O9398:function(a){var b=ig.game.painter;a&&(b.data.prop.text=a,b.O2086(),ig.game.sounds.success.play())},O8745:function(a){(a=ig.game.painter.O3463(a))?(ig.game.painter.data.colors[ig.game.painter.O4389]=a,ig.game.sounds.success.play()):ig.game.sounds.nocando.play();ig.game.painter.O2086()},O3463:function(a){var b=null;if(a&&"string"===typeof a)if(0<=a.indexOf(",")){a=ig.game.strings.replaceAll(a," ","");a=ig.game.strings.replaceAll(a,
"rgba(","");a=ig.game.strings.replaceAll(a,")","");var c=a.split(",");3==c.length&&(a+=",1",c.push("1"));if(4==c.length){var d=parseFloat(c[3]);0<d&&1>=d&&5>=c[3].length&&(b=a.split(","))}}else if(a=ig.game.strings.replaceAll(a,"#",""),6==a.length){b=[];for(c=0;3>c;c++)b[c]=a.substr(2*c,2),b[c]=parseInt(b[c],16);b.push(1)}if(b){for(c=0;3>c;c++)if(!this.O6715(parseInt(b[c]))){b=null;break}b&&={r:parseInt(b[0]),g:parseInt(b[1]),b:parseInt(b[2]),alpha:parseFloat(b[3])}}return b},O6715:function(a){return void 0!=
a&&null!=a&&this.O5090(a)&&0<=a&&255>=a},O5090:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},O5781:function(){this.interactingDialog&&this.interactingDialog.isOpen&&(this.data.prop.textData=jQuery("#interactingDialog").val(),this.data.prop.textData=ig.game.strings.O8873(this.data.prop.textData),this.data.prop.textData=ig.game.O2116.O9819(this.data.prop.textData),this.data.prop.textData.toLowerCase(),this.data.prop.reactsTo=ig.game.O2116.O2994(this.data.prop.textData),jQuery("#interactingDialog").remove(),
this.interactingDialog.isOpen=!1,ig.game.O2116.O3977(this.data.prop.textData,this.data.prop.thingRefs))},O4412:function(){this.thingReferencesDialog&&this.thingReferencesDialog.isOpen&&(this.data.prop.thingRefs=ig.game.O4507(this.thingReferencesDialog.data),jQuery("#thingReferencesDialog").remove(),this.thingReferencesDialog.isOpen=!1)},O3422:function(a,b,c){if(this.O1550(c)){if(a&&this.data.type)if(this.thingReferencesDialog&&this.thingReferencesDialog.isOpen)if("interacting"==this.data.type){var d=
"ACTIVATOR CRUMBLING DEADLYEM THROWER GATHER OPENABLE PORTALR DEADLYMV MOVING".split(" ");0<=d.indexOf(c)?(ig.game.alertDialog.open("These cannot be included: "+ml.Misc.O5563(d)+"."),ig.game.sounds.nocando.play()):this.thingReferencesDialog.addItem(a,b)}else"transforming"==this.data.type&&(d="STACKHOLD EQUIPMENT EMITTER CONSUMAB AIMABLE HOOK LINER READABLE STACKWEARB MNTGROUND MNTAIR MEDIUM".split(" "),0<=d.indexOf(c)?this.thingReferencesDialog.addItem(a,b):(ig.game.alertDialog.open("Only these can be included: "+
ml.Misc.O5563(d)+"."),ig.game.sounds.nocando.play()));else if("interactiveEnvironment"==this.data.type&&"pickGetId"==ig.game.alertDialog.contextId)ig.game.alertDialog.isOpen&&ig.game.alertDialog.close(),b=ig.game.O4261.getItemBasic(a,"ui_pnt2"),c=ig.game.O4507(ig.game.attachmentManager.O5888),0<=c.indexOf(b.base)?(this.data.prop.getId=a,ig.game.sounds.success.play()):(ig.game.alertDialog.open("Only these are allowed: "+ml.Misc.O5563(c)+"."),ig.game.alertDialog.contextId="pickGetId",ig.game.sounds.nocando.play());
else if("pickSoundId"==ig.game.alertDialog.contextId)if(ig.game.alertDialog.isOpen&&ig.game.alertDialog.close(),b=ig.game.O4261.getItemBasic(a,"ui_pnt3"),"SOUND"==b.base||b.soundId){var e="SOUND"==b.base?a:b.soundId;this.data.prop.soundId=e;ig.game.sounds.success.play();setTimeout(function(){ig.game.sounds.O9961(e)},500)}else ig.game.alertDialog.open("Only type Sound or an item with sound can be added."),ig.game.alertDialog.contextId="pickSoundId",ig.game.sounds.nocando.play();else"gatherable"==this.data.type&&
"pickHasId"==ig.game.alertDialog.contextId?(ig.game.alertDialog.isOpen&&ig.game.alertDialog.close(),b=ig.game.O4261.getItemBasic(a,"ui_pnt4"),c=["STACKHOLD","EQUIPMENT","CONSUMAB","STACKINSTR"],0<=c.indexOf(b.base)?(this.data.prop.hasId=a,ig.game.sounds.success.play()):(ig.game.alertDialog.open("Only these are allowed: "+ml.Misc.O5563(c)+"."),ig.game.alertDialog.contextId="pickHasId",ig.game.sounds.nocando.play())):"mover"==this.data.type&&"pickHoldableId"==ig.game.alertDialog.contextId?(ig.game.alertDialog.isOpen&&
ig.game.alertDialog.close(),b=ig.game.O4261.getItemBasic(a,"ui_pnt5"),c=["EQUIPMENT"],0<=c.indexOf(b.base)?(this.data.prop.holdableId=a,ig.game.sounds.success.play()):(ig.game.alertDialog.open("Only these are allowed: "+ml.Misc.O5563(c)+"."),ig.game.alertDialog.contextId="pickHoldableId",ig.game.sounds.nocando.play())):"mover"==this.data.type&&"pickWearableId"==ig.game.alertDialog.contextId?(ig.game.alertDialog.isOpen&&ig.game.alertDialog.close(),b=ig.game.O4261.getItemBasic(a,"ui_pnt6"),c=["STACKWEAR"],
0<=c.indexOf(b.base)?(this.data.prop.wearableId=a,ig.game.sounds.success.play()):(ig.game.alertDialog.open("Only these are allowed: "+ml.Misc.O5563(c)+"."),ig.game.alertDialog.contextId="pickWearableId",ig.game.sounds.nocando.play())):"dynamicThing"==this.data.type&&"pickEmits"==ig.game.alertDialog.contextId?(ig.game.alertDialog.isOpen&&ig.game.alertDialog.close(),b=ig.game.O4261.getItemBasic(a,"ui_pnt7"),c=["STACKHOLD"],0<=c.indexOf(b.base)?(this.data.prop.emitsId=a,ig.game.sounds.success.play()):
(ig.game.alertDialog.open("You can only pick type Item."),ig.game.alertDialog.contextId="pickEmits",ig.game.sounds.nocando.play())):"liner"==this.data.type&&"pickEnvironment"==ig.game.alertDialog.contextId?(ig.game.alertDialog.isOpen&&ig.game.alertDialog.close(),b=ig.game.O4261.getItemBasic(a,"ui_pnt8"),"ENVIRONM"==b.base?(this.data.prop.environmentId=a,ig.game.sounds.success.play()):(ig.game.alertDialog.open("You can only pick type Environment."),ig.game.alertDialog.contextId="pickEnvironment",ig.game.sounds.nocando.play())):
this.data.type&&this.types[this.data.type].O3397&&"motionId"==ig.game.alertDialog.contextId&&(ig.game.alertDialog.isOpen&&ig.game.alertDialog.close(),b=ig.game.O4261.getItemBasic(a,"ui_pnt9"),c=["MOTION"],0<=c.indexOf(b.base)?(this.data.prop.motionId=a,ig.game.sounds.success.play()):(ig.game.alertDialog.open("Only type Motion is allowed"),ig.game.alertDialog.contextId="motionId",ig.game.sounds.nocando.play()))}else ig.game.O1002.O7063();this.O2086()},O2493:function(){ig.game.alertDialog.contextId=
null;var a=ml.Misc.O7579(),b=this.data.prop.secPerTransform?this.data.prop.secPerTransform:a;a={seconds:1,minutes:60,hours:3600};var c="",d=a.seconds;parseInt(b/a.hours)==b/a.hours?d=a.hours:parseInt(b/a.minutes)==b/a.minutes&&(d=a.minutes);c=c+'<p>After being placed, transform to next cell in</p><p><input type="text" value="'+(ig.game.strings.O9955(b/d)+'" id="secondsPerTransform" maxLength="'+String(ml.Misc.O9552()).length+'" size="5"/>&nbsp;');c+='<select id="secondsPerTransformMultiplier">';for(var e in a)b=
a[e],c+='<option value="'+b+'"'+(b==d?' selected="selected"':"")+">"+e.toUpperCase()+"</option>";ig.game.alertDialog.open({html:c+"</select></p>",O9267:ig.game.painter.O1789})},O1789:function(){var a=ig.game.painter,b=ml.Misc.O7579(),c=parseInt(jQuery("#secondsPerTransformMultiplier").val()),d=jQuery("#secondsPerTransform").val();d&&""!=d&&parseInt(d)!=d&&ig.game.sounds.nocando.play();d&&""!=d&&parseInt(d)==d?(c=ml.Misc.O7579(parseInt(d)*c),a.data.prop.secPerTransform=c==b?null:c):a.data.prop.secPerTransform=
null},O5933:function(a){var b=ig.game.painter;ig.game.strings.O2646(a)&&(a=null);b.data.prop.useKeyword=a;b.O2086();ig.game.sounds.success.play()},O1836:function(a){var b=ig.game.painter;a?(a=b.getValidBackTileCount(a))?(b.data.prop.backTileCount=a,ig.game.sounds.success.play()):ig.game.sounds.nocando.play():""==a&&(b.data.prop.backTileCount=ig.game.holderDialog.O8940(),ig.game.sounds.success.play())},getValidBackTileCount:function(a){var b=null,c=ig.game.holderDialog.O7487;a=ig.game.strings.replaceAll(String(a),
" ","");a=a.split(",");2==a.length&&a[0]==parseInt(a[0])&&a[1]==parseInt(a[1])&&1<=parseInt(a[0])&&parseInt(a[0])<=c&&1<=parseInt(a[1])&&parseInt(a[1])<=c&&(b=String(parseInt(a[0]))+","+String(parseInt(a[1])));return b},O8379:function(a){var b=ig.game.painter;a?(b.data.prop.creditUrl=ig.game.sounds.O7770(a),ig.game.sounds.success.play()):""==a&&(b.data.prop.creditUrl=null,ig.game.sounds.bin.play())},O9035:function(a){var b=ig.game.painter;a&&=a.toLowerCase().trim();ig.game.strings.O2646(a)&&(a=null);
b.data.prop.atKeyword=a;ig.game.sounds.success.play();b.O2086()},O5411:function(a){var b=ig.game.painter,c=!1;a&&=ig.game.strings.replaceAll(a,"%","");a&&""!=a?a&&parseInt(a)==a&&(a=parseInt(a),0<=a&&100>=a&&(b.data.prop.protectPercent=a,c=!0)):c=!0;c?ig.game.sounds.success.play():ig.game.sounds.nocando.play();b.O2086()},handlePasteMedium:function(){var a=this.data.prop&&this.data.prop.url?this.data.prop.url:"",b=this;ig.game.alertDialog.O5816("Paste URL from YouTube, Snapshots, Writables"+(5<=ig.game.O1257.rank?
", SoundCloud or Imgur":" or SoundCloud")+":",a,function(c){""!=c&&null!=c&&c!=a&&(0<=String(c).toLowerCase().indexOf("soundonly=")&&(c=""),c&&0<=c.indexOf("vimeo.com")?(ig.game.sounds.nocando.play(),ig.game.alertDialog.open("This URL is not supported at the moment.")):5>ig.game.O1257.rank&&c&&0<=c.indexOf("imgur.com")?ig.game.sounds.nocando.play():ig.game.mediaDialog.O8373(c)?(b.data.prop.url=String(c),ig.game.sounds.success.play()):(ig.game.sounds.nocando.play(),ig.game.alertDialog.open("This URL is not supported at the moment.")))})},
O8162:function(){var a=this.data.prop&&this.data.prop.url?this.data.prop.url:"",b=this;ig.game.alertDialog.O5816("Paste a location URL:",a,function(c){""!=c&&null!=c&&c!=a&&(c=b.getIdFromPointerUrl(c),b.O8886(c)?(b.data.prop.url=String(c),ig.game.sounds.success.play()):(ig.game.sounds.nocando.play(),ig.game.alertDialog.open("This URL is not a finder URL like https://thingistan.com/#...")))})},getIdFromPointerUrl:function(a){if("string"==typeof a&&(0===a.indexOf("http://thingistan.com/")||0===a.indexOf("https://thingistan.com/"))){var b=
a.indexOf("#");a=a.substr(b+1);10!=a.length&&(a=null)}return a},O8886:function(a){return"string"==typeof a&&10==a.length},O8512:function(a){var b=this.O2576-ig.game.avatarBaseSize.y,c=a.y?a.y:0,d=a.rotation?a.rotation:0;this.avatarTemplatePosition.x=this.O8848(this.avatarTemplatePosition.x+1*(a.x?a.x:0),0,this.tileWidth-ig.game.avatarBaseSize.x);this.avatarTemplatePosition.y=this.O8848(this.avatarTemplatePosition.y+1*c,0,b);this.avatarTemplatePosition.rotation=this.O8848(45*d,0,360)},O8848:function(a,
b,c){return Math.min(c,Math.max(b,a))},O7502:function(a){this.O4389!=this.transparentIndex&&(this.data.colors[this.O4389]=a,this.O2086(),this.O6861(this.O4389),this.O3490())},O5065:function(a){this.O5813=!0;if(this.types[this.data.type].O2711)this.data.direction++,this.data.direction>this.O7106-1&&(this.data.direction=0);else if(a=this.types[this.data.type].limitedDirections)for(var b=0;b<a.length;b++){if(a[b]==this.data.direction){this.data.direction=b+1<a.length?a[b+1]:a[0];break}}else this.data.direction++,
this.data.direction>this.directionMax-1&&(this.data.direction=0);this.O3315(50);ig.game.sounds.click.play();this.update()},O6922:function(){ig.game.painter.close()},close:function(a){ig.game.alertDialog.isOpen&&ig.game.alertDialog.close();var b=!0,c=ig.game.painter.interactingDialog&&ig.game.painter.interactingDialog.isOpen||ig.game.painter.thingReferencesDialog&&ig.game.painter.thingReferencesDialog.isOpen;a||!c&&!ig.game.painter.O6804()||(b=!1,ig.game.alertDialog.O2766("Really close?",function(){ig.game.painter.close(!0)}));
b&&(ig.game.painter.O6350(),ig.game.painter.O7061&&(clearInterval(ig.game.painter.O7061),ig.game.painter.O7061=void 0),ig.game.painter.interactingDialog&&ig.game.painter.interactingDialog.isOpen&&ig.game.painter.O5781(),ig.game.painter.thingReferencesDialog&&ig.game.painter.thingReferencesDialog.isOpen&&ig.game.painter.O4412(),ig.game.painter.O2741(),ig.game.painter.O4411());b&&ig.game.O3957&&(ig.game.O3957.O8855("created"),ig.game.O3957.close());return b},O2741:function(){this.context&&(this.O3363(!0,
!0,void 0,!0),this.clearTimeouts(),this.canvas&&(this.canvas.style.display="none"),this.O3942(),this.O2190="default",this.O9074(),this.O7702(),this.isRunning=!1,this.O8351(),ig.game.O1795=ig.game.O1257.O1795=!1,this.O9227(),ig.game.userScriptEditor&&ig.game.userScriptEditor.close())},clearTimeouts:function(){for(var a in this.timeouts)null!=this.timeouts[a]&&(clearTimeout(this.timeouts[a]),this.timeouts[a]=null)},O5100:function(){this.O9598();this.O3315(50);for(var a=this.O7759(this.types[this.data.type].parent),
b=0;b<a.length;b++)if(a[b]==this.data.type){this.O7969(a[b<a.length-1?b+1:0],!0);this.update();break}},O9470:function(){if(this.data.prop.thingRefs&&"interacting"==this.data.type&&this.data.prop.textData)for(var a=this.data.prop.textData.toLowerCase(),b=this.data.prop.thingRefs.length-1;0<=b;b--){var c=this.data.prop.thingRefs[b];c&&c[1]&&(c=c[1].toLowerCase(),-1===a.indexOf(c)&&this.data.prop.thingRefs.splice(b,1))}},O3669:function(){if(this.data.prop.textData){var a=!1,b=this.data.prop.textData.toLowerCase();
if(0<=b.indexOf("/harms ")||0<=b.indexOf("/harm "))a=!0;else if(0<=b.indexOf("/places ")||0<=b.indexOf("/place "))a=!0;else if(0<=b.indexOf("/to "))a=!0;else if(0<=b.indexOf("/embed ")||0<=b.indexOf("/embeds "))a=!0;else if(0<=b.indexOf("/rumbles ")||0<=b.indexOf("/rumble "))a=!0;else if(ig.game.O2116.O9228(this.data.prop.reactsTo))a=!0;else if(this.data.prop.thingRefs)for(b=0;b<this.data.prop.thingRefs.length;b++){var c=ig.game.O4261.getItemBasic(this.data.prop.thingRefs[b][0],"ui_pnt1");if(c&&ig.game.O2082.O2732(c.attributes)){a=
!0;break}}a?(this.data.prop.attributes||(this.data.prop.attributes=[]),-1===this.data.prop.attributes.indexOf("canHarmOrHasHighImpact")&&this.data.prop.attributes.push("canHarmOrHasHighImpact")):this.data.prop.attributes&&(a=this.data.prop.attributes.indexOf("canHarmOrHasHighImpact"),0<=a&&this.data.prop.attributes.splice(a,1))}},O7295:function(){var a=!0,b=[];this.O5781();this.O4412();if("interacting"==this.data.type&&(this.O9470(),this.O3669(),this.data.prop.textData)){var c=this.data.prop.textData.toLowerCase();
(0<=c.indexOf("/embed ")||0<=c.indexOf("/embeds "))&&5>ig.game.O1257.rank&&(a=!1,b.push("Embeddings are deprecated."))}c=1;this.data&&this.data.type&&(this.types[this.data.type].O2135?c=this.O6199:this.types[this.data.type].O8687&&(c=ig.game.O1828));if(1>=ig.game.O1257.rank)for(var d=0;d<c&&a;d++)a=this.O6647(d);!ig.ua.isSteamBigPictureMode||null!=this.data.name&&""!=this.data.name||(this.data.name="unnamed");if(null==this.data.name||""==this.data.name)a=!1,jQuery("#"+this.O5991).attr("placeholder",
"SET NAME"),jQuery("#"+this.O5991).addClass("missingValueInputBox");null==this.data.type&&(a=!1,this.context.fillStyle=this.O1944,this.fillRect(this.areas.changeType.x1,this.areas.changeType.y1,this.areas.changeType.width,this.areas.changeType.height),this.context.font=this.O3565,this.context.fillStyle="rgb(200,50,50)",this.fillText("SET TYPE",this.areas.changeType.x1+this.areas.textBoxPadding.x1,this.areas.changeType.y1+this.areas.textBoxPadding.y1+this.O9897));"environment"==this.data.type&&this.data.prop.soundId&&
-1===this.data.prop.attributes.indexOf("soundscape")&&delete this.data.prop.soundId;if(a){!this.O5813&&0==this.data.direction&&this.O9669();this.O2404(c);this.O2778();a&&((a=this.O6613())||b.push("Please make this creation more visible."));a&&0<=["emitter","aimable"].indexOf(this.data.type)&&((a=4<=this.O2403(1))||b.push("Please make the second cell more visible."));c=null;this.data.type&&this.types[this.data.type].O3866&&(c=this.O2963());!(a&&0<=["mountableGround","mountableAir","emitter","aimable"].indexOf(this.data.type))||
this.O9884(0)&&this.O9884(1)||(a=!1,b.push("Please draw in both cells."));!(a&&0<=["holder"].indexOf(this.data.type))||this.O9884(0)&&this.O9884(1)&&this.O9884(2)||(a=!1,b.push("Please draw in all cells."));d="wearable interacting interactingMotion holder dynamicThing happening farBack thing thingFront lively thingBack furry clothy drifty generator".split(" ");a&&-1===d.indexOf(this.data.type)&&((a=this.O8625())||b.push("Please draw larger."));a&&c&&((a=this.O3959(c))||b.push("Please connect person and mountable."));
a&&0<=["wearable","lively","gatherable","multithing"].indexOf(this.data.type)&&!this.O9884(1)?a=confirm("Second cell is empty. Save anyway?"):a&&0<=["motion","interactingMotion","holder"].indexOf(this.data.type)&&this.O9884(0)&&!this.O9884(1)&&(a=confirm("Second cell is empty. Save anyway?"));a&&0<=["emitter","aimable"].indexOf(this.data.type)&&(d=this.O9118(1),this.data.prop.boundingBox2=[d.x1,d.y1,d.x2,d.y2]);a&&0<=["interacting","interactingMotion"].indexOf(this.data.type)&&this.data.prop.attributes&&
0<=this.data.prop.attributes.indexOf("solid")&&(d=this.O9118(0),this.data.prop.boundingBox=[d.x1,d.y1,d.x2,d.y2]);!a||"music"!=this.data.type||this.data.prop&&this.data.prop.musicData||(this.O9486(),a=!1);!a||"readable"!=this.data.type||this.data.prop&&this.data.prop.textData||(2<=ig.game.O1257.rank?(ig.game.alertDialog.O5816(null,"",ig.game.painter.textDataSaved,null,!0),ig.game.sounds.nocando.play()):ig.game.O1002.O7063(),a=!1);!a||"dynamicThing"!=this.data.type&&"mover"!=this.data.type&&"farBack"!=
this.data.type||this.data.prop&&this.data.prop.text||(ig.game.alertDialog.O5816(null,"",ig.game.painter.O7542,null,!0),ig.game.sounds.nocando.play(),a=!1);if(a&&"interacting"==this.data.type)if(!this.data.prop||!this.data.prop.textData)this.interactingDialog||(this.interactingDialog=new InteractingDialog),this.interactingDialog.isOpen||this.interactingDialog.open(""),this.O2086(),ig.game.sounds.nocando.play(),a=!1;else if(0<=this.data.prop.textData.toLowerCase().indexOf("/embed")||0<=this.data.prop.textData.toLowerCase().indexOf("/ embed"))ig.game.alertDialog.O3813("Sorry, using /embeds is deprecated"),
a=!1;a&&"interactiveEnvironment"==this.data.type&&(this.data.prop&&this.data.prop.atKeyword?this.data.prop&&this.data.prop.getId||(ig.game.alertDialog.open("Please pick something for Get"),a=!1):(ig.game.alertDialog.open("Please pick something for At"),a=!1));a&&(0<=["medium","pointer"].indexOf(this.data.type)?this.data.prop&&this.data.prop.url||(a=!1,"medium"==this.data.type?this.handlePasteMedium():"pointer"==this.data.type&&this.O8162()):this.data.prop&&this.data.prop.url&&delete this.data.prop.url);
if(a){if(this.types[this.data.type].O2867&&(this.O5881(),this.maxCells=this.data.pixels.length),"viewable"==this.data.type||"glow"==this.data.type?(this.selectedCell=0,this.O8450(-9,-9),this.O2248()):"holder"==this.data.type&&(this.selectedCell=2,this.O8450(-5,-10),this.O2248(),this.selectedCell=0),d=ig.game.O4507(this.data),c&&(d.prop||(d.prop={}),d.prop.offset=ig.game.O4507(c)),this.O2691(d),d.prop)(d.prop.musicData||null==d.prop.musicData||d.prop.musicData=={})&&"music"!=this.data.type&&delete d.prop.musicData,
(d.prop.textData||null==d.prop.textData||""==d.prop.textData||d.prop.textData=={})&&-1==="readable interacting brain changer happening generator".split(" ").indexOf(this.data.type)&&delete d.prop.textData,"changer"==this.data.type&&ig.game.userScriptEditor&&(d.prop.textData=ig.game.userScriptEditor.O1211()),a&&0<=["brain","changer","happening","generator"].indexOf(this.data.type)&&(b=ig.game.brainManager.O9546(d.prop.textData))&&(html="<p>Oops, there's something wrong with the code...</p><p>"+ig.game.strings.O9955(b)+
"</p>",ig.game.alertDialog.open(html,!0),a=!1),d.prop.hasId&&-1===["gatherable"].indexOf(this.data.type)&&delete d.prop.hasId,d.prop.emitsId&&-1===["dynamicThing"].indexOf(this.data.type)&&delete d.prop.emitsId,(!d.prop.holdableId||d.prop.holdableId&&-1===["mover"].indexOf(this.data.type))&&delete d.prop.holdableId,(!d.prop.wearableId||d.prop.wearableId&&-1===["mover"].indexOf(this.data.type))&&delete d.prop.wearableId,(!d.prop.protectPercent||d.prop.protectPercent&&-1===["mover"].indexOf(this.data.type))&&
delete d.prop.protectPercent,d.prop.environmentId&&-1===["liner"].indexOf(this.data.type)&&delete d.prop.environmentId,(d.prop.text||null==d.prop.text||""==d.prop.text||d.prop.text=={})&&-1===["dynamicThing","mift","mover","farBack"].indexOf(this.data.type)&&delete d.prop.text,(d.prop.thingRefs||null==d.prop.thingRefs)&&"interacting"!=this.data.type&&"transforming"!=this.data.type&&delete d.prop.thingRefs,(""==d.prop.creditUrl||null==d.prop.creditUrl||d.prop.creditUrl&&"sound"!=this.data.type)&&delete d.prop.creditUrl,
(""==d.prop.noteDelayMS||null==d.prop.noteDelayMS||d.prop.noteDelayMS&&"musicSheet"!=this.data.type)&&delete d.prop.noteDelayMS,(d.prop.reactsTo||null==d.prop.reactsTo)&&"interacting"!=this.data.type&&delete d.prop.reactsTo,"interacting"==this.data.type&&d.prop.textData&&ig.game.O2116.O9228(d.prop.reactsTo)&&d.prop.textData.length>this.O1171&&(a=!1,ig.game.alertDialog.open("When using the Someone keyword, please use "+this.O1171+" characters or less."),ig.game.sounds.nocando.play()),"mift"==this.data.type?
d.prop.toId?d.prop.text||(a=!1,ig.game.alertDialog.O5816("Your message:","",ig.game.painter.O7542,null,!0,!1,void 0,void 0,this.O4635,!0),ig.game.sounds.nocando.play()):(a=!1,ig.game.friendsDialog.open(),ig.game.sounds.nocando.play()):delete d.prop.toId,a&&(this.canvas&&(this.canvas.style.display="none"),ig.game.sounds.click.play(),"interacting"==this.data.type?ig.game.O2116.O2792(d.prop.textData)?d.prop.checksNears=!0:delete d.prop.checksNears:delete d.prop.checksNears,d.prop.attributes&&!ig.game.O2082.info[this.types[this.data.type].key]&&
delete d.prop.attributes,d.prop.useKeyword||delete d.prop.useKeyword,(!d.prop.backTileCount||d.prop.backTileCount==ig.game.holderDialog.O8940())&&delete d.prop.backTileCount,d.prop.hasId||delete d.prop.hasId,d.prop.emitsId||delete d.prop.emitsId,d.prop.atKeyword||delete d.prop.atKeyword,d.prop.environmentId||delete d.prop.environmentId,(d.prop.useKeyword||null==d.prop.useKeyword)&&-1===["interactiveEnvironment","gatherable","crumbling","holder","mover"].indexOf(this.data.type)&&delete d.prop.useKeyword,
(d.prop.backTileCount||null==d.prop.backTileCount)&&-1===["holder"].indexOf(this.data.type)&&delete d.prop.backTileCount,(!d.prop.motionId||!this.types[this.data.type].O3397)&&delete d.prop.motionId,(d.prop.atKeyword||null==d.prop.atKeyword)&&-1==["interactiveEnvironment","liner"].indexOf(this.data.type)&&delete d.prop.atKeyword,(d.prop.getId||null==d.prop.getId)&&"interactiveEnvironment"!=this.data.type&&delete d.prop.getId,(d.prop.boundingBox2||null==d.prop.boundingBox2)&&"emitter"!=this.data.type&&
"aimable"!=this.data.type&&delete d.prop.boundingBox2,(d.prop.boundingBox||null==d.prop.boundingBox)&&!(0<=["interacting","interactingMotion"].indexOf(this.data.type)&&this.data.prop.attributes&&0<=this.data.prop.attributes.indexOf("solid"))&&delete d.prop.boundingBox,d.prop.offset&&-1===["mountableGround","mountableAir"].indexOf(this.data.type)&&delete d.prop.offset,this.O6350(),d.prop.clonedFrom||delete d.prop.clonedFrom,d.prop.changerId||delete d.prop.changerId,delete d.prop.textSize,"music"==
this.data.type&&(ig.game.musicRecorder.O7090(),ig.game.O7763.O7090()),"aimable"!=this.data.type&&delete d.prop.specs,("transforming"!=this.data.type||!d.prop.secPerTransform)&&delete d.prop.secPerTransform,"writable"!=this.data.type||ig.game.isEditorHere?(this.types[this.data.type].O2711?(d.prop||(d.prop={}),d.prop.throwDirection=parseInt(d.direction),delete d.direction):delete d.prop.throwDirection,this.O7175(d),"musicSheet"==d.type&&(d.colors=this.O5772(d.pixels,d.colors)),this.O9631(d),this.O9594(d),
d.type=this.types[this.data.type].key,(!d.prop.soundId||d.prop.soundId&&-1===this.O9027.indexOf(d.type))&&delete d.prop.soundId,this.O5501(d),ig.game.O2082.O1835(d),this.O8351(),this.O9693(d)):ig.game.sounds.nocando.play())}else ig.game.sounds.nocando.play(),1<=b.length&&ig.game.alertDialog.open(b.join(" "))}else ig.game.sounds.nocando.play(),1<=b.length&&ig.game.alertDialog.open(b.join(" "))},O5772:function(a,b){b=ig.game.O4507(b);for(var c=0;c<this.instruments.length;c++)b[c]&&255==b[c].r&&255==
b[c].g&&255==b[c].b&&1==b[c].alpha&&this.O2454(a,c)&&(b[c].r-=c,b[c].g-=c,b[c].b-=c);return b},O2454:function(a,b){var c=!1;if(a&&a[0]&&void 0!==a[0][0])for(var d=a[0].length,e=a[0][0].length,f=0;f<a.length&&!c;f++)for(var g=0;g<d&&!c;g++)for(var h=0;h<e&&!c;h++)c=a[f]&&a[f][g]&&a[f][g][h]==b;return c},O7175:function(a){switch(this.data.type){case "mift":a.ext={};a.ext.toId=a.prop.toId;a.ext.text=a.prop.text;a.ext.isPrivate=a.prop.attributes&&0<=a.prop.attributes.indexOf("private");delete a.prop.toId;
delete a.prop.text;break;case "writable":a.ext={name:ig.game.validations.itemName.clean(this.data.name),rgbBackground:this.data.colors[0]?this.O4393(this.data.colors[0]):"255,255,255",rgbText:this.data.colors[1]?this.O4393(this.data.colors[1]):"0,0,0",areaGroupId:ig.game.areaGroupId,rights:parseInt(this.O9231)}}},O9693:function(a){if(!this.O1143){var b=this;this.O1143=!0;var c=a.type,d=!(!a.prop||!a.prop.clonedFrom),e=!!("INTERACT"==a.type&&a.prop&&a.prop.textData&&0<=a.prop.textData.toLowerCase().indexOf("someone jumps")),
f=!!("MNTAIR"==a.type&&a.prop&&a.prop.attr&&0<=a.prop.attr.indexOf(ig.game.O2082.info.MNTAIR.colorTrail.shortkey));a.pixels=ig.game.strings.O2608(JSON.stringify(a.pixels));a=ig.game.O9817.O7707(a,this);a.done(function(g){var h=g.itemId,k=g.transactionId;h?(this.O2741(),this.O4411(),ig.game.O7747.O7567(h),ig.game.O1189.register(ig.game.O1189.types.SAVED_CREATION),d&&ig.game.O1189.register(ig.game.O1189.types.SAVED_CLONED_CREATION),e&&ig.game.O1189.register(ig.game.O1189.types.SAVED_SPECIFIC_INTERACTING),
f&&ig.game.O1189.register(ig.game.O1189.types.SAVED_SPECIFIC_FLYING_MOUNT),b.O4897&&("MULTITHING"==c&&b.O2388(b.O2483,h),b.O4897=!1),k&&(1<ig.game.O1257.rank||0<=ig.game.O1257.screenName.toLowerCase().indexOf("test"))&&!ig.ua.steam&&(localStorage.skipNextAd=!0,ig.game.iapManager.O1337(k))):g.quotaOk?console.log("Unknown O9693 response"):console.log("Submission rejected : over-quota");b.O1143=!1});a.fail(function(){ig.game.errorManager.O3802("Oops, error saving creation. A backup should load next time you open the creator.");
b.O1143=!1})}},O2388:function(a,b){ig.game.O9817.O1311(a).done(function(c){c&&c.data&&(c.data.staticItemsPropIndexAndXY||(c.data.staticItemsPropIndexAndXY=[]),c.data.movableItemsPropIndexAndXY||(c.data.movableItemsPropIndexAndXY=[]),ig.game.O9817.O2557(b,c.data).done(function(d){console.log("savedData",d)}))})},O5501:function(a){if(a&&a.prop&&a.prop.attributes){var b=a.prop.attributes,c=b.indexOf("autoSpeedFast");0<=c&&-1===b.indexOf("autoSpeedLeft")&&-1===b.indexOf("autoSpeedRight")&&-1===b.indexOf("autoSpeedUp")&&
-1===b.indexOf("autoSpeedDown")&&a.prop.attributes.splice(c,1)}},O2691:function(a){if(this.data.type)if(0<=["motion","interactingMotion","holder"].indexOf(this.data.type))for(var b=3;b<a.pixels.length;b++)a.pixels[b]=null;else if(!this.types[this.data.type].O2867){if(!this.types[this.data.type].O8687)for(b=2;b<a.pixels.length;b++)a.pixels[b]=null;!this.types[this.data.type].O8687&&!this.types[this.data.type].O2135&&a.pixels[1]&&(a.pixels[1]=null)}},O9594:function(a){for(var b=a.pixels.length-1;0<=
b;b--)a.pixels[b]||a.pixels.splice(b,1)},O9631:function(a){for(var b=this.O5320(this.O9632()),c=a.colors.length-1;1<=c&&this.O5320(a.colors[c])==b&&!this.O2454(a.pixels,c);c--)a.colors.pop();return a},O3959:function(a){var b=!0,c=this.data.pixels[0].length,d=this.data.pixels[0][0].length;if(22<a.x||29<a.y||0>a.x+c||0>a.y+d)b=!1;return b},O2963:function(){var a=this.O6832();return{x:a.x-this.avatarTemplatePosition.x,y:a.y-this.avatarTemplatePosition.y}},O6832:function(){for(var a={x:null,y:null},b=
0;b<this.data.pixels.length;b++)for(var c=0;c<this.data.pixels[b].length;c++)for(var d=0;d<this.data.pixels[b][c].length;d++)if(this.data.pixels[b][c][d]!=this.transparentIndex){if(null==a.x||c<a.x)a.x=c;if(null==a.y||d<a.y)a.y=d}return a},O5881:function(){var a=this.O6394;this.data.pixels.splice(a,this.data.pixels.length-a)},O2248:function(){for(var a=0;a<this.tileWidth;a++)for(var b=0;b<this.O2576;b++)if(a>=this.O5039||b>=this.O5017)this.data.pixels[this.selectedCell][a][b]=this.transparentIndex},
O9669:function(){var a=["slope","slideySlope","passableSlope","tiltedBouncy"];if(this.data.type&&0<=a.indexOf(this.data.type)){a=[this.O2364()];for(var b=1;b<this.directionMax;b++)a[b]=this.O4244(a[b-1]);var c=null,d=0;for(b=0;b<this.directionMax;b++){var e=this.O2108(a[b]);if(null==c||e>c)c=e,d=b}this.data.direction=d}},O2730:function(a){for(var b=0;b<this.tileWidth;b++)for(var c=0;c<this.O2576;c++)this.data.pixels[this.selectedCell][b][c]=a[b][c];this.O2086()},O2108:function(a){for(var b=0,c=0;c<
this.tileWidth;c++)for(var d=0;d<this.O2576;d++){var e=this.data.pixels[this.selectedCell][c][d];a[c][d]!=this.transparentIndex&&this.data.colors[e]&&this.data.colors[e].alpha&&(b+=this.data.colors[e].alpha)}return b},O2364:function(){for(var a=this.O4281(),b=this.tileWidth-1,c=0;c<this.O2576;c++){for(var d=b;d<this.tileWidth;d++)a[d][c]=this.transparentIndex-1;0<b&&b--}return a},O6613:function(){var a=!0;if(this.data.type&&this.types[this.data.type].O5930){var b=0,c=0;for(a=0;a<this.data.pixels.length;a++)for(var d=
0;d<this.tileWidth;d++)for(var e=0;e<this.O2576;e++)if(this.data.pixels[a]&&this.data.pixels[a][d]&&void 0!==this.data.pixels[a][d][e]){var f=this.data.pixels[a][d][e];if(null!=f||void 0!=f)f=this.data.colors[f],1==f.alpha?b++:0<f.alpha&&c++}a=2<=ig.game.O1257.rank?5:15;0<="light lighttop vignette fillLight music environment lively holder".split(" ").indexOf(this.data.type)&&(a=5);(a=b>=a)&&"deadlyEmerge"==this.data.type&&(a=20<=b&&0==c)}return a},O2403:function(a){for(var b=0,c=0;c<this.tileWidth;c++)for(var d=
0;d<this.O2576;d++){var e=this.data.pixels[a][c][d];null==e&&void 0==e||1!=this.data.colors[e].alpha||b++}return b},O8625:function(){var a=!0,b=this.types[this.data.type].O9925;if(b&&(b.width!=this.O5039||b.height!=this.O5017||this.data.type=="holdableItem"||this.data.type=="emitter"||this.data.type=="equipment"||this.data.type=="consumable"||this.data.type=="hook"||this.data.type=="wearable"||this.data.type=="body"||this.data.type=="aimable"||this.data.type=="thing")&&this.data.type!="motion"){b=
this.O1028();var c=this.O9482;this.data.type=="body"?c=this.O6463:this.data.type=="mountableAir"?c=this.O4299:this.data.type=="thing"&&(c=this.O9928);b.x2-b.x1+1>=c&&b.y2-b.y1+1>=c?this.types[this.data.type].O6611&&this.O8102(b):a=!1}return a},O8102:function(a){this.tileWidth=a.x2-a.x1+1;this.O2576=a.y2-a.y1+1;for(var b=0;b<this.maxCells&&this.data.pixels[b];b++){for(var c=this.O4281(),d=0;d<this.tileWidth;d++)for(var e=0;e<this.O2576;e++)c[d][e]=this.data.pixels[b][d+a.x1][e+a.y1];this.data.pixels[b]=
this.O5266(c)}this.tileWidth=this.types[this.data.type].O9925.width;this.O2576=this.types[this.data.type].O9925.height},O1028:function(){for(var a={x1:null,y1:null,x2:null,y2:null},b=0;b<this.maxCells;b++)for(var c=0;c<this.tileWidth;c++)for(var d=0;d<this.O2576;d++)if(this.data.pixels[b]&&this.data.pixels[b][c]&&this.data.pixels[b][c][d]!==void 0&&this.data.pixels[b][c][d]!=this.transparentIndex){if(a.x1==null||c<a.x1)a.x1=c;if(a.x2==null||c>a.x2)a.x2=c;if(a.y1==null||d<a.y1)a.y1=d;if(a.y2==null||
d>a.y2)a.y2=d}return a},O9118:function(a){for(var b={x1:null,y1:null,x2:null,y2:null},c=0;c<this.data.pixels[a].length;c++)for(var d=0;d<this.data.pixels[a][0].length;d++)if(this.data.pixels[a][c][d]!=this.transparentIndex){if(null==b.x1||c<b.x1)b.x1=c;if(null==b.x2||c>b.x2)b.x2=c;if(null==b.y1||d<b.y1)b.y1=d;if(null==b.y2||d>b.y2)b.y2=d}return b},O2404:function(a){if(null!=this.data.direction&&0<this.data.direction&&!this.types[this.data.type].O2711)for(var b=this.data.direction+0;0<b;b--)for(var c=
0;c<a;c++)this.data.pixels[c]=this.O1516(this.data.pixels[c])},O2778:function(){for(var a=0;a<this.maxCells;a++)for(var b=0;b<this.tileWidth;b++)for(var c=0;c<this.tileWidth;c++)this.data.pixels[a]&&this.data.pixels[a][b]&&void 0!=this.data.pixels[a][b][c]&&null!=this.data.pixels[a][b][c]&&(this.data.pixels[a][b][c]=parseInt(this.data.pixels[a][b][c]));for(a=0;a<this.maxColors;a++){if(void 0==this.data.colors[a]||null==this.data.colors[a])this.data.colors[a]=this.O9632(a);this.data.colors[a].r=parseInt(this.data.colors[a].r);
this.data.colors[a].g=parseInt(this.data.colors[a].g);this.data.colors[a].b=parseInt(this.data.colors[a].b);null!=this.data.colors[a].alpha&&void 0!=this.data.colors[a].alpha&&(this.data.colors[a].alpha=parseFloat(this.data.colors[a].alpha))}},O2511:function(a){void 0===a&&(a=this.selectedCell);for(var b={top:!1,right:!1,bottom:!1,left:!1},c=0;c<this.tileWidth&&!b.top;c++)b.top=this.data.pixels[a][c][0]!=this.transparentIndex;for(c=0;c<this.tileWidth&&!b.bottom;c++)b.bottom=this.data.pixels[a][c][this.O2576-
1]!=this.transparentIndex;for(c=0;c<this.O2576&&!b.left;c++)b.left=this.data.pixels[a][0][c]!=this.transparentIndex;for(c=0;c<this.O2576&&!b.right;c++)b.right=this.data.pixels[a][this.tileWidth-1][c]!=this.transparentIndex;return b},O6647:function(a){var b=!0,c=null!=this.data.type&&null!=this.types[this.data.type].O5534?this.types[this.data.type].O5534:4;0!=c&&(a=this.O2511(a),b=(a.top?1:0)+(a.right?1:0)+(a.bottom?1:0)+(a.left?1:0),b="body"==this.data.type?a.bottom:b>=c,b||(this.update(),"body"==
this.data.type?this.O7289(!1,!1,!0,!1):this.O7289(!a.top,!a.right,!a.bottom,!a.left),"default"==this.mode&&this.drawImageWithAlpha(this.O9863(),this.areas.drawBigMessage.x1,this.areas.drawBigMessage.y1,this.drawImageMessageMaxOpacity)));return b},fadeInDrawBigMessage:function(a){if(this.isRunning&&("default"==this.mode||"pickType"==this.mode)&&(!this.O9884()||a)){this.O6759+=.025;this.clearRect(this.areas.drawBigMessage.x1,this.areas.drawBigMessage.y1,this.areas.drawBigMessage.width,this.areas.drawBigMessage.height);
var b=this.O9863();if(null!=b&&(this.drawImageWithAlpha(b,this.areas.drawBigMessage.x1,this.areas.drawBigMessage.y1,this.O6759),this.O6759<this.drawImageMessageMaxOpacity)){var c=this;this.timeouts.drawBig=setTimeout(function(){c.O6759<c.drawImageMessageMaxOpacity&&c.fadeInDrawBigMessage(a)},50)}}},O9863:function(){switch(this.O1796(this.data.type)){case 0:var a="drawBig5x5";break;case 1:a="drawBig1Border";break;case 2:a="drawBig2Borders";break;case 3:a="drawBig3Borders";break;default:a="drawBig"}return a},
changePreviewColor:function(){var a=this.O3738();if(this.isRunning&&"changeColor"!=this.mode)if(a)this.O8737&&(this.O2905(),this.O8737=!1);else{null==this.O2911&&(this.O2911=[{r:132,g:128,b:121},{r:50,g:149,b:235},{r:41,g:74,b:72},{r:76,g:196,b:90},{r:240,g:238,b:237},{r:230,g:80,b:30},{r:195,g:209,b:42},{r:156,g:102,b:156},{r:12,g:13,b:13},{r:104,g:146,b:150}]);null==this.O1879&&(this.O1879=1,this.previewColor=this.O2911[this.O1879-1]);var b=this.O2911[this.O1879],c=this.previewColor.r,d=this.previewColor.g,
e=this.previewColor.b;this.previewColor.r<b.r?(this.previewColor.r+=2,this.previewColor.r>b.r&&(this.previewColor.r=b.r)):this.previewColor.r>b.r&&(this.previewColor.r-=2,this.previewColor.r<b.r&&(this.previewColor.r=b.r));this.previewColor.g<b.g?(this.previewColor.g+=2,this.previewColor.g>b.g&&(this.previewColor.g=b.g)):this.previewColor.g>b.g&&(this.previewColor.g-=2,this.previewColor.g<b.g&&(this.previewColor.g=b.g));this.previewColor.b<b.b?(this.previewColor.b+=2,this.previewColor.b>b.b&&(this.previewColor.b=
b.b)):this.previewColor.b>b.b&&(this.previewColor.b-=2,this.previewColor.b<b.b&&(this.previewColor.b=b.b));this.context.fillStyle=this.O5320(this.previewColor);this.fillRect(this.areas.preview.x1,this.areas.preview.y1,this.areas.preview.width,this.areas.preview.height);this.previewColor.r==c&&this.previewColor.g==d&&this.previewColor.b==e&&++this.O1879>this.O2911.length-1&&(this.O1879=0);this.O9638()}var f=this;this.timeouts.preview=setTimeout(function(){f.changePreviewColor()},a?1E3:200)},O3738:function(){return!(!this.data.type||
!(0<=this.O4099.indexOf(this.data.type)||this.O3584&&-1===this.typesWithNoLivePreviewEver.indexOf(this.data.type)))},O8958:function(){return!!(this.data.type&&0<=this.O4099.indexOf(this.data.type))},O9638:function(){if(!(0<=["bigThing","veryBigThing"].indexOf(this.data.type)||this.O3738())){this.data.type?this.types[this.data.type].flips&&this.O2498(20)?this.O2152=!this.O2152:this.types[this.data.type].flips?this.types[this.data.type].O2135?this.O2498(20)&&(this.O2737=0==this.O2737?1:0):this.O2737=
0:this.O2152=!1:this.O2737=0;var a=this.data.pixels[this.O2737];this.O2152&&(a=this.O9013(a));var b=this.data.type&&this.types[this.data.type].O3866;"changeColor"!=this.mode&&a&&!b&&this.O4664(a,this.areas.preview.x1,this.areas.preview.y1)}},O4664:function(a,b,c){var d=0,e=0,f=this.tileWidth-1,g=this.O2576-1;19<this.tileWidth&&(d=Math.floor(this.tileWidth/4),f=d+19-1);19<this.O2576&&(e=Math.floor(this.O2576/4),g=e+19-1);for(var h=d;h<=f;h++)for(var k=e;k<=g;k++)this.context.fillStyle=this.O5320(this.data.colors[void 0!=
a[h]&&void 0!=a[h][k]?a[h][k]:this.transparentIndex]),this.fillRect(b+h-d,c+k-e,1,1)},O7289:function(a,b,c,d){var e={r:200,g:50,b:50,alpha:.5},f=this.O4281();if(a){a=0;for(var g=2;g<this.tileWidth-2;g++)f[g][a]==this.transparentIndex&&0==g%2&&(this.O6912(g,a,e),f[g][a]=1)}if(b)for(g=this.tileWidth-1,a=2;a<this.O2576-2;a++)f[g][a]==this.transparentIndex&&0==a%2&&(this.O6912(g,a,e),f[g][a]=1);if(c)for(a=this.O2576-1,g=2;g<this.tileWidth-2;g++)f[g][a]==this.transparentIndex&&0==g%2&&(this.O6912(g,a,
e),f[g][a]=1);if(d)for(g=0,a=2;a<this.O2576-2;a++)f[g][a]==this.transparentIndex&&0==a%2&&(this.O6912(g,a,e),f[g][a]=1)},O6656:function(){var a=this.cursorX,b=this.cursorY;if(this.O6396&&this.O3477)if(this.O1173(a,b,this.areas.typePickerSelections)){if(a=a<=this.areas.typePickerSelections.x1+this.areas.typePickerGrid.width?0:1,b=Math.ceil((b-this.areas.typePickerSelections.y1)/this.areas.typePickerGrid.height)-1,b=this.O5280(a*this.O1613+b),null!=b)if(a=this.types[b].O8137?ig.game.O1257.rank>=this.types[b].O8137:
!0,0>=ig.game.O1257.rank&&(a=!1),a){ig.game.sounds.click.play();if(a=this.O7759(b))b=a[0];this.O7969(b,!0);this.O9488();this.O8880()}else ig.game.O1002.O7063()}else this.O8880(),ig.game.sounds.click.play()},O8347:function(){var a=this.cursorX,b=this.cursorY;!this.O3477||ig.game.alertDialog&&ig.game.alertDialog.isOpen||(this.O1173(a,b,this.areas.typePickerSelections)?(a=this.getAttributeByIndex((a<=this.areas.typePickerSelections.x1+this.areas.typePickerGrid.width?0:1)*this.O1613+(Math.ceil((b-this.areas.typePickerSelections.y1)/
this.areas.typePickerGrid.height)-1)+this.O5205*this.O7126*this.O1613),a!=null&&(b=ig.game.O2082.info[this.types[this.data.type].key][a],b.hidden||b.deprecated&&!(this.data.prop.attributes.indexOf(a)>=0)||(ig.game.sounds.click.play(),this.O3736(a),this.O7098(),this.O9488()))):this.O1173(a,b,this.areas.attributesPager)&&this.O8630?(this.O5205=1==this.O5205?0:1,ig.game.sounds.click.play(),this.O7098()):(this.O8880(),ig.game.sounds.click.play(),this.data.prop&&this.data.prop.attributes&&this.data.prop.attributes.indexOf("toArea")>=
0&&!this.O3031&&(this.O5194(),this.O3031=!0)),this.O2905())},O5194:function(a){var b="";a&&(b+='<p>Oops, area name "'+ig.game.strings.O9955(a)+'" not found.</p>');ig.game.alertDialog.open({html:b+'<p>for the helper\'s name, use "areaname" or "to&nbsp;areaname" (e.g. "to&nbsp;example&nbsp;island").</p>',O3144:!0})},O6870:function(a){var b=!1,c=this.types[this.data.type]&&this.types[this.data.type].key;c&&(b=ig.game.O2082.info[c]&&ig.game.O2082.info[c][a]&&ig.game.O2082.info[c][a].O3685);return b},
O3736:function(a){if(this.data.prop&&this.data.prop.attributes)if(this.O6870(a),ig.game.O2082.O3795(this.types[this.data.type].key)&&!this.O6870(a)){for(var b=this.data.prop.attributes.length-1;0<=b;b--)this.O6870(this.data.prop.attributes[b])||this.data.prop.attributes.splice(b,1);this.data.prop.attributes.push(a)}else b=this.data.prop.attributes.indexOf(a),0<=b?this.data.prop.attributes.splice(b,1):(this.data.prop.attributes.push(a),this.O5237(a))},O8746:function(a,b){a.indexOf(b)===-1&&a.push(b)},
O8722:function(a,b){b=a.indexOf(b);b>=0&&a.splice(b,1)},O5237:function(a){for(var b=0;b<ig.game.O2082.O1505.length;b++){var c=ig.game.O2082.O1505[b],d=c.indexOf(a);d>=0&&(c=this.data.prop.attributes.indexOf(d==0?c[1]:c[0]),c>=0&&this.data.prop.attributes.splice(c,1))}},O7969:function(a,b){if(a&&this.types[a]){this.O3942();this.O5205=0;this.O8630=!1;this.O9598();var c=!0;"motion"==a&&this.O6804()&&(c=confirm("Motion will replace your current drawing with your body. Continue?"));if(c){this.O6797();
this.O8103=6;0<=["musicSheet","dynamicThing","happening","farBack"].indexOf(a)&&(this.O8103="farBack"==a?this.O1746:9);this.O6759=0;(c=this.data.type?this.types[this.data.type].O9925:null)||(c={width:this.O5039,height:this.O5017});if(this.data&&("viewable"==this.data.type||"glow"==this.data.type)||"body"==a){this.O9309();for(var d=0;d<ig.game.O1828;d++)this.data.pixels[d]=this.O4281()}this.data.type=a;d=this.types[this.data.type].O9925;this.O6677();d&&(this.tileWidth=d.width,this.O2576=d.height,this.O3595());
d&&c.width==d.width&&c.height==d.height||(this.O9309(),this.O3363(!0,!1,!0),this.O6094());this.O6729();this.O7019();this.O6036();this.O2086();"thrower"==a&&(this.data.direction=this.O7106-1);this.O5054();this.O8505();this.O8874();c="Name...";"motion"==this.data.type?(c="Trigger by [/]name",jQuery("#"+this.O5991).addClass("verbosePlaceholder")):"interactingMotion"==this.data.type?(c="Trigger by [/]name",jQuery("#"+this.O5991).addClass("verbosePlaceholder")):jQuery("#"+this.O5991).removeClass("verbosePlaceholder");
jQuery("#"+this.O5991).attr("placeholder",c);switch(a){case "mift":ig.game.hasMinfinity&&this.O9179||(c="<p>Mifts are message gifts you can send to friends.</p>",ig.game.hasMinfinity?(c+="<p>As you have Thingistan Minfinity, you can give Mifts for free.</p>",this.O9179=!0):c+='<p>They cost $1 and help finance Thingistan <br/>(you can give them for free with <a href="javascript:ig.game.O9663.openMainDialog()">Minfinity</a>).</p>',ig.game.alertDialog.open(c+"<p>Thank you!</p>",!0));break;case "writable":ig.game.isEditorHere&&
"INDIVIDUALS"==ig.game.O5549?this.O8793():(ig.game.alertDialog.open("Writable rights are tied to the area they are created in. Please first go to an area where you are listed as editor."),setTimeout(function(){ig.game.painter.O7969("readable")},50))}}this.O6350();b&&(this.thingReferencesDialog&&(this.O4412(),this.thingReferencesDialog.data=[]),this.data&&this.data.prop&&(this.data.prop.thingRefs=[]))}},O8793:function(){var a='<div style="margin-left: 10px"><p style="text-align: left">This Writable will be tied to the editor list for '+
(ig.game.O9720+":</p>");var b=["Editors can remove, lock, clarify and stickify","Only editors can add threads","Only editors can add comments","Only editors can read"];a+='<div style="text-align: left; background-color: rgb(180,180,180); padding: 9px; text-transform: uppercase; width: 95%; border-radius: 5px">';for(var c=0;c<b.length;c++){var d=c==this.O9231?' checked="checked"':"";a+='<div style="margin-bottom: 9px">';a+='<input type="radio" name="radioButton" value="'+c+'" id="writableSetting'+
c+'"'+d+"/> ";a+='<label for="writableSetting'+c+'">'+ig.game.strings.O9955(b[c]);c>=1&&(a+=' <span style="opacity: .6">(includes all of above)</span>');a+="</label>";a+="</div>"}ig.game.alertDialog.open(a+"</div></div>",!0,function(){var e=jQuery("input[name=radioButton]:checked").val();ig.game.painter.O9231=e;ig.game.sounds.success.play()})},O8874:function(){if("changer"==this.data.type){if(this.data.prop.textData)ig.game.userScriptEditor&&ig.game.userScriptEditor.open(this.data.prop.textData,this,
!1,!1);else{var a=this;ig.game.O9817.O6885().done(function(d){ig.game.userScriptEditor&&ig.game.userScriptEditor.open(d.contents?d.contents:"",a,void 0,!1)})}var b=30;jQuery("#painter").css("left",b+"px")}else{if("farBack"==this.data.type){var c=jQuery("#"+ig.game.canvasId);b=c.position();c=c.width();b=b.left+c-(this.painterCanvasSize.x+65)*ig.system.scale;jQuery("#painter").css("left",b+"px")}else this.O6860();ig.game.userScriptEditor&&ig.game.userScriptEditor.isOpen&&ig.game.userScriptEditor.close()}this.O8351();
this.O8758()},O6860:function(){var a=jQuery("#"+ig.game.canvasId),b=a.position();a=a.width();b=b.left+a/2-this.painterCanvasSize.x*ig.system.scale/2;jQuery("#painter").css("left",b+"px")},O7365:function(){var a=ig.game.O1828,b=2*ig.game.O4975,c=2*ig.game.O4975;this.O4380=[];for(var d=0;d<a;d++)this.O4380[d]=this.O4281(b,c)},O6797:function(){if(this.data&&this.data.pixels&&this.O4380)for(var a=0;a<this.data.pixels.length;a++)for(var b=0;b<this.data.pixels[0].length;b++)for(var c=0;c<this.data.pixels[0].length;c++)this.data.pixels[a]&&
this.data.pixels[a][b]&&void 0!==this.data.pixels[a][b][c]&&null!==this.data.pixels[a][b][c]&&(this.O4380[a][b][c]=this.data.pixels[a][b][c])},O8505:function(){if(this.data&&this.data.pixels&&this.O4380)for(var a=0;a<this.data.pixels.length;a++)for(var b=0;b<this.data.pixels[0].length;b++)for(var c=0;c<this.data.pixels[0].length;c++)this.data.pixels[a]&&this.data.pixels[a][b]&&void 0!==this.data.pixels[a][b][c]&&null!==this.data.pixels[a][b][c]&&this.data.pixels[a][b][c]==this.transparentIndex&&(this.data.pixels[a][b][c]=
this.O4380[a][b][c])},O5054:function(){this.data.prop||(this.data.prop={});this.data.prop.attributes||(this.data.prop.attributes=[]);if(0==this.data.prop.attributes.length&&this.data.type&&ig.game.O2082.info[this.types[this.data.type].key]&&ig.game.O2082.O3795(this.types[this.data.type].key)){this.data.prop.attributes=[];var a=ig.game.O2082.info[this.types[this.data.type].key],b;for(b in a){this.data.prop.attributes.push(b);break}}},O7019:function(){this.data.type=="music"&&this.data.prop&&!this.data.prop.musicData&&
ig.game.O7763&&ig.game.O7763.data&&!ig.game.O7763.O9727&&(this.data.prop&&(this.data.prop={}),this.data.prop.musicData=ig.game.O4507(ig.game.O7763.data))},O6036:function(){if("musicSheet"==this.data.type&&ig.game.O7763&&ig.game.O7763.data&&!ig.game.O7763.O9727){var a=ig.game.O7763.data,b;a.piano?(b="piano",colorIndex=0):a.classic_piano?(b="classic_piano",colorIndex=1):a.bell&&(b="bell",colorIndex=2);if(b&&(a=b?a[b]:null)&&0===this.selectedCell&&this.data.pixels&&this.data.pixels[this.selectedCell]&&
this.data.pixels[this.selectedCell][0])for(var c in a)if(b=1E3*parseFloat(ig.game.strings.replaceAll(c,"_",".")),b=Math.round(b/this.noteDelayMSDefault),b<this.tileWidth)for(var d="object"==typeof a[c]?a[c]:[a[c]],e=0;e<d.length;e++){var f=d[e];2==f.length&&(f=this.O2576-1-((f[0]-2)*ig.game.sounds.tones.length+ig.game.sounds.tones.indexOf(f[1])),0<=f&&f<=this.O2576&&(this.data.pixels[this.selectedCell][b][f]=colorIndex))}}},O9486:function(){var a=this.areas.O8423.x1,b=this.areas.O8423.y1,c=this.tileWidth*
this.O8977,d=this.O2576*this.O8977;this.context.fillStyle="rgba(0,0,0,1)";this.context.textAlign="center";this.fillText("FIRST PICK AN INSTRUMENT",a+c/2,b+d/2+this.O9897-1-3);this.fillText("AND PLAY MUSIC",a+c/2,b+d/2+this.O9897-1+5);this.context.textAlign="left"},O5280:function(a){var b=null,c=0,d;for(d in this.types){var e=this.types[d].O8137&&this.types[d].O8137==this.O3774,f=ig.game.O1257.rank==this.O3774;if(c==a&&!this.types[d].parent&&(!e||f)){b=d;break}this.types[d].parent||c++}return b},getAttributeByIndex:function(a){var b=
null,c=0,d=ig.game.O2082.info[this.types[this.data.type].key],e;for(e in d){var f=d[e];if(c==a&&(!f.O8137||ig.game.O1257.rank>=f.O8137)){b=e;break}c++}return b},O9604:function(a){var b=0,c;for(c in this.types){if(c==a)break;this.types[c].parent||b++}return b},getAttributesIndex:function(a){var b=0,c;for(c in ig.game.O2082.info[this.types[this.data.type].key]){if(c==a)break;b++}return b},O8690:function(){var a=0,b;for(b in this.types)a++;return a},O1173:function(a,b,c){return a>=c.x1&&a<=c.x2&&b>=
c.y1&&b<=c.y2},O6789:function(a,b,c){return a>=c.x&&a<=c.x+c.width&&b>=c.y&&b<=c.y+c.height},O2768:function(){"a"==this.colorPickerType?this.O2306():this.O2610()},O3169:function(){"a"!=this.colorPickerType&&(this.updateBasedOnCursorUpInPickColorMode_typeB(),ig.game.O1189.register(ig.game.O1189.types.USED_ALTERNATIVE_COLORS_VIEW));this.O2905()},O2610:function(){var a=this.cursorX,b=this.cursorY;if(this.O1173(a,b,this.areas.colorPickerB_base)){var c=null;a>this.areas.colorPickerB_base.x2-4&&(c=-4);
this.colorPickerB.rgbaBase=this.O1730(c,null);this.colorPickerB.baseY=b;this.O5324=!0;this.O8293(this.data.colors[this.O4389])}else this.O1173(a,b,this.areas.colorPickerB_tintOff)?(this.colorPickerB.rgbaTint=null,this.colorPickerB.tintX=null,this.O5324=!0,this.O8293(this.data.colors[this.O4389])):this.O1173(a,b,this.areas.colorPickerB_tint)?(c=null,b<this.areas.colorPickerB_tint.y1+3&&(c=3),this.colorPickerB.rgbaTint=this.O1730(null,c),this.colorPickerB.tintX=a,this.O5324=!0,this.O8293(this.data.colors[this.O4389])):
this.O1173(a,b,this.areas.colorPickerB_main)?this.O8293(this.O1730()):this.O8293(this.data.colors[this.O4389]);this.O5324&&(this.O5324=!1,this.O6904())},O6932:function(){},O1730:function(a,b){if(null==a||void 0==a)a=0;if(null==b||void 0==b)b=0;a=this.getImageDataPixel(this.cursorX+a,this.cursorY+b).data;return{r:a[0],g:a[1],b:a[2],alpha:1}},O6459:function(a,b){a=this.getImageDataPixel(a,b).data;return{r:a[0],g:a[1],b:a[2],alpha:1}},updateBasedOnCursorUpInPickColorMode_typeB:function(){var a=this.cursorX,
b=this.cursorY;if(this.O3477&&this.O1173(a,b,this.areas.colorPickerB_main))this.data.colors[this.O4389]=this.O1730(),this.O5324=!0,this.O2436(a,b),this.O8880(),ig.game.sounds.click.play(),this.O6861(this.O4389),this.O3490();else if(this.O1173(a,b,this.areas.colorPickerTypeToggler))this.O8567();else if(this.O1173(a,b,this.areas.colorPickerCloseButton)||!this.O1173(a,b,this.areas.colorPickerDialog))this.O8880(),ig.game.sounds.click.play()},O6904:function(){this.drawImage("colorPicker_type"+this.colorPickerType.toUpperCase(),
this.areas.colorPickerDialog.x1,this.areas.colorPickerDialog.y1);this.colorPickerB.rgbaBase||(this.colorPickerB.rgbaBase={r:0,g:255,b:244,alpha:1});var a=this.areas.colorPickerB_main,b=this.O5320(this.colorPickerB.rgbaBase);this.context.fillStyle=b;this.fillRect(a.x1,a.y1,a.width,a.height);b=this.context.createLinearGradient(0,0,a.width*this.pageZoom,0);b.addColorStop(.1,"rgba(255,255,255,1)");b.addColorStop(.8,"rgba(255,255,255,0)");this.context.fillStyle=b;this.fillRect(a.x1,a.y1,a.width,a.height);
b=this.context.createLinearGradient(0,0,0,a.height*this.pageZoom);b.addColorStop(.2,"rgba(0,0,0,0)");b.addColorStop(1,"rgba(0,0,0,1)");this.context.fillStyle=b;this.fillRect(a.x1,a.y1,a.width,a.height);this.colorPickerB.rgbaTint&&(this.context.globalCompositeOperation="lighter",b=ig.game.O4507(this.colorPickerB.rgbaTint),b.alpha=.15,this.context.fillStyle=this.O5320(b),this.fillRect(a.x1,a.y1,a.width,a.height),this.context.globalCompositeOperation="source-over");this.colorPickerB.tintX||(this.colorPickerB.tintX=
this.areas.colorPickerB_tintOff.x1);this.context.fillStyle="rgba(255,255,255,1)";this.fillRect(this.colorPickerB.tintX,this.areas.colorPickerB_tint.y1-1,1,3);this.colorPickerB.baseY||(this.colorPickerB.baseY=Math.round(this.areas.colorPickerB_base.y1+this.areas.colorPickerB_base.height/2));this.context.fillStyle="rgba(255,255,255,1)";this.fillRect(this.areas.colorPickerB_base.x2-3,this.colorPickerB.baseY,4,1)},O2436:function(a,b){var c=this.O5990();c&&(this.O9545[c]={x:a,y:b,O5641:ig.game.O4507(this.colorPickerB)})},
O5990:function(){var a=null;if(void 0!=this.O4389&&null!=this.O4389){var b=this.data.colors[this.O4389];b&&(a=[this.O4389,b.r,b.g,b.b].join("_"))}return a},O7383:function(){var a=this.O5990();a&&this.O9545[a]&&(a=this.O9545[a],this.context.fillStyle="rgba(0,0,0,.75)",this.fillRect(a.x-1,a.y-1,2,2))},O2306:function(){var a=this.cursorX,b=this.cursorY,c=this.O1173(a,b,this.areas.colorPickerCloseButton),d=!c&&this.O1173(a,b,this.areas.colorPickerDialogInner),e=this.getImageDataPixel(a,b).data;e={r:e[0],
g:e[1],b:e[2],alpha:1};this.O6396&&this.O3477?this.O1173(a,b,this.areas.colorPickerTypeToggler)?this.O8567():c?(this.O8880(),ig.game.sounds.click.play()):d?(this.data.colors[this.O4389]=e,this.O1333[this.O4389]={x:a,y:b},this.O8880(),ig.game.sounds.click.play(),this.O6861(this.O4389),this.O3490()):!c&&!d&&(this.O8880(),ig.game.sounds.click.play()):d?this.O8293(e):this.O8293(this.data.colors[this.O4389])},O9124:function(){var a=this.cursorX,b=this.cursorY,c=this.O1173(a,b,this.areas.menuButton),d=
!c&&this.O1173(a,b,this.areas.menu);if(this.O3477&&(c||!d))this.O8880();else if(d)switch(c=["undo|redo","cloneOld","toggleDrawSymmetricX|toggleDrawSymmetricY|O6471","changeColor|changeColorSingle|rgbAsText","mirror|flip|rotate",ig.ua.mobile||ig.ua.mac?"moveLeft|moveRight|moveUp|moveDown":"move|line|overdraw","lowerColorOpacity","brushType0|brushType1|brushType2|brushType3|brushType4","addRemoveSound","copy|paste","clearCanvas|clearAll"],b=parseInt((b-this.areas.menu.y1)/((this.areas.menu.y2-this.areas.menu.y1)/
c.length)),b=c[b],b){case "undo|redo":switch(this.O4947(b,a,[this.areas.menu.width/2])){case "undo":this.O3687();break;case "redo":this.O2725()}this.O8880();this.update();break;case "cloneOld":this.O8880();this.update();ig.game.sounds.click.play();this.O9853();break;case "toggleDrawSymmetricX|toggleDrawSymmetricY|O6471":a=this.O4947(b,a,[.33*this.areas.menu.width,.66*this.areas.menu.width]);"toggleDrawSymmetricX"==a||"toggleDrawSymmetricY"==a?("toggleDrawSymmetricX"==a?this.O1155=!this.O1155:this.O9945=
!this.O9945,ig.game.sounds.click.play(),this.O8880(),this.update()):this.O6471();break;case "changeColor|changeColorSingle|rgbAsText":a=this.O4947(b,a,[.33*this.areas.menu.width,.66*this.areas.menu.width]);if("rgbAsText"==a)this.O6774();else{switch(a){case "changeColor":this.O9096=null;break;case "changeColorSingle":this.O9096=this.O4389}this.O6433=this.O9395(this.data.colors);this.O4179();this.O8880();this.mode="changeColor";this.update();this.O7573()}break;case "mirror|flip|rotate":if(this.O4764)ig.game.sounds.nocando.play();
else{c=[this.areas.mirrorFlipRotateSeparator1.x1,this.areas.mirrorFlipRotateSeparator2.x1];switch(this.O4947(b,a,c)){case "mirror":this.data.pixels[this.selectedCell]=this.O9013(this.data.pixels[this.selectedCell]);break;case "flip":this.data.pixels[this.selectedCell]=this.O8964(this.data.pixels[this.selectedCell]);break;case "rotate":this.data.pixels[this.selectedCell]=this.O4244(this.data.pixels[this.selectedCell])}this.O6094();ig.game.sounds.click.play()}this.update();break;case "move|line|overdraw":c=
[this.areas.mirrorFlipRotateSeparator1.x1,this.areas.mirrorFlipRotateSeparator2.x1];switch(this.O4947(b,a,c)){case "move":var e=ig.ua.mac?"cmd":"ctrl";ig.game.alertDialog.O3813("move the creation using "+e+"+arrow keys. extend or shorten it by using "+e+"+shift+arrow keys.");break;case "line":ig.game.alertDialog.O3813('draw lines by holding down the "a" key.');break;case "overdraw":ig.game.alertDialog.O3813("holding down shift allows to only draw over the context color. you can set a color to be the context by "+
e+"-right-clicking it. (Reversely, holding shift while right-clicking only draws over the main color.)")}ig.game.sounds.click.play();break;case "moveLeft|moveRight|moveUp|moveDown":c=this.areas.menu.width/4-3;c=[this.areas.menu.x1+1*c-2,this.areas.menu.x1+2*c,this.areas.menu.x1+3*c];switch(this.O4947(b,a,c)){case "moveLeft":this.O8450(-1,0);break;case "moveRight":this.O8450(1,0);break;case "moveUp":this.O8450(0,-1);break;case "moveDown":this.O8450(0,1)}this.O6094();ig.game.sounds.click.play();this.update();
break;case "move":this.drawImage("moveShortcutHi",this.areas.menu.x1+51,this.areas.menu.y1+58);ig.game.sounds.click.play();this.update();break;case "brushType0|brushType1|brushType2|brushType3|brushType4":c=15;c=[this.areas.menu.x1+32,this.areas.menu.x1+32+1*c,this.areas.menu.x1+32+2*c,this.areas.menu.x1+32+3*c,this.areas.menu.x1+32+4*c];a=this.O4947(b,a,c);this.brushType=parseInt(ig.game.strings.replaceAll(a,"brushType",""));ig.game.sounds.click.play();this.O8880();break;case "lowerColorOpacity":this.O8880();
this.lowerColorOpacity();ig.game.sounds.click.play();break;case "addRemoveSound":this.O9221();ig.game.sounds.click.play();break;case "copy|paste":switch(this.O4947(b,a,[this.areas.menu.width/2])){case "copy":this.O3950();break;case "paste":this.O1396()}this.O8880();this.update();break;case "clearCanvas|clearAll":a="clearAll"==this.O4947(b,a,[this.areas.menu.width/2]),this.O8880(),this.O3363(!0,a),this.O6094()}},O3401:function(){ig.game.O1257.O6373||ig.game.alertDialog.O5816("Do a motion:",localStorage.motion_while_creating,
ig.game.painter.O9428,null,null,null,null,null,null,!0)},O9428:function(a){a?(a=String(a).trim(),ig.game.O5285.setItem("motion_while_creating",a),ig.game.O3957.O6339(a)):delete localStorage.motion_while_creating},O9221:function(){this.O8880();this.update();this.data.type&&0<=this.O9027.indexOf(this.types[this.data.type].key)?this.data.prop.soundId?(this.data.prop.soundId=null,ig.game.sounds.bin.play()):(ig.game.alertDialog.open('<p>Now pick a Sound (or any creation containing a sound) from the right (<a href="/info-tips#addingSound" target="_blank">more info</a>...)</p>',
!0),ig.game.alertDialog.contextId="pickSoundId"):(ig.game.alertDialog.open('<p>You can only add sound for <a href="/info-tips#addingSound" target="_blank">certain types</a>...</p>',!0),ig.game.sounds.nocando.play())},O4947:function(a,b,c){a=a.split("|");for(var d=0,e=0;e<c.length;e++)b>this.areas.menu.x1+c[e]&&d++;return a[d]},O3363:function(a,b,c,d){if(this.O4764&&!d)ig.game.sounds.nocando.play();else{if(a)if(c)for(a=0;a<this.maxCells;a++)this.data.pixels[a]=this.O4281();else this.data.pixels[this.selectedCell]=
this.O4281();b&&(this.data=this.O1335(),this.selectedCell=this.O4389=0,this.O1333=[]);this.O2086()}},O9853:function(){this.mode="cloneOld";ig.game.alertDialog.open("Now pick a creation from the right (or drag and drop it on the Create tab selector or Create button next time).")},O1516:function(a){for(var b=this.O5266(a),c=this.tileWidth,d=0;d<c;d++)for(var e=0;e<c;e++)b[d][e]=a[c-e-1][d];return b},O4244:function(a){a=this.O5266(a);for(var b=0;b<this.directionMax-1;b++)a=this.O1516(a);return a},O9309:function(){this.O3064=
[];this.O6094(!0)},O6094:function(a){var b=ig.game.O4507(this.data);if(a||this.O7265(this.O3064[this.O1677],b))this.O1677<this.O3064.length-1&&this.O3064.splice(this.O1677+1),this.O3064.push(ig.game.O4507(this.data)),this.O3064.length>this.O6189&&this.O3064.shift(),this.O1677=this.O3064.length-1,this.O9488()},O3687:function(){this.O4764?ig.game.sounds.nocando.play():0<this.O1677&&(this.O1677--,this.updateToCurrentDataHistory())},O2725:function(){this.O4764?ig.game.sounds.nocando.play():this.O1677<
this.O3064.length-1&&(this.O1677++,this.updateToCurrentDataHistory())},updateToCurrentDataHistory:function(){var a=ig.game.O4507(this.O3064[this.O1677]);this.data.colors=a.colors;this.data.pixels[this.selectedCell]=a.pixels[this.selectedCell]},O7265:function(a,b){var c=!1;if(a&&b&&a.pixels&&b.pixels&&a.pixels[this.selectedCell]&&b.pixels[this.selectedCell]){for(var d=0;d<this.tileWidth&&!c;d++)for(var e=0;e<this.O2576&&!c;e++){if(void 0==a.pixels[this.selectedCell][d]&&void 0==b.pixels[this.selectedCell][d])return c;
c=void 0==a.pixels[this.selectedCell][d]?!0:void 0==a.pixels[this.selectedCell][d][e]&&b.pixels[this.selectedCell][d]&&b.pixels[this.selectedCell][d][e]?!0:a.pixels[this.selectedCell]&&a.pixels[this.selectedCell][d]&&void 0!==a.pixels[this.selectedCell][d][e]&&null!==a.pixels[this.selectedCell][d][e]&&b.pixels[this.selectedCell]&&b.pixels[this.selectedCell][d]&&void 0!==b.pixels[this.selectedCell][d][e]&&null!==b.pixels[this.selectedCell][d][e]&&a.pixels[this.selectedCell][d][e]!=b.pixels[this.selectedCell][d][e]}for(d=
0;d<this.maxColors&&!c;d++)c=JSON.stringify(a.colors[d])!=JSON.stringify(b.colors[d])}return c},O9395:function(a){for(var b=[],c=0;c<this.maxColors;c++)a&&a[c]&&(b[c]=a[c]);return b},O8591:function(a){for(var b=[],c=0;c<this.maxCells;c++)b[c]=this.O5266(a[c]);return b},O5266:function(a){var b=[];if(a)for(var c=0;c<a.length;c++){b[c]=[];for(var d=0;d<a[0].length;d++)b[c][d]=a[c]&&null!=a[c][d]&&void 0!=a[c][d]?a[c][d]:this.transparentIndex}return b},O8567:function(){this.colorPickerType="a"==this.colorPickerType?
"b":"a";ig.game.O5285.setItem("colorPickerType",this.colorPickerType);this.O8880();this.O8871();ig.game.sounds.click.play()},O8871:function(a){this.O9598();this.mode="pickColor";this.drawImage("colorPicker_type"+this.colorPickerType.toUpperCase(),this.areas.colorPickerDialog.x1,this.areas.colorPickerDialog.y1);this.O8293({r:0,g:0,b:0,alpha:1});"a"==this.colorPickerType?this.O7604():((a=this.O5990())&&this.O9545[a]?(this.colorPickerB=ig.game.O4507(this.O9545[a].O5641),this.O6904(),this.O7383()):this.O6904(),
this.O5324=!1)},O9716:function(a){this.O9598();this.timeouts.drawBig&&clearTimeout(this.timeouts.drawBig);this.mode="pickType";this.drawImage("typePicker",this.areas.typePicker.x1,this.areas.typePicker.y1);if(null!=this.data.type){var b=this.types[this.data.type].parent?this.types[this.data.type].parent:this.data.type;a=this.O9365(b);this.context.fillStyle=this.O5320({r:143,g:235,b:109,alpha:1});this.fillRect(a.x,a.y,a.width,a.height)}this.context.font=this.O3565;var c=0;for(b in this.types)if(!this.types[b].parent){c++;
a=this.O9365(b);var d=this.types[b].title.toUpperCase();this.context.fillStyle="rgba(48,48,48,1)";this.fillText(d,a.x+this.areas.typePickerSingleSelection.x1,a.y+this.areas.typePickerSingleSelection.y1+parseInt(a.height/2)+this.O9897-1);this.types[b].iconRow&&this.drawImage("typeIcon_"+b,a.x+a.width-this.areas.typeIcon.width-1,a.y)}!ig.ua.mobile&&2<=ig.game.O1257.rank&&(this.context.fillStyle="rgba(255,255,255,0.25)",this.fillText("SEARCH = "+(ig.ua.mac?"CMD":"CTRL")+"+F",this.areas.typePicker.x1+
52,this.areas.typePicker.y1+8))},O7098:function(){this.O9598();this.mode="pickAttributes";this.drawImage("typePicker",this.areas.typePicker.x1,this.areas.typePicker.y1);this.context.font=this.O3565;this.context.fillStyle="rgba(160,160,160,1)";var a=this.types[this.data.type].title.toUpperCase();this.fillText(a,this.areas.typePicker.x1+4,this.areas.typePicker.y1+8);this.data.prop||(this.data.prop={});this.data.prop.attributes||(this.data.prop.attributes=[]);this.O8630=!1;var b=!1,c;for(c in ig.game.O2082.info[this.types[this.data.type].key]){var d=
ig.game.O2082.info[this.types[this.data.type].key][c];if(!d.hidden&&(!d.deprecated||0<=this.data.prop.attributes.indexOf(c))&&(!d.O8137||ig.game.O1257.rank>=d.O8137)){var e=this.O2773(c);if(e){var f=c;d.label&&(f=d.label);0<=f.indexOf("*")?b=!0:f=ig.game.strings.O2801(f);f=f.toUpperCase();f=ig.game.strings.replaceAll(f,"_"," ");f=ig.game.strings.replaceAll(f," -> ","->");d.label||(f=ig.game.strings.O7686(f,15));a=e.x+this.areas.typePickerSingleSelection.x1;var g=e.y+this.areas.typePickerSingleSelection.y1+
parseInt(e.height/2)+this.O9897-1;var h=this.data.type+"_attribute_"+c;this.O4400[h]&&(this.drawImage(h,a-2,g-6),a+=this.O4400[h].width);this.context.fillStyle="rgba(48,48,48,"+(d.O8137&&10==d.O8137?.5:1)+")";this.fillText(f,a,g);a=0<=this.data.prop.attributes.indexOf(c);g=ig.game.O2082.O3795(this.types[this.data.type].key)&&!this.O6870(c)?"radioButton":"checkbox";g+=a?"Checked":"Unchecked";this.drawImageWithAlpha(g,e.x+e.width-10,e.y)}else this.O8630=!0}}b&&(this.context.fillStyle="rgba(255,255,255,0.4)",
this.fillText("*MAY REQUIRE FRIENDSHIP",this.areas.typePicker.x1+35,this.areas.typePicker.y1+8));this.O8630&&this.drawImageWithAlpha("attributesPager",this.areas.attributesPager.x1,this.areas.attributesPager.y1,.85)},O7759:function(a){var b=null,c;for(c in this.types)this.types[c].parent==a&&(b==null&&(b=[]),b[b.length]=c);return b},O9365:function(a){var b=this.O9604(a);Math.ceil(this.O1613/this.O8690());a=b%this.O1613;b=Math.ceil((b+1)/this.O1613)-1;return{x:this.areas.typePickerSelections.x1+b*
this.areas.typePickerGrid.width,y:this.areas.typePickerSelections.y1+a*this.areas.typePickerGrid.height,width:this.areas.typePickerGrid.width,height:this.areas.typePickerGrid.height}},O2773:function(a){var b=null,c=this.O7126*this.O1613,d=this.O5205*c,e=this.O5205*c+c-1;a=this.getAttributesIndex(a);a>=d&&a<=e&&(a%=c,Math.ceil(this.O1613/this.getAttributesCount()),b=a%this.O1613,c=Math.ceil((a+1)/this.O1613)-1,b={x:this.areas.typePickerSelections.x1+c*this.areas.typePickerGrid.width,y:this.areas.typePickerSelections.y1+
b*this.areas.typePickerGrid.height,width:this.areas.typePickerGrid.width,height:this.areas.typePickerGrid.height});return b},O7604:function(){for(var a=0;a<this.maxColors;a++)if(a!=this.transparentIndex){var b=this.O1333[a];if(b){var c=a==this.O4389,d=c?2:1;this.context.fillStyle=c?"rgba(0,0,0,1)":"rgba(0,0,0,.5)";this.fillRect(b.x-d/2,b.y-d/2,d,d)}}},O8147:function(){var a=0,b=this.O7241();for(c in b){var c=parseInt(c);var d=b[c];if(d==parseInt(d)&&d==this.O4389){a=c;break}}return a},O8293:function(a){var b=
this.O8147(this.O4389);b=this.O5705(this.O4389,b,!0);this.O4276(b,this.O4389,a)},O8880:function(a){this.O3315();this.mode="default";this.O2206();this.O3477=this.O6396=!1;this.update()},O3315:function(a){if(void 0==a||null==a)a=200;var b=this;this.O4210=!1;null!=this.timeouts.O4210&&(clearTimeout(this.timeouts.O4210),this.timeouts.O4210=null);this.timeouts.O4210=setTimeout(function(){b.O4210=!0;b.timeouts.O4210=null},a)},isOnEdge:function(a,b){if(!this.canvas||this.mode&&this.mode!="default")return!1;
var c=this.painterCanvasSize.x*ig.system.scale,d=this.painterCanvasSize.y*ig.system.scale,e=this.dragEdgeSize,f=this.dragEdgeOuterExtension;return a>=-f&&a<=e||a>=c-e&&a<=c+f||b>=-f&&b<=e||b>=d-e&&b<=d+f},drawDragZones:function(){if(this.context){var a=this.painterCanvasSize.x*ig.system.scale,b=this.painterCanvasSize.y*ig.system.scale,c=this.dragEdgeSize;this.context.fillStyle="rgba(0, 150, 255, 0.2)";this.context.fillRect(0,0,a,c);this.context.fillRect(0,b-c,a,c);this.context.fillRect(0,0,c,b);this.context.fillRect(a-
c,0,c,b)}},O8752:function(a){if(this.isRunning){var b=jQuery(this.canvas).offset(),c=null,d=null;if(a.touches){if(2==a.touches.length){c=a.touches[1].clientX-b.left-this.areas.O8423.x1;a=a.touches[1].clientY-b.top-this.areas.O8423.y1;0<c&&(c/=this.pageZoom);0<a&&(a/=this.pageZoom);0<c&&(c/=this.O8977);0<a&&(a/=this.O8977);c=Math.floor(c);a=Math.floor(a);if(0<=c&&c<this.tileWidth&&0<=a&&a<this.O2576)for(b=this.O4698(c,a),d=0;d<b.length;d++)this.O5996(c,a,this.O4389,b[d]);return}1==a.touches.length&&
(c=a.touches[0].clientX,d=a.touches[0].clientY)}else c=a.clientX,d=a.clientY;if(this.isDragging&&this.mode=="default"&&a.movementX!==void 0&&a.movementY!==void 0){var e=jQuery(this.canvas).position(),f=this.painterCanvasSize.x*ig.system.scale,g=this.painterCanvasSize.y*ig.system.scale,h=jQuery(window).width(),k=jQuery(window).height(),l=e.left+a.movementX;a=e.top+a.movementY;l=Math.max(0,Math.min(h-f,l));a=Math.max(0,Math.min(k-g,a));jQuery(this.canvas).css({left:l+"px",top:a+"px"});f=jQuery(".painterInputBox");
f.length>0&&(g=f.position(),f.css({left:g.left+(l-e.left)+"px",top:g.top+(a-e.top)+"px"}));ig.input.mouse&&(this.dragLastMouseX=ig.input.mouse.x,this.dragLastMouseY=ig.input.mouse.y)}this.cursorX=c-b.left;this.cursorY=d-b.top;0<this.cursorX&&(this.cursorX/=this.pageZoom);0<this.cursorY&&(this.cursorY/=this.pageZoom);this.cursorX=Math.floor(this.cursorX);this.cursorY=Math.floor(this.cursorY);!this.isDragging&&this.mode=="default"&&this.isOnEdge(this.cursorX,this.cursorY)?this.canvas.style.cursor="move":
this.isDragging||this.O2190!=="default"?this.isDragging||(this.canvas.style.cursor="inherit"):this.canvas.style.cursor="default";this.O2178()}},O7170:function(a){this.focusPainter();"touchstart"!=a.type&&"pointerdown"!=a.type||this.O8752(a);if(this.isRunning){if(a.button===0&&this.mode=="default"&&this.isOnEdge(this.cursorX,this.cursorY))return this.isDragging=!0,this.dragLastMouseX=ig.input.mouse.x,this.dragLastMouseY=ig.input.mouse.y,this.canvas.style.cursor="move",a&&a.preventDefault?a.preventDefault():
window.event.returnValue=!1,!1;this.O9609();2==a.button?(this.O6396=!1,this.O5079=!0):(this.O6396=!0,this.O5079=!1);this.O2178()}a&&a.preventDefault?a.preventDefault():window.event.returnValue=!1;return!1},O8412:function(a){this.isRunning&&(this.O7724=!0,this.O6469(),this.O7724=!1)},O9992:function(a){if(this.isRunning&&(this.O9074(a,"keyDown"),this.O2288())){var b=!!a.shiftKey,c=this.O9469(a);b&&(this.O3646=!0);65==a.keyCode&&(this.lineKeyIsPressed=!0);b&&73==a.which?this.O5480():71==a.which?b?this.O3518():
this.O6471():c&&70==a.which&&(this.mode!="pickType"&&this.mode!="pickColor"||this.O8880(),ig.game.alertDialog.O5816("enter type or part of type:",null,ig.game.painter.O3008,null,null,null,null,null,150,!0))}},O5480:function(){ig.game.alertDialog.O5816("info:",this.data.prop?this.data.prop.info:"",ig.game.painter.O2323,null,!0,!0,null,null,this.O5495,!0)},O2323:function(a){if(void 0!==a&&null!==a){a=a.trim();var b=ig.game.painter.data;b.prop||(b.prop={});b.prop.info=a;console.log(a)}},O2288:function(){return this.isRunning&&
this.isFocused&&!jQuery("#"+this.O5991).is(":focus")&&!jQuery("#searchInput").is(":focus")&&!ig.game.alertDialog.isOpen&&!(this.interactingDialog&&this.interactingDialog.isOpen)&&!(ig.game.userScriptEditor&&ig.game.userScriptEditor.isOpen&&jQuery("#userScriptEditorText").is(":focus"))&&!ig.ua.mobile},O3950:function(){ig.game.alertDialog.isOpen||(this.O2161=this.O5266(this.data.pixels[this.selectedCell]),ig.game.sounds.pickup.play(),this.O6094())},O1396:function(a){if(!ig.game.alertDialog.isOpen)if(this.O2161){var b=
null;if(a){var c=this.O2161[0].length,d=this.O2161.length,e=this.O3531();e&&(b={x:e.x-Math.floor(c/2),y:e.y-Math.floor(d/2)})}this.O8580(this.O2161,b);this.update();a?ig.game.sounds.O2903(ig.game.sounds.putdown,.3):ig.game.sounds.putdown.play();this.O6094()}else ig.game.sounds.nocando.play()},O8580:function(a,b){b||={x:0,y:0};for(var c=this.data.pixels[this.selectedCell],d=0;d<c.length;d++)for(var e=0;e<c[d].length;e++)if(a[d]&&void 0!=a[d][e]&&a[d][e]!=this.transparentIndex){var f=d+b.x,g=e+b.y;
void 0!==c[f]&&void 0!==c[f][g]&&(c[f][g]=a[d][e])}},O3362:function(a){ig.game.sounds.pickup.play();var b=this;ig.game.O9817.O4538(a).done(function(c){if(c&&c.imageData&&c.imageData.pixels)if(c.isBlocked)b.showItemIsBlocked();else{var d=ig.game.O1257.O2970==c.creator,e=!1;c.prop&&c.prop.attr&&(ig.game.O2082.O3713(c),e=0<=c.prop.attributes.indexOf("clonable"));d||e?(jQuery.isArray(c.imageData.pixels[0][0])?d=c.imageData.pixels:(d=[],d[0]=c.imageData.pixels),b.O2161=d[0]):ig.game.sounds.nocando.play()}else ig.game.sounds.nocando.play()})},
showItemIsBlocked:function(){ig.game.alertDialog.open({html:'<p>Sorry, this creation is blocked. Please see <span class="pseudoLink" onclick="ml.Misc.openUrl(\'/info#terms\')">the terms</span> for more.</p>',isSmall:!0});ig.game.sounds.nocando.play()},O8899:function(a){for(var b=[],c=0;c<this.tileWidth;c++){b[c]=[];for(var d=0;d<this.O2576;d++)b[c][d]=a[c]&&null!=a[c][d]&&void 0!=a[c][d]?a[c][d]:this.transparentIndex}return b},lowerColorOpacity:function(a){if(this.O4389!=this.transparentIndex){a=
[0,.07,.1,.25,.5,.75,1];var b=a.indexOf(this.data.colors[this.O4389].alpha);b--;0>=b&&(b=a.length-1);this.data.colors[this.O4389].alpha=a[b];this.update();this.O6094()}},O5626:function(a){if(this.O2288()){var b=!1,c=this.O9469(a),d=!!a.shiftKey;this.O3646=d;this.lineKeyIsPressed=!1;90==a.which?(c?this.O3687():this.O2725(),this.O2086(),"changeColor"==this.mode&&this.O7573()):c&&68==a.which?this.O3401():c&&d&&37==a.which?this.O9755(-1,0):c&&d&&39==a.which?this.O9755(1,0):c&&d&&38==a.which?this.O9755(0,
-1):c&&d&&40==a.which?this.O9755(0,1):c&&37==a.which?this.O8450(-1,0):c&&39==a.which?this.O8450(1,0):c&&38==a.which?this.O8450(0,-1):c&&40==a.which?this.O8450(0,1):c&&74==a.which?((this.O3584=!this.O3584)||(this.livePreviewOffset.x=0,this.livePreviewOffset.y=0),this.O3584?this.O2905():this.O6350(),this.O2086(),ig.game.sounds.click.play()):80==a.which?this.O5473():67==a.which?this.O3950():32==a.which&&this.data.type&&"musicSheet"==this.data.type?this.O6352():86!=a.which||ig.game.alertDialog.isOpen?
32!=a.which||ig.game.alertDialog.isOpen?84==a.which?this.lowerColorOpacity():79==a.which?"cloneOld"!=this.mode?(ig.game.panelSet.O6923(2),this.update(),ig.game.sounds.click.play(),this.O9853()):b=!0:c||d||73!=a.which?83==a.which?(d?this.O9945=!this.O9945:this.O1155=!this.O1155,this.update(),ig.game.sounds.click.play()):72==a.which?"changeColor"!=this.mode?(this.O9096=null,this.mode="changeColor",this.O6433=this.O9395(this.data.colors),this.O4179(),this.O7573()):(this.O2206(),b=!0):78==a.which?"changeColor"!=
this.mode?(this.O9096=this.O4389,this.mode="changeColor",this.O6433=this.O9395(this.data.colors),this.O4179(),this.O7573()):(this.O2206(),b=!0):46==a.which?this.O3363(!0,c):82==a.which?(this.data.pixels[this.selectedCell]=this.O4244(this.data.pixels[this.selectedCell]),this.update()):77==a.which?(this.data.pixels[this.selectedCell]=this.O9013(this.data.pixels[this.selectedCell]),this.update()):70==a.which?(this.data.pixels[this.selectedCell]=this.O8964(this.data.pixels[this.selectedCell]),this.update()):
27==a.which?b=!0:c&&9==a.which?this.data.type&&(this.types[this.data.type].O2135||this.types[this.data.type].O8687)&&(this.types[this.data.type].O2135?this.selectedCell=0==this.selectedCell?1:0:0<=["dynamicThing","happening","musicSheet","farBack"].indexOf(this.data.type)?this.selectedCell=this.selectedCell+1<=this.O6394-1?this.selectedCell+1:0:this.selectedCell=this.selectedCell+1<=ig.game.O1828-1?this.selectedCell+1:0,this.O2737=this.selectedCell,this.update(),ig.game.sounds.click.play()):66==a.which?
(this.brushType++,this.brushType>=this.O3095?(this.brushType=0,ig.game.sounds.shortWhoosh.play()):ig.game.sounds.click.play(),"menu"==this.mode&&this.O8880()):40!=a.which||d?48<=a.which&&57>=a.which||189==a.which?this.O3201(a.which):c&&65==a.which&&1<=this.getAttributesCount()?("default"==this.mode?this.O7098():"pickAttributes"==this.mode&&this.O8880(),ig.game.sounds.click.play()):d&&37==a.which?this.O9079(-1,0):d&&39==a.which?this.O9079(1,0):d&&38==a.which?this.O9079(0,-1):d&&40==a.which?this.O9079(0,
1):c&&75==a.which&&this.O1970():ig.game.O3957.tryOpen():this.O6774():this.O1396(!0):this.O1396();this.O9074(a,"keyUp");b&&("default"==this.mode?this.close():(this.O8880(),this.O2086()));this.O6094()}},O1970:function(){switch(this.O4032){case this.O839Default:this.O4032=.1;break;case .1:this.O4032=0;break;case 0:this.O4032=this.O839Default}ig.game.sounds.click.play();this.O2086()},O9079:function(a,b){this.O3584||this.O8958()||(this.O3584=!0);this.livePreviewOffset.x+=10*a;this.livePreviewOffset.y+=
10*b;ig.game.sounds.whoosh.play();this.O2905()},getAttributesCount:function(){var a=0;if(this.data&&this.data.type){var b=this.types[this.data.type].key;if(b&&=ig.game.O2082.info[b])a=Object.keys(b).length}return a},O3201:function(a){var b=-1;switch(a){case 49:b=0;break;case 50:b=1;break;case 51:b=2;break;case 52:b=3;break;case 53:b=4;break;case 54:b=5;break;case 55:b=6;break;case 56:b=7;break;case 57:b=8;break;case 48:b=9;break;case 189:b=10}0<=b&&(this.O4389=0==this.O8176?b:this.O8176*this.O4685+
1+b,this.update())},O3008:function(a){var b=[];if(a){var c=ig.game.painter;a=a.toLowerCase().trim().replace(/[\s\-]+/g,"");for(var d in c.types){var e=c.types[d];if(e.key&&-1===d.toLowerCase().indexOf("group")){e=e.title.toLowerCase().replace(/[\s\-]+/g,"");if(e==a){c.O7969(d,!0);ig.game.sounds.success.play();b=[];break}0<=e.indexOf(a)&&b.push(d)}}}if(1==b.length)c.O7969(b[0],!0),ig.game.sounds.success.play();else if(2<=b.length){var f="";for(a=0;a<b.length;a++)d=b[a],e=ig.game.strings.O9955(d),d=
ig.game.strings.O9955(c.types[d].title),f+='<span class="pseudoLink" onclick="ig.game.painter.O7969(\''+(e+"',true);ig.game.sounds.success.play();ig.game.alertDialog.close()\">")+d+"</span> &nbsp; ";f="<p>"+f+"</p>";setTimeout(function(){ig.game.alertDialog.open({html:f,O3144:!0,O5358:!0})},50)}},O2905:function(){this.O3738()&&(this.O6350(),this.O8914())},O8914:function(){var a="Entity"+ig.game.strings.toUpperCaseFirst(this.types[this.data.type].key.toLowerCase());ig.global[a]||(a="EntityDefault");
a=ig.global[a];var b={},c=this.tileWidth*this.maxCells*ig.system.scale,d=this.O2576*ig.system.scale,e=document.createElement("canvas");e.width=c;e.height=d;c=e.getContext("2d");this.O6610(c);e=new ml.Image(null,null,null,e);e.path="extracted/creator_live_preview";b.animSheet=new ml.AnimationSheet(null,this.tileWidth,this.O2576,e);b.givenName=jQuery("#"+this.O5991).val();b.isCreatorLivePreview=!0;b.rgb=this.O4393(this.data.colors[0]);b.rgb2=this.O4393(this.data.colors[1]);if(e=jQuery("#promptInputBox").val())this.data.prop.text=
e;b.text=this.data.prop.text;b.givenName&&""!=b.givenName||(b.givenName="noname");b.attributes={};if(this.data.prop.attributes)for(e=0;e<this.data.prop.attributes.length;e++)b.attributes[this.data.prop.attributes[e]]=!0;e=this.O5096();ig.game.O9759(a,e.x,e.y,b)},O5096:function(){var a=ig.game.O1257.pos.x+ig.game.O1257.O4188Offset.x,b=ig.game.O1257.pos.y+ig.game.O1257.O4188Offset.y-3*ig.game.O9925;if(this.data.prop.attributes&&this.data.prop.attributes.indexOf("inCenter")>=0){var c=this.types[this.data.type].key;
c==="TRANSFORM"?b-=9:c==="DECOVBIG"?b-=Math.round(this.O2576/3):c==="DECOBIG"&&(b-=Math.round(this.O2576/4))}a+=this.livePreviewOffset.x;b+=this.livePreviewOffset.y;a=ig.game.O6112.O2337(a,b);return ig.game.O6112.O2132(a.x,a.y)},O6610:function(a){var b=this.data.pixels.length;this.types[this.data.type].O2867&&this.O6394&&(b=this.O6394);for(var c=0;c<b;c++)for(var d=this.data.pixels[c],e=0;e<this.tileWidth;e++)for(var f=0;f<this.O2576;f++){var g=void 0!=d[e]&&void 0!=d[e][f]?d[e][f]:this.transparentIndex;
g!=this.transparentIndex&&(a.fillStyle=this.O5320(this.data.colors[g]),a.fillRect(e*ig.system.scale+c*this.tileWidth*ig.system.scale,f*ig.system.scale,ig.system.scale,ig.system.scale))}},O6350:function(){for(var a in ig.game.O5119){var b=ig.game.O5119[a];if(b)for(var c=0;c<b.length;c++)b[c].isCreatorLivePreview&&b[c].kill()}},O6471:function(){ig.game.sounds.click.play();this.showGrid=!this.showGrid;this.O8212=!1;this.O8880();this.O2086()},O3518:function(){ig.game.sounds.click.play();this.O8212=this.showGrid?
!this.O8212:this.showGrid=!0;this.O2086()},O3532:function(){if(!this.O7061){this.data.prop&&!this.data.prop.noteDelayMS&&(this.data.prop.noteDelayMS=this.noteDelayMSDefault);this.O7061=setInterval("ig.game.painter.O1728()",this.data.prop.noteDelayMS);var a=this.O3531();this.musicSheetPosition=a?a.x:0;this.O1728()}},O9598:function(){this.O7061&&(clearInterval(this.O7061),this.O7061=void 0,this.update())},O6352:function(){this.O7061?this.O9598():this.O3532();this.O4651()},O2429:function(a){a&&(parseInt(a)==
a?(a=parseInt(a).limit(ig.game.painter.noteDelayMSMin,ig.game.painter.noteDelayMSMax),a=parseInt(Math.floor(a/ig.game.painter.O3219)*ig.game.painter.O3219),ig.game.painter.data.prop.noteDelayMS=a):alert("Please use a number between "+ig.game.painter.noteDelayMSMin+" and "+ig.game.painter.noteDelayMSMax+" in steps of "+ig.game.painter.O3219))},O7653:function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);return b},O1728:function(){this.O8723();this.O2675();if(this.O7061){for(var a=0;a<this.O2576;a++)this.O3390(this.selectedCell,
this.musicSheetPosition,a);this.musicSheetPosition++;this.musicSheetPosition>=this.data.pixels[this.selectedCell].length&&(this.musicSheetPosition=0,++this.selectedCell>this.O6394-1&&(this.selectedCell=0,this.O9598()),this.update())}},O2675:function(){for(var a=0;a<this.O2576;a++)if(this.data.pixels[this.selectedCell]&&this.data.pixels[this.selectedCell][this.musicSheetPosition]&&void 0!==this.data.pixels[this.selectedCell][this.musicSheetPosition][a]){var b=this.data.pixels[this.selectedCell][this.musicSheetPosition][a];
if(void 0!==b&&"terminator"==this.musicSheetSpecialIndex[b]){++this.selectedCell>this.O6394-1&&(this.selectedCell=0,this.O9598());this.musicSheetPosition=0;this.update();break}}},O3093:function(){var a=0;ig.game.O7763.reset();ig.game.O7763.O2512=!0;for(this.selectedCell=0;this.selectedCell<this.O6394;this.selectedCell++)for(this.musicSheetPosition=0;this.musicSheetPosition<this.tileWidth;this.musicSheetPosition++){this.O2675();for(var b=0;b<this.O2576;b++){var c=this.O9298(this.selectedCell,this.musicSheetPosition,
b);if(c&&c.note){var d=ig.game.O7763.O6690(a/1E3);c.isKit?ig.game.O7763.O2795(c.instrument,c.note,d):ig.game.O7763.O2839(c.instrument,c.octave,c.note,d)}}a+=this.data.prop.noteDelayMS}ig.game.O7763.O2512=!1;for(a=this.optionalCells=this.maxCells=1;2>=a;a++)this.O3363(!0,!0,!0),this.O7969("music");this.O7019();this.O2086()},O9767:function(){ml.Misc.O5847("lighter");this.context.fillStyle="rgba(255,255,255,.3)";this.fillRect(this.areas.O8423.x1+this.musicSheetPosition*this.O8977,this.areas.O8423.y1,
this.O8977,this.O8977*this.O2576);ml.Misc.O3715()},O7100:function(){for(var a=!1,b=0;b<this.tileWidth;b++)for(var c=0;c<this.O2576;c++)if(this.data.pixels&&this.data.pixels[this.selectedCell]&&this.data.pixels[this.selectedCell][b]){if("terminator"==this.musicSheetSpecialIndex[this.data.pixels[this.selectedCell][b][c]]){a=!0;break}}else break;return a},O1872:function(){var a=this.O7100();this.context.fillStyle="rgba(0,0,0,.3)";var b=this.O5571(),c=this.areas.O8423.x1,d=this.areas.O8423.y1,e=this.tileWidth*
this.O8977,f=this.O2576*this.O8977,g=this.musicSheetSpecialIndex[this.O4389];if(b||g){b||={};b.isGuitar?(g=4,this.fillRect(c,d+f-g*this.O8977,e,g*this.O8977)):b.isKit&&b.max<this.O2576&&(g=this.O2576-b.max,this.fillRect(c,d,e,g*this.O8977));if(!b.isKit||b.isGuitar){var h=ig.game.sounds.tones.length;for(g=1;g<this.O2576+1;g++)0===(this.O2576-g)%h&&this.fillRect(c,d+g*this.O8977-1,e,1)}if(!a)for(a=1;a<this.tileWidth-1;a++)0===a%8&&this.fillRect(c+a*this.O8977,d,1,f);if(!b.isKit||b.isGuitar)for(this.context.fillStyle=
"rgba(0,0,0,.15)",g=0;g<this.O2576;g++)(b=ig.game.sounds.tones[(this.O2576-g)%ig.game.sounds.tones.length-1])&&0<=b.indexOf("s")&&this.fillRect(c,d+g*this.O8977,e,this.O8977)}else this.musicSheetSpecialIndex[this.O4389]||this.fillRect(c,d,e,f);this.context.fillStyle=this.O5320(this.canvasOverlayRgb);b=(this.O2576-this.tileWidth)/2*this.O8977;this.fillRect(c-b,d,b,f);this.fillRect(c+e,d,b,f)},O5571:function(){var a=null;if(void 0!==this.O4389){var b=this.instruments[this.O4389];b&&(a=ig.game.sounds.instruments[b])}return a},
O3390:function(a,b,c){(a=this.O9298(a,b,c))&&(a.isKit?ig.game.sounds.O4085(a.instrument,a.note):ig.game.sounds.O1069(a.instrument,a.octave,a.note))},O9298:function(a,b,c){var d=null;a=this.data.pixels[a][b][c];if(a!=this.transparentIndex&&(a=this.instruments[a]))if(b=ig.game.sounds.instruments[a],b.isKit)c=this.O2576-c,c<=b.max&&(b.isGuitar&&(c=this.O2270(c)),-1!=c&&(d={instrument:a,note:c,isKit:!0}));else{var e=this.O2576-c-1;c=e%ig.game.sounds.tones.length;b=b.minOctave+Math.floor(e/ig.game.sounds.tones.length);
(c=ig.game.sounds.tones[c])&&(d={instrument:a,octave:b,note:c})}return d},O2270:function(a){var b=ig.game.sounds.O1366(),c=ig.game.sounds.getGuitarIndexDistinctMapping(),d={},e=-1;if(5<=a){a-=4;for(var f=0,g=0;g<c.length;g++){var h=c[g];if(!d["n"+h]){f++;if(f==a){e=b[g];break}d["n"+h]=!0}}}return e},O3531:function(){var a=null,b=Math.floor((this.cursorX-this.areas.O8423.x1)/this.O8977),c=Math.floor((this.cursorY-this.areas.O8423.y1)/this.O8977);0<=b&&b<this.tileWidth&&0<=c&&c<this.O2576&&(a={x:b,
y:c});return a},O5473:function(){var a=this.O3531();a&&ig.game.alertDialog.open("The coordinates are "+a.x+" "+a.y)},O6774:function(){if(this.O4389!=this.transparentIndex){this.O8880();var a=this.O7055(this.data.colors[this.O4389]);ig.game.alertDialog.O5816("Red, green, blue (0-255) and alpha (0.1-1) of this color, or hexadecimal color:",a,ig.game.painter.O8745,"Ok")}else ig.game.sounds.nocando.play()},O9469:function(a){return a.ctrlKey||ig.ua.mac&&(a.metaKey||a.altKey)?!0:!1},O9074:function(a){a==
null||a==void 0?(this.O2190="default",document.body.style.cursor="default"):!this.O9469(a)||a.altKey||this.O9148()?a.altKey&&!this.O9148()?this.O2190!="floodFill"&&(this.O2190="floodFill",document.body.style.cursor="url("+this.imagePath+"cursor_floodFill.png) 1 12, default"):this.O2190!="default"&&(this.O2190="default",document.body.style.cursor="default",this.O4764&&(this.O9370.text(""),this.O9370.css("display","none"))):this.O2190!="pickColor"&&(this.O2190="pickColor",document.body.style.cursor=
"url("+this.imagePath+"cursor_pickColor.png) 0 15, default")},O9148:function(){return this.interactingDialog&&this.interactingDialog.isOpen||ig.game.alertDialog&&ig.game.alertDialog.isOpen},O9836:function(a){this.isRunning&&(this.O9609(),this.O6396=!1,this.O5079=!0,this.O2178(),this.O5079=!1)},O7558:function(a){this.isRunning&&(this.isDragging&&(this.isDragging=!1,this.dragLastMouseY=this.dragLastMouseX=null,this.canvas.style.cursor="default"),this.O3593=!0,this.O9609(),this.O6396=!1,this.O3477[this.mode]=
!0,this.O6469(),this.O5079=!1)},handleMouseLeave:function(a){},handleDocumentMouseUp:function(a){if(this.isDragging&&(this.isDragging=!1,this.dragLastMouseY=this.dragLastMouseX=null,this.canvas&&(this.canvas.style.cursor="default"),a=a.target,!this.canvas||!this.canvas.contains(a)&&this.canvas!==a)){this.wasDraggingBeforeClick=!0;var b=this;setTimeout(function(){b.wasDraggingBeforeClick=!1},200)}},handleDocumentMouseDown:function(a){if(this.isDragging&&this.canvas){var b=a.target;if(!this.canvas.contains(b)&&
this.canvas!==b){var c=jQuery(this.canvas).offset();b=this.painterCanvasSize.x*ig.system.scale;var d=this.painterCanvasSize.y*ig.system.scale,e=a.clientX-c.left;a=a.clientY-c.top;if(e<-20||e>b+20||a<-20||a>d+20){this.wasDraggingBeforeClick=!0;this.isDragging=!1;this.dragLastMouseY=this.dragLastMouseX=null;this.canvas.style.cursor="default";var f=this;setTimeout(function(){f.wasDraggingBeforeClick=!1},200)}}}},handleWindowMouseLeave:function(a){this.isDragging&&(this.isDragging=!1,this.dragLastMouseY=
this.dragLastMouseX=null,this.canvas&&(this.canvas.style.cursor="default"))},O9755:function(a,b){var c=this.cursorX,d=this.cursorY,e=this.areas.O8423.x1+this.areas.drawing.width,f=this.areas.O8423.y1+this.areas.drawing.height;e=c>=this.areas.O8423.x1&&c<=e&&d>=this.areas.O8423.y1&&d<=f;c=(c-this.areas.O8423.x1)/this.O8977;d=(d-this.areas.O8423.y1)/this.O8977;c=Math.floor(c);d=Math.floor(d);f=0<=c&&c<this.tileWidth&&0<=d&&d<this.O2576;e&&f&&this.O8301(c,d,a,b)},O8301:function(a,b,c,d,e){void 0===e&&
(e=this.selectedCell);var f=this.data.pixels[e],g=this.O5266(f),h=0,k=this.tileWidth,l=0,m=this.O2576;0<c?h=a:0>c?h=a:0<d?l=b:0>d&&(l=b);a=this.O2511(e);for(0>c&&a.left?h++:0<c&&a.right?k--:0>d&&a.top?l++:0<d&&a.bottom&&m--;h<k;h+=1)for(a=l;a<m;a+=1)b=h-c,0>b?b=this.tileWidth-1:b>this.tileWidth-1&&(b=0),e=a-d,0>e?e=this.O2576-1:e>this.O2576-1&&(e=0),f[h][a]=g[b][e];this.O6094();this.update()},O5619:function(a,b){for(var c=0;c<this.data.pixels.length;c++)this.O8450(a,b,!0,c)},O8450:function(a,b,c,
d){void 0===d&&(d=this.selectedCell);d=this.data.pixels[d];for(var e=this.O5266(d),f=0;f<this.tileWidth;f++)for(var g=0;g<this.O2576;g++){var h=f-a;0>h?h=this.tileWidth-1:h>this.tileWidth-1&&(h=0);var k=g-b;0>k?k=this.O2576-1:k>this.O2576-1&&(k=0);d[f]&&void 0!==d[f][g]&&e[h]&&void 0!==e[h][k]&&(d[f][g]=e[h][k])}c||(this.O6094(),this.update())},O9566:function(a){return{x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2,width:a.width,height:a.height}},O7898:function(){this.clearRect(this.areas.O8423,this.areas.O8423,
this.areas.drawing.width,this.areas.drawing.height)},O4281:function(a,b){a||=this.tileWidth;b||=this.O2576;for(var c=[],d=0;d<a;d++){c[d]=[];for(var e=0;e<b;e++)c[d][e]=this.transparentIndex}return c},O5320:function(a){a||={};if(void 0===a.alpha||null==a.alpha)a.alpha=1;return"rgba("+a.r+","+a.g+","+a.b+","+a.alpha+")"},O7055:function(a){a||={};if(void 0===a.alpha||null==a.alpha)a.alpha=1;return a.r+","+a.g+","+a.b+","+a.alpha},O4393:function(a){a||={r:0,g:0,b:0};return a.r+","+a.g+","+a.b},O6729:function(){"motion"==
this.data.type?this.O5401():!this.O3417()&&"walking"==this.data.type&&(this.data.pixels=this.O2089())},O5401:function(){var a=this,b=ig.game.O1257.attachments&&ig.game.O1257.attachments.b?ig.game.O1257.attachments.b.id:null;b?ig.game.O9817.O4538(b).done(function(c){c&&(ig.game.O1257.O2970==c.creator?a.O7586(c.imageData.pixels,c.imageData.colors,!0):ig.game.alertDialog.open("You can only add motions for bodies you've created."))}):(ig.game.alertDialog.open("To create a Motion, please change into a body of yours first."),
setTimeout(function(){ig.game.painter.O7969("body")},500))},O7586:function(a,b,c){this.data.colors=this.O5221();for(var d=0;d<b.length;d++)this.data.colors[d]=ig.game.O4507(b[d]);this.data.pixels[0]=ig.game.O4507(a[0]);this.types.motion.O9925={width:this.data.pixels[0].length,height:this.data.pixels[0][0].length};this.tileWidth=this.data.pixels[0].length;this.O2576=this.data.pixels[0][0].length;for(a=c?1:3;a<this.maxCells;a++)this.data.pixels[a]=this.O4281();this.O3595();this.O2086()},O2089:function(){return[[[9,
9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,0,0,0,0,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,0,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,0,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,9,0,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,9,9,0,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,9,9,9,0],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,0,0,0,0],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,
9,9,9,9,9,0,9],[9,9,9,9,9,9,9,9,9,9,9,0,9,9,9,9,9,9,0],[9,9,9,9,9,9,9,9,9,9,9,9,0,9,0,0,0,0,0],[9,9,9,9,9,9,9,0,9,9,9,9,9,0,9,9,9,9,9],[9,9,9,9,9,9,9,9,0,9,9,9,0,9,0,9,9,9,9],[9,9,9,9,9,9,9,9,9,0,0,0,0,0,0,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9]],[[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,0,0,0,0,9,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,0,9,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,9,9,9,9],[9,9,
9,9,9,9,9,9,9,9,9,9,9,9,0,0,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,9,0,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,9,0,0,0],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,0,9,9,0],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,0],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,9,9],[9,9,9,9,9,9,9,9,9,9,9,0,9,9,9,0,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,0,9,0,9,9,9,9],[9,9,9,9,9,9,9,0,9,9,9,9,9,0,9,9,9,9,9],[9,9,9,9,9,9,9,9,0,9,9,9,0,9,0,9,9,9,9],[9,9,9,9,9,9,9,9,9,0,0,0,0,0,0,9,9,9,9],[9,9,9,9,9,9,9,9,9,9,9,9,9,
9,9,9,9,9,9]]]},O5221:function(){for(var a=[],b=0;b<this.maxColors;b++)a[b]=this.O9632(b);return a},O9632:function(a){return 0==a?{r:0,g:0,b:0,alpha:1}:a==this.transparentIndex?{r:0,g:0,b:0,alpha:0}:{r:255,g:255,b:255,alpha:1}},O5108:function(a,b){for(var c=!1,d=a.length,e=0;e<d&&!c;e++)a[e]==b&&(c=!0);return c},O2498:function(a){var b=!1;0<a&&(b=this.O3084(0,100)<=a);return b},O3084:function(a,b){return(b+1-a)*Math.random()+a},O4293:function(a,b){return parseInt(Math.floor((b+1-a)*Math.random()+
a))},clearRects:function(a){var b=a.length;0==b&&(a=[a],b=a.length);for(var c=0;c<b;c++){var d=this.areas[a[c]];this.clearRect(d.x1,d.y1,d.x2-d.x1,d.y2-d.y1)}},clearRect:function(a,b,c,d){this.context.clearRect(Math.ceil(a*this.pageZoom),Math.ceil(b*this.pageZoom),Math.ceil(c*this.pageZoom),Math.ceil(d*this.pageZoom))},fillRect:function(a,b,c,d){this.context.fillRect(Math.ceil(a*this.pageZoom),Math.ceil(b*this.pageZoom),Math.ceil(c*this.pageZoom),Math.ceil(d*this.pageZoom))},strokeRect:function(a,
b,c,d){this.context.strokeRect(Math.ceil(a*this.pageZoom),Math.ceil(b*this.pageZoom),Math.ceil(c*this.pageZoom),Math.ceil(d*this.pageZoom))},fillText:function(a,b,c){this.context.fillText(a,b*this.pageZoom,c*this.pageZoom)},getImageData:function(a,b,c,d){return this.context.getImageData(Math.ceil(a*this.pageZoom),Math.ceil(b*this.pageZoom),Math.ceil(c*this.pageZoom),Math.ceil(d*this.pageZoom))},getImageDataPixel:function(a,b){return this.context.getImageData(a*this.pageZoom,b*this.pageZoom,1,1)},
drawImage:function(a,b,c){this.drawImageWithAlpha(a,b,c,null)},drawImageWithAlpha:function(a,b,c,d){var e=null;null!=d&&(e=this.context.globalAlpha,this.context.globalAlpha=d);this.O4400[a]?(a=this.O4400[a],this.context.drawImage(this.images[a.spritesheet],a.x,a.y,a.width,a.height,b*this.pageZoom,c*this.pageZoom,a.width*this.pageZoom,a.height*this.pageZoom)):(a=this.images[a])&&this.context.drawImage(a,b*this.pageZoom,c*this.pageZoom);null!=d&&(this.context.globalAlpha=e)},drawImageWithAlphaRotated:function(a,
b,c,d,e){e=null;null!=d&&(e=this.context.globalAlpha,this.context.globalAlpha=d);this.context.save();this.context.translate(50,35);this.context.rotate(.5);this.O4400[a]?(a=this.O4400[a],this.context.drawImage(this.images[a.spritesheet],a.x,a.y,a.width,a.height,b*this.pageZoom,c*this.pageZoom,a.width*this.pageZoom,a.height*this.pageZoom)):(a=this.images[a])&&this.context.drawImage(a,b*this.pageZoom,c*this.pageZoom);this.context.restore();null!=d&&(this.context.globalAlpha=e)},O1684:function(){this.data&&
this.data.type&&("viewable"==this.data.type||"glow"==this.data.type?this.O8450(9,9,!0):"holder"==this.data.type?(this.selectedCell=2,this.O8450(5,10,!0),this.selectedCell=0):"motion"==this.data.type?this.O7586(ig.game.O4507(this.data.pixels),ig.game.O4507(this.data.colors)):"body"==this.data.type?this.moveToBottomCenter():"musicSheet"!=this.data.type||this.autoStartPlayMusicSheetTimer||(this.autoStartPlayMusicSheetTimer=setTimeout(function(){ig.game.painter.O3532()},1E3)),this.types[this.data.type].O2867&&
this.O7186(),this.data.prop&&"thrower"==this.data.type&&(this.data.direction=this.data.prop.throwDirection));this.data.prop&&this.data.prop.rgb&&delete this.data.prop.rgb;this.data.prop&&this.data.prop.rgb2&&delete this.data.prop.rgb2;if(this.data.prop&&("mountableGround"==this.data.type||"mountableAir"==this.data.type)){var a=this.data.prop.offset;this.avatarTemplatePosition={x:0,y:0};a.x<0&&(this.avatarTemplatePosition.x=Math.abs(a.x));a.y<0&&(this.avatarTemplatePosition.y=Math.abs(a.y));for(var b=
1;0<=b;b--)this.selectedCell=b,this.O8450(this.avatarTemplatePosition.x+a.x,this.avatarTemplatePosition.y+a.y,!0)}this.O2905();this.O8874();this.O4897=!1;this.data&&"multithing"==this.data.type&&confirm("CLONE CONTENTS TOO?")&&(this.O4897=!0)},O2242:function(){ig.game.alertDialog&&ig.game.alertDialog.isOpen||this.O2905()},moveToBottomCenter:function(){var a=this.O1028(),b=this.types[this.data.type].O9925;this.O5619(Math.round(b.width/2-(a.x2-a.x1)/2)-1,b.height-a.y2-1)},moveToCenter:function(){var a=
this.O1028();a=Math.round(this.types[this.data.type].O9925.width/2-(a.x2-a.x1)/2)-1;this.O5619(a,0)},O9885:function(a,b,c){var d=this.transparentIndex;if(a)for(a=0;a<this.maxColors;a++)if(a!=b&&a!=c&&a!=this.transparentIndex){d=a;break}if("viewable"==this.data.type&&this.data&&this.data.pixels&&this.data.pixels[0])for(b=8;28>=b;b++)for(c=8;28>=c;c++)if(8==b||28==b||8==c||28==c)this.data.pixels[0][b][c]=d},O6804:function(){var a=!1;if(this.data&&this.data.pixels)for(var b=0;b<this.data.pixels.length;b++)if(this.O9884(b)){a=
!0;break}return a},O7186:function(){this.O6394=this.O8103;for(var a=this.data.pixels.length-1;2<=a&&!this.O9884(a);a--)this.O6394--},O2206:function(){jQuery("#"+this.O5991).show()},O4179:function(){jQuery("#"+this.O5991).hide()},O9488:function(){var a=JSON.stringify(this.data);ig.game.O5285.setItem("creatorEmergencyBackupData",a)},O8323:function(){var a=localStorage.getItem("creatorEmergencyBackupData"),b=null;null!=a&&void 0!=a&&""!=a&&(b=JSON.parse(a));return b},O4411:function(){localStorage.removeItem("creatorEmergencyBackupData")},
O7519:function(a,b){a=null;if(b instanceof Array){var c=ig.game.O2082.info[this.types[this.data.type].key];if(c)for(var d=0;d<b.length;d++){var e=b[d];if(e)if(c[e])a||=[],a.push(e);else{a=null;break}}}return a},O2035:function(a,b){for(var c=[],d=b[0].length,e=b[0][0].length,f=0;f<d;f++)for(var g=0;g<e;g++){var h=b[0][f][g];.5<=a[h].alpha&&(c[h]||(c[h]=0),c[h]++)}d=0;e=c.length;for(f=1;f<e;f++)if(!c[d]||c[f]>c[d])d=f;return a[d]},O3301:function(a){for(var b=null,c=0;c<this.maxColors&&null==b;c++)c!=
this.transparentIndex&&(this.O8494(a,this.data.colors[c])||this.O8876(a,this.data.colors[c]))&&(b=c);if(null==b){var d=this.O9632();for(c=0;c<this.maxColors&&null==b;c++)c!=this.transparentIndex&&this.O8494(d,this.data.colors[c])&&(this.data.colors[c]={r:a.r,g:a.g,b:a.b,alpha:a.alpha},b=c)}null==b&&(b=0);return b},O4466:function(a,b,c){ig.game.sounds.pickup.play();this.isRunning||(this.launch(),this.mode="cloneOld");ig.game.O7747.O1618(a,null,null,c,ig.game.O3199.base);2!=ig.game.panelSet.tabState&&
ig.game.panelSet.O6923(2)},O2906:function(a){var b=document.createElement("canvas");b.width=a.width;b.height=a.height;b.getContext("2d").drawImage(a,0,0);return b},O1335:function(){for(var a={name:null,type:null,direction:null,colors:this.O5221(),pixels:[],prop:{musicData:null,attributes:[],noteDelayMS:this.noteDelayMSDefault}},b=0;b<ig.game.O1828;b++)a.pixels[b]=this.O4281();return a},O6346:function(a){for(var b=0;b<a.length;b++)a[b]={red:a[b].r,green:a[b].g,blue:a[b].b,alpha:a[b].alpha};return a},
O2938:function(a){for(var b=0;b<a.length;b++)a[b]&&(a[b]={r:a[b].red,g:a[b].green,b:a[b].blue,alpha:a[b].alpha});return a},O7145:function(){var a=ig.game.O4507(this.data);this.O2691(a);this.O9594(a);var b={};b.name=a.name?a.name.toLowerCase():"";a.type&&(b.type=ig.game.brainManager.O8331(this.types[a.type].key));b.cells=a.pixels;b.colors=this.O6346(a.colors);b.text=null;if("dynamicThing"==this.data.type||"farBack"==this.data.type||"mover"==this.data.type)b.text=a.prop.text?a.prop.text:"";else if("readable"==
this.data.type||"interacting"==this.data.type)b.text=a.prop.textData?a.prop.textData:"";b.infoText=this.data.prop&&this.data.prop.info?this.data.prop.info:null;b.info=this.O6331();b.history=this.O2196(this.O3064);return b},O2196:function(a){if(a)for(var b=0;b<a.length;b++){if(a[b]&&a[b].colors)for(var c=a[b].colors,d=0;d<c.length;d++){var e=c[d];e.red=e.r;e.green=e.g;e.blue=e.b}}else a=[];return a},userScriptEditorRunStarted:function(a){if("changer"==this.data.type){var b=this.O7145(),c=this;ig.game.userScriptManager.O1848(a,
b,"change",function(d){if(d.internal_error)ig.game.userScriptEditor&&ig.game.userScriptEditor.O5966(d.internal_error.message,d.internal_error.lineNumber,d.internal_error.columnNumber,!0);else{var e=c.userScriptEditorReturnsData(d);e&&ig.game.alertDialog.open((d&&d.feedback?"":"Oops... ")+e,null,null,null,null,!0);c.O2086()}})}return!1},O6331:function(){return{selectedIndex:this.O4389,secondSelectedIndex:this.O4782,selectedCell:this.selectedCell,transparentIndex:11,nameMaxLength:ig.game.validations.itemName.maxLength,
O9970:this.O5495}},userScriptEditorReturnsData:function(a){var b=null;if(a.feedback&&"string"===typeof a.feedback)b=a.feedback;else{if(a.type){var c=ig.game.brainManager.getBaseTypeFromEnumType(a.type);c?(c=this.O4799(c),this.types[c]&&(!this.types[c].O8137||1>=this.types[c].O8137)?this.data.type=c:(b="This type is not supported with Changers",window.consoleref.log(b,a.type))):(b="An invalid type was returned",window.consoleref.log(b,a.type))}!b&&a.cells&&(c=ig.game.O4507(a.cells),c[0]&&c[0][0]&&
void 0!==c[0][0][0]&&"object"===typeof c[0][0][0]&&(a.colors=this.O6902(c,this.maxColors,this.transparentIndex),c=this.O1676(c,a.colors,this.transparentIndex)),(c=this.O3286(c,this.O4799(this.data.type)))?this.data.pixels=c:(b="Invalid cells were returned",window.consoleref.log(b,a.cells)));if(!b&&a.colors&&Array.isArray(a.colors)){c=ig.game.O4507(a.colors);for(var d=0;d<this.maxColors;d++)c[d]||(c[d]={red:255,green:255,blue:255,alpha:1});c=this.O2938(c);(c=this.O8978(c))?(this.data.colors=c,this.data.colors[this.transparentIndex]=
this.O9632(this.transparentIndex)):(b="Invalid colors were returned",window.consoleref.log(b,a.colors))}!b&&a.name&&"string"===typeof a.name&&(a.name=a.name.toLowerCase(),a.name=ig.game.validations.itemName.clean(a.name),a.name?this.data.name=a.name:(b="An invalid name was returned",window.consoleref.log(b,a.name)));!b&&a.text&&"string"===typeof a.text&&("dynamicThing"==this.data.type?(a.text.length>this.O8954&&(a.text=a.text.substr(0,this.O8954)),this.data.prop.text=a.text):"mift"==this.data.type?
(a.text.length>this.O4635&&(a.text=a.text.substr(0,this.O4635)),this.data.prop.text=a.text):"readable"==this.data.type?(1E6<a.text.length&&(a.text=a.text.substr(0,1E6)),this.data.prop.textData=a.text):"mover"==this.data.type?(a.text=ig.game.O2225.O5374(a.text),a.text.length>ig.game.O2225.textMaxLength&&(a.text=a.text.substr(0,ig.game.O2225.textMaxLength)),this.data.prop.text=a.text):"farBack"==this.data.type?(a.text.length>this.O3775&&(a.text=a.text.substr(0,this.O3775)),this.data.prop.text=a.text):
"interacting"==this.data.type&&(a.text.length>this.O1171&&(a.text=a.text.substr(0,this.O1171)),this.data.prop.textData=a.text));!b&&a.infoText&&"string"===typeof a.infoText&&(a.infoText.length>this.O5495&&(a.infoText=a.infoText.substr(0,this.O5495)),this.data.prop.info=a.infoText);b&&ig.game.sounds.shortWhoosh.play()}return b},O3286:function(a,b){b=this.types[this.data.type].key;var c=null,d=["VIEWABLE","DYNATHING","MUSICSHEET","FARBACK"],e="LIVING LIVANIM LIVMOV STACKWEARB MOTION INTERACT INTERMOT DYNATHING HOLDER".split(" "),
f="MNTGROUND MNTAIR MNTWATER VIEWABLE GLOW DECOBIG PLACENAME POINTER MUSICSHEET DECOFB STACKWEAR FARBACK".split(" "),g=["DECOVBIG"],h=0<="DECOANIM FLEXIBLE LIVELY LIVANIM LIVMOV HARMANIM PORTAL PORTALDIR DECOACT GATHER DECOTCH MOTION THROWER STACKWEAR LIQUID MNTGROUND MNTAIR MNTWATER VIEWABLE DYNATHING GLOW EMITTER AIMABLE INTERACT INTERMOT SPARKLING DECOFB MUSICSHEET HOLDER FARBACK".split(" ").indexOf(b),k=0<=["STACKWEARB"].indexOf(b),l=19,m=19;"MUSICSHEET"==b?(l=32,m=36):0<=e.indexOf(b)?m=l=29:
0<=f.indexOf(b)?m=l=38:0<=g.indexOf(b)&&(m=l=57);e=1;0<=["MOTION","INTERMOT","HOLDER"].indexOf(b)?e=3:0<=["MUSICSHEET","DYNATHING","HAPPENING"].indexOf(b)?e=Math.max(1,Math.min(a.length,9)):"FARBACK"==b?e=Math.max(1,Math.min(a.length,this.O1746)):0<=d.indexOf(b)?e=Math.max(2,Math.min(a.length,6)):h?e=2:k&&(e=9);if(Array.isArray(a)&&(1==a.length||2==a.length||9==a.length||a.length==e)&&a[0]&&void 0!==a[0][0]&&void 0!==a[0][0][0])for(c=[],d=Math.min(l,Math.max(2,a[0].length)),m=Math.min(m,Math.max(2,
a[0][0].length)),h=0;h<e&&null!=c;h++)if(Array.isArray(a[h]))for(c[h]=[],k=0;k<d;k++)for(c[h][k]=[],l=0;l<m;l++)c[h][k][l]=0,void 0!=a[h][k]&&void 0!=a[h][k][l]&&null!=a[h][k]&&null!=a[h][k][l]&&this.O5090(a[h][k][l])&&(c[h][k][l]=parseInt(a[h][k][l]));else c=null;return c},O9825:function(a){return a!=void 0&&a!=null&&this.O5090(a)&&a>=0&&a<=255},O8978:function(a){var b=null;if(Array.isArray(a)&&a.length<=this.maxColors){b=[];for(var c=0;null!=b&&c<a.length;c++){b[c]={r:0,g:0,b:0,alpha:1};var d=a[c];
if(d&&this.O9825(d.r)&&this.O9825(d.g)&&this.O9825(d.b)){if(b[c].r=parseInt(d.r),b[c].g=parseInt(d.g),b[c].b=parseInt(d.b),void 0!=d.alpha&&null!=d.alpha&&0<=d.alpha&&1>=d.alpha)b[c].alpha=parseFloat(parseFloat(d.alpha).toFixed(2))}else b=null}}return b},userScriptEditorOpenHelp:function(){this.data.type=="changer"&&ml.Misc.openUrl("/info-changer")},O1676:function(a,b,c){for(var d=a[0].length,e=a[0][0].length,f=0;f<a.length;f++)for(var g=0;g<d;g++)for(var h=0;h<e;h++){var k=a[f][g][h];k=0==k.alpha?
c:this.O6364(k,b);a[f][g][h]=k}return a},O6364:function(a,b){for(var c=-1,d=null,e=0;e<b.length;e++){var f=b[e];f&&(f=Math.sqrt(Math.abs(f.red-a.red))+Math.sqrt(Math.abs(f.green-a.green))+Math.sqrt(Math.abs(f.blue-a.blue))+10*Math.abs(f.alpha-a.alpha),null===d||f<d)&&(c=e,d=f)}return c},O6902:function(a,b,c){var d=this.O2996(a);for(a=[];a.length<b-1&&1<=ml.Misc.O4952(d);){var e=null,f=null,g;for(g in d)if(null==e||d[g]>e)e=d[g],f=g;e=f.split("_");e={red:parseInt(e[0]),green:parseInt(e[1]),blue:parseInt(e[2]),
alpha:parseFloat(e[3])};a.length==c&&a.push({red:0,green:0,blue:0,alpha:0});0<e.alpha&&a.push(e);delete d[f]}a[c]={red:0,green:0,blue:0,alpha:0};for(c=0;c<b;c++)a[c]||(a[c]={red:255,green:255,blue:255,alpha:1});return a},O2996:function(a){for(var b={},c=a[0].length,d=a[0][0].length,e=0;e<a.length;e++)for(var f=0;f<c;f++)for(var g=0;g<d;g++){var h=a[e][f][g];h=h.red+"_"+h.green+"_"+h.blue+"_"+h.alpha;void 0===b[h]&&(b[h]=0);b[h]++}return b},O2975:function(a){if(this.data.type){this.O6094();this.data.prop.changerId=
a;var b=this;this.O3282(a);var c=this.O7145();ig.game.userScriptManager.getResultByItemId(a,c,"change",function(d){if(d.internal_error)b.userScriptEditorShowError(d,a);else{var e=b.userScriptEditorReturnsData(d);e?ig.game.alertDialog.open((d&&d.feedback?"":"Oops... ")+e,null,null,null,null,!0):b.O6094();b.O2086()}})}else ig.game.alertDialog.open("Please set a type first")},O3282:function(a){(a=ig.game.O4261.getItemBasic(a,"ui_pnt10"))&&(a&&a.soundId?ig.game.sounds.O9961(a.soundId):ig.game.sounds.whoosh.play())},
O1285:function(a,b){var c=this;this.O3282(b);var d=["WRITABLE","INTERACT","BRAIN","CHANGER","FARBACK"];ig.game.O9817.O4538(a).done(function(e){if(e&&e.imageData&&e.name){var f=ig.game.O1257.O2970==e.creator,g=e.prop&&e.prop.attributes&&0<=e.prop.attributes.indexOf("clonable");(f||g)&&-1===ig.game.typesWithExternalBigData.indexOf(e.base)&&-1===d.indexOf(e.base)?(c.data={id:e.id,name:e.name,type:e.base,direction:e.rotation,prop:e.prop?ig.game.O4507(e.prop):{},colors:e.imageData.colors,pixels:e.imageData.pixels},
c.data.prop.clonedFrom=a,c.data.prop.changerId=b,c.data.prop&&ig.game.O2082.O3713(c.data),c.data.type=c.O4799(c.data.type),c.O6677(),e=c.O7145(),ig.game.userScriptManager.getResultByItemId(b,e,"change",function(h){if(h.internal_error)c.userScriptEditorShowError(h,b);else{var k=c.userScriptEditorReturnsData(h);k?c.userScriptEditorShowError(k,b,!(!h||!h.feedback)):c.O7295()}})):ig.game.sounds.nocando.play()}})},userScriptEditorShowError:function(a,b,c){ig.game.O7747.O5849(b,this).done(function(d){var e=
d&&d.name;d=d&&d.id;var f=a.internal_error?"line "+a.internal_error.lineNumber+", "+a.internal_error.message.toLowerCase():String(a).toLowerCase();var g=c?"says":"has an issue",h="this changer "+g;d!=ig.game.O1257.O2970&&(h="this changer by "+e+" "+g);ig.game.O1257.say(h);setTimeout(function(){ig.game.O1257.say('"'+f+'"')},1500)})},O9193:function(a){if(a!=ig.game.O1257.O2970){var b=this;ig.game.isLocal?(b.data.prop.toId=a,ig.game.friendsDialog.close(),ig.game.sounds.success.play(),ig.game.O9817.O5613(a,
b),b.O2086()):ig.game.O9817.O2415(a).done(function(c){c&&c.canMift?(b.data.prop.toId=a,ig.game.friendsDialog.close(),ig.game.sounds.success.play(),ig.game.O9817.O5613(a,b),b.O2086()):ig.game.alertDialog.O3813("You already Mifted this person recently, please wait a bit")})}else ig.game.sounds.nocando.play()},O8602:function(){if(this.isDragging&&this.mode=="default"&&ig.input.mouse){var a=ig.input.mouse.x,b=ig.input.mouse.y;if(this.dragLastMouseX!==null&&this.dragLastMouseY!==null){var c=a-this.dragLastMouseX,
d=b-this.dragLastMouseY,e=this.painterCanvasSize.x*ig.system.scale,f=this.painterCanvasSize.y*ig.system.scale,g=jQuery(window).width(),h=jQuery(window).height(),k=jQuery(this.canvas).position();c=k.left+c;d=k.top+d;c=Math.max(0,Math.min(g-e,c));d=Math.max(0,Math.min(h-f,d));jQuery(this.canvas).css({left:c+"px",top:d+"px"});e=jQuery(".painterInputBox");e.length>0&&(f=e.position(),e.css({left:f.left+(c-k.left)+"px",top:f.top+(d-k.top)+"px"}))}this.dragLastMouseX=a;this.dragLastMouseY=b}if(this.isRunning&&
this.data)switch(this.data.type){case "farBack":if(jQuery("#canvas").is(":hover")&&ig.game.alertDialog.isOpen&&"farBackText"==ig.game.alertDialog.contextId&&ig.input.pressed("click")){var l=this.O3887();l=l.x+" "+l.y+"\r";ig.game.alertDialog.O3141(l);this.O2905()}break;case "dynamicThing":jQuery("#canvas").is(":hover")&&ig.game.alertDialog.isOpen&&"dynamicThingText"==ig.game.alertDialog.contextId&&ig.input.pressed("click")&&(l=this.O2797(),l=" "+l.x+" "+l.y,ig.game.alertDialog.O3141(l),this.O2905())}},
draw:function(){if(this.isRunning&&this.data)switch(this.data.type){case "farBack":if(jQuery("#canvas").is(":hover")){var a=this.O3887();a=a.x+" "+a.y;ig.system.context.globalAlpha=.5;ig.game.blackWhiteFont.draw(a,ig.input.mouse.x,ig.input.mouse.y-9,ig.Font.ALIGN.CENTER);ig.system.context.globalAlpha=1}break;case "dynamicThing":jQuery("#canvas").is(":hover")&&ig.game.alertDialog.isOpen&&"dynamicThingText"==ig.game.alertDialog.contextId&&(a=this.O2797(),a=a.x+" "+a.y,ig.system.context.globalAlpha=
.5,ig.game.blackWhiteFont.draw(a,ig.input.mouse.x,ig.input.mouse.y-9,ig.Font.ALIGN.CENTER),ig.system.context.globalAlpha=1)}},O3887:function(){var a=this.O5096(),b=ig.game.O4774.O2478();return{x:Math.round(b.x-a.x-ig.game.O2953),y:Math.round(b.y-a.y-5)}},O2797:function(){var a=this.O5096(),b=ig.game.O4774.O2478();return{x:Math.round(b.x-a.x+4.5),y:Math.round(b.y-a.y+9.5)}},O7002:function(){this.O3942();this.O4764=!0;this.O9370=jQuery('<div style="position: absolute; color: white; font-size: '+(Math.floor(4*
ig.system.scale)+"px; text-shadow: 0px 0px 3px black; left: 0; top: 0; z-index: 1000; text-transform: uppercase; width: "+100*this.pageZoom+"px; text-align: center;font-family: 'Press Start 2P', arial, helvetica, sans-serif; display: none;\"></div>"));this.O9370.appendTo("body")},O3942:function(){this.O4764=!1;this.O6920=[];this.O1107=[];this.O7169={};this.O9370&&this.O9370.remove()},O7683:function(a,b,c){var d="";a&&a.screenName&&(d=a.screenName);this.O7169[b+"_"+c]=d},O8639:function(a,b){var c=
"";a=a+"_"+b;this.O7169[a]&&(c=this.O7169[a]);return c},O3490:function(){if(this.O4764&&this.data.type){var a={};1<=this.O6920.length&&(a.pixels=this.O6920,this.O6920=[]);1<=this.O1107.length&&(a.colors=this.O1107,this.O1107=[]);if(a.pixels||a.colors){var b=ig.game.brainManager.enumType[this.data.type];b!=this.O8214&&(a.t=b);ig.game.O7836.O7415(a)}}},O6197:function(a,b,c){this.O4764&&50>this.O6920.length&&(this.O6920.push({x:b,y:c,i:a[b][c]}),this.O7683(ig.game.O1257,b,c))},O6861:function(a){if(this.O4764&&
this.O1107.length<this.maxColors){var b=this.data.colors[a];this.O1107.push({i:a,rgba:{r:b.r,g:b.g,b:b.b,a:b.alpha}})}},O3165:function(a,b){if(this.isRunning&&this.O4764&&this.data.pixels&&this.data.pixels[this.selectedCell]&&ig.game.O8518&&!ig.game.O8518.O5167(b.O2970)&&ig.game.brainManager&&(a.t||(a.t=this.O8214),this.data.type&&a.t==ig.game.brainManager.enumType[this.data.type])){var c=this.data.pixels[this.selectedCell],d=!1;if(Array.isArray(a.pixels)){for(d=0;d<a.pixels.length;d++){var e=a.pixels[d],
f=e.x,g=e.y;void 0!==c[f]&&void 0!==c[f][g]&&(e=e.i,e<this.maxColors&&(c[f][g]=e,this.O7683(b,f,g),"default"==this.mode&&(e==this.transparentIndex?this.O4382(f,g):this.O9806(f,g))))}d=!0}if(Array.isArray(a.colors)){for(d=0;d<a.colors.length;d++)if(c=a.colors[d],e=c.i,e<this.maxColors&&(c=c.rgba)&&this.O9825(c.r)&&this.O9825(c.g)&&this.O9825(c.b)&&(void 0===c.a||0<=c.a&&1>=c.a))f={},f.r=parseInt(c.r),f.g=parseInt(c.g),f.b=parseInt(c.b),f.alpha=parseFloat(c.a).toFixed(2),this.data.colors[e]=f;"default"==
this.mode&&(this.O8723(),this.updatePalette());d=!0}d&&ig.game.decorator.O9016(b.pos)}}})});ig.baked=!0;
ig.module("game.ui.itemcontextmenu").requires("game.ui.components.uidialog","game.ui.components.uiclicktext").defines(function(){window.ItemContextMenu=UIDialog.extend({O6146:!0,O2945:!0,O9925:19,pos:{x:0,y:0},itemNamePos:{x:4,y:4},itemTypePos:{x:4,y:11},creatorSymbolPos:{x:3,y:20},creatorNamePos:{x:31,y:24},toggleUnlistedPos:{x:4,y:57},cancelPos:{x:86,y:57},placerLabelPos:{x:4,y:34},placerNamePos:{x:31,y:34},collectedSymbolPos:{x:2,y:58},collectButtonPos:{x:2,y:57},collectedTotalPos:{x:23,y:60},
alreadyCollectedPos:{x:27,y:59},placedSymbolPos:{x:62,y:56},placedTotalPos:{x:83,y:60},transportPos:{x:84,y:45},flagPos:{x:105,y:22},unlistedPos:{x:101,y:22},collectorsSymbolPos:{x:3,y:17},collectorsNamesStartPos:{x:41,y:17},O4691:11,O6710:8,backgroundAlpha:.7,O5236:.7,O6646:.7,O4856:.4,creatorNameAlpha:.4,O4102:.4,O1220:.4,O6984:.4,O2229:.4,O1503:.6,O7527:.4,symbolsAlpha:.4,O9810:null,O6625:!1,O8553:10,clickSpotCloseLocation:{x:103,y:3,width:8,height:8},infoButtonPos:{x:4,y:45},clickSpotClose:null,
clickSpotFlagLocation:{x:0,y:0,width:7,height:10},clickSpotFlag:null,clickSpotUnlistedLocation:{x:0,y:0,width:9,height:9},clickSpotUnlisted:null,O3535:null,O9937:null,O3060:null,O8947:null,clickSpotTransport:null,clickSpotCollectButton:null,clickSpotInfo:null,clickSpotShortcutCheckbox:null,O2517:null,O7974:null,O7032:null,O9662:null,O3241:null,shortcutCheckboxPos:{x:64,y:44},O1727:[],O4632:null,placer:{id:null,name:null},O3787:!1,O9714:null,collectors:[],timesCd:null,timesPd:null,creatorName:null,
O4744:"MAIN",collected:!1,flagged:!1,O1371:!1,O1713:!1,isUnlisted:!1,O7848:!1,O1751:!1,wasAlertedOfCollectCountLimitations:!1,O9888:-1,O4373:2,O8946:!0,O6820:!1,init:function(a,b,c){this.size.x=ig.game.O8159.itemContextMenuBg.width;this.size.y=ig.game.O8159.itemContextMenuBg.height;this.halfSize={};this.halfSize.x=Math.floor(ig.game.O8159.itemContextMenuBg.width/2);this.halfSize.y=Math.floor(ig.game.O8159.itemContextMenuBg.height/2);this.arrows={};this.arrows.size=ig.game.O8159.O9089.width;this.arrows.halfSize=
Math.floor(this.arrows.size/2);this.clickSpotFlagLocation.x=this.flagPos.x-1;this.clickSpotFlagLocation.y=this.flagPos.y-1;this.clickSpotUnlistedLocation.x=this.unlistedPos.x-1;this.clickSpotUnlistedLocation.y=this.unlistedPos.y-1;this.pos.x=a;this.pos.y=b-this.size.y-2;this.O3270=c},O5157:function(a,b){ig.game.cloneHistoryDialog.isOpen&&ig.game.cloneHistoryDialog.close();if(this.isOpen&&(!this.maploc||this.maploc.x==a.x&&this.maploc.y==a.y))this.close();else{this.O6625=!!b;this.O3801();this.maploc=
a;this.O4632=ig.game.O6112.O8704(a);this.O3567();this.O4290();this.O2197();this.O6625||this.O8606(a);this.O5347(a);this.O1717();var c=this;this.O4632&&(this.O4632.thing.dataLoaded?this.O5052(a,c.O6625):ig.game.O4261.getItem_P(this.O4632.thing.id,"d_itemcontext1").done(function(){c.O4632.thing=ig.game.O4261.getItem(c.O4632.thing.id,"item_context_menu__open_for_map_location");c.O5052(a,c.O6625)}))}},O5052:function(a,b){this.O4576();this.O1871(a,b);this.O9239();this.open()},O9094:function(a){ig.game.cloneHistoryDialog.isOpen&&
ig.game.cloneHistoryDialog.close();if(!this.isOpen||this.O4632&&this.O4632.thing!=a.thing){this.O3801();this.O4632={thing:a.thing,rotation:a.rotation,flip:a.flip};this.O3567();this.O4290();this.O2197();this.O1717();var b=this;this.O4632.thing.dataLoaded?this.openForPanelItemWhenDataAvailable(a.pos):ig.game.O4261.getItem_P(this.O4632.thing.id,"d_itemcontext2").done(function(){b.O4632.thing=ig.game.O4261.getItem(b.O4632.thing.id,"item_context_menu__open_for_map_panel_item");b.openForPanelItemWhenDataAvailable(a.pos)})}else this.close()},
O3076:function(a,b,c,d,e,f){if(!this.isOpen||this.O4632&&this.O4632.thing!=b){this.O3801();this.O7213=!!e;this.O4632={thing:b,rotation:a?a.rot:0,flip:a?a.flip:0};this.O3567();this.O4290();this.O2197();this.O1717();this.O1751=f;var g=this;this.O4632.thing.dataLoaded?this.O5914(c,d):ig.game.O4261.getItem_P(this.O4632.thing.id,"d_itemcontext3").done(function(){g.O4632.thing=ig.game.O4261.getItem(g.O4632.thing.id,"item_context_menu__open_for_holder_or_dialog_item");g.O5914(c,d)})}else this.close()},O4576:function(){this.O1713=
!(!this.O4632||!this.O4632.thing||this.O4632.thing.creatorId!=ig.game.O1257.O2970)},openForPanelItemWhenDataAvailable:function(a){this.O4576();ig.game.O1795||(this.O8738(a),this.O9239(),this.open());this.O8051()},O5914:function(a,b){this.O4576();this.screenSector=this.O9573.TOP;ig.game.playerDialog&&ig.game.playerDialog.isOpen&&(this.screenSector=this.O9573.BOTTOM);this.O7984(a);this.O9239();b||ig.game.O2974(null,null,!0);this.toClose=!1;this.isOpen=!0;this.O8051();this.O3787=!0},O3801:function(){this.O9662=
this.O9810=null;this.flagged=this.collected=!1;this.O4744=this.menuContexts.MAIN;this.collectors=[];this.placer={id:null,name:null};this.clickSpotFlag=this.clickSpotUnlisted=this.clickSpotCollectButton=this.O7032=this.O8947=this.O7974=this.O3535=this.maploc=this.creatorName=this.timesCd=this.timesPd=null;this.O7213=this.O1371=this.O3787=!1;this.O9888=-1;this.O2517=this.clickSpotShortcutCheckbox=this.O3241=this.clickSpotInfo=null;this.O1751=this.O7848=this.isUnlisted=this.O1713=this.O6820=!1},O8606:function(a){if(a&&
a.y){a=ig.game.O4507(a);--a.y;var b=ig.game.O6112.O8704(a);b&&b.thing&&"INTERACT"==b.thing.base&&b.thing.attributes&&b.thing.attributes.affectsBelow&&(this.O9810=new ItemContextMenu,this.O9810.O5157(a,!0))}},O1871:function(a,b){this.O9714=ig.game.O6112.O1498(a.x,a.y);this.screenSector=this.O3178(a,b);this.O7984(this.O9714,b)},O8738:function(a){this.screenSector=this.O9573.RIGHT;this.O7984(a)},O7984:function(a,b){var c=Math.floor(this.O9925/2)+1;if(null==this.screenSector)return null;this.screenSector==
this.O9573.BOTTOM||this.screenSector==this.O9573.UPPERMIDDLE||b?(this.pos.x=a.x+c-this.halfSize.x,this.pos.y=a.y+c-this.size.y-this.arrows.size):this.screenSector==this.O9573.TOP||this.screenSector==this.O9573.LOWERMIDDLE?(this.pos.x=a.x+c-this.size.x/2,this.pos.y=a.y+c+this.arrows.size-1):this.screenSector==this.O9573.LEFT?(this.pos.x=a.x+c+this.arrows.size-1,this.pos.y=a.y+c-this.halfSize.y-1):this.screenSector==this.O9573.RIGHT&&(this.pos.x=a.x+c-this.size.x-this.arrows.size+1,this.pos.y=a.y+c-
this.halfSize.y-1);c=ig.system.height-1-ig.game.O8159.itemContextMenuBg.height;a=this.pos.y;1>this.pos.y?this.pos.y=1:this.pos.y>c&&(this.pos.y=c);this.O8946=5>=Math.abs(a-this.pos.y)},O3355:function(){for(var a=0;a<this.collectors.length;a++)this.O9797(a,a==this.collectors.length-1)},O9797:function(a,b){var c=this,d=this.collectors[a];this.O1727[a]=new UIClickText({x:this.pos.x+this.collectorsNamesStartPos.x,y:this.pos.y+this.collectorsNamesStartPos.y+a*this.O4691+(b?this.O6710:0)},ig.game.strings.O7686(d?
d.name:"-",16),ig.game.blackSmallFont,"#000000",this.creatorNameAlpha);d?this.O1727[a].onClick=function(){c.wasAlertedOfCollectCountLimitations||0!=c.O9888||d._id==ig.game.O1257.O2970?(c.close(),ig.game.playerDialog.openForPlayerId(d._id)):ig.game.alertDialog.open({text:"Note that even at 0 placements, the collector may have found this item in a public Holder or received it from an Interacting and such.",O3144:!0,O9267:function(){c.wasAlertedOfCollectCountLimitations=!0;ig.game.playerDialog.openForPlayerId(d._id)}})}:
this.O1727[a].O1378=!1},O9239:function(){var a=this;this.clickSpotClose=new UIClickSpot({x:this.pos.x+this.clickSpotCloseLocation.x,y:this.pos.y+this.clickSpotCloseLocation.y},{x:this.clickSpotCloseLocation.width,y:this.clickSpotCloseLocation.height},!1,null);this.clickSpotClose.onClick=function(){a.close()};this.O3333();this.initClickTextInfo();this.getIsPlacename()&&(this.clickSpotTransport=new UIClickSpot({x:this.pos.x+this.transportPos.x,y:this.pos.y+this.transportPos.y},{x:ig.game.O8159.openMapThereButton.width,
y:ig.game.O8159.openMapThereButton.height},!1,null),this.clickSpotTransport.onClick=function(){ig.game.O8100.O5069(a.O4632.thing.id)});this.O1713?(this.clickSpotUnlisted=new UIClickSpot({x:this.pos.x+this.clickSpotUnlistedLocation.x,y:this.pos.y+this.clickSpotUnlistedLocation.y},{x:this.clickSpotUnlistedLocation.width,y:this.clickSpotUnlistedLocation.height},!1,null),this.clickSpotUnlisted.onClick=function(){a.O8267();a.O4744=a.menuContexts.UNLISTED}):ig.game.O1257.isFullAccount&&(this.clickSpotFlag=
new UIClickSpot({x:this.pos.x+this.clickSpotFlagLocation.x,y:this.pos.y+this.clickSpotFlagLocation.y},{x:this.clickSpotFlagLocation.width,y:this.clickSpotFlagLocation.height},!1,null),this.clickSpotFlag.onClick=function(){a.O1713||(ig.game.O1257.rank>=a.O4373?ig.game.O9817.O1388(a.O4632.thing.id,a.maploc,a).done(function(b){a.O2502(b)}):ig.game.O1002.O7063())});this.O9719();this.O9102();this.O5200();this.O3060=new UIClickText({x:this.pos.x+this.collectedTotalPos.x,y:this.pos.y+this.collectedTotalPos.y},
ig.game.strings.O9754(this.timesCd),ig.game.blackFont,"#000000",this.O6984);this.O3060.onClick=function(){a.O6095();a.O4744=a.menuContexts.COLLECTORS};this.O4632.thing.clonedFrom&&(this.O8947=new UIClickText({x:this.pos.x+4,y:this.pos.y+11},"cloned",ig.game.blackSmallFont,"#000000",this.O6984),this.O8947.onClick=function(){ig.game.cloneHistoryDialog.open(a.O4632.thing.id)});!ig.game.isFullAccount||!this.O1713&&(ig.game.cloneHistoryDialog&&ig.game.cloneHistoryDialog.isOpen||ig.game.playerDialog&&ig.game.playerDialog.isOpen||
this.O7213)||(this.clickSpotCollectButton=new UIClickSpot({x:this.pos.x+this.collectButtonPos.x,y:this.pos.y+this.collectButtonPos.y},{x:ig.game.O8159.collectButton.width,y:ig.game.O8159.collectButton.height},!1,null),this.clickSpotCollectButton.onClick=function(){var b=ig.game.panelSet.panels[ig.game.panelSet.tabEnum.collected];1!=ig.game.panelSet.tabState&&ig.game.panelSet.O6923(1);ig.game.O7747.O1015(a.O4632.thing.id,b.O1875,a.maploc);a.close()});this.O1371=!0},O5200:function(){var a=this,b=this.O4632?
this.O4632.thing:null;b&&(("BRAIN"==b.base||"HAPPENING"==b.base||"GENERATOR"==b.base)&&b.textSize||0<=["CHANGER","MOVER","FARBACK"].indexOf(b.base))&&(a.O7974=new UIClickText({x:a.pos.x+80,y:a.pos.y+11},"view",ig.game.blackSmallFont,"#000000",.4),a.O7974.onClick=function(){if("MOVER"==b.base){var c=ig.game.O2225.O9047(b.text);c='<pre style="font-size: 160%; text-align: left; margin: 15px">'+ig.game.strings.O9955(c)+"</pre>";ig.game.alertDialog.open({html:c})}else"FARBACK"==b.base?(c='<div class="readOnlyCode"><pre style="font-size: 130%; text-align: left; margin: 15px">'+
ig.game.strings.O9955(b.text.toUpperCase())+"</pre></div>",ig.game.alertDialog.open({html:c})):(ig.game.O4261.getItem_P(b.id,"d_itemcontext4").done(function(d){d='<div class="readOnlyCode"><pre>'+ig.game.strings.O9955(d&&d.textData?d.textData:"")+"</pre></div>";ig.game.alertDialog.open(d,!0,null,null,null,!0)}),ml.Misc.O7959()&&ig.game.O9817.O4447(b.id).done(function(d){console.log("O4447 returns",d)}));a.close()})},O9102:function(){var a=this;this.placer.id&&(this.O9937=new UIClickText({x:this.pos.x+
this.placerNamePos.x,y:this.pos.y+this.placerNamePos.y},ig.game.strings.O7686(this.placer.name,this.O8553),ig.game.blackSmallFont,"#000000",this.O1220,!this.placer.id),this.O9937.onClick=function(){a.placer.id&&(ig.game.O1257.O2970==a.placer.id?ig.game.playerDialog.O7845():ig.game.playerDialog.openForPlayerId(a.placer.id,this.O9714),a.close())})},O3333:function(){if(!this.O1751){var a=this,b=this.O4632?this.O4632.thing:null,c=["HOLDER","WRITABLE","STACKWEAR","DYNATHING"],d="";if(b&&0<=c.indexOf(b.base)&&
!ig.ua.mobile){var e="";switch(b.base){case "HOLDER":this.O6820=b.id==ig.game.settings.travelHolderId;d="h";e="travelHolderId";break;case "WRITABLE":this.O6820=b.id==ig.game.settings.shortcutWritableId;d="y";e="shortcutWritableId";break;case "STACKWEAR":case "DYNATHING":if("STACKWEAR"==b.base||ig.game.attachmentManager.O5110(b.base,b.attributes))this.O6820=b.id==ig.game.settings.shortcutWearableId,d="l",e="shortcutWearableId"}""!=d&&(this.clickSpotShortcutCheckbox=new UIClickSpot({x:this.pos.x+this.shortcutCheckboxPos.x,
y:this.pos.y+this.shortcutCheckboxPos.y},{x:ig.game.O8159.checkbox.width,y:ig.game.O8159.checkbox.height},!1,null),this.clickSpotShortcutCheckbox.onClick=function(){a.O2850(e)},this.O2517=new UIClickText({x:this.pos.x+this.shortcutCheckboxPos.x+10,y:this.pos.y+this.shortcutCheckboxPos.y+2},"use ctrl+"+d,ig.game.blackSmallFont,"#000000",.4),this.O2517.onClick=function(){a.O2850(e)},this.O2517.O1378=!1)}""==d&&(this.O2517=this.clickSpotShortcutCheckbox=null,this.O6820=!1)}},O2850:function(a){this.O6820?
(this.O6820=!1,ig.game.settings.clear(a)):(this.O6820=!0,ig.game.settings.set(a,this.O4632.thing.id))},initClickTextInfo:function(){var a=this;if(this.O4632&&this.O4632.thing&&(this.O4632.thing.creditUrl||this.O4632.thing.info)){var b=this.O4632.thing.creditUrl?"Credits: "+ig.game.sounds.O937(this.O4632.thing.creditUrl):this.O4632.thing.info,c=b,d=25;this.clickSpotShortcutCheckbox&&(d=12);var e=!1;0<=c.indexOf("://")&&(c=ig.game.strings.replaceAll(c,"http://",""),c=ig.game.strings.replaceAll(c,"https://",
""),c+="..",e=!0);c.length>d&&(c=ig.game.strings.O7686(c,d),e=!0);this.clickSpotInfo=new UIClickSpot({x:this.pos.x+this.infoButtonPos.x,y:this.pos.y+this.infoButtonPos.y},{x:ig.game.O8159.aboutInfoButton.width,y:ig.game.O8159.aboutInfoButton.height},!1,null);this.clickSpotInfo.onClick=function(){a.O9020(b)};this.O3241=new UIClickText({x:this.pos.x+this.infoButtonPos.x+9,y:this.pos.y+this.infoButtonPos.y+1},c,ig.game.blackSmallFont,"#000000",.4,!e);this.O3241.onClick=function(){a.O9020(b)}}else this.O3241=
this.clickSpotInfo=null},O9020:function(a){a=ig.game.strings.O7812(a);ig.game.alertDialog.open({html:a,O5358:!0})},O9719:function(){var a=this;a.O4632&&a.O4632.thing&&a.O4632.thing.creatorId&&(this.O3535=new UIClickText({x:this.pos.x+this.creatorNamePos.x,y:this.pos.y+this.creatorNamePos.y},ig.game.strings.O7686(this.creatorName,this.O8553),ig.game.blackFont,"#000000",this.creatorNameAlpha),this.O3535.onClick=function(){a.O4632.thing.creatorId&&(ig.game.O1257.O2970==a.O4632.thing.creatorId?ig.game.playerDialog.O7845():
ig.game.playerDialog.openForPlayerId(a.O4632.thing.creatorId,this.O9714),a.close())})},O8267:function(){if(this.O1713){var a=this.O4632.thing.id,b=this;this.O7032=new UIClickText({x:this.pos.x+this.toggleUnlistedPos.x,y:this.pos.y+this.toggleUnlistedPos.y},this.isUnlisted?"List":"Unlist",ig.game.blackFont,"#000000",.4);this.O7032.onClick=function(){b.isUnlisted=!b.isUnlisted;b.O4744=b.menuContexts.MAIN;ig.game.O9817.O7360(a,b.isUnlisted,this).done(function(){ig.game.sounds.success.play()})};this.clickTextCancel=
new UIClickText({x:this.pos.x+this.cancelPos.x,y:this.pos.y+this.cancelPos.y},"Cancel",ig.game.blackFont,"#000000",.4);this.clickTextCancel.onClick=function(){b.O4744=b.menuContexts.MAIN}}},update:function(){if(this.isOpen){(ig.input.state("left")||ig.input.state("right")||ig.input.state("jump")||ig.input.state("down"))&&this.close();this.clickSpotClose.update();this.clickSpotTransport&&this.clickSpotTransport.update();if(this.O4744==this.menuContexts.MAIN)this.O4632&&this.O4632.thing&&this.O4632.thing.creatorId&&
this.O3535&&this.O3535.update(),this.placer.id&&this.O9937.update(),this.O3060.update(),this.clickSpotCollectButton&&this.clickSpotCollectButton.update(),this.clickSpotFlag&&this.clickSpotFlag.update(),this.clickSpotUnlisted&&this.clickSpotUnlisted.update(),this.clickSpotInfo&&this.clickSpotInfo.update(),this.O7974&&this.O7974.update(),this.O8947&&this.O8947.update(),this.O3241&&this.O3241.update(),this.clickSpotShortcutCheckbox&&(this.clickSpotShortcutCheckbox.update(),this.O2517&&this.O2517.update());
else if(this.O4744==this.menuContexts.COLLECTORS)for(var a=0;a<this.O1727.length;a++)this.O1727[a].update();else this.O4744==this.menuContexts.UNLISTED&&this.O7848&&(this.O7032&&this.O7032.update(),this.clickTextCancel&&this.clickTextCancel.update());this.O9810&&this.O9810.update()}this.parent()},draw:function(){if(this.isOpen){ig.system.context.globalAlpha=this.backgroundAlpha;ig.game.O8159.O2299(this.pos.x,this.pos.y);this.O5117();ig.system.context.globalAlpha=1;if(this.O7213){if(ig.game.isFullAccount&&
this.O4632.thing.attributes&&this.O4632.thing.attributes.clonable){ig.system.context.globalAlpha=.4;var a=ig.game.isFullAccount?this.itemTypePos.x+30:this.itemTypePos.x,b=ig.game.isFullAccount?this.itemTypePos.y-1:this.itemTypePos.y-3,c="clonable";this.O4632.thing.clonedFrom&&(c+=",");ig.game.blackSmallFont.draw(c,this.pos.x+a,this.pos.y+b)}}else ig.system.context.globalAlpha=this.O6646,a=this.O4632.thing.name,!this.O9662&&23<a.length&&(this.O9662=new ml.Timer),this.O9662&&(b=Math.round(3*(this.O9662.delta()-
1)),a=a.substr(b.limit(0,20),22),0>=b?a+="..":21<b&&(this.O9662=new ml.Timer)),ig.game.blackFont.draw(a,this.pos.x+this.itemNamePos.x,this.pos.y+this.itemNamePos.y);ig.system.context.globalAlpha=1;if(this.O4744==this.menuContexts.MAIN)a=this.getIsPlacename(),ig.system.context.globalAlpha=this.symbolsAlpha,ig.game.O8159.O8064(this.pos.x+this.creatorSymbolPos.x,this.pos.y+this.creatorSymbolPos.y),ig.game.O8159.O2647(this.pos.x+this.collectedSymbolPos.x,this.pos.y+this.collectedSymbolPos.y),this.clickSpotCollectButton&&
this.clickSpotCollectButton.isHovered&&ig.game.O8159.O6099(this.pos.x+this.collectButtonPos.x,this.pos.y+this.collectButtonPos.y,.9),a||ig.game.O8159.O3859(this.pos.x+this.placedSymbolPos.x,this.pos.y+this.placedSymbolPos.y),ig.system.context.globalAlpha=1,ig.system.context.globalAlpha=this.O4856,(b=""+this.O4632.thing.O5293())&&"string"===typeof b&&this.O4632.thing.attributes&&this.O4632.thing.attributes.clonable&&(b+=", clonable"),this.O4632.thing.changerId&&(b+=", changed"),b=ig.game.strings.O7686(b,
this.O7974?13:18),"BRAIN"!=this.O4632.thing.base&&"HAPPENING"!=this.O4632.thing.base||this.O4632.thing.textSize||(b+=" (empty)"),ig.game.blackSmallFont.draw(b,this.pos.x+this.itemTypePos.x+(this.O4632.thing.clonedFrom?26:0),this.pos.y+this.itemTypePos.y),ig.system.context.globalAlpha=this.O4102,this.placer.id&&ig.game.blackSmallFont.draw("placer:",this.pos.x+this.placerLabelPos.x,this.pos.y+this.placerLabelPos.y),ig.system.context.globalAlpha=1,this.O4632&&this.O4632.thing&&this.O4632.thing.creatorId&&
(this.O3535.draw(),b=ml.Misc.getTimestampFromObjectId(this.O4632.thing.id),this.creatorName&&b&&(ig.system.context.globalAlpha=this.creatorNameAlpha,b=ig.game.strings.O6141(b,!0),b=ig.game.strings.replaceAll(b," ago",""),ig.game.blackSmallFont.draw(b,this.O3535.pos.x+this.O3535.size.x+4,this.O3535.pos.y),ig.system.context.globalAlpha=1)),this.O8947&&this.O8947.draw(),this.placer.id&&(this.O9937.draw(),this.placer.placedTime&&(ig.system.context.globalAlpha=this.O4102,b=ig.game.strings.O3041(this.placer.placedTime,
!0),b=ig.game.strings.replaceAll(b," ago",""),ig.game.blackSmallFont.draw(b,this.O9937.pos.x+this.O9937.size.x+4,this.O9937.pos.y),ig.system.context.globalAlpha=1)),this.O7974&&this.O7974.draw(),this.O3060&&this.O3060.draw(),this.clickSpotFlag&&!this.O1713&&(this.flagged?ig.game.O8159.O7515(this.pos.x+this.flagPos.x,this.pos.y+this.flagPos.y,.8):ig.game.O8159.O6235(this.pos.x+this.flagPos.x,this.pos.y+this.flagPos.y,.5)),this.clickSpotUnlisted&&this.O7848&&this.O1713&&(this.isUnlisted?ig.game.O8159.O4582(this.pos.x+
this.unlistedPos.x,this.pos.y+this.unlistedPos.y,.8):ig.game.O8159.O8767(this.pos.x+this.unlistedPos.x,this.pos.y+this.unlistedPos.y,.4)),this.collected&&(ig.system.context.globalAlpha=this.O1503,ig.game.O8159.O4980(this.pos.x+this.O3060.size.x+this.alreadyCollectedPos.x,this.pos.y+this.alreadyCollectedPos.y),ig.system.context.globalAlpha=1),a?ig.game.O8159.O9174(this.pos.x+this.transportPos.x,this.pos.y+this.transportPos.y,.75):(ig.system.context.globalAlpha=this.O2229,ig.game.blackFont.draw(ig.game.strings.O9754(this.timesPd),
this.pos.x+this.placedTotalPos.x,this.pos.y+this.placedTotalPos.y),ig.system.context.globalAlpha=1),this.clickSpotInfo&&ig.game.O8159.draw(this.pos.x+this.infoButtonPos.x,this.pos.y+this.infoButtonPos.y,.4,ig.game.O8159.aboutInfoButton),this.O3241&&this.O3241.draw(),this.clickSpotShortcutCheckbox&&(ig.game.O8159.draw(this.pos.x+this.shortcutCheckboxPos.x,this.pos.y+this.shortcutCheckboxPos.y,.9,ig.game.O8159["checkbox"+(this.O6820?"Active":"")]),this.O2517&&this.O2517.draw());else if(this.O4744==
this.menuContexts.COLLECTORS){ig.system.context.globalAlpha=this.O7527;ig.game.O8159.O3783(this.pos.x+this.collectorsSymbolPos.x,this.pos.y+this.collectorsSymbolPos.y);ig.game.blackSmallFont.draw("1st:",this.pos.x+this.collectorsNamesStartPos.x+-3,this.pos.y+this.collectorsNamesStartPos.y,ig.Font.ALIGN.RIGHT);ig.game.blackSmallFont.draw("2nd:",this.pos.x+this.collectorsNamesStartPos.x+-3,this.pos.y+this.collectorsNamesStartPos.y+this.O4691,ig.Font.ALIGN.RIGHT);ig.game.blackSmallFont.draw("3rd:",this.pos.x+
this.collectorsNamesStartPos.x+-3,this.pos.y+this.collectorsNamesStartPos.y+2*this.O4691,ig.Font.ALIGN.RIGHT);ig.game.blackSmallFont.draw("Latest:",this.pos.x+this.collectorsNamesStartPos.x+-3,this.pos.y+this.collectorsNamesStartPos.y+3*this.O4691+this.O6710,ig.Font.ALIGN.RIGHT);for(a=0;a<this.O1727.length;a++)this.O1727[a].draw();ig.system.context.globalAlpha=1}else this.O4744==this.menuContexts.UNLISTED&&this.O7848&&(ig.system.context.globalAlpha=.4,ig.game.blackSmallFont.draw("Things collected 5 & placed\r\n5 times show in Universe\r\nsearches unless Unlisted.",
this.pos.x+4,this.pos.y+18),ig.system.context.globalAlpha=1,this.O7032&&this.O7032.draw(),this.clickTextCancel&&this.clickTextCancel.draw());this.O9810&&this.O9810.draw()}},getIsPlacename:function(){return this.O4632&&this.O4632.thing&&"PLACENAME"==this.O4632.thing.base},O3178:function(a){ig.game.O6112.O2132(a.x,a.y);a=ig.game.O6112.O1498(a.x,a.y);var b=ig.system.width-(ig.system.width-(ig.game.panelSet?ig.game.panelSet.panelPos.x:54)),c=ig.system.height;return a.x<b/4?this.O9573.LEFT:a.x>b/4*3?this.O9573.RIGHT:
a.y>=c/4*3?this.O9573.BOTTOM:a.y>=c/4*2?this.O9573.LOWERMIDDLE:a.y>=c/4?this.O9573.UPPERMIDDLE:this.O9573.TOP},O9573:{TOP:"T",UPPERMIDDLE:"UM",LOWERMIDDLE:"LM",BOTTOM:"B",LEFT:"L",RIGHT:"R"},O5117:function(){if(null==this.screenSector)return null;this.O8946?this.screenSector==this.O9573.BOTTOM||this.screenSector==this.O9573.UPPERMIDDLE||this.O6625?(ig.game.O8159.O1575(this.pos.x+this.halfSize.x-this.arrows.halfSize-1,this.pos.y+this.size.y-1),this.O2356(),this.O6147(),this.O9508()):this.screenSector==
this.O9573.TOP||this.screenSector==this.O9573.LOWERMIDDLE?(ig.game.O8159.O6207(this.pos.x+this.halfSize.x-this.arrows.halfSize-1,this.pos.y-this.arrows.size+1),this.O2356(),this.O9508(),this.O6039()):this.screenSector==this.O9573.LEFT?(ig.game.O8159.O6075(this.pos.x-ig.game.O8159.O9089.width+1,this.pos.y+this.halfSize.y-this.arrows.halfSize),this.O6147(),this.O9508(),this.O6039()):this.screenSector==this.O9573.RIGHT&&(ig.game.O8159.O4729(this.pos.x+this.size.x-1,this.pos.y+this.halfSize.y-this.arrows.halfSize),
this.O2356(),this.O6147(),this.O6039()):(this.O2356(),this.O9508(),this.O6147(),this.O6039())},O2356:function(){ig.game.O8159.O8812(this.pos.x,this.pos.y+this.halfSize.y-this.arrows.halfSize)},O6147:function(){ig.game.O8159.drawItemContextMenuFillerHorz(this.pos.x+this.halfSize.x-this.arrows.halfSize-1,this.pos.y)},O9508:function(){ig.game.O8159.O8812(this.pos.x+this.size.x-1,this.pos.y+this.halfSize.y-this.arrows.halfSize)},O6039:function(){ig.game.O8159.drawItemContextMenuFillerHorz(this.pos.x+
this.halfSize.x-this.arrows.halfSize-1,this.pos.y+this.size.y-1)},O5347:function(a){ig.game.O9817.O3670(a,ig.game.O4873.O8027,ig.game.O4873.currentArea,this).done(function(b){b&&(this.placer.id=b.id,this.placer.name=b.name,this.placer.placedTime=b.ts,this.O9102())})},O6095:function(){ig.game.O9817.O4779(this.O4632.thing.id,this).done(function(a){if(a){this.collectors=[];for(var b=0;3>b;b++)this.collectors[b]=a.collectors[b];this.collectors[3]=a.lastCollector;this.O3355()}})},O3567:function(){var a=
this;ig.game.O9817.O2289(this.O4632.thing.id).done(function(b){b&&(a.timesCd=b.timesCd,a.timesPd=b.timesPd,0>a.timesPd&&(a.timesPd=0),a.O9888=a.timesPd,ml.Misc.O5740(a.O1371,function(){a.O3060&&a.O3060.O3550(ig.game.strings.O9754(a.timesCd))}))})},O4290:function(){var a=this;ig.game.O9817.O1270(this.O4632.thing.id,this).done(function(b){a.isUnlisted=!!b.unlisted;a.O7848=!0})},O2197:function(){var a=this;ig.game.O7747.O5849(this.O4632.thing.id,this).done(function(b){a.creatorName=b&&b.name;ml.Misc.O5740(a.O1371,
function(){a.O3535&&a.creatorName&&a.O3535.O3550(ig.game.strings.O7686(a.creatorName,a.O8553))})})},O3462:function(){ig.game.isFullAccount&&ig.game.O9817.O8987(this.O4632.thing.id,this).done(function(a){this.collected=a})},O1717:function(){ig.game.isFullAccount&&ig.game.O9817.O2396(this.O4632.thing.id,this).done(function(a){this.flagged=a})},O2502:function(a){this.flagged=!!a;ig.game.O1257.say(this.flagged?"i reported a creation":"i unreported a creation")},O8051:function(){if(this.O4632&&this.O4632.thing)if("MUSIC"==
this.O4632.thing.base){var a=this.O4632.thing;ig.game.O7763.reset();ig.game.O7763.O1749(a.musicData,a.id);ig.game.O7763.O9835();this.O2945=!1}else"SOUND"==this.O4632.thing.base&&ig.game.sounds.O9961(this.O4632.thing.id)},O6705:function(){if(this.O4632&&this.O4632.thing&&"MUSIC"==this.O4632.thing.base&&ig.game.O7763){var a=this.O4632.thing;ig.game.O7763.isPlaying&&ig.game.O7763.O9727==a.id&&(ig.game.O7763.O3926(),ig.game.O7763.O7090())}},close:function(){this.O3787=!1;this.O6705();this.parent()},menuContexts:{MAIN:"MAIN",
COLLECTORS:"COLLECTORS"}})});ig.baked=!0;
ig.module("game.ui.deletionmarkerdialogitem").defines(function(){window.DeletionMarkerDialogItem=ig.Class.extend({pos:{x:0,y:0},homePos:{x:0,y:0},size:{x:19,y:19},O1920:4,thing:null,O2500:!1,O6241:7,rotation:0,flip:0,init:function(a,b,c){(this.thing=a)&&a.defRot&&(this.rotation=a.defRot);this.pos.x=b;this.pos.y=c;this.homePos.x=b;this.homePos.y=c},O8299:function(){var a=this.pos.y-this.O1920<=ig.input.mouse.y&&ig.input.mouse.y<=this.pos.y+this.size.y;return this.pos.x-this.O1920<=ig.input.mouse.x&&
ig.input.mouse.x<=this.pos.x+this.size.x+this.O1920&&a},update:function(){if(ig.game.isFullAccount&&(ig.input.pressed("click")&&this.O8299()&&(this.O2500=!0,ig.game.panelSet.O6923(1),ig.game.O3199={tid:this.thing.id,rotation:this.rotation,flip:this.flip,O1292:this.thing.O1292()},ig.game.sounds.pickup.play()),ig.input.state("click")&&this.O2500&&(ig.game.panelSet.O6777.O6905(),this.pos.x=ig.input.mouse.x-this.size.x/2,this.pos.y=ig.input.mouse.y-this.size.y/2),this.O2500&&ig.input.released("click"))){if(ig.game.panelSet.O2072PanelBody()){var a=
ig.game.panelSet.O6777.O3457();ig.game.O7747.O1015(this.thing.id,a)}else ig.game.panelSet&&ig.input.mouse.x<ig.game.panelSet.panelPos.x&&(ig.log("stopped dragging tilepaneltile "+this.thing.id),this.O2500=!1,ig.game.O3199=!1,ig.game.isDraggingTilePlacementBinable=!1,ig.game.O6112.O9873(this.thing.id,this.rotation,this.flip));this.O2500=!1;ig.game.O3199=!1;this.pos.x=this.homePos.x;this.pos.y=this.homePos.y}},draw:function(){ig.game.isFullAccount&&(this.O2500&&(ig.system.context.globalAlpha=ig.game.O2435-
.2,this.thing.draw(this.homePos.x,this.homePos.y,this.rotation,this.flip,1),ig.system.context.globalAlpha=1),ig.system.context.globalAlpha=this.O2500?1:ig.game.O2435+.2,this.thing.draw(this.pos.x,this.pos.y,this.rotation,this.flip,1),ig.system.context.globalAlpha=1,!this.O2500&&!ig.game.O6921.O3007FromMap&&this.O8299()&&ig.game.O8159.O2930(this.homePos.x,this.homePos.y))}})});ig.baked=!0;
ig.module("game.ui.deletionmarkerdialog").requires("game.ui.components.uidialog","game.ui.components.uiclicktext","game.ui.deletionmarkerdialogitem").defines(function(){window.DeletionMarkerDialog=UIDialog.extend({O6146:!0,O2945:!0,O9925:19,pos:{x:0,y:0},placerLabelPos:{x:6,y:30},placerNameBasePos:{x:58,y:30},placerNamePos:{x:58,y:30},deleterLabelPos:{x:6,y:40},deleterNameBasePos:{x:53,y:40},deleterNamePos:{x:53,y:40},itemPos:{x:47,y:6},O1518:12,backgroundAlpha:.7,textAlpha:.4,clickSpotCloseLocation:{x:103,
y:3,width:8,height:8},clickSpotClose:null,O2739:null,O9937:null,O4632:{},deleter:{id:null,name:null},placer:{id:null,name:null},O9714:null,item:null,O7338:null,init:function(a,b,c){this.size.x=ig.game.O8159.itemContextMenuBg.width;this.size.y=ig.game.O8159.itemContextMenuBg.height;this.halfSize={};this.halfSize.x=Math.floor(ig.game.O8159.itemContextMenuBg.width/2);this.halfSize.y=Math.floor(ig.game.O8159.itemContextMenuBg.height/2);this.arrows={};this.arrows.size=ig.game.O8159.O9089.width;this.arrows.halfSize=
Math.floor(this.arrows.size/2);this.pos.x=a;this.pos.y=b-this.size.y-2;this.O3270=c},update:function(){this.isOpen&&(this.clickSpotClose.update(),this.deleter.id&&this.O2739&&this.O2739.update(),this.placer.id&&this.O9937&&this.O9937.update(),this.deleter.id&&this.O7338&&this.O7338.update());this.parent()},O5157:function(a){this.isOpen&&(!this.maploc||this.maploc.x==a.x&&this.maploc.y==a.y)?this.close():(this.O3801(),this.maploc=a,this.O1072(a),this.O1871(a),this.O9239(),this.open())},O3801:function(){this.deleterNamePos.x=
this.deleterNameBasePos.x;this.deleterNamePos.y=this.deleterNameBasePos.y;this.placerNamePos.x=this.placerNameBasePos.x;this.placerNamePos.y=this.placerNameBasePos.y;this.item=null;this.O4632={};this.O7338=null;this.deleter={id:null,name:null};this.placer={id:null,name:null};this.maploc=null},O1871:function(a){this.O9714=ig.game.O6112.O1498(a.x,a.y);this.screenSector=this.O3178(a);this.O7984(this.O9714)},O7984:function(a){var b=Math.floor(this.O9925/2)+1;if(null==this.screenSector)return null;if(this.screenSector==
this.O9573.LEFT)this.pos.x=a.x+b+this.arrows.size-1,this.pos.y=a.y+b-this.halfSize.y-1;else if(this.screenSector==this.O9573.RIGHT)this.pos.x=a.x+b-this.size.x-this.arrows.size+1,this.pos.y=a.y+b-this.halfSize.y-1;else if(this.screenSector==this.O9573.BOTTOM||this.screenSector==this.O9573.UPPERMIDDLE)this.pos.x=a.x+b-this.halfSize.x,this.pos.y=a.y+b-this.size.y-this.arrows.size;else if(this.screenSector==this.O9573.TOP||this.screenSector==this.O9573.LOWERMIDDLE)this.pos.x=a.x+b-this.size.x/2,this.pos.y=
a.y+b+this.arrows.size-1},O9239:function(){var a=this;this.clickSpotClose=new UIClickSpot({x:this.pos.x+this.clickSpotCloseLocation.x,y:this.pos.y+this.clickSpotCloseLocation.y},{x:this.clickSpotCloseLocation.width,y:this.clickSpotCloseLocation.height},!1,null);this.clickSpotClose.onClick=function(){a.close()}},O9102:function(){var a=this;if(this.placer.id){var b=ig.game.strings.O7686(this.placer.name,this.O1518);this.O9937=new UIClickText({x:this.pos.x+this.placerNamePos.x,y:this.pos.y+this.placerNamePos.y},
b,ig.game.blackSmallFont,"#000000",this.textAlpha,!this.placer.id);this.O9937.onClick=function(){a.O2942(a.placer.id)}}},O9158:function(){var a=this;if(this.deleter.id){var b=ig.game.strings.O7686(this.deleter.name,this.O1518);this.O2739=new UIClickText({x:this.pos.x+this.deleterNamePos.x,y:this.pos.y+this.deleterNamePos.y},b,ig.game.blackSmallFont,"#000000",this.textAlpha,!this.deleter.id);this.O2739.onClick=function(){a.O2942(a.deleter.id)}}},O2942:function(a){a&&(ig.game.O1257.O2970==a?ig.game.playerDialog.O7845():
ig.game.playerDialog.openForPlayerId(a,this.O9714),this.close())},draw:function(){this.isOpen&&(ig.system.context.globalAlpha=this.backgroundAlpha,ig.game.O8159.O2299(this.pos.x,this.pos.y),this.O5117(),ig.system.context.globalAlpha=1,ig.system.context.globalAlpha=this.textAlpha,ig.game.blackSmallFont.draw("placement by",this.pos.x+this.placerLabelPos.x,this.pos.y+this.placerLabelPos.y),ig.game.blackSmallFont.draw("removed by",this.pos.x+this.deleterLabelPos.x,this.pos.y+this.deleterLabelPos.y),ig.ua.mobile||
(ig.system.context.globalAlpha=.25,ig.game.blackSmallFont.draw("shift+click dust = undo",this.pos.x+6,this.pos.y+49)),ig.system.context.globalAlpha=1,this.deleter.id&&this.O2739&&this.O2739.draw(),this.placer.id&&this.O9937&&this.O9937.draw(),this.deleter.id&&this.O7338&&this.O7338.draw())},O3178:function(a){ig.game.O6112.O2132(a.x,a.y);a=ig.game.O6112.O1498(a.x,a.y);var b=ig.system.width-(ig.system.width-(ig.game.panelSet?ig.game.panelSet.panelPos.x:54)),c=ig.system.height;return a.x<b/4?this.O9573.LEFT:
a.x>b/4*3?this.O9573.RIGHT:a.y>=c/4*3?this.O9573.BOTTOM:a.y>=c/4*2?this.O9573.LOWERMIDDLE:a.y>=c/4?this.O9573.UPPERMIDDLE:this.O9573.TOP},O9573:{TOP:"T",UPPERMIDDLE:"UM",LOWERMIDDLE:"LM",BOTTOM:"B",LEFT:"L",RIGHT:"R"},O5117:function(){if(null==this.screenSector)return null;if(this.screenSector==this.O9573.LEFT)ig.game.O8159.O6075(this.pos.x-ig.game.O8159.O9089.width+1,this.pos.y+this.halfSize.y-this.arrows.halfSize),this.O6147(),this.O9508(),this.O6039();else if(this.screenSector==this.O9573.RIGHT)ig.game.O8159.O4729(this.pos.x+
this.size.x-1,this.pos.y+this.halfSize.y-this.arrows.halfSize),this.O2356(),this.O6147(),this.O6039();else if(this.screenSector==this.O9573.BOTTOM||this.screenSector==this.O9573.UPPERMIDDLE)ig.game.O8159.O1575(this.pos.x+this.halfSize.x-this.arrows.halfSize-1,this.pos.y+this.size.y-1),this.O2356(),this.O6147(),this.O9508();else if(this.screenSector==this.O9573.TOP||this.screenSector==this.O9573.LOWERMIDDLE)ig.game.O8159.O6207(this.pos.x+this.halfSize.x-this.arrows.halfSize-1,this.pos.y-this.arrows.size+
1),this.O2356(),this.O9508(),this.O6039()},O2356:function(){ig.game.O8159.O8812(this.pos.x,this.pos.y+this.halfSize.y-this.arrows.halfSize)},O6147:function(){ig.game.O8159.drawItemContextMenuFillerHorz(this.pos.x+this.halfSize.x-this.arrows.halfSize-1,this.pos.y)},O9508:function(){ig.game.O8159.O8812(this.pos.x+this.size.x-1,this.pos.y+this.halfSize.y-this.arrows.halfSize)},O6039:function(){ig.game.O8159.drawItemContextMenuFillerHorz(this.pos.x+this.halfSize.x-this.arrows.halfSize-1,this.pos.y+this.size.y-
1)},O2752:function(a){ig.game.O9817.O4516(a,ig.game.O4873.O8027,ig.game.O4873.currentArea,this).done(function(b){if(b){this.O4632.tid=b.tid;this.O4632.r=b.r;this.O4632.f=b.f;this.item=ig.game.O4261.getItemBasic(this.O4632.tid,"ui_dmd1");var c=this;this.item.basicDataLoading.done(function(){ig.game.O6112.O9873(c.O4632.tid,c.O4632.r,c.O4632.f)})}})},O1072:function(a){ig.game.O9817.O4516(a,ig.game.O4873.O8027,ig.game.O4873.currentArea,this).done(function(b){if(b){this.placer.id=b.puid;this.placer.name=
b.pname;this.deleter.id=b.uid;this.deleter.name=b.name;this.O4632.tid=b.tid;this.O4632.r=b.r;this.O4632.f=b.f;this.O9102();this.O9158();this.item=ig.game.O4261.getItemBasic(this.O4632.tid,"ui_dmd2");var c=this;this.item.basicDataLoading.done(function(){c.O7338=new DeletionMarkerDialogItem(c.item,c.pos.x+c.itemPos.x,c.pos.y+c.itemPos.y);c.O7338.rotation=c.O4632.r;c.O7338.flip=c.O4632.f})}})}})});ig.baked=!0;
ig.module("game.ui.usermapdialog").requires("game.ui.components.uidialog").defines(function(){window.UserMapDialog=UIDialog.extend({margin:4,pos:{x:0,y:0},size:{x:0,y:0},clickSpots:null,isOpen:!1,O2945:!1,O6146:!1,backgroundColor:"rgba(200,200,200,0.8)",clickSpotCloseLocation:{x:10,y:1,width:9,height:9},clickSpotClose:null,O3508:0,O8441:.3,O7658:.15,mapToScreenSizeRatio:{x:.6,y:.8},focusPos:{x:0,y:0},focusSector:{x:0,y:0},focusOffset:{x:0,y:0},targetFocusPos:{x:0,y:0},targetFocusLocation:{x:0,y:0},
rendererStartSector:{x:0,y:0},posOffset:{x:0,y:0},rendererPosOffsetRemainder:{x:0,y:0},O6440:32,sectorImageSize:{x:32,y:32},sectorsFitOnMap:{x:0,y:0},lastDragMousePos:{x:0,y:0},lastPlayerPos:{x:0,y:0},midPointSectorOffset:{x:0,y:0},crosshairOffset:{x:0,y:0},O9949:608,mapOriginInGameCoords:{x:0,y:0},O7805:19,dragOffset:{x:0,y:0},targetDragOffset:{x:0,y:0},O1928:!1,O7856:20,lazinessFactorDrag:5,O4825:.75,O3231:500,O2500:!1,dragged:!1,O6606:!0,plane:1,area:1,totalVisitors:null,totalOnline:null,O5597:!1,
O6851:!1,O6263:!1,clipMap:!0,O5599:null,O5168:!1,O4170:7,init:function(){this.O8040();this.clickSpotClose=new UIClickSpot({x:this.pos.x+this.size.x-this.clickSpotCloseLocation.x,y:this.pos.y+this.clickSpotCloseLocation.y},{x:this.clickSpotCloseLocation.width,y:this.clickSpotCloseLocation.height},!1,null);this.clickSpotClose.onClick=function(){ig.game.userMapDialog.close()}},O8040:function(){this.O3508=ig.system.width*this.O8441;ig.game.O1682?(this.size={x:ig.system.width,y:ig.system.height},this.pos=
{x:0,y:0}):(this.size.x=ig.system.width*this.mapToScreenSizeRatio.x,this.size.y=ig.system.height*this.mapToScreenSizeRatio.y,this.pos.x=Math.floor((ig.system.width-this.size.x)/2-ig.system.width*this.O7658),this.pos.y=Math.floor((ig.system.height-this.size.y)/2));this.sectorsFitOnMap.x=Math.ceil(this.size.x/this.sectorImageSize.x)+1;this.sectorsFitOnMap.y=Math.ceil(this.size.y/this.sectorImageSize.y)+1;this.midPointSectorOffset.x=Math.floor(this.size.x/2/this.sectorImageSize.x);this.midPointSectorOffset.y=
Math.floor(this.size.y/2/this.sectorImageSize.y);this.crosshairOffset.x=this.size.x/2%this.sectorImageSize.x;this.crosshairOffset.y=this.size.y/2%this.sectorImageSize.y},O4152:function(){if(ig.game.isFullAccount)if(1<=ig.game.O1257.rank)if(this.isOpen)this.close();else{var a=1<=ig.game.O2694.delta();ig.game.O4401&&a&&(this.plane=ig.game.O4873.O8027,this.area=ig.game.O4873.currentArea,this.O7307(ig.game.O1257.pos),this.O4817(),ig.game.O8100.O1321(),this.O6606=!0,this.open())}else ig.game.O1002.O7063()},
O6167:function(a){ig.game.isFullAccount&&(1<=ig.game.O1257.rank?(this.isOpen&&this.close(),this.O8052(a),this.isOpen||this.open()):ig.game.O1002.O7063())},O8052:function(a){this.plane=a.p;this.area=a.a;this.O7307(ig.game.O6112.O2132(a.x,a.y));this.O4817();ig.game.O8100.O1321();this.O6606=!1},open:function(){ig.game.sounds.O2903(ig.game.sounds.shortWhoosh,.5);this.O8040();this.createAreaSelector();this.O4817();ig.game.O3957&&ig.game.O3957.O8855("map");this.parent()},close:function(){this.isOpen&&(ig.game.sounds.O2903(ig.game.sounds.shortWhoosh,
.2),jQuery("#areaSelector").remove(),this.O5599=this.totalOnline=this.totalVisitors=null,this.parent())},createAreaSelector:function(){jQuery("#areaSelector").remove();if(this.O5599)ig.game.userMapDialog.createAreaSelectorBasedOnListData();else{var a=this;ig.game.O9817.O8990().done(function(b){b||=[];a.O3245(b);a.O5599=b;a.isOpen&&a.createAreaSelectorBasedOnListData()})}},createAreaSelectorBasedOnListData:function(a){a||=this.O5599;var b=!1,c=jQuery("#"+ig.game.canvasId).position(),d="left: "+(c.left+
(this.pos.x+6)*ig.system.scale)+"px; top: "+(c.top+(this.pos.y+this.size.y-6-9)*ig.system.scale)+"px;";d+="font-size: "+(4+2*ig.system.scale)+"px;";d+="width: "+70*ig.system.scale+"px;";d+="height: "+9*ig.system.scale+"px;";c=!1;this.totalOnline=this.totalVisitors=null;d='<select id="areaSelector" style="'+d+'" onchange="ig.game.userMapDialog.O2825(event)"><option disabled>&nbsp;</option>';for(var e=0;e<a.length;e++){var f=a[e];f.isCore&&!b&&(!this.O5168&&c&&(d+='<option value="showHidden" class="showHidden">[MORE...]</option>'),
d+="<option disabled>&nbsp;</option>",b=!0);var g=f.subAreas&&1<=f.subAreas.length?f.subAreas:null,h=f.nameIsEscaped?f.name:ig.game.strings.O9955(f.name.toUpperCase()),k=!1,l=!1;f.isCore?(f.location.plane==this.plane&&f.location.area==this.area&&(k=!0,this.totalVisitors=f.totalVisitors,this.totalOnline=f.totalOnline),l=4>=f.id&&5>ig.game.O1257.rank):this.area==f.id&&(k=!0,this.totalVisitors=f.totalVisitors,this.totalOnline=f.totalOnline);var m=ml.Misc.O6288(f.lastVisit);if(!f.isCore&&!this.O5168&&
!k&&m>this.O4170)c=!0;else{g&&this.area==f.id&&(d+="<option disabled>&nbsp;</option>");m=ig.game.strings.O9955(f.id);f.location&&(m=[f.location.plane,f.location.area,f.location.x,f.location.y].join(";"));d+='<option value="'+m+'" class="areaSelection_'+(f.isCreator?"didCreate":"didNotCreate")+'"'+(k?' selected="selected"':"")+(l?' disabled="disabled"':"")+">"+h+(f.totalOnline?" ("+f.totalOnline+")":"")+"</option>";if(g){h="";k=!1;for(l=0;l<g.length;l++){m=g[l];var n=this.area==m.id;n&&(k=!0,this.totalVisitors=
m.totalVisitors);var p=ig.game.strings.O9955(m.name.toUpperCase());h+='<option value="'+ig.game.strings.O9955(m.id)+'" class="subAreaOption"'+(n?' selected="selected"':"")+">&nbsp;"+p+(m.totalOnline?" ("+m.totalOnline+")":"")+"</option>"}h&&(k||this.area==f.id)&&(d+=h)}g&&this.area==f.id&&(d+="<option disabled>&nbsp;</option>")}}jQuery(d+"<option disabled>&nbsp;</option></select>").appendTo("body")},O3245:function(a){a.push({id:0,name:"Area 0",isCore:!0,location:{plane:1,area:1,x:15,y:15}})},O2825:function(a){a=
null;var b=jQuery("#areaSelector").val();"showHidden"==b?(this.O5168=!0,this.createAreaSelector()):0<=b.indexOf(";")?(a=b.split(";"),a={p:parseInt(a[0]),a:parseInt(a[1]),x:parseInt(a[2]),y:parseInt(a[3])}):a={p:0,a:b,x:0,y:0};a&&(this.O8052(a),this.createAreaSelector());ig.game.sounds.click.play()},O7307:function(a){this.focusPos={x:a.x,y:a.y};this.targetFocusPos={x:a.x,y:a.y};this.dragOffset={x:0,y:0};this.targetDragOffset={x:0,y:0}},update:function(){if(this.isOpen){this.clickSpotClose.update();
ig.game.O4774.O4920()&&(this.lastClickTime=Date.now());if(ig.input.released("click")&&!this.dragged&&this.O3826(ig.input.mouse)&&Date.now()-this.lastClickTime<this.O3231){var a=this.O3523(ig.input.mouse),b=ig.game.O4873.O9099(a).sector;ig.game.O8100.isSectorExplored(this.plane,this.area,b.x,b.y)&&(b=ig.game.O4873.O8027==this.plane&&ig.game.O4873.currentArea==this.area,ig.game.theyCanMapTeleport||!b)&&(ig.game.O1189.register(ig.game.O1189.types.TELEPORTED),ig.game.portaller.O3297(this.plane,this.area,
a.x,a.y))}ig.game.O4774.O4920()&&this.O8299()&&(this.O2500=!0,ig.game.O4774.O6730(),this.lastDragMousePos={x:ig.input.mouse.x,y:ig.input.mouse.y});ig.input.state("click")&&this.O2500&&(a=ig.input.mouse.x-this.lastDragMousePos.x,b=ig.input.mouse.y-this.lastDragMousePos.y,this.targetDragOffset.x+=a,this.targetDragOffset.y+=b,this.lastDragMousePos={x:ig.input.mouse.x,y:ig.input.mouse.y},0!=a||0!=b)&&(this.dragged=!0);this.O2500&&ig.input.released("click")&&(this.dragged=this.O2500=!1,ig.game.O3957&&
ig.game.O3957.O8855("map"));!this.O6606||this.lastPlayerPos.x==ig.game.O1257.pos.x&&this.lastPlayerPos.y==ig.game.O1257.pos.y||(this.targetFocusPos={x:ig.game.O1257.pos.x,y:ig.game.O1257.pos.y},this.O4381(this.targetFocusPos)||(this.targetDragOffset={x:0,y:0}),this.lastPlayerPos.x=ig.game.O1257.pos.x,this.lastPlayerPos.y=ig.game.O1257.pos.y);this.O4065();this.O4817()}this.parent()},O4065:function(){this.focusPos.x!=this.targetFocusPos.x&&(this.focusPos.x+=(this.targetFocusPos.x-this.focusPos.x)/this.O7856);
this.focusPos.y!=this.targetFocusPos.y&&(this.focusPos.y+=(this.targetFocusPos.y-this.focusPos.y)/this.O7856);this.dragOffset.x!=this.targetDragOffset.x&&(this.dragOffset.x+=(this.targetDragOffset.x-this.dragOffset.x)/this.lazinessFactorDrag);this.dragOffset.y!=this.targetDragOffset.y&&(this.dragOffset.y+=(this.targetDragOffset.y-this.dragOffset.y)/this.lazinessFactorDrag)},O4817:function(){var a=ig.game.O4873.O1210({x:this.focusPos.x-this.dragOffset.x*this.O7805,y:this.focusPos.y-this.dragOffset.y*
this.O7805});this.rendererPosOffsetRemainder.x=a.offset.x/19-this.crosshairOffset.x;this.rendererPosOffsetRemainder.y=a.offset.y/19-this.crosshairOffset.y;this.rendererStartSector.x=a.sector.x-this.midPointSectorOffset.x;this.rendererStartSector.y=a.sector.y-this.midPointSectorOffset.y;this.O3289()},draw:function(){this.isOpen&&(ig.system.context.save(),this.drawBg(),this.clipMap&&this.O5625(),this.O8151(),this.O6666(),this.O6263&&this.O9135(),this.O5597&&this.O8372(),this.drawVisitorsInfo(),this.O6716(),
ig.system.context.restore())},drawVisitorsInfo:function(){if(null!=this.totalVisitors||null!=this.totalOnline||void 0!=this.totalOnline){var a=null!=this.totalVisitors?this.totalVisitors:0;void 0!==this.totalOnline&&null!==this.totalOnline&&(a+="   "+this.totalOnline+" now");var b=this.pos.x+7,c=this.pos.y+this.size.y-23;ig.game.O8159.draw(b,c-3,this.O4825,ig.game.O8159.visitorsMapIcon);ig.system.context.globalAlpha=this.O4825;this.O2685(b+ig.game.O8159.visitorsMapIcon.width+3,c,a);ig.system.context.globalAlpha=
1}},O5625:function(){ig.system.context.beginPath();ig.system.context.rect(this.pos.x*ig.system.scale,this.pos.y*ig.system.scale,this.size.x*ig.system.scale,this.size.y*ig.system.scale);ig.system.context.clip()},drawBg:function(){ig.system.context.fillStyle=ig.game.O1682?"rgba(200,200,200,1)":this.backgroundColor;ig.system.context.fillRect(this.pos.x*ig.system.scale,this.pos.y*ig.system.scale,this.size.x*ig.system.scale,this.size.y*ig.system.scale)},O8372:function(){ig.system.context.fillStyle="rgba(255,0,0,0.7)";
var a=this.O7147(this.O9473(ig.game.O1257.pos));ig.system.context.fillRect(a.x*ig.system.scale,a.y*ig.system.scale,1*ig.system.scale,1*ig.system.scale)},O5362:function(a){ig.system.context.fillStyle="rgba(0,0,255,0.1)";ig.system.context.fillRect(a.x*ig.system.scale,a.y*ig.system.scale,32*ig.system.scale-1,32*ig.system.scale-1)},O9135:function(){var a=ig.system.scale,b=ig.system.context;b.strokeStyle="green";b.lineWidth=1;b.beginPath();b.moveTo((this.pos.x+this.size.x/2)*a,this.pos.y*a);b.lineTo((this.pos.x+
this.size.x/2)*a,(this.pos.y+this.size.y)*a);b.stroke();b.closePath();b.beginPath();b.moveTo(this.pos.x*a,(this.pos.y+this.size.y/2)*a);b.lineTo((this.pos.x+this.size.x)*a,(this.pos.y+this.size.y/2)*a);b.stroke();b.closePath()},O6716:function(){ig.game.O1682||ig.game.O8159.draw(this.clickSpotClose.pos.x,this.clickSpotClose.pos.y,.4,ig.game.O8159.closeX)},O8151:function(){for(var a,b,c,d,e=-1;e<this.sectorsFitOnMap.y;e++)for(var f=-1;f<this.sectorsFitOnMap.x;f++)a=f*this.sectorImageSize.x+this.pos.x-
this.rendererPosOffsetRemainder.x,b=e*this.sectorImageSize.y+this.pos.y-this.rendererPosOffsetRemainder.y,c=f+this.rendererStartSector.x,d=e+this.rendererStartSector.y,ig.game.O8100.O1890(this.plane,this.area,c,d,a,b),this.O6851&&this.O5362({x:a,y:b})},O6666:function(){for(var a,b,c,d,e=-1;e<this.sectorsFitOnMap.y;e++)for(var f=-1;f<this.sectorsFitOnMap.x;f++)if(a=f*this.sectorImageSize.x+this.pos.x-this.rendererPosOffsetRemainder.x,b=e*this.sectorImageSize.y+this.pos.y-this.rendererPosOffsetRemainder.y,
c=f+this.rendererStartSector.x,d=e+this.rendererStartSector.y,c=ig.game.O8100.placenameCache.get(this.plane,this.area,c,d))for(d=0;d<c.length;d++)this.O3094(a,b,c[d])},O3094:function(a,b,c){a+=c.x;b=b+c.y+3;c=ig.game.strings.O7686(c.n,25);c=ig.game.strings.O5024(c,10);ig.system.context.globalAlpha=this.O4825;for(var d=0;d<c.length;d++)this.O2685(a,b,c[d],ig.Font.ALIGN.CENTER),b+=5;ig.system.context.globalAlpha=1},O2685:function(a,b,c,d){ig.game.blackSmallFont.draw(c,a-1,b,d);ig.game.blackSmallFont.draw(c,
a+1,b,d);ig.game.blackSmallFont.draw(c,a,b-1,d);ig.game.blackSmallFont.draw(c,a,b+1,d);ig.game.whiteSmallFont.draw(c,a,b,d)},O3289:function(){this.mapOriginInGameCoords={};this.mapOriginInGameCoords.x=this.rendererStartSector.x*this.O9949-this.rendererPosOffsetRemainder.x;this.mapOriginInGameCoords.y=this.rendererStartSector.y*this.O9949-this.rendererPosOffsetRemainder.y},O8299:function(){return ig.game.O4774.O8299(this.pos.x,this.pos.y,this.pos.x+this.size.x,this.pos.y+this.size.y)},O9473:function(a){return{x:(a.x-
this.mapOriginInGameCoords.x)/this.O7805-this.rendererPosOffsetRemainder.x,y:(a.y-this.mapOriginInGameCoords.y)/this.O7805-this.rendererPosOffsetRemainder.y}},O3523:function(a){return ig.game.O6112.O2337((a.x-this.pos.x+this.rendererPosOffsetRemainder.x)*this.O7805+this.mapOriginInGameCoords.x,(a.y-this.pos.y+this.rendererPosOffsetRemainder.y)*this.O7805+this.mapOriginInGameCoords.y)},O7147:function(a){return{x:a.x+this.pos.x,y:a.y+this.pos.y}},O4381:function(a){a=this.O9473(a);var b=0<=a.y&&a.y<=
this.size.y;return 0<=a.x&&a.x<=this.size.x&&b},O3826:function(a){var b=a.y>=this.pos.y&&a.y<=this.pos.y+this.size.y;return a.x>=this.pos.x&&a.x<=this.pos.x+this.size.x&&b}})});ig.baked=!0;
ig.module("game.data.speechdata").defines(function(){window.SpeechData=ig.Class.extend({vocabulary:null,layout:null,init:function(a){this.vocabulary=this.vocabularySets[a];this.layout=this.layouts[a]},vocabularySets:{en:{me:"me",you:"you",tired:"i need a rest",rank5OuterProtect:"i can't remove these placements here",tooManyPeopleAround:"there are too many people around",tiredFromActionLessMoving:"i'm falling asleep...",placenameAlreadyPlaced:"this has already been placed elsewhere",O2587:"there's too many things around already",
tooManyDistinctThingsAround:"there's too many different things around already",introHelp:"i move with arrow keys and chat by typing",cantPlaceReactingInteracting:"i can't place actively reacting interactings in this area",thisHolderNeedsSomething:"this holder needs something to open or check it",cantSeeNameTags:"i can't see name tags here",cantPasteHere:"i can't paste here",O9660:"i need to login to use this",uprankToUse:"i need to wait before using this",itemBlocked:"this item is blocked",editorOnly:"i can only do this in areas where i'm editor",
howToCollect:"i can drag this into my collection",loginToChat:"i need to login to chat",nonPublicAreasOnly:"i need to go to a created area",centerTooClose:"i need to go further away from center"}},layouts:{en:[]}})});ig.baked=!0;ig.module("game.core.loader").requires("impact.loader").defines(function(){window.Loader=ig.Loader.extend({init:function(a,b){this.O9565();this.parent(a,b)},draw:function(){},end:function(){this.parent()},O9565:function(){}})});ig.baked=!0;
ig.module("game.core.sounds").defines(function(){window.Sounds=ig.Class.extend({useMultiChannel:!0,instruments:{piano:{isKit:!1,minOctave:2,maxOctave:4},classic_piano:{isKit:!1,minOctave:1,maxOctave:3},bell:{isKit:!1,minOctave:2,maxOctave:4},drums:{isKit:!0,max:22},bongo:{isKit:!0,max:8},guitar:{isKit:!0,max:54,isGuitar:!0},eguitar:{isKit:!0,max:54,isGuitar:!0},classicclean_guitar:{isKit:!0,max:54,isGuitar:!0},rootsrock_guitar:{isKit:!0,max:54,isGuitar:!0},trumpet:{isKit:!1,minOctave:3,maxOctave:5},
fiddle:{isKit:!1,minOctave:3,maxOctave:5},silent_piano:{isKit:!1,minOctave:2,maxOctave:4},casual_clarinet:{isKit:!1,minOctave:3,maxOctave:5}},tones:"c cs d ds e f fs g gs a as b".split(" "),environmentSounds:{raindrop:3,fire:2,nature:6,humming:5,ocean:6,wind:7,village:6,city:11,glimmer:9,lightning:1,nightair:3,bubble:7,dripping:8,quake:2},init:function(){this.useMultiChannel=!ig.ua.mobile;var a=ig.game.O1946+"media/sounds/",b=ig.game.O1946+"media/sounds-high-compression/",c=!0;var d=ig.ua.mobile?
b:a;this.whoosh=new ig.Sound(d+"whoosh.*",this.useMultiChannel,c);this.collide=new ig.Sound(d+"colliding.*",this.useMultiChannel,c);this.collideSoft=new ig.Sound(d+"colliding_soft.*",this.useMultiChannel,c);this.click=new ig.Sound(d+"click.*",this.useMultiChannel,c);this.pickup=new ig.Sound(d+"pick_up_softer.*",this.useMultiChannel,c);this.putdown=new ig.Sound(d+"put_down_softer.*",this.useMultiChannel,c);c=!1;this.shortWhoosh=new ig.Sound(d+"short_whoosh.*",this.useMultiChannel,c);this.footfalls=
new ig.Sound(d+"footsteps.*",this.useMultiChannel,c);this.splash=new ig.Sound(d+"water_splash.*",this.useMultiChannel,c);this.nocando=new ig.Sound(d+"cannot.*",this.useMultiChannel,c);this.jump=new ig.Sound(d+"jump.*",this.useMultiChannel,c);this.arriving=new ig.Sound(a+"arriving.*",this.useMultiChannel,c);this.softWhoosh=new ig.Sound(a+"soft_whoosh.*",this.useMultiChannel,c);this.portallingWhoosh=new ig.Sound(a+"portalling_whoosh.*",this.useMultiChannel,c);this.ringportalling=new ig.Sound(a+"ringportalling.*",
this.useMultiChannel,c);this.bin=new ig.Sound(a+"drop_in_trash_softer.*",this.useMultiChannel,c);this.actionSoft=new ig.Sound(a+"action_soft.*",this.useMultiChannel,c);this.die=new ig.Sound(a+"dying.*",this.useMultiChannel,c);this.dieFalling=new ig.Sound(a+"falling_death.*",this.useMultiChannel,c);this.sticky=new ig.Sound(a+"sticky.*",this.useMultiChannel,c);this.crumbling=new ig.Sound(a+"crumbling.*",this.useMultiChannel,c);this.munch=new ig.Sound(a+"munch.*",this.useMultiChannel,c);this.dieOfPoison=
new ig.Sound(a+"die_of_poison.*",this.useMultiChannel,c);this.drinking=new ig.Sound(a+"drinking.*",this.useMultiChannel,c);this.collect=new ig.Sound(a+"collect.*",this.useMultiChannel,c);this.collapse=new ig.Sound(a+"collapse.*",this.useMultiChannel,c);this.smash=new ig.Sound(a+"smash.*",this.useMultiChannel,c);this.pain=new ig.Sound(a+"pain.*",this.useMultiChannel,c);this.heartbeat=new ig.Sound(a+"heartbeat.*",this.useMultiChannel,c);this.harvest=new ig.Sound(a+"harvest.*",this.useMultiChannel,c);
this.dive=new ig.Sound(a+"water_diving.*",this.useMultiChannel,c);this.waterleave=new ig.Sound(a+"water_leave.*",this.useMultiChannel,c);this.splashThick=new ig.Sound(a+"water_splash_thick.*",this.useMultiChannel,c);this.diveThick=new ig.Sound(a+"water_diving_thick.*",this.useMultiChannel,c);this.waterleaveThick=new ig.Sound(a+"water_leave_thick.*",this.useMultiChannel,c);this.activate=new ig.Sound(a+"activate.*",this.useMultiChannel,c);this.clap=new ig.Sound(a+"clap.*",this.useMultiChannel,c);this.trampolineBounce=
new ig.Sound(a+"trampoline_bounce.*",this.useMultiChannel,c);this.collected=new ig.Sound(a+"success_bling_softer.*",this.useMultiChannel,c);this.success=new ig.Sound(a+"success_bling_softer_copy_a.*",this.useMultiChannel,c);this.found=new ig.Sound(a+"success_bling_softer_copy_b.*",this.useMultiChannel,c);this.glass_heavy=new ig.Sound(a+"glass_heavy.*",this.useMultiChannel,c);this.glass1=new ig.Sound(a+"glass1.*",this.useMultiChannel,c);this.glass2=new ig.Sound(a+"glass2.*",this.useMultiChannel,c);
this.glass3=new ig.Sound(a+"glass3.*",this.useMultiChannel,c);this.burst1=new ig.Sound(a+"burst1.*",this.useMultiChannel,c);this.burst2=new ig.Sound(a+"burst2.*",this.useMultiChannel,c);this.engine_starts=new ig.Sound(a+"engine_starts.*",this.useMultiChannel,c);this.motor=new ig.Sound(a+"motor.*",this.useMultiChannel,c);this.screeching=new ig.Sound(a+"screeching.*",this.useMultiChannel,c);this.footfalls_metal=new ig.Sound(a+"footsteps_metal.*",this.useMultiChannel,c);this.footfalls_grass=new ig.Sound(a+
"footsteps_grass.*",this.useMultiChannel,c);this.footfalls_snow=new ig.Sound(a+"footsteps_snow_2.*",this.useMultiChannel,c);this.footfalls_sand=new ig.Sound(a+"footsteps_sand.*",this.useMultiChannel,c);this.footfalls_wood=new ig.Sound(a+"footsteps_wood.*",this.useMultiChannel,c);this.footfalls_energy=new ig.Sound(a+"footsteps_energy.*",this.useMultiChannel,c);this.footfalls_mud=new ig.Sound(a+"footsteps_mud.*",this.useMultiChannel,c);this.ping=new ig.Sound(a+"ping.*",this.useMultiChannel,c);this.new_mift=
new ig.Sound(a+"new_mift.*",this.useMultiChannel,c);this.laser_carving_1=new ig.Sound(a+"laser_carving_1.*",this.useMultiChannel,c);this.laser_carving_2=new ig.Sound(a+"laser_carving_2.*",this.useMultiChannel,c);this.boost=new ig.Sound(a+"boost.*",this.useMultiChannel,c);this.boostEnd=new ig.Sound(a+"boost-end.*",this.useMultiChannel,c);this.minfinity=new ig.Sound(a+"minfinity.*",this.useMultiChannel,c);this.score_up=new ig.Sound(a+"score_up.*",this.useMultiChannel,c);this.score_down=new ig.Sound(a+
"score_down.*",this.useMultiChannel,c);this.cloth=new ig.Sound(d+"cloth.*",this.useMultiChannel,c);for(var e in this.instruments)if(d=this.instruments[e],d.isKit)for(b=1;b<=d.max;b++){var f=e+"_"+b,g="";if("guitar"==e||"eguitar"==e)g="_v2";g=a+e+g+"/"+b+".*";this[f]=new ig.Sound(g,this.useMultiChannel,c)}else for(b=d.minOctave;b<=d.maxOctave;b++)for(var h=0;h<this.tones.length;h++)f=e+"_"+b+"_"+this.tones[h],g=a+e+"/"+b+"/"+(h+1)+".*",this[f]=new ig.Sound(g,this.useMultiChannel,c);e="cat cow horse bird wildcat dog bear wolf monkey elephant piglet pig snake frog sheep pony rooster hen chick".split(" ");
for(b=0;b<e.length;b++)this["living_"+e[b]]=new ig.Sound(a+"living/"+e[b]+".*",this.useMultiChannel,c);d="environment/";for(f in this.environmentSounds)for(b=1;b<=this.environmentSounds[f];b++)this["environment_"+f+"_"+b]=new ig.Sound(a+d+f+"_"+b+".*",this.useMultiChannel,c)},O9396:function(a,b,c){var d=!1,e=Math.max(ig.system.widthHalf,ig.system.O2175);b.O2144(ig.game.O1257)<=e&&(this.O2903(a,c),d=!0);return d},O8674:function(a,b){var c=a.x-b.x;a=a.y-b.y;return Math.sqrt(c*c+a*a)},O4843:function(a,
b,c){var d=!1;this.O8674(ig.game.O1257.pos,b)<ig.system.widthHalf&&(this.O2903(a,c),d=!0);return d},O2903:function(a,b){if(b){var c=a.volume;a.volume=b;a.play();a.volume=c}else a.play()},O1069:function(a,b,c,d,e,f){if(ig.game.O1257&&!ig.game.O1257.O9832("mutesInstruments")&&!ig.game.O1257.O9832("mutesAll")){var g=ig.ua.mobile;e=!e||e.O2144(ig.game.O1257)<ig.system.widthHalf;g&&!d||!e||(g=a+"_"+b+"_"+c,null!=g&&ig.game.sounds[g]&&(f||ig.game.O7763.O2839(a,b,c),ig.game.sounds[g].play(),d?ig.game.O7836.O8050(a,
b,c):ig.game.instrumentDialog&&ig.game.instrumentDialog.O7691({instrument:a,octave:b,note:c})))}},O4085:function(a,b,c,d,e){!ig.game.O1257||ig.game.O1257.O9832("mutesInstruments")||ig.game.O1257.O9832("mutesAll")||d&&!(d.O2144(ig.game.O1257)<ig.system.widthHalf)||(d=a+"_"+b,null!=d&&ig.game.sounds[d]&&(e||ig.game.O7763.O2795(a,b),ig.game.sounds[d].play(),c?ig.game.O7836.O5712(a,b):ig.game.instrumentDialog&&ig.game.instrumentDialog.O7691({instrument:a,kitNumber:b})))},O2774:function(a,b,c){(this.O3863(ig.game.O1257,
b)<ig.system.widthHalf||this.O3863(ig.game.O1257,c)<ig.system.widthHalf)&&a.play()},O3863:function(a,b){var c=a.x-b.x;a=a.y-b.y;return Math.sqrt(c*c+a*a)},O7876:function(a){return this.instruments[a]&&this.instruments[a].isKit},O2056:function(a,b){var c="classic_piano",d=!1;if(b)for(var e in b)if(this.instruments[e]){c=e;d=!0;break}if(!d&&a){"bell"==a&&(a+="s");a=ig.game.strings.replaceAll(a," ","_");a=a.toLowerCase();for(var f in this.instruments)if(0<=a.indexOf(f)){c=f;break}}return c},playIncludedSound:function(a,
b,c,d,e){var f=!1;a&&(a.soundId||b)&&(d||a.O2144(ig.game.O1257)<ig.system.widthHalf)&&(!a.lastLibrarySoundTimer||e?(e||(a.lastLibrarySoundTimer=new ml.Timer),b?this.O9961(b,c):this.O9961(a.soundId,c),f=!0):(d=a.O4302?a.O4302:1,a.lastLibrarySoundTimer.delta()>=d&&(b?this.O9961(b,c):this.O9961(a.soundId,c),a.lastLibrarySoundTimer.reset(),f=!0)));return f},O9961:function(a,b){if(a){var c="library_"+a;if(ig.game.sounds[c])if(b){var d=ig.game.sounds[c].volume;ig.game.sounds[c].volume=b;ig.game.sounds[c].play();
ig.game.sounds[c].volume=d}else ig.game.sounds[c].play();else{var e=ig.game.O4261.getItemBasic(a,"sound_pfl");e.basicDataLoading.done(function(){var f=ig.game.O1946+"media/sound-library/",g=!ig.ua.mobile;if("MUSIC"==e.base)e.musicData?(ig.game.O7763.O1749(e.musicData),ig.game.O7763.O9835()):ig.game.O4261.getItem_P(a,"sound").done(function(k){k&&k.musicData&&(ig.game.O7763.O1749(k.musicData),ig.game.O7763.O9835())});else if("SOUND"==e.base){var h=ig.game.strings.replaceAll(e.name," ","_");h=ig.game.strings.replaceAll(h,
"-","_");ig.game.sounds[c]=new ig.Sound(f+h+".*",g,!1);ig.game.sounds[c].volume=b?b:1;ig.game.sounds[c].play()}})}}},O3961:function(a){var b="library_"+a;this[b]?this[b].play():(ig.game.sounds[b]=new ig.Sound(ig.game.O1946+"media/sound-library/"+a+".*",!ig.ua.mobile,!1),ig.game.sounds[b].play())},O7770:function(a){if(a&&0<=a.indexOf("freesound.org"))if(a=ig.game.strings.replaceAll(a,"https://","http://"),a=ig.game.strings.replaceAll(a,"http://www.freesound.org/","http://freesound.org/"),0===a.indexOf("http://freesound.org/samplesViewSingle.php?id="))a=
a.substr(46);else if(0===a.indexOf("http://freesound.org/people/")){var b=a.indexOf("/sounds/");b&&(b+=8,a=a.substr(b,a.length-b-1))}return a},O937:function(a){a&&(-1===a.indexOf("://")&&(a="http://freesound.org/samplesViewSingle.php?id="+a),-1===a.indexOf("http://")&&-1===a.indexOf("https://")&&(a="http://"+a));return a},O1366:function(){return[46,47,48,49,50,51,52,53,54,37,38,39,40,41,42,43,44,45,28,29,30,31,32,33,34,35,36,19,20,21,22,23,24,25,26,27,10,11,12,13,14,15,16,17,18,1,2,3,4,5,6,7,8,9]},
O7486:function(){return"e f f# g g# a a# b c a a# b c c# d d# e f d d# e f f# g g# a a# g g# a a# b c c# d d# b c c# d d# e f f# g e f f# g g# a a# b c".split(" ")},getGuitarIndexDistinctMapping:function(){return[1,2,3,4,5,6,7,8,9,6,7,8,9,10,11,12,13,14,11,12,13,14,15,16,17,18,19,16,17,18,19,20,21,22,23,24,20,21,22,23,24,25,26,27,28,25,26,27,28,29,30,31,32,33]},O3307:function(a,b){var c=[],d={cat:["cat","kitten"],cow:["cow"],horse:["horse"],bird:["bird"],wildcat:["lion","tiger","liger"],dog:["dog",
"puppy"],bear:["bear"],wolf:["wolf"],monkey:"monkey;ape;bonobo;chimp;chimpanzee;orang utan".split(";"),elephant:["elephant"],piglet:["piglet"],pig:["pig"],snake:["snake"],frog:["frog"],sheep:["sheep","lamb"],pony:["pony"],rooster:["rooster","cock"],hen:["hen"],chick:["chick"]};b=!!b;a=a.toLowerCase();b||(a=" "+a+" ");for(var e in d)for(var f=d[e],g=0;g<f.length;g++)b?a==f[g]&&c.push(ig.game.sounds["living_"+e]):0<=a.indexOf(" "+f[g]+" ")&&c.push(ig.game.sounds["living_"+e]);return c}})});
ig.baked=!0;
ig.module("game.core.screencapturer").defines(function(){window.ScreenCapturer=ig.Class.extend({captureNextFrame:!1,O8794:null,thumbPreviewCanvas:null,fullPreviewCanvas:null,screenShotSize:{x:80,y:62},screenShotSourcePos:{x:50,y:50},screenShotSourceSize:{x:164,y:124},init:function(){this.screenShotSourcePos.x=(ig.system.widthHalf-50)*ig.system.scale-150*ig.system.scale;this.screenShotSourcePos.y=ig.system.O2175*ig.system.scale-130*ig.system.scale;this.screenShotSourceSize.x=328*ig.system.scale;this.screenShotSourceSize.y=
248*ig.system.scale},O3130:function(){this.captureNextFrame&&this.callback&&(this.captureNextFrame=!1,this.capture())},capture:function(){this.fullPreviewCanvas=document.createElement("canvas");this.fullPreviewCanvas.setAttribute("width",this.screenShotSourceSize.x);this.fullPreviewCanvas.setAttribute("height",this.screenShotSourceSize.y);this.fullPreviewCanvas.setAttribute("style","visibility:hidden");document.body.appendChild(this.fullPreviewCanvas);var a=this.fullPreviewCanvas.getContext("2d");
this.thumbPreviewCanvas=document.createElement("canvas");this.thumbPreviewCanvas.setAttribute("width",this.screenShotSize.x*ig.system.scale);this.thumbPreviewCanvas.setAttribute("height",this.screenShotSize.y*ig.system.scale);this.thumbPreviewCanvas.setAttribute("style","visibility:hidden");document.body.appendChild(this.thumbPreviewCanvas);this.thumbPreviewCanvas.getContext("2d").drawImage(ig.system.canvas,this.screenShotSourcePos.x,this.screenShotSourcePos.y,this.screenShotSourceSize.x,this.screenShotSourceSize.y,
0,0,this.screenShotSize.x*ig.system.scale,this.screenShotSize.y*ig.system.scale);a.drawImage(ig.system.canvas,this.screenShotSourcePos.x,this.screenShotSourcePos.y,this.screenShotSourceSize.x,this.screenShotSourceSize.y,0,0,this.screenShotSourceSize.x,this.screenShotSourceSize.y);this.callback()},O2060:function(){var a=this.fullPreviewCanvas.getContext("2d"),b=(ig.game.O1257.screenName+" at "+ig.game.root).toUpperCase();ig.game.O1460&&(b+="/"+String(ig.game.O1460).toUpperCase());a.font="14px 'Press Start 2P'";
a.fillStyle="rgba(0, 0, 0, 0.3)";a.fillText(b,10,this.screenShotSourceSize.y-7);a.fillStyle="rgba(255, 255, 255, 0.4)";a.fillText(b,10,this.screenShotSourceSize.y-10)}})});ig.baked=!0;
ig.module("game.core.coreimages").requires("mlframe.image").defines(function(){window.CoreImages=ig.Class.extend({init:function(){this.painterBackground=new ml.Image(ig.game.O1946+"media/painter/background.png?v="+ig.game.version);this.painterSpriteSheet=new ml.Image(ig.game.O1946+"media/painter/spritesheet.png?v="+ig.game.version)}})});ig.baked=!0;
ig.module("game.core.itemcache").requires("game.core.item").defines(function(){window.ItemCache=function(){this.O3292={};this.O5986=[];this.lastRequestTimestamps={};this.recentRequestMS=3E4;this.maxCacheSize=ig.ua.mobile?1200:1600;this.trimHeadroomSize=ig.ua.mobile?100:300;this.idsToKeepPermanently=[];this.O9232=0};window.ItemCache.prototype.O3797=function(){return this.O5986.length};window.ItemCache.prototype.O4872=function(a){var b=ig.game.O4261;null===a?ig.game.errorManager.warn("null data to O4872"):
a&&a.O7880?a.id&&b.O3292[a.id]&&(b.O3292[a.id].O7880=!0):(b=b.O3292[a.id])?b.O4191(a):(b=new Item(a.id),b.O4191(a),ig.game.O4261.store(a.id,b))};window.ItemCache.prototype.O2635=function(a,b,c){for(var d=new jQuery.Deferred,e=[],f,g,h=0;h<b.length;h++)if((f=b[h])&&!this.O8853(f)){g={};g.base=a.b[h];g.prop=a.p[h];g.name=a.n[h];g.defRot=a.dr[h];var k=ig.game.O4261.O3292[f];k?!k.dataLoaded&&!k.basicDataLoaded&&k.O9462(g):(k=new Item(f,c),k.O9462(g,c),e.push(k.imagesBeingGeneratedPromise),ig.game.O4261.store(f,
k))}jQuery.when.apply(null,e).done(function(){d.resolve()});return d.promise()};window.ItemCache.prototype.store=function(a,b){ig.game.O4261.O3292[a]=b;ig.game.O4261.O5986.push(a)};window.ItemCache.prototype.O8460=function(){var a=ig.game.O4261,b=[];if(a.O3797()>a.maxCacheSize){for(var c=ig.game.O6112.O6816(),d=0,e=a.O5986.length;d<e;d++)-1===c.indexOf(a.O5986[d])&&-1===a.idsToKeepPermanently.indexOf(a.O5986[d])&&b.push(a.O5986[d]);c=0;for(e=b.length;c<e;c++)a.O8489(b[c])||a.forget(b[c])}};window.ItemCache.prototype.O8489=
function(a){return ig.game.O4261.lastRequestTimestamps[a]&&Date.now()-ig.game.O4261.lastRequestTimestamps[a]<ig.game.O4261.recentRequestMS};window.ItemCache.prototype.O8460=function(){if(ig.game.O4261.O3797()>ig.game.O4261.maxCacheSize)for(var a=0;ig.game.O4261.O3797()>ig.game.O4261.maxCacheSize-ig.game.O4261.trimHeadroomSize;)if(ig.game.O4261.O6172(ig.game.O4261.O5986[a]),a++,a>=ig.game.O4261.maxCacheSize){console.error("O8460 pointer greater than maxsize (cache not big enough)");break}};window.ItemCache.prototype.O6172=
function(a){if(ig.game.O6112.O8827(a))return!1;ig.game.O4261.forget(a);return!0};window.ItemCache.prototype.forget=function(a){ig.game.O4261.O3292[a]=null;delete ig.game.O4261.O3292[a];var b=ig.game.O4261.O5986.indexOf(a);-1<b&&ig.game.O4261.O5986.splice(b,1);delete ig.game.O4261.lastRequestTimestamps[a]};window.ItemCache.prototype.getItem=function(a,b){if(a){this.lastRequestTimestamps[a]=Date.now();if(this.O3292[a]&&this.O3292[a].dataLoaded)return this.O3292[a];var c=this.O3292[a];c||(c=new Item(a),
ig.game.O4261.store(a,c));ig.game.O9817.O9649(a,b,this.O4872);return c}console.warn("BUG! O4261.getItem called with zero/undefined: %s. Ignoring.",a);return null};window.ItemCache.prototype.getItem_P=function(a,b){var c=this,d=jQuery.Deferred();if(0==a||""==a||void 0==a)return console.warn("BUG! O4261.getItem_P called with zero/undefined: %s. Ignoring.",a),d.reject(),d.promise();this.lastRequestTimestamps[a]=Date.now();this.O3292[a]&&this.O3292[a].dataLoaded?d.resolve(this.O3292[a]):(b=ig.game.O9817.O6155(a,
b,this),b.done(function(e){c.O4872(e);d.resolve(c.O3292[a])}),b.fail(function(){d.reject();c.O3292[a]&&(c.O3292[a].dataLoadFailed=!0)}));return d.promise()};window.ItemCache.prototype.getItemBasic=function(a,b,c,d){if(0===a||""===a||void 0===a)console.warn("BUG! O4261.getItemBasic called with zero/undefined: %s. Ignoring.",a);else{c||d||(this.lastRequestTimestamps[a]=Date.now());d&&-1===this.idsToKeepPermanently.indexOf(a)&&this.idsToKeepPermanently.push(a);if(this.O3292[a])return this.O3292[a];c=
new Item(a);this.O8471(a)?c.O9462({base:"STACKWEARB",prop:{avatar:!0}}):ig.game.O9817.O9649(a,b,this.O4872);this.store(a,c);return c}};window.ItemCache.prototype.O8471=function(a){return-1!=a.indexOf("00000000000000000")};window.ItemCache.prototype.O6532=function(a){return!!this.O3292[a]};window.ItemCache.prototype.O8853=function(a){return this.O3292[a]&&this.O3292[a].basicDataLoaded}});ig.baked=!0;
ig.module("game.core.O3544").requires("game.core.item").defines(function(){window.O1059=function(){this.O6440=32;this.mapData=[];this.mapDataMargin={x:ig.ua.mobile?1:2,y:ig.ua.mobile?1:2};this.mapLoadTryCount=this.originY=this.originX=0;this.mapLoadTryLimit=4;this.O5610();this.initialItemImagesLoading=new jQuery.Deferred;this.initialItemImagesMidSectorLoading=new jQuery.Deferred;this.fillBuildQueue=[];this.fillDeleteQueue=[];this.queuePerformDelayMs=100;this.actionLog=[];this.actionLogIndex=-1};window.O1059.prototype.O3750=
function(a,b,c){this.mapData[c][b]=a};window.O1059.prototype.setMap=function(a,b,c,d){ig.game.O6112&&(ig.game.O6112.mapData[b]||(ig.game.O6112.mapData[b]=[]),ig.game.O6112.mapData[b][a]=c);d||ig.game.O7836.O8875({x:a,y:b,def:c,rId:ig.game.O1257.O2970})};window.O1059.prototype.O8617=function(a){return this.O4324(a)};window.O1059.prototype.O746At=function(a){a=this.O4324(a);return null===a?Item.prototype.COL_TYPES.NO_COLLISION:ig.game.O4261.getItemBasic(a.tid,"map_get_col_typ").O3675(a.rotation,a.flip)};
window.O1059.prototype.O8704=function(a){a=this.O4324(a);return null===a?null:{thing:ig.game.O4261.getItemBasic(a.tid,"map_get_def_at"),rotation:a.rotation,flip:a.flip}};window.O1059.prototype.O4324=function(a){a=this.mapData[a.y]&&this.mapData[a.y][a.x];return"undefined"===typeof a?null:a};window.O1059.prototype.O2052=function(a){a=this.O2337(a.x,a.y);return this.O8704(a)};window.O1059.prototype.O8633=function(){var a=ig.game.O4873.O1577,b=(a.x-this.mapDataMargin.x)*ig.game.O4873.O6440,c=(a.x+this.mapDataMargin.x+
1)*ig.game.O4873.O6440-1,d=(a.y-this.mapDataMargin.y)*ig.game.O4873.O6440;a=(a.y+this.mapDataMargin.y+1)*ig.game.O4873.O6440-1;for(var e in this.mapData)if(this.mapData.hasOwnProperty(e))if(e<d||e>a)delete this.mapData[e];else for(var f in this.mapData[e])this.mapData[e].hasOwnProperty(f)&&(f<b||f>c)&&delete this.mapData[e][f]};window.O1059.prototype.O8827=function(a){for(var b in this.mapData)for(var c in this.mapData[b])if(this.mapData[b][c]&&this.mapData[b][c].tid==a)return!0;return!1};window.O1059.prototype.O6816=
function(){var a=[],b,c;for(c in this.mapData)for(var d in this.mapData[c])this.mapData[c][d]&&this.mapData[c][d].tid&&(b=this.mapData[c][d].tid,-1===a.indexOf(b)&&a.push(b));return a};window.O1059.prototype.O7938=function(a,b){a=ig.game.O4873.O9687(a,b);for(b=a.y1;b<=a.y2;b++)void 0==this.mapData[b]&&(this.mapData[b]=[])};window.O1059.prototype.prime_P=function(){return this.O9487()};window.O1059.prototype.O3110=function(a){if(a){for(var b=this,c=[],d,e=0;e<a.length;e++)d=this.storeSectorData(a[e]),
c.push(d),0===e&&d.done(function(){b.initialItemImagesMidSectorLoading.resolve()});jQuery.when.apply(null,c).done(function(){b.initialItemImagesLoading.resolve()});c=[];for(e=0;e<a.length;e++)d=a[e],c.push({x:d.x,y:d.y});c.length&&this.O4813(c);ig.game.O8063();this.O8633()}else ig.game.errorManager.O3802("Received null map data from server")};window.O1059.prototype.storeSectorData=function(a){var b;this.O7938(a.x,a.y);a.i&&(b=ig.game.O4261.O2635(a.i,a.iix,"storeSectorData "+a.x+", "+a.y));this.O7447(a.ps,
a.iix,a.x,a.y);return b};window.O1059.prototype.O7447=function(a,b,c,d){for(var e=c*ig.game.O4873.O6440,f=d*ig.game.O4873.O6440,g,h,k,l,m,n,p=0;p<a.length;p++)if(k=a[p],g=k[0],h=k[1],l=k[2],m=k[3],n=k[4],k=k[5],void 0===g||void 0===h||null===g||null===h)ig.game.errorManager.warn("O3544: ps value in data without x or y. sector [psnumber]:"+c+","+d+"["+p+"]");else if(g=parseInt(g),h=parseInt(h),g=e+g,h=f+h,null===l)console.warn("Mapmanager got placement with null s id!");else if(l=b[l])m=this.O6728(l,
m,n,k),this.O3750(m,g,h),this.O2312(m,{x:g,y:h})};window.O1059.prototype.O2312=function(a,b,c){var d=ig.game.O4261.getItemBasic(a.tid,"map_forw_ent");d&&d.basicDataLoading.done(function(){d.O3927()&&ig.game.entityManager.O9325(a,b,c)})};window.O1059.prototype.O9487=function(){var a=new jQuery.Deferred,b=a.promise(),c=ig.game.O4873.O1577.x,d=ig.game.O4873.O1577.y,e=this;ig.game.O9817.O2437(c,d,ig.game.O4873.O8027,ig.game.O4873.currentArea).done(function(f){f&&1<=f.length&&(f=e.optimiseSectorOrder(f),
e.O3110(f));if(ig.game.areaGenerator)for(f=-1;1>=f;f++)for(var g=-1;1>=g;g++)ig.game.areaGenerator.O3021(c+f,d+g);a.resolve()});return b};window.O1059.prototype.optimiseSectorOrder=function(a){for(var b=[],c,d,e,f=0;f<a.length;f++)if(a[f]){e=a[f];break}if(e){f=e.x;var g=e.y,h=e.x;e=e.y;for(c=0;c<a.length;c++)if(d=a[c])d.x<f&&(f=d.x),d.x>h&&(h=d.x),d.y<g&&(g=d.y),d.y>e&&(e=d.y);c=f+1;d=g+1;this.O3753(b,this.O4139(a,c,d));this.O3753(b,this.O4139(a,f,d));this.O3753(b,this.O4139(a,h,d));this.O3753(b,
this.O4139(a,c,g));this.O3753(b,this.O4139(a,c,e));this.O3753(b,this.O4139(a,f,g));this.O3753(b,this.O4139(a,h,g));this.O3753(b,this.O4139(a,f,e));this.O3753(b,this.O4139(a,h,e));return b}ig.game.errorManager.O3802("No map data recieved")};window.O1059.prototype.O4139=function(a,b,c){for(var d,e,f=0;f<a.length;f++)if(e=a[f],e.x===b&&e.y===c){d=e;break}return d};window.O1059.prototype.O3753=function(a,b){b&&a.push(b)};window.O1059.prototype.O1411=function(){var a=this.O8148(),b=ig.game.O9817.O4218(ig.game.O4873.O8027,
ig.game.O4873.currentArea,a),c=this;b.done(function(d){0<c.mapLoadTryCount&&(c.mapLoadTryCount=0,ig.game.errorManager.O3614());c.O3110(d);if(ig.game.areaGenerator&&a)for(d=0;d<a.length;d++)a[d]&&ig.game.areaGenerator.O3021(a[d][0],a[d][1])});b.fail(function(d,e,f){"timeout"==e&&(c.mapLoadTryCount++,c.mapLoadTryCount<=c.mapLoadTryLimit?(ig.game.errorManager.pauseForMapLoad(),ig.game.O9817.O4218(ig.game.O4873.O8027,ig.game.O4873.currentArea,a).done(function(g){c.mapLoadTryCount=0;ig.game.errorManager.O3614();
c.O3110(g);if(ig.game.areaGenerator&&a)for(g=0;g<a.length;g++)a[g]&&ig.game.areaGenerator.O3021(a[g][0],a[g][1])})):ig.game.errorManager.O3802("Loading issue."))});return b};window.O1059.prototype.O8148=function(){var a=[],b=ig.game.O4873.O1577.x,c=ig.game.O4873.O1577.y,d=ig.game.O4873.O6641;"n"===d?(a[0]=[b-1,c-1],a[1]=[b,c-1],a[2]=[b+1,c-1]):"s"===d?(a[0]=[b-1,c+1],a[1]=[b,c+1],a[2]=[b+1,c+1]):"e"===d?(a[0]=[b+1,c-1],a[1]=[b+1,c],a[2]=[b+1,c+1]):"w"===d&&(a[0]=[b-1,c-1],a[1]=[b-1,c],a[2]=[b-1,c+
1]);return a};window.O1059.prototype.O5984=function(a){return null!==this.O8617(a)};window.O1059.prototype.O2336=function(a){return(a=this.O8704(a))&&!a.thing.O1292()};window.O1059.prototype.O8252=function(a,b,c,d){ig.game.entityManager.O1343(b);this.setMap(b.x,b.y,a,c);this.O2312(a,b,d);d||(a=ig.game.O4261.getItemBasic(a.tid,"map_pta"))&&"FILLLIGHT"==a.base&&ig.game.O1189.register(ig.game.O1189.types.PLACED_FILL_LIGHT)};window.O1059.prototype.O6451=function(a,b,c){a={tid:a,rotation:b||0,flip:c};
b=this.O1858();this.O8252(a,b,!1);return b};window.O1059.prototype.deleteThingAt=function(a,b,c,d,e){if((0==this.fillBuildQueue.length&&0==this.fillDeleteQueue.length||d||c)&&!ig.game.O6112.isEditingTooCloseToSpawnPoint({x:a,y:b})){if(d=this.O8704({x:a,y:b}))return d.thing.O3927()&&ig.game.entityManager.O2525(a,b),this.setMap(a,b,null,c),c||e||this.O8598("delete",d.thing.id,a,b,d.rotation,d.flip),d.thing;console.warn("deleteThingAt called for empty location")}};window.O1059.prototype.sendDeletionMarkersToMobile=
!0;window.O1059.prototype.requestDeletionMarkersForSector=function(a){ig.game.isEditorHere&&(this.sendDeletionMarkersToMobile||!ig.ua.mobile)&&ig.game.O9817.O5372(a.x,a.y,ig.game.O4873.O8027,ig.game.O4873.currentArea).done(function(b){for(var c=0;c<b.length;c++){var d=ig.game.O4873.O3991(a,b[c]);ig.game.entityManager.O3233(d)}})};window.O1059.prototype.O4813=function(a){ig.game.isEditorHere&&(this.sendDeletionMarkersToMobile||!ig.ua.mobile)&&setTimeout(function(){ig.game.O9817.O4882(a,ig.game.O4873.O8027,
ig.game.O4873.currentArea).done(function(b){for(var c,d,e=0;e<b.length;e++){c=b[e];for(var f=0;f<c.coords.length;f++)d=c.coords[f],d=ig.game.O4873.O3991({x:c.sx,y:c.sy},d),ig.game.entityManager.O3233(d)}})},1E3)};window.O1059.prototype.O8353=function(a,b){return this.O2337(a+ig.game.screen.x,b+ig.game.screen.y)};window.O1059.prototype.O2337=function(a,b){return{x:Math.floor(a/ig.game.O9925)+this.originX,y:Math.floor(b/ig.game.O9925)+this.originY}};window.O1059.prototype.O2132=function(a,b){return{x:(a-
this.originX)*ig.game.O9925,y:(b-this.originY)*ig.game.O9925}};window.O1059.prototype.O1498=function(a,b){a=this.O2132(a,b);return{x:a.x-ig.game.screen.x,y:a.y-ig.game.screen.y}};window.O1059.prototype.O2094=function(a,b){return{x:a-ig.game.screen.x,y:b-ig.game.screen.y}};window.O1059.prototype.O1858=function(){var a=this.O8353(ig.input.mouse.x.round(),ig.input.mouse.y.round());return{p:ig.game.O4873.O8027,a:ig.game.O4873.currentArea,x:a.x,y:a.y}};window.O1059.prototype.O3513=function(a){return 0!=
this.O746At(a)};window.O1059.prototype.somethingSolidAtGamePosition=function(a){a=this.O2337(a.x,a.y);return this.O3513(a)};window.O1059.prototype.O5610=function(){ig.O8378.defaultTileDef["82"]=[0,1,1,0,!0];ig.O8378.defaultTileDef["84"]=[0,0,1,1,!0];ig.O8378.defaultTileDef["86"]=[1,0,0,1,!0];ig.O8378.defaultTileDef["88"]=[1,1,0,0,!0];ig.O8378.defaultTileDef["92"]=[0,1,1,0,!0];ig.O8378.defaultTileDef["94"]=[0,0,1,1,!0];ig.O8378.defaultTileDef["96"]=[1,0,0,1,!0];ig.O8378.defaultTileDef["98"]=[1,1,0,
0,!0]};window.O1059.prototype.O9873=function(a,b,c,d,e){var f=!1;if(0==this.fillBuildQueue.length&&0==this.fillDeleteQueue.length){var g=this.O1858(),h=this.O8617(g);if(null===h&&!ig.game.O6112.isEditingTooCloseToSpawnPoint(g,e))f=!0,d=ig.game.O6112.O6451(a,b,c),this.O8598("build",a,d.x,d.y,b,c),b=ig.game.O6112.O2132(d.x,d.y),ig.game.decorator.O4562(b),ig.game.decorator.O6735(ig.game.O1257,d),!(b=ig.game.O4261.getItemBasic(a,"map_bam"))||!b.isLiquid()||b.attributes&&b.attributes.effectsFree?ig.game.sounds.putdown.play():
ig.game.sounds.splash.play(),ig.game.O2481=!1,ig.game.addStat(ig.game.O1257.O2970,"built",null,a),ig.game.O2116.O8691();else if(h&&!d){var k=h.tid;ig.game.O4261.getItem_P(k,"mapbam").done(function(){var l=ig.game.O4261.getItemBasic(k,"map_abam");0<=ig.game.O9643.indexOf(l.base)?ml.Misc.O4650(a,k,l.base):ig.game.sounds.nocando.play()})}}return f};window.O1059.prototype.O2400=function(a,b,c,d,e,f){var g=!1;if(0==this.fillBuildQueue.length&&0==this.fillDeleteQueue.length||e)null!==ig.game.O6112.O8617(d)||
ig.game.O6112.isEditingTooCloseToSpawnPoint(d)?!f&&0==this.fillBuildQueue.length&&ig.game.sounds.nocando.play():(g=!0,this.O8252({tid:a,rotation:b||0,flip:c},d,!1),b=ig.game.O6112.O2132(d.x,d.y),ig.game.decorator.O4562(b),ig.game.decorator.O6735(ig.game.O1257,d),a=ig.game.O4261.getItemBasic(a,"map_bal"),f||(!a||!a.isLiquid()||a.attributes&&a.attributes.effectsFree?ig.game.sounds.putdown.play():ig.game.sounds.splash.play()));return g};window.O1059.prototype.O6728=function(a,b,c,d){a={tid:a,rotation:b||
0,flip:c||0};d&&(a.ts=new Date(d));return a};window.O1059.prototype.isEditingTooCloseToSpawnPoint=function(a,b){var c=!1;if(a&&null!==a.x&&null!==a.y&&void 0!==a.x&&void 0!==a.y)if(ig.game.O1257){var d=!ig.game.debug.O8357;(10>ig.game.O1257.rank||d)&&ig.game.O4223&&(d=ig.game.areaCenterLocation,a.x>=d.x-1&&a.x<=d.x+1&&a.y>=d.y-1&&a.y<=d.y+1&&(c=!0,b||ig.game.O1257.say("new people spawn here")))}else c=!0;return c};window.O1059.prototype.O6916=function(a,b,c,d,e,f,g){if(0==this.fillBuildQueue.length&&
0==this.fillDeleteQueue.length){for(var h=b;h<=d;h++)for(var k=a;k<=c;k++)k==a&&h==b||k==c&&h==b||k==c&&h==d||k==a&&h==d||this.fillBuildQueue.push({thingId:e,rotation:f,flip:g,pos:{x:k,y:h}});ig.game.O1189.register(ig.game.O1189.types.USED_FILL_BUILD)}};window.O1059.prototype.O4754=function(){if(0<this.fillBuildQueue.length){var a=this.fillBuildQueue.shift();ig.game.O6112.O2400(a.thingId,a.rotation,a.flip,a.pos,!0);this.O8598("build",a.thingId,a.pos.x,a.pos.y,a.rotation,a.flip,!0);0<this.fillBuildQueue.length&&
setTimeout(function(){ig.game.O6112.O4754()},this.queuePerformDelayMs)}};window.O1059.prototype.O9686=function(a,b,c,d){if(0==this.fillBuildQueue.length&&0==this.fillDeleteQueue.length)for(var e=b;e<=d;e++)for(var f=a;f<=c;f++)f==a&&e==b||f==c&&e==b||f==c&&e==d||f==a&&e==d||this.fillDeleteQueue.push({pos:{x:f,y:e}})};window.O1059.prototype.O3482=function(){if(0<this.fillDeleteQueue.length){var a=this.fillDeleteQueue.shift();this.O8598("delete",a.thingId,a.pos.x,a.pos.y,a.rotation,a.flip,!0);ig.game.O6112.deleteThingAt(a.pos.x,
a.pos.y,void 0,!0);a={x:a.pos.x*ig.game.O9925,y:a.pos.y*ig.game.O9925};ig.game.decorator.O7564(a);ig.game.decorator.O2640(ig.game.O1257,a);ig.game.sounds.bin.play();0<this.fillDeleteQueue.length&&setTimeout(function(){ig.game.O6112.O3482()},this.queuePerformDelayMs)}};window.O1059.prototype.O9399=function(){this.fillBuildQueue=[];this.fillDeleteQueue=[]};window.O1059.prototype.O8598=function(a,b,c,d,e,f,g){if("build"!=a&&"delete"!=a)console.warn("LogActionAt action must be build or delete.");else if(b&&
(this.actionLogIndex<this.actionLog.length-1&&(this.actionLog=this.actionLog.slice(0,this.actionLogIndex+1)),this.actionLog.push({action:a,tid:b,x:c,y:d,rotation:e,flip:f}),this.actionLogIndex++,50<this.actionLog.length&&(this.actionLog.shift(),this.actionLogIndex--),!g&&4<=this.actionLog.length&&0==this.fillBuildQueue.length&&0==this.fillDeleteQueue.length)){a=this.actionLog.slice(this.actionLogIndex-4+1,this.actionLogIndex+1);b=!0;for(c=1;c<a.length;c++)if(a[c].action!=a[0].action||a[c].tid!=a[0].tid){b=
!1;break}b&&(this.O6520(a)?this.O3090(a):(this.O4136(a)||this.O4956(a))&&this.O2353(a))}};window.O1059.prototype.O6520=function(a){return a[0].y==a[1].y&&a[1].x==a[2].x&&a[2].y==a[3].y&&a[3].x==a[0].x&&a[0].x!=a[2].x&&a[0].y<a[2].y};window.O1059.prototype.O4136=function(a){var b=a[0].y==a[1].y&&a[1].y==a[2].y&&a[2].y==a[3].y,c=a[0].x-1==a[1].x&&a[3].x-1==a[2].x||a[2].x-1==a[3].x&&a[1].x-1==a[0].x;a=2<=Math.abs(a[1].x-a[3].x);return b&&c&&a};window.O1059.prototype.O4956=function(a){var b=a[0].x==a[1].x&&
a[1].x==a[2].x&&a[2].x==a[3].x,c=a[0].y-1==a[1].y&&a[3].y-1==a[2].y||a[2].y-1==a[3].y&&a[1].y-1==a[0].y;a=2<=Math.abs(a[1].y-a[3].y);return b&&c&&a};window.O1059.prototype.O3090=function(a){var b=a[0].x,c=a[1].x,d=a[0].y,e=a[2].y,f="build"==a[0].action;if(!(1>=Math.abs(c-b)&&1>=Math.abs(e-d))){b>c&&(b=a[1].x,c=a[0].x);d>e&&(d=a[2].y,e=a[0].y);var g=this.O8704(f?{x:a[0].x,y:a[0].y}:{x:b+1,y:d+1}),h=(c-b)*(e-d);g&&g.thing&&ig.game.mapPlacementValidation.O8227(g.thing.base)&&ig.game.mapPlacementValidation.O1394(g.thing.id,
f,b,d,c,e)&&625>=h&&ig.game.mapPlacementValidation.O9449()&&(f?(this.O6916(b,d,c,e,a[0].tid,g.rotation,g.flip),setTimeout(function(){ig.game.O6112.O4754()},this.queuePerformDelayMs)):(this.O9686(b,d,c,e),setTimeout(function(){ig.game.O6112.O3482()},this.queuePerformDelayMs)))}};window.O1059.prototype.O2353=function(a){var b="build"==a[0].action,c={x:a[0].x,y:a[0].y};b||(a[1].x<a[2].x?c={x:a[1].x+1,y:a[0].y}:a[1].x>a[2].x?c={x:a[1].x-1,y:a[0].y}:a[1].y<a[2].y?c={x:a[0].x,y:a[1].y+1}:a[1].y>a[2].y&&
(c={x:a[0].x,y:a[1].y-1}));var d=this.O8704(c);c=a[1].x<a[2].x?Math.abs(a[1].x-a[3].x):Math.abs(a[1].y-a[3].y);if(d&&d.thing&&ig.game.mapPlacementValidation.O8227(d.thing.base,!0)&&50>=c&&ig.game.mapPlacementValidation.O9449()){c=[];if(a[0].x!=a[1].x){var e=a[0].y;if(a[1].x<a[3].x)for(var f=a[1].x+1;f<=a[3].x-1;f++)c.push({thingId:a[0].tid,rotation:d.rotation,flip:d.flip,pos:{x:f,y:e}});else for(f=a[1].x-1;f>=a[3].x+1;f--)c.push({thingId:a[0].tid,rotation:d.rotation,flip:d.flip,pos:{x:f,y:e}})}else if(f=
a[0].x,a[1].y<a[3].y)for(e=a[1].y+1;e<=a[3].y-1;e++)c.push({thingId:a[0].tid,rotation:d.rotation,flip:d.flip,pos:{x:f,y:e}});else for(e=a[1].y-1;e>=a[3].y+1;e--)c.push({thingId:a[0].tid,rotation:d.rotation,flip:d.flip,pos:{x:f,y:e}});if(b){b=!1;for(a=0;a<c.length&&!b;a++)b=ig.game.O6112.O8704(c[a].pos),b=!!b;b||(this.fillBuildQueue=c,setTimeout(function(){ig.game.O6112.O4754()},this.queuePerformDelayMs))}else{b=!1;for(a=0;a<c.length&&!b;a++)b=!ig.game.O6112.O8704(c[a].pos);b||(this.fillDeleteQueue=
c,setTimeout(function(){ig.game.O6112.O3482()},this.queuePerformDelayMs))}}};window.O1059.prototype.undo=function(){if(this.actionLog&&1<=this.actionLog.length&&0<=this.actionLogIndex&&ig.game.O1257){var a=this.actionLog[this.actionLogIndex--];this.O4890(a,"build"==a.action?"delete":"build")}};window.O1059.prototype.redo=function(){if(this.actionLog&&1<=this.actionLog.length&&this.actionLogIndex<this.actionLog.length-1&&ig.game.O1257){var a=this.actionLog[++this.actionLogIndex];this.O4890(a,a.action)}};
window.O1059.prototype.O4890=function(a,b){var c={x:a.x,y:a.y};if(this.distanceFineForUndoRedo(c)){var d=this.O8704(c),e=!1;switch(b){case "build":(e=!!d)||ig.game.O6112.O2400(a.tid,a.rotation?a.rotation:0,a.flip?a.flip:0,c,!1,!1);break;case "delete":(e=!(d&&d.thing&&d.thing.id&&d.thing.id==a.tid))||(ig.game.O6112.deleteThingAt(a.x,a.y,!1,!1,!0),c={x:c.x*ig.game.O9925,y:c.y*ig.game.O9925},ig.game.decorator.O7564(c),ig.game.decorator.O2640(ig.game.O1257,c),ig.game.sounds.bin.play())}e&&ig.game.sounds.shortWhoosh.play()}else ig.game.sounds.shortWhoosh.play()};
window.O1059.prototype.distanceFineForUndoRedo=function(a){return 750>=ml.Misc.O8674(ig.game.O1257.pos,this.O2132(a.x,a.y))}});ig.baked=!0;
ig.module("game.core.colors").defines(function(){window.Colors=ig.Class.extend({"enum":{red:1,green:2,cyan:3,purple:4,black:5,yellow:6,white:7,orange:8,pink:9,blue:10},dialogRgbs:{red:{overlay:[255,40,40],fill:[213,139,132],fillDark:[171,100,96],O5379:[203,150,150]},green:{overlay:[40,255,40],fill:[149,203,132],fillDark:[107,164,96],O5379:[190,233,190]},cyan:{overlay:[0,255,255],fill:[137,203,196],fillDark:[95,164,160],O5379:[180,233,233]},purple:{overlay:[40,40,255],fill:[149,139,196],fillDark:[107,
100,160],O5379:[190,190,233]},black:{overlay:[0,0,0],fill:[137,127,120],fillDark:[95,88,84],O5379:[160,160,160]},yellow:{overlay:[255,255,0],fill:[213,203,120],fillDark:[171,164,84],O5379:[233,233,190]},white:{overlay:[255,255,255],fill:[213,203,196],fillDark:[171,164,160],O5379:[255,255,255]},orange:{overlay:[255,160,0],fill:[213,175,120],fillDark:[171,136,84],O5379:[248,210,180]},pink:{overlay:[255,48,148],fill:[213,141,164],fillDark:[171,102,128],O5379:[245,180,200]},blue:{overlay:[0,80,255],fill:[137,
151,196],fillDark:[95,112,160],O5379:[130,160,255]}},O7394:function(a){var b=null,c;for(c in this.enum)if(this.enum[c]===a){b=c;break}return b},fontColors:{white:{r:255,g:255,b:255},black:{r:0,g:0,b:0},red:{r:255,g:80,b:80},green:{r:100,g:255,b:100},blue:{r:100,g:150,b:255},yellow:{r:255,g:255,b:100},orange:{r:255,g:180,b:80},purple:{r:200,g:100,b:255},pink:{r:255,g:150,b:200},cyan:{r:100,g:255,b:255},darkRed:{r:180,g:50,b:50},darkGreen:{r:60,g:180,b:60},darkBlue:{r:60,g:100,b:200},gold:{r:255,g:215,
b:0},silver:{r:192,g:192,b:192}}})});ig.baked=!0;
ig.module("game.entities.decorative.removedust").requires("impact.entity").defines(function(){window.EntityRemovedust=ig.Entity.extend({size:{x:4,y:3},maxVel:{x:100,y:100},friction:{x:0,y:0},type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,opacity:40,decorative:!0,decay:30,init:function(a,b,c){this.parent(a,b,c);this.animSheet=new ml.AnimationSheet(null,this.size.x,this.size.y,ig.game.O8159.getImage(ig.game.O8159.dust));this.O2027=0;this.vel.y=Math.floor(6*Math.random()-
3);this.vel.x=Math.floor(6*Math.random()-3);this.addAnim("main",1,[0])},update:function(){this.opacity-=this.decay*ig.system.tick;0>=this.opacity&&(this.opacity=0,this.kill());this.parent()},draw:function(){ig.system.context.globalAlpha=.01*this.opacity;this.parent();ig.system.context.globalAlpha=1},O2550:function(a){this.pos.x+=this.vel.x*ig.system.tick;this.pos.y+=this.vel.y*ig.system.tick},check:function(){}})});ig.baked=!0;
ig.module("game.core.dragwatcher").requires("game.entities.decorative.removedust","impact.timer").defines(function(){window.O9661=ig.Class.extend({O3007FromMap:!1,O3577:null,originTileLocation:{x:0,y:0},O5980:!1,O8517:{timer:null,O1345:2,fadeTime:.5,opacity:.8,O3370:.8},O2348:null,O4259:0,init:function(){},update:function(){if(!ig.game.O1257||!ig.game.O1257.O2868()&&!ig.game.O1257.O4292()){var a=ig.input.released("click");if(a||!ig.game.O4774.O4920()||ig.game.holderDialog&&ig.game.holderDialog.O1176())ig.game.O4774.O3044()&&
!ig.game.panelSet.O7518()&&!this.O3007FromMap&&!ig.game.O3199&&(ig.game.O1795&&ig.input.state("ctrl")?(c=ig.game.O6112.O8617(ig.game.O7712))&&ig.game.painter.O8725(c.tid):ig.game.O2636()?ig.game.O2974():ig.game.isFullAccount&&ig.input.state("shift")?((c=ig.game.O6112.O8617(ig.game.O7712))&&ig.game.O7747.O6398(c.tid),ig.game.O4774.O5457(!1)):this.O9067());else{if(ig.game.customSnapshotDialog&&ig.game.customSnapshotDialog.isOpen||ig.game.O7606&&ig.game.O7606.O3117())return;if(ig.input.O3657()){this.O8945();
return}ig.game.panelSet&&ig.game.panelSet.panels[ig.game.panelSet.tabEnum.search].O9609();if(!ig.game.panelSet.O7518())if(ig.game.isFullAccount)if(ig.game.O1795||ig.game.O5058.isSpeaking)ig.game.O1795&&(c=ig.game.O6112.O8617(ig.game.O7712))&&(ig.game.sounds.pickup.play(),ig.game.O7747.O1618(c.tid,this,"world"));else{ig.game.O4774.O6730(!1);ig.game.panelSet&&ig.game.panelSet.panels[ig.game.panelSet.tabEnum.search].O9609();var b=ig.game.entityManager.getMovingItemUnderMouse();if(b)if(ig.input.state("ctrl"))ig.game.isEditorHere?
(this.originTileLocation=b.O5682,(b=this.O1054(!1,b))&&ig.game.O1189.register(ig.game.O1189.types.DID_INWORLD_REMOVE)):ig.game.O5058.O8943("editorOnly");else if((ig.ua.mobile||ig.ua.isSteamBigPictureMode)&&this.originTileLocation.x==ig.game.O7712.x&&this.originTileLocation.y==ig.game.O7712.y&&this.O2348&&.5>=this.O2348.delta())this.O2348=null,ig.game.isEditorHere?(b=this.O1054(!1))&&ig.game.O1189.register(ig.game.O1189.types.DID_INWORLD_REMOVE):ig.game.O5058.O8943("editorOnly");else{var c=ig.game.O6112.O8617(b.O5682);
if(c){var d=ig.game.O4261.getItemBasic(c.tid,"drag_update1");ig.game.O3199={tid:c.tid,rotation:c.rotation,rotatable:d.rotatable,flippable:d.flippable,flip:c.flip,O1292:d.O1292(),base:d.base,attributes:d.attributes};this.O3007FromMap=!0;this.originTileLocation=b.O5682;this.O2348=new ml.Timer;ig.game.sounds.pickup.play()}}else ig.game.O6112.O2336(ig.game.O7712)?ig.input.state("ctrl")?ig.game.isEditorHere?ig.input.state("shift")||(this.originTileLocation=ig.game.O7712,(b=this.O1054(!1))&&ig.game.O1189.register(ig.game.O1189.types.DID_INWORLD_REMOVE)):
ig.game.O5058.O8943("editorOnly"):ig.game.writableDialog&&ig.game.writableDialog.isOpen?ig.game.writableDialog.O9701&&(c=ig.game.O6112.O8617(ig.game.O7712),d=ig.game.O4261.getItemBasic(c.tid,"drag_update2"),ig.game.writableDialog.O2750(d)):(ig.ua.mobile||ig.ua.isSteamBigPictureMode)&&this.originTileLocation.x==ig.game.O7712.x&&this.originTileLocation.y==ig.game.O7712.y&&this.O2348&&.5>=this.O2348.delta()?(ig.O4534.stopAll(),this.O2348=null,ig.game.isEditorHere?(b=this.O1054(!1))&&ig.game.O1189.register(ig.game.O1189.types.DID_INWORLD_REMOVE):
ig.game.O5058.O8943("editorOnly"),this.O3007FromMap=!1,ig.game.O3199=!1):(c=ig.game.O6112.O8617(ig.game.O7712),d=ig.game.O4261.getItemBasic(c.tid,"drag_update3"),ig.game.O3199={tid:c.tid,rotation:c.rotation,rotatable:d.rotatable,flippable:d.flippable,flip:c.flip,O1292:d.O1292(),loc:ig.game.O7712,base:d.base,attributes:d.attributes},this.O3007FromMap=!0,this.originTileLocation.x=ig.game.O7712.x,this.originTileLocation.y=ig.game.O7712.y,this.O2348=new ml.Timer,ig.game.sounds.pickup.play(),ig.input.state("shift")?
ig.game.isEditorHere?(this.O5980=!0,this.originTileLocation=ig.game.O7712,this.O1054(!1,null,!0)):(this.O5980=!1,ig.game.O5058.O8943("editorOnly")):this.O5980=!1):ig.game.isEditorHere&&ig.game.entityManager.O8933(ig.game.O7712)&&(ig.ua.mobile?this.O9067():ig.input.state("shift")&&ig.game.deletionMarkerDialog.O2752(ig.game.O7712))}else if(ig.ua.mobile||ig.ua.isSteamBigPictureMode)this.nonEditorTappedInfo={timer:new ml.Timer,x:ig.game.O7712.x,y:ig.game.O7712.y}}if(!a&&ig.input.state("click")&&(this.O3007FromMap||
this.nonEditorTappedInfo)){if(ig.game.O7606&&ig.game.O7606.O4673()){this.O3007FromMap=!1;ig.game.O3199=!1;return}if(ig.ua.mobile){if(this.nonEditorTappedInfo){b=ig.game.O6112.O1858();b.x==this.nonEditorTappedInfo.x&&b.y==this.nonEditorTappedInfo.y&&.75<=this.nonEditorTappedInfo.timer.delta()&&(this.O9067(),this.nonEditorTappedInfo=null);return}if(ig.game.isFullAccount&&this.O2348&&.75<=this.O2348.delta()&&(b=ig.game.O6112.O1858(),b.x==this.originTileLocation.x&&b.y==this.originTileLocation.y)){this.O9067();
this.O3007FromMap=!1;ig.game.O3199=!1;return}}this.nonEditorTappedInfo||(ig.game.panelSet&&1!=ig.game.panelSet.tabState&&ig.game.panelSet.O7518()&&ig.game.panelSet.O6923(1),ig.game.panelSet&&ig.game.panelSet.O6777.O6905(),ig.input.state("esc")&&(this.O3007FromMap=!1,ig.game.O3199=!1),ig.game.isFullAccount&&(ig.input.pressed("rightclick")||ig.input.state("ctrl")&&ig.input.pressed("r"))&&this.O8945())}ig.game.isFullAccount&&this.O3007FromMap&&a&&(this.O3007FromMap=!1,ig.game.O7606&&ig.game.O7606.O4673()?
ig.game.O3199=!1:ig.game.panelSet.O2486()?(ig.game.painter&&ig.game.painter.O4466(ig.game.O3199.tid,ig.game.O3199.base),ig.game.O3199=!1):ig.game.panelSet.O3700()?ig.game.isEditorHere?(this.O1054(!0),ig.game.O3199=!1):ig.game.O5058.O8943("editorOnly"):ig.game.panelSet.O7518()?((a=ig.game.panelSet.O6777.O1580())?ml.Misc.O4650(ig.game.O3199.tid,a.id,a.type):(a=ig.game.panelSet.O6777.O3457(),ig.game.O7747.O1015(ig.game.O3199.tid,a,ig.game.O3199.loc)),ig.game.O3199=!1):ig.game.holderDialog&&ig.game.holderDialog.O1176()?
(ig.game.O4774.O6730(),ig.game.holderDialog.addItem(ig.game.O3199.tid,ig.game.O3199.rotation,ig.game.O3199.flip),ig.game.O3199=!1):ig.game.multithing&&ig.game.multithing.O1176()?ig.game.isEditorHere?(ig.game.O4774.O6730(),ig.game.multithing.addItem(ig.game.O3199.tid,ig.game.O3199.rotation,ig.game.O3199.flip),ig.game.O3199=!1):ig.game.O5058.O8943("editorOnly"):(b=ig.game.O6112.O1858(),this.originTileLocation&&b.x==this.originTileLocation.x&&b.y==this.originTileLocation.y&&!this.O5980?ig.game.O3199=
!1:(ig.ua.mobile||ig.ua.isSteamBigPictureMode)&&ig.game.entityManager.getMovingItemUnderMouse()?ig.game.O3199=!1:ig.game.O4774.O9524()&&ig.game.attachmentManager.O5110(ig.game.O3199.base,ig.game.O3199.attributes)?ig.game.isEditorHere?(ig.game.attachmentManager.O1487(ig.game.O1257,ig.game.O3199.base,ig.game.O3199.tid),ig.game.O3199=!1):ig.game.O5058.O8943("editorOnly"):(b=!1,ig.game.mapPlacementValidation.O9195(ig.game.O3199,void 0,!0)&&(b=ig.game.O6112.O9873(ig.game.O3199.tid,ig.game.O3199.rotation,
ig.game.O3199.flip)),!b&&this.O5980&&(ig.game.isEditorHere?ig.game.O6112.O2400(ig.game.O3199.tid,ig.game.O3199.rotation,ig.game.O3199.flip,this.originTileLocation):ig.game.O5058.O8943("editorOnly")),ig.game.O3199=!1,this.O2348=null,b&&ig.game.O1189.register(ig.game.O1189.types.DID_INWORLD_BUILD),this.O5980=!1)))}},O9067:function(){if(!(ig.game.holderDialog&&(ig.game.holderDialog.O1176()||ig.game.holderDialog.O3566)||ig.ua.phone&&ig.input.mouse.y>=.6*ig.system.height)){var a=ig.game.O7712;ig.game.O6112.O8617(a)?
(ig.game.itemContextMenu.O5157(a),ig.game.O4774.O5457(!1)):ig.game.isEditorHere&&ig.game.entityManager.O8933(a)&&ig.game.deletionMarkerDialog.O5157(a)}},O8945:function(){ig.game.O3199&&(ig.game.O3199.rotatable||ig.game.O3199.flippable)&&!ig.ua.phone&&(ig.game.O3199.flippable?ig.game.O3199.rotatable?3==ig.game.O3199.rotation?(ig.game.O3199.flip=ig.game.O3199.flip?0:1,ig.game.O3199.rotation=0):ig.game.O3199.rotation++:ig.game.O3199.flip=ig.game.O3199.flip?0:1:ig.game.O3199.rotation=3==ig.game.O3199.rotation?
0:ig.game.O3199.rotation+1,this.O8517.timer=new ml.Timer,this.O8517.opacity=this.O8517.O3370,ig.game.sounds.shortWhoosh.play())},draw:function(){if(this.O3007FromMap&&ig.game.O3199){var a=ig.input.mouse.x-ig.game.O2953,b=ig.input.mouse.y-ig.game.O2953,c="DECOFB"==ig.game.O3199.base?1:null,d=ig.game.O3199.O1292?0:ig.game.O3199.rotation;ig.game.O4261.getItemBasic(ig.game.O3199.tid,"drag_draw").draw(a,b,d,ig.game.O3199.flip,void 0,c);ig.game.O3199.O1292&&this.O8517.timer&&this.O1239(this.O8517,a,b)}},
O1742:function(a,b){return this.O3007FromMap&&this.originTileLocation.x==a&&this.originTileLocation.y==b},O6974:function(a,b){a=ig.game.O6112.O2132(a,b);ig.game.decorator.O7564(a)},O1239:function(a,b,c){var d=0==ig.game.O3199.rotation||2==ig.game.O3199.rotation;ig.system.context.globalAlpha=a.opacity;d?ig.game.O8159.O2331(b+6,c-1):ig.game.O8159.O3779(b-1,c+6);ig.system.context.globalAlpha=1;a.timer.delta()>a.fadeTime&&(a.opacity=Math.max(a.opacity-.01,0));a.timer.delta()>a.O1345&&(a.timer=null,a.opacity=
a.O3370)},O1054:function(a,b,c){var d=!0;if(this.originTileLocation){var e=ig.game.O6112.O2132(this.originTileLocation.x,this.originTileLocation.y);if(("ANY"==ig.game.O5549||ig.game.O4223)&&5>ig.game.O1257.rank&&ig.game.O4873.O6714(e))c||ig.game.O1257.say(ig.game.O4873.O6566()),d=!1;else{var f=(e=ig.game.O6112.deleteThingAt(this.originTileLocation.x,this.originTileLocation.y,!1))?e.id:null;e&&"INTERACT"==e.base&&ig.game.O2116.deleteStoreDataOfEntity(e,this.originTileLocation);e&&"HOLDER"==e.base&&
ig.game.holderDialog&&ig.game.holderDialog.isOpen&&f==ig.game.holderDialog.holderId&&ig.game.O7259&&this.originTileLocation.x==ig.game.O7259.O5682.x&&this.originTileLocation.y==ig.game.O7259.O5682.y&&(ig.game.holderDialog.close(),ig.game.O7259=null);c||(b?ig.game.decorator.O7564(b.pos):(this.O6974(this.originTileLocation.x,this.originTileLocation.y),b=ig.game.O6112.O2132(this.originTileLocation.x,this.originTileLocation.y),ig.game.decorator.O2640(ig.game.O1257,b)));c||(!e||!e.isLiquid()||e.attributes&&
e.attributes.effectsFree?ig.game.sounds.bin.play():ig.game.sounds.waterleave.play());a&&!c&&(ig.game.panelSet.O6777.O4979(),ig.game.panelSet.O2073());e&&ig.game.addStat(ig.game.O1257.O2970,"removed",null,e.id);var g=ig.game.O4873.O4556({x:this.originTileLocation.x,y:this.originTileLocation.y});setTimeout(function(){ig.game.O6112.requestDeletionMarkersForSector(g)},500)}}return d}})});ig.baked=!0;
ig.module("game.core.speedwatcher").defines(function(){window.SpeedWatcher=ig.Class.extend({O8112:!0,O5687:!1,O9060:!1,O4543:30,O6419:null,O3936:15,O6349:0,O7611:0,O6192:!0,O7652:5,O6751:20,O6007:1,O6620:6,O5766:1,O5066:0,O5158:!1,measureId:0,launchFirstMeasureNowThatShroudIsRemoved:function(){this.log("");this.log("Shroud removed, first FPS check to come in 5 seconds.");setTimeout(function(){ig.game.O7456.O9666()},5E3)},O9666:function(){this.log("Setting up new FPS check.");var a=this;setTimeout(function(){a.O6297()},
1E3*this.O6007);setTimeout(function(){a.O5045()},1E3*this.O6620)},update:function(){this.O5158&&this.O5066++},O1569:function(){this.O5687=this.O6192=!1},O6297:function(){this.O8112&&(this.O5066=0,this.O5158=!0)},O5045:function(){if(this.O8112&&(this.O5158=!1,this.measureId=ig.game.O4293(1E6,9E6),0<this.O5066)){var a=this.O5066/(this.O6620-this.O6007);this.O6419=Math.ceil(a).limit(0,240);this.log("");var b=this;a<=this.O4543?(this.O5687=!0,ig.game.embeddedSoundUrl&&ig.game.removeEmbeddedSound(),this.log("Low average FPS of "+
Math.ceil(a)+" detected, now optimizing for speed.")):this.log("Average FPS of "+Math.ceil(a)+" detected. No stronger optimization for speed needed.");40<=a?(this.O7611++,this.O5687&&5<=this.O7611&&(this.O5687=!1)):this.O7611=0;a<=this.O3936?this.O6349++:this.O6349=0;this.O5687&&(this.O6192?ig.game.O4482&&ig.game.isEditorHere&&(this.O5687=!1):this.O5687=!1);this.log("Times in row where good: "+this.O7611+" | Where very slow: "+this.O6349);this.log("New check in "+this.O5766+" seconds.");setTimeout(function(){b.O9666()},
1E3*this.O5766)}},O9760:function(){return!!(ig.game.O7456.O6419&&ig.game.O7456.O6419<=this.O3936)},O9621:function(){this.O8112?ig.game.alertDialog.open("Last average FPS measured: "+(null!=this.O6419?String(this.O6419):"(still measuring)")+"\rFPS recovery measures started: "+(this.O5687?"yes":"no")+"\rLatency server -> client at start: "+String(ig.game.O4086.O3691/1E3)+" seconds\rUser agent: "+navigator.userAgent):ig.game.alertDialog.open("Speed watcher has been deactivated")},log:function(a){this.O9060&&
console.log(a)}})});ig.baked=!0;
ig.module("game.core.interactingmanager").defines(function(){window.InteractingManager=ig.Class.extend({O8182:7,O6548:38,O4219:114,O1306:!1,O2464:["#","/",":",">","@"],O5679:60,O2781:10,O9543:500,O5342:15,O7613:"bumps transports throws harms heals shows plays stops waits rumbles places embeds unembeds limits font".split(" "),O1038:"  ",possibleInteractions:"approaches nears reaches reached enters entered gets hears sees touches touched line-touches line-touched ends hits views viewed hears-notes".split(" "),O2595:"is isn't has hasn't currently not_currently in not_in".split(" "),
O6879:"they_are they_aren't they_embody they_don't_embody they_mount they_don't_mount they_wear they_don't_wear they_hold they_don't_hold they_possess they_don't_possess they_have_attached they_don't_have_attached they_have_equipped they_don't_have_equipped they_move".split(" "),someoneVerbs:"uses mounts unmounts attaches unattaches wears unwears embodies unembodies says does takes throws gathers activates emits plays plays-notes shouts consumes sits_on lies_on hard_lands_on reads writes hits catches dies selects holder-selects checks touches crumbles equips unequips finishes_countdown at_countdown kills".split(" "),
O9905:"arrives acts swims jumps harmed climbs transports crumbles bounces dies finishes_countdown".split(" "),O4742:625,O8610:{},currentEmbeddingInteract:null,O5758:null,O6704:-1E12,O7568:1E12,O3511:{},O6375:["READABLE","WRITABLE","MEDIUM","HOLDER"],countdown:null,O8670:null,O7663:null,O7988:"audio-free",O1470:"visual-free",init:function(){var a;for(a=0;a<this.O9905.length;a++)this.someoneVerbs.push(this.O9905[a]);for(a=0;a<this.someoneVerbs.length;a++)this.possibleInteractions.unshift("someone_"+
this.someoneVerbs[a]);for(a=0;a<this.possibleInteractions.length;a++)this.O2595.unshift(this.possibleInteractions[a]);for(a=0;a<this.O6879.length;a++)this.O2595.unshift(this.O6879[a])},receiveMessageFromExternal:function(a){ig.game.O2116.currentEmbeddingInteract&&a&&(ig.game.O2116.currentEmbeddingInteract.O2719("sees",a,"embedding"),ig.game.O2116.currentEmbeddingInteract&&ig.game.O2116.currentEmbeddingInteract.O2719("hears",a,"embedding"),window.focus())},O5450:function(a){a=a.split("\n");for(var b=
0;b<a.length;b++){var c=a[b];0<=c.indexOf("someone")&&0<=c.indexOf("[heard]")&&0<=c.indexOf("/embed")&&(a[b]="")}return a.join("\n")},O8047:function(a,b){var c=[];if(!ig.game.areaClosed&&ig.game.O1257&&!ig.game.O1257.O9832("disablesInteracting")||ig.game.O1795){ig.game.debug.O8913&&(window.consoleref.log("_____ Interacting content _____"),window.consoleref.log(a),window.consoleref.log("_______________________________"));a=this.O4871(a);a=this.O5450(a);var d={n:0},e=null,f=0,g=!1,h=null;a=a.split("\n");
for(var k=0;k<a.length;k++){var l=ig.game.strings.trim(a[k]);if(l&&""!=l){h?(e=h,h=null,g=!0):g&&!this.O1170(l)&&(e=null,g=!1);k<a.length-1&&!this.O1170(l)&&this.O1170(a[k+1])&&(h=++f,g=!0);var m={};l=this.O4630(l);0===l.indexOf("-")&&(l=l.substr(1));if((l=ig.game.strings.trim(l))&&""!=l){if(0==l.indexOf("#")){var n=l.split(" ");m.marker=n[0].substr(1);l=ml.Misc.O9452(n," ",1)}if(l&&""!=l){n=0<=l.indexOf("://");if(1<=l.indexOf(":")&&!n){n=l.split(":");m.condition=ig.game.strings.trim(n[0].toLowerCase());
if(m.condition){0===m.condition.indexOf("someone ")&&(m.condition=ig.game.strings.replaceAll(m.condition,"someone ","someone_"));for(l=0;l<this.O6879.length;l++){var p=this.O6879[l],q=ig.game.strings.replaceAll(p,"_"," ");0<=m.condition.indexOf(q+" ")&&(m.condition=ig.game.strings.replaceAll(m.condition,q+" ",p+" "))}m.condition=ig.game.strings.replaceAll(m.condition,"they ","sees ")}this.O5201(m.condition)&&(m.interactionBased=!0);l=ig.game.strings.trim(ml.Misc.O9452(n,":",1))}n=[];l=this.insertLineBreaksIfTooLong(l);
l=l.split(this.O1038);for(p=0;p<l.length;p++)if(q=this.O3054(l[p],b,e,d))q=this.O3945(q),h&&!q.setContext&&(q.setContext=h),n.push(q);m.condition&&0==n.length&&n.push({});1<=n.length&&(e&&(m.context=e),m.result=n,c.push(m))}}}}}return c},O4871:function(a){a=ig.game.strings.O3608("\n"+a);a=this.toLowerCaseExceptUrls(a);a=ig.game.strings.replaceAll(a,"[ad area]",this.O9456());a=ig.game.strings.replaceAll(a,"[ad text]",this.O6465());a=a.replace(/\r\n/g,"\n");a=ig.game.strings.replaceAll(a,"not currently",
"not_currently");a=ig.game.strings.replaceAll(a,"/clear countdown","/clears countdown");a=this.O5999(a);a=a.replace(/\nif /gi,"\nif ");a=this.O8533(a);a=this.O8612(a);a=ig.game.strings.replaceAll(a,"/they don't autoheal","/they don't auto-heal");a=ig.game.strings.replaceAll(a,"/they autoheal","/they auto-heal");a=ig.game.strings.replaceAll(a,"[age in seconds]","[age_in_seconds]");a=ig.game.strings.replaceAll(a,"[age in days]","[age_in_days]");a=ig.game.strings.replaceAll(a,"[ads count]","[ads_count]");
a=ig.game.strings.replaceAll(a,"[main area]","[main_area]");a=ig.game.strings.replaceAll(a,"/they auto-sets-spawnpoints","/they auto-set-spawnpoints");a=ig.game.strings.replaceAll(a,"/they don't auto-sets-spawnpoints","/they don't auto-set-spawnpoints");a=ig.game.strings.replaceAll(a,"/set spawnpoint","/sets spawnpoint");a=ig.game.strings.replaceAll(a,"/set-spawnpoint","/sets spawnpoint");a=ig.game.strings.replaceAll(a,"/sets-spawnpoint","/sets spawnpoint");a=ig.game.strings.replaceAll(a,"hear-notes",
"hears-notes");a=ig.game.strings.replaceAll(a,"hears hi:",'hears "hi":');a=ig.game.strings.replaceAll(a,"hears hi ",'hears "hi" ');a=ig.game.strings.replaceAll(a,"transport here","transports here");a=ig.game.strings.replaceAll(a,"someone detaches","someone unattaches");a=this.O3308(a);return ig.game.strings.replaceAll(a,"/:","/~")},O9456:function(){var a="";ig.game.areaAdForDisplay&&ig.game.areaAdForDisplay.stablerAreaName&&(a=ig.game.areaAdForDisplay.stablerAreaName,a=ig.game.strings.replaceAll(a,
"/"," "));return a},O6465:function(){var a="";ig.game.areaAdForDisplay&&ig.game.areaAdForDisplay.stablerTitle&&(a=ig.game.areaAdForDisplay.stablerTitle,a=ig.game.strings.replaceAll(a,"/"," "));return a},update:function(){this.O5575();this.O1785();this.O7549()},draw:function(){this.countdown&&this.countdown.isVisible&&""!==this.countdown.O2835&&ml.Misc.O6657(this.countdown.O2835,ig.system.width/2,6)},O5797:function(a,b){this.countdown={timer:new ml.Timer,O1692:a,O2835:"",isVisible:b,ended:!1,O4620:0}},
O6366:function(){this.countdown=null},O5527:function(a){this.countdown&&(this.countdown.O4620+=parseInt(a))},O5575:function(){if(this.countdown&&this.countdown.timer&&this.countdown.O1692&&!this.countdown.ended){var a=this.countdown.O1692-this.countdown.timer.delta();a+=this.countdown.O4620;0>=a&&(a=0);var b=this.countdown.O2835;this.countdown.O2835=Math.ceil(a);0==a?(this.O7884(ig.game.O1257,"finishes_countdown"),this.countdown&&(this.countdown.timer=null,this.countdown.ended=!0)):this.countdown.O2835!=
b&&this.O7884(ig.game.O1257,"at_countdown",String(this.countdown.O2835))}},O7549:function(){this.currentEmbeddingInteract?(this.O5758||(this.O5758=new ml.Timer),1<=this.O5758.delta()&&(window.focus(),this.O5758=new ml.Timer)):this.O5758&&(this.O5758=null)},O5999:function(a){a=ig.game.strings.replaceAll(a,"/to http://thingistan.com/","/to_area_not_sub_area ");a=ig.game.strings.replaceAll(a,"/to https://thingistan.com/","/to_area_not_sub_area ");a=ig.game.strings.replaceAll(a,"/to thingistan.com/",
"/to_area_not_sub_area ");return ig.game.strings.replaceAll(a,"/to /","/to_area_not_sub_area ")},toLowerCaseExceptUrls:function(a){return a.replace(/[^\s]+/g,function(b){return 0===b.indexOf("http")?b:b.toLowerCase()})},O5210:function(a){return!0===a||!1===a||"true"===a||"false"===a},O4630:function(a){var b=a.indexOf("http://");-1===b&&(b=a.indexOf("https://"));if(0<=b){for(var c="",d=!1,e=0;e<a.length;e++){var f=a.substr(e,1);e>=b&&(" "==f?d=!0:d||(":"==f?f="{{char2}}":"/"==f&&(f="{{char1}}")));
c+=f}a=c}return a},O5890:function(a){a=ig.game.strings.replaceAll(a,"{{char1}}","/");return ig.game.strings.replaceAll(a,"{{char2}}",":")},O4386:function(a){var b={};if(a&&(a=a.split("/"),4==a.length&&(b.seconds=parseFloat(a[0]),b.usesVisual="true"==a[1],b.usesAudio="true"==a[2],a=a[3].trim().split(","),1<=a.length)))for(var c=0;c<a.length;c++){var d=a[c].trim().split(" ");3==d.length&&(d={itemId:d[0],offsetX:parseInt(d[1]),offsetY:parseInt(d[2])},b.placements||(b.placements=[]),b.placements.push(d))}return b},
O2973:function(){return this.O7427(this.O8610)},O4145:function(a,b){if((b=this.O4386(b))&&b.placements&&1<=b.placements.length)for(var c=this.O4742-1,d=0;d<b.placements.length&&ml.Misc.O4952(this.O8610)<c;d++){var e=b.placements[d];"nothing"==e.itemId||ig.game.O4261.getItem(e.itemId,"interacting__trigger_places");var f={x:parseInt(parseInt(a.x)+parseInt(e.offsetX)),y:parseInt(parseInt(a.y)+parseInt(e.offsetY))},g=f.x+"_"+f.y;this.O8610[g]&&(this.O8610[g].removeInstantly=!0,this.O1785());if(!this.O8610[g]){this.O8610[g]=
{timer:new ml.Timer,O5642:b.seconds,itemId:e.itemId,usesVisual:b.usesVisual,usesAudio:b.usesAudio,originalMapPosDef:ig.game.O6112.O8617(f)};var h=ig.game.O6112.O8704({x:f.x,y:f.y});h&&ig.game.O6112.deleteThingAt(f.x,f.y,!0);"nothing"==e.itemId?(h?(b.usesAudio&&(!this.O8670||.5<=this.O8670.delta())&&(this.O8670=new ml.Timer,ig.game.sounds.shortWhoosh.play()),b.usesVisual&&(e=ig.game.O6112.O2132(f.x,f.y),ig.game.decorator.O7564(e))):delete this.O8610[g],(e=ig.game.backgroundMaps[1].O6193(f.x,f.y))&&
ig.game.O6112.O8252({tid:e.id,rotation:0,flip:0},f,!0,!0)):this.doPlace(ig.game.O4507(e),ig.game.O4507(b),ig.game.O4507(f))}}},doPlace:function(a,b,c){var d=this,e=ig.game.O4261.getItemBasic(a.itemId,"int_do_place");e.basicDataLoading.done(function(){if(-1===["INTERMOT","MOTION","MIFT"].indexOf(e.base)&&(ig.game.O6112.O8252({tid:a.itemId,rotation:0,flip:0},c,!0,!0),b.usesAudio&&(!d.O8670||.5<=d.O8670.delta())&&(d.O8670=new ml.Timer,e&&e.isLiquid()?ig.game.sounds.splash.play():ig.game.sounds.putdown.play()),
b.usesVisual)){var f=ig.game.O6112.O2132(c.x,c.y);ig.game.decorator.O4562(f)}})},O1785:function(){var a=!1,b;for(b in this.O8610){var c=this.O8610[b];if(c.timer&&c.timer.delta()>c.O5642||c.removeInstantly){var d=b.split("_");d={x:d[0],y:d[1]};ig.game.O6112.O8704({x:d.x,y:d.y})&&ig.game.O6112.deleteThingAt(d.x,d.y,!0);c.originalMapPosDef&&ig.game.O6112.O8252(c.originalMapPosDef,d,!0);c.usesVisual&&(d=ig.game.O6112.O2132(d.x,d.y),"nothing"==c.itemId?ig.game.decorator.O4562(d):ig.game.decorator.O7564(d));
!c.usesAudio&&!c.usesVisual||a||(ig.game.sounds.shortWhoosh.play(),a=!0);delete this.O8610[b]}}},O7427:function(a){var b=!1,c;for(c in a)if(a.hasOwnProperty(c)){b=!0;break}return b},insertLineBreaksIfTooLong:function(a){var b=-1===a.indexOf("://")&&-1===a.indexOf(" ");a&&a.length>this.O5679&&!b&&-1==a.indexOf("[")&&-1==a.indexOf(this.O1038)&&-1==a.indexOf("{")&&-1==a.indexOf("/")&&(b=ig.game.strings.O5024(a,this.O5679),1<b.length&&(a=b.join(this.O1038)));return a},O8533:function(a){for(var b=[[":)",
"\\:)"],[":(","\\:("],[":-)","\\:-)"],[":-(","\\:-("]],c=0;c<b.length;c++){var d=b[c];a=ig.game.strings.replaceAll(a,d[1],d[0]);a=ig.game.strings.replaceAll(a,d[0],d[1])}return a},O3945:function(a){for(var b=["say","marker","toMarker"],c=0;c<b.length;c++){var d=b[c];a[d]&&(a[d]=this.O8612(a[d],!0))}return a},O8612:function(a,b){for(var c=0;c<this.O2464.length;c++){var d=this.O2464[c],e="\\"+d,f="{{char"+c+"}}";b&&(e=f,f=d);a=ig.game.strings.replaceAll(a,e,f)}return a},O1170:function(a){var b=!1;a&&
(a=ig.game.strings.trim(a),b=1<=a.length&&"-"==a.substr(0,1));return b},O3054:function(a,b,c,d){var e=null;if(""!=a){a=ig.game.strings.trim(a);e={};if(0<=a.indexOf(">")){var f=a.split(">");2==f.length&&""!=ig.game.strings.trim(f[1])&&(e.toMarker=ig.game.strings.trim(f[1]),a=f[0]);a=ig.game.strings.trim(ig.game.strings.replaceAll(a,">",""));c?e.setContext="":e.autoContinue=!0}c=[];if(a=this.O8086(a,c))0<=a.indexOf("://")?e.say=ig.game.strings.O7686(a,5*this.O5679):0<=a.indexOf("[")?e.say=ig.game.strings.O7686(a,
1E3):e.say=ig.game.strings.O7686(a,this.O5679+20);for(a=0;a<c.length;a++)if(f=c[a]){var g=f.toLowerCase();-1===g.indexOf("embed")&&-1===g.indexOf("http")&&(f=g);if(!this.O3882(e,f,b)){if(0===f.indexOf("gives "))e.gives=f.substr(6);else if(0===f.indexOf("removes ")){if(g=this.O3176(f.substr(8)))e.removes=g}else 0===f.indexOf("harms ")?e.harms=this.O7121(f.substr(6)):0===f.indexOf("heals ")&&this.O7121(f.substr(6))==f.substr(6)?e.heals=this.O7121(f.substr(6)):0===f.indexOf("limits ")?this.O6231(e,f,
b):"they focus here"==f?e.theyFocusHere=!0:"they don't focus here"==f?e.theyFocusHere=!1:0===f.indexOf("relocations go to ")?e.relocationsGoTo=f.substr(18).toLowerCase().trim():0===f.indexOf("lock 15 minutes")?e.areaBanForNMinutes=15:0===f.indexOf("lock 1 day")?e.areaBanForNMinutes=1440:0===f.indexOf("is ")?(e.commands||(e.commands=[]),e.commands.push({is:f.substr(3)})):0===f.indexOf("_is ")?(e.privateCommands||(e.privateCommands=[]),e.privateCommands.push({is:f.substr(4)})):0===f.indexOf("isn't ")?
(e.commands||(e.commands=[]),e.commands.push({isnt:f.substr(6)})):0===f.indexOf("_isn't ")?(e.privateCommands||(e.privateCommands=[]),e.privateCommands.push({isnt:f.substr(7)})):0===f.indexOf("they are ")?(e.privateCommands||(e.privateCommands=[]),e.privateCommands.push({theyAre:f.substr(9)})):0===f.indexOf("they aren't ")?(e.privateCommands||(e.privateCommands=[]),e.privateCommands.push({theyArent:f.substr(12)})):0===f.indexOf("they auto-heal")?e.theyAutoHeal=!0:0===f.indexOf("they don't auto-heal")?
e.theyAutoHeal=!1:0===f.indexOf("they can drown")?e.theyCanDrown=!0:0===f.indexOf("they can't drown")?e.theyCanDrown=!1:0===f.indexOf("they can boost")?e.O7823=!0:0===f.indexOf("they can't boost")?e.O7823=!1:0===f.indexOf("they can use all boosts")?e.O4240=!0:0===f.indexOf("they can't use all boosts")?e.O4240=!1:0===f.indexOf("they can see name tags")?e.O6564=!0:0===f.indexOf("they can't see name tags")?e.O6564=!1:0===f.indexOf("they can paste")?e.O4334=!0:0===f.indexOf("they can't paste")?e.O4334=
!1:0===f.indexOf("they always see instrument note labels")?e.O3368=!0:0===f.indexOf("they don't always see instrument note labels")?e.O3368=!1:0===f.indexOf("they can open map")?e.O4401=!0:0===f.indexOf("they can't open map")?e.O4401=!1:0===f.indexOf("they can be affected by non-friends")?e.theyCanBeAffectedByNonFriends=!0:0===f.indexOf("they can't be affected by non-friends")?e.theyCanBeAffectedByNonFriends=!1:0===f.indexOf("they can be affected by friends")?e.O9677=!0:0===f.indexOf("they can't be affected by friends")?
e.O9677=!1:0===f.indexOf("they can map-transport")?e.theyCanMapTeleport=!0:0===f.indexOf("they can't map-transport")?e.theyCanMapTeleport=!1:0===f.indexOf("they can remove dynamic")?e.O6026=!0:0===f.indexOf("they can't remove dynamic")?e.O6026=!1:0===f.indexOf("they can remove holdable")?e.O4948=!0:0===f.indexOf("they can't remove holdable")?e.O4948=!1:0===f.indexOf("they can remove wearable")?e.O1720=!0:0===f.indexOf("they can't remove wearable")?e.O1720=!1:0===f.indexOf("they can remove mountable")?
e.O8689=!0:0===f.indexOf("they can't remove mountable")?e.O8689=!1:0===f.indexOf("they can remove brain")?e.O5178=!0:0===f.indexOf("they can't remove brain")?e.O5178=!1:0===f.indexOf("they can be affected by non-logged-ins")?e.theyCanBeAffectedByNonFullAccounts=!0:0===f.indexOf("they can't be affected by non-logged-ins")?e.theyCanBeAffectedByNonFullAccounts=!1:0===f.indexOf("they can be affected by brain-equippers")?e.theyCanBeAffectedByBrainEquippers=!0:0===f.indexOf("they can't be affected by brain-equippers")?
e.theyCanBeAffectedByBrainEquippers=!1:0===f.indexOf("they can use any item")?e.O9677=!0:0===f.indexOf("they can't use any item")&&(e.O9677=!1);if(0===f.indexOf("sets spawnpoint"))e.setSpawnPoint=!0;else if(0===f.indexOf("they auto-set-spawnpoints"))e.theyAutoSetSpawnpoints=!0;else if(0===f.indexOf("they don't auto-set-spawnpoints"))e.theyAutoSetSpawnpoints=!1;else if(0===f.indexOf("they possess ")){f=f.substr(13).split(" and ");g=[];for(var h=0;h<f.length;h++){var k=f[h],l=this.O8070(k,b);k!=l&&
g.push(l)}1<=g.length&&(e.privateCommands||(e.privateCommands=[]),e.privateCommands.push({addAreaPossession:g.join(",")}))}else if(0===f.indexOf("they don't possess *"))e.privateCommands||(e.privateCommands=[]),e.privateCommands.push({removeAllAreaPossessions:!0});else if(0===f.indexOf("they don't possess "))e.privateCommands||(e.privateCommands=[]),e.privateCommands.push({removeAreaPossession:f.substr(19)});else if(0===f.indexOf("hasn't "))e.hasnt=f.substr(7);else if("timer"==f)e.timer=!0;else if(0===
f.indexOf("embeds "))(f=this.O5890(f.substr(7)))&&(-1===f.indexOf("thingistan.com")||0<=f.indexOf("thingistan.com/info"))&&(-1===f.indexOf("://")&&(f="//"+f),e.embedUrl=String(f));else if("unembeds"==f)e.O8513=!0;else if(0===f.indexOf("bumps ")){if(f=this.O2585(f.substr(6)))e.bumps=f}else if(0===f.indexOf("font ")){if(g=f.substr(5))if(f=!1,g=g.toLowerCase().trim(),0<=g.indexOf("once")&&(g=ig.game.strings.replaceAll(g,"once",""),g=ig.game.strings.replaceAll(g,"  "," "),g=g.trim(),f=!0),g=this.O1862(g))e.font=
g,f&&(e.useFontOnce=!0)}else if(0===f.indexOf("places ")){if(f=f.substr(7),f=this.O4831(f,b))e.id=++d.n,e.places=f}else if(0===f.indexOf("rumbles "))f=f.substr(8),f=ig.game.strings.replaceAll(String(f).toLowerCase(),"s",""),f==parseInt(f)&&(f=parseInt(f),1<=f&&f<=this.O5342&&(e.rumblesSeconds=f));else if(0===f.indexOf("transports here"))e.transportToHere=!0;else if(0===f.indexOf("to_area_not_sub_area "))e.to=f.substr(21),e.toDoesExcludeSubAreas=!0;else if(0===f.indexOf("to "))e.to=f.substr(3);else if(0===
f.indexOf("transports ")){if(f=this.O9103(f.substr(11)))e.transports=f}else if(0===f.indexOf("throws ")){if(f=this.O6614(f.substr(7),b))e.throws=f}else if(0===f.indexOf("plays "))g=this.O8070(f,b,"plays"),f!=g&&(e.playsSoundId=g);else if(0===f.indexOf("waits ")){if(f=f.substr(6),(f=ig.game.strings.replaceAll(String(f).toLowerCase(),"s",""))&&parseFloat(f)==f||parseInt(f)==f)e.delaySeconds=parseFloat(ml.Misc.O9024(f,.25,60))}else 0===f.indexOf("shows ")?(0===f.indexOf("shows only-holder-page ")&&(g=
f.indexOf(" ",24),0<=g&&(g=f.substr(23,g-23),ml.Misc.O2249(g)&&1<=g&&(e.lockAtHolderPage=parseInt(g-1),f=ig.game.strings.replaceAll(f,"shows only-holder-page "+g+" ","shows ")))),g=this.O8070(f,b,"shows"),f!=g&&(e.showsId=g)):"stops"==f?e.stopMusic=!0:0===f.indexOf("they ")?(e.triggerMotionText=f.substr(5),g=this.O8070(f,b,"they"),f!=g&&(e.triggerMotionId=g)):this.O7052(f)&&(e.motion=f,g=this.O8070(f,b),f!=g&&(e.motionId=g),"clears countdown"==f?e.countdownClear=!0:0===f.indexOf("countdown +")?(f=
f.substr(11),f=String(f).trim(),ml.Misc.O2249(f)&&1<=f&&1E4>=f&&(e.countdownAdd=parseInt(f))):0===f.indexOf("countdown -")?(f=f.substr(11),f=String(f).trim(),ml.Misc.O2249(f)&&1<=f&&1E4>=f&&(e.countdownAdd=-parseInt(f))):0===f.indexOf("countdown ")&&(g=!0,0<=f.indexOf(" invisible")&&(g=!1,f=ig.game.strings.replaceAll(f," invisible","")),(f=f.substr(10))&&(f=ig.game.strings.replaceAll(f,"s","")),ml.Misc.O2249(f)&&1<=f&&1E6>=f&&(e.countdown=parseInt(f),e.countdownIsVisible=g)))}}}return e},O6231:function(a,
b,c){b=b.substr(7);var d=0<=b.indexOf("auto-disappear");b=ig.game.strings.replaceAll(b,"auto-disappears","");b=ig.game.strings.replaceAll(b,"auto-disappear","");b=b.trim();var e=b.split(" ");if(3<=e.length){b=e.pop();var f=e.pop();e=e.join(" ");var g=0<=e.indexOf("their ");e=ig.game.strings.replaceAll(e,"their ","");g&&(e=this.O8070(e,c));e&&f==parseInt(f)&&b==parseInt(b)&&(a.limits||(a.limits=[]),a.limits.push([String(e),parseInt(f),parseInt(b),!!d,!!g]))}},O1137:function(a,b,c,d,e){this.O3511[a]=
{min:b,max:c,O5246:d,O4470:e}},O6041:function(a,b){b=parseInt(b).limit(this.O6704,this.O7568);(a=this.O3511[a])&&(b=parseInt(b).limit(a.min,a.max));return b},O3882:function(a,b,c){var d=!1,e=["+","-","*","~","="];b=ig.game.strings.replaceAll(b,"[value their ","[value_their_");var f=0<=b.indexOf("their ");b=ig.game.strings.replaceAll(b,"their ","");b=ig.game.strings.replaceAll(b,"[value_their_","[value their ");var g=0<=b.indexOf("effects-free")||0<=b.indexOf("effect-free");g&&(b=ig.game.strings.replaceAll(b,
"effects-free",""),b=ig.game.strings.replaceAll(b,"effect-free",""),b=ig.game.strings.replaceAll(b,"  "," "),b=b.trim());var h=b.indexOf(" ");b.indexOf("] ")>=h&&(h=b.indexOf("] "));if(0<=h){var k=b.substr(0,h+1).trim();h=b=b.substr(h+1).trim();f&&(b=this.O8070(b,c));if(b!=h||!f)if(c=k.charAt(0),0<=e.indexOf(c)&&(e=k.substr(1),k=e==parseInt(e)&&parseInt(e)>=this.O6704&&parseInt(e)<=this.O7568,h=0===String(e).indexOf("[value ")||0===String(e).indexOf("[number ")||0===String(e).indexOf("[people]")||
0===String(e).indexOf("[age_in_seconds]")||0===String(e).indexOf("[age_in_days]")||"[heard]"==String(e),k||h))d=!0,k&&(e=parseInt(e)),a.changeNumber||(a.changeNumber=[]),"~"==c&&(c=":"),a.changeNumber.push([b,e,c,f,g])}return d},O3176:function(a){var b=null,c="wearable mountable holdable dynamic brain *".split(" ");a&&"string"===typeof a&&0<=c.indexOf(a)&&(b=a);return b},O7052:function(a){a=a.toLowerCase().substr(0,1);return 0<="abcdefghijklmnopqrstuvwxyz0123456789".indexOf(a)},O6614:function(a,b){var c=
null;if(a&&(a=a.split(","),1<=a.length)){c=[];for(var d=0;d<a.length;d++){var e=a[d]?a[d].trim():null;if((e&&=this.O1743(e,b))&&(c.push(e),10<=c.length))break}0==c.length&&(c=null)}return c},O1743:function(a,b){var c=null;if(a){var d=ig.game.O1257.O2828.x;a=ig.game.strings.replaceAll(a,"%","");a=a.split(" ");if(3<=a.length){var e=[a[0],a[1]],f=ml.Misc.O9452(a," ",2);a=this.O8070(f,b);a!=f&&2==e.length&&parseInt(e[0])==e[0]&&parseInt(e[1])==e[1]&&(c=parseInt(e[0]).limit(0,360),f=parseInt(e[1]).limit(0,
100),e=c/180*Math.PI,c=f/100*d*d,d=parseInt(Math.sqrt(c)*Math.cos(e)),e=parseInt(Math.sqrt(c)*Math.sin(e)),c=d+" "+e+" "+a)}}return c},O2585:function(a){var b=null;if(a){var c=0<=a.indexOf("absolute");c&&(a=ig.game.strings.replaceAll(a,"absolute",""),a=a.trim());var d=ig.game.O1257.O2828.x;a=ig.game.strings.replaceAll(a,"%","");a=a.split(" ");if(2==a.length&&parseInt(a[0])==a[0]&&parseInt(a[1])==a[1]){b=parseInt(a[0]).limit(0,360);var e=parseInt(a[1]).limit(0,100);a=b/180*Math.PI;e=e/100*d*d;d=270==
b||90==b?0:parseInt(Math.sqrt(e)*Math.cos(a));b=180==b||0==b?0:parseInt(Math.sqrt(e)*Math.sin(a));b=d+" "+b;c&&(b="absolute "+b)}}return b},O1862:function(a){var b=null;if(a){switch(a){case "blackwhite":a="blackWhite";break;case "whitesmall":a="whiteSmall";break;case "blacksmall":a="blackSmall"}void 0!==ig.game.availableFonts[a]&&(b=a)}return b},O9103:function(a){var b=null;if(a){var c=ig.game.O3985;a=ig.game.strings.replaceAll(a,"%","");a=a.split(" ");2==a.length&&parseInt(a[0])==a[0]&&parseInt(a[1])==
a[1]&&(b=parseInt(a[0]).limit(0,360),a=parseInt(a[1]).limit(0,100),b=b/180*Math.PI,a=a/100*c,c=parseInt(a*Math.cos(b)),b=parseInt(a*Math.sin(b)),b=c+" "+b)}return b},O8086:function(a,b){if(!(0<=a.indexOf("://")||-1==a.indexOf("/"))){var c=a.split("/");a=c[0];for(var d=1;d<c.length;d++)b.push(ig.game.strings.trim(c[d]))}a&&(a=this.O8612(a,!0),a=a.trim());return a},O5201:function(a){for(var b=!1,c=0;c<this.possibleInteractions.length;c++){var d=this.possibleInteractions[c];if(0===a.indexOf(d)||0<=a.indexOf(" "+
d)){b=!0;break}}return b},O7121:function(a){parseInt(a)!=a&&(a=0);return parseInt(a).limit(0,100)},O8070:function(a,b,c){if(b)for(var d=0;d<b.length;d++){var e=b[d];if(!c&&a==e[1]||c&&a==c+" "+e[1]){a=e[0];break}}return a},O4831:function(a,b){var c="";if(a){var d,e=-1===a.indexOf(this.O1470),f=-1===a.indexOf(this.O7988),g=null;a=ig.game.strings.replaceAll(a,this.O7988,"");a=ig.game.strings.replaceAll(a,this.O1470,"");a=a.trim();var h=a.indexOf(" ");if(1<=h){var k=a.substr(0,h).trim();k=ig.game.strings.replaceAll(k,
"s","");if((k==parseInt(k)||k==parseFloat(k))&&1<=k&&k<=this.O5342){a=a.substr(h).trim();h=a.split(",");for(a=0;a<h.length;a++){var l=h[a].trim().split(" ");2==l.length&&d&&l.unshift(d);if(3<=l.length&&(l=this.joinStringArrayIntoLimitedRightBound(l,3))&&3==l.length){var m=l[0].trim(),n=l[1];l=l[2];if("nothing"==m)parseInt(n)==n&&parseInt(l)==l&&20>=Math.abs(n)&&20>=Math.abs(l)&&(g||=[],d=m,g.push(m+" "+parseInt(n)+" "+parseInt(l)));else if(b&&1<=b.length)for(var p=0;p<b.length;p++){var q=b[p];if(m==
q[1]&&parseInt(n)==n&&parseInt(l)==l&&20>=Math.abs(n)&&20>=Math.abs(l)&&(g||=[],g.length<this.O4742)){d=m;g.push(q[0]+" "+parseInt(n)+" "+parseInt(l));break}}}}g&&1<=g.length&&(c=parseFloat(k)+"/"+(e?"true":"false")+"/"+(f?"true":"false")+"/"+g.join(","))}}}return c},joinStringArrayIntoLimitedRightBound:function(a,b){var c=[],d="";b=a.length-(b-1);for(var e=0;e<b;e++)d+=a[e]+" ";c.push(d.trim());for(e=b;e<a.length;e++)c.push(a[e]);return c},O3954:function(a,b,c,d,e,f,g){if(a&&"string"===typeof a&&
1<=a.length)for(var h=[{name:"number",paramsType:["integer","integer","integer"],requiredParamsMin:2},{name:"letter",paramsType:["character","character","integer"],requiredParamsMin:2},{name:"list",paramsType:["string","integer"]},{name:"states",paramsType:["integer"]},{name:"chance",paramsType:["percent"]},{name:"name",paramsType:[]},{name:"time",paramsType:[]},{name:"random",paramsType:["string"],paramsAreArray:!0},{name:"someone",paramsType:[]},{name:"heard",paramsType:[]},{name:"received",paramsType:[]},
{name:"timer",paramsType:[]},{name:"editor",paramsType:[]},{name:"account",paramsType:[]},{name:"lying",paramsType:[]},{name:"sitting",paramsType:[]},{name:"age_in_seconds",paramsType:[]},{name:"age_in_days",paramsType:[]},{name:"value",paramsType:["string"],paramsAreArray:!0},{name:"people",paramsType:[]},{name:"ads_count",paramsType:[]},{name:"main_area",paramsType:[]},{name:"area",paramsType:[]}],k=0;k<h.length;k++)for(var l=h[k],m=null;a!=m;)m=a,a=this.O6006(a,l.name,l.paramsType,l.requiredParamsMin,
!!l.paramsAreArray,b,c,d,e,f,g);return a},shuffle:function(a){for(var b,c,d=a.length;d;b=Math.floor(Math.random()*d),c=a[--d],a[d]=a[b],a[b]=c);return a},O6006:function(a,b,c,d,e,f,g,h,k,l,m){var n=a.toLowerCase().indexOf("["+b),p=-1;0<=n&&(p=a.indexOf("]",n+b.length));if(0<=n&&0<=p){n=a.substr(n+1,p-(n+1));n=ig.game.strings.trim(n);n=n.toLowerCase();var q=!0,t=n.split(" ");b=t[0];p=[];if(e)q=!1,2<=t.length&&(p=ml.Misc.O9452(t," ",1).split(","),q=1<=p.length);else{for(e=1;e<t.length;e++)p.push(t[e]);
c&&(q=(p.length==c.length||p.length==d)&&this.O9577(p,c))}if(q){c=null;switch(b){case "number":c=this.O4704(p[0],p[1],p[2]);break;case "letter":c=this.O6015(p[0],p[1],p[2]);break;case "random":c=this.O5160(p);break;case "name":c=this.O7534();break;case "area":c=ig.game.O1886(!1);break;case "main_area":c=ig.game.O1886(!0);break;case "someone":c=this.O2748();break;case "time":c=this.resolveFunction_getTime();break;case "list":c=this.O8757("has"==p[0]?f:g,p[1]);break;case "heard":c=l?l:"";break;case "received":c=
k?k:"";break;case "chance":c=this.O3374(ig.game.chance(p[0]));break;case "timer":c=this.resolveFunction_getTimer(m);break;case "editor":c=this.O3374(ig.game.isEditorHere);break;case "account":c=this.O3374(ig.game.isFullAccount);break;case "lying":c=this.O3374(ig.game.O1257&&ig.game.O1257.isLying);break;case "sitting":c=this.O3374(ig.game.O1257&&ig.game.O1257.isSitting);break;case "value":c=this.O6236(p[0],h);break;case "people":c=this.O7217();break;case "ads_count":c=ig.game.areaAdForDisplay&&ig.game.areaAdForDisplay.allCount?
ig.game.areaAdForDisplay.allCount:0;break;case "age_in_seconds":c=ig.game.O2004;break;case "age_in_days":c=ig.game.O9392}null!==c&&(a=ig.game.strings.O1655(a,"["+n+"]",c))}else console.warn("Wrong parameters passed to "+b)}return a},O7217:function(){var a=0;ig.game.O5119&&ig.game.O5119.player&&(a=ig.game.O5119.player.length);return a},O3374:function(a){return a?"true":"false"},O6236:function(a,b){var c=0;0==a.indexOf("their ")?ig.game.O3957&&(a=a.substr(6),c=ig.game.O3957.O5355(a)):void 0!==b[a]&&
(c=b[a]);return c},O7534:function(){return ig.game.O1257?ig.game.O1257.screenName:null},O4704:function(a,b,c){var d="";c||=1;c=c.limit(0,50);for(var e=1;e<=c;e++)d+=String(ig.game.O4293(a,b));return d},O6015:function(a,b,c){var d="";c||=1;c=c.limit(0,50);for(var e="abcdefghijklmnopqrstuvwxyz0123456789".split(""),f=1;f<=c;f++){for(var g=!1,h=[],k=0;k<e.length;k++){var l=e[k];l==a&&(g=!0);g&&h.push(l);if(l==b)break}d+=1<=h.length?h[ig.game.O4293(0,h.length-1)]:""}return d},O5160:function(a){var b=ig.game.O4293(0,
a.length-1);return ig.game.strings.trim(String(a[b]))},resolveFunction_getTimer:function(a){var b="0";a&&(b=ig.game.strings.O7037(parseInt(a),!0," "));return b},O2748:function(){var a=null;ig.game.O5119&&ig.game.O5119.player&&(a=ig.game.O4293(0,ig.game.O5119.player.length-1),a=(a=ig.game.O5119.player[a].screenName)?a:null);return a},resolveFunction_getTime:function(){var a=new Date;return ig.game.strings.pad(a.getUTCHours())+":"+ig.game.strings.pad(a.getUTCMinutes())+" mt"},O8757:function(a,b){if(a&&
0!=a.length){var c=this.shuffle(ig.game.O4507(a));a=[];for(var d=1;d<=b&&1<=c.length;d++)a.push(c.shift());if(2<=a.length){c=a[0];for(d=1;d<a.length-1;d++)c+=", "+a[d];a=c+(" and "+a[a.length-1])}else a=a[0]}else a="nothing";return a},O9577:function(a,b){for(var c=!0,d=0;d<a.length&&c;d++)switch(b[d]){case "integer":a[d]==parseInt(a[d])?a[d]=parseInt(a[d]):c=!1;break;case "percent":a[d]==parseInt(a[d])&&parseInt(a[d]).limit(0,100)==a[d]?a[d]=parseInt(a[d]):c=!1;break;case "character":a[d]==String(a[d])&&
1==a[d].length?a[d]=String(a[d]):c=!1;break;case "string":a[d]==String(a[d])?a[d]=String(a[d]):c=!1}return c},sortEntitiesByClosest:function(a,b){var c=0;ig.game.O1257&&(c=a.O2144(ig.game.O1257)<b.O2144(ig.game.O1257)?-1:1);return c},O4851:function(a,b,c,d){var e=!1;if(0<=this.possibleInteractions.indexOf(a)){var f=null;c&&c.attributes&&c.attributes.widerRange?f=this.O6548/2:"touches"==a&&(f=0);if(c=d?this.O3013(d):this.O2294(f))for(2<=c.length&&c.sort(ig.game.O2116.sortEntitiesByClosest),d=0;d<c.length&&
!(e=c[d].reactTo(a,b));d++);}return e},O7945:function(a,b,c,d,e){var f=0;if(0<=["hears","hears-notes","sees"].indexOf(b)&&(a=this.O5367(a,d,e)))for(e=0;e<a.length&&!(f++,a[e].O8981(b,c,d,f),f>this.O2781);e++);},O8280:function(){var a=this.O2294(),b=!1;if(a){2<=a.length&&a.sort(ig.game.O2116.sortEntitiesByClosest);for(var c=0;c<a.length&&!(b=ml.Misc.O7862(a[c],ig.game.O1257),b=a[c].O9974(b));c++);}return b},O4848:function(){return!!this.O2294()},O2294:function(a){var b=null,c=ig.game.O5119.betweenDefaultAndPlayer;
if(c){var d=this.O6548;void 0!==a&&null!=a&&(d=a);for(a=0;a<c.length;a++){var e=c[a],f=e.collides==ig.Entity.COLLIDES.FIXED?5:0;e instanceof EntityInteract&&!e._killed&&ml.Misc.O7862(e,ig.game.O1257,d+f)&&(b||=[],b.push(e))}}return b},O3013:function(a){var b=null,c=ig.game.O5119.betweenDefaultAndPlayer;if(c){a={pos:a,size:{x:1,y:1}};for(var d=0;d<c.length;d++){var e=c[d];e instanceof EntityInteract&&!e._killed&&e.touches(a)&&(b||=[],b.push(e))}}return b},O5367:function(a,b,c){var d=null,e=ig.game.O5119.betweenDefaultAndPlayer,
f=ig.game.O4517;f&&f.reactsTo&&1<=f.reactsTo.length&&0<=f.reactsTo.indexOf(b)&&(d||=[],d.push(ig.game.O4517));if(e){var g={pos:a,size:{x:29,y:29}};for(a=0;a<e.length;a++)f=e[a],f instanceof EntityInteract&&!f._killed&&f.id!=c&&f.reactsTo&&f.reactsTo instanceof Array&&0<=f.reactsTo.indexOf(b)&&f.O2144(g)<=this.O9543&&(d||=[],d.push(f))}if(ig.game.holderDialog&&ig.game.holderDialog.isOpen&&ig.game.holderDialog.items&&(e=ig.game.holderDialog.items[ig.game.holderDialog.O8753]))for(a=0;a<e.length;a++)(f=
e[a].entity)&&f instanceof EntityInteract&&!f._killed&&f.id!=c&&f.reactsTo&&f.reactsTo instanceof Array&&1<=f.reactsTo.length&&0<=f.reactsTo.indexOf(b)&&(d||=[],d.push(f));return d},O6493:function(a,b){b=null;var c=ig.game.O5119.betweenDefaultAndPlayer;if(c){a="someone_"+a.toLowerCase();var d={pos:ig.game.O4507(ig.game.O1257.pos),size:{x:29,y:29}},e=ig.game.O4517;e&&e.reactsTo&&1<=e.reactsTo.length&&0<=e.reactsTo.indexOf(a)&&(b||=[],b.push(ig.game.O4517));(e=ig.game.O7606.O5015)&&e.reactsTo&&1<=e.reactsTo.length&&
0<=e.reactsTo.indexOf(a)&&(b||=[],b.push(ig.game.O7606.O5015));for(var f=0;f<c.length;f++)e=c[f],e instanceof EntityInteract&&!e._killed&&e.reactsTo&&1<=e.reactsTo.length&&0<=e.reactsTo.indexOf(a)&&e.O2144(d)<=this.O9543&&(b||=[],b.push(e));if(ig.game.holderDialog&&ig.game.holderDialog.isOpen&&ig.game.holderDialog.items&&(c=ig.game.holderDialog.items[ig.game.holderDialog.O8753]))for(f=0;f<c.length;f++)(e=c[f].entity)&&e instanceof EntityInteract&&!e._killed&&e.reactsTo&&1<=e.reactsTo.length&&0<=e.reactsTo.indexOf(a)&&
(b||=[],b.push(e))}return b},O8583:function(a){var b=null,c=a.O9367?ig.game.O5119.ui:ig.game.O5119.O7367;if(c)for(var d=0;d<c.length;d++){var e=c[d];if(!e._killed&&e.O4459==a.O8711){b=e;break}}return b},O1148:function(a){a=ig.game.strings.replaceAll(a,"entered","enters");a=ig.game.strings.replaceAll(a,"touched","touches");a=ig.game.strings.replaceAll(a,"reached","reaches");return ig.game.strings.replaceAll(a,"views","viewed")},O5410:function(a,b,c,d,e,f,g,h,k,l,m,n){c=this.O3954(c,d,e,f,k,l,m);c=
this.O1148(c);k=!1;if(0<=c.indexOf("-and-"))for(c=c.split("-and-"),l=0;l<c.length&&(k=ig.game.strings.trim(c[l]),k=this.O8865(a,b,k,d,e,f,g,h,n),k);l++);else if(0<=c.indexOf("-or-"))for(c=c.split("-or-"),l=0;l<c.length&&!(k=ig.game.strings.trim(c[l]),k=this.O8865(a,b,k,d,e,f,g,h,n));l++);else k=this.O8865(a,b,c,d,e,f,g,h,n);return k},O8865:function(a,b,c,d,e,f,g,h,k){var l=!1,m=null,n="and";0<=c.indexOf(" and ")?(m=c.split(" and "),n="and"):0<=c.indexOf(" or ")?(m=c.split(" or "),n="or"):m=[c];c=
{thisType:""};for(var p=0;p<m.length;p++)if(""!=ig.game.strings.trim(String(m[p]))){var q=this.O3077(a,b,m[p],c,d,e,f,g,h,k);if("and"==n){if(l=q,!q){l=!1;break}}else if("or"==n){if(q){l=!0;break}}else{l=q;break}}return l},O3077:function(a,b,c,d,e,f,g,h,k,l){var m=!1;(c=ig.game.strings.trim(c))&&0===c.indexOf("not in")&&(c="not_in"+c.substr(6));if(!k||h instanceof Array&&0<=h.indexOf(k)){k&&(c=ig.game.strings.replaceAll(c,"@"+k+" ",""),c=ig.game.strings.replaceAll(c,'@"'+k+'" ',""),c=ig.game.strings.trim(c));
var n=c.indexOf(" ");-1===n&&-1===this.possibleInteractions.indexOf(c)&&(d.thisType&&(c=d.thisType+" "+c),n=c.indexOf(" "));k=c;h="";0<=n&&(h=c.substr(0,n),0<=this.O2595.indexOf(h)?(k=c.substr(0,n),h=c.substr(n+1)):(d.thisType&&(k=d.thisType),h=c));0<="hasn't isn't they_don't_embody they_don't_wear they_don't_hold they_aren't they_don't_possess they_don't_have_attached not_currently".split(" ").indexOf(k)?d.thisType="":d.thisType=k;0<=c.indexOf("==")||0<=c.indexOf("<")||0<=c.indexOf(">")||0<=c.indexOf("!=")?
m=this.O8828(c,g):"has"==k?m="*"==h||0<=e.indexOf(h):"hasn't"==k?m="*"==h?!e||0==e.length:-1==e.indexOf(h):"is"==k?m="*"==h||"true"==h||0<=f.indexOf(h):"isn't"==k?m="*"==h?!f||0==f.length:"false"==h||!this.O5210(h)&&-1===f.indexOf(h):"currently"==k||"not_currently"==k?(m="*"==h||"true"==h||l&&0<=l.indexOf(h)||"playing"==h&&ig.game.O7763&&ig.game.O7763.isPlaying,0<=k.indexOf("not_currently")&&(m=!m)):"in"==k||"not_in"==k?(m=this.O2235(ig.game.areaName,h),0<=k.indexOf("not_in")&&(m=!m)):"they_are"==
k||"they_aren't"==k?(m="*"==h||"true"==h||ig.game.O1257&&ig.game.O1257.allIs&&0<=ig.game.O1257.allIs.indexOf(h),0<=k.indexOf("aren't")&&(m=!m)):"they_move"==k?(a=["left","right","up","down"],ig.game.O1257&&0<=a.indexOf(h)?(a=ig.game.O1257.vel,m=0>a.x&&"left"==h||0<a.x&&"right"==h||0>a.y&&"up"==h||0<a.y&&"down"==h):m=!1):"they_embody"==k||"they_don't_embody"==k?((a=ig.game.O1257.attachments[ig.game.attachmentManager.slots.BODY])&&ig.game.attachmentManager.O3420(ig.game.O1257)&&(a=null),m=a&&("*"==
h||0<=a.name.toLowerCase().indexOf(h)),0<=k.indexOf("don't")&&(m=!m)):"they_mount"==k||"they_don't_mount"==k?(m=(a=ig.game.O1257.attachments[ig.game.attachmentManager.slots.MOUNTABLE])&&("*"==h||0<=a.name.toLowerCase().indexOf(h)),0<=k.indexOf("don't")&&(m=!m)):"they_wear"==k||"they_don't_wear"==k?(m=(a=ig.game.O1257.attachments[ig.game.attachmentManager.slots.WEARABLE])&&("*"==h||0<=a.name.toLowerCase().indexOf(h))&&"STACKWEAR"==a.base,0<=k.indexOf("don't")&&(m=!m)):"they_have_attached"==k||"they_don't_have_attached"==
k?(m=(a=ig.game.O1257.attachments[ig.game.attachmentManager.slots.WEARABLE])&&("*"==h||0<=a.name.toLowerCase().indexOf(h))&&"DYNATHING"==a.base,0<=k.indexOf("don't")&&(m=!m)):"they_have_equipped"==k||"they_don't_have_equipped"==k?(m=(a=ig.game.O1257.attachments[ig.game.attachmentManager.slots.BRAIN])&&("*"==h||0<=a.name.toLowerCase().indexOf(h)),0<=k.indexOf("don't")&&(m=!m)):"they_hold"==k||"they_don't_hold"==k?(m=(a=ig.game.O1257.attachments[ig.game.attachmentManager.slots.HOLDABLE])&&("*"==h||
0<=a.name.toLowerCase().indexOf(h)),0<=k.indexOf("don't")&&(m=!m)):"they_possess"==k||"they_don't_possess"==k?(m=ig.game.O3957&&ig.game.O3957.O5029(h),0<=k.indexOf("don't")&&(m=!m)):a==k&&(m=this.O2235(b,h))}return m},O8828:function(a,b){var c=!1;if(!ig.game.O3957)return!1;for(var d="== <= >= <> != = > <".split(" "),e=0;e<d.length;e++){var f=d[e];if(0<=a.indexOf(f)){d=a.split(f);if(2==d.length){for(e=0;e<d.length;e++)if(d[e]=String(d[e]).trim(),d[e]!=parseInt(d[e])&&(0==d[e].indexOf("their ")?(d[e]=
d[e].substr(6),d[e]=ig.game.O3957.O5355(d[e])):d[e]=void 0!==b[d[e]]?b[d[e]]:0),d[e]==parseInt(d[e]))d[e]=parseInt(d[e]);else return!1;switch(f){case "==":case "=":c=d[0]==d[1];break;case "<>":case "!=":c=d[0]!=d[1];break;case "<=":c=d[0]<=d[1];break;case ">=":c=d[0]>=d[1];break;case "<":c=d[0]<d[1];break;case ">":c=d[0]>d[1]}}else return!1;break}}return c},O5867:function(a){},O2235:function(a,b){if(null===a||void 0===a)a="";var c=""==b||"*"==b||"true"==b;c||(0===b.indexOf('"')?(b=this.O4935(b),a=
this.O4935(a),c=a==b):c=0<=a.indexOf(b));return c},O4935:function(a){if(a&&"string"===typeof a){var b="";a=a.toLowerCase();for(var c=0;c<a.length;c++){var d=a.substr(c,1);0<="abcdefghijklmnopqrstuvwxyz0123456789-_ ".indexOf(d)&&(b+=d)}a=b.trim()}return a},O9173:function(){if(!this.O1306){for(var a=new Date,b=localStorage.length-1;0<=b;b--){var c=localStorage.key(b);if(0===c.indexOf("interacting_")){var d=localStorage.getItem(c);d&&(d=JSON.parse(d),d.dateSaved?this.getDaysDifferenceBetween(new Date(d.dateSaved),
a)>this.O8182&&localStorage.removeItem(c):localStorage.removeItem(c))}}this.O1306=!0}},getDaysDifferenceBetween:function(a,b){a=Math.abs(b.getTime()-a.getTime());return Math.floor(a/864E5)},O2681:function(a){this.O9173();var b=this.O8126(a);if(b&&=localStorage.getItem(b))b=JSON.parse(b),b.allHas&&b.allHas instanceof Array&&(a.allHas=b.allHas),b.allIs&&b.allIs instanceof Array&&(a.allIs=b.allIs),b.allNumber&&(a.allNumber=b.allNumber),b.lastTimerDateInSec&&(a.lastTimerDateInSec=b.lastTimerDateInSec)},
O1079:function(a){var b=this.O8126(a);if(b){var c={};a.allIs&&1<=a.allIs.length&&(c.allIs=a.allIs);a.allHas&&1<=a.allHas.length&&(c.allHas=a.allHas);a.allNumber&&1<=ml.Misc.O4952(a.allNumber)&&(c.allNumber=a.allNumber);a.lastTimerDateInSec&&(c.lastTimerDateInSec=a.lastTimerDateInSec);c.allIs||c.allHas||c.allNumber||c.lastTimerDateInSec?(c.dateSaved=ig.game.strings.O7882(),ig.game.O5285.setItem(b,JSON.stringify(c))):localStorage.removeItem(b);this.O8691()}},deleteStoreDataOfEntity:function(a,b){(a=
this.O8126({thingTypeId:a.id,O5682:b}))&&(localStorage.removeItem(a),this.O8691())},O8126:function(a){var b=null;a.O5682&&(b="interacting_"+ig.game.O4873.O8027+"_"+ig.game.O4873.currentArea+"_"+a.O5682.x+"_"+a.O5682.y+"_"+a.thingTypeId);return b},O3308:function(a){a=ig.game.strings.replaceAll(a,"someone at countdown 0","someone finishes_countdown");a=ig.game.strings.replaceAll(a,"someone finishes countdown","someone finishes_countdown");a=ig.game.strings.replaceAll(a,"someone at countdown","someone at_countdown");
for(var b=0;b<this.someoneVerbs.length;b++){var c=this.someoneVerbs[b];if(0<=c.indexOf("_")){c="someone "+c+" ";var d=ig.game.strings.replaceAll(c,"_"," ");a=ig.game.strings.replaceAll(a,d,c)}}return a},O2994:function(a){var b;a&&=a.toLowerCase();a=this.O3308(a);for(var c=/@("[^"]+"|\S+)/g,d=[];b=c.exec(a);)d.push(b[1].replace(/"/g,""));for(b=0;b<this.someoneVerbs.length;b++){c=this.someoneVerbs[b];var e="someone "+c;-1==this.O9905.indexOf(c)&&(e+=" ");0<=a.indexOf(e)&&d.push("someone_"+c)}var f=
[];jQuery.each(d,function(g,h){-1===jQuery.inArray(h,f)&&f.push(h)});return f},O9228:function(a){var b=!1;if(a&&1<=a.length)for(var c=0;c<a.length;c++)if(0===String(a[c]).toLowerCase().indexOf("someone")){b=!0;break}return b},O7884:function(a,b,c){if(a&&a.O8088&&b&&(c||0<=this.O9905.indexOf(b))&&(a=this.O6493(b,c)))for(var d=0;d<a.length;d++)a[d].O2519(b,c)},O9550:function(a,b,c,d,e,f,g,h,k,l,m,n,p,q,t){if(b=this.O9695(b)){var r=ig.game.O1257&&ig.game.O1257.O9832("disablesInteracting");if(c){var w=
b.font;q&&void 0!==ig.game.availableFonts[q]&&b.setFont(q);this.O2586(c)?this.O4595(a,c):(q=0===c.indexOf("http://")||0===c.indexOf("https://")?c:null,b.O5003(),b.O4855.O4505(ig.game.O2116.O2076(c),q,!0,void 0,b.font),b.O430=new ml.Timer)}d&&b.O6347(d,a.O2970);if(e)for(c=0;c<e.length;c++)d=e[c],d.is&&b.O1227(d.is),d.isnt&&b.removeFromAllIs(d.isnt);f&&b.O7045(f);g&&b.O1661(g);h&&(b.allNumber=h);n&&n==parseInt(n)&&1<=n&&n<=this.O5342&&!r&&b.O4588(n);k&&(b.O5080&&b.O9639(a),b.O2371(k,l));m&&b.O2144(ig.game.O1257)<
ig.system.widthHalf&&ig.game.sounds.O9961(m);p&&!r&&b.O1302(a,p);b.O3343(a);t&&b.setFont(w)}},O4595:function(a,b){a&&(b=this.O3136(b),b=this.O2076(b),a.say(b))},O2076:function(a){if(a&&"string"===typeof a){for(var b=a.length,c="",d=!1,e=null,f=0;f<b;f++){var g=e;e=a.substr(f,1);"*"==e&&"*"==g?d=!d:d&&(e=e.toUpperCase());c+=e}a=ig.game.strings.replaceAll(c,"**","")}return a},O2586:function(a){return a&&"string"===typeof a&&3<=a.length&&"{"==a.substr(0,1)&&2<=a.indexOf("}")},O3136:function(a){var b=
null;this.O2586(a)&&(b=a.indexOf("}"),b=a.substr(1,b-1));return b},O7909:function(){return ig.game.areaGlobalInteractingId},O2064:function(){return ig.game.O7606.O5015?ig.game.O7606.O5015.id:null},O9695:function(a){var b=null;if(a){if(a==this.O7909())return ig.game.O4517;if(a==this.O2064())return ig.game.O7606.O5015;var c=ig.game.O5119.betweenDefaultAndPlayer;if(c)for(var d=0;d<c.length;d++){var e=c[d];if(e instanceof EntityInteract&&!e._killed&&e.O8711==a){b=e;break}}}return b},O8664:function(a,
b){var c=ig.game.O5119.default;if(c)for(var d=0;d<c.length;d++){var e=c[d];if(!e._killed&&e.O3452&&a.touches(e)){e.O7050=b;break}}},O8691:function(){ig.game.isEditorHere&&1<=jQuery("#interactingStatesWrapper").length&&this.showPlayerStates()},O2244:function(){var a=ig.game.O5119.betweenDefaultAndPlayer;if(a)for(var b=0;b<a.length;b++){var c=a[b];c instanceof EntityInteract&&!c._killed&&c.O8402()}},showPlayerStates:function(){if(ig.game.isEditorHere){this.O2244();ig.game.alertDialog.close();var a=
"<p>My states in "+ig.game.strings.O9955(ig.game.O9720)+"</p>";a+='<div class="interactingStatesSection"><strong>YOU</strong>: <span class="interactingStateTypeOf">THEY ARE</span><br/>';for(var b="",c=0;c<ig.game.O1257.allIs.length;c++){var d=ig.game.O1257.allIs[c],e="'"+ig.game.strings.O9955(d)+"'";b+='<div class="interactingState">';b+=ig.game.strings.O9955(d);b+='&nbsp; <span class="pseudolink" style="color: #a55; text-decoration: none" onclick="javascript:ig.game.O2116.O9098('+e+')">x</span>';
b+="</div>"}b||(a+='<div class="interactingStateEmpty">-</div>');a=a+b+'</div><div id="interactingStates"></div>';a='<div id="interactingStatesWrapper">'+a+"</div>";ig.game.alertDialog.open(a,!0,void 0,void 0,void 0,!0,void 0,!0);this.O2234()}},O9995:function(a,b,c){var d=localStorage.getItem(c);d&&(d=JSON.parse(d),"is"==a&&d.allIs?(a=d.allIs.indexOf(b),0<=a&&d.allIs.splice(a,1)):"has"==a&&d.allHas&&(a=d.allHas.indexOf(b),0<=a&&d.allHas.splice(a,1)),d.allIs&&1<=d.allIs.length||d.allHas&&1<=d.allHas.length?
(d.dateSaved=ig.game.strings.O7882(),ig.game.O5285.setItem(c,JSON.stringify(d))):localStorage.removeItem(c));if(a=ig.game.O5119.betweenDefaultAndPlayer)for(b=0;b<a.length;b++)if(d=a[b],d instanceof EntityInteract&&!d._killed&&this.O8126(d)==c){d.allHas=[];d.allIs=[];d.allNumber={};d.lastTimerDateInSec=null;this.O2681(d);break}ig.game.sounds.bin.play();this.showPlayerStates()},O2234:function(){for(var a=function(g,h,k){var l="";if(h&&0<h.length){l+='<span class="interactingStateTypeOf">'+g.toUpperCase()+
"</span><br/>";for(var m=0;m<h.length;m++){var n="'"+g+"','"+ig.game.strings.O9955(h[m])+"','"+ig.game.strings.O9955(k)+"'";l+='<div class="interactingState">';l+=ig.game.strings.O9955(h[m]);l+='&nbsp; <span class="pseudolink" style="color: #a55; text-decoration: none" onclick="javascript:ig.game.O2116.O9995('+n+')">x</span>';l+="</div>"}}return l},b=localStorage.length-1;0<=b;b--){var c=localStorage.key(b);if(0===c.indexOf("interacting_")){var d=c.split("_"),e=d[d.length-1];if(d[1]==ig.game.O4873.O8027&&
d[2]==ig.game.O4873.currentArea&&e){var f=ig.game.O4261.getItemBasic(e,"int_load_show");f.basicDataLoading.done(function(){if(f.name){var g='<div class="interactingStatesSection"><strong>'+ig.game.strings.O9955(f.name.toUpperCase())+"</strong>: ";var h=localStorage.getItem(c);if(h)try{h=JSON.parse(h);var k=a("is",h.allIs,c),l=a("has",h.allHas,c),m=[];k&&m.push(k);l&&m.push(l);g+=m.join("<br/>");h.allNumber&&(g+=JSON.stringify(h.allNumber))}catch(n){}jQuery("#interactingStates").append(g+"</div>")}})}}}},
O1867:function(a){a=ig.game.strings.replaceAll(a,"theyare ","");a=ig.game.strings.replaceAll(a,"!","");ig.game.O1257.O1227(a.trim().toLowerCase())},O5648:function(a){ig.game.sounds.bin.play();a=ig.game.strings.replaceAll(a,"theyarent ","");a=ig.game.strings.replaceAll(a,"!","");ig.game.O1257.removeFromAllIs(a.trim().toLowerCase())},O9098:function(a){ig.game.O1257.removeFromAllIs(a);ig.game.sounds.bin.play();ig.game.O2116.showPlayerStates()},O2792:function(a){var b=!1;if(a&&"string"===typeof a&&(a=
a.toLowerCase(),0<=a.indexOf("approaches ")||0<=a.indexOf("approaches:")||0<=a.indexOf("approached ")||0<=a.indexOf("approached:")||0<=a.indexOf("nears ")||0<=a.indexOf("nears:")||0<=a.indexOf("neared ")||0<=a.indexOf("neared:")||0<=a.indexOf("reaches ")||0<=a.indexOf("reaches:")||0<=a.indexOf("reached ")||0<=a.indexOf("reached:")||0<=a.indexOf("views ")||0<=a.indexOf("views:")||0<=a.indexOf("viewed ")||0<=a.indexOf("viewed:")||0<=a.indexOf("hits ")||0<=a.indexOf("hits:")))try{var c=this.O8047(a,
[]);if(c)for(var d=0;d<c.length;d++){var e=c[d];if(e.condition&&(0<=e.condition.toLowerCase().indexOf("approaches")||0<=e.condition.toLowerCase().indexOf("approached")||0<=e.condition.toLowerCase().indexOf("nears")||0<=e.condition.toLowerCase().indexOf("neared")||0<=e.condition.toLowerCase().indexOf("reaches")||0<=e.condition.toLowerCase().indexOf("reached")||0<=e.condition.toLowerCase().indexOf("views")||0<=e.condition.toLowerCase().indexOf("viewed")||0<=e.condition.toLowerCase().indexOf("hits"))){b=
!0;break}}}catch(f){console.log("Guarded against Interacting parse error.",a)}return b},O9295:function(a){var b=!1;if(a&&1<=a.length)for(var c=0;c<a.length;c++){var d=a[c];if(d.condition&&("enters"==d.condition||0<=d.condition.indexOf("enters ")||0<=d.condition.indexOf(" enters")||"entered"==d.condition||0<=d.condition.indexOf("entered ")||0<=d.condition.indexOf(" entered"))){b=!0;break}}return b},O9819:function(a){for(var b=0;b<this.O7613.length;b++){var c=this.O7613[b],d=c.substr(0,c.length-1);
a=ig.game.strings.replaceAll(a,"/"+d+" ","/"+c+" ")}return a},O4126:function(a,b){for(var c=!1,d=0;d<a.length&&!c;d++)c=0<=a[d][1].indexOf(b);return c},O3180:function(){var a=!1;ig.game.O4296&&(ig.game.O1257&&ig.game.O1257.O9090?ig.game.O1257.O1286&&(a=ig.game.O1257.O1286>=ig.game.O1257.O9090):a=!0);return a},O3977:function(a,b){window.consoleref.clear();var c=[];if(b)for(c=ig.game.O4507(b),b=0;b<c.length;b++)c[b][0]=c[b][1]+" [reference found]";if(c=this.O8047(a,c))for(a=-1,b=0;b<c.length;b++){var d=
c[b],e=d.context;delete d.interactionBased;delete d.context;var f=JSON.stringify(d);3<=f.length&&(f=f.substr(1,f.length-2));e&&(f="    "+f);(a&&a!=e||0<=f.indexOf('"setContext"'))&&window.consoleref.log("");window.consoleref.log(f);a=d.context}}})});ig.baked=!0;
ig.module("game.core.settings").defines(function(){window.Settings=ig.Class.extend({doPlaySound:!0,showMainUI:!0,fullscreen:!1,alwaysOnTop:!1,travelHolderId:null,shortcutWritableId:null,shortcutWearableId:null,panelColor:null,collectedTabItemId:null,createdTabItemId:null,searchTabItemId:null,hideInFriendsList:!1,onlyFriendsCanPingUs:!1,blockImagePastes:!1,blockVideoPastes:!1,keyboardCountry:null,disallowSandboxItemsByOthers:!1,hidePainterBack:!1,usePanelColorForOtherDialogs:!1,showBlockedPeopleSpeech:!1,
photosensitiveGuard:!1,guardToTeleports:!1,glueWearable:!1,glueHoldable:!1,glueMountable:!1,wearablePlusFollows:!1,"default":{},O4251:null,init:function(){this.default={doPlaySound:this.doPlaySound,showMainUI:this.showMainUI,fullscreen:this.fullscreen,alwaysOnTop:this.alwaysOnTop,travelHolderId:this.travelHolderId,shortcutWritableId:this.shortcutWritableId,shortcutWearableId:this.shortcutWearableId,panelColor:this.panelColor,collectedTabItemId:this.collectedTabItemId,createdTabItemId:this.createdTabItemId,
searchTabItemId:this.searchTabItemId,hideInFriendsList:this.hideInFriendsList,onlyFriendsCanPingUs:this.onlyFriendsCanPingUs,blockImagePastes:this.blockImagePastes,blockVideoPastes:this.blockVideoPastes,keyboardCountry:this.keyboardCountry,disallowSandboxItemsByOthers:this.disallowSandboxItemsByOthers,hidePainterBack:this.hidePainterBack,usePanelColorForOtherDialogs:this.usePanelColorForOtherDialogs,showBlockedPeopleSpeech:this.showBlockedPeopleSpeech,photosensitiveGuard:this.photosensitiveGuard,
guardToTeleports:this.guardToTeleports,glueWearable:this.glueWearable,glueHoldable:this.glueHoldable,glueMountable:this.glueMountable,wearablePlusFollows:this.wearablePlusFollows}},O3019:function(){if(this.O4251){for(var a in this.O4251)this.set(a,this.O4251[a],!0);this.alwaysOnTop&&this.fullscreen&&(this.alwaysOnTop=!1);this.O4251=null;this.O6473();this.panelColor&&ig.game.O8159.O9355(this.panelColor);this.fullscreen&&this.setToFullscreen();ig.game.O5058.setKeyboardCountry(this.keyboardCountry)}},
O6473:function(){ig.ua.steam||(this.alwaysOnTop=this.fullscreen=!1);ig.ua.mobile&&(this.showMainUI=!0);ig.game.camera.setOffset()},set:function(a,b,c,d){this.default.hasOwnProperty(a)?this[a]!=b&&(this[a]=b,this.O6473(),c?d&&d():this.save(a,d)):console.warn('Setting name "'+a+'" does not exist, ignored.')},clear:function(a){this.set(a,null)},save:function(a,b){this[a]==this.default[a]?ig.game.O9817.O9994(a,null).done(function(c){b&&b()}):ig.game.O9817.O9994(a,this[a]).done(function(c){b&&b()})},O4325:function(){ig.game.settings.set("collectedTabItemId",
null,!0);ig.game.settings.set("createdTabItemId",null,!0);ig.game.settings.set("searchTabItemId",null,!0);ig.game.O9817.O9994("collectedTabItemId",null).done(function(a){ig.game.O9817.O9994("createdTabItemId",null).done(function(b){ig.game.O9817.O9994("searchTabItemId",null).done(function(c){})})})},O9584:function(a){this.doPlaySound&&ig.game.sounds.shortWhoosh.play();this.set("doPlaySound",!this.doPlaySound);this.doPlaySound&&ig.game.sounds.success.play();a&&ig.game.O1257.say("sound is now "+(this.doPlaySound?
"on":"off"));this.doPlaySound||(ig.game.panelSet.musicPlayer.O3327&&ig.game.panelSet.musicPlayer.O3967(),ig.game.mediaDialog.O8112&&ig.game.mediaDialog.O3967())},O3865:function(){this.set("showMainUI",!this.showMainUI)},toggleAlwaysOnTop:function(){!this.alwaysOnTop&&this.fullscreen?(ig.game.settings.set("fullscreen",null,!0),ig.game.settings.set("alwaysOnTop",!0,!0),ig.game.O9817.O9994("fullscreen",ig.game.settings.fullscreen).done(function(a){ig.game.O9817.O9994("alwaysOnTop",ig.game.settings.alwaysOnTop).done(function(b){})})):
(this.set("alwaysOnTop",!this.alwaysOnTop),this.O1237())},O1237:function(){ig.game.steamManager.setWindowAlwaysOnTop(!!this.alwaysOnTop)},setToFullscreen:function(){ig.ua.steam&&!this.alwaysOnTop&&!ig.game.steamManager.isWindowFullScreen()&&(this.set("fullscreen",!0),ig.game.steamManager.setWindowFullScreen(!0),window.location.reload())},toggleFullscreen:function(){if(ig.ua.steam){var a=ig.game.steamManager.isWindowFullScreen();(a=!a)&&this.alwaysOnTop?(this.set("alwaysOnTop",!1,!0),ig.game.steamManager.setWindowAlwaysOnTop(!1),
ig.game.O9817.O9994("alwaysOnTop",!1).done(function(b){ig.game.settings.set("fullscreen",a);ig.game.steamManager.setWindowFullScreen(a);window.location.reload()})):(this.set("fullscreen",a),ig.game.steamManager.setWindowFullScreen(a),window.location.reload())}},openDialog:function(){ig.game.alertDialog.close();var a='<div style="text-align: left; margin-left: 12px; margin-right: 12px">'+this.O1275("playSounds","play sounds","ctrl+m","ig.game.settings.O9584()",this.doPlaySound);ig.game.isFullAccount&&
(a+=this.O1275("guardToTeleports",'To-teleports end with "!"',null,"ig.game.settings.toggleGuardToTeleports()",this.guardToTeleports));a+=this.createSectionHeader("Display");ig.game.isFullAccount&&(a+=this.O1275("showMainUI","show icons",null,"ig.game.settings.O3865()",this.showMainUI));if(ig.ua.steam&&!ig.ua.isSteamBigPictureMode){var b=ml.Misc.O7235();a+=this.O1275("fullscreen","fullscreen","f11","ig.game.settings.toggleFullscreen()",b);b||(a+=this.O1275("alwaysOnTop","always on top",null,"ig.game.settings.toggleAlwaysOnTop()",
this.alwaysOnTop))}ig.ua.mobile||ig.ua.isSteamBigPictureMode||(a+=this.O1275("extraZoom","extra zoom",null,"ig.game.settings.toggleExtraZoom()",localStorage.extraZoom==="true"));ig.game.isFullAccount&&(a+=this.O1275("hidePainterBack","Flat-colored create canvas",null,"ig.game.settings.toggleHidePainterBack()",this.hidePainterBack),this.panelColor&&(a+=this.O1275("usePanelColorForOtherDialogs","Use panel color for other dialogs",null,"ig.game.settings.O6988()",this.usePanelColorForOtherDialogs)));
a+=this.O1275("photosensitiveGuard","Guard against some flicker & visuals",null,"ig.game.settings.togglePhotosensitiveGuard()",this.photosensitiveGuard);ig.game.isFullAccount&&(a+=this.createSectionHeader("People"),a+=this.O1275("onlyFriendsCanPingUs","only get pings from friends",null,"ig.game.settings.toggleOnlyFriendsCanPingUs()",this.onlyFriendsCanPingUs),a+=this.O1275("hideInFriendsList","appear in friends lists",null,"ig.game.settings.toggleHideInFriendsList()",!this.hideInFriendsList),a+=this.O1275("showBlockedPeopleSpeech",
"Show blocked people's speech",null,"ig.game.settings.toggleShowBlockedPeopleSpeech()",this.showBlockedPeopleSpeech));a+=this.createSectionHeader("Media");ig.game.isFullAccount&&(a+=this.O1275("blockImagePastes","show pasted images",null,"ig.game.settings.O5092()",!this.blockImagePastes),a+=this.O1275("blockVideoPastes","show pasted videos",null,"ig.game.settings.O9303()",!this.blockVideoPastes));a+=this.O1275("disallowSandboxItemsByOthers","Run automations by others",null,"ig.game.settings.toggleDisallowSandboxItemsByOthers()",
!this.disallowSandboxItemsByOthers);a+=this.createKeyboardCountrySelector();ig.game.isFullAccount||(a+='<p style="opacity: .5">(There\'s more here when you <span class="pseudolink" onclick="ig.game.bottomMenu.O6979()">login</span>)</p>');ig.game.alertDialog.open({html:a+"</div>"})},createKeyboardCountrySelector:function(){var a=[null,"france","germany","italy","spain","uk","usa"],b=this.createSectionHeader("Keyboard");b+='<select id="keyboardCountry" style="font-family: \'Press Start 2P\', arial, helvetica, sans-serif; width: 100%; padding: 5px" onchange="ig.game.settings.setKeyboardCountry()">';
for(var c=0;c<a.length;c++){var d=a[c],e=(d?d:"default").toUpperCase();b+='<option value="'+(d?d:"")+'"'+(d===this.keyboardCountry?" selected":"")+">"+e+"</option>";d===null&&(b+='<option disabled="disabled"></option>')}return b+"</select>"},setKeyboardCountry:function(){var a=jQuery("#keyboardCountry").val();""==a&&(a=null);this.set("keyboardCountry",a);ig.game.O5058.setKeyboardCountry(a);ig.game.sounds.success.play();setTimeout(function(){ig.game.alertDialog.close()},250)},createSectionHeader:function(a){return'<div style="margin-top: 30px; margin-bottom: 5px; color: rgba(0,0,0,0.65); text-transform: uppercase;">'+
ig.game.strings.O9955(a)+"</div>"},toggleHideInFriendsList:function(){jQuery("#hideInFriendsListInfo").html("");var a=this;this.set("hideInFriendsList",!this.hideInFriendsList,void 0,function(){ig.game.sounds.success.play();ig.game.O8518.O8175(ig.game.O1257.O2970).done(function(b){b=b&&!b.unfindable;a.hideInFriendsList&&b?ig.game.O9817.O8211(a).done(function(){jQuery("#hideInFriendsListInfo").html("Findability has now also been disabled");ig.game.friendsDialog.unfindable=!0}):a.hideInFriendsList||
b||ig.game.O9817.O8211(a).done(function(){jQuery("#hideInFriendsListInfo").html("Findability has now also been enabled");ig.game.friendsDialog.unfindable=!1})})})},toggleExtraZoom:function(){localStorage.extraZoom==="true"?delete localStorage.extraZoom:localStorage.extraZoom="true";ig.game.O8894.fadeInShroud(function(){window.location.reload()})},toggleShowAds:function(){ig.game.hasMinfinity?(localStorage.closeAd=localStorage.closeAd==="true"?"false":"true",window.location.reload()):(ig.game.alertDialog.close(),
ig.game.O9663.O6169())},toggleOnlyFriendsCanPingUs:function(){this.set("onlyFriendsCanPingUs",!this.onlyFriendsCanPingUs)},O5092:function(){this.set("blockImagePastes",!this.blockImagePastes)},O9303:function(){this.set("blockVideoPastes",!this.blockVideoPastes)},toggleDisallowSandboxItemsByOthers:function(){this.set("disallowSandboxItemsByOthers",!this.disallowSandboxItemsByOthers,void 0,function(){window.location.reload()})},toggleHidePainterBack:function(){this.set("hidePainterBack",!this.hidePainterBack);
ig.game.painter.isRunning&&ig.game.painter.update()},O6988:function(){this.set("usePanelColorForOtherDialogs",!this.usePanelColorForOtherDialogs)},toggleShowBlockedPeopleSpeech:function(){this.set("showBlockedPeopleSpeech",!this.showBlockedPeopleSpeech)},togglePhotosensitiveGuard:function(){this.set("photosensitiveGuard",!this.photosensitiveGuard,void 0,function(){window.location.reload()})},toggleGuardToTeleports:function(){this.set("guardToTeleports",!this.guardToTeleports)},O3305:function(){this.set("wearablePlusFollows",
!this.wearablePlusFollows,void 0,function(){ig.game.sounds.success.play();setTimeout(function(){window.location.reload()},750)})},O7706:function(a){switch(a){case "wearable":this.set("glueWearable",!this.glueWearable);break;case "holdable":this.set("glueHoldable",!this.glueHoldable);break;case "mountable":this.set("glueMountable",!this.glueMountable);break;default:console.log("False O7706 parameter",a)}},getGlue:function(a){var b=!1;switch(a){case "wearable":case "w":(b=this.glueWearable)&&ig.game.O1257&&
!ig.game.O1257.attachments.w&&(b=!1);break;case "holdable":case "h":(b=this.glueHoldable)&&ig.game.O1257&&!ig.game.O1257.attachments.h&&(b=!1);break;case "mountable":case "m":(b=this.glueMountable)&&ig.game.O1257&&!ig.game.O1257.attachments.m&&(b=!1);break;default:console.log("Ignoring unknown getGlue parameter",a)}return b},O1275:function(a,b,c,d,e){var f="";c&&!ig.ua.mobile&&(f=' &nbsp; <span style="opacity: .5">'+ig.game.strings.O9955(c)+"</span></label>");c=ig.game.O1946+"media/checkbox/"+(e?
"on":"off")+"/"+Math.min(ig.system.scale,5)+".png";e="";this.O6029(a)&&(e=' <span style="text-decoration: underline; opacity: 0.5" onclick="event.stopPropagation();window.event.cancelBubble=true;ig.game.settings.showHelpEntry(\''+(ig.game.strings.O9955(a)+"')\">(?)</span> "));return'<p class="disableContentSelect" style="background-color: rgba(255,255,255,.5); border-radius: 8px; cursor: default" onclick="ig.game.settings.toggleCheckbox(\''+a+"');"+d+'"><img src="'+c+'" alt="" id="checkbox_'+a+'" /> '+
ig.game.strings.O9955(b)+f+e+'<span id="'+a+'Info" style="display: inline-block; opacity: .5; margin-left: 28px; font-size: 90%"></span></p>'},showHelpEntry:function(a){ig.game.alertDialog.close();ig.game.alertDialog.open(this.O6029(a),!0,function(){setTimeout(function(){ig.game.settings.openDialog()},10)},void 0,void 0,!0)},O6029:function(a){var b=null;switch(a){case "disallowSandboxItemsByOthers":b="<p>Automations are Iframe-sandboxed JavaScripts of the type Happening, Brain, Changer and Generator. They are powerful but safeguarded as we use a separate domain, and browser security that tries disabling their connections to outside websites (as long as the developer console isn't open).</p>";
break;case "photosensitiveGuard":b="<p>This setting disables many Dynamic Shapes and Imgur embeds.<br/>It unfortunately can't disable all flicker and similar.</p><p><em>A very small percentage of individuals may experience epileptic seizures when exposed to certain light patterns or flashing lights. Exposure to certain patterns or backgrounds on a computer screen, or while playing games, may induce an epileptic seizure in these individuals. Certain conditions may induce previously undetected epileptic symptoms even in persons who have no history of prior seizures or epilepsy.</p><p><em>If you, or anyone in your family, have an epileptic condition, consult your physician prior to using Thingistan. If you experience any of the following symptoms while playing a video or game &#8211; dizziness, altered vision, eye or muscle twitches, loss of awareness, disorientation, any involuntary movement, or convulsions &#8211; immediately discontinue use and consult your physician before resuming.</em></p>"}return b},
toggleCheckbox:function(a){var b=jQuery("#checkbox_"+a).attr("src");b=0<=b.indexOf("/off/")?ig.game.strings.replaceAll(b,"/off/","/on/"):ig.game.strings.replaceAll(b,"/on/","/off/");jQuery("#checkbox_"+a).attr("src",b);ig.game.sounds.click.play()},O8941:function(){var a=null;if(this.panelColor){switch(this.panelColor){case "red":var b=[236,58,58];break;case "green":b=[84,207,84];break;case "cyan":b=[53,198,198];break;case "blue":b=[79,108,255];break;case "purple":b=[126,51,255];break;case "black":b=
[54,54,54];break;case "yellow":b=[214,214,39];break;case "white":b=[255,255,255];break;case "orange":b=[233,154,21];break;case "pink":b=[237,65,148]}a=ml.Misc.O2350([204,204,204]);b=ml.Misc.O2350(b);b.saturation*=.3;b.value=a.value;b.value+=20;"black"==ig.game.settings.panelColor?b.value-=75:"white"==ig.game.settings.panelColor&&(b.value+=50);b.value=ml.Misc.O9024(b.value,0,255);a=ml.Misc.O6983(b)}return a}})});ig.baked=!0;
ig.module("game.core.linermanager").defines(function(){window.LinerManager=ig.Class.extend({collectIntervalSeconds:.05,O4052:.2,O9746:null,O5225:null,O6248:null,O1085:20,update:function(){var a=ig.game.O1257;if(!(!a||!a.O2868()||ig.game.O6921.O3007FromMap||ig.game.isDraggingTilePlacementBinable||ig.game.O2636()||ig.game.holderDialog&&ig.game.holderDialog.isOpen||ig.game.virtualJoystick&&ig.game.virtualJoystick.O4994())){var b=a.attachments.h.lines,c=a.attachments.h.attributes;if(ig.input.released("click"))this.O8651(a,
c)?2<=b.length&&!b[b.length-1].isBreak?b.push({isBreak:!0}):b=[]:ig.game.sounds.nocando.play();else if(ig.input.state("click")&&!ig.game.panelSet.O7518()&&!ig.game.O2636()&&this.O8651(a,c)&&(!this.O9746||this.O9746.delta()>=this.collectIntervalSeconds)){this.O9746=new ml.Timer;var d=ig.game.O4774.O2478();d=this.O2137(d,c);var e=1<=b.length&&!b[b.length-1].isBreak?b[b.length-1]:null;d.x=Math.round(d.x);d.y=Math.round(d.y);var f=ig.game.O6112.O2052(d);f=f?f.thing:null;e&&e.x==d.x&&e.y==d.y||!this.O9324(f,
a.attachments.h.linesData.atKeyword)||(this.O1432(a,d,b,c),b.push(ig.game.O4507(d)),d.x<a.pos.x?a.O2626():a.O1593(),e&&!e.isBreak)||(c=a.attachments.h.name,ig.game.O2116.O4851("line-touches",c,void 0,d),ig.game.O2116.O7884(ig.game.O1257,"uses",c))}if(!this.O5225||this.O5225.delta()>this.O4052)this.O5225=new ml.Timer,b=this.O1778(b),1<=b.length&&b.length<=this.O1085&&ig.game.O7836.O7868(b);ig.input.pressed("rightclick")&&(a.attachments.h.lines=[],ig.game.O7836.O4007())}},O8651:function(a,b){b=!1;var c=
a.attachments.h&&a.attachments.h.linesData?a.attachments.h.linesData.O6475:null;c=c&&ig.game.O2082.O5730(c.attribute);if(ig.game.O4482)switch(ig.game.O5549){case "ANY":b=1<=a.rank&&!c;break;case "CITIZENS":b=!c;break;case "INDIVIDUALS":b=!c||a.isEditorHere}else b=!c;return b},O6287:function(a){var b=!1;a&&(b=(a=a.atKeyword)&&5<=a.length&&"grass"!=a);return b},O1778:function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];d.isSent||(d.isBreak?b.push(";"):b.push(Math.round(d.x),Math.round(d.y)),d.isSent=
!0)}return b},O9839:function(a,b){if((a=ig.game.O7465(a))&&a.O2868()&&this.O6883(a,b)){var c=a.attachments.h.lines,d=a.attachments.h.attributes;if(this.O8651(a,d))for(var e=0;e<b.length;e++)if(";"==b[e])c.push({isBreak:!0});else if(e<b.length-1){var f={x:Math.floor(b[e]),y:Math.floor(b[e+1])};this.O1432(a,f,c,d);c.push(f);e++}}},O2163:function(a){(a=ig.game.O7465(a))&&a.O2868()&&(a.attachments.h.lines=[])},O6883:function(a,b){a=!0;if(b instanceof Array&&b.length<=this.O7596())for(var c=0;c<b.length;c++){if(";"!=
b[c]&&!ml.Misc.O1215(b[c])){a=!1;break}}else a=!1;return a},O7596:function(a,b){b=250;a&&(a.multiTrail&&(b=Math.floor(.5*b)),a.thicker?b=Math.floor(.2*b):a.veryThick?b=Math.floor(.15*b):a.coloredOutline?b=Math.floor(.15*b):a.floatingItem&&(b=Math.floor(.15*b)));return b},O2137:function(a,b){if(b.snapToGrid||b.snapToBigGrid){var c=b.snapToGrid?ig.game.O2953:ig.game.O9925;0!=a.x&&(a.x=Math.round(a.x/c)*c);0!=a.y&&(a.y=Math.round(a.y/c)*c)}if(b.drawsRandomly||b.drawsVeryRandomly)a=ig.game.decorator.O4918(a,
b.drawsRandomly?2:5);return a},O5896:function(a,b,c,d){if(1<=b.length){if(this.O6248){if(b.length>this.O7596(d,c)||this.O6248.delta()>=this.O6104(d))this.O6248=new ml.Timer,b[0].isBreak&&b.shift(),1<=b.length&&b.shift()}else this.O6248=new ml.Timer;if(c.O6475){var e=b[ig.game.O4293(0,b.length-1)];e&&!e.isBreak&&(c.O6475.pos={x:e.x-ig.game.O2953,y:e.y-ig.game.O2953},c.O6475.update())}d.pulsates&&this.O6101(c.pulse,30,100);d.shiftsColor&&this.O6101(c.hue,0,255);d.hoverX&&this.O6101(c.hoverX,-10,10);
d.hoverY&&this.O6101(c.hoverY,-10,10);this.O4418(b,c,d);this.O8750(b,d);this.O4372(b,c);this.O9519(a,b,d);this.O3479(a,b,d)}},O3479:function(a,b,c){var d=a.attachments.h.animSheet;if(c.floatingItem)if((c=this.O8938(b))&&d&&d.width){d={x:c.x,y:c.y};b[b.length-1].isBreak||(d.x=Math.floor(d.x),d.y=Math.floor(d.y));if(b=a.attachments.h.pos){var e=10>=Math.abs(d.x-b.x)&&10>=Math.abs(d.y-b.y);2>=Math.abs(d.x-b.x)&&2>=Math.abs(d.y-b.y)?b=d:(e=e?4:10,b.x+=(d.x-b.x)/e,b.y+=(d.y-b.y)/e)}else b=d;c.offset&&
(b.x+=c.offset.x,b.y+=c.offset.y);a.attachments.h.pos=b}else a.attachments.h.pos&&delete a.attachments.h.pos},O8938:function(a){var b=null;if(1<=a.length)for(var c=a.length-1;0<=c;c--)if(!a[c].isBreak){b=a[c];break}return b},O9519:function(a,b,c){a=a.attachments.h.animSheet;if(c.stamps&&a&&a.width)for(c=1;c<b.length;c++){var d=b[c];if(!d.isBreak&&!d.didHandleStamp){d.didHandleStamp=!0;var e=b[c-1];if(ig.game.chance(25)&&!e.didGetStamp){d.didGetStamp=!0;var f={O7942:2,O4405:100,O2329:2,fadingInc:.5,
vel:{x:-100,y:0},O6475:!1,animSheet:a};e.isBreak||(f.flipX=e.x<d.x);ig.game.O9759(EntitySpot,d.x-a.width/2,d.y-a.height/2,f)}}}},O5674:function(a,b){var c=ig.game.O4261.getItemBasic(b,"liner_inst_env");c.imagesBeingGenerated.done(function(){if(a&&a.attachments&&a.attachments.h&&a.attachments.h.linesData){var d={thingTypeId:c.id,attributes:c.attributes,animSheet:ig.game.entityManager.getAnimationForEntity(c,0,0),isByLiner:!0};ig.game.entityManager.O5746(c.O4927(),c,d,!0);var e=ig.game.O4507(a.pos);
a.attachments.h.linesData.O6475=new ig.global.EntityEnvironm(e.x,e.y,d)}})},O1432:function(a,b,c,d){var e=0==c.length;c=e||c[c.length-1].isBreak;for(var f=ig.game.O4293(0,7),g=1;g<=f;g++){var h=this.O5189(a.pos,b);h.x=Math.round(h.x);h.y=Math.round(h.y);this.O6448(h)}(e||ig.game.chance(c?50:5))&&ig.game.sounds[this.O2309(d)].play();c&&(a.O2885=new ml.Timer)},O6448:function(a){ig.game.O9759(EntitySpot,a.x,a.y,{O7942:2,O4405:60,O2329:.5,fadingInc:2,O6475:!1})},O2309:function(a){var b=null;a.brightSounds?
b="glimmer":a.darkSounds&&(b="humming");b?(a=ig.game.O4293(1,ig.game.sounds.environmentSounds[b]),b="environment_"+b+"_"+a):b=a.buzzSounds?"laser_carving_"+ig.game.O4293(1,2):a.humSounds?"footfalls_energy":"actionSoft";return b},O5189:function(a,b){var c=Math.random();return{x:(1-c)*a.x+c*b.x,y:(1-c)*a.y+c*b.y}},O6101:function(a,b,c){a.value+=a.vel*ig.game.targetFps*ig.system.tick;a.value<b?(a.vel=Math.abs(a.vel),a.value=b):a.value>c&&(a.vel=-a.vel,a.value=c)},O8750:function(a,b){var c=0;if(b.movesDown||
!b.doesntMove)c=b.movesVeryFast?-60*ig.system.tick:b.movesFaster?-18*ig.system.tick:-3*ig.system.tick,b.movesDown&&(c=Math.abs(c));for(var d=.0175*ig.game.areaAngleDriftVelocity.x,e=.0175*ig.game.areaAngleDriftVelocity.y,f=0;f<a.length;f++)if(!a[f].isBreak){var g=a[f],h=f<a.length-1&&!a[f+1].isBreak?a[f+1]:null;b.changesRandomly&&h&&(g.vel||(g.vel={x:ig.game.O4293(-2.25,2.25),y:ig.game.O4293(-2.25,2.25)},Math.abs(g.x-h.x)>=Math.abs(g.y-h.y)?g.vel.y+=g.y<h.y?-3:3:g.vel.x+=g.x<h.x?-3:3),g.x+=g.vel.x*
ig.system.tick,g.y+=g.vel.y*ig.system.tick,g.vel.x*=.99,g.vel.y*=.99);g.y+=c;b.movesUp?g.y-=c:b.movesDown&&(g.y+=c);ig.game.O9149&&(g.x+=.01*ig.game.O9149);g.x+=d;g.y+=e;a[f]=g}},O4372:function(a,b){for(var c=a.length-1;0<=c;c--){var d=a[c];if(!d.isBreak){var e=ig.game.O6112.O2052(d),f=e?e.thing:null;this.O9324(f,b.atKeyword)?e&&e.thing&&"PUSH"==f.base&&(e=this.O9866(e),d.x+=e.x,d.y+=e.y):(this.O6448(d),1<=c&&a[c-1].isBreak||c<a.length-2&&a[c+1].isBreak?a.splice(c,1):a[c]={isBreak:!0})}}},O4418:function(a,
b,c){if(c.hoverX||c.hoverY)for(var d=0;d<a.length;d++)a[d].isBreak||(a[d].offset={x:0,y:0},c.hoverX&&(a[d].offset.x=2*Math.sin(b.hoverX.value)),c.hoverY&&(a[d].offset.y=2*Math.sin(b.hoverY.value)))},O9866:function(a){var b={x:0,y:0};if(a.thing.O5244()&&0<=a.rotation&&3>=a.rotation){b=.5;var c=1.2;a.thing.attributes&&a.thing.attributes.soft&&(b*=.1,c*=.4);b=[{x:0,y:-c},{x:b,y:0},{x:0,y:c},{x:-b,y:0}][a.rotation]}return b},O9324:function(a,b){var c=!0;a&&"SOLID"==a.base?c=!1:b&&(c=a&&0<=a.name.indexOf(b));
return c},O1141:function(a,b,c,d,e,f){e=ig.game.O4507(e);f=ig.game.O4507(f);d.shiftsColor&&(e=ml.Misc.O6983({hue:c.hue.value,saturation:1,value:255}),f=ml.Misc.O6983({hue:c.hue.value,saturation:1,value:255}));var g=c.O6719,h=d.shiftsColor||200<=g.value&&!d.coloredOutline,k=10>g.hue&&!d.shiftsColor&&!d.coloredOutline?.2:.4;5>=g.value&&!d.shiftsColor&&!d.coloredOutline&&(k=.3);h&&ml.Misc.O5847("lighter");var l=d.noOuterLine?1:0;g=d.noInnerLine?0:1;d.noOuterLine&&(k*=2);d.thicker?k*=.6:d.veryThick&&
(k*=.4);d.pulsates&&(k*=.01*c.pulse.value);d.lineMoreTransparent?k*=.6:d.lineVeryTransparent&&(k*=.3);d.coloredOutline&&(k*=.75);for(c=l;c<=g;c++){ig.system.context.beginPath();var m=0==c?3:1;d.thicker?m*=2:d.veryThick&&(m*=3);var n=0==c?.5*k:1*k;ig.system.context.lineWidth=m*ig.system.scale;ig.system.context.strokeStyle=0==c&&d.coloredOutline?"rgba("+f.join(",")+","+n+")":"rgba("+e.join(",")+","+n+")";ig.system.context.lineCap="round";l=null;for(var p=0;p<b.length;p++)if(b[p].isBreak)ig.system.context.stroke(),
ig.system.context.beginPath(),l=null;else{var q=b[p].x,t=b[p].y;b[p].offset&&(q+=b[p].offset.x,t+=b[p].offset.y);l?ig.system.context.lineTo(this.O722(q),this.O2321(t)):ig.system.context.moveTo(this.O722(q),this.O2321(t));l={x:q,y:t}}1<=b.length&&!b[b.length-1].isBreak&&ig.system.context.stroke()}ig.system.context.closePath();this.O4159(a,b,d,e,m,n);this.O2369(b,d,e);h&&ml.Misc.O3715()},O2369:function(a,b,c){b.causesSparks&&1<=a.length&&(a=a[a.length-1],!a.isBreak&&ig.game.chance(10)&&(b={x:ig.game.O4293(-50,
50),y:ig.game.O4293(-50,-100)},c={O4405:100,O2329:1,fadingInc:3,attribute:"lineSparks",O6475:!1,decorative:!1,O2027:.5,rectangle:{width:2,height:2,rgb:c.join(",")},vel:b},ig.game.O9759(EntitySpot,a.x,a.y,c)))},O4159:function(a,b,c,d,e,f){if((c.trail||c.multiTrail||c.doubleTrail)&&a.attachments.h&&a.attachments.h.animSheet&&a.attachments.h.animSheet.width&&2<=b.length){var g=c.multiTrail?.3:.5;ig.system.context.strokeStyle="rgba("+d.join(",")+","+f*g+")";ig.system.context.lineWidth=2*e*ig.system.scale;
d=a.O4257();a={x:a.pos.x+d.x+a.O2047.x+a.attachments.h.animSheet.width/2,y:a.pos.y+d.y+a.O2047.y};if(c.trail)c=b[b.length-1],c.isBreak||this.O6706(a,c);else if(c.doubleTrail){d=[null,null];for(e=0;e<b.length;e++)if(c=b[e],!c.isBreak){if(null==d[0]||c.x<d[0].x)d[0]=c;if(null==d[1]||c.x>d[1].x)d[1]=c}for(e=0;e<d.length;e++)c=d[e],this.O6706(a,c)}else if(c.multiTrail)for(e=0;e<b.length;e++)c=b[e],c.isBreak||(c.didHandleStroke||(c.didHandleStroke=!0,c.doDrawStroke=ig.game.chance(50)),(c.doDrawStroke||
0==e||e==b.length-1)&&this.O6706(a,c))}},O6706:function(a,b){a&&b&&void 0!==a.x&void 0!==b.x&&(ig.system.context.beginPath(),ig.system.context.moveTo(this.O722(a.x),this.O2321(a.y)),ig.system.context.lineTo(this.O722(b.x),this.O2321(b.y)),ig.system.context.stroke(),ig.system.context.closePath())},O6104:function(a){var b=.5;a.remainsBrief?b=.2:a.remainsVeryBrief&&(b=.075);return b},O722:function(a){return(a-ig.game._rscreen.x)*ig.system.scale},O2321:function(a){return(a-ig.game._rscreen.y)*ig.system.scale}})});
ig.baked=!0;
ig.module("game.core.movermanager").defines(function(){window.MoverManager=ig.Class.extend({textMaxLength:500,O5360:228,commands:{left:1,right:2,up:3,down:4,action:5,O2626:6,O1593:7,roll:8,O2816:9,O4716:10,O1584:11,O4798:12,O7559:13,O7332:14,O6045:15,pause:16},nonPackedCommands:{debugInfo:17},commandChars:{left:"<",right:">",up:"^",down:"v",action:"!",pause:".",O2626:"{",O1593:"}",roll:"`",O2816:":",O4716:"-",O1584:"+",O4798:"#",O7559:"_",O7332:"=",O6045:";"},O682:[["_","unattach holdable"],["#",
"attach holdable"],[";","unattach wearable"],["=","attach wearable"],["+","normal steps"],["-","small steps"],[":","face normal"],["}","face right"],["{","face left"],["`","roll"]],O7520:[["~",".........."],["[","<<<<<<<<<<"],["]",">>>>>>>>>>"],["?","....."],["$","<<<<<"],["@",">>>>>"]],O8842:[],O8641:[],O1546:15,speedFactorDefault:3,O8189:9,O6685:100,init:function(){for(var a in this.nonPackedCommands)this.commands[a]=this.nonPackedCommands[a];for(var b=1;b<=this.O8189;b++)a="interactingMessage"+
b,this.commands[a]=this.O6685+b,this.commandChars[a]=String(b),this.O8641.push(this.commands[a]);this.O682=this.O682.concat(this.O7520);this.O8842=[this.commands.left,this.commands.right,this.commands.up,this.commands.down]},O5733:function(a){a.mover.index=-1;a.mover.speedFactor=this.O9681(a);a.mover.commands=this.O8712(a.mover.thing.text);a.mover.health=100;a.mover.attachedHoldable=!0;a.mover.attachedWearable=!0;a.mover.holdable=null;a.mover.wearable=null;a.mover.flipOverride=null;a.mover.stepSize=
ig.game.O9925;a.mover.holdableActionTimer=null;a.mover.touchTimer=null;a.mover.lastMessageTimer=null;a.mover.soundCount=0;a.mover.idPrevious=a.mover.thing.id},O9070:function(a){this.O7755(a);if(!(0>=a.mover.health)){var b=0;a.mover.thing.attributes&&a.mover.thing.attributes.diverseTiming&&a.O5682&&void 0!==a.O5682.x&&(b=3*a.O5682.x+3*a.O5682.y);var c=((ig.game.O4086.milliseconds-1439414E6)/1E3*a.mover.speedFactor+b)%a.mover.commands.length;b=Math.floor(c);c-=b;a.O6837();var d=a.mover.attachedHoldable,
e=a.mover.attachedWearable;a.moveOffset=this.O3116(a);a.mover.attachedHoldable=!0;a.mover.attachedWearable=!0;a.mover.flipOverride=null;a.mover.stepSize=ig.game.O9925;a.mover.angle=0;for(var f=-1,g=0;g<=b;g++){var h=a.mover.commands[g];"number"===typeof h&&(h=[h]);for(var k=0;k<h.length;k++){var l=h[k],m=a.mover.stepSize;g==b&&(m*=c);switch(l){case this.commands.left:a.moveOffset.x-=m;f=-1;break;case this.commands.right:a.moveOffset.x+=m;f=1;break;case this.commands.up:a.moveOffset.y-=m;break;case this.commands.down:a.moveOffset.y+=
m;break;case this.commands.O2626:a.mover.flipOverride=!1;f=-1;break;case this.commands.O1593:a.mover.flipOverride=!0;f=1;break;case this.commands.O2816:a.mover.flipOverride=null;break;case this.commands.O4716:a.mover.stepSize=ig.game.O2953;break;case this.commands.O1584:a.mover.stepSize=ig.game.O9925;break;case this.commands.O4798:a.mover.attachedHoldable=!0;break;case this.commands.O7559:a.mover.attachedHoldable=!1;break;case this.commands.O7332:a.mover.attachedWearable=!0;break;case this.commands.O6045:a.mover.attachedWearable=
!1;break;case this.commands.roll:g==b&&(a.mover.angle=2*Math.PI*c,a.mover.angle*=f)}}a.moveOffset.x=ml.Misc.O9024(a.moveOffset.x,-this.O5360,this.O5360);a.moveOffset.y=ml.Misc.O9024(a.moveOffset.y,-this.O5360,this.O5360)}if(h=a.mover.commands[b]){"number"===typeof h&&(h=[h]);a.mover.currentCommands=h;if(b!=a.mover.indexPrevious){0<=h.indexOf(this.commands.debugInfo)&&window.consoleref.log(("mover debug "+b).toUpperCase());d===a.mover.attachedHoldable&&e===a.mover.attachedWearable||ig.game.decorator.O9433(a);
(0<=h.indexOf(this.commands.left)||0<=h.indexOf(this.commands.right))&&a.O6655();if(0<=h.indexOf(this.commands.action)&&a.mover.attachedHoldable&&(!a.mover.holdableActionTimer||.25<=a.mover.holdableActionTimer.delta())&&a.mover.holdable){a.mover.holdableActionTimer=new ml.Timer;if(5>=a.mover.soundCount||ig.game.chance(20))ig.game.sounds.O9396(ig.game.sounds.shortWhoosh,a,4>=a.mover.soundCount?1:.5),a.mover.soundCount++;a.mover.holdable.attributes&&(!ig.game.O2082.O2732(a.mover.holdable.attributes)||
this.O2423(a))&&ig.game.O1257.O6336(a,!0,a.mover.holdable)}if(!ig.game.O4296)for(k=0;k<h.length;k++)if(0<=this.O8641.indexOf(h[k])){d=h[k]-this.O6685;(e=ml.Misc.O2368(a))&&e.O8088&&(!a.mover.lastMessageTimer||.5<=a.mover.lastMessageTimer.delta())&&(a.mover.lastMessageTimer=new ml.Timer,ig.game.O2116.O7945(a.pos,"sees",String(d),a.givenName,a.id));break}a.mover.indexPrevious=b}this.O7895(a,h[0],c,b)}}},O8712:function(a){a=this.O9864(a);var b=[];if(a&&"string"===typeof a)for(var c=[],d=!1,e="",f=0;f<
a.length;f++){var g=a.charAt(f);if("("==g)d=!0,c=[];else if(")"==g)d=!1,b.push(c);else{var h=this.O2333(g);if(h)e&&(e=ig.game.strings.O4355(e),this.nonPackedCommands[e]&&b.push(this.commands[e]),e=""),d?c.push(h):b.push(h);else if(h=g.charCodeAt(0),h=97<=h&&122>=h," "==g||h)e+=g}}e&&(e=ig.game.strings.O4355(e),this.nonPackedCommands[e]&&b.push(this.commands[e]));return b},O2333:function(a){var b=0,c;for(c in this.commands)if(this.commandChars[c]===a){b=this.commands[c];break}return b},O3116:function(a){var b=
{x:0,y:0};a.animSheet&&a.animSheet.image&&(a=a.animSheet.image.width/9,b.x+=ig.game.O9925-a,a>ig.game.O9925&&(b.x+=2));return b},O7895:function(a,b,c,d){a.O8393&&0<=this.O8842.indexOf(b)&&(3>=a.mover.speedFactor&&0<=c&&.5>=c||3<a.mover.speedFactor&&0==d%2?b==this.commands.up||b==this.commands.down?(a.O8393=a.anims.climbing,a.O8393.flip.x=!1):a.O8393=a.anims.run:b==this.commands.up||b==this.commands.down?(a.O8393=a.anims.climbing,a.O8393.flip.x=!0):a.O8393=a.anims.main);if(null!==a.mover.flipOverride)a.O8393&&
(a.O8393.flip.x=a.mover.flipOverride);else switch(b){case this.commands.left:a.O8393&&(a.O8393.flip.x=!1);break;case this.commands.right:a.O8393&&(a.O8393.flip.x=!0)}},O7755:function(a){if(a.mover.lastDiedTimer)a.mover.lastDiedTimer.delta()>this.O1546&&(a.mover.health=100,a.mover.lastDiedTimer=null,a.O8770(),ig.game.sounds.O9396(ig.game.sounds.whoosh,a,.75));else if(0==a.mover.health){a.O8770();a.mover.lastDiedTimer=new ml.Timer;var b={O8766:a};b.O8985={x:100*(ig.game.chance(50)?-1:1),y:-400};ig.game.O9759(EntityGhost,
a.pos.x,a.pos.y,b);ig.game.sounds.O9396(ig.game.sounds.die,a,.75)}!a.mover.lastDiedTimer&&100>a.mover.health&&(a.mover.health+=2*ig.system.tick,100<a.mover.health&&(a.mover.health=100))},O5374:function(a){a=a.toLowerCase();for(var b=0;b<this.O682.length;b++)a=ig.game.strings.replaceAll(a,this.O682[b][1],this.O682[b][0]);return a},O9047:function(a){a=a.toLowerCase();for(var b=0;b<this.O682.length;b++)a=ig.game.strings.replaceAll(a,this.O682[b][0],this.O682[b][1]);return a.toUpperCase()},O9681:function(a){var b=
this.speedFactorDefault;a.mover.thing.attributes&&(a.mover.thing.attributes.verySlow&&(b=1),a.mover.thing.attributes.slow?b=2:a.mover.thing.attributes.fast?b=5:a.mover.thing.attributes.veryFast?b=7:a.mover.thing.attributes.fastest&&(b=8));return b},O1664:function(a,b,c){a.mover.attachedHoldable&&(b=a.mover.holdable,b.O8393&&b.animSheet.image&&b.animSheet.image.width&&a.O8393&&a.O8393!=a.anims.climbing&&(a.mover.holdableActionTimer&&.125>=a.mover.holdableActionTimer.delta()?a.O8393.flip.x?(b.O8393.pivot.x=
0,b.O8393.pivot.y=b.animSheet.image.height,b.O8393.angle=a.O8393.angle+7*a.mover.holdableActionTimer.delta()):(b.O8393.pivot.x=b.animSheet.image.width,b.O8393.pivot.y=b.animSheet.image.height,b.O8393.angle=a.O8393.angle-7*a.mover.holdableActionTimer.delta()):(b.O8393.pivot.x=b.animSheet.image.width/2,b.O8393.pivot.y=b.animSheet.image.height/2,b.O8393.angle=a.O8393.angle),b.O8393.flip.x=a.O8393.flip.x,b.O8393.draw(a.pos.x-a.offset.x-ig.game._rscreen.x+5,a.pos.y-a.offset.y-ig.game._rscreen.y+5)))},
O1370:function(a,b,c){a.mover.attachedWearable&&(b=a.mover.wearable,b.O8393&&b.animSheet.image&&b.animSheet.image.width&&a.O8393&&(a.O8393==a.anims.climbing||a.O8393==a.anims.climbingidle?(b.O8393=b.anims.back,b.O8393.flip.x=!1):(b.O8393=b.anims.normal,b.O8393.flip.x=b.attributes&&b.attributes.nonFlipping?!1:a.O8393.flip.x),c=ig.game.attachmentManager.O8626(a,b),b.O8393.draw(a.pos.x-a.offset.x-ig.game._rscreen.x+c.x,a.pos.y-a.offset.y-ig.game._rscreen.y+c.y)))},O9864:function(a){a=ig.game.strings.replaceAll(a,
"  "," ");a=ig.game.strings.replaceAll(a,"\r\n","");a=ig.game.strings.replaceAll(a,"\r","");a=ig.game.strings.replaceAll(a,"\n","");a=a.toLowerCase();for(var b=0;b<this.O7520.length;b++)a=ig.game.strings.replaceAll(a,this.O7520[b][0],this.O7520[b][1]);return a},O1992:function(a,b,c){if("y"==c){var d=ig.game.O2082.O2732(a.mover.attributes);c=a.mover.speedFactor/this.speedFactorDefault*57*ig.system.tick;b.pos.y<=a.pos.y-8?(b.vel.y=0,-400>b.vel.y&&(b.vel.y=-400),a.mover.currentCommands&&(0<=a.mover.currentCommands.indexOf(this.commands.left)?
b.pos.x-=c:0<=a.mover.currentCommands.indexOf(this.commands.right)&&(b.pos.x+=c)),b.isOnSolidMoverBody=!0):b.pos.x<a.pos.x?d||0<b.vel.x?(b.vel.x-=200,-400>b.vel.x&&(b.vel.x=-400)):b.pos.x-=c:b.pos.x>a.pos.x&&(d||0>b.vel.x?(b.vel.x+=200,400<b.vel.x&&(b.vel.x=400)):b.pos.x+=c);if(b.O8088){if(a.mover.thing.attributes){var e=!1;a.mover.thing.attributes.harmful?this.O2423(a)&&(!a.mover.touchTimer||.25<=a.mover.touchTimer.delta())&&(e=!0,a.mover.touchTimer=new ml.Timer,b.O3914(12.5,a,!0)):a.mover.thing.attributes.deadly&&
this.O2423(a)&&(b.O3914(100,a,!0),ig.game.O2116.O7884(ig.game.O1257,"touches",a.givenName),e=!0)}ig.game.O4296||e||a.mover.touchTimer&&!(.5<=a.mover.touchTimer.delta())||ig.game.O2116.O7884(ig.game.O1257,"touches",a.givenName)}}},O2423:function(a){return!ig.game.O4296},O5196:function(a,b){var c=b.img.width,d=b.img.height;2==b.cellCount&&(c=b.img.width/2);var e={};c=new ml.AnimationSheet(null,c,d,b.img);e.normal=2==b.cellCount?new ml.Animation(c,1,[0,1]):new ml.Animation(c,1,[0]);e.normal.pivot.x=
7;e.normal.pivot.y=2;a.mover.holdable={animSheet:c,anims:e,O8393:e.normal,attributes:b.attributes}},O9815:function(a,b){var c={};var d=new ml.AnimationSheet(null,b.img.width/2,b.img.height,b.img);c.normal=new ml.Animation(d,1,[0]);c.back=new ml.Animation(d,1,[1]);a.mover.wearable={animSheet:d,anims:c,O8393:c.normal,attributes:b.attributes}},O5792:function(a){if(a.attachments.h){var b=a.O1331("widerRange")?34:26,c=ig.game.O5119.default;if(c)for(var d=0;d<c.length;d++){var e=c[d];if(!e._killed&&e.mover&&
e.mover.thing&&"STACKWEARB"==e.baseType&&void 0!==e.mover.health&&a.O2144(e)<=b&&(!e.mover.thing.useKeyword||ml.Misc.O3249(a.attachments.h.name,e.mover.thing.useKeyword))){var f=a.attachments.h.attributes;if(f){var g=0;f.slightlyHarmful?g=-15:f.harmful?g=-40:f.deadly?g=-100:f.heals&&(g=100);0>g&&(g=this.O4763(g,e));0!=g&&(f=e.mover.health,e.mover.health=parseInt(e.mover.health+g).limit(0,100),e.mover.health!=f&&(0>g&&(g=ig.game.O4293(6,10),ig.game.decorator.burst(e,g)),e.mover.health<f&&ig.game.sounds.pain.play(),
ig.game.O7836.O7548(e.O8711,e.mover.health),0>=e.mover.health&&ig.game.O2116.O7884(ig.game.O1257,"kills",e.givenName),window.consoleref.log((e.givenName+" health: "+e.mover.health+"%").toUpperCase())))}}}}},O4763:function(a,b){var c;b.mover.thing.protectPercent&&(a*=.01*(100-b.mover.thing.protectPercent));b.mover.attachedWearable&&b.mover.wearable&&b.mover.wearable.attributes&&(c=1,b.mover.wearable.attributes.reducesDamage25percent?c=.75:b.mover.wearable.attributes.reducesDamage50percent?c=.5:b.mover.wearable.attributes.reducesDamage75percent?
c=.25:b.mover.wearable.attributes.reducesDamage100percent&&(c=0),a*=c);return Math.round(a)},O7309:function(a,b){if(ig.game.O5119){var c=ig.game.O5119.default;if(c)for(var d=0;d<c.length;d++){var e=c[d];!e._killed&&e.mover&&e.mover.thing&&"STACKWEARB"==e.baseType&&void 0!==e.mover.health&&e.O8711==a&&(e.mover.health=b)}}}})});ig.baked=!0;
ig.module("game.core.syncedclock").defines(function(){window.SyncedClock=ig.Class.extend({milliseconds:1E3,timeSinceMidnightObject:{hours:null,minutes:null,seconds:null},O9740:null,O8535:0,O3691:null,O9248:null,init:function(){this.O9248=6E4*(new Date).getTimezoneOffset()},update:function(){this.milliseconds=this.O4233()+this.O8535;this.O8092()},O4233:function(){return(new Date).getTime()},sendPingToServer:function(){this.O9740=this.O4233();ig.game.O7836.O7875()},O1360:function(a){if(a){var b=this.O4233();
this.O3691=.5*Math.abs(b-this.O9740);this.O9740=null;this.O8535=a-(b-this.O3691);this.O8535=Math.round(this.O8535)}},getSecondsSinceMidnight:function(){var a=new Date;a=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0);return(a=this.milliseconds-a.getTime()+this.O9248)?a/1E3:0},O8092:function(){this.timeSinceMidnightObject.seconds=ig.game.O4086.getSecondsSinceMidnight();this.timeSinceMidnightObject.minutes=this.timeSinceMidnightObject.seconds?this.timeSinceMidnightObject.seconds/60:0;this.timeSinceMidnightObject.hours=
this.timeSinceMidnightObject.minutes?this.timeSinceMidnightObject.minutes/60:0;this.timeSinceMidnightObject.seconds%=60;this.timeSinceMidnightObject.minutes%=60},getTimeSinceMidnightObjectRounded:function(){var a=ig.game.O4507(this.timeSinceMidnightObject);null!==a.hours&&(a.hours=Math.floor(a.hours),a.minutes=Math.floor(a.minutes),a.seconds=Math.floor(a.seconds));return a}})});ig.baked=!0;
ig.module("game.core.aimablemanager").defines(function(){window.AimableManager=ig.Class.extend({flippedX:!1,O9674:!1,O1175:!1,O7999:0,O9400:!1,O4987:function(a){a.O8088&&(jQuery("#canvas").css("cursor","none"),this.O1175=!1,this.O1943(a),this.O7999=a.attachments.h.specs.shotsPerAmmo,this.O9400=!1)},O1943:function(a){var b=this.O6753(),c=a.attachments.h.specs;c?(void 0==c.recoil&&(c.recoil=b.recoil),void 0==c.accuracy&&(c.accuracy=b.accuracy),void 0==c.harm&&(c.harm=b.harm),void 0==c.secondsBetweenShots&&
(c.secondsBetweenShots=b.secondsBetweenShots),void 0==c.secondsToReload&&(c.secondsToReload=b.secondsToReload),void 0==c.shotsPerAmmo&&(c.shotsPerAmmo=b.shotsPerAmmo)):c=ig.game.O4507(b);a.attachments.h.specs=c},O9259:function(){ig.game.O1168&&(ml.Misc.O1184(),this.O1175=!0)},O8804:function(a){a.O8088&&(jQuery("#canvas").css("cursor","default"),this.O1175&&(ml.Misc.O1184(),this.O1175=!1))},O5896:function(a){if(a.O4292()){this.O9259();var b=a.attachments.h.specs;ig.input.state("click")&&(!ig.game.virtualJoystick.O4994()||
ig.input.mouse.y<ig.game.virtualJoystick.topY)&&("INDIVIDUALS"==ig.game.O5549?0<this.O7999?this.shoot(a,b):this.O9400||(this.O9400=!0,ig.game.sounds.click.play()):this.O6795());a.O9704&&(.5>=a.O9704.delta()&&(a.O8418=this.flippedX,a.O8393&&(a.O8393.flip.x=a.O8418)),0==this.O7999&&a.O9704.delta()>=b.secondsToReload&&(this.O7999=b.shotsPerAmmo,this.O9400=!1,ig.game.sounds.click.play()));ig.input.pressed("esc")&&ig.game.O4948&&ig.game.attachmentManager.O3578(a,"h",!0)}},draw:function(){if(ig.game.O1257&&
ig.game.O1257.O4292()){if(!ig.ua.mobile){var a=ig.game.O1257.O9704&&.1>=ig.game.O1257.O9704.delta()?"crosshairActive":"crosshair";0==this.O7999&&(a="crosshairReloading");ig.game.O8159.draw(ig.input.mouse.x-ig.game.O8159[a].width/2,ig.input.mouse.y-ig.game.O8159[a].height/2,1,ig.game.O8159[a])}a=this.O7999+"/"+ig.game.O1257.attachments.h.specs.shotsPerAmmo;0==this.O7999&&(a=". . .");ig.system.context.globalAlpha=.5;ig.game.whiteFont.draw(a,ig.system.width-4,6,ig.Font.ALIGN.RIGHT);ig.system.context.globalAlpha=
1}},O6753:function(){return{recoil:20,accuracy:90,harm:20,secondsBetweenShots:.25,secondsToReload:3,shotsPerAmmo:20,weight:0}},shoot:function(a,b){if(!a.O9704||a.O9704.delta()>=b.secondsBetweenShots){var c={};this.O7999--;var d={pos:ig.game.O4774.O2478(),size:{x:1,y:1}};this.flippedX=d.pos.x>a.pos.x;d.pos.x+=7;d.pos.y+=7;var e=100-b.accuracy;0<e&&(d.pos.x+=ig.game.O4293(-e,e),d.pos.y+=ig.game.O4293(-e,e));d=a.angleTo(d);e=a.O4257();c.opp={x:Math.floor(a.pos.x-a.offset.x+e.x),y:Math.floor(a.pos.y-
a.offset.y+e.y)};c.opv=this.O6356(d,800);c.tid=a.O4670++;ig.game.attachmentManager.O2899(a,"h",!0,c);a.O9704=new ml.Timer;b.recoil&&(a.vel.x+=b.recoil*(a.attachments.m?1:3)*(this.flippedX?-1:1))}},O6356:function(a,b){return{x:Math.floor(Math.cos(a)*b),y:Math.floor(Math.sin(a)*b)}},O6795:function(){this.O9674||(this.O9674=!0,ig.game.O5058.O7948("i can only use this"),setTimeout(function(){ig.game.O5058.O7948("in editor-based areas")},1500))}})});ig.baked=!0;
ig.module("game.core.areagenerator").defines(function(){window.AreaGenerator=ig.Class.extend({O8112:!1,code:"",frameId:"generatorFrame",iframe:null,O6895:!1,O3838:!1,O8082:"*",timer:null,O5883:null,O2304:null,O3262:[],maxRange:1E6,O8472:25,itemId:null,O4725:3,O7525:function(a,b){if(a){var c=this;this.O8112=!0;ig.game.O4261.getItem_P(a,"ag_load").done(function(d){ml.Misc.O1536(d,b)?ig.game.O9817.O4447(a,"ag_big").done(function(e){e&&e.textData?(c.itemId=a,c.code=e.textData,c.O1761()):c.stop()}):c.stop()})}},
O7719:function(){if(!ig.game.userScriptEditor||!ig.game.userScriptEditor.isOpen){var a=this;ig.game.O9817.O6885().done(function(b){b=b.contents?b.contents:a.O5382();ig.game.userScriptEditor.open(b,a,void 0,!1)})}},O3021:function(a,b){(this.O8112||9>=this.O3262.length)&&this.O4567(a,b)},O9688:function(){for(var a=-1;1>=a;a++)for(var b=-1;1>=b;b++)this.O4567(ig.game.O4873.O1577.x+a,ig.game.O4873.O1577.y+b)},O4567:function(a,b){if(this.O3262.length<=this.O8472){var c={};c.x1=a*ig.game.O4873.O6440;c.y1=
b*ig.game.O4873.O6440;c.x2=c.x1+ig.game.O4873.O6440-1;c.y2=c.y1+ig.game.O4873.O6440-1;Math.abs(c.x1)<=this.maxRange&&Math.abs(c.y1)<=this.maxRange&&Math.abs(c.x2)<=this.maxRange&&Math.abs(c.y2)<=this.maxRange&&this.O3262.push(c)}},O4968:function(){var a=this.O8472*Math.pow(ig.game.O4873.O6440,2),b=this.O3679?this.O3679.placements:null;if(Array.isArray(b)&&b.length<=a)for(a=0;a<b.length;a++){var c=b[a];if(this.O8949(c)){var d=ig.game.O6112.O8617({x:c.x,y:c.y});d&&!d.O9443||this.O4521(c.x,c.y,c.id,
c.rotation?c.rotation:0,c.flip?c.flip:0)}}this.O3679=null},O4521:function(a,b,c,d,e){var f=ig.game.O4261.getItemBasic(c,"ag_1");f&&f.imagesBeingGenerated.done(function(){var g={tid:c,rotation:d,flip:e,O9443:!0};ig.game.O6112.mapData[b]||(ig.game.O6112.mapData[b]=[]);ig.game.O6112.O3750(g,a,b);ig.game.O6112.O2312(g,{x:a,y:b})})},O8949:function(a){return ml.Misc.O2249(a.x)&&ml.Misc.O2249(a.y)&&ml.Misc.O2807(a.id)&&24==a.id.length&&(void 0===a.rotation||ml.Misc.O2249(a.rotation)&&0<=a.rotation&&3>=a.rotation)&&
(void 0===a.flip||ml.Misc.O2249(a.flip)&&0<=a.flip&&1>=a.flip)},O1761:function(){jQuery("#"+this.frameId).remove();var a=ml.Misc.O7959()?"/":"//thingistan-sandbox.pages.dev/";a+="_sandbox/automation/?v="+ig.game.O4035;a='<iframe id="'+this.frameId+'" class="generatorFrame" sandbox="allow-scripts" src="'+a+'"></iframe>';var b=window.frames.length;this.O3679=null;this.O8112=!0;this.iframe=jQuery(a);this.iframe.appendTo("body");this.iframe=window.frames[b];this.O6388();this.timer=null;this.O1623=this.O3838=
this.O6895=!1},update:function(){if(this.O8112){if(this.O3679&&this.O3679.doEnd)ig.game.userScriptEditor&&ig.game.userScriptEditor.O5634(),this.stop();else if(this.iframe||this.O6061(),this.O6895&&this.O3838&&this.iframe){var a=!1;this.timer||(this.timer=new ml.Timer,a=!0,this.O9207=new ml.Timer);var b=this.timer.delta();a||this.O1623?0<this.O3262.length&&(this.O1623=!1,this.timer.reset(),a=this.O9861(),this.iframe.postMessage(a,this.O8082),this.O3262=[]):b>=this.O4725&&(this.say("oops, an area generator stopped as it took too long"),
this.stop());this.O3679&&this.O4968()}ig.game.userScriptEditor&&ig.input.state("esc")&&ig.game.userScriptEditor.close()}},say:function(a){ig.game.O1257&&ig.game.O1257.say(a);window.consoleref&&window.consoleref.log?window.consoleref.log(a):console.log(a)},O9861:function(){return{sectors:this.O3262,areaName:ig.game.O9720,subAreaName:ig.game.O1958?ig.game.areaName:null,spawnPosition:{x:Math.floor(ig.game.O4873.O6440/2),y:Math.floor(ig.game.O4873.O6440/2)}}},O5382:function(){return"var ids = {\r    solid: '"+
(ig.game.isLocal?"60192af91be981395cc9e5e9":"538a6912502702986a653db0")+"',\r    back: '"+(ig.game.isLocal?"5c87c29e39000829e0c22eba":"53ed06283b84acbe1ab61513")+"',\r    climbable: '"+(ig.game.isLocal?"60cc5490bed3e921f8f4b248":"55bf2a8d2b753d6a5f02ba17")+"'\r};\r\rfunction generate(info) {\r    var placements = [];\r    var bridgeY = info.spawnPosition.y + 1;\r    for (var i = 0; i < info.sectors.length; i++) {\r        var sector = info.sectors[i];\r        for (var x = sector.x1; x <= sector.x2; x++) {\r            for (var y = sector.y1; y <= sector.y2; y++) {\r                if (y == bridgeY) {\r                    placements.push({id: ids.solid, x: x, y: y});\r                }\r                else if (isOdd(x)) {\r                    placements.push({id: ids.climbable, x: x, y: y});\r                }\r            }\r        }\r    }\r    \r    return {placements: placements};\r}\r\rfunction isOdd(v) {\r    return v % 2 != 0;\r}"},
O6388:function(){var a=window.addEventListener?"addEventListener":"attachEvent";(0,window[a])("attachEvent"==a?"onmessage":"message",function(b){ig.game.areaGenerator.receiveMessageFromExternal(b[b.message?"message":"data"])},!1)},receiveMessageFromExternal:function(a){a&&"fromChild"==a.internal_type&&(this.O6895?(this.O3838?(this.O1623=!0,this.O3679=a?a:{},ig.game.userScriptEditor&&ig.game.userScriptEditor.isOpen&&(a.internal_doClearLog&&ig.game.userScriptEditor.O6229(),a.internal_logText&&"string"===
typeof a.internal_logText&&ig.game.userScriptEditor.O7382(ig.game.brainManager.O2444(a.internal_logText)))):a.internal_didLoadWorker&&(this.O8112=this.O3838=!0),a.internal_error&&this.O7979(a.internal_error)):a.internal_didLoadInitial&&(this.O6895=!0,a=this.O1208()+this.code,this.iframe&&this.iframe.postMessage({internal_codeToLoad:a,internal_mainFunctionName:"generate"},this.O8082)))},O7979:function(a){if(ig.game.userScriptEditor&&ig.game.userScriptEditor.isOpen){var b=this.O1208();b=a.lineNumber-
b.split("\r").length+1;ig.game.userScriptEditor.O5966(a.message,b,a.columnNumber);ig.game.userScriptEditor.O5634()}else{var c="line "+a.lineNumber+", "+a.message.toLowerCase();this.say("the area generator has an issue");setTimeout(function(){ig.game.areaGenerator.say('"'+c+'"')},1500)}this.stop()},O1208:function(){this.O5883||(this.O5883=ml.Misc.O4612(ig.game.areaName,1E3));return ig.game.userScriptManager.getDeterministicRandomizationCodeStart(this.O5883)},userScriptEditorRunStarted:function(a){this.stop();
this.code=a;var b=this;setTimeout(function(){b.O1761()},300);return!0},userScriptEditorRunEnded:function(){ig.game.userScriptEditor&&ig.game.userScriptEditor.O5634();this.stop()},userScriptEditorClosed:function(){},userScriptEditorOpenHelp:function(){ml.Misc.openUrl("/info-generator")},stop:function(){this.O3679=null;jQuery("#"+this.frameId).remove();this.iframe=null;this.O8112=!1},O3814:function(){var a=ig.game.O6112.mapData,b;for(b in a)if(a.hasOwnProperty(b))if(b.O9443)delete ig.game.O6112.mapData[b];
else for(var c in a[b])a[b].hasOwnProperty(c)&&c.O9443&&delete ig.game.O6112.mapData[b][c]}})});ig.baked=!0;
ig.module("game.core.storagemanagenr").defines(function(){window.StorageManagenr=ig.Class.extend({init:function(){this.O9350()},setItem:function(a,b){if(a)try{localStorage.setItem(a,b)}catch(c){this.O6114()}},O6114:function(){ig.game.O2116.O8182=2;ig.game.O2116.O1306=!1;ig.game.O2116.O9173();ig.game.O1257&&ig.game.O1257.O1558();ig.game.writableDialog&&(ig.game.writableDialog.O2925=2,ig.game.writableDialog.O8245=!1,ig.game.writableDialog.O9485());localStorage.removeItem("writableCommentBackup")},clearAll:function(){for(var a=
localStorage.length-1;0<=a;a--){var b=localStorage.key(a);delete localStorage[b]}},O9350:function(){for(var a=localStorage.length-1;0<=a;a--){var b=localStorage.key(a);b&&(0===b.indexOf("O")||0===b.indexOf("portaller_O"))&&delete localStorage[b]}}})});ig.baked=!0;
ig.module("game.core.dynathingmanager").defines(function(){window.DynaThingManager=ig.Class.extend({maxCellsEver:9,O7478:"up down left right opacity show hide bright unbright restart playSound accelerateLeft accelerateRight accelerateUp accelerateDown light flipHorizontal flipVertical rotate rotation pivot zIndex crop text font secondsAngle secondsAngleInSteps minutesAngle minutesAngleInSteps hoursAngle hoursAngleInSteps grab ungrab align position shape fill gradient circle outline".split(" "),O4988:"bright unbright flipHorizontal flipVertical secondsAngle secondsAngleInSteps minutesAngle minutesAngleInSteps hoursAngle hoursAngleInSteps grab ungrab".split(" "),
standAloneCommands:["restart","playSound","say","remove"],modes:"default;move;action;rise;fall;mounted rise;mounted fall;climb;swim;create;sit;lie;start;state 0;state 1;state 2;state 3;state 4;state 5;state 6;state 7;state 8;state 9;state 10;odd state;even state;negative state;positive state;neutral state;private;randomize;private randomize;moved;every minute;every 2 minutes;every 3 minutes;every 4 minutes;every 5 minutes;every 10 minutes;every 15 minutes;every 30 minutes;every hour;every 3 hours;every 6 hours;every 12 hours;every day;profile main;profile body;profile name;profile album;profile mifts".split(";"),
alternateModesSpelling:"moves;rises;falls;mounted rises;mounted falls;climbs;swims;creates;sits;lies;starts;odd states;even states;negative states;positive states;neutral states;randomizes;private randomizes".split(";"),O5469:15,O9809:3600,O2324:60,O7134:4,pivotMax:200,otherMax:600,O6809:1E4,O5491:2,O5560:Math.PI/180,O1274:"[break]",O4606:"[comma]",O9728:"[colon]",prefixIfPlainText:"0: cell 1 opacity 1, font white, text ",minPointsForPolygon:3,O7429:100,O6778:600,O3681:function(a,b,c){var d={"default":{}};
ig.game.O7456.O6419&&(this.O2324=parseInt(ig.game.O7456.O6419).limit(10,144));if(a){a=this.O8056(a);c.O8950=0<=a.indexOf("zIndex");c.O5541=0<=a.indexOf(" grab");c.containsLight=0<=a.indexOf("light");for(c=0;c<this.modes.length;c++){var e=this.modes[c];d[e]={};this.O7238(e,a,d[e],b);d[e]&&0!=ml.Misc.O4952(d[e])||delete d[e]}d["default"]||(a=ig.game.strings.replaceAll(a,"\n",this.O1274),a=ig.game.strings.replaceAll(a,this.O4606,","),a=ig.game.strings.replaceAll(a,":",this.O9728),a=this.prefixIfPlainText+
a,this.O7238("default",a,d["default"],b))}d["default"]||(d["default"]={});return d},O7238:function(a,b,c,d){b=b.split("\n");for(var e="default",f=0,g=0;g<b.length;g++){var h=ig.game.strings.trim(b[g]);if(h&&""!=h)if(0<=this.modes.indexOf(h))e=h;else if(2<=h.length&&0<=this.modes.indexOf(h.substr(0,h.length-1)))e=h.substr(0,h.length-1);else if(a==e){null==c&&(c={});var k=h.split(":");if(2==k.length){var l=k[0].split("-");if(2>=l.length&&ml.Misc.O5090(l[0])){f=this.O8055(l,f);h=parseInt(Number(l[0])*
this.O2324);var m="f"+h+"_1";c[m]&&(m="f"+h+"_2");c[m]&&(m="f"+h+"_3");c[m]=this.O6271(k[1],d);2==l.length&&(k=parseInt(Number(l[1])*this.O2324),c[m].spreadOverFrames=k-h)}}}}},O8055:function(a,b){for(var c=0;c<a.length;c++){var d=a[c];0<=d.indexOf("+")&&(d=ig.game.strings.replaceAll(d,"+",""),ml.Misc.O5090(d)&&(0==c?ml.Misc.O5090(b)&&(d=parseFloat(d)+parseFloat(b)):ml.Misc.O5090(a[0])&&(d=parseFloat(d)+parseFloat(b)),a[c]=d));b=d}return b},O8056:function(a){a=("\n"+a).toLowerCase();a=a.replace(/\r\n/g,
"\n");a=ig.game.strings.O3608(a);a=ig.game.strings.replaceAll(a,"[ad area]",this.O9456());a=ig.game.strings.replaceAll(a,"[ad text]",this.O6465());if(-1===a.indexOf(":"))a=ig.game.strings.replaceAll(a,"\n",this.O1274),a=ig.game.strings.replaceAll(a,",",this.O4606),a=ig.game.strings.replaceAll(a,":",this.O9728),a=this.prefixIfPlainText+a;else{a=ig.game.strings.replaceAll(a,"  "," ");a=ig.game.strings.replaceAll(a," :",":");a=ig.game.strings.replaceAll(a,"s:",":");a=ig.game.strings.replaceAll(a,"s-",
"-");a=a.replace(/\bposition\s+(-?\d+)\s*,\s*(-?\d+)/g,"position $1 $2");a=ig.game.strings.replaceAll(a,"\\,",this.O4606);a=ig.game.strings.replaceAll(a,"\\:",this.O9728);a=ig.game.strings.replaceAll(a,"z-index","zIndex");a=ig.game.strings.replaceAll(a,"z index","zIndex");a=ig.game.strings.replaceAll(a,"flip horizontal","flipHorizontal");a=ig.game.strings.replaceAll(a,"hours angle","hoursAngle");a=ig.game.strings.replaceAll(a,"hour angle","hoursAngle");a=ig.game.strings.replaceAll(a,"minutes angle",
"minutesAngle");a=ig.game.strings.replaceAll(a,"minute angle","minutesAngle");a=ig.game.strings.replaceAll(a,"seconds angle","secondsAngle");a=ig.game.strings.replaceAll(a,"second angle","secondsAngle");a=ig.game.strings.replaceAll(a,"secondsAngle in steps","secondsAngleInSteps");a=ig.game.strings.replaceAll(a,"minutesAngle in steps","minutesAngleInSteps");a=ig.game.strings.replaceAll(a,"hoursAngle in steps","hoursAngleInSteps");a=ig.game.strings.replaceAll(a,"flip vertical","flipVertical");a=ig.game.strings.replaceAll(a,
"accelerate left","accelerateLeft");a=ig.game.strings.replaceAll(a,"accelerate right","accelerateRight");a=ig.game.strings.replaceAll(a,"accelerate up","accelerateUp");a=ig.game.strings.replaceAll(a,"accelerate down","accelerateDown");a=ig.game.strings.replaceAll(a,"plays sound","playSound");a=ig.game.strings.replaceAll(a,"play sound","playSound");if(0<=a.indexOf(" text ")){a=ig.game.strings.replaceAll(a,", hide",", opacity 0");a=ig.game.strings.replaceAll(a,", show",", opacity 1");a=ig.game.strings.replaceAll(a,
"cells hide","cells opacity 0");a=ig.game.strings.replaceAll(a,"cells show","cells opacity 1");for(var b=1;b<=this.maxCellsEver;b++)a=ig.game.strings.replaceAll(a,"cell "+b+" hide","cell "+b+" opacity 0"),a=ig.game.strings.replaceAll(a,"cell "+b+" show","cell "+b+" opacity 1")}else a=ig.game.strings.replaceAll(a,"hide","opacity 0"),a=ig.game.strings.replaceAll(a,"show","opacity 1");for(b=1;b<=this.maxCellsEver;b++)a=ig.game.strings.replaceAll(a,"cell "+b+"+","cells "+b+"+");a=this.O5530(a)}return a},
O5530:function(a){a=a.split("\n");for(var b=[],c=0;c<a.length;c++){var d=a[c].trim();if(0<=d.indexOf(":")||0<=this.modes.indexOf(d)||2<=d.length&&0<=this.modes.indexOf(d.substr(0,d.length-1)))b.push(d);else if(""!=d){var e=d.charAt(0),f=b.length-1;b[f]+=("0"<=e&&"9">=e||"-"==e||"."==e?" ":",")+d;b[f]=ig.game.strings.replaceAll(b[f],",,",",")}}return b.join("\n")},O9456:function(){var a="";ig.game.areaAdForDisplay&&ig.game.areaAdForDisplay.stablerAreaName&&(a=ig.game.areaAdForDisplay.stablerAreaName,
a=ig.game.strings.replaceAll(a,":"," "),a=ig.game.strings.replaceAll(a,","," "));return a},O6465:function(){var a="";ig.game.areaAdForDisplay&&ig.game.areaAdForDisplay.stablerTitle&&(a=ig.game.areaAdForDisplay.stablerTitle,a=ig.game.strings.replaceAll(a,":"," "),a=ig.game.strings.replaceAll(a,","," "));return a},O6271:function(a,b){for(var c={},d=a.split(","),e=null,f=0;f<d.length;f++){a=d[f].trim();var g=[],h=null;if(0<=a.indexOf("cells "))if(0<=a.indexOf("+")&&-1===a.indexOf("+ ")&&-1===a.indexOf(" +")){var k=
a.split(" ");if(3<=k.length&&0<=k[1].indexOf("+")){h=k[1].split("+");for(var l=0;l<h.length;l++)if(ml.Misc.O5090(h[l])){var m=parseInt(h[l]);1<=m&&m<=this.maxCellsEver&&-1===g.indexOf(m)&&g.push(m)}h=a.substr(k[0].length+1+k[1].length+1)}}else{for(l=1;l<=b;l++)g.push(l);h=a.substr(6)}else if(0<=a.indexOf("cell "))h=parseInt(a.substr(5,1)),1<=h&&h<=b&&g.push(h),h=a.substr(7);else if(0===a.indexOf("say ")){if(a=a.substr(4).trim().toLowerCase())a=ig.game.strings.replaceAll(a,this.O4606,","),a=ig.game.strings.replaceAll(a,
this.O9728,":"),a=ig.game.strings.O3089(a,100,!0),c.say=a}else 0<=this.standAloneCommands.indexOf(a)?c[a]=!0:e&&(g=ig.game.O4507(e),h=a);if(h&&g&&1<=g.length)for(h=h.trim(),a=0;a<g.length;a++)l=h.indexOf(" "),1<=l?(k=h.substr(0,l),0<=this.O7478.indexOf(k)&&(l=h.substr(l+1).trim(),m="e"+g[a],c[m]||(c[m]={}),l=this.O9616(k,l,b),null!=l&&(c[m][k]=l))):(l=this.O9616(h,null,b),null!=l&&(m="e"+g[a],c[m]||(c[m]={}),c[m][h]=l));g&&(e=ig.game.O4507(g))}return c},O9616:function(a,b,c){if("opacity"==a){if(5<
b.length&&(b=b.substr(0,5)),b=parseFloat(b),0>b||1<b)b=null}else if("text"==a)if(null==b)b="";else{b=String(b);b=ig.game.strings.replaceAll(b,this.O4606,",");b=ig.game.strings.replaceAll(b,this.O9728,":");b=b.split(this.O1274);for(var d=0;d<b.length;d++)b[d]=ig.game.strings.O7686(b[d],200,!0);b=b.join(this.O1274)}else if("font"==a)if(b=String(b).trim().toLowerCase()){d=0<=b.indexOf("small");var e=0<=b.indexOf("black");a=0<=b.indexOf("white");b=ig.game.strings.replaceAll(b,"small","");b=ig.game.strings.replaceAll(b,
"black","");b=ig.game.strings.replaceAll(b,"white","");b=""==b.trim()?e&&d?"blackSmallFont":e?"blackFont":a&&d?"whiteSmallFont":a?"whiteFont":null:null}else b=null;else if("fill"==a){if(b=String(b).trim().toLowerCase())if(a=null,0<=b.indexOf("dark")?(a="darken",b=ig.game.strings.replaceAll(b,"dark","")):0<=b.indexOf("bright")&&(a="lighter",b=ig.game.strings.replaceAll(b,"bright","")),b=ig.game.strings.replaceAll(b,"  "," "),(b=String(b).trim().toLowerCase())&&1<=b.indexOf(" "))if(b=b.split(" "),4==
b.length){for(d=0;d<b.length;d++)if(e=parseFloat(b[d]),e>=-this.otherMax&&e<=this.otherMax)b[d]=parseFloat(e);else{b=null;break}b.unshift(a)}else b=null}else if("align"==a)if(b=String(b).trim().toLowerCase())switch(b){case "left":b=ig.Font.ALIGN.LEFT;break;case "center":b=ig.Font.ALIGN.CENTER;break;case "right":b=ig.Font.ALIGN.RIGHT;break;default:b=null}else b=null;else if(0===a.indexOf("accelerate"))b=parseFloat(b),Math.abs(b)>this.O5491&&(b=parseInt(b).limit(-this.O5491,this.O5491));else if(0===
a.indexOf("light")){if(b=b.split(" "),3==b.length)for(d=0;d<b.length;d++)if(e=parseInt(b[d]),0<=e&&255>=e)b[d]=e;else{b=null;break}}else if(0<=this.O4988.indexOf(a))b=!0;else if(b&&1<=b.indexOf(" ")){b=b.replace(/,\s*/g," ");b=b.trim();b=b.split(" ").filter(function(f){return f!==""});for(d=0;d<b.length;d++)if(e=parseFloat(b[d]),"pivot"==a)if(e>=-this.pivotMax&&e<=this.pivotMax)b[d]=e;else{b=null;break}else if("crop"==a)if(e>=-this.otherMax&&e<=this.otherMax)b[d]=parseInt(e);else{b=null;break}else if("shape"==
a||"gradient"==a)if(e>=-this.O6778&&e<=this.O6778&&1>=this.O2840(e))b[d]=parseFloat(e);else{b=null;break}else if("position"==a||"circle"==a||"outline"==a)if(e>=-this.otherMax&&e<=this.otherMax)b[d]=e;else{b=null;break}else if(1<=e&&e<=c)b[d]=e;else{b=null;break}if("crop"==a&&4==b.length)d=b[0],e=b[1],a=b[2],b=b[3],b=d>=a||e>=b?null:[d,e,a-d,b-e];else if("shape"==a){if(b.length<2*this.minPointsForPolygon||b.length>2*this.O7429||!ml.Misc.isEven(b.length))b=null}else"circle"==a?3==b.length?(d=0<b[2])||
(b=null):b=null:"outline"==a?5==b.length?(d=b[0],0<d&&50>=d?(d=1,b[d]=this.O3230(b[d++]),b[d]=this.O3230(b[d++]),b[d]=this.O3230(b[d++]),b[d]=this.O9308(b[d++])):b=null):b=null:"fill"==a?(4==b.length&&b.unshift(null),5==b.length?(d=0,"dark"==b[0]?b[d]="darken":"bright"==b[0]&&(b[d]="lighter"),d++,b[d]=this.O3230(b[d++]),b[d]=this.O3230(b[d++]),b[d]=this.O3230(b[d++]),b[d]=this.O9308(b[d++])):b=null):"gradient"==a&&(7==b.length?(d=0<b[2])?(d=3,b[d]=this.O3230(b[d++]),b[d]=this.O3230(b[d++]),b[d]=this.O3230(b[d++]),
b[d]=this.O9308(b[d++])):b=null:10==b.length?0<b[2]&&0<b[5]?(d=6,b[d]=this.O3230(b[d++]),b[d]=this.O3230(b[d++]),b[d]=this.O3230(b[d++]),b[d]=this.O9308(b[d++])):b=null:8==b.length?b[0]!=b[2]||b[1]!=b[3]?(d=4,b[d]=this.O3230(b[d++]),b[d]=this.O3230(b[d++]),b[d]=this.O3230(b[d++]),b[d]=this.O9308(b[d++])):b=null:b=null)}else 0<=a.indexOf("rotate")||0<=a.indexOf("rotation")?(b=parseInt(b).limit(-this.O6809,this.O6809),b*=this.O5560):b="gradient"==a?null:parseInt(b).limit(-this.otherMax,this.otherMax);
return b},O2840:function(a){return Math.floor(a)===a?0:a.toString().split(".")[1].length||0},O3230:function(a){ml.Misc.O1215(a)||(a=0);return ml.Misc.O8693(a,0,255)},O9308:function(a){ml.Misc.O5090(a)||(a=0);return ml.Misc.O9024(a,0,1)}})});ig.baked=!0;
ig.module("game.core.userscriptmanager").defines(function(){window.UserScriptManager=ig.Class.extend({didEmbed:!1,inputData:null,O1303:null,iframe:null,code:null,O6895:!1,O3838:!1,O8082:"*",mainFunctionName:"",O9296:5,O3435:null,getResultByItemId:function(a,b,c,d){var e=this;ig.game.O4261.getItem_P(a,"getResultByItemId_load").done(function(f){ml.Misc.O1536(f)&&ig.game.O9817.O4447(a).done(function(g){e.O1848(g&&g.textData?g.textData:"",b,c,d)})})},O1848:function(a,b,c,d){!this.didEmbed&&ig.game.O1257&&
1<=ig.game.O1257.rank&&d&&b&&(this.O1303=d,this.inputData=b,this.mainFunctionName=c,a||="",ig.game.brainManager.O9546(a)||(this.code=a,this.O7013()))},O5382:function(){return""},O7013:function(){this.O3435&&(clearTimeout(this.O3435),this.O3435=null);jQuery("#externalScriptFrame").remove();ig.game.userScriptEditor&&ig.game.userScriptEditor.O6229();this.iframe=null;var a=ml.Misc.O7959()?"/":"//thingistan-sandbox.pages.dev/";a+="_sandbox/automation/?v="+ig.game.O4035;var b=window.frames.length;this.iframe=
jQuery('<iframe id="externalScriptFrame" sandbox="allow-scripts" src="'+(a+'#userScriptManager"></iframe>'));this.iframe.appendTo("body");this.iframe=window.frames[b];this.O3838=this.O6895=!1},receiveMessageFromExternal:function(a){a&&"fromChild"==a.internal_type&&(this.O6895?this.O3838?(a=a?a:{},delete a.internal_logText,delete a.internal_doClearLog,delete a.internal_type,delete a.internal_didLoadWorker,delete a.internal_target,this.O1303(a),this.cleanUp()):(a.internal_didLoadWorker&&(this.O3838=
!0),a.internal_error?ig.game.O1257&&ig.game.O1257.say(JSON.stringify(a.internal_error)):this.O3838&&(this.iframe&&this.iframe.postMessage(this.inputData,this.O8082),this.inputData=null)):a.internal_didLoadInitial&&(this.O6895=!0,a={internal_codeToLoad:this.code,internal_mainFunctionName:this.mainFunctionName},this.O3435=setTimeout(function(){ig.game.userScriptManager.cleanUp()},1E3*this.O9296),this.iframe&&this.iframe.postMessage(a,this.O8082),this.code=null))},cleanUp:function(){jQuery("#externalScriptFrame").remove();
this.O3435&&(clearTimeout(this.O3435),this.O3435=null);this.didEmbed=!1;this.inputData=this.O1303=this.code=this.iframe=null;this.O3838=this.O6895=!1;setTimeout(function(){ig.game.errorManager.init()},10)},O5085:function(a){var b=null,c=null,d;for(d in ig.game.brainManager.enumType)ig.game.brainManager.enumType[d]==a&&(c=d);if(c)for(var e in window.Item.prototype.BASE_TYPES)if((a=window.Item.prototype.BASE_TYPES[e].publicKey)&&a==c){b=e;break}return b},getDeterministicRandomizationCodeStart:function(a){return""+
this.O8740()+"\r\rvar mersenneTwisterSeed = '"+a+"';\rvar mersenneTwisterObject = new MersenneTwister(mersenneTwisterSeed);\rMath.random = function() { return mersenneTwisterObject.random(); }\r\r"},O8740:function(){return"var MersenneTwister = function(seed) {\r  if (seed == undefined) { seed = Date.now(); } \r  this.N = 624;\r  this.M = 397;\r  this.MATRIX_A = 0x9908b0df;\r  this.UPPER_MASK = 0x80000000;\r  this.LOWER_MASK = 0x7fffffff;\r  this.mt = new Array(this.N);\r  this.mti=this.N+1;\r  this.init_genrand(seed);\r}  \r \rMersenneTwister.prototype.init_genrand = function(s) {\r  this.mt[0] = s >>> 0;\r  for (this.mti=1; this.mti<this.N; this.mti++) {\r      var s = this.mt[this.mti-1] ^ (this.mt[this.mti-1] >>> 30);\r      this.mt[this.mti] = (((((s & 0xffff0000) >>> 16) * 1812433253) << 16) + (s & 0x0000ffff) * 1812433253) + this.mti;\r      this.mt[this.mti] >>>= 0;\r   }\r}\r \rMersenneTwister.prototype.genrand_int32 = function() {\r  var y;\r  var mag01 = new Array(0x0, this.MATRIX_A);\r \r  if (this.mti >= this.N) {\r    var kk;\r \r    if (this.mti == this.N+1)\r      this.init_genrand(5489);\r \r    for (kk=0;kk<this.N-this.M;kk++) {\r      y = (this.mt[kk]&this.UPPER_MASK)|(this.mt[kk+1]&this.LOWER_MASK);\r      this.mt[kk] = this.mt[kk+this.M] ^ (y >>> 1) ^ mag01[y & 0x1];\r    }\r    for (;kk<this.N-1;kk++) {\r      y = (this.mt[kk]&this.UPPER_MASK)|(this.mt[kk+1]&this.LOWER_MASK);\r      this.mt[kk] = this.mt[kk+(this.M-this.N)] ^ (y >>> 1) ^ mag01[y & 0x1];\r    }\r    y = (this.mt[this.N-1]&this.UPPER_MASK)|(this.mt[0]&this.LOWER_MASK);\r    this.mt[this.N-1] = this.mt[this.M-1] ^ (y >>> 1) ^ mag01[y & 0x1];\r \r    this.mti = 0;\r  }\r \r  y = this.mt[this.mti++];\r \r  y ^= (y >>> 11);\r  y ^= (y << 7) & 0x9d2c5680;\r  y ^= (y << 15) & 0xefc60000;\r  y ^= (y >>> 18);\r \r  return y >>> 0;\r}\r \rMersenneTwister.prototype.random = function() {\r  return this.genrand_int32()*(1.0/4294967296.0); \r}\r"}})});
ig.baked=!0;
ig.module("game.core.brainmanager").defines(function(){window.BrainManager=ig.Class.extend({O8112:!1,control:{left:!1,right:!1,up:!1,down:!1,action:!1},controlPrevious:{left:!1,right:!1,up:!1,down:!1,action:!1},O3679:null,timer:null,O5365:1/15,O1623:!1,O4725:3,O8406:"XMLHttpRequest XMLHttpRequestUpload WebSocket File FileList FileError FileReader FileReaderSync IDBCursor IDBCursorWithValue IDBDatabase IDBFactory IDBIndex IDBKeyRange IDBObjectStore IDBOpenDBRequest IDBRequest IDBTransaction IDBVersionChangeEvent ImageData Image Canvas ActiveXObject URL WorkerLocation WorkerGlobalScope WorkerNavigator indexedDB localStorage sessionStorage importScripts setTimeout setInterval applicationCache performance Blob DedicatedWorkerGlobalScope webkitIDBCursor webkitIDBDatabase webkitIDBFactory webkitIDBIndex webkitIDBKeyRange webkitIDBObjectStore webkitIDBRequest webkitIDBTransaction webkitIndexedDB webkitURL addEventListener removeEventListener dispatchEvent msIndexedDB msWriteProfilerMark setImmediate XDomainRequest alert speechSynthesis SpeechSynthesisUtterance SpeechRecognition Iterator Worker Request fetch".split(" "),O2475:"internal_;eval;self;use strict;location;navigator;onerror;onclose;onmessage;postMessage;onreadystatechange;self.close;window;worker;canvas;EvalError;MessageChannel;MessageEvent;http;alert; catch;createObjectURL".split(";"),
anonymizedValuesPerSession:{},O4489:{},O7590:10,O1734:null,O2716:null,O4610:1.5,pressedSinceLast:{left:!1,right:!1,up:!1,action:!1},stateSinceLast:{left:!1,right:!1,up:!1,action:!1},enumType:{being:1,emission:2,item:3,speech:4,solid:5,slope:6,back:7,thing:8,sound:9,backAndFront:10,slidey:11,slideySlope:12,sticky:13,bouncy:14,pushing:15,climbable:16,oneWay:17,deadly:18,moving:19,deadlyMoving:20,movingLiving:21,activator:91,openOnActivate:22,transporting:23,directionalTransporting:24,ringPortal:25,
crumbling:26,itemThrower:27,deadlyEmerging:28,flippingLiquid:29,liquid:30,harmful:31,changingHarmful:32,medium:33,environment:34,living:35,interacting:36,interactingMotion:37,changingLiving:38,flippingDecorative:39,changingThing:40,sparkling:41,flexible:42,pointer:43,placeName:44,writable:45,readable:46,bigThing:47,livelyThing:48,viewable:49,dynamic:50,brain:51,liner:52,thingInFront:53,bouncyTilt:54,light:55,topLight:56,surroundLight:57,holder:58,fillLight:59,lightGlow:60,musical:61,music:62,musicSheet:63,
emitter:65,interactiveEnvironment:66,equipment:67,consumable:68,swingLine:69,wearable:70,body:71,mountable:72,flyingMountable:73,instrument:74,motion:75,changingOnActivator:76,gatherable:77,changingOnTouch:78,changer:79,happening:80,mover:81,helper:82,mift:83,walkable:84,aimable:85,farBack:86,veryBigThing:87,multi:88,pushingDiagonal:89,passableSlope:90,furry:92,clothy:93,drifty:94,generator:95},enumStance:{swimming:2,climbing:3,creating:4,sitting:5,lying:6},enumMode:{"default":0,bright:1,dark:2,multiply:3,
screen:4,overlay:5,difference:6,exclusion:7,hue:8,saturation:9,color:10,luminosity:11},enumFont:{whiteSmall:0,white:1,blackSmall:2,black:3},enumAlign:{center:0,left:1,right:2},iframe:null,code:null,O8082:"*",O4174:"externalScriptFrame",O6895:!1,O3838:!1,O5706:{},O9478:[],O5417:0,isLoading:!1,O7825:function(a){if(!this.isLoading){this.isLoading=!0;var b=this;ig.game.O4261.getItem_P(a.id,"brain_lbi").done(function(c){ml.Misc.O1536(c)&&(c=a.attributes&&a.attributes.offersEditing,!a.textSize||c&&a.id==
localStorage.lastSavedOffersEditingItemId?ig.game.O9817.O6885().done(function(d){var e=d.contents?d.contents:b.O5382();ig.game.userScriptEditor&&ig.game.userScriptEditor.isOpen||(ig.game.userScriptEditor?(ig.game.userScriptEditor.open(e,b),ig.game.brainManager.isLoading=!1):setTimeout(function(){ig.game.userScriptEditor&&(ig.game.userScriptEditor.open(e,b),ig.game.brainManager.isLoading=!1)},500))}):c?ig.game.O9817.O4447(a.id).done(function(d){var e=d.textData?d.textData:"";ig.game.userScriptEditor&&
ig.game.userScriptEditor.isOpen||(ig.game.userScriptEditor?(ig.game.userScriptEditor.open(e,b,!1,void 0,a.id),ig.game.brainManager.isLoading=!1):setTimeout(function(){ig.game.userScriptEditor&&(ig.game.userScriptEditor.open(e,b,!1,void 0,a.id),ig.game.brainManager.isLoading=!1)},500))}):ig.game.O9817.O4447(a.id).done(function(d){void 0!==d.textData&&(b.O7960(d.textData),ig.game.brainManager.isLoading=!1)}))})}},O7960:function(a){if(this.O2916()){var b=!1;this.O8112&&this.unload();ig.game.O1257&&1<=
ig.game.O1257.rank&&!this.O9546(a)&&(this.code=a,this.O5417=0,jQuery("#externalScriptFrame").remove(),ig.game.userScriptEditor&&ig.game.userScriptEditor.O6229(),this.iframe=null,a=ml.Misc.O7959()?"/":"//thingistan-sandbox.pages.dev/",a+="_sandbox/automation/?v="+ig.game.O4035,b=window.frames.length,this.iframe=jQuery('<iframe id="externalScriptFrame" sandbox="allow-scripts" src="'+(a+'#brainManager"></iframe>')),this.iframe.appendTo("body"),this.iframe=window.frames[b],this.O6388(),this.timer=null,
this.O1623=this.O3838=this.O6895=!1,b=!0);return b}},O2916:function(){return ig.game.O1257&&ig.game.O1257.attachments&&ig.game.O1257.attachments.br},O6388:function(){var a=window.addEventListener?"addEventListener":"attachEvent";(0,window[a])("attachEvent"==a?"onmessage":"message",function(b){ig.game.brainManager.receiveMessageFromExternal(b[b.message?"message":"data"])},!1)},O9546:function(a){var b=null;if("string"===typeof a){a=a.toLowerCase();for(var c=0;1>=c;c++)for(var d=0==c?this.O8406:this.O2475,
e=0;e<d.length;e++){var f=d[e].toLowerCase();0<=a.indexOf(f)&&(b='Using "'+d[e]+'" is not supported')}}null!==b&&(window.consoleref.warn("Oops, cancelled brain..."+b),ig.game.userScriptEditor&&ig.game.userScriptEditor.isOpen&&(ig.game.O1257.say("oops, cancelled brain..."),setTimeout(function(){ig.game.O1257.say(b.toLowerCase())},1500)));return b},unload:function(a){this.control={};this.controlPrevious={};this.O8112=!1;this.O5706={};this.timer=null;jQuery("#externalScriptFrame").remove();this.iframe=
null;ig.game.O1257&&(ig.game.O1257.vel={x:0,y:0},ig.game.O1257.accel={x:0,y:0},ig.game.O1257.setAnim(ig.game.O1257.anims.idle));ig.game.userScriptEditor&&ig.game.userScriptEditor.O5634();a&&(ig.game.O1257&&ig.game.O1257.attachments.br&&ig.game.attachmentManager.O3578(ig.game.O1257,"br",!0),ig.game.userScriptEditor&&ig.game.userScriptEditor.close(),setTimeout(function(){ig.game.errorManager.init()},10))},O1208:function(){return"'use strict';\nvar internal_logText = '', internal_didLogOnce = false, internal_doClearLog = false;\ndelete self.eval;\n"+
this.O8632()+this.getEnum("enumType",this.enumType)+this.getEnum("enumStance",this.enumStance)+this.getEnum("enumMode",this.enumMode)+this.getEnum("enumFont",this.enumFont)+this.getEnum("enumAlign",this.enumAlign)+"\n"},getEnum:function(a,b){a="var "+a+" = {";for(var c in b)a+=c+": "+b[c]+",";return a+"};\n"},O8632:function(){for(var a="",b=0;b<this.O8406.length;b++)a+="try { "+this.O8406[b]+" = null; } catch(err) {} ";return a},O5382:function(){return"// An example script\n\nvar chanceForMovement = 25;\n\nfunction update(my) {\n    var reaction = {left: false, right: false, up: false, down: false, actionOnce: false};\n    \n    if ( chance(chanceForMovement) ) { reaction.left = true; }\n    \n    return reaction;\n}\n\nfunction chance(percent) {\n    return Math.random() <= percent / 100;\n}"},
update:function(){if(this.O8112&&ig.game.O1257&&ig.game.O1257.O8393&&ig.game.O1257.O8393.flip)if(ig.game.O1257.attachments.br){if(this.O6895&&this.O3838){this.O1410();this.O2866();this.O8247();var a=!1;this.timer||(this.timer=new ml.Timer,a=!0);var b=this.timer.delta();if(a||b>=this.O5365)a||this.O1623?(this.O1623=!1,this.timer.reset(),this.iframe&&this.iframe.postMessage(this.O9249(),this.O8082),this.O5706={},this.O9478=[],0<this.O5417&&this.O5417--):b>=this.O4725&&(ig.game.O1257.say("oops, brain code stopped as it took too long to react"),
this.unload(!(ig.game.userScriptEditor&&ig.game.userScriptEditor.isOpen)))}}else this.unload(!0)},O2866:function(){this.pressedSinceLast.left||(this.pressedSinceLast.left=ig.input.pressed("a")&&!ig.game.O5058.O7221||ig.input.pressed("l_arr")||ig.game.virtualJoystick.input.left);this.pressedSinceLast.right||(this.pressedSinceLast.right=ig.input.pressed("d")&&!ig.game.O5058.O7221||ig.input.pressed("r_arr")||ig.game.virtualJoystick.input.right);this.pressedSinceLast.up||(this.pressedSinceLast.up=ig.input.pressed("w")&&
!ig.game.O5058.O7221||ig.input.pressed("u_arr")||ig.game.virtualJoystick.input.up);ig.game.O5178||this.pressedSinceLast.down||(this.pressedSinceLast.down=ig.input.pressed("s")&&!ig.game.O5058.O7221||ig.input.pressed("d_arr")||ig.game.virtualJoystick.input.down);this.pressedSinceLast.action||(this.pressedSinceLast.action=(ig.input.pressed("space")||ig.ua.fireTV&&ig.input.pressed("enter"))&&!ig.game.O5058.O9424()||ig.game.virtualJoystick.input.action)},O8247:function(){this.stateSinceLast.left||(this.stateSinceLast.left=
ig.input.state("a")&&!ig.game.O5058.O7221||ig.input.state("l_arr")||ig.game.virtualJoystick.input.left);this.stateSinceLast.right||(this.stateSinceLast.right=ig.input.state("d")&&!ig.game.O5058.O7221||ig.input.state("r_arr")||ig.game.virtualJoystick.input.right);this.stateSinceLast.up||(this.stateSinceLast.up=ig.input.state("w")&&!ig.game.O5058.O7221||ig.input.state("u_arr")||ig.game.virtualJoystick.input.up);ig.game.O5178||this.stateSinceLast.down||(this.stateSinceLast.down=ig.input.state("s")&&
!ig.game.O5058.O7221||ig.input.state("d_arr")||ig.game.virtualJoystick.input.down);this.stateSinceLast.action||(this.stateSinceLast.action=(ig.input.state("space")||ig.input.state("enter"))&&!ig.game.O5058.O9424()||ig.game.virtualJoystick.input.action)},receiveMessageFromExternal:function(a){a&&"fromChild"==a.internal_type&&(this.O6895?(this.O3838?(this.O1623=!0,this.O3679||(this.O3679=a?a:{})):a.internal_didLoadWorker&&(this.O8112=this.O3838=!0),a.internal_error&&this.O7979(a.internal_error)):a.internal_didLoadInitial&&
(this.O6895=!0,this.iframe&&this.iframe.postMessage({internal_codeToLoad:this.code,internal_mainFunctionName:"update"},this.O8082),this.code=null))},O1410:function(){if(this.O3679){var a=this.O3679;this.controlPrevious=ig.game.O4507(this.control);this.control={left:a.left||a.leftOnce,right:a.right||a.rightOnce,up:a.up||a.upOnce,down:a.down||a.downOnce,action:a.action||a.actionOnce,leftOnce:!!a.leftOnce,rightOnce:!!a.rightOnce,upOnce:!!a.upOnce,downOnce:!!a.downOnce,actionOnce:!!a.actionOnce};this.O4514(a.speech);
this.O9871(a.motion);this.O3889(a.playInstrument);if(a.unequip){var b=this.control.action&&!this.controlPrevious.action;this.unload(!0);b&&ig.game.attachmentManager.O6246()}ig.game.userScriptEditor&&ig.game.userScriptEditor.isOpen&&(a.internal_doClearLog&&ig.game.userScriptEditor.O6229(),a.internal_logText&&"string"===typeof a.internal_logText&&ig.game.userScriptEditor.O7382(this.O2444(a.internal_logText)));this.O3679=null}},O3889:function(a){if(0>=this.O5417&&ig.game.instrumentDialog&&ig.game.instrumentDialog.isOpen&&
ig.game.O1257&&1<=ig.game.O1257.rank&&(Array.isArray(a)||(a=[a]),6>=a.length))for(var b=0;b<a.length;b++){var c=a[b];if(c)for(var d=0;d<ig.game.instrumentDialog.notes.length;d++){var e=ig.game.instrumentDialog.notes[d];if(e.note){if("string"===typeof c){var f=ig.game.strings.replaceAll(e.note,"s","#"),g=f+e.octave;if(c==f||c==g){ig.game.instrumentDialog.playSound(e);this.O5417+=3;break}}}else if(e.kitNumber&&e.kitNumber==c){ig.game.instrumentDialog.playSound(e);this.O5417+=3;break}}}},O2444:function(a){for(var b in this.enumType){var c=
this.enumType[b];a=ig.game.strings.replaceAll(a,'"type":'+c+",",'"type":enumType.'+b+",");a=ig.game.strings.replaceAll(a,'"type":'+c+"}",'"type":enumType.'+b+"}")}for(b in this.enumStance)c=this.enumStance[b],a=ig.game.strings.replaceAll(a,'"stance":'+c+",",'"stance":enumStance.'+b+","),a=ig.game.strings.replaceAll(a,'"stance":'+c+"}",'"stance":enumStance.'+b+"}");for(b in this.enumMode)c=this.enumMode[b],a=ig.game.strings.replaceAll(a,'"mode":'+c+",",'"stance":enumMode.'+b+","),a=ig.game.strings.replaceAll(a,
'"mode":'+c+"}",'"stance":enumMode.'+b+"}");return a},O9967:function(){this.control.leftOnce&&(this.control.left=!1,this.control.leftOnce=!1);this.control.rightOnce&&(this.control.right=!1,this.control.rightOnce=!1);this.control.upOnce&&(this.control.up=!1,this.control.upOnce=!1);this.control.downOnce&&(this.control.down=!1,this.control.downOnce=!1);this.control.actionOnce&&(this.control.action=!1,this.control.actionOnce=!1)},O5978:function(a){for(var b in this.anonymizedValuesPerSession){var c=b.substr(1);
a=ig.game.strings.replaceAll(a,"["+this.anonymizedValuesPerSession[b]+"]",c)}return a},O4514:function(a){a&&"string"===typeof a&&ig.game.O3957&&(!this.O1734||this.O1734.delta()>=this.O4610)&&ig.game.O1257&&(this.O1734=new ml.Timer,a=this.O5978(a),a=a.substr(0,22),ig.game.O5058.O7948(a),0===a.toLowerCase().indexOf("to ")&&ig.game.O5058.O4317(a),ig.game.O3957.O6339(a),ig.game.O2116.O7884(ig.game.O1257,"says",a))},O9871:function(a){a&&"string"===typeof a&&ig.game.O1257&&ig.game.O3957&&(!this.O2716||
this.O2716.delta()>=this.O4610)&&(ig.game.O2116.O7884(ig.game.O1257,"does",a),ig.game.O3957.O6339(a))},O7979:function(a){this.O8112&&(ig.game.userScriptEditor&&ig.game.userScriptEditor.isOpen?(ig.game.userScriptEditor.O5966(a.message,a.lineNumber,a.columnNumber),this.unload()):(ig.game.O1257&&ig.game.O7747.O5849(ig.game.O1257.attachments.br.id,this).done(function(b){var c=b&&b.name;b=b&&b.id;var d="line "+a.lineNumber+", "+a.message.toLowerCase(),e="this brain has an issue";b!=ig.game.O1257.O2970&&
(e="this brain by "+c+" has an issue");ig.game.O1257.say(e);setTimeout(function(){ig.game.O1257.say('"'+d+'"')},1500)}),this.unload(!0)))},O1635:function(){return this.O1208().split("\n").length},O9249:function(){var a={sight:{placements:[],entities:[],scope:this.O7590},touch:{left:null,right:null,top:null,bottom:null,center:null},hearing:[],energy:0,x:null,y:null,width:null,height:null,velocity:{},name:null,id:null,control:{},status:{isLoggedIn:!1,isEditorHere:!1}},b=ig.game.O1257;if(b){a.sight.placements=
this.O5614({x:b.pos.x+b.O4188Offset.x,y:b.pos.y+b.O4188Offset.y});a.sight.entities=this.O5735();a.touch=this.O2808(b);a.hearing=this.O4573();a.control=this.O2523();a.name=this.O2071(b.screenName);a.energy=b.health;a.id=this.O6080(b.O2970);a.status.isLoggedIn=ig.game.isFullAccount;a.status.isEditorHere=ig.game.isEditorHere;var c=this.O9854(b);a.x=c.x;a.y=c.y;a.width=b.size.x;a.height=b.size.y;a.velocity.x=this.getFormattedFloat(b.vel.x);a.velocity.y=this.getFormattedFloat(b.vel.y);a.direction=b.O8393.flip.x?
1:-1;b.attachments.b&&(a.body=this.O9108(b.attachments.b),a.body&&(a.body.id=this.O6080(a.body.id),a.body.name=""));b.attachments.w&&(a.wearable=this.O9108(b.attachments.w));b.attachments.m&&(a.mountable=this.O9108(b.attachments.m));b.attachments.h&&(a.holdable=this.O9108(b.attachments.h));b.attachments.br&&(a.brain=this.O9108(b.attachments.br))}return a},O2071:function(a){return"["+this.O6080(a)+"]"},O2523:function(){var a={},b;for(b in this.stateSinceLast)a[b]=this.stateSinceLast[b],this.stateSinceLast[b]=
!1;for(b in this.pressedSinceLast)a[b+"Once"]=this.pressedSinceLast[b],this.pressedSinceLast[b]=!1;return a},O9854:function(a){return{x:a.pos.x+a.size.x/2,y:a.pos.y+a.size.y/2}},O2808:function(a){var b={},c=this.O9854(a),d=a.size.x/2+4,e=a.size.y/2+4,f=a.O8393.flip.x?1:-1;var g={x:c.x-d,y:c.y};b.left=this.O5153(ig.game.O6112.O2052(g));g={x:c.x+d,y:c.y};b.right=this.O5153(ig.game.O6112.O2052(g));g={x:c.x,y:c.y-e};b.top=this.O5153(ig.game.O6112.O2052(g));g={x:c.x-d,y:c.y-e};b.topLeft=this.O5153(ig.game.O6112.O2052(g));
g={x:c.x+d,y:c.y-e};b.topRight=this.O5153(ig.game.O6112.O2052(g));g={x:c.x-d,y:c.y+e};b.bottomLeft=this.O5153(ig.game.O6112.O2052(g));g={x:c.x+d,y:c.y+e};b.bottomRight=this.O5153(ig.game.O6112.O2052(g));g={x:c.x+d*f,y:c.y-e};b.topForward=this.O5153(ig.game.O6112.O2052(g));g={x:c.x+d*f,y:c.y};b.forward=this.O5153(ig.game.O6112.O2052(g));g={x:c.x+d*f,y:c.y+e};b.bottomForward=this.O5153(ig.game.O6112.O2052(g));b.bottom=this.O5153(a.O5479);b.center=this.O5153(a.O4075);return b},O8807:function(a){return a?
-1:1},O7397:function(a){return[0,90,180,270][a]},O9108:function(a){var b=null;a&&(b={},b.type=this.O8331(a.base),b.id=a.id,b.name=a.name,b.attributes=a.attributes?a.attributes:{});return b},O4602:function(a){var b="";if(a){a=String(a).toLowerCase();for(var c=0;c<a.length;c++){var d=a.charAt(c);d="abcdefghijklmnopqrstuvwxyz".indexOf(d);0<=d&&(b+="0123456789zyxwvutsrqponmlk".charAt(d))}if(12<b.length)b=b.substr(12);else for(;12>b.length;)b+="0"}return b},O8331:function(a){var b=0;a&&window.Item.prototype.BASE_TYPES[a]&&
(b=this.enumType[window.Item.prototype.BASE_TYPES[a].publicKey]);return b},O5614:function(a){var b=[];a=ig.game.O6112.O2337(a.x,a.y);for(var c=-this.O7590;c<=this.O7590;c++){var d=c+this.O7590;b[d]=[];for(var e=-this.O7590;e<=this.O7590;e++){var f=e+this.O7590,g={x:a.x+c,y:a.y+e},h=ig.game.O6112.O2132(g.x,g.y);h.x+=ig.game.O2953;h.y+=ig.game.O2953;(g=this.O5153(ig.game.O6112.O8704(g),g,h))&&(b[d][f]=g)}}return b},O5153:function(a,b,c){var d=null;if(a&&a.thing){d=this.O9108(a.thing);var e=1===a.flip;
e&&(d.isFlipped=e);e=this.O7397(a.rotation);0!=e&&(d.rotation=e);c&&(d.x=c.x+ig.game.O2953,d.y=c.y+ig.game.O2953);if(c=0<=[this.enumType.solid,this.enumType.flexible,this.enumType.slidey,this.enumType.slope,this.enumType.slideySlope,this.enumType.sticky,this.enumType.bouncy,this.enumType.bouncyTilt].indexOf(d.type)||d.type==this.enumType.oneWay&&0==e)d.isSolid=c;if(c=0<=[this.enumType.deadly,this.enumType.deadlyMoving,this.enumType.harmful,this.enumType.changingHarmful,this.enumType.deadlyEmerging].indexOf(d.type)||
ig.game.O2082.O2732(d.attributes))d.isHarmful=c;if(b)switch(a.thing.base){case "CRUMBLING":if(a=this.O2205(b))if(c=!(a.state==a.STATES.CRUMBLED||a.state==a.STATES.SMASHED))d.isSolid=c;break;case "GATHER":if(a=this.O2205(b))d.isGathered=a.state==a.STATES.GATHERED;break;case "OPENABLE":if(a=this.O2205(b))if(c=a.state!=a.STATES.OPEN)d.isSolid=c}}return d},O2205:function(a){var b=null,c=ig.game.O5119.default;if(c)for(var d=0;d<c.length;d++){var e=c[d];if(e.O5682&&e.O5682.x==a.x&&e.O5682.y==a.y){b=e;break}}return b},
O6080:function(a){a="_"+a;this.anonymizedValuesPerSession[a]||(this.anonymizedValuesPerSession[a]=ig.game.strings.O4619(32));return this.anonymizedValuesPerSession[a]},getFormattedFloat:function(a){a!=parseInt(a)&&(a=a.toFixed(2),a=parseFloat(a));return a},O5735:function(a){a||=ig.game.O1257;var b=[];if(ig.game.O5119.player)for(var c=0;c<ig.game.O5119.player.length;++c){var d=ig.game.O5119.player[c],e={};e.type=this.enumType.being;e.id=this.O6080(d.O2970);e.name=this.O2071(d.screenName);var f=this.O5706[d.O2970];
if(f)for(var g in f)e[g]=f[g];if(f=this.O7514(d))e.stance=f;f=this.O9854(d);e.x=this.getFormattedFloat(f.x);e.y=this.getFormattedFloat(f.y);e.velocity={x:this.getFormattedFloat(d.vel.x),y:this.getFormattedFloat(d.vel.y)};e.width=d.size.x;e.height=d.size.y;e.isMe=a.O2970==d.O2970;d.informBrainDidAction&&(e.acts=!0,delete d.informBrainDidAction);d.attachments&&(d.attachments.b&&(e.body=this.O9108(d.attachments.b),e.body&&(e.body.id=this.O6080(e.body.id),e.body.name="")),d.attachments.w&&(e.wearable=
this.O9108(d.attachments.w)),d.attachments.m&&(e.mountable=this.O9108(d.attachments.m)),d.attachments.h&&(e.holdable=this.O9108(d.attachments.h)),d.attachments.br&&(e.brain=this.O9108(d.attachments.br)));b.push(e)}if(ig.game.O5119.foreground)for(c=0;c<ig.game.O5119.foreground.length;++c)d=ig.game.O5119.foreground[c],e={},e.type=d.O5459?this.enumType.emission:this.enumType.item,e.id=d.id,e.fromId=this.O6080(d.originatorId),e.name=d.O4910,e.attributes=d.attributes?d.attributes:{},e.width=d.size.x,e.height=
d.size.y,f=this.O9854(d),e.x=this.getFormattedFloat(f.x),e.y=this.getFormattedFloat(f.y),e.velocity={x:this.getFormattedFloat(d.vel.x),y:this.getFormattedFloat(d.vel.y)},b.push(e);return b},O7514:function(a){var b=null;a.O9165==a.O4583.SWIMMING?b=this.enumStance.swimming:a.O9165==a.O4583.CLIMBING?b=this.enumStance.climbing:a.O8393==a.anims.creating?b=this.enumStance.creating:a.isLying?b=this.enumStance.lying:a.isSitting&&(b=this.enumStance.sitting);return b},O4573:function(){var a=[];if(ig.game.O5119.player)for(var b=
0;b<ig.game.O5119.player.length;++b){var c=ig.game.O5119.player[b];if(c.O4855)for(var d=0;d<c.O4855.O9300.length;d++){var e=c.O4855.O9300[d];if(e.moving&&!e.wasHeardByExtension&&"_thumbsUp"!=e.keys[0]&&"_thumbsDown"!=e.keys[0]){e.wasHeardByExtension=!0;var f={};f.content=e.O4362;f.type=this.enumType.speech;f.fromId=this.O6080(c.O2970);a.push(f)}}}for(b=0;b<this.O9478.length;b++)f={},f.content=this.O9478[b],f.type=this.enumType.sound,a.push(f);return a},O2535:function(a,b,c){this.O8112&&!a.O8088&&
(a=a.O2970,this.O5706[a]||(this.O5706[a]={}),this.O5706[a][b]=c?c:!0)},O7411:function(a){this.O8112&&a&&-1===a.indexOf("footsteps")&&(a=ig.game.strings.replaceAll(a,ig.game.O1946+"media/sounds/",""),a=ig.game.strings.replaceAll(a,"/"," "),a=ig.game.strings.replaceAll(a,".*",""),a=ig.game.strings.replaceAll(a,"_"," "),-1===["pick up","put down","click","cannot do this"].indexOf(a)&&this.O9478.push(a))},userScriptEditorRunStarted:function(a){var b=!1,c=ig.game.O1257.attachments.br;c&&(!c.textSize||
c.attributes&&c.attributes.offersEditing)?b=this.O7960(a):ig.game.alertDialog.open("You need to equip an empty brain first");return b},userScriptEditorRunEnded:function(){this.unload()},userScriptEditorOpenHelp:function(){ml.Misc.openUrl("/info-brain")},getBaseTypeFromEnumType:function(a){for(var b in this.enumType)if(this.enumType[b]===a){for(var c in window.Item.prototype.BASE_TYPES)if(window.Item.prototype.BASE_TYPES[c].publicKey==b)return c;break}return null}})});ig.baked=!0;
ig.module("game.core.O6898").defines(function(){window.O1197=ig.Class.extend({lightSpreadFactorDefault:490,rgba:null,rgbaTop:null,O9050:null,O2277:null,O8369:null,O6679:null,O9600:0,O6279:.8,alphaMax:0,O6449:0,O5286:.075,lightGroups:{"default":1,top:2,vignette:3,O9712:4,O4211:5},O6019:0,O2832:0,O2066:null,O2704:null,shroudOpacityDirection:0,shroudColor:"255,255,255",O7258:null,O9538:!1,O4527:!1,init:function(){this.alphaMax=this.O6279;ig.ua.isDarkMode&&(this.shroudColor="0,0,0")},update:function(){var a=
1==ig.game.O6550,b=this.O6509(ig.game.O5119.light,this.lightGroups.default);if(null==this.rgba||a)this.rgba=b;this.O4864(this.rgba,b);b=this.O6509(ig.game.O5119.light,this.lightGroups.top);if(null==this.rgbaTop||a)this.rgbaTop=b;this.O4864(this.rgbaTop,b);b=this.O6509(ig.game.O5119.light,this.lightGroups.vignette);if(null==this.O9050||a)this.O9050=b;this.O4864(this.O9050,b);b=this.O6509(ig.game.O5119.light,this.lightGroups.O9712);if(null==this.O2277||a)this.O2277=b;this.O4864(this.O2277,b);b=this.O6509(ig.game.O5119.light,
this.lightGroups.O4211);if(null==this.O8369||a)this.O8369=b;this.O4864(this.O8369,b);this.O3221();this.O9972()},O6509:function(a,b){var c=[];var d=this.alphaMax,e=this.lightSpreadFactorDefault,f=b==this.lightGroups.vignette||b==this.lightGroups.O9712;b==this.lightGroups.default?this.O6449=this.O6279:f&&(d=1,e=650);if(a)for(var g=0;g<a.length;g++){var h=a[g];if(h.O4220==b&&h.rgba){var k=h.pos.x+8-(ig.game.screen.x+ig.system.widthHalf),l=h.pos.y+8-(ig.game.screen.y+ig.system.O2175);k=(1-Math.sqrt(k*
k+l*l)/e).limit(0,d);0<k&&h.rgba&&(l=ig.game.O4507(h.rgba),l[3]*=k,0<l[3]&&(h.attributes&&h.attributes.fullyOpaque&&(this.O6449+=.1*k),c.push(l),h.O4870&&c.push(l)))}}1<this.O6449&&(this.O6449=1);return 0<c.length?f?this.O6605(c):this.O7524(c):[0,0,0,0]},O3221:function(){this.alphaMax>this.O6449?(this.alphaMax-=.01,this.alphaMax<this.O6449&&(this.alphaMax=this.O6449)):this.alphaMax<this.O6449&&(this.alphaMax+=.01,this.alphaMax>this.O6449&&(this.alphaMax=this.O6449))},O4864:function(a,b){for(var c=
6,d=a.length-1,e=0;e<=d;e++)e==d&&(c=.03),a[e]=Number(a[e]),b[e]=Number(b[e]),a[e]<b[e]?(a[e]+=c,a[e]>b[e]&&(a[e]=b[e])):a[e]>b[e]&&(a[e]-=c,a[e]<b[e]&&(a[e]=b[e]))},draw:function(){0<this.rgbaTop[3]?this.O4930():this.O3251()},O4481:function(){if(this.O8369&&0<this.O8369[3]){var a=this.O3436(500);a.player?(a=a.distance/500,this.O5286+=.075,a=1-.925*a,this.O5286>a&&(this.O5286=a)):(this.O5286-=.075,.075>this.O5286&&(this.O5286=.075));this.O4081(this.O8369,3,1,.5,this.O5286)}else this.O2277&&0<this.O2277[3]?
this.O4081(this.O2277,3,1,.5):this.O9050&&0<this.O9050[3]&&this.O4081(this.O9050,2,.4,.6);this.O5277();this.O7287()},O3436:function(a){var b={player:null,distance:null};if(ig.game.O1257)if(ig.game.O1257.O1331("brightens"))b={player:ig.game.O1257,distance:0};else{var c=ig.game.O5119.player;if(c)for(var d=0;d<c.length;d++){var e=c[d];if(!e._killed&&e.O1331("brightens")){var f=ig.game.O1257.O2144(e);f<a&&(null==b.distance||f<b.distance)&&(b={player:e,distance:f})}}}return b},O4081:function(a,b,c,d,e){var f=
ig.system.realWidth>ig.system.O5809?ig.system.realWidth:ig.system.O5809,g=ig.system.realWidth/2,h=ig.system.O5809/2,k=a[3];k=this.O6081(k*b,0,c);b=0;void 0!==e&&(b=k-e,0>b&&(b=0));e=ig.system.context;e.beginPath();c=e.createRadialGradient(g,h,1,g,h,f);a=this.O6877(a);a.pop();a=a.join(",");c.addColorStop(0,"rgba("+a+","+b+")");c.addColorStop(d,"rgba("+a+","+k+")");e.fillStyle=c;e.arc(g,h,f,0,ig.game.fullAngle,!1);e.fill()},O3251:function(){ig.system.context.fillStyle="rgba("+this.O6877(this.rgba).join(",")+
")";ig.system.context.fillRect(0,0,ig.system.realWidth,ig.system.O5809)},O4930:function(){var a=0<this.rgbaTop[3]?this.rgbaTop[3]/this.alphaMax:0,b=null;0<=this.rgbaTop[0]||0<=this.rgbaTop[1]||0<=this.rgbaTop[2]?(b=this.O6605([this.O6877(this.rgbaTop),this.O6877(this.rgba)]),b=this.O5022(b,1+.4*a),b=this.O1118(b,Math.floor(70*a))):b=this.O6605([this.rgbaTop,this.O6877(this.rgba)]);ig.system.realWidth&&ig.system.O5809&&(a=ig.system.context.createLinearGradient(0,0,0,ig.system.O5809),a.addColorStop(0,
"rgba("+this.O6877(b).join(",")+")"),a.addColorStop(.5,"rgba("+this.O6877(this.rgba).join(",")+")"),ig.system.context.fillStyle=a,ig.system.context.fillRect(0,0,ig.system.realWidth,ig.system.O5809))},O6877:function(a){return[this.O6081(a[0],0,255,!0),this.O6081(a[1],0,255,!0),this.O6081(a[2],0,255,!0),this.O6081(a[3],0,1)]},O6081:function(a,b,c,d){return jQuery.isNumeric(a)?(a=d?Math.floor(a):parseFloat(a.toFixed(4)),a.limit(b,c)):b},O5022:function(a,b){for(var c={r:a[0],g:a[1],b:a[2]},d=0;3>d;d++){var e=
ml.Misc.O5498(c);e.saturation*=b;e=ml.Misc.O8488(e);e=[e.r,e.g,e.b,a[3]]}return e},O1118:function(a,b){for(var c=[a[0],a[1],a[2],a[3]],d=0;2>=d;d++)c[d]=(a[d]+b).limit(0,255);return c},O7524:function(a){var b=a.length;var c=[0,0,0];for(var d=0,e=0;e<b;e++){for(var f=a[e][3],g=0;3>g;g++)c[g]+=f*a[e][g];d+=f}a=Math.max(c[0],c[1],c[2]);255<a&&(a/=255,c[0]/=a,c[1]/=a,c[2]/=a);return[Math.floor(c[0]),Math.floor(c[1]),Math.floor(c[2]),Math.min(Math.floor(100*d)/100,this.alphaMax)]},O6605:function(a){var b=
null,c=a.length;if(2<=c){for(var d=0,e=null,f=0;f<c;f++)if(null==e||a[f][3]>e)e=a[f][3];if(0<e){b=1/e;var g=[0,0,0];for(f=0;f<c;f++){var h=a[f][3]*b;d+=h;for(var k=0;3>k;k++)g[k]+=h*a[f][k]}for(k=0;3>k;k++)g[k]/=d,g[k]=Math.max(g[k],0),g[k]=Math.min(g[k],255);b=[Math.floor(g[0]),Math.floor(g[1]),Math.floor(g[2]),e]}}null==b&&(b=[a[0][0],a[0][1],a[0][2],a[0][3]]);return b},O9203:function(a){if(0==this.O6019){var b=a&&a.O8088,c=!0;b&&(this.O2704?c=!1:(this.O2704=new ml.Timer,c=!0,ig.game.O7836.O3660()));
c&&(this.O6019=0,this.O2832=300,this.O2066=a,ig.ua.mobile||ig.game.sounds.O9396(ig.game.sounds.click,this.O2066),b||ig.game.sounds.O9396(ig.game.sounds.whoosh,this.O2066))}},O7287:function(){if(0!=this.O2832&&this.O2066&&(this.O6019+=this.O2832*ig.system.tick,0<this.O2832&&40<=this.O6019?(this.O6019=40,this.O2832=-40):0>this.O2832&&0>this.O6019&&(this.O2832=this.O6019=0),0<this.O6019&&!ig.game.O1682)){var a=this.O9630(this.O2066);ig.system.context.beginPath();var b=0<this.O6019?this.O6019/100:0,c=
ig.system.context.createRadialGradient(a.x,a.y,15*ig.system.scale,a.x,a.y,30*ig.system.scale);c.addColorStop(0,"rgba(255,255,255,"+this.O6081(b,0,1)+")");c.addColorStop(1,"rgba(255,255,255,0)");ig.system.context.fillStyle=c;ig.system.context.arc(a.x,a.y,40*ig.system.scale,0,2*Math.PI,!1);ig.system.context.fill();ig.system.context.closePath()}this.O2704&&(a=ig.game.O1257&&2<=ig.game.O1257.rank?3:10,this.O2704.delta()>=a&&(this.O2704=null))},O9630:function(a){return{x:(a.pos.x-ig.game._rscreen.x+3)*
ig.system.scale,y:(a.pos.y-ig.game._rscreen.y)*ig.system.scale}},O2321:function(a){return(this.pos.y+a-this.offset.y-ig.game._rscreen.y+offset)*ig.system.scale},fadeOutShroud:function(a){this.shroudOpacityDirection!=-1&&(ig.game.O6550=1,this.shroudOpacityDirection=-1,this.O7258=a)},fadeInShroud:function(a,b){1!=this.shroudOpacityDirection&&(this.O4527=!!b,ig.game.O6550=0,this.shroudOpacityDirection=1,this.O7258=a,this.O9538=!1)},O7693:function(){0<ig.game.O6550&&1>=ig.game.O6550&&(ig.system.context.fillStyle=
"rgba("+this.shroudColor+","+parseFloat(ig.game.O6550.toFixed(4))+")",ig.system.context.fillRect(0,0,ig.system.realWidth,ig.system.O5809))},O9972:function(){if(0!=this.shroudOpacityDirection){var a=.9;a=this.O4527?.5*a:a*(0<this.shroudOpacityDirection?4:2);ig.game.O6550+=this.shroudOpacityDirection*a*ig.system.tick;0>ig.game.O6550?(this.shroudOpacityDirection=ig.game.O6550=0,this.O7258&&(this.O7258(),this.O7258=null)):1<ig.game.O6550&&(ig.game.O6550=1,this.shroudOpacityDirection=0,this.O7258&&(this.O7258(),
this.O7258=null))}},O5277:function(){if(this.O6679){this.O6679.energy+=this.O6679.energyVel;this.O6679.energy>=this.O6679.energyMax&&0<this.O6679.energyVel&&(this.O6679.energyVel=-this.O6679.energyVel,this.O6679.energy=this.O6679.energyMax);var a=(.01*this.O6679.energy).limit(0,.35);ml.Misc.O5847("lighter");ig.system.context.fillStyle="rgba("+this.O6679.rgb+","+a+")";ig.system.context.fillRect(0,0,ig.system.realWidth,ig.system.O5809);ml.Misc.O3715();0>=this.O6679.energy&&(this.O6679=null)}else ig.game.O1257&&
ig.game.O1257.O9832("shaded")&&(a=ig.game.O1257.attachments[ig.game.attachmentManager.slots.WEARABLE],a.rgb&&"string"==typeof a.rgb&&(ig.system.context.fillStyle="rgba("+a.rgb+",.35)",ig.system.context.fillRect(0,0,ig.system.realWidth,ig.system.O5809)))},O6585:function(a,b){null==this.O6679&&(b||=45,this.O6679={rgb:a,energy:1,energyVel:1,energyMax:b})}})});ig.baked=!0;
ig.module("game.entities.immobile.deletionmarker").requires("impact.entity").defines(function(){window.EntityDeletionMarker=ig.Entity.extend({size:{x:19,y:19},offset:{x:0,y:0},O2027:0,type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,init:function(a,b,c){this.parent(a,b,c);this.addAnim("main",1,[0])},update:function(){ig.game.decorator.O4822(this.pos)},draw:function(){},O2550:function(a){},check:function(a){},O4822:function(){if(.5>=100*Math.random()){var a=pos.x+
9+ig.game.O4293(-4,4),b=pos.y+9+ig.game.O4293(-4,4),c={x:ig.game.O4293(-1,1),y:ig.game.O4293(-1,1)};ig.game.O9759(EntitySpot,a,b,{O5856:ig.game.O8159.dust,O7942:.3,O4405:70,O2329:3,fadingInc:1,vel:c})}}})});ig.baked=!0;
ig.module("game.core.entitymanager").requires("game.entities.immobile.deletionmarker").defines(function(){window.EntityManager=ig.Class.extend({activeEntities:{},O6864:{},init:function(){},O9325:function(a,b,c){this.O5745(b)||this.O8133(b)||this.spawnEntity(a,b,c)},spawnEntity:function(a,b,c){b&&this.testEntityLoc&&b.x==this.testEntityLoc.x&&b.y==this.testEntityLoc.y&&console.log("spawnEntity FOR OUR TEST ENTITY");var d=ig.game.O4261.getItemBasic(a.tid,"entity_spawn"),e=ig.game.O6112.O2132(b.x,b.y),
f=this;f.activeEntities[f.O4425(b)]="queued";jQuery.when(d.imagesBeingGeneratedPromise,d.basicDataLoading.promise()).then(function(){var g=d.O4927(),h={thingTypeId:a.tid,animSheet:f.getAnimationForEntity(d,a.rotation,a.flip),rotation:a.rotation,attributes:d.attributes,O5682:b};f.O5746(g,d,h,c);g=ig.game.spawnEntity(g,e.x,e.y,h);f.activeEntities[f.O4425(b)]=g;g.zIndex=-1;f.O6864[f.O4425(b)]&&(h=f.O6864[f.O4425(b)],h.pos&&(g.pos=h.pos),h.vel&&(g.vel=h.vel),"function"==typeof g.O3418&&g.O3418(h.sta,
!0),delete f.O6864[f.O4425(b)])})},O5746:function(a,b,c,d){var e=a&&0<="EntityLiving EntityMedium EntityLivanim EntityEnvironm EntityStackinstr EntityActivator EntityFlexible EntityMusical EntityPortal EntityPortalr EntityMusicsheet EntityReadable EntityInteract EntityDynathing EntityHappening EntityHolder EntityCrumbling EntityBrain EntityStackwearb EntityHelper EntityMultithing".split(" ").indexOf(a);void 0!==b.musicData&&(c.musicData=b.musicData);void 0!==b.specs&&(c.specs=b.specs);void 0!==b.rptype&&
(c.rptype=b.rptype);void 0!==b.url&&(c.url=b.url);void 0!==b.pitch&&(c.pitch=b.pitch);void 0!==b.rgb&&(c.rgb=b.rgb);void 0!==b.rgb2&&(c.rgb2=b.rgb2);void 0!==b.text&&(c.text=b.text);void 0!==b.soundId&&(c.soundId=b.soundId);void 0!==b.textSize&&(c.textSize=b.textSize);void 0!==b.reactsTo&&(c.reactsTo=b.reactsTo);void 0!==b.checksNears&&(c.checksNears=b.checksNears);void 0!==b.hasId&&(c.hasId=b.hasId);void 0!==b.emitsId&&(c.emitsId=b.emitsId);void 0!==b.secPerTransform&&(c.secPerTransform=b.secPerTransform);
void 0!==b.environmentId&&(c.environmentId=b.environmentId);void 0!==b.boundingBox&&(c.boundingBox=b.boundingBox);void 0!==b.boundingBox2&&(c.boundingBox2=b.boundingBox2);void 0!==b.throwDirection&&(c.throwDirection=b.throwDirection);"EntityHolder"==a&&b.useKeyword&&(c.useKeyword=b.useKeyword);b.backTileCount&&(c.backTileCount=b.backTileCount);e&&void 0!==b.name&&(c.givenName=b.name);d&&(c.O4000=!0)},O7891:function(a){if(a){var b=ig.game.O4261.getItemBasic(a,"entity_spawn_agi"),c=this;jQuery.when(b.imagesBeingGeneratedPromise,
b.basicDataLoading.promise()).then(function(){var d={thingTypeId:a,animSheet:c.getAnimationForEntity(b,0,0),rotation:0,attributes:b.attributes,O5682:null,O5080:!0};void 0!==b.name&&(d.givenName=b.name);void 0!==b.checksNears&&(d.checksNears=b.checksNears);void 0!==b.textSize&&(d.textSize=b.textSize);void 0!==b.reactsTo&&(d.reactsTo=b.reactsTo);void 0!==b.boundingBox&&(d.boundingBox=b.boundingBox);ig.game.O4517=new ig.global.EntityInteract(0,0,d)})}},O1381:function(a,b,c,d,e){var f=ig.game.O4261.getItemBasic(a.tid,
"entity_spawn_sm"),g=this;g.activeEntities[g.O4425(b)]="queued";d||={x:0,y:0};c||=ig.game.O6112.O2132(b.x,b.y);jQuery.when(f.imagesBeingGeneratedPromise,f.basicDataLoading.promise()).then(function(){var h=f.O4927();try{var k=ig.game.spawnEntity(h,c.x,c.y,{thingTypeId:a.tid,animSheet:g.getAnimationForEntity(f,a.rotation,a.flip),vel:d,state:e,throwDirection:f.throwDirection,attributes:f.attributes,rotation:a.rotation,O5682:b});g.activeEntities[g.O4425(b)]=k;k.zIndex=-1}catch(l){console.log("Problem instantiating state-managed "+
h+". Old type?")}})},O3233:function(a){if(!this.activeEntities[this.O4425(a)]){var b=ig.game.O6112.O2132(a.x,a.y);b=ig.game.spawnEntity(EntityDeletionMarker,b.x,b.y,{animSheet:{}});this.activeEntities[this.O4425(a)]=b;b.zIndex=-1;b.O5682=a}},O1343:function(a){this.O8933(a)&&this.O2525(a.x,a.y)},O8933:function(a){return this.activeEntities[this.O4425(a)]&&this.activeEntities[this.O4425(a)]instanceof EntityDeletionMarker},O5745:function(a){return this.activeEntities[this.O4425(a)]},O8133:function(a){return"queued"==
this.activeEntities[this.O4425(a)]},getAnimationForEntity:function(a,b,c){b=a.getImageForRotationFlip(b,c);b=new ml.Image(null,null,null,b);var d=a.img.width;c=a.img.height;if("MOTION"==a.base||"INTERMOT"==a.base||"HOLDER"==a.base)d=Math.floor(a.img.width/3);else if("DYNATHING"==a.base||"HAPPENING"==a.base)d=Math.floor(a.img.width/29),d=Math.floor(a.img.width/d);else if("MUSICSHEET"==a.base)d=Math.floor(a.img.width/32),d=Math.floor(a.img.width/d);else if("FARBACK"==a.base||"TRANSFORM"==a.base)d=Math.floor(a.img.width/
ig.game.O4975),d=Math.floor(a.img.width/d);else if(0<=ig.game.O6703.indexOf(a.base)||"DECOFB"==a.base||"MULTITHING"==a.base)d=Math.floor(a.img.width/2);else if(d>ig.game.O9925){d=ig.game.maxCells;if("VIEWABLE"==a.base||"GLOW"==a.base)d=Math.floor(a.img.width/ig.game.O4975);else if("DYNATHING"==a.base||"HAPPENING"==a.base)d=Math.floor(a.img.width/ig.game.O9925);else if("MUSICSHEET"==a.base)d=Math.floor(a.img.width/ig.game.O9925);else if("DECOBIG"==a.base||"DECOVBIG"==a.base||"POINTER"==a.base||"PLACENAME"==
a.base||"LIVING"==a.base)d=1;d=Math.floor(a.img.width/d)}return new ml.AnimationSheet(null,d,c,b)},O2525:function(a,b){var c={x:a,y:b},d=this.activeEntities[this.O4425(c)];d&&"queued"!=d?("function"==typeof d.tidyUp&&d.tidyUp(),ig.game.O2525(d),delete this.activeEntities[this.O4425(c)]):(console.log("entityManager.O2525 called for location for which entityManager does not have an entity"),window.setTimeout(function(){ig.game.entityManager.O2525(a,b)},ig.game.O4293(1E3,2E3)))},O4425:function(a){return a.x+
","+a.y},update:function(){},O6371:function(a){if(this.O5745(a.loc))this.O8133(a.loc)?this.O6864[this.O4425(a.loc)]=a:a.evt?this.O4002(a.loc,a.evt):this.O5414(a.loc,a.pos,a.vel,a.sta);else{var b=ig.game.O6112.O8617(a.loc);b&&this.O1381(b,a.loc,a.pos,a.vel,a.sta)}},O5414:function(a,b,c,d){var e=this.activeEntities[this.O4425(a)];e?this.O8133(a)?console.error("We are trying to update an entity thats queued for loading!"):(b&&(e.pos=b),c&&(e.vel=c),"function"==typeof e.O3418&&e.O3418(d)):console.error("we dont know about this entity, but should do!")},
O4002:function(a,b){(a=this.activeEntities[this.O4425(a)])?"function"==typeof a.O8166&&a.O8166(b):console.error("we dont know about this entity, but should do!")},getMovingItemUnderMouse:function(){var a,b;for(b in this.activeEntities)if(this.activeEntities.hasOwnProperty(b)&&(a=this.activeEntities[b])&&a.O2011&&this.O2072Entity(a))return a},O5865:function(){var a,b;for(b in this.activeEntities)this.activeEntities.hasOwnProperty(b)&&(a=this.activeEntities[b],"queued"!=a&&!ig.game.O4873.O5251(a)&&
this.O2589(a,b))},O2589:function(a,b){ig.game.O2525(a);delete this.activeEntities[b]},O2072Entity:function(a){a=ig.game.O6112.O2094(a.pos.x,a.pos.y);return ig.game.O4774.O8299(a.x,a.y,a.x+ig.game.O9925,a.y+ig.game.O9925)},O9015:function(){return this.activeEntities},O7414:function(a){var b=[],c;for(c in this.activeEntities)if(this.activeEntities.hasOwnProperty(c)){var d=this.activeEntities[c];if(d instanceof EntityPortal||d instanceof EntityPortaldir){var e=!0;a?e=d.thingTypeId==a:d.attributes&&d.attributes.forSameOnly&&
(e=!1);e&&b.push(d)}}return b},O2133:function(a){var b=[],c;for(c in this.activeEntities)this.activeEntities.hasOwnProperty(c)&&(this.activeEntities[c]instanceof a||this.activeEntities[c]instanceof a)&&b.push(this.activeEntities[c]);return b}})});ig.baked=!0;
ig.module("game.core.playermanager").defines(function(){window.PlayerManager=ig.Class.extend({localPlayerCount:0,myPeople:[],O8492:[],O7738:[],O5449:null,init:function(){this.O5449=this.O4182()},O4182:function(){var a=jQuery.Deferred(),b=this,c=ig.game.O9817.O4384(this);c.done(function(d){b.myPeople=d&&d.friends;b.O8492=d&&d.blocked;a.resolve()});c.fail(function(d,e,f){ig.game.errorManager.O3802("Loading issue (My People)")});return a.promise()},O8857:function(){var a=jQuery.Deferred(),b=this,c=ig.game.O9817.O1389(this);
c.done(function(d){b.myPeople=d;a.resolve()});c.fail(function(d,e,f){ig.game.errorManager.O3802("Loading issue (My People Ordered)")});return a.promise()},O4326:function(){this.localPlayerCount++;ig.game.O2141&&ig.game.O2141.O3817(!0)},O1854:function(){this.localPlayerCount--;1>this.localPlayerCount&&ig.game.O2141&&ig.game.O2141.O3817(!1)},O6867:function(a){a&&ig.game.O1329&&ig.game.O1329.O9145&&ig.game.O1329.O9145(a.O2970);ig.game.O2525(a);this.O1854()},O8683:function(a){ig.game.O4873.O1071(a)||
(ig.game.O2525(a),this.O1854())},O1906:function(a,b){var c=jQuery.Deferred();a=-1!==this.myPeople.indexOf(a);c.resolveWith(b,[a]);return c.promise()},O7650:function(a){return 0<=this.myPeople.indexOf(a)},O1163:function(a,b){var c=jQuery.Deferred();a=-1!==this.O8492.indexOf(a);c.resolveWith(b,[a]);return c.promise()},O5167:function(a,b){return-1!==this.O8492.indexOf(a)},O6681:function(a,b,c){var d=jQuery.Deferred(),e=a*(b-1)+b;a=this.myPeople.slice(a*(b-1),e);d.resolveWith(c,[a,this.myPeople.length>
e]);return d.promise()},O8175:function(a,b){var c=jQuery.Deferred(),d=this;ig.game.O9817.O8175(a,b).done(function(e){e.distance=Math.floor(d.O8674(e.location));d.O7738[a]=e;c.resolveWith(b,[e])});return c.promise()},O1791:function(a){return this.O7738[a]},O9189:function(a,b){var c=jQuery.Deferred();ig.game.O9817.O9189(a,b).done(function(d){c.resolveWith(b,[d])});return c.promise()},O8464:function(a){var b=this;ig.game.O9817.O4570(a).done(function(){b.myPeople.push(a);var c=ml.Misc.O4671(a);c&&(c.isFriendedByUs=
!0);ig.game.O9817.O5613(a,b)})},O2809:function(a){var b=this;ig.game.O9817.O5947(a).done(function(){var c=b.myPeople.indexOf(a);-1!=c&&b.myPeople.splice(c,1);if(c=ml.Misc.O4671(a))c.isFriendedByUs=!1})},O6213:function(){var a=jQuery.Deferred(),b=this;this.myBlockedPeopleLoaded?a.resolve(b.O8492):ig.game.O9817.O6213(this).done(function(c){b.O8492=c;b.myBlockedPeopleLoaded=!0;a.resolve(c)});return a.promise()},O4092:function(a){var b=this;ig.game.O9817.O7644(a).done(function(){b.O8492.push(a)})},O1969:function(a){var b=
this;ig.game.O9817.O7617(a).done(function(){var c=b.O8492.indexOf(a);-1!=c&&b.O8492.splice(c,1)})},O7990:function(a,b){var c=jQuery.Deferred();ig.game.O9817.O7990(a,b).done(function(d){var e,f;d&&(e=d.visitedLocation,f=d.moreResults);c.resolveWith(b,[e,f])});return c.promise()},O2256:function(a,b,c){var d=jQuery.Deferred();ig.game.O9817.O2256(a,b,c).done(function(e){var f,g;e&&(f=e.visitedLocation,g=e.moreResults);d.resolveWith(c,[f,g])});return d.promise()},O8674:function(a){if(!a)return null;var b=
ig.game.O6112.O2337(ig.game.O1257.pos.x,ig.game.O1257.pos.y);return Math.sqrt((b.x-a.x)*(b.x-a.x)+(b.y-a.y)*(b.y-a.y))}})});ig.baked=!0;
ig.module("game.core.O2009").defines(function(){window.O4047=ig.Class.extend({data:null,O9727:null,O8646:null,O7485:0,timeMax:null,O1834:300,isPlaying:!1,O2512:!1,O3283:.05,O3384:null,volume:1,O5336:3,init:function(){},update:function(){},draw:function(){},O1749:function(a,b,c){this.data=ig.game.O4507(a);this.O9727=b?b:null;this.O8646=c},O9835:function(){this.isPlaying&&this.O3926();this.O3384||null==this.data&&!this.O2512||(this.O7485=0,this.timeMax=null,this.isPlaying=!0,this.O3384=setInterval(function(){ig.game.O7763.playNextTick()},
1E3*this.O3283))},O6120:function(a){if(this.isPlaying)this.O3926();else{var b=this;ig.game.O4261.getItem_P(a,"musicman").done(function(c){c&&c.musicData&&(b.O1749(c.musicData,a),b.O9835())})}},O6690:function(a){return(parseFloat(a)+parseFloat(this.O3283)).toFixed(2)},playNextTick:function(){if(ig.game.sounds){this.O7485=this.O6690(this.O7485);var a=!0;this.O8646&&ig.game.O1257&&(a=ig.game.O1257.O2144(this.O8646)<2*ig.system.width);if(a)if(this.timeMax||(this.timeMax=this.O2512?this.O1834:this.getTimeMax()),
!this.timeMax||parseFloat(this.O7485)>parseFloat(this.timeMax))this.O3926();else{a=this.getTimeToKey(this.O7485);for(var b in this.data)if(ig.game.sounds.instruments[b]){var c=this.data[b][a];if(c)for(var d=0;d<c.length;d++){var e=c[d];e&&(ig.game.sounds.instruments[b].isKit?ig.game.sounds.O4085(b,e,!1,null,!0):2==e.length&&ig.game.sounds.O1069(b,e[0],e[1],!1,null,!0))}}}}},getTimeToKey:function(a){var b="0";a&&(b=ig.game.strings.replaceAll(String(a),".","_"));return b},O4492:function(a){return parseFloat(ig.game.strings.replaceAll(String(a),
"_","."))},getTimeMax:function(){var a=null;if(this.data)for(var b in this.data)for(var c in this.data[b]){var d=this.O4492(c);if(null==a||parseFloat(d)>parseFloat(a))a=parseFloat(d)}return a},O6303:function(a,b){var c=parseInt(b.slice(-1));b=b.substring(0,b.length-1);return a+"_"+c+"_"+b},O2839:function(a,b,c,d){this.O2512&&(this.data||(this.data={}),this.data[a]||(this.data[a]={}),d=this.getTimeToKey(void 0===d?this.O7485:d),this.data[a][d]||(this.data[a][d]=[]),-1==this.O5579(this.data[a][d],[b,
c])&&this.data[a][d].push([b,c]))},O2795:function(a,b,c){this.O2512&&(this.data||(this.data={}),this.data[a]||(this.data[a]={}),c=this.getTimeToKey(void 0===c?this.O7485:c),this.data[a][c]||(this.data[a][c]=[]),-1==this.data[a][c].indexOf(b)&&this.data[a][c].push(b))},O5579:function(a,b){for(var c=-1,d=0;d<a.length;++d)if(this.O2383(a[d],b)){c=d;break}return c},O2383:function(a,b){if(!b||a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]instanceof Array&&b[c]instanceof Array){if(!this.O2383(a[c],
b[c]))return!1}else if(a[c]!=b[c])return!1;return!0},O3926:function(){clearInterval(this.O3384);this.O3384=null;this.O7485=0;this.isPlaying=!1;null!=this.O9727&&(this.O8646=this.O9727=this.data=null)},O3573:function(){this.O2512=!0;this.O9835()},O5077:function(){this.O2512=!1;this.O3926()},reset:function(){this.isPlaying&&this.O3926();this.O2512&&this.O5077();this.O7090()},O7090:function(){this.timeMax=this.O8646=this.O9727=this.data=null},O8349:function(a){var b=null,c=this.O7713();if(a)for(var d in a){var e=
c[d];if(e){b||={};b[d]={};for(var f in a[d]){f=this.O9262(f);if(null==f)return null;var g=a[d][f];b[d][f]=[];for(var h=0;h<g.length;h++){var k=g[h];if(e.isKit)if(this.O2134(d,null,null,k))0==h&&(b[d][f]=[]),b[d][f].push(k);else return null;else if(this.O2134(d,k[0],k[1],k))0==h&&(b[d][f]=[]),b[d][f].push([k[0],k[1]]);else return null}}}else{b=null;break}}return b},O2134:function(a,b,c,d){var e=!1,f=this.O7713(),g=ig.game.sounds.tones;if(f[a])for(var h in f)h==a&&(e=f[h],e=e.isKit?this.O2249(d)&&1<=
d&&d<=e.max:this.O2249(b)&&b>=e.minOctave&&b<=e.maxOctave&&this.O2807(c)&&0<=g.indexOf(c));return e},O9262:function(a){var b=null;if("string"===typeof a)try{var c=ig.game.strings.replaceAll(a,"_",".");parseFloat(c);b=String(a)}catch(d){b=null}return b},O7713:function(){return ig.game.sounds.instruments},O2249:function(a){return this.O5090&&parseInt(a)==a},O5090:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},O2807:function(a){return"string"===typeof a}})});ig.baked=!0;
ig.module("game.core.holdermanager").defines(function(){window.HolderManager=ig.Class.extend({O6694:function(a){var b=!0;if(a){b=!1;var c=ig.game.O1257.attachments.h;c&&0<=["STACKHOLD","EQUIPMENT","LINER"].indexOf(c.base)?(b=c&&c.name&&0<=c.name.indexOf(a),"STACKHOLD"==c.base||"LINER"==c.base?b&&ig.game.attachmentManager.O3578(ig.game.O1257,"h",!0):"EQUIPMENT"==c.base&&ig.game.O1257.O6310()):ig.game.O1257.O6310()}return b},O5460:function(a,b,c){if(a&&b&&ig.game.O5119.default){for(var d=null,e=0;e<
ig.game.O5119.default.length;e++){var f=ig.game.O5119.default[e];if(f instanceof EntityHolder&&f.O5682&&f.O5682.x==b.x&&f.O5682.y==b.y){d=f;break}}d&&d.O7956(a,c)}},O9145:function(a){if(ig.game.O5119&&ig.game.O5119.default)for(var b=0;b<ig.game.O5119.default.length;b++){var c=ig.game.O5119.default[b];c instanceof EntityHolder&&c.O7956(a,!1)}},O8858:function(){var a=ig.game.settings.travelHolderId;a&&ig.game.holderDialog&&ig.game.holderDialog.open(a,void 0,void 0,void 0,!0,void 0,!0)}})});
ig.baked=!0;
ig.module("game.core.multithingmanager").defines(function(){window.MultithingManager=ig.Class.extend({O3165:function(a,b){if(a&&b&&Array.isArray(b)&&3==b.length){var c=b[0],d=b[1];b=b[2];"i"==c&&(c="itemChange");void 0!==b.s&&(b.state=b.s,delete b.s);void 0!==b.r&&(b.rot=b.r,delete b.r);if("startViewing"==c)a.O8088?a.viewingMultithingSince=b.viewingMultithingSince:(a.viewingMultithingPlacementId=d,a.viewingMultithingSince=b.viewingMultithingSince,ig.game.sounds.O9396(ig.game.sounds.shortWhoosh,a));
else if("stopViewing"==c)this.O5922(a);else if(ig.game.multithing)if(ig.game.multithing.isOpen&&ig.game.multithing.placementId==d)ig.game.multithing.O9339(a,c,d,b);else if(c=this.O6296(d))ig.game.decorator.O3984(a,null,c.O5682,!0,8,65,15,!0),ig.game.sounds.O2903(ig.game.sounds.shortWhoosh,.35)}},O6296:function(a){if(ig.game.O5119)for(var b=["default","decoEffects"],c=0;c<b.length;c++){var d=ig.game.O5119[b[c]];if(d)for(var e=0;e<d.length;e++){var f=d[e];if(!f._killed&&f.O8109&&f.placementId==a){var g=
f;break}}}return g},addParticipant:function(a){(a=ml.Misc.O4671(a.O2970))&&ig.game.multithing&&ig.game.multithing.isOpen&&(a.hasMultithingAddButton=!1,ig.game.multithing.addParticipant(a)?ig.game.O7836.O4739("addParticipant",ig.game.multithing.placementId,{userId:a.O2970}):ig.game.O1257.say("the participants limit has been reached"),ig.game.sounds.success.play())},removeParticipant:function(a){(a=ml.Misc.O4671(a.O2970))&&ig.game.multithing&&ig.game.multithing.isOpen&&(a.hasMultithingAddButton=!1,
ig.game.multithing.removeParticipant(a),ig.game.O7836.O4739("removeParticipant",ig.game.multithing.placementId,{userId:a.O2970}),ig.game.sounds.pickup.play())},O7703:function(a){if(ig.game.multithing)if(a.viewingMultithingPlacementId)if(a.O8088){if(!a.multithingPos){var b=this.O6296(a.viewingMultithingPlacementId);b&&(a.multithingPos=ig.game.O4507(b.pos))}a.multithingPos&&350<=ml.Misc.O3863(ig.game.O1257.pos,a.multithingPos)&&ig.game.multithing.close()}else if(a.viewingMultithingName)a.viewingMultithingSince&&
a.hasMultithingAddButton&&15<=(Date.now()-a.viewingMultithingSince)/1E3&&(a.hasMultithingAddButton=!1);else{if(b=this.O6296(a.viewingMultithingPlacementId))a.viewingMultithingName=ig.game.strings.O3089(b.givenName,15),a.hasMultithingAddButton=ig.game.multithing.isOpen&&ig.game.multithing.placementId==a.viewingMultithingPlacementId&&ig.game.multithing.O8308()&&!ig.game.multithing.O5593()}else a.viewingMultithingName&&(delete a.viewingMultithingName,delete a.hasMultithingAddButton,delete a.multithingPos)},
O5922:function(a,b){delete a.viewingMultithingPlacementId;delete a.viewingMultithingSince;delete a.viewingMultithingName;delete a.hasMultithingAddButton;delete a.multithingPos;ig.game.sounds.O9396(ig.game.sounds.shortWhoosh,a,.35);a.O8088&&ig.game.O7836.O4739("stopViewing",b)},toggleParticipation:function(a){console.log("toggleParticipation",a)}})});ig.baked=!0;
ig.module("game.core.O1681").defines(function(){window.O9811=ig.Class.extend({getCollectedItemsForPlayer:function(a,b,c){var d=jQuery.Deferred(),e=a*b-1;ig.game.O9817.O1774(a*b-b,e,c).done(function(f){var g=[],h=!1,k=1,l=0;if(f&&f.items){h=0;for(k=f.items.length;h<k;h++)g.push(ig.game.O4261.getItemBasic(f.items[h],"items_get_col"));h=f.itemCount>e+1;k=Math.ceil(f.itemCount/b);l=f.itemCount}d.resolveWith(c,[g,h,k,l])});return d.promise()},O5352:function(a,b,c){var d=jQuery.Deferred(),e=a*b-1;ig.game.O9817.O9333(a*
b-b,e,c).done(function(f){var g=[],h=!1,k=1,l=0;if(f&&f.items){h=0;for(k=f.items.length;h<k;h++)g.push(ig.game.O4261.getItem(f.items[h],"items__get_created_items_for_player"));h=f.itemCount>e+1;k=Math.floor(f.itemCount/b)+1;l=f.itemCount}d.resolveWith(c,[g,h,k,l])});return d.promise()},O4762:function(a,b,c,d){if(ig.game.universeSearchChecked)return this.O439(a,b,c,d);var e=jQuery.Deferred();if(!a||""==a||2>a.length)return e.resolveWith(d,[[],!1]),e.promise();var f=ig.game.searchQuery.getNormalized(a),
g=b*c-c,h=b*c-1;a&&(0<=a.indexOf("in bin")||0<=a.indexOf("in:bin"))||!this.O6476(f,b,c)?a=ig.game.O9817.O1156(f,g,h):(g=jQuery.Deferred(),a=g.promise(),g.resolve(this.getCacheData()));a.done(function(k){var l=[],m=!1;if(k&&k.items){m=0;for(var n=k.items.length;m<n;m++)l.push(ig.game.O4261.getItemBasic(k.items[m],"items_get_search"));m=k.more}ig.game.O7747.cacheSearchData(f,b,c,k);e.resolveWith(d,[l,m])});return e.promise()},O439:function(a,b,c,d){var e=jQuery.Deferred();if(!a||""===a||2>a.length)return e.resolveWith(d,
[[],!1]),e.promise();a=ig.game.searchQuery.getNormalized(a);ig.game.itemSearchManager.O8557(a,b*c-c,b*c-1).done(function(f,g){var h=[];if(f)for(var k=0;k<f.length;k++)h.push(ig.game.O4261.getItemBasic(f[k],"items_get_search"));e.resolveWith(d,[h,g])});return e.promise()},cacheSearchData:function(a,b,c,d){ig.game.O5285.setItem("search_String",a);ig.game.O5285.setItem("search_PageNo",b);ig.game.O5285.setItem("search_PageSize",c);ig.game.O5285.setItem("search_Data",JSON.stringify(d))},getCacheData:function(){var a=
localStorage.getItem("search_Data");if(a)try{var b=JSON.parse(a)}catch(c){ig.game.errorManager.warn("getCacheData not able to parse localStorage data")}return b},O6476:function(a,b,c){var d=!1;try{d=a==localStorage.getItem("search_String")&&b==localStorage.getItem("search_PageNo")&&c==localStorage.getItem("search_PageSize")}catch(e){console.log("couldnt hydrate cached search data")}return d},O1015:function(a,b,c){ig.game.panelSet.O6777.O9624(a,b);ig.game.O9817.O7049(a,(ig.game.panelSet.O6777.tilePage-
1)*ig.game.panelSet.O6777.O1875+b-1,this).done(function(d){var e=d&&d.alreadyExisted;d&&d.actionWasBlocked?(ig.game.sounds.nocando.play(),ig.game.panelSet.O6777.refresh()):e?(ig.game.sounds.putdown.play(),ig.game.panelSet.O6777.refresh(!0)):(ig.game.sounds.collected.play(),ig.game.panelSet.O6777.O4138(b),c&&(ig.game.decorator.O5961(ig.game.O1257,c),ig.game.O7836.O4166(c)))}).fail(function(){ig.game.sounds.nocando.play();ig.game.panelSet.O6777.refresh()})},removeItemFromCollection:function(a,b){var c=
jQuery.Deferred();ig.game.O9817.O2989(a,b).done(function(d){c.resolveWith(b)});return c.promise()},O4678:function(a){var b=jQuery.Deferred();a=ig.game.O9817.O8034(a);a.done(function(c){c&&c.ok?b.resolve():b.reject()});a.fail(function(){b.reject()});return b.promise()},O7567:function(a){ig.game.O4261.getItem_P(a,"after_save").done(function(){ig.game.panelSet.O9162.O1096()})},O1618:function(a,b,c,d,e){ig.game.painter&&ig.game.painter.O2891()&&(c=ig.game.painter.data&&ig.game.painter.data.type&&ig.game.painter.types[ig.game.painter.data.type].O3397,
"cloneOld"==ig.game.painter.mode?ig.game.O9817.O4538(a,b).done(function(f){if(f){ml.Misc.O1160(f.diagnostics);var g={};g.id=a;g.name=f.name;g.type=f.base;f.prop&&(g.prop=f.prop,f.prop.attr&&ig.game.O2082.O3713(f));g.direction=f.rotation;var h=ig.game.O1257.O2970==f.creator;if(f.isBlocked)ig.game.painter.showItemIsBlocked();else if(f.imageData&&f.imageData.colors)if(g.colors=f.imageData.colors,f.imageData.pixels&&(jQuery.isArray(f.imageData.pixels[0][0])?g.pixels=f.imageData.pixels:(g.pixels=[],g.pixels[0]=
f.imageData.pixels)),f="MUSICSHEET"==g.type||g.prop&&g.prop.attributes&&0<=g.prop.attributes.indexOf("clonable"),h||f){if(h){if(g.prop&&g.prop.clonedFrom)var k=g.prop.clonedFrom}else k=g.id;0<=ig.game.typesWithExternalBigData.indexOf(g.type)?ig.game.O9817.O4447(g.id).done(function(l){l&&(g.prop||(g.prop={}),g.prop.textData=l.textData);ig.game.painter.O9181(g,k)}):ig.game.painter.O9181(g,k)}else ig.game.sounds.nocando.play();else ig.game.sounds.nocando.play(),console.log("Pixel/ palette data not available for this item")}}):
(ig.game.painter.data&&0<=["interactiveEnvironment","gatherable","liner","mover"].indexOf(ig.game.painter.data.type)||ig.game.painter.data&&ig.game.painter.data.type&&0<=ig.game.painter.O9027.indexOf(ig.game.painter.types[ig.game.painter.data.type].key)||c||ig.game.painter.thingReferencesDialog&&ig.game.painter.thingReferencesDialog.isOpen)&&ig.game.painter.O3422(a,d,e))},O6398:function(a){ig.game.O4261.getItem_P(a,"export").done(function(b){b&&b.imagesBeingGenerated.done(function(){var c=b.creatorId==
ig.game.O1257.O2970,d=10<=ig.game.O1257.rank,e='<p style="text-transform: none">URL: <span style="opacity: 0.7">'+ig.game.strings.O9955("https://i.thingistan.com/"+b.id)+"</span></p>";e+='<p style="text-transform: none">ID: <span style="opacity: 0.7">'+b.id+"</span></p>";var f=ig.game.O2082.O7698(b);f=f&&""!=f?ig.game.strings.O9955(f)+".":"-";e+="<p>Attributes: "+f+"</p>";if(c||d){var g;b.text?g=b.text:b.textData&&(g=b.textData);g&&(e+="<p>TEXT (ONLY VISIBLE TO YOU AS CREATOR",d&&(e+=' <br/><span style="opacity: 0.5">AND THIS ADMIN OVERRIDE</span>'),
e=e+')</p><div style="text-transform: none; overflow-y: scroll; height: 300px; text-align: left; padding: 10px; border-top: 2px solid rgba(0,0,0,.5); background-color: rgba(255,255,255,0.3)"><pre>'+(ig.game.strings.O9955(g)+"</pre></div>"))}d&&(e+='<p style="color: gray">Admin-Only Info:<br/><br/>',e+='Actual URL: <span style="text-transform: none">'+ig.game.strings.O9955(b.img.path)+"</span>",e+="</p>");ig.game.alertDialog.open(e,!0)})})},O9935:function(a,b,c,d,e){ig.game.O1257&&ig.game.O4261.getItem_P(a,
"trigger_item_default_behavior_on_selection").done(function(f){f&&f.imagesBeingGenerated.done(function(){var g=ig.game.O1257.pos.x,h=ig.game.O1257.pos.y;switch(f.base){case "WRITABLE":ig.game.writableDialog.isOpen&&ig.game.writableDialog.forumId==f.id?ig.game.writableDialog.O5447():(ig.game.writableDialog.isOpen&&ig.game.writableDialog.O5447(),ig.game.writableDialog.O1939(f));break;case "READABLE":ig.game.readableDialog.isOpen&&ig.game.readableDialog.close();ig.game.O4261.getItem_P(f.id,"trigger_item_default_behavior_on_selection__readable").done(function(n){ig.game.readableDialog.open(g,
h,n.rgb,n.rgb2,n.textData,n.attributes,f.name)});break;case "MEDIUM":f.url&&0===f.url.indexOf("writable://")?ig.game.mediaDialog.O7040(f.url,f.rgb,f.rgb2):ml.Misc.O3903(f.url,ig.game.O1257.O2970,!1);break;case "CHANGER":ig.game.O1795&&ig.game.painter.O2975(f.id);break;case "SOUND":ig.game.sounds.O9961(a);break;case "POINTER":ig.game.O9817.O2699(f.url).done(function(n){n&&void 0!=n.x&&void 0!=n.y&&ig.game.O2453.O1123(n)});break;case "MUSIC":ig.game.O7763.O6120(a);break;case "HELPER":ml.Misc.O6447(f.attributes,
f.name);break;case "HOLDER":if(ig.game.holderDialog.isOpen&&ig.game.holderDialog.holderId==f.id)ig.game.holderDialog.close(),ig.game.panelSet.O3843(),b&&(b.isOpen=!1);else if(ig.game.O1329.O6694(f.useKeyword)){var k=!1,l=!ig.game.isEditorHere&&!e&&!d;ig.game.holderDialog.isOpen&&(k=ig.game.holderDialog.O5028,l=ig.game.holderDialog.O8986,ig.game.holderDialog.close(),ig.game.panelSet.O3843());var m=void 0;c&&(void 0!==c.lockAtHolderPage&&(m=c.lockAtHolderPage),void 0!==c.openAsTravelHolder&&c.openAsTravelHolder&&
(l=c.openAsTravelHolder));ig.game.holderDialog.open(f.id,b,f.soundId,k,l,m)}else ig.game.O5058.O8943("thisHolderNeedsSomething"),ig.game.sounds.nocando.play();break;case "PLACENAME":ig.game.O8100.O5069(f.id);break;case "VIEWABLE":k=new ml.AnimationSheet(null,f.img.width/ig.game.O4975,f.img.height,f.img);ig.game.viewableDialog.open(g,h,k,!0,f.soundId,!0,f.attributes);break;case "MIFT":(k=ig.game.panelSet.O2915[f.id])&&!k.isPaid&&k.transactionId&&(ig.ua.steam?ig.game.alertDialog.O3813("This Mift is unpaid and not sent, but you can clone it by dragging it over the Create button."):
(ig.game.O9710.O6335(),ig.game.iapManager.O1337(k.transactionId)));break;default:ig.game.O3957&&f.id==ig.game.O3957.O1942?ig.game.portaller.startExitAreaTeleportingRequest():d||e||!ig.game.playerDialog.O6859()?ig.game.settings.getGlue(ig.game.attachmentManager.O6854(f.base))||ig.game.attachmentManager.O1158(f,void 0,d,e):ig.game.playerDialog.O1336(f)}})})},O5849:function(a,b){return ig.game.O9817.O4736(a,b)},O7783:function(a,b){var c=jQuery.Deferred();ig.game.O7747.O5849(a,b).done(function(d){d=d&&
d.id;c.resolveWith(b,ig.game.O1257&&ig.game.O1257.O2970==d)}).fail(function(){c.rejectWith(b)});return c.promise()}})});ig.baked=!0;
ig.module("game.core.itemsearchmanager").defines(function(){window.ItemSearchManager=ig.Class.extend({bulkPageSize:100,O3278:[],O8541:0,O5366:!1,O2579:null,O8504:function(a){a!==this.O2579&&(this.O3278=[],this.O8541=0,this.O5366=!1);this.O2579=a},O1901:function(a,b){if(this.O3278.length>=b||this.O5366){var c={};c.itemIds=this.O3278.slice(a,b+1);c.moreAvailable=this.O3278.length>b||!this.O5366}return c},O6841:function(){var a=jQuery.Deferred();if(this.O5366)a.resolve();else{var b=this;ig.game.O9817.O9343(this.O2579,
this.O8541,this.bulkPageSize).done(function(c){b.O3278=b.O3278.concat(c.items);b.O5366=!c.items||c.items.length<b.bulkPageSize;b.O8541++;a.resolve()})}return a.promise()},O8557:function(a,b,c,d){var e=jQuery.Deferred();this.O8504(a);var f=this.O1901(b,c);if(f)e.resolveWith(d,[f.itemIds,f.moreAvailable]);else{var g=this;this.O6841().done(function(){f=g.O1901(b,c);e.resolveWith(d,[f.itemIds,f.moreAvailable])})}return e.promise()}})});ig.baked=!0;
ig.module("game.core.attributesmanager").defines(function(){window.AttributesManager=ig.Class.extend({info:{SOLID:{behind:{shortkey:2},takeAutoFill:{shortkey:3,label:"get auto-back"},blocksLeft:{shortkey:4},blocksRight:{shortkey:5},clonable:{shortkey:1}},TRANSFORM:{startRandomly:{shortkey:2},cycles:{shortkey:3,label:"cycle"},cyclesForthAndBack:{shortkey:4,label:"cycle forth+back"},hot:{shortkey:5},steamy:{shortkey:6},bubbly:{shortkey:7},shiny:{shortkey:8},effectsOnlyAtLastCell:{shortkey:12,label:"effects at last"},
inFront:{shortkey:9},inCenter:{shortkey:10},atBottom:{shortkey:11},unlabeled:{shortkey:13},clonable:{shortkey:1}},MOVER:{verySlow:{shortkey:2},slow:{shortkey:3},fast:{shortkey:4},veryFast:{shortkey:5},fastest:{shortkey:6},diverseTiming:{shortkey:10},solid:{shortkey:7},harmful:{shortkey:8,O7166:!0},deadly:{shortkey:9,O7166:!0},clonable:{shortkey:1}},DECOBG:{horizontalOnly:{shortkey:2,label:"fill horiz. only"},verticalOnly:{shortkey:3,label:"fill vert. only"},clonable:{shortkey:1}},FARBACK:{leftward:{shortkey:2},
rightward:{shortkey:3},upward:{shortkey:4},inward:{shortkey:15},diversifyPoints:{shortkey:11,label:"diversify points"},diversifyPointsStronger:{shortkey:12,label:"div. points +"},diversifyPointsStrongest:{shortkey:13,label:"div. points ++"},furtherInFront:{shortkey:6,label:"further in front"},muchFurtherInFront:{shortkey:14,label:"further in fr. +"},shortGradient:{shortkey:9},gradient:{shortkey:7},longGradient:{shortkey:10},unfilled:{shortkey:8},clonable:{shortkey:1},diversifyPointsOld:{shortkey:5,
label:"div. points alt.",deprecated:!0}},FURRY:{behind:{shortkey:2},orderly:{shortkey:3},unrippable:{shortkey:4},sparse:{shortkey:5},lessSkew:{shortkey:8},extraSkew:{shortkey:6},smallPush:{shortkey:13},placeVariance:{shortkey:7},weedy:{shortkey:9},single:{shortkey:12},hot:{shortkey:14},steamy:{shortkey:15},bubbly:{shortkey:16},shiny:{shortkey:17},bristling:{shortkey:18},dontTakeAutoFill:{shortkey:11,label:"no auto-back"},clonable:{shortkey:1},roundOrderlyTouchRotation:{shortkey:10,label:"round rotating"},
roundVariedTouchRotation:{shortkey:19,label:"round weedy-rot."},roundTouchExpand:{shortkey:20,label:"round expanding"},roundTouchCollapse:{shortkey:21,label:"round collapsing"},ripsFloatAway:{shortkey:22}},GENERATOR:{clonable:{shortkey:1}},DRIFTY:{downwards:{shortkey:2},inFront:{shortkey:3},"static":{shortkey:4},fast:{shortkey:5},veryFast:{shortkey:6},fastest:{shortkey:7},noRotation:{shortkey:8},fastRotation:{shortkey:9},sidewaysSpeed:{shortkey:10,label:"side speed",icon:5},fastSidewaysSpeed:{shortkey:11,
label:"fast side spd.",icon:5},bright:{shortkey:24},more:{shortkey:12},manyMore:{shortkey:13},startHigh:{shortkey:16,label:"start high",icon:22},startVeryHigh:{shortkey:17,label:"st. very high",icon:30},startLow:{shortkey:14,label:"start low",icon:23},startVeryLow:{shortkey:15,label:"st. very low",icon:31},dontTakeAutoFill:{shortkey:18,label:"no auto-back"},fadeFast:{shortkey:19},fadeVeryFast:{shortkey:20},fadeFastest:{shortkey:21},affectedMoreByEnvironment:{shortkey:25,label:"wind reactive +"},randomizeFlipX:{shortkey:26,
label:"random hrz. flip"},randomizeFlipY:{shortkey:27,label:"random vrt. flip"},noTouchReaction:{shortkey:28,label:"no touch react"},reverseTouchReaction:{shortkey:29,label:"reverse touch r."},swingingHorizontally:{shortkey:30,label:"swinging"},clonable:{shortkey:1}},CLOTHY:{flipAngles:{shortkey:2},placeVariance:{shortkey:3},inFront:{shortkey:4},lightweight:{shortkey:5},orderly:{shortkey:6},dontTakeAutoFill:{shortkey:7,label:"no auto-back"},clonable:{shortkey:1}},CLIMB:{dontTakeAutoFill:{shortkey:2,
label:"no auto-back"},fast:{shortkey:3},veryFast:{shortkey:4},fastest:{shortkey:5},onlyFasterDown:{shortkey:6,label:"only faster down"},blocksUp:{shortkey:7},blocksDown:{shortkey:8},blocksLeft:{shortkey:9},blocksRight:{shortkey:10},clonable:{shortkey:1}},OPENABLE:{clonable:{shortkey:1}},WALKABLE:{inFront:{shortkey:2},dontGiveAutoFill:{shortkey:3,label:"don't give fill"},fast:{shortkey:4},veryFast:{shortkey:5},blocksUp:{shortkey:7},blocksDown:{shortkey:8},blocksLeft:{shortkey:9},blocksRight:{shortkey:10},
clonable:{shortkey:1}},DECOACT:{clonable:{shortkey:1}},PORTAL:{forSameOnly:{shortkey:2},clonable:{shortkey:1}},PORTALDIR:{forSameOnly:{shortkey:2},clonable:{shortkey:1}},STICKY:{blocksLeft:{shortkey:2},blocksRight:{shortkey:3},jumpable:{shortkey:4},nonLowering:{shortkey:5,label:"non-lowering"},steadySlowdown:{shortkey:6},clonable:{shortkey:1}},MIFT:{"private":{shortkey:2}},BRAIN:{suppressControl:{shortkey:1,label:"suppress control"},offersEditing:{shortkey:3},clonable:{shortkey:2}},LINER:{remainsBrief:{shortkey:1,
label:"brief"},remainsVeryBrief:{shortkey:2,label:"very brief"},lineMoreTransparent:{shortkey:3,label:"more transparent"},lineVeryTransparent:{shortkey:4,label:"very transparent"},noOuterLine:{shortkey:5},noInnerLine:{shortkey:6},snapToGrid:{shortkey:7},snapToBigGrid:{shortkey:8,label:"snap to big gr."},shiftsColor:{shortkey:9},pulsates:{shortkey:10},drawsRandomly:{shortkey:11,label:"draws random"},drawsVeryRandomly:{shortkey:12,label:"draws very rand."},hoverX:{shortkey:13,label:"waving"},hoverY:{shortkey:14,
label:"hovering"},movesDown:{shortkey:15},doesntMove:{shortkey:16,label:"doesn't move"},movesFaster:{shortkey:17},movesVeryFast:{shortkey:18},changesRandomly:{shortkey:19,label:"chng. randomly"},coloredOutline:{shortkey:21},stamps:{shortkey:22},floatingItem:{shortkey:34},thicker:{shortkey:23},veryThick:{shortkey:24},trail:{shortkey:25},doubleTrail:{shortkey:26},multiTrail:{shortkey:27},causesSparks:{shortkey:28},brightSounds:{shortkey:29},darkSounds:{shortkey:30},buzzSounds:{shortkey:31},humSounds:{shortkey:32},
clonable:{shortkey:33}},DECO:{dontTakeAutoFill:{shortkey:3,label:"no auto-back"},nonSelectable:{shortkey:2,label:"holder part"},clonable:{shortkey:1}},HAPPENING:{offersEditing:{shortkey:3},follows:{shortkey:1},clonable:{shortkey:2}},LIGHT:{pulsating:{shortkey:1},fullyOpaque:{shortkey:2,label:"thick"},clonable:{shortkey:3}},LIGHTTOP:{clonable:{shortkey:1}},SLOPE:{behind:{shortkey:2},dontTakeAutoFill:{shortkey:3,label:"no auto-back"},clonable:{shortkey:1}},SLSLOPE:{behind:{shortkey:2},dontTakeAutoFill:{shortkey:3,
label:"no auto-back"},clonable:{shortkey:1}},PASSSLOPE:{behind:{shortkey:2},dontTakeAutoFill:{shortkey:3,label:"no auto-back"},clonable:{shortkey:1}},VIEWABLE:{slow:{shortkey:1},fast:{shortkey:2},veryFast:{shortkey:3},clonable:{shortkey:4}},FILLLIGHT:{singleStriped:{shortkey:1,label:"single striped"},doubleStriped:{shortkey:2,label:"double striped"},corner:{shortkey:5},full:{shortkey:6},furtherInBack:{shortkey:10},furtherInFront:{shortkey:4,label:"further in front"},shortGradient:{shortkey:3},gradient:{shortkey:8},
longGradient:{shortkey:9},clonable:{shortkey:7}},VIGNETTE:{thick:{shortkey:1},veryThick:{shortkey:2,label:"very thick"},clonable:{shortkey:3}},HELPER:{help:{shortkey:1},areasOfTheHour:{shortkey:3,label:"areas of the hr."},news:{shortkey:4},paste:{shortkey:5},map:{shortkey:6},boosts:{shortkey:8},snapshot:{shortkey:9},friends:{shortkey:11},areaInfo:{shortkey:17},createAreaOrSubArea:{shortkey:12,label:"create area/sub."},toHome:{shortkey:2},toElsewhere:{shortkey:14},toArea:{shortkey:22},profile:{shortkey:13},
login:{shortkey:15},findAreas:{shortkey:18},findAreasByName:{shortkey:21,label:"find ar. by name"},visitedAreas:{shortkey:19},createdAreas:{shortkey:20},settings:{shortkey:16},areaAds:{shortkey:23},myStates:{shortkey:24},clonable:{shortkey:50,O3685:!0},travelHolder:{shortkey:7,deprecated:!0}},HOLDER:{snapToGrid:{shortkey:5},nonSelectable:{shortkey:4,label:"non-selectables"},upDownPaging:{shortkey:6,label:"up-down paging"},leftRightPaging:{shortkey:14,label:"l.-right paging"},border:{shortkey:15},
thickBorder:{shortkey:16},nonRandomBack:{shortkey:20,label:"non-random back"},patternedBack:{shortkey:21},changingBack:{shortkey:17},hot:{shortkey:7},steamy:{shortkey:8},bubbly:{shortkey:9},shiny:{shortkey:10},bristling:{shortkey:11},dripping:{shortkey:12},sprinkling:{shortkey:13},needNotShown:{shortkey:19},openOnLastPage:{shortkey:22,label:"opens last page"},clonable:{shortkey:18}},HARM:{moreHarmful:{shortkey:1},extremelyHarmful:{shortkey:2},clonable:{shortkey:3}},HARMANIM:{moreHarmful:{shortkey:1,
label:"more harmful"},extremelyHarmful:{shortkey:2,label:"extremely harmful"},clonable:{shortkey:3}},DYNATHING:{startsOnTouch:{shortkey:1},replaces:{shortkey:3},behind:{shortkey:4},inFront:{shortkey:10},attachable:{shortkey:5},follows:{shortkey:6},closelyFollows:{shortkey:7},solid:{shortkey:8},nonFlipping:{shortkey:9,label:"non-flipping"},nonSelectable:{shortkey:11,label:"holder part"},actionable:{shortkey:12},slowerToUse:{shortkey:13},slowsFall:{shortkey:14},heavy:{shortkey:15},fast:{shortkey:33},
veryFast:{shortkey:34},climbable:{shortkey:19},enablesDoubleJump:{shortkey:16,label:"double jump"},enablesTripleJump:{shortkey:17,label:"triple jump"},enablesQuadrupleJump:{shortkey:24,label:"quadruple jump"},enablesQuintupleJump:{shortkey:25,label:"quintuple jump"},enablesInfiniteJump:{shortkey:26,label:"infinite jump"},higherJump:{shortkey:18},pushFlying:{shortkey:35,label:"flying"},dontTakeAutoFill:{shortkey:20,label:"no auto-back"},randomizer:{shortkey:21},noOneClickStateChange:{shortkey:22,label:"no state+ switch"},
effectsFree:{shortkey:23,label:"no wear effects"},clonable:{shortkey:2},hot:{shortkey:38},steamy:{shortkey:39},bubbly:{shortkey:40},shiny:{shortkey:41},bristling:{shortkey:42},dripping:{shortkey:43},sprinkling:{shortkey:44},airOnlyEffects:{shortkey:45,label:"air-only effects"},passThroughSolids:{shortkey:46,label:"pass thru solids"}},CHANGER:{clonable:{shortkey:1}},STACKHOLD:{heavy:{shortkey:1},lightweight:{shortkey:2},bouncy:{shortkey:3},nonRotating:{label:"nonrotating",shortkey:4},floaty:{shortkey:5},
shatters:{shortkey:6},bursts:{shortkey:7},flies:{shortkey:8},containsLiquid:{shortkey:9},living:{shortkey:10},autobursts:{shortkey:11},colorTrail:{shortkey:12},returns:{shortkey:40},hot:{shortkey:14},many:{shortkey:15},amplifies:{shortkey:36,label:"amplifies speech"},transporting:{shortkey:37},instantTransporting:{shortkey:38,label:"instant transp."},tail:{shortkey:42,label:"tailed"},fadingTail:{shortkey:43,label:"fading tailed"},bright:{shortkey:44},gathered:{shortkey:45,label:"gatherable"},stickyOnThings:{shortkey:13,
label:"sticky"},stickyOnPeople:{shortkey:30,label:"sticky -> *",O7166:!0},clearsWearable:{shortkey:31,label:"clear wear. -> *"},clearsMountable:{shortkey:32,label:"clear mount. -> *"},clearsHoldable:{shortkey:33,label:"clear hold. -> *"},bumps:{shortkey:39,label:"bumps -> *",O7166:!0},heals:{shortkey:41,label:"heals -> other"},harmful:{shortkey:34,label:"harmf. -> *",O7166:!0},deadly:{shortkey:35,label:"deadly -> *",O7166:!0},brightens:{shortkey:51},passesThrough:{shortkey:52},clonable:{shortkey:50},
nonFlipping:{shortkey:53,label:"non-flipping"},hook:{shortkey:16,label:"with swing line",deprecated:!0},edible:{shortkey:21,deprecated:!0},drinkable:{shortkey:22,deprecated:!0},slightlyPoisonous:{shortkey:24,label:"a bit poisonous",deprecated:!0,O7166:!0},mediumPoisonous:{shortkey:26,label:"a bit more pois.",deprecated:!0,O7166:!0},veryPoisonous:{shortkey:25,deprecated:!0,O7166:!0},affecting:{shortkey:27,deprecated:!0},antidotal:{shortkey:28,deprecated:!0}},READABLE:{noBack:{shortkey:1,label:"no background"},
semiTransparentBack:{shortkey:8,label:"transparent back"},centered:{shortkey:2},sansSerifFont:{shortkey:5,label:"mixed case font"},tiltLeft:{shortkey:6},tiltRight:{shortkey:7},clonable:{shortkey:3}},MEDIUM:{named:{shortkey:1},O3756s:{shortkey:3,label:"Set Wrtbl. Color"},clonable:{shortkey:2}},WRITABLE:{clonable:{shortkey:1}},EMITTER:{heavy:{shortkey:1},lightweight:{shortkey:2},bouncy:{shortkey:3},floaty:{shortkey:5},shatters:{shortkey:6},bursts:{shortkey:7},flies:{shortkey:8},containsLiquid:{shortkey:9},
autobursts:{shortkey:11},colorTrail:{shortkey:12},returns:{shortkey:40},slowerToUse:{shortkey:41},randomized:{shortkey:42},tail:{shortkey:47,label:"tailed"},fadingTail:{shortkey:48,label:"fading tailed"},bright:{shortkey:49},stickyOnThings:{shortkey:13,label:"sticky"},passesThrough:{shortkey:51},heals:{shortkey:46,label:"heals -> other"},clearsWearable:{shortkey:31,label:"clear wear. -> *"},clearsMountable:{shortkey:32,label:"clear mount. -> *"},clearsHoldable:{shortkey:33,label:"clear hold. -> *"},
bumps:{shortkey:39,label:"bumps -> *",O7166:!0},bumpsStrong:{shortkey:45,label:"bumps strong -> *",O7166:!0},bumpsSelf:{shortkey:43},slightlyHarmful:{shortkey:44,label:"a bit harmf. -> *",O7166:!0},harmful:{shortkey:34,label:"harmf. -> *",O7166:!0},deadly:{shortkey:35,label:"deadly -> *",O7166:!0},clonable:{shortkey:50}},AIMABLE:{heavy:{shortkey:2},clearsWearable:{shortkey:3,label:"clear wear. -> *"},clearsMountable:{shortkey:4,label:"clear mount. -> *"},clearsHoldable:{shortkey:5,label:"clear hold. -> *"},
bumps:{shortkey:6,label:"bumps -> *"},bumpsStrong:{shortkey:7,label:"bumps strong -> *"},instantTransporting:{shortkey:8,label:"instant transp."},passesThrough:{shortkey:9},noTrail:{shortkey:10},clonable:{shortkey:1}},STACKWEAR:{breather:{shortkey:3},shaded:{shortkey:4},invisibility:{shortkey:1},heatResistant:{shortkey:7},coldResistant:{shortkey:8},stormWindResistant:{shortkey:6},bumpResistant:{shortkey:26},mutesInstruments:{shortkey:9},mutesPastes:{shortkey:10},mutesAll:{shortkey:11},slowsFall:{shortkey:12},
slowsFallALot:{shortkey:27,label:"slows fall a lot"},heavy:{shortkey:19},veryHeavy:{shortkey:28},fast:{shortkey:33},veryFast:{shortkey:34},nonFlipping:{shortkey:24,label:"non-flipping"},enablesDoubleJump:{shortkey:13,label:"double jump"},enablesTripleJump:{shortkey:14,label:"triple jump"},enablesQuadrupleJump:{shortkey:31,label:"quadruple jump"},enablesQuintupleJump:{shortkey:32,label:"quintuple jump"},enablesInfiniteJump:{shortkey:36,label:"infinite jump"},higherJump:{shortkey:23},pushFlying:{shortkey:35,
label:"flying"},reducesDamage25percent:{shortkey:15,label:"protects 25%"},reducesDamage50percent:{shortkey:16,label:"protects 50%"},reducesDamage75percent:{shortkey:17,label:"protects 75%"},reducesDamage100percent:{shortkey:18,label:"protects 100%"},behindBody:{shortkey:5,label:"behind"},seeAllItems:{shortkey:20,label:"sees all items"},seeAllEvents:{shortkey:21,label:"sees all events"},disablesInteracting:{shortkey:22,label:"interact. resist."},clonable:{shortkey:50},effectsFree:{shortkey:25,label:"no wear effects"},
slidey:{shortkey:29},verySlidey:{shortkey:30},hot:{shortkey:38},steamy:{shortkey:39},bubbly:{shortkey:40},shiny:{shortkey:41},bristling:{shortkey:42},dripping:{shortkey:43},sprinkling:{shortkey:44},airOnlyEffects:{shortkey:45,label:"air-only effects"},disablesGrabbing:{shortkey:46,label:"grab resistant"},disablesTransport:{shortkey:47,label:"transport resist."},passThroughSolids:{shortkey:48,label:"pass thru solids"}},EQUIPMENT:{slowerToUse:{shortkey:10},hot:{shortkey:21},steamy:{shortkey:22},bubbly:{shortkey:23},
shiny:{shortkey:24},bristling:{shortkey:26},dripping:{shortkey:27},sprinkling:{shortkey:28},clearsWearable:{shortkey:4,label:"clear wear. -> *"},clearsMountable:{shortkey:5,label:"clear mount. -> *"},clearsHoldable:{shortkey:6,label:"clear hold. -> *"},widerRange:{shortkey:12},bumps:{shortkey:8,label:"bumps -> *",O7166:!0},bumpsStrong:{shortkey:9,label:"bumps strong -> *",O7166:!0},slightlyHarmful:{shortkey:11,label:"a bit harmf. -> *",O7166:!0},harmful:{shortkey:2,label:"harmful -> *",O7166:!0},
deadly:{shortkey:3,label:"deadly -> *",O7166:!0},heals:{shortkey:29,label:"heals -> other"},nonFlipping:{shortkey:30,label:"non-flipping"},clonable:{shortkey:50}},CONSUMAB:{edible:{shortkey:1},drinkable:{shortkey:2},slightlyPoisonous:{shortkey:3,label:"a bit poisonous",O7166:!0},mediumPoisonous:{shortkey:4,label:"a bit more pois.",O7166:!0},veryPoisonous:{shortkey:5,O7166:!0},affecting:{shortkey:6},antidotal:{shortkey:7},many:{shortkey:9},hot:{shortkey:8},steamy:{shortkey:11},bubbly:{shortkey:12},
shiny:{shortkey:13},bristling:{shortkey:15},dripping:{shortkey:16},heals:{shortkey:10},clonable:{shortkey:50}},INTERENV:{normal:{shortkey:1},veryRare:{shortkey:2},rare:{shortkey:3},frequent:{shortkey:4},always:{shortkey:5},clonable:{shortkey:9,O3685:!0}},INTERACT:{nonFlipping:{shortkey:1,label:"non-flipping"},unnamed:{shortkey:6},O6312:{shortkey:2,label:"steady change"},slowChange:{shortkey:3},solid:{shortkey:4},facesAway:{shortkey:7},affectsBelow:{shortkey:9,O7166:!0},hot:{shortkey:10},steamy:{shortkey:11},
bubbly:{shortkey:12},shiny:{shortkey:13},bristling:{shortkey:15},dripping:{shortkey:16},nonSelectable:{shortkey:17,label:"holder part"},climbable:{shortkey:18},dontTakeAutoFill:{shortkey:19,label:"no auto-back"},clonable:{shortkey:8},canHarmOrHasHighImpact:{shortkey:5,hidden:!0}},STACKWEARB:{hot:{shortkey:1},steamy:{shortkey:2},bubbly:{shortkey:4},shiny:{shortkey:5},bristling:{shortkey:6},dripping:{shortkey:7},sprinkling:{shortkey:8},bright:{shortkey:9},clonable:{shortkey:3}},MOTION:{replaces:{shortkey:1,
label:"replaces body"},quick:{shortkey:2},"long":{shortkey:3},stops:{shortkey:4},fadeInAndOut:{shortkey:5,label:"softly appears"},spoken:{shortkey:6},bursts:{shortkey:11,icon:19},flows:{shortkey:13,icon:19},bristles:{shortkey:14,icon:19},randomizePosition:{shortkey:15,icon:19,label:"randomize pos."},fadeIn:{shortkey:16,icon:19},slow:{shortkey:29,icon:19},fast:{shortkey:17,icon:19},forward:{shortkey:18,icon:19},diagonal:{shortkey:19,icon:19},backward:{shortkey:20,icon:19},downward:{shortkey:33,icon:19},
rotates:{shortkey:21,icon:19},lightweight:{shortkey:28,icon:19},bright:{shortkey:22,icon:19},behindBody:{shortkey:23,icon:19},brief:{shortkey:30,icon:19},veryBrief:{shortkey:35,icon:19},atOnce:{shortkey:31,icon:19},delayedStart:{shortkey:24,icon:19},zigZag:{shortkey:27,icon:19},nonFlipping:{shortkey:32,icon:19,label:"non-flipping"},singular:{shortkey:26,icon:19},more:{shortkey:25,icon:19},invisible:{shortkey:36,icon:19},clonable:{shortkey:34}},INTERMOT:{replaces:{shortkey:1},quick:{shortkey:2},"long":{shortkey:3},
stops:{shortkey:4},fadeInAndOut:{shortkey:5,label:"softly appears"},passable:{shortkey:33},solid:{shortkey:34},bursts:{shortkey:11,icon:20},flows:{shortkey:13,icon:20},bristles:{shortkey:14,icon:20},randomizePosition:{shortkey:15,icon:20,label:"randomize pos."},fadeIn:{shortkey:16,icon:20},slow:{shortkey:29,icon:20},fast:{shortkey:17,icon:20},forward:{shortkey:18,icon:20},diagonal:{shortkey:19,icon:20},backward:{shortkey:20,icon:20},downward:{shortkey:35,icon:19},rotates:{shortkey:21,icon:20},lightweight:{shortkey:28,
icon:20},bright:{shortkey:22,icon:20},behindBody:{shortkey:23,icon:20,label:"behind"},brief:{shortkey:30,icon:20},atOnce:{shortkey:31,icon:20},delayedStart:{shortkey:24,icon:20},zigZag:{shortkey:27,icon:20},nonFlipping:{shortkey:32,icon:20,label:"non-flipping"},singular:{shortkey:26,icon:20},more:{shortkey:25,icon:20},clonable:{shortkey:36},spoken:{shortkey:6,deprecated:!0}},STACKINSTR:{piano:{shortkey:13},classic_piano:{shortkey:14,label:"classic piano"},bell:{shortkey:15,label:"bells"},drums:{shortkey:16},
bongo:{shortkey:17},guitar:{shortkey:18},eguitar:{shortkey:19,label:"e-guitar"},classicclean_guitar:{shortkey:20,label:"e-guitar 2"},rootsrock_guitar:{shortkey:21,label:"e-guitar 3"},trumpet:{shortkey:22},fiddle:{shortkey:23},silent_piano:{shortkey:24,label:"silent piano"},casual_clarinet:{shortkey:25,label:"casual clarinet"},clonable:{shortkey:50,O3685:!0}},LIQUID:{harmless:{shortkey:3},harmful:{shortkey:1,O7166:!0,label:"extra harmful"},thick:{shortkey:2},heals:{shortkey:4},pushesLeft:{shortkey:6},
pushesRight:{shortkey:7},moreOpaque:{shortkey:8},veryOpaque:{shortkey:9},fullyOpaque:{shortkey:10},effectsFree:{shortkey:11,label:"effects-free"},dontGiveAutoFill:{shortkey:12,label:"don't give fill"},clonable:{shortkey:5}},DECOANIM:{hot:{shortkey:1},steamy:{shortkey:2},bubbly:{shortkey:3},shiny:{shortkey:4},bristling:{shortkey:6},dripping:{shortkey:7},sprinkling:{shortkey:8},inFront:{shortkey:5},O6312:{shortkey:9,label:"steady change"},slowChange:{shortkey:10},nonSelectable:{shortkey:12,label:"holder part"},
pointsAtPerson:{shortkey:13,label:"points at one"},dontTakeAutoFill:{shortkey:14,label:"no auto-back"},climbable:{shortkey:15},solid:{shortkey:16},clonable:{shortkey:11}},SPARKLING:{sharp:{shortkey:1},dontTakeAutoFill:{shortkey:3,label:"no auto-back"},solid:{shortkey:4},clonable:{shortkey:2}},DECOFG:{dontTakeAutoFill:{shortkey:2,label:"no auto-back"},clonable:{shortkey:1}},DECOFB:{climbable:{shortkey:2},clonable:{shortkey:1}},MULTITHING:{hot:{shortkey:1},steamy:{shortkey:2},bubbly:{shortkey:3},shiny:{shortkey:4},
inFront:{shortkey:5},noDustTrails:{shortkey:7},clonable:{shortkey:6}},FLEXIBLE:{crumbling:{shortkey:1},clonable:{shortkey:2}},DECOBIG:{hot:{shortkey:1},steamy:{shortkey:2},bubbly:{shortkey:3},shiny:{shortkey:4},inFront:{shortkey:5},inCenter:{shortkey:7},atBottom:{shortkey:8},nonSelectable:{shortkey:9,label:"holder part"},clonable:{shortkey:6}},DECOVBIG:{hot:{shortkey:1},steamy:{shortkey:2},bubbly:{shortkey:3},shiny:{shortkey:4},inFront:{shortkey:5},inCenter:{shortkey:7},atBottom:{shortkey:8},nonSelectable:{shortkey:9,
label:"holder part"},clonable:{shortkey:6}},MNTGROUND:{legged:{shortkey:1},hot:{shortkey:2},steamy:{shortkey:4},bubbly:{shortkey:3},colorTrail:{shortkey:5},bouncy:{shortkey:6},bristling:{shortkey:7},slower:{shortkey:8},toStand:{shortkey:10},behindBody:{shortkey:11,label:"behind"},autoSpeedLeft:{shortkey:14,label:"autospeed left"},autoSpeedRight:{shortkey:15,label:"autospeed right"},autoSpeedFast:{shortkey:16,label:"fast autospeed"},goneOnImpact:{shortkey:12},replaces:{shortkey:20,label:"covers body"},
nonFlipping:{shortkey:21,label:"non-flipping"},noFlyOffAtEnd:{shortkey:22,label:"no end fall off"},clonable:{shortkey:50}},MNTAIR:{heavy:{shortkey:5},lightweight:{shortkey:13},hot:{shortkey:1},steamy:{shortkey:2},bubbly:{shortkey:3},colorTrail:{shortkey:4},bristling:{shortkey:6},slower:{shortkey:7},verticalOnly:{shortkey:8},horizontalOnly:{shortkey:9},toStand:{shortkey:10},behindBody:{shortkey:11,label:"behind"},autoSpeedLeft:{shortkey:14,label:"autospeed left"},autoSpeedRight:{shortkey:15,label:"autospeed right"},
autoSpeedUp:{shortkey:16,label:"autospeed up"},autoSpeedDown:{shortkey:17,label:"autospeed down"},autoSpeedFast:{shortkey:18,label:"fast autospeed"},goneOnImpact:{shortkey:12},replaces:{shortkey:20,label:"covers body"},noFlyOffAtEnd:{shortkey:21,label:"no end fly off"},nonFlipping:{shortkey:22,label:"non-flipping"},passThroughSolids:{shortkey:23,label:"pass thru solids"},clonable:{shortkey:50}},LIVELY:{randomized:{shortkey:7,label:"random",icon:7},randomizedSlow:{shortkey:12,label:"slow random",icon:8},
swinging:{shortkey:1,icon:3},waving:{shortkey:2,icon:4},shaking:{shortkey:4,icon:5},hovering:{shortkey:3,icon:6},rocking:{shortkey:5,icon:9},rotating:{shortkey:8,icon:1},rotatingCounterClockwise:{shortkey:9,label:"counter-rotat.",icon:2},rotatingBoth:{shortkey:30,icon:1,label:"double rotat."},swarm:{shortkey:6,icon:10},flailingLeft:{shortkey:10,icon:11,label:"flailing"},flailingRight:{shortkey:11,icon:12,label:"flail. right"},emitting:{shortkey:13,icon:13},brightEmitting:{shortkey:14,icon:14,label:"bright emit."},
emittingUp:{shortkey:15,icon:15},emittingDown:{shortkey:16,icon:16},emittingLeft:{shortkey:17,icon:17},emittingRight:{shortkey:18,icon:18},foaming:{shortkey:19,icon:21},movingUp:{shortkey:20,icon:22},movingUpRight:{shortkey:26,icon:26,label:"moving up r."},movingRight:{shortkey:23,icon:25},movingDownRight:{shortkey:27,icon:27},movingDown:{shortkey:21,icon:23},movingDownLeft:{shortkey:28,icon:28},movingLeft:{shortkey:22,icon:24},movingUpLeft:{shortkey:29,icon:29,label:"moving up l."},clonable:{shortkey:50,
O3685:!0},inFront:{shortkey:51,O3685:!0}},THROWER:{moreForce:{shortkey:2},throwsLiving:{shortkey:3},clonable:{shortkey:1}},CRUMBLING:{strongWhenWalked:{shortkey:1,label:"strong vs feet"},strongWhenWalkedAndBumped:{shortkey:2,label:"strong vs body"},leavesNoTrace:{shortkey:3},crumbleInstantly:{shortkey:12,label:"crmbl. instantly"},crumbleUpwards:{shortkey:13,label:"crumble upwards"},quakeBoostTriggered:{shortkey:10,label:"quake boost trg."},reset30s:{shortkey:5,label:"30 seconds",icon:1},reset2m:{shortkey:6,
label:"2 minutes",icon:1},reset10m:{shortkey:7,label:"10 minutes",icon:1},reset60m:{shortkey:8,label:"Longer",icon:1},randomized:{shortkey:9,icon:1},clonable:{shortkey:11}},DECOTCH:{needsPressing:{shortkey:1},hot:{shortkey:9},steamy:{shortkey:2},bubbly:{shortkey:4},shiny:{shortkey:5},bristling:{shortkey:6},dripping:{shortkey:7},sprinkling:{shortkey:8},clonable:{shortkey:3}},GATHER:{edible:{shortkey:1},valuable:{shortkey:2},shiny:{shortkey:16},heals:{shortkey:3},cracking:{shortkey:13},rotating:{shortkey:14},
hovering:{shortkey:15},harvested:{shortkey:4},hot:{shortkey:23},bristling:{shortkey:24},bubbly:{shortkey:25},steamy:{shortkey:26},reset30s:{shortkey:5,label:"30 seconds",icon:1},reset2m:{shortkey:6,label:"2 minutes",icon:1},reset10m:{shortkey:7,label:"10 minutes",icon:1},reset60m:{shortkey:8,label:"Longer",icon:1},randomized:{shortkey:9,icon:1},reactToThrow:{shortkey:10,label:"on throw"},onlyReactToThrow:{shortkey:11,label:"only on throw"},onlyReactToAction:{shortkey:12,label:"only on action"},resistant:{shortkey:17,
label:"action resistant"},veryResistant:{shortkey:18,label:"very action res."},randomizeResistance:{shortkey:22,label:"random act. res."},sometimesHas:{shortkey:27},rarelyHas:{shortkey:28},veryRarelyHas:{shortkey:29},harmful:{shortkey:20,O7166:!0},deadly:{shortkey:21,O7166:!0},clonable:{shortkey:50}},GLOW:{wavering:{shortkey:6},pulsating:{shortkey:1},flickering:{shortkey:2},blinking:{shortkey:3},rotating:{shortkey:4},rotatingFront:{shortkey:7},randomized:{shortkey:5},hot:{shortkey:8},steamy:{shortkey:9},
bubbly:{shortkey:10},shiny:{shortkey:11},bristling:{shortkey:12},clonable:{shortkey:13}},ACTIVATOR:{needsPressing:{shortkey:1},silent:{shortkey:2},clonable:{shortkey:3}},ENVIRONM:{rainCloud:{shortkey:18},snowCloud:{shortkey:19},heat:{shortkey:20},mist:{shortkey:21},natureAir:{shortkey:22},humming:{shortkey:23},oceanAir:{shortkey:24},wind:{shortkey:25},sunshine:{shortkey:26},villageDust:{shortkey:27},cityAir:{shortkey:28},glimmer:{shortkey:29},smoke:{shortkey:30},steam:{shortkey:31},nightAir:{shortkey:32},
reflections:{shortkey:33},colorReflections:{shortkey:34},glitter:{shortkey:35},colorGlitter:{shortkey:36},bubbles:{shortkey:37},dripping:{shortkey:38},stars:{shortkey:39},lightningCloud:{shortkey:43},stormWinds:{shortkey:44,O7166:!0},rumbling:{shortkey:45,O7166:!0},harmfulAir:{shortkey:40,O7166:!0},harmfulHeat:{shortkey:41,O7166:!0},harmfulCold:{shortkey:42,O7166:!0},bursts:{shortkey:46},colorBursts:{shortkey:47},floating:{shortkey:48},backFloating:{shortkey:50},downFloating:{shortkey:51},soundscape:{shortkey:49,
O7166:!0},quiet:{shortkey:52,O3685:!0},nonVisual:{shortkey:53,label:"non-visual",O3685:!0}},SLIDEY:{verySlidey:{shortkey:1},blocksLeft:{shortkey:3},blocksRight:{shortkey:4},clonable:{shortkey:2}},PUSH:{soft:{shortkey:1},standing:{shortkey:3},dontTakeAutoFill:{shortkey:4,label:"no auto-back"},behind:{shortkey:5},clonable:{shortkey:2}},PUSHDIAG:{soft:{shortkey:1},standing:{shortkey:3},dontTakeAutoFill:{shortkey:4,label:"no auto-back"},behind:{shortkey:5},clonable:{shortkey:2}},PASS:{inFront:{shortkey:2},
specialDownPassable:{shortkey:4,label:"hold to pass",icon:23},dontTakeAutoFill:{shortkey:3,label:"no auto-back"},clonable:{shortkey:1}},BOUNCEY:{clonable:{shortkey:1}},BOUNCEYT:{clonable:{shortkey:1}},MOVING:{clonable:{shortkey:1}},LIVING:{clonable:{shortkey:1}},LIVANIM:{clonable:{shortkey:1}},LIVMOV:{clonable:{shortkey:1}},HOOK:{clonable:{shortkey:1}},MUSIC:{clonable:{shortkey:1}},MUSICSHEET:{clonable:{shortkey:1}},PLACENAME:{clonable:{shortkey:1}},DEADLY:{clonable:{shortkey:1}},DEADLYMV:{clonable:{shortkey:1}},
DEADLYEM:{clonable:{shortkey:1}}},O1505:[["lightweight","heavy"],["floaty","heavy"],["heavy","flies"],["heavy","veryHeavy"],["fast","veryFast"],["lightweight","veryHeavy"],["floaty","veryHeavy"],["veryHeavy","flies"],["multiple","infinite"],["floaty","flies"],["floaty","containsLiquid"],["bouncy","shatters"],["bursts","shatters"],["lightweight","floaty"],["strongWhenWalked","strongWhenWalkedAndBumped"],["down","up"],["left","right"],["hook","heavy"],["hook","veryHeavy"],["hook","stickyOnThings"],
["hook","lightweight"],["hook","bouncy"],["hook","floaty"],["hook","shatters"],["hook","bursts"],["hook","containsLiquid"],["hook","autobursts"],["hook","returns"],["hook","flies"],["hook","many"],["hook","stickyOnPeople"],["hook","clearsWearable"],["hook","harmful"],["hook","deadly"],["hook","transporting"],["hook","instantTransporting"],["stickyOnThings","transporting"],["stickyOnPeople","transporting"],["stickyOnPeople","deadly"],["stickyOnPeople","harmful"],["floaty","transporting"],["harmful",
"deadly"],["pulsating","flickering"],["pulsating","blinking"],["flickering","blinking"],["wavering","pulsating"],["wavering","blinking"],["slightlyPoisonous","veryPoisonous"],["slightlyPoisonous","mediumPoisonous"],["mediumPoisonous","veryPoisonous"],["antidotal","slightlyPoisonous"],["antidotal","mediumPoisonous"],["antidotal","veryPoisonous"],["verticalOnly","horizontalOnly"],["frontwards","backwards"],["quick","long"],["bursts","bristles"],["flows","bristles"],["bursts","flows"],["fast","flows"],
["fast","bursts"],["upward","forward"],["slow","fast"],["transporting","harmful"],["transporting","deadly"],["frequent","rare"],["rare","veryRare"],["frequent","veryRare"],["edible","drinkable"],["transporting","instantTransporting"],["heals","harmful"],["heals","deadly"],["bumps","heals"],["bumps","harmful"],["bumps","deadly"],["bumps","bumpsStrong"],["reset30s","reset2m"],["reset30s","reset10m"],["reset30s","reset60m"],["reset2m","reset10m"],["reset2m","reset60m"],["reset10m","reset60m"],["reactToThrow",
"onlyReactToThrow"],["onlyReactToAction","onlyReactToThrow"],["onlyReactToAction","reactToThrow"],["resistant","veryResistant"],["harmful","deadly"],["onlyReactToAction","harvested"],["hovering","rotating"],["sometimesHas","rarelyHas"],["sometimesHas","veryRarelyHas"],["rarelyHas","veryRarelyHas"],["solid","passable"],["nonFlipping","facesAway"],["tail","fadingTail"],["mutesInstruments","mutesAll"],["mutesPastes","mutesAll"],["affectsBelow","affectsAbove"],["singleStriped","doubleStriped"],["attachable",
"follows"],["attachable","closelyFollows"],["follows","closelyFollows"],["full","singleStriped"],["full","doubleStriped"],["full","corner"],["inCenter","atBottom"],["autoSpeedLeft","autoSpeedRight"],["autoSpeedLeft","autoSpeedUp"],["autoSpeedLeft","autoSpeedDown"],["autoSpeedUp","autoSpeedDown"],["autoSpeedUp","autoSpeedRight"],["autoSpeedDown","autoSpeedRight"],["autoSpeedUp","horizontalOnly"],["autoSpeedDown","horizontalOnly"],["autoSpeedLeft","verticalOnly"],["autoSpeedRight","verticalOnly"],["thick",
"veryThick"],["brief","veryBrief"],["moreHarmful","extremelyHarmful"],["enablesDoubleJump","enablesTripleJump"],["enablesDoubleJump","enablesQuadrupleJump"],["enablesDoubleJump","enablesQuintupleJump"],["enablesTripleJump","enablesQuadrupleJump"],["enablesTripleJump","enablesQuintupleJump"],["enablesQuadrupleJump","enablesQuintupleJump"],["enablesInfiniteJump","enablesDoubleJump"],["enablesInfiniteJump","enablesTripleJump"],["enablesInfiniteJump","enablesQuadrupleJump"],["enablesInfiniteJump","enablesQuintupleJump"],
["pushFlying","enablesDoubleJump"],["pushFlying","enablesTripleJump"],["pushFlying","enablesQuadrupleJump"],["pushFlying","enablesQuintupleJump"],["pushFlying","enablesInfiniteJump"],["hoverFlying","enablesDoubleJump"],["hoverFlying","enablesTripleJump"],["hoverFlying","enablesQuadrupleJump"],["hoverFlying","enablesQuintupleJump"],["hoverFlying","enablesInfiniteJump"],["pushFlying","hoverFlying"],["reducesDamage25percent","reducesDamage50percent"],["reducesDamage25percent","reducesDamage75percent"],
["reducesDamage25percent","reducesDamage100percent"],["reducesDamage50percent","reducesDamage75percent"],["reducesDamage50percent","reducesDamage100percent"],["reducesDamage75percent","reducesDamage100percent"],["harmless","harmful"],["heals","slightlyPoisonous"],["heals","mediumPoisonous"],["heals","veryPoisonous"],["slow","veryFast"],["fast","veryFast"],["slightlyHarmful","harmful"],["slightlyHarmful","deadly"],["slightlyHarmful","heals"],["upDownPaging","leftRightPaging"],["border","thickBorder"],
["snapToGrid","snapToRoomyGrid"],["nonRandomBack","patternedBack"],["nonRandomBack","changingBack"],["patternedBack","changingBack"],["remainsVeryBrief","remainsBrief"],["remainsVeryBrief","remainsLong"],["remainsBrief","remainsLong"],["remainsVeryLong","remainsLong"],["remainsVeryBrief","remainsVeryLong"],["remainsBrief","remainsVeryLong"],["snapToGrid","snapToBigGrid"],["drawsRandomly","drawsVeryRandomly"],["changesRandomly","changesVeryRandomly"],["shiftsColor","coloredOutline"],["brightSounds",
"darkSounds"],["brightSounds","buzzSounds"],["brightSounds","humSounds"],["darkSounds","buzzSounds"],["darkSounds","humSounds"],["buzzSounds","humSounds"],["lineMoreTransparent","lineVeryTransparent"],["doesntMove","movesDown"],["doesntMove","movesFaster"],["doesntMove","movesVeryFast"],["movesFaster","movesVeryFast"],["thicker","veryThick"],["trail","doubleTrail"],["trail","multiTrail"],["doubleTrail","multiTrail"],["multiTrail","veryThick"],["enablesDoubleJump","higherJump"],["enablesTripleJump",
"higherJump"],["follows","offersEditing"],["singleStriped","gradient"],["doubleStriped","gradient"],["corner","gradient"],["full","gradient"],["singleStriped","shortGradient"],["doubleStriped","shortGradient"],["corner","shortGradient"],["full","shortGradient"],["singleStriped","longGradient"],["doubleStriped","longGradient"],["corner","longGradient"],["full","longGradient"],["gradient","shortGradient"],["longGradient","shortGradient"],["gradient","longGradient"],["pushesLeft","pushesRight"],["passesThrough",
"instantTransporting"],["climbable","solid"],["verySlow","slow"],["verySlow","fast"],["verySlow","veryFast"],["verySlow","fastest"],["slow","fast"],["slow","veryFast"],["slow","fastest"],["fast","veryFast"],["fast","fastest"],["veryFast","fastest"],["serifFont","sansSerifFont"],["leftward","rightward"],["leftward","upward"],["rightward","upward"],["leftward","unfilled"],["rightward","unfilled"],["upward","unfilled"],["leftward","inward"],["rightward","inward"],["upward","inward"],["inward","unfilled"],
["gradient","unfilled"],["diversify","unfilled"],["furtherInBack","furtherInFront"],["diversifyPointsOld","diversifyPoints"],["diversifyPointsOld","diversifyPointsStronger"],["diversifyPoints","diversifyPointsStronger"],["diversifyPoints","diversifyPointsStrongest"],["diversifyPointsStronger","diversifyPointsStrongest"],["diversifyPointsOld","diversifyPointsStrongest"],["furtherInFront","muchFurtherInFront"],["moreOpaque","veryOpaque"],["moreOpaque","fullyOpaque"],["veryOpaque","fullyOpaque"],["cycles",
"cyclesForthAndBack"],["hasPrivateSections","showPrivateSections"],["maxUsers1","maxUsers2"],["maxUsers1","maxUsers3"],["maxUsers2","maxUsers3"],["slowsFall","slowsFallALot"],["slidey","verySlidey"],["noBack","semiTransparentBack"],["onlyFasterDown","blocksDown"],["lessSkew","extraSkew"],["single","ball"],["smallPush","lessSkew"],["smallPush","extraSkew"],["roundOrderlyTouchRotation","roundVariedTouchRotation"],["roundTouchExpand","roundTouchCollapse"],["unrippable","ripsFloatAway"],["noRotation",
"fastRotation"],["sidewaysSpeed","fastSidewaysSpeed"],["static","fast"],["static","veryFast"],["static","fastest"],["static","downwards"],["more","manyMore"],["startLow","startVeryLow"],["startVeryLow","startHigh"],["startLow","startVeryHigh"],["startLow","startHigh"],["startVeryLow","startHigh"],["startVeryLow","startVeryHigh"],["startHigh","startVeryHigh"],["fadeFast","fadeVeryFast"],["fadeFast","fadeFastest"],["fadeVeryFast","fadeFastest"],["noTouchReaction","reverseTouchReaction"],["behind","inFront"]],
O9798:["STACKINSTR","ENVIRONM","LIVELY","INTERENV","HELPER"],O1835:function(a){if(a&&a.prop&&a.prop.attributes){var b=a.base?a.base:a.type;a.prop.attr=[];for(var c=0;c<a.prop.attributes.length;c++){var d=a.prop.attributes[c];(d=this.O9501(b,d))&&a.prop.attr.push(d)}delete a.prop.attributes}},O3713:function(a){if(a&&a.prop&&a.prop.attr){var b=a.base?a.base:a.type;a.prop.attributes=[];for(var c=0;c<a.prop.attr.length;c++){var d=this.O3067(b,a.prop.attr[c]);a.prop.attributes.push(d)}delete a.prop.attr}},
O2732:function(a){var b=!1;if(a)for(var c in a)if(a[c]&&(b=this.O5730(c)))break;return b},getAttributeFromSingleAttributes:function(a,b){if(a)for(var c in a)if((a=this.info[b][c])&&!a.O3685){var d=c;break}return d},O5730:function(a){var b=!1,c;for(c in this.info){for(var d in this.info[c])if(a==d&&(b=!!this.info[c][d].O7166))break;if(b)break}return b},O5656:function(a){var b={};if(a)for(var c=0;c<a.length;c++)b||={},b[a[c]]=!0;return b},O9501:function(a,b){return this.info[a][b]?this.info[a][b].shortkey:
null},O3067:function(a,b){var c=null,d;for(d in this.info[a])this.info[a][d]&&this.info[a][d].shortkey&&this.info[a][d].shortkey==b&&(c=d);return c},O3795:function(a){return a&&0<=this.O9798.indexOf(a)},O7698:function(a){var b="";if(a&&a.attributes&&a.base)for(var c in a.attributes){var d=c,e=null;this.info[a.base]&&this.info[a.base][c]&&this.info[a.base][c].label&&(e=this.info[a.base][c].label);d=null!=e?e:ig.game.strings.O2801(d);""!=b&&(b+=", ");d=d.toUpperCase();b+=d}return b},O1130:function(a){var b=
null;switch(a){case "clonable":b=32;break;case "inFront":b=33;break;case "behind":b=34;break;case "dontTakeAutoFill":b=35;break;case "takeAutoFill":b=36;break;case "solid":b=37;break;case "hot":case "steamy":case "shiny":case "bubbly":case "dripping":case "bristling":case "sprinkling":b=38;break;case "harmful":case "deadly":b=39;break;case "blocksLeft":b=40;break;case "blocksRight":b=41;break;case "blocksUp":b=42;break;case "blocksDown":b=43;break;case "fast":b=44;break;case "veryFast":b=45;break;
case "fastest":b=46;break;case "nonSelectable":b=47;break;case "nonFlipping":b=48;break;case "climbable":b=49}return b}})});ig.baked=!0;
ig.module("game.core.intermissionmanager").defines(function(){window.IntermissionManager=ig.Class.extend({opacity:0,O6326:!1,init:function(){},died:function(a){if(a==ig.game.deathTypes.FOCUS)this.O6326=!0,this.O6130();else{var b=this;ig.game.O2666?ig.game.O1257&&ig.game.O4482&&5>=ig.game.O4873.O9593(ig.game.O1257.pos)?ig.game.O4873.O9144()?ig.game.O8894.fadeInShroud(function(){b.askIfOneWantsToGoToParentArea()}):ig.game.O8894.fadeInShroud(function(){b.O1551()}):ig.game.O8894.fadeInShroud(function(){b.O3710()}):
ig.game.O8894.fadeInShroud(function(){window.location.reload()})}},O6335:function(){ig.game.alertDialog.close();ig.game.O8894.fadeInShroud(null,!0)},O3710:function(){confirm("OUCH, THAT WAS QUICK! WANT TO RESET YOUR LOCATION HERE?")||this.O1424()?this.resetSpawnPoint():this.O6130()},resetSpawnPoint:function(){ig.game.O4223?ig.game.O4873.O8292()?window.location.replace("/1"):window.location.replace("/"+ig.game.O4873.currentArea):(ig.game.O7836.O8099(),setTimeout(function(){ig.game.O9710.O6130()},1E3))},
O3526:function(){var a=0;ig.game.O1257&&(a=ig.game.O4873.O9593(ig.game.O1257.pos));100<=a?ig.game.O9710.resetSpawnPoint():window.location.replace("/0")},askIfOneWantsToGoToParentArea:function(){confirm("OUCH, THAT WAS QUICK! WANT TO GO TO THE MAIN AREA?")||this.O1424()?ig.game.portaller.O7749(ig.game.O9720):this.O6130()},O1551:function(){confirm("OUCH, THAT WAS QUICK! WANT TO GO TO ELSEWHERE?")||this.O1424()?ig.game.portaller.startExitAreaTeleportingRequest():this.O6130()},O1424:function(){return ig.game.O1257&&
ig.game.O1257.attachments&&ig.game.O1257.attachments.br},goToFullAccountLogin:function(a){var b={google:"/auth/google",facebook:"/auth/facebook",amazon:"/auth/amazon",discord:"/auth/discord"};b[a]&&(ig.game.alertDialog.close(),ig.game.O8894.fadeInShroud(function(){window.location.replace(b[a])}))},O8410:function(a){ig.game.O3957&&ig.game.O3957.O8855("leave");ig.game.O8894.fadeInShroud(function(){window.location.replace("/"+a)})},O3280:function(a){ig.game.O3957&&ig.game.O3957.O8855("leave");ig.game.O8894.fadeInShroud(function(){a.done(function(){window.location.replace("/")})})},
teleported:function(a,b){ig.game.sounds.ringportalling.play();var c="/";b&&(c+=b);ig.game.O3957&&ig.game.O3957.O8855("leave");ig.game.O8894.fadeInShroud(function(){a?a.done(function(){window.location.replace(c)}):window.location.replace(c)})},O6130:function(){var a="/intermission";ig.game.O1460&&(a+="/"+ig.game.O1460);this.O6326&&localStorage.setItem("intermissionMode","extended");window.location.replace(a)},O2950:function(){var a="/intermission";ig.game.O1460&&(a+="/"+ig.game.O1460);localStorage.setItem("intermissionMode",
"pause");window.location.replace(a)},reload:function(){window.location.reload(!1)}})});ig.baked=!0;
ig.module("game.core.spawnpointmanager").defines(function(){window.SpawnPointManager=ig.Class.extend({MIN_TIME:5,MIN_DISTANCE:10,O1586:null,O5494:null,O7150:!0,start:function(){this.O1586=new ml.Timer;this.O5494=ig.game.O6112.O2337(ig.game.O1257.pos.x,ig.game.O1257.pos.y)},O9718:function(){if(!(!this.O7150||!ig.game.O2694||ig.game.O2694.delta()<this.MIN_TIME||this.O1586.delta()<this.MIN_TIME||0!=ig.game.O1257.vel.x||0!=ig.game.O1257.vel.y||ig.game.O1257.O9165==ig.game.O1257.O4583.SWIMMING||!ig.game.O1257.standing&&
!ig.game.O1257.O3226||!ig.game.O1257.O5479||!ig.game.O1257.O5479.thing.O8755()||ig.game.O1257.O8313||ig.game.O1257.health<ig.game.O1257.O4116||ig.game.O2116.O2973()||ig.game.O1257.O9832("reducesDamage100percent"))){var a=ig.game.O6112.O2337(ig.game.O1257.pos.x,ig.game.O1257.pos.y);this.O3863(a,this.O5494)<this.MIN_DISTANCE||this.O7904()}},O7904:function(){this.O5055(ig.game.O6112.O2337(ig.game.O1257.pos.x+2,ig.game.O1257.pos.y))},O5055:function(a){ig.game.O7836.O6972(a);this.O5494=a;this.O1586.reset()},
O3863:function(a,b){var c=Math.abs(b.x-a.x);a=Math.abs(b.y-a.y);return Math.sqrt(c*c+a*a)}})});ig.baked=!0;
ig.module("game.entities.decorative.backgroundblock").requires("impact.entity").defines(function(){window.EntityBackgroundBlock=ig.Entity.extend({size:{x:5,y:5},type:ig.Entity.TYPE.NONE,O7852:ig.Entity.TYPE.NONE,collides:ig.Entity.COLLIDES.NEVER,opacity:1,O8989:6,O9724:0,O5357:1,maxX:200,maxY:100,O2027:0,O4029:!1,uiEntity:!1,backgroundEntity:!0,O8376:!0,init:function(a,b,c){this.parent(a,b,c);this.size.x=c.size.x;this.size.y=c.size.y;this.maxX=c.maxX;this.maxY=c.maxY;this.O5357=c.O5357;this.animSheet=
new ml.AnimationSheet(null,this.size.x,this.size.y,ig.game.O8159.getImage(ig.game.O8159.bgBlock));this.addAnim("main",1,[0]);this.farBg=ig.game.backgroundMaps[0]},update:function(){ig.game.O7456.O5687||(this.opacity+=this.O8989*ig.system.tick,0<this.O8989&&this.opacity>this.O5357?(this.opacity=this.O5357,ig.game.chance(1)&&(this.O8989*=-1)):0>this.O8989&&this.opacity<this.O9724&&(this.opacity=this.O9724,ig.game.chance(1)&&(this.O8989*=-1)),this.pos.x+=this.vel.x*ig.system.tick,this.pos.y+=this.vel.y*
ig.system.tick,0>this.pos.x?this.pos.x=this.maxX:this.pos.x>this.maxX&&(this.pos.x=0),0>this.pos.y?this.pos.y=this.maxY:this.pos.y>this.maxY&&(this.pos.y=0))},draw:function(){if(!ig.game.O7456.O5687){ig.system.context.globalAlpha=this.opacity;var a=this.pos.x-(ig.game.screen.x/1.1).mod(this.maxX),b=this.pos.y-(ig.game.screen.y/1.1).mod(this.maxY);this.O8393.draw(a,b);this.O8393.draw(a+this.maxX,b);this.O8393.draw(a+this.maxX,b+this.maxY);this.O8393.draw(a,b+this.maxY)}},check:function(){}})});
ig.baked=!0;
ig.module("game.core.backgrounddecorator").requires("game.entities.decorative.backgroundblock").defines(function(){window.BackgroundDecorator=ig.Class.extend({O9724:0,O5357:.25,O8456:15,maxX:400,maxY:200,init:function(){this.maxX=ig.system.width;this.maxY=ig.system.height;this.totalObjects=parseInt(ig.system.width/this.O8456,10);ig.game.O3134||this.O2020()},O2020:function(){for(var a,b,c,d,e,f,g,h,k,l=0;l<this.totalObjects;l++)d=e=0,a=Math.random()*this.O5357,b=ig.game.O4293(0,this.maxX),c=ig.game.O4293(0,
this.maxY),f=g=ig.game.O4293(2,6),h=.001,k=10*Math.random(),ig.game.chance(50)?d=ig.game.chance(50)?-k:k:e=ig.game.chance(50)?-k:k,0!=ig.game.areaDrift.speed&&(k=ml.Misc.O1555(),d+=k.x,e+=k.y),ig.game.chance(50)&&(h*=-1),ig.game.spawnEntity(EntityBackgroundBlock,b,c,{vel:{x:d,y:e},size:{x:f,y:g},opacity:a,O8989:h,O5357:.225,maxX:this.maxX,maxY:this.maxY})}})});ig.baked=!0;
ig.module("game.core.camera").defines(function(){window.Camera=ig.Class.extend({screenTarget:{x:0,y:0},O3253:{},O6926:{},offset:{x:0,y:0},temporaryOffset:{x:0,y:0},autoSpeedOffset:{x:0,y:0},O1225:0,O4769:0,O8179:0,O5199:null,O1040:!1,O3211:!1,init:function(){this.O3211="1"==sessionStorage.lockCamToPlayer;this.O3253={x:15,y:20};this.O3820();this.setOffset()},O3820:function(){ig.ua.mobile&&(this.O3253.x=3,this.O3253.y=10);this.O3211&&(this.O3253={x:1,y:1});this.O6926.x=this.O3253.x;this.O6926.y=this.O3253.y},
setOffset:function(){this.offset={x:0,y:0};this.offset.x=-ig.system.widthHalf;this.offset.y=-ig.system.O2175+9;if(ig.ua.mobile){if(this.offset.y-=4,ig.game.O1168&&(this.offset.x+=20),ig.game.virtualKeyboard&&ig.game.virtualKeyboard.isOpen){var a=42;ig.game.multithing&&ig.game.multithing.isOpen&&(a+=40);ig.ua.phone?a-=10:ig.ua.mobile&&ig.system.width>ig.system.height&&(a+=20);this.offset.y+=a}}else this.O1225=-38,ig.game.O1168&&!this.O3211&&(this.offset.x+=20);this.O4769=this.O1225;ig.game.userScriptEditor&&
ig.game.userScriptEditor.isOpen&&ig.game.userScriptEditor.isVisible&&(this.offset.x+=Math.floor(ig.game.userScriptEditor.size.x/2)+15)},update:function(){this.O3211||(this.O5278(),this.O4217(),this.O1916(),this.O7231());var a=ig.game.O1795?100:0,b=ig.game.userMapDialog&&ig.game.userMapDialog.isOpen?ig.game.userMapDialog.O3508:0,c=ig.game.O1257;ig.game.O7606.isRunning&&"focusOnMe"==ig.game.O7606.O6567&&ig.game.O7606.O7264&&(c=ig.game.O7606.O7264);this.screenTarget.x=c.pos.x+this.offset.x-b+this.autoSpeedOffset.x+
a;this.screenTarget.y=c.pos.y+this.offset.y+this.O1225+this.O8179+this.autoSpeedOffset.y;this.O4135();this.O8798();ig.ua.mobile&&(this.screenTarget.x+=3);ig.game.O1257&&ig.game.O1257.O8088&&ig.game.cameraTrackPlayer&&this.O7420();ig.game.screen.x+=this.temporaryOffset.x;ig.game.screen.y+=this.temporaryOffset.y;this.O1040||(this.O1040=!0,this.O7711())},O7711:function(){ig.game.screen.x=parseFloat(ig.game.screen.x.toFixed(4));ig.game.screen.y=parseFloat(ig.game.screen.y.toFixed(4))},O4135:function(){this.O6926.x=
this.O3253.x;this.O6926.y=this.O3253.y;if(this.O5199){var a=this.O5199.pos,b=ml.Misc.O8674(ig.game.O1257.pos,a);if(600>=b){var c=(600-b)/10;0<=c&&(this.O6926.x=Math.floor(this.O6926.x+c).limit(0,32),this.O6926.y=Math.floor(this.O6926.y+c).limit(0,32))}400>=b&&(this.screenTarget.x=(ig.game.O1257.pos.x+a.x)/2-ig.system.widthHalf,this.screenTarget.y=(ig.game.O1257.pos.y+a.y)/2-ig.system.O2175)}},O8798:function(){"zoom_on_me"==ig.game.O7606.O6567&&ig.game.O7606.O7264&&(this.screenTarget=ig.game.O4507(ig.game.O7606.O7264.pos),
this.screenTarget.x-=ig.system.width/2,this.screenTarget.y-=ig.system.height/2)},O1916:function(){0>this.autoSpeedOffset.x?(this.autoSpeedOffset.x+=2,0<this.autoSpeedOffset.x&&(this.autoSpeedOffset.x=0)):0<this.autoSpeedOffset.x&&(this.autoSpeedOffset.x-=2,0>this.autoSpeedOffset.x&&(this.autoSpeedOffset.x=0));0>this.autoSpeedOffset.y?(this.autoSpeedOffset.y+=2,0<this.autoSpeedOffset.y&&(this.autoSpeedOffset.y=0)):0<this.autoSpeedOffset.y&&(this.autoSpeedOffset.y-=2,0>this.autoSpeedOffset.y&&(this.autoSpeedOffset.y=
0));if(ig.game.O1257&&ig.game.O1257.attachments&&ig.game.O1257.attachments.m&&ig.game.O1257.attachments.m.attributes){var a=ig.game.O1257.attachments.m.attributes,b=.2*ig.system.width,c=.2*ig.system.height;a.autoSpeedLeft?(this.autoSpeedOffset.x-=4,this.autoSpeedOffset.x<-b&&(this.autoSpeedOffset.x=-b)):a.autoSpeedRight?(this.autoSpeedOffset.x+=4,this.autoSpeedOffset.x>b&&(this.autoSpeedOffset.x=b)):a.autoSpeedUp?(this.autoSpeedOffset.y-=4,this.autoSpeedOffset.y<-c&&(this.autoSpeedOffset.y=-c)):a.autoSpeedDown&&
(this.autoSpeedOffset.y+=4,this.autoSpeedOffset.y>c&&(this.autoSpeedOffset.y=c))}},O7231:function(){ig.game.O1257&&150<ig.game.O1257.vel.y&&200>this.O8179?(this.O8179+=2,200<this.O8179&&(this.O8179=200)):0<this.O8179&&(this.O8179-=2,0>this.O8179&&(this.O8179=0))},O4217:function(){ig.game.multithing&&ig.game.multithing.isOpen?this.O1225=ig.ua.mobile?-90:-110:ig.ua.isSteamBigPictureMode||(0>this.O1225&&1>=Math.abs(ig.game.O1257.vel.y)&&(ig.game.instrumentDialog&&ig.game.instrumentDialog.isOpen||ig.game.O5119.player&&
3<ig.game.O5119.player.length&&3<=this.O5408())&&this.O1225++,this.O1225-=.03,this.O1225<this.O4769&&(this.O1225=this.O4769))},O5408:function(){var a=0,b=ig.game.O5119.player;if(b)for(var c=0;c<b.length;c++){var d=b[c];!d._killed&&!d.O8088&&d.pos.y>ig.game.O1257.pos.y+38&&d.pos.y<=ig.game.O1257.pos.y+200&&a++}return a},O5278:function(){var a=this.temporaryOffset;0>a.x?(a.x+=.25,0<a.x&&(a.x=0)):0<a.x&&(a.x-=.25,0>a.x&&(a.x=0));0>a.y?(a.y+=.25,0<a.y&&(a.y=0)):0<a.y&&(a.y-=.25,0>a.y&&(a.y=0))},O7420:function(){ig.game.screen.x>
this.screenTarget.x+1?ig.game.screen.x-=(ig.game.screen.x-this.screenTarget.x)/this.O6926.x:ig.game.screen.x<this.screenTarget.x-1&&(ig.game.screen.x+=(this.screenTarget.x-ig.game.screen.x)/this.O6926.x);ig.game.screen.y>this.screenTarget.y+1?ig.game.screen.y-=(ig.game.screen.y-this.screenTarget.y)/this.O6926.y:ig.game.screen.y<this.screenTarget.y-1&&(ig.game.screen.y+=(this.screenTarget.y-ig.game.screen.y)/this.O6926.y)},shake:function(a,b){a||=15;b||=1.75;this.temporaryOffset.x=ml.Misc.O9058(-b,
b);this.temporaryOffset.y=ml.Misc.O9058(-b,b);this.temporaryOffset.x=this.temporaryOffset.x.limit(-a,a);this.temporaryOffset.y=this.temporaryOffset.y.limit(-a,a)},O3000:function(){(this.O3211=!this.O3211)?sessionStorage.lockCamToPlayer="1":delete sessionStorage.lockCamToPlayer;this.init()}})});ig.baked=!0;
ig.module("game.core.spritesheet").requires("mlframe.image").defines(function(){window.O7356=ig.Class.extend({gfxContext:null,O5951:{},image:null,bottomMenuButtonEmphasized:{x:3,y:160,width:32,height:7},bottomMenuButton:{x:4,y:169,width:10,height:5},bottomMenuDimensionsTop:{x:0,y:333,width:194,height:3},bottomMenuDimensionsBottom:{x:0,y:335,width:194,height:3},bottomMenuDimensionsSeparator:{x:0,y:421,width:194,height:2},bottomMenuDimensionsIcon:{x:0,y:338,width:24,height:24},bottomMenuDimensionsNotice:{x:0,
y:396,width:96,height:25},bottomMenuDimensionsArrow:{x:93,y:134,width:10,height:15},bottomMenuDimensionsUsers:{x:0,y:386,width:10,height:10},bottomMenuVisitedDialog:{x:493,y:251,width:143,height:118},aboutInfoButton:{x:47,y:149,width:7,height:6},boostIcon:{x:238,y:112,width:10,height:10},questionsAndFeedbackButton:{x:65,y:375,width:69,height:6},discordMenuIcon:{x:267,y:354,width:10,height:7},mapMenuIcon:{x:266,y:361,width:12,height:8},inviteMenuIcon:{x:267,y:370,width:10,height:6},newsMenuIcon:{x:267,
y:385,width:10,height:7},pasteMenuIcon:{x:266,y:378,width:12,height:6},boostMenuIcon:{x:268,y:393,width:8,height:8},settingsIcon:{x:268,y:401,width:8,height:8},crosshair:{x:263,y:303,width:15,height:15},crosshairActive:{x:247,y:303,width:15,height:15},crosshairReloading:{x:230,y:303,width:15,height:15},miftsButton:{x:78,y:51,width:32,height:11},addMiftButton:{x:246,y:224,width:19,height:9},miftPublicPrivateToggle_public:{x:576,y:143,width:55,height:6},miftPublicPrivateToggle_private:{x:576,y:149,
width:55,height:6},unverifiedMiftPlaceholder:{x:0,y:293,width:19,height:19},keyboardToPlayOff:{x:97,y:292,width:20,height:10},keyboardToPlayOn:{x:97,y:303,width:20,height:10},visitorsMapIcon:{x:221,y:112,width:11,height:10},O6294:ig.ua.phone?{x:259,y:107,width:17,height:6}:{x:259,y:107,width:126,height:6},collectButton:{x:227,y:130,width:15,height:11},elsewhereButton:{x:0,y:7,width:40,height:5},elsewhereButtonSmall:{x:394,y:160,width:17,height:9},homeButton:{x:363,y:160,width:17,height:9},areaBanButton:{x:121,
y:86,width:6,height:12},areaBanButtonActive:{x:128,y:86,width:6,height:12},createAreaIcon:{x:266,y:338,width:13,height:7},findAreaIcon:{x:265,y:330,width:14,height:7},openAlbumButton:{x:177,y:197,width:10,height:9},addHomeButton:{x:363,y:194,width:13,height:6},addHomeButtonActive:{x:380,y:194,width:13,height:6},O4437:{x:1,y:314,width:191,height:60},cloneHistoryHeader:{x:0,y:390,width:134,height:5},previousArrow:{x:22,y:307,width:6,height:5},nextArrow:{x:29,y:307,width:6,height:5},plus:{x:22,y:14,
width:5,height:5},areaGlobalInteractingButtonActive:{x:267,y:235,width:9,height:9},areaGlobalInteractingButtonInactive:{x:267,y:245,width:9,height:9},singlePersonExperienceButtonActive:{x:256,y:235,width:9,height:9},singlePersonExperienceButtonInactive:{x:256,y:245,width:9,height:9},unlistedButtonActive:{x:246,y:235,width:9,height:9},unlistedButtonInactive:{x:246,y:245,width:9,height:9},nonLoggedInChatIfEditorAroundButtonActive:{x:246,y:255,width:9,height:9},nonLoggedInChatIfEditorAroundButtonInactive:{x:246,
y:265,width:9,height:9},isLimitedToEditorsOnlyButtonActive:{x:267,y:255,width:9,height:9},isLimitedToEditorsOnlyButtonInactive:{x:267,y:265,width:9,height:9},generatorButtonActive:{x:256,y:255,width:9,height:9},generatorButtonInactive:{x:256,y:265,width:9,height:9},backOverrideRgbButtonActive:{x:236,y:235,width:9,height:9},backOverrideRgbButtonInactive:{x:236,y:245,width:9,height:9},universeSearchChecked:{x:123,y:295,width:41,height:8},universeSearchUnchecked:{x:123,y:304,width:41,height:8},bottomMenuMoreTop:{x:493,
y:125,width:82,height:17},bottomMenuMoreMiddle:{x:493,y:143,width:82,height:17},bottomMenuMoreBottom:{x:493,y:161,width:82,height:17},bottomMenuMoreHereIcon:{x:266,y:345,width:12,height:8},closeX:{x:200,y:109,width:9,height:9},closeXWhite:{x:200,y:117,width:9,height:9},closeButtonTransparent:{x:42,y:122,width:9,height:9},closeButtonSemiTransparent:{x:52,y:122,width:9,height:9},closeButtonGray:{x:62,y:122,width:9,height:9},base6number_0:{x:2,y:226,width:5,height:5,key:"base6number_0"},base6number_1:{x:8,
y:226,width:5,height:5,key:"base6number_1"},base6number_2:{x:14,y:226,width:5,height:5,key:"base6number_2"},base6number_3:{x:20,y:226,width:5,height:5,key:"base6number_3"},base6number_4:{x:26,y:226,width:5,height:5,key:"base6number_4"},base6number_5:{x:32,y:226,width:5,height:5,key:"base6number_5"},backerOrMinfinityIcon:{x:63,y:81,width:9,height:7,key:"backerorminfinityicon"},playerDialogMyFriendsShortcut:{x:419,y:114,width:5,height:5},playerDialogMyLocationShortcut:{x:424,y:114,width:5,height:5},
panelSetShowButton:{x:156,y:11,width:18,height:9,key:"panelSetShowButton"},panelSetHideButton:{x:166,y:24,width:5,height:9,key:"panelSetHideButton"},meetPeople:{x:197,y:271,width:26,height:7},meetPeopleSmall:{x:197,y:271,width:7,height:7},baseEditStatic:{x:0,y:14,width:7,height:8,key:"baseEditStatic"},baseEditMovables:{x:8,y:14,width:7,height:8,key:"baseEditMovables"},addMultithingParticipantButton:{x:0,y:23,width:13,height:9,key:"addMultithingParticipantButton"},musicRecorder_record_default:{x:27,
y:51,width:23,height:9,key:"musicRecorder_record_default"},musicRecorder_record_active1:{x:27,y:61,width:23,height:9,key:"musicRecorder_record_active1"},musicRecorder_record_active2:{x:27,y:71,width:23,height:9,key:"musicRecorder_record_active2"},musicRecorder_play_default:{x:51,y:51,width:23,height:9,key:"musicRecorder_play_default"},musicRecorder_play_active:{x:51,y:61,width:23,height:9,key:"musicRecorder_play_active"},musicRecorder_dataEmpty_default:{x:52,y:72,width:8,height:8,key:"musicRecorder_dataIcon_default"},
musicRecorder_dataFull_default:{x:63,y:72,width:8,height:8,key:"musicRecorder_dataIcon_active"},musicRecorder_undo_default:{x:27,y:81,width:11,height:9,key:"musicRecorder_undo_default"},musicRecorder_undo_delete:{x:51,y:81,width:11,height:9,key:"musicRecorder_undo_delete"},musicRecorder_ok_default:{x:39,y:81,width:11,height:9,key:"musicRecorder_ok_default"},myVisitedIcon:{x:249,y:176,width:9,height:9},speechDialogBg:{x:0,y:223,width:279,height:87},speechSymbol:{x:177,y:177,width:11,height:9},eyeSymbol:{x:178,
y:55,width:17,height:7},virtualKeyboardOpenButton:{x:177,y:177,width:11,height:9},virtualKeyboardCloseButton:{x:177,y:187,width:11,height:9},white_glow:{x:554,y:1,width:96,height:104,key:"white_glow"},itemContextMenuBg:{x:284,y:7,width:114,height:72},itemContextMenuFillerVert:{x:284,y:10,width:1,height:9},itemContextMenuFillerHorz:{x:288,y:7,width:9,height:1},itemContextMenuArrowUp:{x:314,y:194,width:9,height:9},itemContextMenuArrowRight:{x:323,y:194,width:9,height:9},itemContextMenuArrowDown:{x:332,
y:194,width:9,height:9},O9089:{x:341,y:194,width:9,height:9},itemContextMenuCollectedTick:{x:178,y:170,width:5,height:7},arrowUp:{x:272,y:116,width:9,height:12},arrowDown:{x:272,y:142,width:9,height:12},arrowLeft:{x:257,y:130,width:12,height:9},arrowRight:{x:284,y:130,width:12,height:9},flagOff:{x:178,y:162,width:5,height:8},flagOn:{x:183,y:162,width:5,height:8},motionsDialogLabel:{x:196,y:252,width:42,height:11,key:"motionsDialogLabel"},symbolBuilt:{x:178,y:0,width:17,height:11},symbolBuiltShort:{x:178,
y:0,width:15,height:11},symbolCollected:{x:178,y:11,width:17,height:10},symbolCollectedShort:{x:178,y:11,width:15,height:10},symbolPlaced:{x:178,y:21,width:17,height:12},symbolTravelled:{x:178,y:33,width:17,height:11},symbolFind:{x:178,y:64,width:17,height:8},symbolPerson:{x:178,y:44,width:17,height:11},symbolNothing:{x:134,y:31,width:17,height:9},reloadBodiesButton:{x:59,y:134,width:11,height:11},collectedIcon:{x:153,y:76,width:11,height:9},unlistedOff:{x:25,y:97,width:9,height:8},unlistedOn:{x:35,
y:97,width:9,height:8},alertIcon1:{x:0,y:380,width:9,height:9,key:"alerticon1"},alertIcon2:{x:9,y:380,width:9,height:9,key:"alerticon2"},alertIcon3:{x:18,y:380,width:9,height:9,key:"alerticon3"},alertIcon4:{x:27,y:380,width:9,height:9,key:"alerticon4"},alertIcon5:{x:36,y:380,width:9,height:9,key:"alerticon5"},O9491:{x:45,y:380,width:9,height:9,key:"alerticonmore"},O1622:{x:54,y:380,width:9,height:9,key:"alerticoninfo"},pagingPosition:{x:78,y:64,width:5,height:6,key:"pagingposition"},healthHeart:{x:59,
y:0,width:9,height:8},healthBar:{x:0,y:3,width:52,height:3},healthBarInner:{x:1,y:1,width:1,height:1},healthBarPulse:{x:53,y:3,width:6,height:3},highlightRound:{x:177,y:84,width:16,height:16},highlightRotation:{x:153,y:107,width:19,height:19},highlightItem:{x:177,y:121,width:18,height:18},highlightEmptyGrid:{x:153,y:85,width:23,height:23},movementDirectionIndicatorH:{x:103,y:134,width:21,height:7},movementDirectionIndicatorV:{x:124,y:134,width:7,height:21},playerDialogBodyButton:{x:418,y:0,width:32,
height:11,key:"playerDialogBodyButton"},playerDialogNameButton:{x:450,y:0,width:33,height:11,key:"playerDialogNameButton"},playerDialogSnapsButton:{x:418,y:24,width:65,height:11,key:"playerDialogSnapsButton"},playerDialogMyFriendsButton:{x:418,y:12,width:65,height:11,key:"playerDialogMyFriendsButton"},playerDialogAddToMyFriendsButton:{x:197,y:0,width:65,height:11,key:"playerDialogAddMyFriendButton"},playerDialogAddToMyFriendsButton_active:{x:197,y:12,width:65,height:11,key:"playerDialogAddMyFriendButton_active"},
playerDialogEditorButton:{x:418,y:36,width:65,height:11,key:"playerDialogEditorButton"},playerDialogEditorButton_active:{x:418,y:48,width:65,height:11,key:"playerDialogEditorButton_active"},playerDialogAttachmentsButton:{x:418,y:120,width:65,height:11,key:"playerDialogAttachmentsButton"},playerDialogOkButton:{x:0,y:146,width:47,height:12},playerDialogAvatarSelectButton:{x:153,y:53,width:23,height:23},playerDialogMyPeopleBtnOvlay:{x:194,y:333,width:65,height:11},playerDialogBackArrow:{x:229,y:177,
width:9,height:7},visitedLocationFrame:{x:197,y:24,width:86,height:69},visitedLocationVisitedButton:{x:194,y:351,width:44,height:12},visitedLocationVisitedButtonOn:{x:194,y:364,width:44,height:12},visitedLocationListedPubliclyChecked:{x:111,y:229,width:57,height:10},visitedLocationListedPubliclyUnchecked:{x:111,y:240,width:57,height:10},checkbox:{x:111,y:241,width:8,height:8},checkboxActive:{x:111,y:230,width:8,height:8},bigOkButton:{x:51,y:161,width:32,height:14},findButton:{x:264,y:172,width:26,
height:11},transportButton:{x:264,y:183,width:26,height:11},openMapThereButton:{x:227,y:142,width:26,height:11},infoButton:{x:315,y:172,width:12,height:11},infoSymbol:{x:179,y:537,width:12,height:7},zoomSymbol:{x:20,y:293,width:11,height:10},distanceIndicator:{x:263,y:156,width:34,height:8},distanceIndicatorWhite:{x:263,y:164,width:46,height:8},distanceIndicatorClose:{x:301,y:155,width:8,height:8},genericClose:{x:301,y:155,width:8,height:8},closeButton:{x:267,y:224,width:9,height:9},panelBGTop:{x:360,
y:0,width:54,height:6},panelBottom:{x:66,y:24,width:54,height:25},panelEmptyMessage:{x:0,y:177,width:63,height:23},panelCreateNewButton:{x:0,y:134,width:59,height:12},panelCreateNewButtonRankNeeded:{x:0,y:121,width:59,height:12},panelBinClosed:{x:100,y:0,width:12,height:15},panelBinOpen:{x:131,y:0,width:12,height:21},panelBinMessage:{x:114,y:1,width:17,height:16},panelRotateMessage:{x:80,y:1,width:17,height:16},panelTabCollectedOff:{x:0,y:248,width:19,height:14},panelTabCollectedOn:{x:19,y:248,width:19,
height:14},panelTabCreatedOff:{x:0,y:263,width:19,height:14},panelTabCreatedOn:{x:19,y:263,width:19,height:14},panelTabSearchOff:{x:0,y:278,width:17,height:14},panelTabSearchOn:{x:19,y:278,width:17,height:14},panelTabOff:{x:493,y:221,width:19,height:14},panelTabOn:{x:512,y:221,width:19,height:14},panelTabSmallOff:{x:493,y:236,width:17,height:14},panelTabSmallOn:{x:512,y:236,width:17,height:14},pageButtonUp:{x:314,y:194,width:9,height:9},pageButtonDown:{x:332,y:194,width:9,height:9},pageButtonLeft:{x:9,
y:38,width:9,height:9},pageButtonRight:{x:0,y:38,width:9,height:9},thumbUpSmall:{x:120,y:75,width:11,height:9},sparkle:{x:197,y:208,width:15,height:5,key:"sparkle"},actionSparkle:{x:197,y:200,width:15,height:5,key:"actionsparkle"},dangerSparkle:{x:197,y:191,width:15,height:5,key:"dangersparkle"},dust:{x:221,y:199,width:6,height:5,key:"dust"},bigDust:{x:228,y:197,width:9,height:9,key:"bigdust"},bgBlock:{x:241,y:207,width:10,height:10,key:"bgblock"},rotationIcon:{x:1,y:215,width:56,height:8,key:"rotationicon"},
whitePixel:{x:241,y:207,width:2,height:2,key:"whitepixel"},whitePixelSmall:{x:241,y:207,width:1,height:1,key:"whitepixelsmall"},redPixel:{x:253,y:207,width:2,height:2,key:"redpixel"},blackPixel:{x:256,y:207,width:2,height:2,key:"blackpixel"},yellowPixel:{x:259,y:207,width:2,height:2,key:"yellowpixel"},whiteLineVertical:{x:241,y:207,width:2,height:4,key:"whiteLineVertical"},mist:{x:419,y:63,width:54,height:35,key:"mist"},sunbeam:{x:484,y:0,width:46,height:114,key:"sunbeam"},lightning:{x:543,y:0,width:78,
height:123,key:"lightning"},distanceIndicatorArrow:{x:302,y:193,width:7,height:8,key:"distanceIndicatorArrow"},smoke:{x:221,y:218,width:6,height:5,key:"smoke"},bigSmoke:{x:228,y:216,width:9,height:9,key:"bigSmoke"},steam:{x:221,y:238,width:5,height:4,key:"steam"},bigSteam:{x:221,y:230,width:9,height:7,key:"bigSteam"},bubble1:{x:198,y:231,width:3,height:3,key:"bubble1"},bubble2:{x:198,y:235,width:4,height:4,key:"bubble2"},bubble3:{x:198,y:240,width:6,height:6,key:"bubble3"},bubble1black:{x:209,y:231,
width:3,height:3,key:"bubble1black"},reflection1:{x:62,y:223,width:21,height:11,key:"lightReflection1"},reflection2:{x:62,y:235,width:21,height:11,key:"reflection2"},reflection3:{x:62,y:247,width:21,height:11,key:"reflection3"},reflection4:{x:62,y:258,width:21,height:11,key:"reflection4"},reflection5:{x:62,y:270,width:21,height:11,key:"reflection5"},reflection6:{x:62,y:281,width:21,height:11,key:"reflection6"},glitter1:{x:93,y:227,width:2,height:2,key:"glitter1"},glitter2:{x:93,y:230,width:2,height:2,
key:"glitter2"},glitter3:{x:93,y:233,width:2,height:2,key:"glitter3"},glitter4:{x:93,y:236,width:2,height:2,key:"glitter4"},glitter5:{x:93,y:239,width:2,height:2,key:"glitter5"},glitter6:{x:93,y:242,width:2,height:2,key:"glitter6"},stackback:{x:28,y:44,width:19,height:3,key:"stackback"},musicPlayer:{x:100,y:265,width:48,height:17,key:"musicPlayer"},checkMark:{x:100,y:285,width:4,height:4,key:"checkMark"},rank0:{x:12,y:94,width:12,height:9,key:"rank0"},rankBlack0:{x:12,y:103,width:12,height:9,key:"rankblack0"},
virtualJoystick_left:{x:494,y:190,width:28,height:23,key:"virtualJoystick_left"},virtualJoystick_right:{x:526,y:190,width:28,height:23,key:"virtualJoystick_right"},virtualJoystick_up:{x:555,y:187,width:23,height:28,key:"virtualJoystick_up"},virtualJoystick_down:{x:579,y:187,width:23,height:28,key:"virtualJoystick_down"},virtualJoystick_action:{x:603,y:189,width:23,height:24,key:"virtualJoystick_action"},gameBackground:{x:279,y:204,width:213,height:213,key:"gamebackground"},blackFont:{x:0,y:467,width:403,
height:8,key:"blackfont"},whiteFont:{x:0,y:475,width:404,height:8,key:"whitefont"},blackSmallFont:{x:0,y:492,width:399,height:7,key:"blacksmallfont"},whiteSmallFont:{x:0,y:500,width:399,height:7,key:"whitesmallfont"},blackWhiteFont:{x:0,y:509,width:639,height:11,key:"blackwhitefont"},eleganceFont:{x:0,y:521,width:623,height:10,key:"elegancefont"},wildFont:{x:0,y:531,width:649,height:12,key:"wildfont"},shapesFont:{x:0,y:544,width:648,height:11,key:"shapesfont"},cuteFont:{x:0,y:556,width:605,height:10,
key:"cutefont"},actionFont:{x:0,y:566,width:648,height:12,key:"actionfont"},invertedFont:{x:0,y:580,width:639,height:10,key:"invertedfont"},strictFont:{x:0,y:592,width:584,height:10,key:"strictfont"},faintFont:{x:0,y:604,width:625,height:10,key:"faintfont"},melodicFont:{x:0,y:615,width:633,height:11,key:"melodicfont"},lowFont:{x:0,y:627,width:641,height:10,key:"lowfont"},highFont:{x:0,y:638,width:570,height:12,key:"highfont"},smoothFont:{x:0,y:419,width:600,height:10,key:"smoothfont"},casualFont:{x:0,
y:429,width:845,height:12,key:"casualfont"},wideFont:{x:0,y:443,width:649,height:10,key:"widefont"},bulkyFont:{x:0,y:455,width:646,height:10,key:"bulkyfont"},O9696:jQuery.Deferred(),O8747:null,init:function(){0<=navigator.userAgent.indexOf("Mac OS X")&&(this.panelBinMessage.y=53);var a=this;this.O8747=this.O9696.promise();this.image=new ml.Image(ig.game.O1946+"media/spritesheet.png?v="+ig.game.version,function(b){b?a.O9696.resolveWith(a):a.O9696.rejectWith(a)},this)},O9355:function(a){ig.game.panelRgb=
ig.game.colors.dialogRgbs[a];if(ig.game.panelRgb){a="panelBGTop panelBottom panelEmptyMessage panelCreateNewButton panelCreateNewButtonRankNeeded panelTabCollectedOff panelTabCollectedOn panelTabCreatedOff panelTabCreatedOn panelTabSearchOff panelTabSearchOn panelTabOff panelTabOn panelTabSmallOff panelTabSmallOn".split(" ");var b=["panelCreateNewButton","panelCreateNewButtonRankNeeded"],c=this.image.data.getContext("2d");c.globalCompositeOperation="source-atop";for(var d=0;d<a.length;d++){var e=
a[d];c.beginPath();var f=0<=b.indexOf(e)?.15:.3;c.fillStyle="rgba("+ig.game.panelRgb.overlay.join(",")+","+f+")";c.rect(this[e].x*ig.system.scale,this[e].y*ig.system.scale,this[e].width*ig.system.scale,this[e].height*ig.system.scale);c.fill();c.closePath()}c.globalCompositeOperation="source-over"}},O7537:function(a,b,c){this.draw(a,b,c,this.gameBackground)},O1246:function(a,b,c){this.draw(a,b,c,this.closeButtonGray)},O7832:function(a,b,c){this.draw(a,b,c,this.bottomMenuButton)},O7122:function(a,b,
c){this.draw(a,b,c,this.bottomMenuButtonEmphasized)},O7731:function(a,b,c){this.draw(a,b,c,this.O6294)},O4615:function(a,b,c){this.draw(a,b,c,this.elsewhereButton)},O7146:function(a,b,c){this.draw(a,b,c,this.elsewhereButtonSmall)},O9723:function(a,b,c){this.draw(a,b,c,this.homeButton)},O6099:function(a,b,c){this.draw(a,b,c,this.collectButton)},O8341:function(a,b,c){this.draw(a,b,c,this.meetPeople)},O5271:function(a,b,c){this.draw(a,b,c,this.meetPeopleSmall)},O9407:function(a,b,c){this.draw(a,b,c,
this.boostIcon)},O2123:function(a,b,c){this.draw(a,b,c,this.myVisitedIcon)},O2631:function(a,b,c){this.draw(a,b,c,this.bottomMenuVisitedDialog)},O8278:function(a,b,c){this.draw(a,b,c,this.virtualKeyboardOpenButton)},O1991:function(a,b,c){this.draw(a,b,c,this.virtualKeyboardCloseButton)},O5944:function(a,b,c){this.draw(a,b,c,this.speechDialogBg)},O3413:function(a,b,c){this.draw(a,b,c,this.speechSymbol)},O6552:function(a,b,c){this.draw(a,b,c,this.eyeSymbol)},O7865:function(a,b,c){this.draw(a,b,c,this.checkMark)},
O2299:function(a,b,c){this.draw(a,b,c,this.itemContextMenuBg)},O6207:function(a,b,c){this.draw(a,b,c,this.itemContextMenuArrowUp)},O4729:function(a,b,c){this.draw(a,b,c,this.itemContextMenuArrowRight)},O1575:function(a,b,c){this.draw(a,b,c,this.itemContextMenuArrowDown)},O6075:function(a,b,c){this.draw(a,b,c,this.O9089)},O8812:function(a,b,c){this.draw(a,b,c,this.itemContextMenuFillerVert)},drawItemContextMenuFillerHorz:function(a,b,c){this.draw(a,b,c,this.itemContextMenuFillerHorz)},O4980:function(a,
b,c){this.draw(a,b,c,this.itemContextMenuCollectedTick)},O6000:function(a,b,c){this.draw(a,b,c,this.aboutInfoButton)},O6177:function(a,b,c){this.draw(a,b,c,this.bigOkButton)},O7515:function(a,b,c){this.draw(a,b,c,this.flagOn)},O6235:function(a,b,c){this.draw(a,b,c,this.flagOff)},O4582:function(a,b,c){this.draw(a,b,c,this.unlistedOn)},O8767:function(a,b,c){this.draw(a,b,c,this.unlistedOff)},O9757:function(a,b,c){this.draw(a,b,c,this.universeSearchChecked)},O8061:function(a,b,c){this.draw(a,b,c,this.universeSearchUnchecked)},
O8064:function(a,b,c){this.draw(a,b,c,this.symbolBuilt)},O4532:function(a,b,c){this.draw(a,b,c,this.symbolBuiltShort)},O2647:function(a,b,c){this.draw(a,b,c,this.symbolCollected)},O3783:function(a,b,c){this.draw(a,b,c,this.symbolCollectedShort)},O3859:function(a,b,c){this.draw(a,b,c,this.symbolPlaced)},O2006:function(a,b,c){this.draw(a,b,c,this.symbolTravelled)},O1012:function(a,b,c){this.draw(a,b,c,this.symbolFind)},O8705:function(a,b,c){this.draw(a,b,c,this.symbolPerson)},O6065:function(a,b,c){this.draw(a,
b,c,this.symbolNothing)},O8309:function(a,b,c){this.draw(a,b,c,this.reloadBodiesButton)},O4498:function(a,b,c){this.draw(a,b,c,this.collectedIcon)},O9641:function(a,b,c){this.draw(a,b,c,this.healthHeart)},O8789:function(a,b,c){this.draw(a,b,c,this.healthBar)},O4169:function(a,b,c){this.draw(a,b,c,this.healthBarInner)},O1238:function(a,b,c){this.draw(a,b,c,this.healthBarPulse)},O6068:function(a,b,c){this.draw(a,b,c,this.highlightRound)},O4697:function(a,b,c){this.draw(a,b,c,this.highlightRotation)},
O2930:function(a,b,c){this.draw(a,b,c,this.highlightItem)},O1574:function(a,b,c){this.draw(a,b,c,this.highlightEmptyGrid)},O8096:function(a,b,c){this.draw(a,b,c,this.highlightItem)},O2331:function(a,b,c){this.draw(a,b,c,this.movementDirectionIndicatorV)},O3779:function(a,b,c){this.draw(a,b,c,this.movementDirectionIndicatorH)},O1234:function(a,b,c){this.draw(a,b,c,this.playerDialogOkButton)},O5232:function(a,b,c){this.draw(a,b,c,this.playerDialogAvatarSelectButton)},O3965:function(a,b,c){this.draw(a,
b,c,this.playerDialogMyPeopleBtnOvlay)},O8391:function(a,b,c){this.draw(a,b,c,this.playerDialogMyPeopleStatusBar)},O3557:function(a,b,c){this.draw(a,b,c,this.playerDialogBackArrow)},O7962:function(a,b,c){this.draw(a,b,c,this.visitedLocationFrame)},O9206:function(a,b,c){this.draw(a,b,c,this.visitedLocationVisitedButton)},drawVisitedLocationVisitedButtonOn:function(a,b,c){this.draw(a,b,c,this.visitedLocationVisitedButtonOn)},O9440:function(a,b,c){this.draw(a,b,c,this.visitedLocationListedPubliclyChecked)},
O2886:function(a,b,c){this.draw(a,b,c,this.visitedLocationListedPubliclyUnchecked)},O3773:function(a,b,c){this.draw(a,b,c,this.findButton)},O5694:function(a,b,c){this.draw(a,b,c,this.transportButton)},O9174:function(a,b,c){this.draw(a,b,c,this.openMapThereButton)},O4184:function(a,b,c){this.draw(a,b,c,this.infoButton)},O5057:function(a,b,c){this.draw(a,b,c,this.infoSymbol)},O7685:function(a,b,c){this.draw(a,b,c,this.zoomSymbol)},O7860:function(a,b,c){this.draw(a,b,c,this.distanceIndicator)},O1911:function(a,
b,c){this.draw(a,b,c,this.distanceIndicatorWhite)},O7588:function(a,b,c){this.draw(a,b,c,this.distanceIndicatorClose)},O9722:function(a,b,c){this.draw(a,b,c,this.panelBGTop)},O8275:function(a,b,c){this.draw(a,b,c,this.panelBottom)},O9435:function(a,b,c){this.draw(a,b,c,this.panelEmptyMessage)},O1047:function(a,b,c){this.draw(a,b,c,this.panelCreateNewButton)},O7476:function(a,b,c){this.draw(a,b,c,this.panelCreateNewButtonRankNeeded)},O9214:function(a,b,c){this.draw(a,b,c,this.panelBinClosed)},O6480:function(a,
b,c){this.draw(a,b,c,this.panelBinOpen)},drawPanelBinMessage:function(a,b,c){this.draw(a,b,c,this.panelBinMessage)},O6689:function(a,b,c){this.draw(a,b,c,this.panelRotateMessage)},O9685:function(a,b,c){this.draw(a,b,c,this.panelSetHideButton)},O4713:function(a,b,c){this.draw(a,b,c,this.panelSetShowButton)},O8904:function(a,b,c){this.draw(a,b,c,this.panelTabCollectedOn)},O2706:function(a,b,c){this.draw(a,b,c,this.panelTabCollectedOff)},O6223:function(a,b,c){this.draw(a,b,c,this.panelTabCreatedOn)},
O7840:function(a,b,c){this.draw(a,b,c,this.panelTabCreatedOff)},O5099:function(a,b,c){this.draw(a,b,c,this.panelTabSearchOn)},O5588:function(a,b,c){this.draw(a,b,c,this.panelTabSearchOff)},O3259:function(a,b,c){this.draw(a,b,c,this.panelTabCollectedOldOn)},O9859:function(a,b,c){this.draw(a,b,c,this.panelTabCollectedOldOff)},O7768:function(a,b,c){this.draw(a,b,c,this.panelTabCreatedOldOn)},O3025:function(a,b,c){this.draw(a,b,c,this.panelTabCreatedOldOff)},O5112:function(a,b,c){this.draw(a,b,c,this.pageButtonUp)},
O9461:function(a,b,c){this.draw(a,b,c,this.pageButtonDown)},O6783:function(a,b,c){this.draw(a,b,c,this.pageButtonLeft)},O9451:function(a,b,c){this.draw(a,b,c,this.pageButtonRight)},O4832:function(a,b,c){this.draw(a,b,c,this.thumbUpSmall)},O1697:function(a,b,c){this.draw(a,b,c,this.miftsButton)},O3386:function(a,b,c){this.draw(a,b,c,this.addMiftButton)},draw:function(a,b,c,d){if(d.opacity||c){var e=ig.system.context.globalAlpha;ig.system.context.globalAlpha=d.opacity||c}d.cachedImage||(d.key||(d.key=
d.x+"_"+d.y+"_"+d.width+"_"+d.height),d.cachedImage=this.getImage(d));d.cachedImage.draw(a,b);if(d.opacity||c)ig.system.context.globalAlpha=e},O9475:function(a,b,c,d,e,f){var g=ig.system.context.globalAlpha;if(d.opacity||c)ig.system.context.globalAlpha=d.opacity||c,console.log("alpha");this.image.O9475(a,b,e,f,d.x,d.y,d.width,d.height);if(d.opacity||c)ig.system.context.globalAlpha=g},getImage:function(a){if(!this.image.loaded)return console.error("tried to load subspritesheet before spritesheet loaded"),
null;a.key||console.error("tried to load subspritesheet without key");if(!this.O5951[a.key]){var b=this.image.data,c=a.width*ig.system.scale,d=a.height*ig.system.scale,e=document.createElement("canvas");e.width=c;e.height=d;e.getContext("2d").drawImage(b,a.x*ig.system.scale,a.y*ig.system.scale,c,d,0,0,c,d);b=new ml.Image(null,null,null,e);b.path="extracted/"+a.key;this.O5951[a.key]=b}return this.O5951[a.key]}})});ig.baked=!0;
ig.module("game.core.spritesheetboostdialog").requires("mlframe.image").defines(function(){window.SpriteSheetBoostDialog=ig.Class.extend({image:null,O5951:{},background:{x:0,y:294,width:203,height:203},O9696:jQuery.Deferred(),O8747:null,multipliedButton:{sound:8,interaction:10,happening:12},init:function(){for(var a=ig.game.O7606.namesInSpriteSheetOrder.length,b=0,c=Math.ceil(a/10),d=0;d<c;d++){for(var e=0;10>e;e++){b++;var f=ig.game.O7606.namesInSpriteSheetOrder[b-1];if(f){var g=[];if(this.multipliedButton[f])for(var h=
1;h<=this.multipliedButton[f];h++)g.push(f+"_"+h);else g.push(f);for(h=0;h<g.length;h++)f=g[h],ig.game.O7606.O9377(f)?(name="button_"+f,this[name]={x:e*(ig.game.O9925+1),y:d*(ig.game.O9925+1),width:ig.game.O9925,height:ig.game.O9925}):console.warn("Boost name not found",f)}if(b>=a)break}if(b>=a)break}var k=this;this.O8747=this.O9696.promise();this.image=new ml.Image(ig.game.O1946+"media/spritesheet-boostdialog.png?v="+ig.game.version,function(){k.O9696.resolveWith(k)},this)},getImage:function(a){if(!this.image.loaded)return null;
a.key||console.error("tried to load subspritesheet without key");if(!this.O5951[a.key]){var b=this.image.data,c=a.width*ig.system.scale,d=a.height*ig.system.scale,e=document.createElement("canvas");e.width=c;e.height=d;e.getContext("2d").drawImage(b,a.x*ig.system.scale,a.y*ig.system.scale,c,d,0,0,c,d);b=new ml.Image(null,null,null,e);b.path="extracted/"+a.key;this.O5951[a.key]=b}return this.O5951[a.key]},draw:function(a,b,c,d){var e=ig.system.context.globalAlpha;if(d.opacity||c)ig.system.context.globalAlpha=
d.opacity||c;this.image.draw(a,b,d.x,d.y,d.width,d.height);if(d.opacity||c)ig.system.context.globalAlpha=e}})});ig.baked=!0;
ig.module("game.core.playerstatusobserver").requires("impact.impact","game.entities.player").defines(function(){window.PlaterStatusObserver=ig.Class.extend({lastState:{},O2200:5,O4642:1,O3745:5,O2740:null,O4026:null,player:null,O6533:!1,O4364:!1,init:function(a){a&&(this.O2200=a);this.player=ig.game.O1257;this.O8518=ig.game.O8518;this.setUpdatesPerSecond(this.O4642)},setUpdatesPerSecond:function(a){this.O3745=a;this.O5292()},O5292:function(){this.O2740=1E3/this.O3745},O3817:function(a){this.O3745=
(this.O6533=a)?this.O2200:this.O4642},update:function(){this.player&&!this.player.isDead&&this.player.O2970&&(Date.now()-this.O4026>=this.O2740||this.O9738())&&(this.O4026=Date.now(),ig.game.O3805?this.O5834():this.O1446())},O9738:function(){return(!this.O4364||this.O6533)&&(this.bigVelocityChange()||this.justReleasedHControl()||this.O3579()||this.O5572()||this.O5123())},O5834:function(){if(!this.lastState.pos||!this.lastState.vel||this.lastState.pos.x!=this.player.pos.x||this.lastState.pos.y!=this.player.pos.y||
this.lastState.vel.x!=this.player.vel.x||this.lastState.vel.y!=this.player.vel.y||this.lastState.O1472Name!=this.player.O8393.name||this.lastState.flipped!=this.player.O8418){this.lastState.pos={x:this.player.pos.x,y:this.player.pos.y};this.lastState.vel={x:this.player.vel.x,y:this.player.vel.y};this.lastState.O1472Name=this.player.O8393.name;this.lastState.flipped=this.player.O8418;var a=2;this.player.O2027==this.player.O6917?a=1:this.player.O2027==this.player.O6038&&(a=3);ig.game.O7836.binary.O6632(this.player.pos,
this.player.vel,this.player.accel,this.player.O8393.O1812Index,this.player.O8418,a,this.player.O9165)}},O1446:function(){var a={};var b={};var c={};a.x=Math.round(100*ig.game.O1257.pos.x)/100;a.y=Math.round(100*ig.game.O1257.pos.y)/100;b.x=Math.round(1E3*ig.game.O1257.vel.x)/1E3;b.y=Math.round(1E3*ig.game.O1257.vel.y)/1E3;c.x=Math.round(10*ig.game.O1257.accel.x)/10;c.y=Math.round(10*ig.game.O1257.accel.y)/10;if(!this.lastState.pos||!this.lastState.vel||this.lastState.pos.x!=a.x||this.lastState.pos.y!=
a.y||this.lastState.vel.x!=b.x||this.lastState.vel.y!=b.y||this.lastState.O1472Name!=ig.game.O1257.O8393.name||this.lastState.flipped!=ig.game.O1257.O8418){this.lastState.pos=a;this.lastState.vel=b;this.lastState.O1472Name=ig.game.O1257.O8393.name;this.lastState.flipped=ig.game.O1257.O8418;var d=2;ig.game.O1257.O2027==ig.game.O1257.O6917?d=1:ig.game.O1257.O2027==ig.game.O1257.O6038&&(d=3);a={pos:a,vel:b,acl:c,ani:ig.game.O1257.O8393.name,flp:ig.game.O1257.O8418,g:d};ig.game.O1257.O9165!=ig.game.O1257.O4583.RUNNING&&
(ig.game.O1257.O9165==ig.game.O1257.O4583.CLIMBING?a.act=ig.game.O1257.O4583.CLIMBING:ig.game.O1257.O9165==ig.game.O1257.O4583.SWIMMING&&(a.act=ig.game.O1257.O4583.SWIMMING));ig.game.O7836.O6632(a)}},bigVelocityChange:function(){if(this.lastState.vel){if(0<Math.abs(this.player.vel.x)&&0==this.lastState.vel.x||0<Math.abs(this.player.vel.y)&&0==this.lastState.vel.y)var a=!0;if(0<Math.abs(this.lastState.vel.x)&&0==this.player.vel.x||0<Math.abs(this.lastState.vel.y)&&0==this.player.vel.y)var b=!0;if(0<
this.player.vel.x&&0>this.lastState.vel.x||0>this.player.vel.x&&0<this.lastState.vel.x||0<this.player.vel.y&&0>this.lastState.vel.y||0>this.player.vel.y&&0<this.lastState.vel.y)var c=!0}return a||b||c},justReleasedHControl:function(){if(this.player.O4109)return this.player.O4109=!1,!0},O3579:function(){if(ig.game.O9072())return!0},O5572:function(){if(this.player.forceSend)return this.player.forceSend=!1,!0},O5123:function(){return this.lastState.O1472Name!=this.player.O8393.name||this.lastState.flipped!=
this.player.O8418}})});ig.baked=!0;
ig.module("game.core.validations").defines(function(){window.Validations=ig.Class.extend({playerName:{maxLength:20,noName:"no name",clean:function(a){a=String(a);a=a.replace(/[^0-9a-zA-Z!? \*.,-]/g,"");return a.substring(0,this.maxLength)},isValid:function(a){var b=!1;"string"==typeof a&&(b=a.search(/[a-z]/i),b=a==this.clean(a)&&-1!=b&&2<=a.length);return b},O1186:function(a){a=this.clean(a);""==a&&(a=this.noName);return a}},itemName:{maxLength:37,noName:"no name",clean:function(a){a=String(a);a=
a.replace(/[^0-9a-zA-Z!? .,--:;_\(\)\[\]\$%@~\*'\^#&]/g,"");a=ig.game.strings.trim(a);a=a.toLowerCase();return a.substring(0,this.maxLength)},isValid:function(a){return a==this.clean(a)},O1186:function(a){a=this.clean(a);""==a&&(a=this.noName);return a}},O5241:function(a){return/^[0-9a-fA-F]{24}$/.test(a)},O5842:function(a){return RegExp("^((ft|htt)ps?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%@_.~+&:]*)*(\\?[;&a-z\\d%@_.,~+&:=-]*)?(\\#[-a-z\\d_]*)?$",
"i").test(a)}})});ig.baked=!0;
ig.module("game.core.mapplacementvalidation").defines(function(){window.MapPlacementValidation=ig.Class.extend({O1394:function(a,b,c,d,e,f){for(var g=!0,h=c;h<=e;h++)for(var k=d;k<=f;k++){var l={x:h,y:k};if(!(h==c&&k==d||h==e&&k==d||h==e&&k==f||h==c&&k==f))if(l=ig.game.O6112.O8704(l),b){if(l){g=!1;break}}else if(!l||!l.thing||l.thing.id!=a){g=!1;break}}return g},O8227:function(a,b){var c="SOLID DECOBG DECO DECOFG LQDFLIP LIQUID SLIDEY CLIMB PUSH PUSHDIAG SPARKLING FLEXIBLE WALKABLE PASS DECOANIM DEADLY HARM FURRY CLOTHY DRIFTY".split(" ");b&&
c.push("BOUNCEY");return 0<=c.indexOf(a)},O9449:function(){var a=2<=ig.game.O1257.rank;a||ig.game.O1002.O7063();return a},O9195:function(a,b,c){var d=void 0;c&&(d={x:Math.round(ig.input.mouse.x+ig.game.screen.x),y:Math.round(ig.input.mouse.y+ig.game.screen.y)});return this.isEditor(b)&&!this.O8524(a,b,d)&&!this.O9416(a,b,"FILLLIGHT",EntityFilllight,ig.game.O5119.environment)&&!this.O9416(a,b,"FARBACK",EntityFarback,ig.game.O5119.farBack,void 0,30)&&!this.O9416(a,b,"TRANSFORM",EntityTransform,void 0,
[ig.game.O5119.default,ig.game.O5119.decoEffects],20)&&!this.O9416(a,b,"MULTITHING",EntityMultithing,void 0,[ig.game.O5119.default,ig.game.O5119.decoEffects],4,400)&&!this.O2922(a,b)&&!this.O8653(a,b)},isEditor:function(a){var b=ig.game.isEditorHere;b||a||ig.game.O5058.O8943("editorOnly");return b},O8524:function(a,b,c){var d=!1;if(a){"INTERACT"==a.base&&!a.checksNears&&ig.game.O2116.O2792(a.textData)&&(a.checksNears=!0);var e=ig.game.O2082.O2732(a.attributes),f="ENVIRONM"==a.base&&e,g="STACKHOLD"==
a.base&&e,h=0<=["GATHER","INTERACT"].indexOf(a.base)&&e,k="DEADLY DEADLYMV HARM HARMANIM HARMFLIP DEADLYEM HAPPENING".split(" "),l=!!a.reactsTo,m=!!a.checksNears,n=ig.game.O4873.O1492();c||=ig.game.O4507(ig.game.O1257.pos);var p=ig.game.O4296;c=ig.game.O4873.O6714(c);p&&c&&"WALKABLE"==a.base?(b||ig.game.O1257.say(ig.game.O4873.O6566()),d=!0):p&&"HELPER"==a.base&&a.attributes&&a.attributes.settings?(ig.game.O5058.O7948("i cannot place this here"),d=!0):"INDIVIDUALS"==ig.game.O5549?(d=!1,"MEDIUM"==
a.base&&(d=a.url&&(0<=a.url.indexOf("vimeo.com")||0<=a.url.indexOf("imgur.com")||0<=a.url.indexOf("vine.co"))?5>ig.game.O1257.rank:!1),d&&!b&&ig.game.sounds.nocando.play()):p&&0<=["MEDIUM","PLACENAME"].indexOf(a.base)&&5>ig.game.O1257.rank?(b||ig.game.sounds.nocando.play(),d=!0):n&&(l||m)?(b||ig.game.O5058.O8943("cantPlaceReactingInteracting"),d=!0):p&&(f||"INTERENV"==a.base)?(b||ig.game.sounds.nocando.play(),d=!0):"ANY"==ig.game.O5549&&c&&5<=ig.game.O1257.rank&&0<=["FILLLIGHT","VIGNETTE","TRANSFORM"].indexOf(a.base)?
d=!1:n&&(c||5>ig.game.O1257.rank)&&(0<=["FILLLIGHT","VIGNETTE","BRAIN","TRANSFORM"].indexOf(a.base)||0<=k.indexOf(a.base)||g||h||"INTERACT"==a.base&&e|l|m)?(b||(c&&5<=ig.game.O1257.rank?ig.game.O1257.say(ig.game.O4873.O6566()):ig.game.sounds.nocando.play()),d=!0):p&&5>ig.game.O1257.rank&&c&&(b||ig.game.O1257.say(ig.game.O4873.O6566()),d=!0)}return d},O8653:function(a,b){var c=!1;if(a&&"HAPPENING"==a.base&&ig.game.O5119.default&&1<=ig.game.O5119.default.length&&(a=ig.game.O5119.default))for(var d=
0;d<a.length;d++){var e=a[d];if(!e._killed&&e instanceof EntityHappening){c=!0;b||ig.game.O1257.say("there's already a happening placed around here");break}}return c},O9416:function(a,b,c,d,e,f,g,h){var k=!1;if(a&&a.base==c&&(e&&1<=e.length||f&&1<=f.length)){a=0;void 0==g&&(g=10);h||=700;var l=ig.game.O6112.O1858();c={pos:{x:null,y:null},size:{x:null,y:null}};c.pos.x=l.x*ig.game.O9925;c.pos.y=l.y*ig.game.O9925;c.size={x:ig.game.O9925,y:ig.game.O9925};e=f?f:[e];for(f=0;f<e.length&&!k;f++)for(l=0;l<
e[f].length&&!k;l++){var m=e[f][l];!m._killed&&m instanceof d&&parseInt(m.O2144(c))<=h&&++a>=g&&(k=!0,b||ig.game.O1257.say("there are too many of this nearby already"))}}return k},O2922:function(a,b){function c(h){var k=0;h.attributes&&(h.attributes.thick?k=1:h.attributes.veryThick&&(k=2));return k}var d=!1;if(a&&"VIGNETTE"==a.base&&ig.game.O5119.light&&1<=ig.game.O5119.light.length){a=c(a);var e=ig.game.O5119.light;if(e)for(var f=0;f<e.length;f++){var g=e[f];if(!g._killed&&g instanceof EntityVignette&&
a!=c(g)){b||ig.game.O1257.say("surround lights of different thickness don't mix");d=!0;break}}}return d}})});ig.baked=!0;
ig.module("game.core.navigationmanager").defines(function(){window.NavigationManager=ig.Class.extend({targetPlayerId:null,targetMapLocation:null,trackingMode:0,playerName:"",margin:{x1:50,y1:20,x2:100,y2:50},pos:{x:0,y:0},O2556:0,arrowPos:{x:-14,y:14},indicatorDataPos:{x:5,y:15},namePos:{x:5,y:6},closePos:{x:14,y:13},closeSize:{x:7,y:7},O2426:!1,O8381:!1,O2418:35,O8700:0,O1324:!1,O9959:null,O8604:0,O2615:!1,targetIntermediateMapTarget:null,tilesize:19,arrow:null,O5385:null,O1585:null,O8686:20,O8385:null,
O6084:10,alpha:1,maxAlpha:.5,alphaInc:.016,O7269:2,O8359:"to outer ring",O8645:"to inner ring",init:function(){var a=ig.game.O8159.distanceIndicatorArrow;this.O5385=new ml.AnimationSheet(null,a.width,a.height,ig.game.O8159.getImage(a));this.arrow=new ml.Animation(this.O5385,1,[0]);this.alpha=this.maxAlpha},O9874:function(a){if(ig.game.O1257.rank>=this.O7269){var b=this;if(window.location.hash&&-1==window.location.hash.indexOf("=")){var c=window.location.hash.substring(1).toLowerCase();"_=_"!=c&&ig.game.O9817.O2699(c).done(function(d){d&&
void 0!=d.x&&void 0!=d.y&&b.O2847(d,a)})}}},O7472:function(a){ig.game.O9817.O2699(a).done(function(b){b&&void 0!=b.x&&void 0!=b.y&&ig.game.O2453.O2847(b,!0)})},O1647:function(a){return ig.game.O9817.O2699(a)},O9408:function(){if(ig.game.isFullAccount){var a;this.trackingMode!=this.trackingModes.NONE&&(a={targetPlayerId:this.targetPlayerId,targetMapLocation:this.targetMapLocation,trackingMode:this.trackingMode,playerName:this.playerName});ig.game.O9817.O6316(a)}},O9132:function(a){a&&(a.trackingMode==
this.trackingModes.PLAYER?this.O7494(a.targetPlayerId,a.playerName):a.trackingMode==this.trackingModes.MAPLOC&&this.O2847(a.targetMapLocation))},O7494:function(a,b){this.O8381=!1;this.targetPlayerId=a;this.playerName=b;this.trackingMode=this.trackingModes.PLAYER;this.O1585=new ml.Timer;this.O9186(!0)},O8449:function(a,b){this.O8381=!1;this.O7494(a,b);this.O9408();this.O5156()},setTargetMapLocationOnAutoPilot:function(a){this.O8381=!0;this.O2847(a)},O2847:function(a,b){if(a&&"undefined"!=typeof a.p&&
"undefined"!=typeof a.a&&"undefined"!=typeof a.x&&"undefined"!=typeof a.y)if(this.targetMapLocation=a,this.playerName=null,ig.game.O4873.O3963(a))this.trackingMode=this.trackingModes.MAPLOC,this.O9959=ig.game.O6112.O2132(a.x,a.y),this.targetIntermediateMapTarget=null,b&&this.O5156();else{var c=this;ig.game.O9817.O5857(ig.game.O4873.O8027,ig.game.O4873.currentArea,a.p,a.a).done(function(d){d&&(c.trackingMode=c.trackingModes.MAPLOC,c.O9959=ig.game.O6112.O2132(d.x,d.y),c.targetIntermediateMapTarget=
{},b&&c.O5156())})}},O1123:function(a){this.O8381=!1;this.O2847(a);this.O9408();this.O5156()},O2441:function(){this.O8381=!1;var a=this;ig.game.O9817.O4503(ig.game.O4873.O8027,ig.game.O4873.currentArea).done(function(b){b&&a.O1123(b)})},O5969:function(a){this.O8381=!1;this.trackingMode=this.trackingModes.NONE;this.O1585=null;this.O9408()},update:function(){this.trackingMode!=this.trackingModes.NONE&&(this.O8420(),this.O9186(),this.O8802(),this.O7989(),this.O2061(),this.O6403(),this.O2794())},O5156:function(){0>=
this.O8700&&!this.O8381&&(this.O8700=this.O2418,ig.game.sounds.shortWhoosh.play())},O9186:function(a){if(this.trackingMode==this.trackingModes.PLAYER){var b=ig.game.O7465(this.targetPlayerId);if(b)this.O9959=b.pos,this.targetIntermediateMapTarget=null;else if(a||this.O1585&&this.O1585.delta()>this.O8686)this.targetPlayerId?(this.O1585.reset(),ig.game.O8518.O9189(this.targetPlayerId,this).done(function(c){if(c)if(ig.game.O4873.O3963(c))ig.game.O7283||(this.O9959=ig.game.O6112.O2132(c.x,c.y),this.targetIntermediateMapTarget=
null);else{if(!this.targetIntermediateMapTarget||this.targetIntermediateMapTarget.targetPlayerPreviousPlane!=c.p||this.targetIntermediateMapTarget.targetPlayerPreviousArea!=c.a){var d=this;ig.game.O9817.O5857(ig.game.O4873.O8027,ig.game.O4873.currentArea,c.p,c.a).done(function(e){e&&(d.O9959=ig.game.O6112.O2132(e.x,e.y),d.targetIntermediateMapTarget={},d.targetIntermediateMapTarget.targetPlayerPreviousPlane=c.p,d.targetIntermediateMapTarget.targetPlayerPreviousArea=c.a)})}}else this.targetIntermediateMapTarget=
this.O9959=null})):this.O5969()}},O7989:function(){this.O2615?0<this.alpha&&(this.alpha=Math.max(this.alpha-this.alphaInc,0)):1>this.alpha&&(this.alpha=Math.min(this.alpha+this.alphaInc,this.maxAlpha))},O8802:function(){this.O9959&&(ml.Misc.O9680({x:this.O9959.x,y:this.O9959.y})&&!this.O2615&&((Date.now()-this.O8385)/1E3>this.O6084&&ig.game.sounds.found.play(),this.O8385=Date.now()),this.O2615=ml.Misc.O9680({x:this.O9959.x,y:this.O9959.y}))},O2794:function(){if(this.O8381&&this.O2615){var a=ml.Misc.O5701(ig.game.O1257,
EntityPointer);if(a){var b=this;ig.game.O9817.O2699(a.url).done(function(c){b.targetMapLocation.x!=c.x&&b.targetMapLocation.y!=c.y&&ig.game.O2453.setTargetMapLocationOnAutoPilot(c)})}}},O6403:function(){if(this.O9959){var a=this.O9959.y-ig.game.screen.y+ig.game.camera.offset.y;this.pos.x=Math.max(Math.min(this.O9959.x-ig.game.screen.x+ig.game.camera.offset.x-ig.game.camera.offset.x,ig.system.width-this.margin.x2),this.margin.x1);this.pos.y=Math.max(Math.min(a-ig.game.camera.offset.y,ig.system.height-
this.margin.y2),this.margin.y1);a=this.O9633(this.O9959,ig.game.O1257.pos);this.arrow.angle=a-1.6}},draw:function(){this.O8381||this.trackingMode==this.trackingModes.NONE||!this.O9959||ig.game.userMapDialog&&ig.game.userMapDialog.isOpen||(ig.system.context.globalAlpha=.9*this.alpha,ml.Misc.O5847("lighter"),this.trackingMode==this.trackingModes.PLAYER?this.targetIntermediateMapTarget?ig.game.whiteFont.draw(this.O9224(),this.pos.x+this.namePos.x,this.pos.y+this.namePos.y,ig.Font.ALIGN.CENTER):ig.game.whiteFont.draw(this.O1236(this.playerName,
13),this.pos.x+this.namePos.x,this.pos.y+this.namePos.y,ig.Font.ALIGN.CENTER):this.trackingMode==this.trackingModes.MAPLOC&&this.targetIntermediateMapTarget&&ig.game.whiteFont.draw(this.O9224(),this.pos.x+this.namePos.x,this.pos.y+this.namePos.y,ig.Font.ALIGN.CENTER),ig.game.whiteFont.draw(ig.game.strings.O9754(this.distance),this.pos.x+this.indicatorDataPos.x,this.pos.y+this.indicatorDataPos.y,ig.Font.ALIGN.CENTER),this.arrow.draw(this.pos.x+this.arrowPos.x,this.pos.y+this.arrowPos.y),this.O2426||
ig.game.O8159.O7588(this.pos.x+this.closePos.x,this.pos.y+this.closePos.y),ig.system.context.globalAlpha=1,ml.Misc.O3715(),.5<=this.alpha&&0<this.O8700&&ig.game.chance(35)&&(ig.game.decorator.O9250(ig.game.O4293(this.pos.x-32,this.pos.x+40),ig.game.O4293(this.pos.y,this.pos.y+30),null),this.O8700--))},O9224:function(){return 1==ig.game.O4873.O8027?this.O8645:this.O8359},O1236:function(a,b){var c="";"string"===typeof a&&(c=a.length>b?a.substring(0,b-1)+"..":a);return c},O2061:function(){this.O9959&&
(this.distance=Math.floor(Math.sqrt((this.O9959.x-ig.game.O1257.pos.x)*(this.O9959.x-ig.game.O1257.pos.x)+(this.O9959.y-ig.game.O1257.pos.y)*(this.O9959.y-ig.game.O1257.pos.y))/this.tilesize))},O8420:function(){var a=ig.game.O4774.O8299(this.pos.x+this.closePos.x,this.pos.y+this.closePos.y,this.pos.x+this.closePos.x+this.closeSize.x,this.pos.y+this.closePos.y+this.closeSize.y);a&&ig.game.O4774.O7551();a&&ig.game.O4774.O4920()&&(ig.game.O4774.O6730(!0),this.O5969())},trackingModes:{NONE:0,PLAYER:1,
MAPLOC:2},O9633:function(a,b){return Math.atan2(b.y-a.y,b.x-a.x)}})});ig.baked=!0;
ig.module("game.core.keyboardmanager").defines(function(){window.KeyboardManager=ig.Class.extend({isSpeaking:!1,O7221:!1,thumbing:null,O02:null,O7428:null,symbolPos:{x:0,y:0},symbolSize:{x:0,y:0},O9940:.5,O9977:null,O3735:.75,O4695:null,O6691:.4,O2962:null,O6937:[],O8952:[],O7202:4,O1534:[],O6224:60,abc:"abcdefghijklmnopqrstuvwxyz".split(""),O7671:"zero one two three four five six seven eight nine".split(" "),numberWordsMapping:{one:"1",two:"2",three:"3",four:"4",five:"5",six:"6",seven:"7",eight:"8",
nine:"9",zero:"0"},O3799:[],O8867:{},O6992:"r",O5011:0,O3279:null,moveChars:["w","a","s","d"],O3868:0,O8665:"to the left;to the right;to infinity and beyond;to be ;to answer your;to hell with;to whom it may;to the back;to the center;to something;to do ;to create;to change;to kill you;to collect;to you too;to place blocks;to that area;to do what;to do that;to restart;to the center;to escape quick;to do better;to my friends;to get out;to refresh;to get air;to go home;to the back;to delete".split(";"),
O8368:"deadly crumbling people body drifty clothy furry".split(" "),O9490:{"interactive environment":["int. environment"],deadly:["deadlies"],"item thrower":["thrower"],"open on activate":["openable","open on activation","opens on activation","opening on activation"],"moving living":["mov. living"],writable:["forum"],"far back":["farback"],"place name":["placename"],crumbling:["crumblings","crumble"],people:["person"],body:["bodies"],holdable:["item"],drifty:["drifties"],clothy:["clothies"],furry:["furries"],
"back+front":["back and front"],"change on activate":"chang. on activ.;change on activation;changes on activate;changes on activation;changing on activate;changing on activation".split(";"),"change on touch":["chang. on touch","changes on touch","changing on touch"]},O1581:{light:["Light","Lighttop","Filllight","Vignette","Glow"],"fill light":["Filllight"],"surround light":["Vignette"],"top light":["Lighttop"],glow:["Glow"],interacting:["Interact"],"interactive environment":["Interenv"],harmful:["Harm",
"Harmanim","Deadly","Deadlymv","Deadlyem"],deadly:["Deadly","Deadlymv","Deadlyem"],moving:["Moving"],"item thrower":["Thrower"],activator:["Activator"],"open on activate":["Openable"],living:["Living"],"moving living":["Livmov"],liquid:["Liquid","Lqdflip"],readable:["Readable"],writable:["Writable"],dynamic:["Dynathing"],happening:["Happening"],environment:["Environm"],crumbling:["Crumbling"],"far back":["Farback"],gatherable:["Gather"],"place name":["Placename"],people:["Player"],brain:["Brain"],
"big thing":["Decobig"],"very big thing":["Decovbig"],liner:["Liner"],sound:["Sound"],sparkling:["Sparkling"],helper:["Helper"],multi:["Multithing"],body:["Stackwearb"],wearable:["Stackwear"],instrument:["Stackinstr"],holdable:["Stackhold"],mountable:["Mntground","Mntair"],"flying mountable":["Mntair"],holder:["Holder"],medium:["Medium"],portal:["Portal","Portaldir","Portalr"],transporting:["Portal"],"directional transporting":["Portaldir"],"ring portal":["Portalr"],music:["Music"],musical:["Musical"],
"music sheet":["Musicsheet"],equipment:["Equipment"],consumable:["Consumab"],"swing line":["Hook"],emitter:["Emitter"],aimable:["Aimable"],motion:["Motion"],drifty:["Drifty"],clothy:["Clothy"],"lively thing":["Lively"],changer:["Changer"],transforming:["Transform"],pointer:["Pointer"],furry:["Furry"],flexible:["Flexible"],"back+front":["Decofb"],"change on activate":["Decoact"],"change on touch":["Decotch"]},init:function(){this.setKeyboardCountry();this.symbolSize.x=ig.game.O8159.speechSymbol.width;
this.symbolSize.y=ig.game.O8159.speechSymbol.height;localStorage&&"true"==localStorage.ignoreWasdMovement&&(this.O7221=!0);setInterval(function(){ig.game.O5058.O3868=0},250)},setKeyboardCountry:function(a){this.O3799=[];this.O8867={};this.O5595("one","!");this.O5595("two",'"');this.O5595("five","%");this.O5595("eight","*");this.O5595("nine","(");this.O5595("zero",")");this.O5595("semicolon",":");this.O5595("single_quote",'"');this.O5595("squarebracket_open","{");this.O5595("squarebracket_close","}");
this.O5595("forwardslash","?");this.O5595("backwardslash","|");this.O5595("equal","+");this.O5595("minus","_");switch(a){case "france":this.O5595("two","e");this.O5595("three",'"');this.O5595("four","'");this.O5595("seven","e");this.O5595("eight","!");this.O5595("zero","a");break;case "germany":this.O5595("two","@");this.O5595("four","$");this.O5595("six","&");this.O5595("seven","/");this.O5595("eight","(");this.O5595("nine",")");this.O5595("zero","=");this.O5595("comma",";");this.O5595("period",
":");this.O5595("backquote","'");break;case "italy":this.O5595("two",'"');this.O5595("four","$");this.O5595("six","&");this.O5595("seven","/");this.O5595("eight","(");this.O5595("nine",")");this.O5595("comma",";");this.O5595("period",":");break;case "spain":this.O5595("two","@");this.O5595("three","#");this.O5595("four","$");this.O5595("six","&");this.O5595("seven","/");this.O5595("eight","(");this.O5595("nine",")");this.O5595("zero","=");this.O5595("comma",";");this.O5595("period",":");break;case "uk":this.O5595("two",
'"');this.O5595("four","$");this.O5595("seven","&");this.O5595("eight","*");this.O5595("nine","(");this.O5595("zero",")");this.O5595("comma","<");this.O5595("period",">");break;case "usa":this.O5595("two","@"),this.O5595("three","#"),this.O5595("four","$"),this.O5595("seven","&"),this.O5595("comma","<"),this.O5595("period",">"),this.O5595("backquote","~"),this.O5595("backslash","|")}},O5595:function(a,b){-1===this.O3799.indexOf(a)&&this.O3799.push(a);this.O8867[a]=b},update:function(){ig.game.O1795&&
(!ig.game.painter||ig.game.painter.isFocused)||ig.game.writableDialog.isWriting||ig.game.areaDialog.isOpen||0!=ig.game.O6550||(ig.O4534&&ig.O4534.audioContext&&ig.O4534.audioContext.state==="suspended"&&ig.O4534.audioContext.resume(),ig.game.O7993()?(0>=this.O5011&&!ig.game.O1257.attachments[ig.game.attachmentManager.slots.HOLDABLE]&&(this.O5011=7),ig.game.O1839&&"toArea"!=ig.game.O1839.attribute?ig.game.O1839.triggerFeature():ig.game.O6140?ig.game.O6140.O4147():ig.game.O7259?ig.game.O7259.O6079():
ig.game.O2354?ig.game.O2354.openDialogIfNeeded():ig.game.attachmentManager.O6246()):0<this.O5011?(this.O5011--,ig.game.attachmentManager.O6246(!0)):(this.O7221||this.O2763(),this.O7221&&(this.O1949(),this.O9209(),this.O7670(),this.O4288()),this.O2804(),this.O2226()))},O9424:function(){var a=ig.game.O1257.O4855.O5805();return a&&!a.moving&&!(ig.game.O3957&&ig.game.O3957.isOpen)},O6817:function(){return ig.input.state("l_arr")||ig.input.state("r_arr")||ig.input.state("u_arr")||ig.input.state("d_arr")},
O2804:function(){if(15<=this.O1534.length){for(var a=!0,b=0;15>b;b++){var c=this.O1534[b];if(c&&(c=c.toLowerCase(),-1===this.moveChars.indexOf(c))){a=!1;break}}a&&this.O8249()}},O2226:function(){ig.input.state("w")||ig.input.state("a")||ig.input.state("s")||ig.input.state("d")?this.O9977&&null!=this.O7274(this.abc)?this.O9977=null:(this.O9977||(this.O9977=new ml.Timer),this.O9977.delta()>this.O3735&&(this.O9664(),this.O8249(),ig.input.lastPressAction=null,ig.input.previousPressAction=null)):this.O9977=
null},O7670:function(a){(void 0!=a&&null!=a?a:ig.input.state("backspace"))?(this.O4695||(this.O4695=new ml.Timer),this.O4695.delta()>this.O6691&&this.O9682()):this.O4695=null},O7274:function(a){for(var b=null,c=0;c<a.length&&null==b;c++)ig.input.pressed(a[c])&&(b=a[c]);return b},O2763:function(){if(this.O6817()||ig.input.pressed("enter"))this.O942();else if(ig.input.pressed("w"))this.O6937=["w"];else if(null==this.O7274(["a","s","d"])&&(this.O7274(this.abc)||this.O7274(this.O7671)||ig.input.pressed("apostrophe")||
ig.input.pressed("colon"))||ig.input.pressed("single_quote")||ig.input.pressed("semicolon")||ig.input.pressed("forwardslash")||ig.input.pressed("equal")||ig.input.pressed("comma")||ig.input.pressed("minus")||ig.input.pressed("backquote")||ig.input.pressed("period")||ig.input.pressed("backslash")||ig.input.pressed("question"))this.O942(),ig.input.O9709("a")&&this.O9345("a"),ig.input.O9709("s")&&this.O9345("s"),ig.input.O9709("d")&&this.O9345("d")},O6813:function(){(!ig.game.O1257.O4855.O5805()||ig.game.O1257.O4855.O5805().isEmpty())&&
ig.input.pressed("enter")&&this.O8249()},O1949:function(){this.symbolPos=ig.game.O6112.O2094(ig.game.O1257.pos.x,ig.game.O1257.pos.y);this.symbolPos.y+=20},draw:function(){},O9209:function(){if(!(ig.game.instrumentDialog&&ig.game.instrumentDialog.isOpen&&ig.game.instrumentDialog.doUseKeyboardToPlay||ig.input.state("ctrl"))){if(ig.input.pressed("backspace"))this.O9664();else if(ig.input.pressed("esc"))this.O9682();else if(ig.input.pressed("enter")){var a=this.O1534.slice().reverse().join("");this.O3723();
0===a.toLowerCase().indexOf("to ")&&this.O4317(a);ig.game.multithing&&ig.game.multithing.O4778(a);this.O9514(a);this.O1534=[];ig.game.O1257.O6644=!1}else ig.input.pressed("space")&&this.O9345(" ");a=this.O7274(this.abc);ig.input.state("shift")?a?(this.O9345(a.toUpperCase()),ig.game.O1257.O2274(a)):(a=this.O7274(this.O3799))&&this.O9345(this.O8867[a]):ig.input.O7946&&a?(this.O9345(a.toUpperCase()),ig.game.O1257.O2274(a)):a?(this.O9345(a),ig.game.O1257.O2274(a),ig.game.O3957&&ig.game.O3957.isOpen&&
ig.game.O3957.close()):(a=this.O7274(this.O7671))?(this.O9345(this.numberWordsMapping[a]),ig.game.O1257.O2274(a)):ig.input.pressed("squarebracket_open")?"germany"==ig.game.settings.keyboardCountry?this.O9345("?"):this.O9345("["):ig.input.pressed("squarebracket_close")?this.O9345("]"):ig.input.pressed("single_quote")?this.O9345("'"):ig.input.pressed("semicolon")?this.O9345(";"):ig.input.pressed("forwardslash")?this.O9345("/"):ig.input.pressed("equal")?this.O9345("="):ig.input.pressed("comma")?this.O9345(","):
ig.input.pressed("period")?this.O9345("."):ig.input.pressed("minus")?this.O9345("-"):ig.input.pressed("backquote")?this.O9345("`"):ig.input.pressed("backslash")?this.O9345("\\"):ig.input.pressed("question")&&this.O9345("?")}},O5547:function(a){this.say("_nl");this.say("_thumbsUp");a==ig.game.O1257.O2970?this.say("me"):this.say("_p"+a);this.say("_nl")},O4093:function(){return ig.game.isFullAccount||!ig.game.O7836.O3051()||ig.game.nonLoggedInChatIfEditorAround&&ml.Misc.O7531()||ig.game.O9956&&ig.game.O4296},
O9345:function(a){if(this.O4093()){ig.game.O1257.O9381&&(ig.game.O1257.O9381=!1);0!=this.O1534.length||"/"!=a&&"*"!=a||(ig.game.O1257.O6644=!0);if(ig.game.isFullAccount&&!ig.game.O1002.O3256(ig.game.O1002.O9903.FREE_SPEECH_SPEAK))if(3>this.O1534.length){if((a=ig.game.O1257.O4855.O5805())&&a.moving)return;a=".";ig.game.sounds.nocando.play()}else return;ig.game.O1257.O9713()&&ig.game.chance(50>=ig.game.O1257.health?50:20)&&(a=a.toUpperCase());ig.game.O1257.O9943=new ml.Timer;80>=Math.abs(ig.game.O1257.vel.y)||
ig.game.O1257.isHooked?(this.O1534&&0==this.O1534.length&&ig.game.O3957.O9357(),this.say("_c"+a),this.O4025(a)):this.O6937[this.O6937.length]=a}else this.O8943("loginToChat")},O2482:function(a,b){if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0},O2145:function(a){a&&4<=a.length&&(a=a.substr(a.length-4),a.toUpperCase()==a&&a.toLowerCase()!=a&&ig.game.O3957&&ig.game.O3957.O8855("shout"))},O4025:function(a){this.O1534.unshift(a);this.O1534.length>this.O6224&&
this.O1534.splice(this.O6224);var b=this.O1534.slice().reverse().join("");this.O2145(b);this.O1540(b,a)},O9514:function(a){a=a.toLowerCase();("help"==a||"help!"==a)&&(2>=ig.game.O9392||1>=ig.game.O1257.rank)&&ml.Misc.O9447(!0)},O1540:function(a,b){if("!"==b)if(0===a.toLowerCase().indexOf("to "))this.O4317(a);else{b=ig.game.isEditorHere&&ig.game.O4482;b=0<=a.indexOf("myspeed!")||0<=a.indexOf("camlock!")||0<=a.indexOf("make things slower!")||0<=a.indexOf("explorify!")||0<=a.indexOf("clearstorage!")||
0<=a.indexOf("guardto!")||0<=a.indexOf("appversion!")||0<=a.indexOf("myversion!")||0<=a.indexOf("myv!")||0<=a.indexOf("myscreen!")||0<=a.indexOf("istablet!")||0<=a.indexOf("firstview!")||0<=a.indexOf("oldflags!")||0<=a.indexOf("togglejoystick!")||0<=a.indexOf("mystates!")&&ig.game.isEditorHere||0<=a.indexOf("speedinfo!")||0===a.indexOf("showme")||b&&(0===a.indexOf("dontpossess ")||0===a.indexOf("theyarent ")||0===a.indexOf("theyare "));var c=0<=a.indexOf("shazam!")||0<=a.indexOf("prototype!")||0<=
a.indexOf("areaglobal!")||0<=a.indexOf("geronimo!")||0<=a.indexOf("xhrpost!")||0<=a.indexOf("jqueryinfo!")||0<=a.indexOf("secureme!");if(b||c&&(ig.game.O1257.rank>=ig.game.O3774||ml.Misc.O7959()))this.O1534=[],this.O3723(),-1===a.indexOf("guardto!")&&ig.game.sounds.success.play(),0<=a.indexOf("shazam!")?ig.game.O3999(!0):0<=a.indexOf("speedinfo!")?this.O4519():0<=a.indexOf("geronimo!")?ig.game.errorManager.O2580():0<=a.indexOf("myspeed!")?ig.game.O7456.O9621():0<=a.indexOf("myversion!")||0<=a.indexOf("myv!")?
this.O7948("i'm on version "+ig.game.version):0<=a.indexOf("appversion!")?this.O5553():0<=a.indexOf("istablet!")?this.O7948("i'm "+(ig.ua.tablet?"":"not ")+"on a tablet"):0<=a.indexOf("myscreen!")?this.O4770():0<=a.indexOf("areaglobal!")?ml.Misc.O8515():0<=a.indexOf("explorify!")?ml.Misc.O5557():0<=a.indexOf("camlock!")?ig.game.camera.O3000():0<=a.indexOf("clearstorage!")?ig.game.O5285.clearAll():0<=a.indexOf("make things slower!")?ig.game.O7456.O1569():0<=a.indexOf("mystates!")?ig.game.O2116.showPlayerStates():
0<=a.indexOf("xhrpost!")?ig.game.O9817.testXhrPost():0===a.indexOf("dontpossess ")?ig.game.O3957.O5861(a):0===a.indexOf("theyare ")?ig.game.O2116.O1867(a):0===a.indexOf("theyarent ")?ig.game.O2116.O5648(a):0===a.indexOf("firstview!")?this.O2266():0===a.indexOf("togglejoystick!")?ig.game.virtualJoystick.O2494():0===a.indexOf("oldflags!")?ig.game.bottomMenu.O5711():0===a.indexOf("jqueryinfo!")?this.O7948(jQuery().jquery):0<=a.indexOf("secureme!")?ig.game.useSSL=!0:0===a.indexOf("showme")?this.O9353(a):
0===a.indexOf("zoomout!")&&this.O7538()}},O4519:function(){if(ig.game.debug.O4147||void 0!==ig.game.debug.O4260)ig.game.debug.clear(),ig.game.O3999(!1);ig.game.O3999(!1)},O9353:function(a){ig.game.debug.clear();var b=a.substring(6);"!"===b.charAt(b.length-1)&&(b=b.substring(0,b.length-1));b=b.trim().toLowerCase();if(""!==b)if(0<="* everything every any anything all".split(" ").indexOf(b))ig.game.debug.O4147=!0;else{a=[];var c=[];b=b.split(",");for(var d=0;d<b.length;d++)for(var e=0;1>=e;e++){var f=
b[d].trim(),g=f,h=!1;if(1===e)if("s"===f.charAt(f.length-1))f=f.substring(0,f.length-1),h=!0,this.O8368.includes(f)&&(f=g);else break;g=Object.keys(this.O9490);for(var k=0;k<g.length;k++){var l=g[k];if(this.O9490[l].includes(f)&&(!h||!this.O8368.includes(l))){f=l;break}}h=this.O1581[f];f=f.trim().toUpperCase();if(h&&!c.includes(f)){for(g=0;g<h.length;g++)a.push(ig.global["Entity"+h[g]]);c.push(f)}if(1<=a.length)break}0<a.length&&(ig.game.debug.O4260=a,ig.game.debug.O9459=c.join(", "))}ig.game.debug.O4147||
ig.game.debug.O4260?ig.game.debug.O8357||ig.game.O3999(!1):ig.game.debug.O8357&&ig.game.O3999(!1);ig.game.sounds.success.play()},O2266:function(){ig.game.isFullAccount&&2<=ig.game.O1257.rank||ig.game.O9450?(ig.game.O9450=!ig.game.O9450,ig.game.O9450?(ig.game.O1257.rank=1,ig.game.O9392=0,ig.game.O2004=0,ig.game.O1276=null,ig.game.bottomMenu.init(),ig.game.O1189.O9045()):window.location.reload()):ig.game.sounds.nocando.play()},O7538:function(){"true"==localStorage.extraZoomOut?(localStorage.removeItem("extraZoomOut"),
window.location.reload()):ig.game.isFullAccount&&2<=ig.game.O1257.rank?(localStorage.extraZoomOut="true",window.location.reload()):ig.game.sounds.nocando.play()},O5553:function(){var a="";a=ig.ua.isAndroidApp?a+("i'm on android app v"+ig.ua.androidAppVersion):a+"i'm not on the android app";this.O7948(a)},O4770:function(){this.O7948("my screen size is");setTimeout(function(){ig.game.O5058.O7948(ig.ua.viewport.width+" x "+ig.ua.viewport.height+" at "+ig.system.scale+"x zoom")},1500)},O8310:function(a,
b){for(var c=!1,d=0;d<b.length&&!c;d++)c=0===a.indexOf(b[d]);return c},O4317:function(a){if(ig.game.areaDialog&&(a=a.toLowerCase(),!this.O8310(a,this.O8665))){var b=a.substr(3);a=b.endsWith("!");b=ig.game.strings.replaceAll(b,"!","");b=b.trim();var c=ig.game.areaDialog.O8487,d=ig.game.areaDialog.nameMaxLength;this.O1534=[];b=ml.Misc.O2174(b);if("elsewhere"==b)ig.game.O4223||ig.game.portaller.startExitAreaTeleportingRequest();else if("last"==b)ig.game.portaller.O4433();else if("home"==b)ig.game.O1276&&
ig.game.portaller.O2121(ig.game.O1276);else if(b.length>=c&&b.length<=d||ig.game.O4873.O6966(b))if(a||!ig.game.settings.guardToTeleports)this.O4201(b);else{a=ig.game.O1257.O4855.O5805();a.clickText=new UIClickText({x:0,y:0},a.O4362,a.font,"#FFFFFF",a.opacity);a.clickText.align=ig.Font.ALIGN.CENTER;var e=this;a.clickText.onClick=function(){e.O4201(b)}}}},O4201:function(a){ig.game.isEditorHere?ig.game.portaller.O7749(a,!0):ig.game.portaller.O6417(a,!0)},O4288:function(){if(0==ig.game.O1257.vel.y&&1<=
this.O6937.length){if(2<=this.O6937.length)for(var a=0;a<this.O6937.length;a++)this.say("_c"+this.O6937[a]);this.O6937=[]}},O3723:function(a){a||this.O7972();ig.game.O1257.O6285=null;this.say("_nl")},O7972:function(){var a=this.O1534.slice().reverse().join("");"/"==a.substr(0,1)?(a=a.substr(1),ig.game.O2116.O4851("sees",a)):(ig.game.O2116.O4851("sees",a)||ig.game.O2116.O4851("hears",a),this.O9101(a)||ig.game.O1257.O1331("amplifies")?ig.game.O2116.O7884(ig.game.O1257,"shouts",a.toLowerCase()):ig.game.O2116.O7884(ig.game.O1257,
"says",a));ig.game.O2116.O7884(ig.game.O1257,"does",a);ig.game.O3957.O6339(a)},O9101:function(a){return a&&a==a.toUpperCase()&&a!=parseInt(a)&&a.match(/[a-z]/i)},O9664:function(){if(this.O7221||ig.ua.mobile)1<=this.O1534.length&&this.O1534.shift(),this.say("_~")},O9682:function(){this.O9424()?this.say("_|"):ig.game.attachmentManager.O6791(ig.game.O1257,!0)},O7948:function(a){if(null==this.O2962||.25<=this.O2962.delta()){this.O2962=new ml.Timer;this.thumbing=null;var b=ig.game.O1257.O1331("amplifies");
ig.game.O1257.O4855.addItem("_s"+a,b);setTimeout(function(){ig.game.O5058.O3723(!0)},500)}},O8943:function(a){if(!this.O3279||1.5<=this.O3279.delta()){this.O3279=new ml.Timer;0<=["centerTooClose","placenameAlreadyPlaced","tooManyPeopleAround","editorOnly","nonPublicAreasOnly"].indexOf(a)&&ig.game.sounds.nocando.play();var b=0<=["editorOnly","howToCollect"].indexOf(a);this.say(a,b);"tiredFromActionLessMoving"!=a&&this.say("_nl")}},say:function(a,b){this.O3868++;if(15<this.O3868)ig.game.O1795||!(null!=
ig.game.O7456.O6419&&45<=ig.game.O7456.O6419)||ig.game.writableDialog&&ig.game.writableDialog.isOpen||ig.game.portaller.O7749("calmtown");else{this.thumbing=null;var c=ig.game.O1257.O1331("amplifies");ig.game.O1257.O4855.addItem(a,c);b||ig.game.O7836.O8193(a)}},thumbUp:function(){this.thumbing="up"},O9055:function(){this.thumbing="down"},O942:function(){ig.game.O2974(!0,!0);this.O7221=!0;localStorage.ignoreWasdMovement="true"},O8249:function(){this.O7221&&(this.say("_nl"),this.O7221=!1,delete localStorage.ignoreWasdMovement)},
isKeyFreeSpeech:function(a){return"_c"==a.substring(0,2)}})});ig.baked=!0;
ig.module("game.core.errormanager").defines(function(){window.ErrorManager=ig.Class.extend({focusDeathOn:!1,O9969:!0,O5540:null,O2648:3E3,O3943:1E4,O9906:null,O8208:null,O4690:100,O2465:null,O8426:3E3,O8007:{},O5290:!1,init:function(){window.onerror=function(a,b,c,d){"string"!==typeof b&&(b="");var e=b.toLowerCase();if(0===b.indexOf("http://thingistan.com/")||0===b.indexOf("https://thingistan.com/")||0===b.indexOf("http://localhost:8787/"))b="";else{if(0<=e.indexOf("ympb")||0<=e.indexOf("ps48b0f32296093349b79b6a684f1fcee35373de4e"))return;
b+=" | "}a=String(a);0<=a.indexOf("SyntaxError: Unexpected token ")&&(a="Uncaught SyntaxError: Unexpected token [token e.g. ^, ?, o, b, ), ... omitted to bundle error msg]");c=a+" | "+b+"v "+ig.game.version+", line "+c+", pos "+d;a=ig.game&&ig.game.O1257&&ig.game.O1257.screenName;b=ig.game.errorManager&&ig.game.errorManager.O5839();d=-1!=window.location.href.indexOf("127.0.0.1");a={user:a,debugCtx:b};ig.game.O9720&&""!==ig.game.O9720?a.area=ig.game.O9720:ig.game.O4873&&(a.area=(1==ig.game.O4873.O8027?
"outer ring":"inner ring")+" area "+String(ig.game.O4873.currentArea));ig.game.O1257&&ig.game.O1257.O2970&&(a.userId=ig.game.O1257.O2970);d||Sentry&&Sentry.captureException(c,{tags:a});ig.game.errorManager.O3802(c)};window.tabHasFocus=!0;jQuery(window).blur(function(){ig.input.actions={};ig.input.presses={};ig.input.locks={};ig.input.delayedKeyup={};window.tabHasFocus=!1;ig.game.errorManager.O7115()});jQuery(window).focus(function(){window.tabHasFocus=!0;ig.game.errorManager&&ig.game.errorManager.O5458()})},
kicked:function(a){ig.game.debug.O8913?(window.alert("kicked"),ig.system.O1653()):(ig.game.errorManager.warn("user forwarded to space time rift page"),window.location.replace("/info-rift"+(a?"#"+a:"")))},maintenance:function(){},O3802:function(a){a&&ig.game.O9002&&console.log(a+" ["+(Date.now()-ig.game.O9002)+"]");this.O8730();this.O8053(a)},O9515:function(a,b){this.closeSidenoteError();ig.game.playerDialog&&(b="javascript:ig.game.playerDialog.openForPlayerId('"+b+"')",a=ig.game.strings.O9955(a),
b='Oops, <a href="'+b+'">someone</a> triggered an error...   <a href="javascript:ig.game.errorManager.closeSidenoteError()">[x]</a><br/><br/>"'+ig.game.strings.replaceAll(a," | ","<br/>")+'"',jQuery('<div id="lowEmphasisWarning">'+b+"</div>").appendTo("body"))},closeSidenoteError:function(){jQuery("#lowEmphasisWarning").remove()},O5658:function(a,b){b=b&&b.status;a="Oops, there were loading issues ("+a+")";b&&(a+=" ["+b+"]");ig.game.errorManager.O3802(a)},O3416:function(){ig.game.debug.O8913?(window.alert("session expired (would now refresh)"),
ig.system.O1653()):(console.log("Redirect - expired session"),window.location.replace("/"))},warn:function(a,b,c){if(void 0==a||null==a)a="Unspecified";ig.game.errorManager&&ig.game.strings&&(a=ig.game.strings.replaceAll(a," ","_"));var d=ig.game&&ig.game.O1257&&ig.game.O1257.screenName,e=ig.game.errorManager&&ig.game.errorManager.O5839(),f=-1!=window.location.href.indexOf("127.0.0.1");console.warn(a);!f&&c&&(c={user:d,debugCtx:e,level:"warning"},b&&(c.itemId=b),Sentry&&Sentry.captureMessage("Warning: "+
a,{tags:c}))},logInfo:function(a){ig.game.errorManager&&ig.game.strings&&a&&(a=ig.game.strings.replaceAll(a," ","_"));var b=-1!=window.location.href.indexOf("127.0.0.1"),c=ig.game&&ig.game.O1257&&ig.game.O1257.screenName;a&&!b&&(b={user:c,level:"warning"},Sentry&&Sentry.captureMessage("Info: "+a,{tags:b}))},setContext:function(a){this.O8007[a]=!0},O6908:function(a){this.O8007[a]=!1;delete this.O8007[a]},O5839:function(){var a="",b;for(b in this.O8007)1==this.O8007[b]&&(a+=b+", ");return a},O3739:function(){ig.system.O1653();
jQuery("#loadingAnimation").remove()},O912:function(){this.O6574();this.O3517()},connectionFailureLevel3:function(a){ig.game&&ig.game.removeShroud();this.O6574();this.O4061(a);ig.game&&ig.game.errorManager.warn("Connection issue occurred connectionFailureLevel3")},O8048:function(){ig.game&&ig.game.removeShroud();this.O6574();this.O4061("Wrong WS - restarting");setTimeout(function(a){console.log("Reloading - connected to wrong WS");location.reload(!0)},this.O8426);ig.game&&ig.game.errorManager.warn("Connection issue occurred - Wrong WS")},
O9876:function(){this.O7405();ig.system.O8043()},O8730:function(){ig.game.O7836&&ig.game.O7836.wsclose();ig.system&&ig.system.O1653();var a=document.getElementById("shroud");a&&(a.style.display="none");ig.game&&(ig.game.O6550=0);if(a=document.getElementById("loadingAnimation"))a.style.display="none";this.O6574();this.O5290=!0},O3517:function(){0==jQuery("#suspendOverlay").length&&(jQuery('<div id="suspendOverlay" class="domElement"></div>').appendTo("body"),jQuery("#suspendOverlay").animate({opacity:".4"},
1E3))},O7405:function(){jQuery("#suspendOverlay").remove()},O2580:function(){iAmNotDefinedAndWillCauseAnError()},O8053:function(a){void 0==a&&(a="No error string available.");var b='<div id="failwhale" class="start">    <div class="introDialog">        <a id="failWhaleCloseButton" href=".">x</a>        <div class="header"><span class="oops">Oops...</span> there was an error.</div>        <div class="content"><div class="errorString">'+(ig.game.strings.O9955(a)+"</div></div>");b+='           <div id="footer" class="footerError">';
b=ig.ua.steam?b+"        Please contact us at thingistan.com/support if this issue persists":b+'        Please <a href="/support" target="_blank">see here</a>. Also, <a href="/">refresh</a>.</a>';jQuery(b+"        </div>    </div></div>").appendTo("body");if(a)if(0<=a.indexOf("QuotaExceededError"))ig.game.O5285.O6114();else if(0<=a.indexOf(" ws")){var c=0<=a.indexOf("ws21")?"5":"3";setTimeout(function(){window.location="/"+c},3E3)}},O4061:function(a){jQuery('<div id="failwhale" class="start connectionIssue"><div class="introDialog"><div class="header"><span id="welcomeTo"><span class="oops">Oops...</span> there are connection problems.</div><div class="content"><div class="errorString"></div></div><div id="footer" class="footerError">Does your internet work? Is it fast? If so, try a <a href="/">refresh</a>.<br/>(If this problem persists, please <a href="/support" target="_blank">see here</a>.)</div></div></div>').appendTo("body");
ig.game.autoBuilderData&&window.open(ig.game.autoBuilderData.alarmSongUrl,"_blank")},O6574:function(){try{ig&&ig.game&&ig.game.writableDialog&&ig.game.writableDialog.isOpen&&ig.game.writableDialog.close()}catch(a){}},O7115:function(){ig.game.O1257&&ig.game.O1257.attachments&&ig.game.O1257.attachments.br||!ig.game.O1257||!ig.game.O2694||1>ig.game.O2694.delta()||ig.game.O1257.O9165==ig.game.O1257.O4583.CLIMBING||ig.game.O1257.standing&&2>Math.abs(ig.game.O1257.vel.y)&&2>Math.abs(ig.game.O1257.vel.x)||
!this.focusDeathOn||(console.log("FK"),ig.game.O1257.kill(ig.game.deathTypes.FOCUS))},O5458:function(){ig.game.O7836&&ig.game.O7836.O4810()},pauseForMapLoad:function(){ig.system.O1653();this.O3517()},O3614:function(){ig.system.O8043();this.O7405()}})});ig.baked=!0;
ig.module("game.core.achievementmanager").defines(function(){window.AchievementManager=ig.Class.extend({achievements:[],init:function(){},O2118:function(a){ig.game.isFullAccount&&a&&(this.achievements=a)},O9045:function(){this.achievements=[]},O9635:function(){this.register(this.types.MOVED)},register:function(a,b){if(ig.game.isFullAccount){var c=this;if(-1==this.achievements.indexOf(a)){var d=14<=a&&33>=a;if(d&&!ig.ua.steam)"function"===typeof b&&b();else{this.achievements.push(a);var e=ig.game.O9817.O8185(a);
e.done(function(){if(d){var f=c.O8826(a);ig.game.steamManager.setAchievement(f,function(g){g&&console.error(g);"function"===typeof b&&b(g)})}else"function"===typeof b&&b()});e.fail(function(){"function"===typeof b&&b(Error("Request failed"))})}}else"function"===typeof b&&b()}},check:function(a){return-1!=this.achievements.indexOf(a)},O8826:function(a){var b=null,c;for(c in this.types)if(this.types[c]==a){b=c;break}return b},types:{MOVED:0,OPENED_CHNG_BODY:4,OPENED_PEOPLE:5,PASSED_CTEST:6,ISSUED_CTEST:7,
ADDED_SNAPSHOT:8,TELEPORTED:9,DID_INWORLD_BUILD:10,DID_INWORLD_REMOVE:11,USED_MEET:12,TRIGGERED_WELCOME_INVITATION:13,SAVED_CREATION:14,CREATED_AREA_SNAPSHOT:15,USED_FILL_BUILD:16,SAVED_CLONED_CREATION:17,SAW_FRIEND_ON_FRIENDS_LIST:18,SAVED_SPECIFIC_INTERACTING:19,CHANGED_BODY:20,SAVED_WRITABLE_COMMENT:21,SAVED_SPECIFIC_FLYING_MOUNT:22,USED_MOVE_BACKWARDS_BOOST:23,USED_ALTERNATIVE_COLORS_VIEW:24,SEARCHED_IN_BIN:25,CONSUMED_HOT_EDIBLE:26,CAUGHT_ITEM_FROM_ITEM_THROWER:27,PLAYED_CHORD_WITH_KEYS:28,PLACED_FILL_LIGHT:29,
ATTACHED_MOTION:30,SAT_DOWN_IN_BUSY_CREATED_AREA:31,PLACED_SOMETHING_IN_GRID_HOLDER:32,TELEPORTED_HOME:33,SOLVED_BASE_POST_KEY:34,DID_CREATE_AREA:35,BLOCKED_AD:36,SAW_DIALOG_REVIEW_MOBILE:37,SAW_DIALOG_REVIEW_STEAM:38,SAW_DIALOG_MOBILE_VERSION_AVAILABLE:39}})});ig.baked=!0;
ig.module("game.core.rankmanager").defines(function(){window.RankManager=ig.Class.extend({x:0,y:0,O3606:null,O1622:null,init:function(a,b){this.x=a;this.y=b;this.O1622=ig.game.O8159.getImage(ig.game.O8159.O1622);setTimeout(function(){ig.system.running&&ig.game.O1257&&"undefined"!==typeof ig.game.O1257.rank&&ig.game.O1002.O5426()},5E3);ig.game.O1257&&ig.game.isFullAccount&&!this.O3606&&(a=1==ig.game.O1257.rank?.5:20,ig.game.O7088&&1>a&&(a=1),this.O3606=setInterval(function(){ig.system.running&&ig.game.O1257&&
"undefined"!==typeof ig.game.O1257.rank&&ig.game.O1002.O5426()},parseInt(6E4*a)))},O4989:function(a){this.rank=a},O3897:function(a){return void 0==ig.game.O1257.rank||null==ig.game.O1257.rank||ig.game.O1257.rank<a?(this.O7063(),!1):!0},O3256:function(a){return ig.game.O1257.rank<a?!1:!0},O5426:function(){var a=this;ig.game.O9817.O6353(this).done(function(b){ig.game.O3196()&&(b=0);b>ig.game.O1257.rank?ig.game.O9450||(ig.game.O2492=b,ig.game.O1257.rank=b,ig.game.O7836.O9243()):b<ig.game.O1257.rank&&
(ig.game.O2492=b,ig.game.O1257.rank=b,ig.game.O7836.O9243(),0==b&&a.O4366());ig.game.bottomMenu&&ig.game.bottomMenu.showFlagsAlertIfNeeded()})},O4366:function(){ig.game.attachmentManager.O8759(ig.game.O1257,!0);ig.game.O1257.O9904();ig.game.attachmentManager.O7793(ig.game.O1257,ig.game.attachmentManager.slots.BODY,!0)},O9903:{FREE_SPEECH_SPEAK:1,FREE_SPEECH_HEAR:0,CREATE:1,EDIT_MAP:1,VOTE:1,REPORT_PERSON:1},O8925:function(){0==ig.game.O1257.rank&&(this.x=ig.game.topLeftUIPos.x,ig.system.context.globalAlpha=
ig.game.bottomMenu.alpha,ig.game.O8159.draw(this.x+4,this.y,ig.game.bottomMenu.alpha,ig.game.O8159.rank0),ig.system.context.globalAlpha=1,this.O1622.draw(this.x+10,this.y-3))},O7063:function(){ig.game.isFullAccount&&(ig.game.O1257&&0>=ig.game.O1257.rank?this.O3585():ig.game.alertDialog.O3813("Please wait until later before using this"))},O3585:function(){if(ig.game.alertDialog){var a='<p>Oops, you may have received too many flags by other long-term manyzens and are temporarily locked. The first lock fades out after some time, the second lock takes longer. Please check the <span class="pseudoLink" onclick="ml.Misc.openUrl(\'//thingistan.com/info#guidelines\')">guidelines and terms</span>. ';
ig.ua.steam&&(a+=" Please also contact us at <strong>we@thingistan.com</strong> if you have any questions. ");ig.game.alertDialog.open(a+"Thanks!</p>",!0)}}})});ig.baked=!0;
ig.module("game.core.searchquery").defines(function(){window.SearchQuery=ig.Class.extend({getNormalized:function(a){if(a){var b=[" and "," or "];a=(" "+a+" ").toLowerCase();a=ig.game.strings.replaceAll(a,"-"," ");a=ig.game.strings.replaceAll(a,"in:bin","in bin");var c=0<=a.indexOf('"');a=a.replace(/[^0-9a-z? ]/g,"");a=ig.game.strings.replaceAll(a,"in bin","in:bin");0<=a.indexOf("in:bin")&&0<=a.indexOf("by me")&&(a=ig.game.strings.replaceAll(a,"by me"," "));for(var d=0;d<b.length;d++)a=ig.game.strings.replaceAll(a,
b[d]," ");a=ig.game.strings.replaceAll(a,"  "," ");ig.game.O1257&&ig.game.O1257.screenName&&(a=ig.game.strings.replaceAll(a," by me "," u:"+ig.game.O1257.screenName+" "));a=ig.game.strings.replaceAll(a," by "," u:");c||(a=this.convertToTypeSearchIfNeeded(a,"t:"));a=ig.game.strings.trim(a);a=ig.game.strings.replaceAll(a,"  "," ");a=a.split(" ");a=this.O4757(a,"u:");a.sort(function(e,f){return 0<=e.indexOf(":")});a=a.join(" ");a=ig.game.strings.trim(a);0<=a.indexOf("in:bin")&&ig.game.O1189.register(ig.game.O1189.types.SEARCHED_IN_BIN);
ig.game.universeSearchChecked&&(a+=" in:universe");0<=a.indexOf("in:universe")&&!ig.game.hasMinfinity&&(a=ig.game.strings.replaceAll(a,"in:universe",""))}return a},O4757:function(a,b){for(var c=[],d=0;d<a.length;d++)if(0===a[d].indexOf(b)){console.log("now merging remainder");b=a[d];for(d+=1;d<a.length;d++)b+="___"+a[d];c.push(b);break}else c.push(a[d]);return c},convertToTypeSearchIfNeeded:function(a,b){var c=this.O7665();c=this.O1267(c);for(var d=0;d<c.length;d++){var e=c[d].title;e=e.toLowerCase(e);
e=ig.game.strings.replaceAll(e,"-"," ");e=e.replace(/[^0-9a-z? ]/g,"");var f=c[d].key;if(f&&(a=ig.game.strings.O9872(a,e,b+f),-1==ig.game.strings.trim(a).indexOf(" "))){e=this.O4335(e);for(var g=0;g<e.length;g++)a=ig.game.strings.replaceAll(a,e[g],b+f)}}return a},O7665:function(){var a=[],b;for(b in window.Item.prototype.BASE_TYPES){var c=window.Item.prototype.BASE_TYPES[b];c=c.verbose?c.verbose:c.name;c=c.toLowerCase();a.push({key:b,title:c})}return a},O1267:function(a){a.sort(function(b,c){return b.title.length>
c.title.length?-1:1});return a},O4335:function(a){var b=[],c={climbable:["climb","ladder"],"flipping living":["living"],body:["skin"],crumbling:["crumbler","crumbles","crumble"],pushing:["pushing","pushes","pushy","push"],"holdable item":["holdable","item"],"one-way":["oneway"],bouncy:["bouncey","bounces"],slidey:["slides","slidy"],"top light":["light gradient","gradient light"],mountable:["mount"],"flying mountable":["flying"],"place name":["place"],liquid:["water"],activator:["activater","button"],
"open on activate":["opens","open"],wearable:["wears","wear"],transporting:["transport"]};c[a]&&(b=c[a]);return b}})});ig.baked=!0;
ig.module("game.core.strings").defines(function(){window.Strings=ig.Class.extend({arrows:{left:"&#9664;",up:"&#9650;",right:"&#9654;",down:"&#9660;"},init:function(){ig.ua.iOS&&(this.arrows.left="&lt;",this.arrows.right="&gt;")},O9754:function(a){var b=a;if(1E3<=a){b=Math.floor((""+a).length/3);for(var c="",d=2;1<=d&&!(c=parseFloat((0!=b?a/Math.pow(1E3,b):a).toPrecision(d)),3>(c+"").replace(/[^a-zA-Z 0-9]+/g,"").length);d--);0!=c%1&&c.toFixed(1);b=c+["","k","m","b","t"][b]}if(void 0==b||null==b)b=
"";return b.toString()},O7317:function(a){return parseInt(a).toLocaleString()},O3177:function(a,b){var c="";a&&b&&(c=Math.floor(((new Date(b)).getTime()-(new Date(a)).getTime())/1E3),c=this.O7037(c));return c},O6141:function(a,b,c){var d="";a&&(a=Math.floor((Date.now()-a.getTime())/1E3),d=this.O7037(a,b,c));return d},O3041:function(a,b,c){var d="";a&&(a=Math.floor((Date.now()-(new Date(a)).getTime())/1E3),d=this.O7037(a,b,c));return d},O7037:function(a,b,c){void 0==c&&(c="");if(0>a)return"";var d=
a+c+this.O2253("sec",a);if(60<=a&&(a=Math.floor(a/60),d=a+c+this.O2253("min",a),60<=a&&(a=Math.floor(a/60),d=a+c+this.O2253("hr",a),24<=a))){a=Math.floor(a/24);if(b)return this.O9754(Math.round(a))+" "+this.O2253("day",a);d=a+c+this.O2253("day",a);30.44<=a&&(b=Math.floor(a/30.44),d=b+c+this.O2253("month",b),12<=b&&(d=Math.floor(b/12),d=d+c+this.O2253("year",d)))}return d+" ago"},O2253:function(a,b){return 1>=b?a:a+"s"},trim:function(a){a&&=a.replace(/^\s+|\s+$/g,"");return a},O3089:function(a,b,c){return this.O7686(a,
b,c)},O7686:function(a,b,c){if(null!=a&&void 0!=a&&"string"==typeof a){if(void 0===b||null==b)b=10;if(void 0===c||null==c)c=!1;if(c&&a.length-2>b||!c&&a.length>b)a=a.substr(0,b-2)+".."}else a="";return a},O9955:function(a){a=String(a);a=this.replaceAll(a,"&","&amp;");a=this.replaceAll(a,'"',"&quot;");a=this.replaceAll(a,"'","&#39;");a=this.replaceAll(a,"<","&lt;");return this.replaceAll(a,">","&gt;")},O7245:function(a){return String(a).replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/&/g,"&amp;").replace(/"/g,
"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},O5467:function(a){a=ig.game.strings.replaceAll(a,"https://","//");return ig.game.strings.replaceAll(a,"http://","//")},O5489:function(a){a&&=a.replace(/((https?:\/\/)(thingistan\.com\/)([-a-zA-Z0-9]*))/gi,function(b,c,d,e,f){c="";b=ig.game.strings.O5467(b);e=f.length>=ig.game.areaDialog.O1368&&0!==f.toLowerCase().indexOf("info")&&"support"!=f.toLowerCase();d=ig.game.O4873.O6966(f);if(e||d){b=b.toLowerCase();e="";d?e=d=ig.game.O1946+"media/ring-thumb/"+
ig.game.strings.O9955(f)+".png":(e=ig.game.strings.replaceAll(f,"-","_"),e=e.toLowerCase(),d=ig.game.O3186.O5138(e),e=d+"?r="+ig.game.O4293(1E6,9E6));var g=ig.game.O1946+"media/empty-area-thumb.png?v="+ig.game.version;console.log("fullUrl",b);c+=' <a href="'+ig.game.strings.O9955(b)+'"><img src="'+ig.game.strings.O9955(e)+'" alt="" class="areaThumb" oncontextmenu="window.open(\''+ig.game.strings.O9955(d)+"')\" onerror=\"this.onerror=null;this.src='"+g+"';\" /></a> ";c+='<a href="'+ig.game.strings.O9955(b)+
'">thingistan.com/'+ig.game.strings.O9955(f)+"</a> "}else c=b;return c});return a},O7811:function(a,b,c){0<=a.indexOf("/#")&&(c=!1);c&&0<=a.indexOf("://thingistan.com/")&&(c=!1);return a=a.replace(/(\s|^)(https?:\/\/(\S+))(?![^<>]*>)/gi,function(d,e,f,g,h){d=25;ig.ua.phone&&ig.system.height>=ig.system.width&&(c=!0,d=18);g="ml.Misc.openUrl('"+ig.game.strings.O9955(f)+"')";f=ig.game.strings.replaceAll(f,"https://www.","");f=ig.game.strings.replaceAll(f,"http://www.","");f=ig.game.strings.replaceAll(f,
"https://","");f=ig.game.strings.replaceAll(f,"http://","");c&&(f=ig.game.strings.O7686(f,d));f=ig.game.strings.O9955(f);return 0<=f.indexOf("&amp;lt;")||0<=f.indexOf("&amp;gt;")||0<=f.indexOf("[")||0<=f.indexOf("]")?e+"":e+'<span class="pseudoLink" onclick="'+g+'">'+f+"</span>"})},O4215:function(a,b,c){return a=a.replace(/(\s|^)(writable:\/\/(\S+))(?![^<>]*>)/gi,function(d,e,f,g,h){d="";f=ig.game.strings.replaceAll(f,"writable://","");f=f.split("/");2==f.length&&ig.game.validations.O5241(f[0])&&
ig.game.validations.O5241(f[1])&&(d="'"+ig.game.strings.O9955(f[0])+"'",f="'"+ig.game.strings.O9955(f[1])+"'",d=e+'<span class="pseudoLink" onclick="ig.game.writableDialog.O3112('+(d+","+f+')">Link</span>'));return d})},O4216:function(a){a&&=a.replace(/(https?:\/\/i\.thingistan\.com\/[a-zA-Z0-9]+)/gi,function(b){return ig.ua.firefox?'<img src="'+b+'" alt="" onload="this.width = this.naturalWidth * '+(ig.system.scale+";this.height = this.naturalHeight * "+ig.system.scale)+'" class="pixelPerfectResize"/>':
'<img src="'+b+'" alt="" style="zoom: '+ig.system.scale+'" class="pixelPerfectResize"/>'});return a},replaceAll:function(a,b,c){b=b.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");return a.replace(RegExp(b,"g"),c)},O5953:function(a,b,c){b=b.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");return a.replace(RegExp(b,"ig"),c)},O1655:function(a,b,c){b=b.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");return a.replace(RegExp(b),c)},O9872:function(a,b,c){return a.replace(RegExp("\\b"+b+
"\\b","g"),c)},O4941:function(a,b){return RegExp("(\\b"+b+"\\b)").test(a)},O2801:function(a){a=a.replace(/([a-z])([A-Z])/g,"$1 $2");return a.toLowerCase()},O4355:function(a){return a.trim().toLowerCase().replace(/\s(.)/g,function(b,c){return c.toUpperCase()})},contains:function(a,b){for(var c=!1,d=0;d<b.length;d++)if(0<=a.indexOf(b[d])){c=!0;break}return c},O5024:function(a,b){var c=[a];if(0<=a.indexOf("\r"))c=a.split("\r");else if(a.length>=b&&-1==a.indexOf(" "))c=[this.O7686(a,b-2)];else if(a.length>=
b-2&&-1!=a.indexOf(" ")&&(c=a.split(" "),3<=c.length)){c=Math.floor(a.length/2);for(var d=b=0,e=c;0<e;e--)if(" "==a.charAt(e)){b=e;break}for(e=c+1;e<a.length;e++)if(" "==a.charAt(e)){d=e;break}c=Math.abs(c-b)<Math.abs(c-d)?b:d;c=[a.substr(0,c).trim(),a.substr(c).trim()]}return c},O3459:function(a){return a.replace(/\w\S*/g,function(b){return b.charAt(0).toUpperCase()+b.substr(1).toLowerCase()})},O9041:function(a){0===a.indexOf("thingistan.com/")&&(a="https://"+a);a=ig.game.strings.replaceAll(a,"www.thingistan.com",
"thingistan.com");a=ig.game.strings.replaceAll(a,"\rthingistan.com/","\rhttps://thingistan.com/");return ig.game.strings.replaceAll(a," thingistan.com/"," https://thingistan.com/")},O5143:function(a,b,c){ig.game.debug.O8913&&(console.log("---- O5143 before ----"),console.log(a));a=this.O8873(a);a=this.replaceAll(a,"\r\n","\r");a=this.replaceAll(a,"\n","\r");a=this.replaceAll(a,"%30"," [chrome bug trigger string auto-removed] ");a=this.O9052(a);a=this.replaceAll(a,"javascript:","");a=this.replaceAll(a,
"onclick:","");a=this.replaceAll(a,"onmouseover:","");a=this.O9955(a);a=this.O5911(a);a=this.O3150(a);ig.game&&ig.game.settings&&!ig.game.settings.photosensitiveGuard&&(a=this.O6150(a));var d=a=this.O9281(a);a=this.O4339(a);d=d!=a;a=this.O9041(a);a=this.O5489(a);a=this.O6802(a);d||(a=this.O7811(a,!0,!0));a=this.O4215(a);a=this.replaceAll(a,"<a href=",'<a rel="noreferrer nofollow" href=');a=this.replaceAll(a,"\r","<br/>");a=this.O2470(a,b,c);ig.ua.phone&&ig.system.height>=ig.system.width||(a=this.convertIndentionToPreformatted(a));
a=this.O9109(a);a=this.O6145(a);a=this.replaceAll(a,"<em>blank","_blank");a=this.replaceAll(a,"</em>blank","_blank");a=this.replaceAll(a,"src='//snapshot.thingistan.com/","src='//snapshot.thingistan.com/");a=this.replaceAll(a,"src='http://snapshot.thingistan.com/","src='//snapshot.thingistan.com/");a=this.replaceAll(a,"src='https://snapshot.thingistan.com/","src='//snapshot.thingistan.com/");a=this.O2286(a);ig.game.debug.O8913&&(console.log("---- O5143 after ----"),console.log(a));return a},O9052:function(a){a=
this.O5953(a,"we@thingistan.com","[ https://thingistan.com/support ]");a=this.O5953(a,"we[at]thingistan.com","[ https://thingistan.com/support ]");a=this.O5953(a,"we @ thingistan.com","[ https://thingistan.com/support ]");a=this.O5953(a,"we@ thingistan.com","[ https://thingistan.com/support ]");a=this.O5953(a,"we @thingistan.com","[ https://thingistan.com/support ]");a=this.O5953(a,"philipp@thingistan.com","[ https://thingistan.com/support ]");a=this.O5953(a,"philipp[at]thingistan.com","[ https://thingistan.com/support ]");
a=this.O5953(a,"scott@thingistan.com","[ https://thingistan.com/support ]");return this.O5953(a,"scott[at]thingistan.com","[ https://thingistan.com/support ]")},O6145:function(a){return a.replace(/(\u00a9|\u00ae|[\u2000-\u3300]|\ud83c[\ud000-\udfff]|\ud83d[\ud000-\udfff]|\ud83e[\ud000-\udfff])(?![^<>]*>)/g,'<span class="emoji">$1</span>')},O2286:function(a,b){void 0===b&&(b=50);for(var c="",d=!1,e=0,f=!1,g=0;g<a.length;g++){var h=a[g];switch(h){case "<":if(d){f=!0;break}d=!0;break;case ">":d=!1;e=
0;break;case " ":e=0}c+=h;e++;e>=b&&!d&&(e=0,c+=" ")}f&&(c=a);return c},O9109:function(a){var b="",c=!1,d=!1;if(a)for(var e=[8217,8220,8221],f=0;f<a.length;f++){var g=a.substr(f,1);if(d)">"==g&&(d=!1);else if(d="<"==g,!d){var h=g.charCodeAt();255<h&&-1==e.indexOf(h)?c||(g='<span class="nonDefaultFont">'+g,c=!0):c&&(g="</span>"+g,c=!1)}b+=g}return b},O2470:function(a,b,c){if(a){a=a.split("<br/>");c="font-size: 130%; padding-bottom: 3px; padding-top: 45px; border-bottom: "+ig.system.scale+"px solid rgb("+
c+")";for(b=a.length-2;0<=b;b--)0===a[b+1].indexOf("===")&&(a[b]='<div style="'+c+'">'+a[b]+"</div>",a.splice(b+1,1));a=a.join("<br/>")}return a},O5911:function(a,b){a&&(b=!!b,a=this.replaceAll(a,"\\*","[[asterisk]]"),a=this.replaceAll(a,"\\_","[[underscore]]"),a=this.replaceAll(a,"\\~","[[tilde]]"),a=this.replaceAll(a,"\\^","[[caret]]"),a=a.replace(/\*\*([^*]+?)\*\*/g,'<strong style="font-size: 115%">$1</strong>'),a=a.replace(/_([^*]+?)_/g," <em>$1</em>"),a=a.replace(/>_([^*]+?)_/g,"><em>$1</em>"),
a=a.replace(/~~([^*]+?)~~/g,"<del>$1</del>"),a=a.replace(/\^\^([^*]+?)\^\^/g,'<span class="lessImportantText">$1</span>'),a=this.O8025(a),b||(a=this.O8116(a),a=this.convertAlignTags(a),a=this.O5130(a)),a=this.replaceAll(a,"[[caret]]","^"),a=this.replaceAll(a,"[[tilde]]","~"),a=this.replaceAll(a,"[[underscore]]","_"),a=this.replaceAll(a,"[[asterisk]]","*"));return a},O8025:function(a){if(a){for(var b="black white gray red green blue cyan brown orange pink purple teal yellow coral olive chocolate lime magenta navy plum salmon tan wheat silver gold crimson beige transparent".split(" "),
c=0;c<b.length;c++){var d=b[c],e="-"+d+"-([^*]+?)-"+d+"-";e=RegExp(e,"gi");a=a.replace(e,'<span style="color: '+d+'">$1</span>')}for(c=0;c<b.length;c++)d=b[c],e="-"+d+" back-([^*]+?)-"+d+" back-",e=RegExp(e,"gi"),a=a.replace(e,'<span style="background-color: '+d+'">$1</span>')}return a},O8116:function(a){if(a)for(var b=5;355>=b;b+=5)a=a.replace(RegExp("-rotate"+b+"-([^*]+?)-rotate"+b+"-","gi"),'<span style="display: inline-block; transform: rotate('+(b+'deg)">$1</span>'));return a},convertAlignTags:function(a){if(a)for(var b=
["center","right"],c=0;c<b.length;c++){var d=b[c];a=a.replace(RegExp("-"+d+"-([^*]+?)-"+d+"-","gi"),'<div style="text-align: '+d+'">$1</div>')}return a},O5130:function(a){if(a)for(var b=["blink","blinksoft","glow","case"],c=0;c<b.length;c++){var d=b[c],e=RegExp("-"+d+"-([^*]+?)-"+d+"-","gi"),f=d;switch(d){case "blink":case "blinksoft":case "glow":f=d+"Animation";break;case "case":f="mixedCase"}a=a.replace(e,'<span class="'+f+'">$1</span>')}return a},O6150:function(a){var b="<img src='$1' alt='' class='commentInlineImage'/>";
ig.ua.mobile||(b='<span onclick="ml.Misc.openUrl(\'$1\')" class="pseudoLink">'+b+"</span>");a=a.replace(/(https?:\/\/(i.imgur.com|snapshot.thingistan.com)\/(\w+)\.(png|jpg|gif))/g,b);a=a.replace(/(https?:\/\/(imgur.com)\/(\w+))/g,"<img src='http://i.imgur.com/$3.png' alt='' class='commentInlineImage' rel='noreferrer' onclick=\"ml.Misc.openUrl('http://i.imgur.com/$3.png')\" />");return a.replace(/(https?:\/\/cdn.discordapp.com\/attachments\/(\w+\/\w+\/\w+)\.(png|jpg|gif))/g,"<img src='https://cdn.discordapp.com/attachments/$2.$3' alt='' class='commentInlineImage' rel='noreferrer' onclick=\"ml.Misc.openUrl('https://cdn.discordapp.com/attachments/$2.$3')\" />")},
O9281:function(a){return a.replace(/(?:https:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=|shorts\/)?((\w|-){11})/g,'<iframe id="videoIframe" width="96%" height="315" src="//www.youtube.com/embed/$1?rel=0&amp;autohide=1&amp;showinfo=0" frameborder="0" allowfullscreen sandbox="allow-scripts allow-same-origin allow-pointer-lock" ></iframe>')},O4339:function(a){return a=a.replace(/(\s|^)(https?:\/\/soundcloud\.com(\S+))(?![^<>]*>)/gi,function(b){var c="";b===ig.game.strings.O9955(b)?(b=ig.game.strings.replaceAll(b,
"\r",""),b=b.trim(b),c=' <span class="pseudolink writableSoundLink" onclick="ml.Misc.O3903(\''+(b+"','"+ig.game.O1257.O2970+"',null,true)\">")+b+"</span> "):c=b;return c})},O6802:function(a){return a.replace(/(https?:\/\/thingistan\.com\/#(\w+))/i,'<a href="#$2" onclick="ig.game.O2453.O7472(\'$2\')">$1</a>')},convertIndentionToPreformatted:function(a){if(a){a=a.split("<br/>");for(var b=0;b<a.length;b++){var c=a[b];0===c.indexOf("    ")&&72>=c.length&&(a[b]="<pre>"+c.substr(2)+"</pre>")}a=a.join("<br/>");
a=this.replaceAll(a,"</pre><br/><pre>","\r");a=this.replaceAll(a,"</pre><br/><br/><pre>","\r\r")}return a},O3150:function(a){var b={spoiler:"spoiler spoilers spoiler: spoilers: SPOILER Spoiler".split(" "),more:["more","more:","MORE","MORE:"],show:["show","show:","SHOW","SHOW:"]},c;for(c in b)for(var d=b[c],e=0;e<d.length;e++){var f=d[e],g=a.indexOf("\r"+f+"\r");-1==g&&0===a.indexOf(f+"\r")&&(g=0);0<=g&&(g="spoiler"+ig.game.O4293(1,1E8),a=a.replace(f+"\r",'<span class="spoilerLink pseudolink" onclick="jQuery(\'#'+
(g+"').slideToggle()\">")+c+" "+this.arrows.down+'</span>\r<div class="spoiler" id="'+g+'">'),a+="\r</div>")}return a},O4409:function(a){if(a&&"string"===typeof a){var b=a.toLowerCase();if(0<=b.indexOf("suicide")||0<=b.indexOf("kill myself"))a+="<br/>"+this.O5493()}return a},O5493:function(a){void 0===a&&(a="font-size: 85%; opacity: .8");return'<span class="selfHelpInfo" style="'+a+'">[Google: <a href="https://www.google.com/?#q=suicide+hotline" target="_blank">suicide hotline</a> | International: <a href="http://befrienders.org" target="_blank">befrienders.org</a> | USA: <a href="http://suicidepreventionlifeline.org" target="_blank">SuicidePreventionLifeline.org</a>] </span>'},
toUpperCaseFirst:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},O4619:function(a){var b="";void 0===a&&(a=16);for(var c=0;c<a;c++)b+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(ig.game.O4293(0,61));return b},O3608:function(a){a=this.O7752(a);return this.O2821(a)},O7752:function(a){return a.replace(/\/\*([\s\S]*?)\*\//g,"")},O2821:function(a){a=a.split("\n");for(var b=0;b<a.length;b++){var c=a[b];if(0<=c.indexOf("//")){c=ig.game.strings.replaceAll(c,"://","[[urlIndicator]]");
var d=c.indexOf("//");0<=d&&(c=c.substr(0,d),c=ig.game.strings.replaceAll(c,"[[urlIndicator]]","://"),a[b]=c)}}return a.join("\n")},O1651:function(a,b,c){var d="",e=a.indexOf(b);0<=e&&(e+=b.length,b=a.indexOf(c,e+1),b>e&&(d=a.substring(e,b)));return d},O8631:function(a){var b="";if(a&&"string"==typeof a)for(var c=0;c<a.length;c++){var d=a.charAt(c),e=d.charCodeAt(0);32<=e&&126>=e&&(b+=d)}return b},O2025:function(a){var b=this;return a=a.replace(/([0-9]{4}\-[0-9]{2}\-[0-9]{2}\s[0-9]{2}:[0-9]{2}\sMT)/gi,
function(c,d){d=b.O4376(c);return'<span class="pseudolink manylandTime" onclick="ig.game.writableDialog.loadCalendar()">'+ig.game.strings.O9955(c)+'</span> <span class="yourTime">('+(b.pad(d.getHours())+":"+b.pad(d.getMinutes())+" your time)</span>")})},O4376:function(a){a=a.substr(0,16);return new Date(Date.UTC(parseInt(a.substr(0,4)),parseInt(a.substr(5,2)-1),parseInt(a.substr(8,2)),parseInt(a.substr(11,2)),parseInt(a.substr(14,2))))},pad:function(a){1==String(a).length&&(a="0"+String(a));return a},
O3776:function(a){return 9>=a?"0"+a.toString():a},O7882:function(a){a||=new Date;return a.getFullYear()+"-"+this.pad(a.getMonth()+1)+"-"+this.pad(a.getDate())},O7512:function(a){a=a?a:new Date;return a.getFullYear()+"-"+this.pad(a.getMonth()+1)+"-"+this.pad(a.getDate())+" "+this.pad(a.getHours())+":"+this.pad(a.getMinutes())+":"+this.pad(a.getSeconds())},O1572:function(a,b,c){for(var d;a!=d;)d=a,a=this.replaceAll(a,b,c);return a},O2608:function(a){var b,c={},d="",e=[],f=256;for(b=0;256>b;b+=1)c[String.fromCharCode(b)]=
b;for(b=0;b<a.length;b+=1){var g=a.charAt(b);var h=d+g;c.hasOwnProperty(h)?d=h:(e.push(c[d]),c[h]=f++,d=String(g))}""!==d&&e.push(c[d]);return JSON.stringify(e)},O7934:function(a,b){if(void 0==b||null==b)b=24;a=a.replace("://www.youtube.com","://youtube.com");a=a.replace("http://","");a=a.replace("https://","");return ig.game.strings.O7686(a,b,!0)},O2646:function(a){a=String(a);return 0<=a.indexOf("<")||0<=a.indexOf(">")},O4255:function(a,b){0===a.indexOf(b)&&(a=a.substr(b.length));return a},O9900:function(a){var b=
0;if(0<a.length){var c;var d=0;for(c=a.length;d<c;d++){var e=a.charCodeAt(d);b=(b<<5)-b+e;b|=0}}return b},O2837:function(a){return Number(a).toLocaleString()},O8845:function(a,b,c){return a.substr(0,b)+c+a.substr(b+c.length)},O8873:function(a){a=this.O2645(a,8216,"'");a=this.O2645(a,8217,"'");a=this.O2645(a,8220,'"');a=this.O2645(a,8221,'"');return this.O2645(a,8230,"...")},O2645:function(a,b,c){if(a&&1<=a.length)for(var d=0;d<a.length;d++)a.charCodeAt(d)==b&&(a=ig.game.strings.O8845(a,d,c));return a},
O7812:function(a,b){a=ig.game.strings.O9955(a);b||="";a=ig.game.strings.O7811(a,!0);a=ig.game.strings.replaceAll(a,"\r\n","\r");a=ig.game.strings.replaceAll(a,"\n","\r");a=ig.game.strings.replaceAll(a,"\r","<br/>");return'<p style="'+b+'">'+a+"</p>"}})});ig.baked=!0;
ig.module("game.core.portaller").defines(function(){window.Portaller=ig.Class.extend({O7787:!1,O1724:null,O7352:3,O4206:!1,O6410:null,O4014:3,O3807:null,O3918:1E3,init:function(){},update:function(){this.O7787&&this.O1724.delta()>this.O7352&&this.O6368();this.O4206&&this.O6410.delta()>this.O4014&&this.O1202()},O5114:function(a,b,c){a&&(this.O1397=ig.game.O6112.O2132(a.x,a.y),ig.game.O7836.O1716(ig.game.O1257.pos,this.O1397,b,c),ig.game.O1257.pos.x=this.O1397.x+6,ig.game.O1257.pos.y=this.O1397.y,ig.game.O1257.vel.x=
b.x,ig.game.O1257.vel.y=b.y,ig.game.O1257.O8418=c,ig.game.sounds.portallingWhoosh.play())},O8506:function(a,b,c,d){ig.game.O7836.O9265(a,b,c,d);this.O7787=!0;this.O1724=new ml.Timer;ig.game.O1257.fallTimer=null;this.O3807=this.O4792()},O4836:function(){ig.game.O2974();ig.game.O9710.O3280(this.O3807)},O6368:function(){this.O7787=!1;this.O1724=null},O3701:function(){var a=ig.game.O4223||!ig.game.O9720?"elsewhere":ig.game.O9720;ig.game.O5285.setItem("portaller_lastAreaGroupName",localStorage.getItem("portaller_currentAreaGroupName"));
ig.game.O5285.setItem("portaller_currentAreaGroupName",a)},O4433:function(){var a=localStorage.getItem("portaller_lastAreaGroupName");a&&("elsewhere"==a?this.startExitAreaTeleportingRequest():this.O6417(a))},O2121:function(a){ig.game.O7836.O5397(a);this.O4206=!0;this.O6410=new ml.Timer;this.O3807=this.O4792()},O3297:function(a,b,c,d){ig.game.O7836.O4914(a,b,c,d);this.O4206=!0;this.O6410=new ml.Timer;this.O3807=this.O4792()},startExitAreaTeleportingRequest:function(){var a=localStorage.portaller_lastAreaGroupName;
a&&0<=ig.game.O2791.indexOf(a)&&-1===ig.game.O2791.indexOf(ig.game.O9720)?this.O7749(a):(ig.game.O7836.O8477(),this.O4206=!0,this.O6410=new ml.Timer,this.O3807=this.O4792())},O7749:function(a,b){ig.game.O7836.O1494(String(a),ig.game.O1257.O2970);b||(this.O4206=!0);this.O6410=new ml.Timer;this.O3807=this.O4792()},O6417:function(a,b){ig.game.O7836.O1494(String(a),null);b||(this.O4206=!0);this.O6410=new ml.Timer;this.O3807=this.O4792()},O9838:function(a,b){ig.game.O7836.O1494(String(a),b);this.O4206=
!0;this.O6410=new ml.Timer;this.O3807=this.O4792()},O4194:function(){ig.game.O7249=null},acceptedForTeleport:function(a){ig.game.O2974(!1,!0);ig.game.O9710.teleported(this.O3807,a)},O1202:function(){this.O4206=!1;this.O6410=null},O4792:function(){var a=jQuery.Deferred();setTimeout(function(){a.resolve()},this.O3918);return a.promise()}})});ig.baked=!0;
ig.module("game.core.clickmanager").defines(function(){window.ClickManager=ig.Class.extend({O6420:!1,O3993:!1,O9706:!1,init:function(){},update:function(){this.O9706=this.O3993=this.O6420=!1},O8299:function(a,b,c,d){b=b<=ig.input.mouse.y&&ig.input.mouse.y<=d;return a<=ig.input.mouse.x&&ig.input.mouse.x<=c&&b},O9524:function(){var a=!1;ig.game.O1257&&(a=this.O8299(ig.game.O1257.pos.x-ig.game.screen.x-3,ig.game.O1257.pos.y-ig.game.screen.y-3,ig.game.O1257.pos.x+ig.game.O1257.size.x+3-ig.game.screen.x,
ig.game.O1257.pos.y+ig.game.O1257.size.y-ig.game.screen.y));return a},O7739:function(a,b,c,d){return ig.input.pressed("click")?this.O8299(a,b,c,d):!1},O3781:function(a,b,c,d){return ig.input.pressed("rightclick")?this.O8299(a,b,c,d):!1},O3645:function(a,b,c){return this.O8299(a.x1+b,a.y1+c,a.x2+b,a.y2+c)},O8784:function(a,b,c){(a=null!=a&&this.O8299(a.x1+b,a.y1+c,a.x2+b,a.y2+c))&&this.O7551();return a&&this.O4920()},O6730:function(a){this.O6420=!0;a&&ig.game.sounds.click.play()},O5457:function(a){this.O3993=
!0;a&&ig.game.sounds.click.play()},O7551:function(){this.O9706=!0},O4920:function(){return ig.input.pressed("click")&&!this.O6420},O3044:function(){return ig.input.pressed("rightclick")&&!this.O3993},O6559:function(a,b,c,d){return!this.O9706&&this.O8299(a,b,c,d)},O2478:function(){return{x:ig.input.mouse.x+ig.game.screen.x,y:ig.input.mouse.y+ig.game.screen.y}}})});ig.baked=!0;
ig.module("game.core.attachmentmanager").defines(function(){window.O6964=ig.Class.extend({lastPressedControlTimer:null,O9772:!1,O8218:1,O6246:function(a){var b=ig.game.O1257,c=null;this.O1578(b)||this.O4929(b)||b.O9832("actionable")||(c=this.O8961());if(c)c.O1861&&ig.game.O1189.register(ig.game.O1189.types.CAUGHT_ITEM_FROM_ITEM_THROWER),this.O2394(c,c.itemId,b),ig.game.O7836.O9581(c.originatorId,c.throwId);else if(!a)if(!(a=this.O615())||"BRAIN"==a.base&&b.attachments.br)if(this.O1670(b))if(b.attachments.h&&
0<=["STACKHOLD","EQUIPMENT","CONSUMAB","LINER"].indexOf(b.attachments.h.base)&&ig.game.O2116.O4848()){a=b.attachments.h.id;var d="EQUIPMENT"==b.attachments.h.base?"touches":"gets";c="EQUIPMENT"==b.attachments.h.base?ig.game.O2116.O4851(d,b.attachments.h.name,b.attachments.h):ig.game.O2116.O4851(d,b.attachments.h.name);if("gets"==d&&b.attachments.h.id==a)if(c)this.O6791(b,!0);else if("CONSUMAB"==b.attachments.h.base)this.O6791(b);else{if("STACKHOLD"==b.attachments.h.base||"LINER"==b.attachments.h.base)(a=
ig.game.O2116.O2294())&&a[0].O8711==b.attachments.h.interactingId?this.O6791(b):"STACKHOLD"==b.attachments.h.base&&this.O3367(b,b.attachments.h.name,a)}else b.O6310(!0)}else if(b.attachments.h&&("EQUIPMENT"==b.attachments.h.base||0<=b.attachments.h.name.indexOf("sword")))ig.game.O2082.O2732(b.attachments.h.attributes)&&!this.O5629()||b.O6310();else if(this.O1578(b)){if(!ig.game.O2082.O2732(b.attachments.h.attributes)||this.O5629())this.O535(b),this.O9057(b),this.O9293(b),b.attachments.h&&"CONSUMAB"==
b.attachments.h.base&&ig.game.O2116.O7884(b,"consumes",b.attachments.h.name)}else if(this.O4929(b)){if(a=b.O9832("slowerToUse")?.85:.25,(c=b.attachments&&b.attachments.w?b.attachments.w.emitsId:null)&&(!b.O8538||b.O8538.delta()>=a)){var e=ig.game.O4261.getItemBasic(c,"attachment_manager action_press"),f=this;e.imagesBeingGenerated.done(function(){if(b&&b.attachments.w&&b.attachments.w.dynathingEntity&&b.attachments.w.dynathingEntity.subEntities.e1){var g=e.attributes?e.attributes:{};if(b.attachments.w&&
b.attachments.w.dynathingEntity&&!ig.game.O2082.O2732(g)||f.O5629())f.O5912(b),b.attachments.w.dynathingEntity&&b.attachments.w.dynathingEntity.O5432(!0)}})}}else b.O9832("actionable")&&b.attachments.w.dynathingEntity?b.attachments.w.dynathingEntity.O5432(!0):(a=this.O6791(b),b.O8088&&a==this.slots.HOLDABLE&&b.O1832&&(ig.game.attachmentManager.O1336(b,a,b.O1832),ig.game.O7836.O9073(a,b.O1832)),b.O1832=null);else b.O6310();else(c=this.O6854(a.base))&&!ig.game.settings.getGlue(c)&&(b.O1832=null,this.O7355(b,
c,a.thingTypeId,null,a.base),c==this.slots.MOUNTABLE&&this.O9735(a))},O3367:function(a,b,c){var d=-10>a.vel.y,e=90<=Math.abs(a.vel.x);if(d||e||"INDIVIDUALS"!=ig.game.O5549)this.O6791(a);else{b=0<=b.indexOf("bomb")||0<=b.indexOf("rock")||0<=b.indexOf("stone")||0<=b.indexOf("ball");d=!1;if(c)for(e=0;e<c.length;e++){var f=c[e];if(f&&f.attributes&&!f.attributes.nonFlipping){d=!0;break}}f=!1;if(c)for(e=0;e<c.length&&!(f=c[e],f=15>=Math.abs(f.pos.x-a.pos.x)?!0:f.pos.x<a.pos.x&&!a.O8418||f.pos.y>a.pos.y&&
a.O8418);e++);(b&&!d||!f)&&this.O6791(a)}},O5629:function(){var a=!0;"INDIVIDUALS"!=ig.game.O5549&&((a=ig.game.O4873.O9498())&&ig.game.O1257.say(ig.game.O4873.O6566()),a=!a);return a},O9057:function(a){var b=this.O8703(a),c=b.slowerToUse?.85:.25;if(!a.O8538||a.O8538.delta()>=c){c={};var d=a.O4257();c.opp={x:Math.floor(a.pos.x-a.offset.x+d.x),y:Math.floor(a.pos.y-a.offset.y+d.y)};c.opv={x:Math.floor(a.vel.x),y:Math.floor(a.vel.y)};b.randomized&&(b.flies&&b.lightweight?c.opv.y=this.distort(c.opv.y,
15):(c.opv.x=this.distort(c.opv.x,25),c.opv.y=this.distort(c.opv.y,25)));c.tid=a.O4670++;this.O2899(a,this.slots.HOLDABLE,!0,c);a.O8538=new ml.Timer;b.bumpsSelf&&(a.vel.y-=ig.game.O4293(50,100),a.vel.x+=ig.game.O4293(100,150)*(a.O8418?-1:1))}},O5912:function(a,b){if(a||a.attachments||a.attachments.w){if(null===b||void 0===b)b=!0;var c=ig.game.O4261.getItemBasic(a.attachments.w.emitsId,"attachment_manager throw_emitting"),d=this;c.imagesBeingGenerated.done(function(){if(a&&a.attachments.w&&a.attachments.w.dynathingEntity&&
a.attachments.w.dynathingEntity.subEntities.e1){var e=c.attributes?c.attributes:{},f={},g=a.attachments.w.dynathingEntity;f.opp={x:Math.floor(g.pos.x+g.size.x/2+g.subEntities.e1.pos.x),y:Math.floor(g.pos.y+g.size.y/2+g.subEntities.e1.pos.y-9)};f.opv={x:Math.floor(a.vel.x),y:Math.floor(a.vel.y)};e.randomized&&(e.flies&&e.lightweight?f.opv.y=d.distort(f.opv.y,15):(f.opv.x=d.distort(f.opv.x,25),f.opv.y=d.distort(f.opv.y,25)));f.tid=a.O4670++;d.O2899(a,d.slots.WEARABLE,b,f,e);a.O8538=new ml.Timer}})}},
O9735:function(a){if(ig.game.O1257.rank>=this.O9284(a.thingTypeId)){var b=ml.Misc.getGridNeighborOfTypes(a.O5682,["POINTER"]);b&&(ig.game.O7465(a.thingTypeId),a=ig.game.O6112.O2132(a.O5682.x,a.O5682.y),a.x-=8,a.y-=8,ig.game.O1257.pos=a,ig.game.O1257.vel={x:0,y:0},ig.game.O1257.accel={x:0,y:0},ig.game.O1257.forceSend=!0,ig.game.O9817.O2699(b.url).done(function(c){ig.game.O2453.setTargetMapLocationOnAutoPilot(c)}))}},O1578:function(a){return a&&a.attachments&&a.attachments.h&&("EMITTER"==a.attachments.h.base||
"HOOK"==a.attachments.h.base||a.attachments.h.attributes&&(a.attachments.h.attributes.many||a.attachments.h.attributes.hook))},O4929:function(a){return a&&a.attachments&&a.attachments.w&&"DYNATHING"==a.attachments.w.base&&a.attachments.w.emitsId},O615:function(a){for(var b=null,c=["betweenDefaultAndPlayer","default","light","decoEffects"],d=0;d<c.length;d++){var e=ig.game.O5119[c[d]];if(e)for(var f=0;f<e.length;f++){var g=e[f];if(!g._killed&&(g.isStack||a)&&ig.game.O1257.touches(g)&&!g.O3452){b={base:g.baseType,
thingTypeId:g.thingTypeId,O5682:g.O5682,O8137:g.O8137};break}}}return b},O8961:function(){var a=null,b=ig.game.O5119.foreground;if(b)for(var c=0;c<b.length;c++){var d=b[c];if(d instanceof EntityThrownItem&&!d._killed&&0<=this.O5888.indexOf(d.O5089)&&ig.game.O1257.touches(d)&&(!d.thingTypeId||ig.game.O1257.rank>=this.O9284(d.thingTypeId))){a=d;break}}return a},O5756:function(a,b){for(var c=null,d=ig.game.O8799("EntityThrownItem"),e=0;e<d.length;e++)if(d[e].originatorId==a&&d[e].throwId==b){c=d[e];
break}return c},O2394:function(a,b,c){this.O1336(c,this.slots.HOLDABLE,b);c.O8088&&(c.lastCatch||(c.lastCatch={}),c.lastCatch.originatorId=a.originatorId,c.lastCatch.throwId=a.throwId,ig.game.O2116.O7884(c,"catches",a.O4910));ig.game.decorator.O1478(c);ig.game.sounds.O9396(ig.game.sounds.pickup,c,.75);a&&a.kill()},O7599:function(a,b){ig.game.O1257.O8078()&&ig.game.O1257.lastCatch&&ig.game.O1257.lastCatch.originatorId==a&&ig.game.O1257.lastCatch.throwId==b&&(ig.game.O1257.attachments[this.slots.HOLDABLE]=
null)},O9471:function(a,b){b||={};var c,d;for(d in this.slots)(c=this.slots[d])&&this.O1336(a,c,b[c],!0)},O1336:function(a,b,c,d,e,f){if(!(a.attachments[b]&&a.attachments[b].id==c||!a.attachments[b]&&!c))if(c){var g=ig.game.O4261.getItemBasic(c,"attachment_manager set"),h=this;this.lastPressedControlTimer=null;g.imagesBeingGenerated.done(function(){g.base||ig.game.errorManager.warn("Base info still missing after image done");if((b==h.slots.WEARABLE||b==h.slots.WEARABLE_PLUS)&&null!==a.rank&&void 0!==
a.rank&&a.rank<h.O8218)a.O8088&&ig.game.O5058&&ig.game.O5058.O8943("uprankToUse");else{a.attachments.b&&ig.game.O2116.O7884(a,"unembodies",a.attachments.b.name);a.attachments[b]={};a.attachments[b].base=g.base;a.attachments[b].id=c;a.attachments[b].offset=ig.game.O4507(g.offset);a.attachments[b].name=g.name;a.attachments[b].attributes=g.attributes;g.specs&&(a.attachments[b].specs=g.specs);g.soundId&&(a.attachments[b].soundId=g.soundId);g.emitsId&&(a.attachments[b].emitsId=g.emitsId);e&&(a.attachments[b].interactingId=
e);g.motionId&&(a.attachments[b].motionId=g.motionId);g.textSize&&(a.attachments[b].textSize=g.textSize);!f||g.attributes&&g.attributes.effectsFree||ig.game.decorator.O9433(a);if(!d){var k="STACKHOLD LINER STACKWEAR MNTGROUND MNTAIR EQUIPMENT BRAIN".split(" ");a.attachments[b].soundId&&0<=k.indexOf(g.base)?ig.game.sounds.playIncludedSound(a,a.attachments[b].soundId):0<=["STACKHOLD","EQUIPMENT","LINER"].indexOf(g.base)&&g.name&&0<=g.name.toLowerCase().indexOf("sword")&&ig.game.sounds.O3961("sword_draw_2")}g.boundingBox2&&
(a.attachments[b].boundingBox2=ig.game.O4507(g.boundingBox2));g.rgb&&(a.attachments[b].rgb=g.rgb);switch(b){case h.slots.BODY:h.O9419(a,g.base,g,d);break;case h.slots.WEARABLE:case h.slots.WEARABLE_PLUS:h.O6557(a,g.base,g,b);break;case h.slots.HOLDABLE:h.O3083(a,g.base,g);break;case h.slots.MOUNTABLE:h.O8969(a,g.base,g);break;case h.slots.BRAIN:h.O9650(a,g.base,g)}}})}else this.O3578(a,b,!1,null)},O9729:function(a){return!!("EMITTER"==a.base||"AIMABLE"==a.base||a.attributes&&a.attributes.flies&&a.attributes.lightweight&&
a.attributes.many)},O9419:function(a,b,c,d){var e=c.img.width/ig.game.O1828!=parseInt(c.img.width/ig.game.O1828);b=c.img.width/(e?ig.game.O6965:ig.game.O1828);var f=c.img.height;var g={};c=new ml.AnimationSheet(null,b,f,c.img);g.idle=new ml.Animation(c,1,[0]);g.run=new ml.Animation(c,.15,[1,0]);g.jump=new ml.Animation(c,1,[2]);g.fall=new ml.Animation(c,1,[3]);g.climbing=new ml.Animation(c,.2,[4,4]);g.climbingidle=new ml.Animation(c,1,[4]);g.swimming=new ml.Animation(c,.15,[1,0]);g.swimmingidle=new ml.Animation(c,
1,[1]);g.creating=new ml.Animation(c,.4,[5,5]);g.harm=new ml.Animation(c,1,[2]);g.blink=new ml.Animation(c,1,[e?6:7]);g.afk=new ml.Animation(c,1,[e?6:0]);g.sit=new ml.Animation(c,1,[e?0:6]);g.talk=new ml.Animation(c,1,[e?0:8]);a.attachments.b.animSheet=c;a.attachments.b.anims=g;a.attachments.b.isOld=e;b==ig.game.O9925&&f==ig.game.O9925?(a.size={x:a.sizeDefault.x,y:a.sizeDefault.y},a.offset={x:3,y:3}):(a.size={x:a.sizeDefault.x,y:a.sizeDefault.y},a.offset={x:b-ig.game.O9925+3,y:3+(f-ig.game.O9925)},
17>=b&&(a.size.x=b,11>=b&&(a.offset.x+=7)));a.offsetDefault=ig.game.O4507(a.offset);d||(a.pos.y-=f-a.sizeDefault.y);a.attachments.m&&this.O8959(a);d||ig.game.O2116.O7884(a,"embodies",a.attachments.b.name);a.O8088&&(ig.game.O3957&&(ig.game.O3957.O6942=[]),d||ig.game.O1189.register(ig.game.O1189.types.CHANGED_BODY))},O6557:function(a,b,c,d){"DYNATHING"==b?this.O9081(a,b,c,d):this.O5703(a,b,c,d)},O9081:function(a,b,c,d){b={thingTypeId:c.id,animSheet:ig.game.entityManager.getAnimationForEntity(c,0,0),
rotation:0,attributes:ig.game.O4507(c.attributes),O9744:!0,text:c.text,givenName:c.name,soundId:c.soundId,emitsId:c.emitsId,O4529:a.O8418,O3179:a.O8418};b.attributes||(b.attributes={});d==this.slots.WEARABLE_PLUS&&(b.isWearablePlus=!0,!b.attributes.follows&&a.O9668&&a.O9668.wearablePlusFollows&&(b.attributes.follows=!0,b.attributes.closelyFollows=!1,b.attributes.attachable=!1));b.attributes.attachable||b.attributes.follows||b.attributes.closelyFollows||(b.attributes.attachable=!0);a.attachments[d].dynathingEntity=
new ig.global.EntityDynathing(a.pos.x,a.pos.y,b);a.attachments[d].dynathingEntity.update(a);d==this.slots.WEARABLE&&a.attachments[d]&&ig.game.O2116.O7884(a,"attaches",a.attachments.w.name);if(c.emitsId){var e=ig.game.O4261.getItemBasic(c.emitsId,"attachment_manager set_wearable");e.imagesBeingGenerated.done(function(){if(a&&a.attachments&&a.attachments[d]){var f=new ml.AnimationSheet(null,e.img.width,e.img.height,e.img),g={};g.normal=new ml.Animation(f,1,[0]);g.normal.pivot.x=7;g.normal.pivot.y=2;
a.attachments[d].animSheet=f;a.attachments[d].anims=g;a.attachments[d].O8393=g.normal}})}a.O8088&&a.attachments[d]&&a.O3515(d)},O5703:function(a,b,c,d){b=c.img.width/2;var e=c.img.height,f={};var g=new ml.AnimationSheet(null,b,e,c.img);f.normal=new ml.Animation(g,1,[0]);f.back=new ml.Animation(g,1,[1]);b==ig.game.O9925&&e==ig.game.O9925?(f.normal.pivot.x=9,f.normal.pivot.y=12.5):(f.normal.pivot.x=18,f.normal.pivot.y=25);a.attachments[d].animSheet=g;a.attachments[d].anims=f;ig.game.addStat(a.O2970,
"worn",c.name);a.O8088&&(ig.game.attachmentManager.O9425(),a.attachments[d]&&a.O3515(d));"w"==d&&ig.game.O2116.O7884(a,"wears",a.attachments[d].name)},O9425:function(){ig.game.O1257.O9832("seeAllEvents")&&(ig.game.statsDialog?ig.game.statsDialog.open():setTimeout(function(){ig.game.attachmentManager.O9425()},1E3))},O9650:function(a,b,c){a.O8088&&ig.game.brainManager.O7825(c);a.attachments.br&&ig.game.O2116.O7884(a,"equips",a.attachments.br.name)},O8969:function(a,b,c){var d=c.img.width/2,e=c.img.height,
f={};var g=new ml.AnimationSheet(null,d,e,c.img);"MNTAIR"==b?(f.wingDown=new ml.Animation(g,1,[0]),f.wingUp=new ml.Animation(g,1,[1]),f.wingFlap=new ml.Animation(g,.4,[1,0])):(f.idle=new ml.Animation(g,1,[0]),f.moving=new ml.Animation(g,.2,[1,0]));a.attachments.m.animSheet=g;a.attachments.m.anims=f;a.attachments.m.O8393="MNTAIR"==b?f.wingDown:f.idle;c.mountOffset||(c.mountOffset={x:0,y:0});a.attachments.m.mountOffset=ig.game.O4507(c.mountOffset);a.attachments.m.avatarOffset={x:-1*c.mountOffset.x,
y:-1*c.mountOffset.y};a.attachments.m.pivot={x:.25*d,y:-(d/2-e)};"MNTAIR"==b?(f.wingDown.pivot.x=f.wingDown.pivot.x=a.attachments.m.pivot.x,f.wingUp.pivot.x=f.wingUp.pivot.x=a.attachments.m.pivot.x,f.wingFlap.pivot.x=f.wingFlap.pivot.x=a.attachments.m.pivot.x,f.wingDown.pivot.y=f.wingDown.pivot.y=a.attachments.m.pivot.y,f.wingUp.pivot.y=f.wingUp.pivot.y=a.attachments.m.pivot.y,f.wingFlap.pivot.y=f.wingFlap.pivot.y=a.attachments.m.pivot.y):(f.idle.pivot.x=f.moving.pivot.x=a.attachments.m.pivot.x,f.idle.pivot.y=
f.moving.pivot.y=a.attachments.m.pivot.y);this.O8959(a);"MNTGROUND"==b?(a.friction=ig.game.O4507(a.O9338),a.O4781=ig.game.O4507(a.O9338),a.maxVel=ig.game.O4507(a.maxVelMountableGround),a.O3599=ig.game.O4507(a.maxVelMountableGround)):"MNTAIR"==b&&(a.friction=ig.game.O4507(a.frictionMountableAir),a.O4781=ig.game.O4507(a.frictionMountableAir),a.maxVel=ig.game.O4507(a.maxVelMountableAir),a.O2027=a.O7129,a.getMountableHasAttribute("heavy")&&(a.maxVel.x=100,a.maxVel.y+=700,a.O2027=a.O3350),a.O3599=ig.game.O4507(a.maxVel));
c.attributes&&(c.attributes.slower&&(a.O3599.x=Math.round(.5*a.O3599.x),a.O3599.y=Math.round(.5*a.O3599.y),a.maxVel.x=Math.round(.5*a.maxVel.x),a.maxVel.y=Math.round(.5*a.maxVel.y)),c.attributes.verticalOnly?(a.O3599.x=0,a.maxVel.x=0):c.attributes.horizontalOnly&&(a.O3599.y=0,a.maxVel.y=0));if(!c.attributes||c.attributes&&void 0===c.attributes.toStand||null===c.attributes.toStand)a.attachments.m.attributes||(a.attachments.m.attributes={}),a.attachments.m.attributes.toStand=ig.game.strings.contains(c.name,
"wing cape pack suit board skate body armor".split(" "));a.pos.y-=e-a.sizeDefault.y;ig.game.addStat(a.O2970,"mounted",c.name);ig.game.O2116.O7884(a,"mounts",a.attachments.m.name)},O3083:function(a,b,c){var d=c.img.width,e=c.img.height;2==c.cellCount&&(d=c.img.width/2);var f={};d=new ml.AnimationSheet(null,d,e,c.img);f.normal=2==c.cellCount?new ml.Animation(d,1,[0,1]):new ml.Animation(d,1,[0]);f.normal.pivot.x=7;f.normal.pivot.y=2;a.attachments.h.animSheet=d;a.attachments.h.anims=f;a.attachments.h.O8393=
f.normal;"LINER"==b&&(a.attachments.h.rgb=c.rgb?c.rgb.split(","):[255,255,255],a.attachments.h.rgb2=c.rgb2?c.rgb2.split(","):[255,255,255],a.attachments.h.lines=[],a.attachments.h.linesData={pulse:{value:0,vel:1},hue:{value:0,vel:1},hoverX:{value:ig.game.O4293(-10,10),vel:.1},hoverY:{value:ig.game.O4293(-10,10),vel:.1},O6475:null,atKeyword:c.atKeyword,O6719:ml.Misc.O2350(a.attachments.h.rgb)},c.environmentId&&ig.game.O1896.O5674(a,c.environmentId),a.attachments.h.attributes||(a.attachments.h.attributes=
{}));"AIMABLE"==b&&ig.game.O9968.O4987(a);ig.game.addStat(a.O2970,"held",c.name);ig.game.O2116.O7884(a,"takes",a.attachments.h.name);a.O8088&&(ig.game.O3957&&ig.game.O3957.O8855("take"),a.O3515("h"))},O8959:function(a){var b=a.attachments.m.animSheet.width;var c=a.attachments.m.animSheet.height;var d=ig.game.O4507(a.attachments.m.avatarOffset);ig.game.O4507(a.offset);a.offset={x:0,y:0};var e={};e.x=b;0>d.x&&(e.x+=Math.abs(d.x));d.x+a.size.x>e.x&&(e.x+=d.x-a.size.x);e.y=c;0>d.y&&(a.offset.y=d.y,e.y+=
Math.abs(d.y),a.pos.y+=-1);d.y+a.size.y>e.y&&(a.size.y=a.O8393&&a.O8393.sheet&&a.O8393.sheet.height?a.O8393.sheet.height:ig.game.O9925,e.y=a.size.y+d.y,a.pos.y-=2);if(b=a.attachments.b&&a.attachments.b.animSheet&&a.attachments.b.animSheet.width)if(c=a.attachments.b.animSheet.height,b!=ig.game.O9925&&16!=b&&b>ig.game.O9925&&c>ig.game.O9925)a.attachments.m.avatarOffset.x+=Math.round(ig.game.O9925-b),c>ig.game.O9925+5&&(a.attachments.m.avatarOffset.y-=Math.round(ig.game.O9925-c/2));a.size=ig.game.O4507(e)},
O6854:function(a){var b=null;-1!=this.attachableBaseTypes_body.indexOf(a)?b=this.slots.BODY:-1!=this.O4247.indexOf(a)?b=this.slots.WEARABLE:-1!=this.O1328.indexOf(a)?b=this.slots.MOUNTABLE:-1!=this.O5888.indexOf(a)?b=this.slots.HOLDABLE:-1!=this.O4661.indexOf(a)&&(b=this.slots.BRAIN);return b},O1487:function(a,b,c){var d=this.O6854(b);d&&this.O7355(a,d,c,null,b)},O9284:function(a){return 1},O3420:function(a){return!!(a&&a.attachments&&a.attachments.b&&a.attachments.b.id&&0<=a.attachments.b.id.indexOf("00000000000000"))},
O7355:function(a,b,c,d,e,f){var g=this.O9284(c);e||a.O8088||(g=1);!c||a.attachments[b]&&b!=this.slots.BODY?this.O3578(a,b,a.O8088,d):a.rank>=g?(b==this.slots.BODY&&(a.O8088&&this.O3578(a,this.slots.MOUNTABLE,!0),a.O9904()),this.O1336(a,b,c,void 0,void 0,b!=this.slots.MOUNTABLE),ig.game.sounds.O9396(ig.game.sounds.pickup,a),a.O8088&&!f&&ig.game.O7836.O9073(b,c)):a.O8088&&ig.game.O1002.O7063()},O3578:function(a,b,c,d){if(a.attachments[b]){this.lastPressedControlTimer=null;if(b==this.slots.MOUNTABLE){ig.game.O2116.O7884(a,
"unmounts",a.attachments[b].name);var e=a.attachments[b].attributes;e&&e.noFlyOffAtEnd||(e={O8766:a.attachments[b],O8985:{x:a.vel.x,y:a.vel.y}},ig.game.O9759(EntityGhost,a.pos.x,a.pos.y,e));a.O6519(a.O2624);a.O3599=ig.game.O4507(a.O2624);a.O7863(a.frictionWalking);a.O4781=ig.game.O4507(a.frictionWalking);a.O8393.angle=0;this.O2345(a);a.O2027=a.O9764;ig.game.sounds.O9396(ig.game.sounds.whoosh,a);a.fallTimer=new ml.Timer;a.O8088&&ig.game.O2453.O8381&&(ig.game.O2453.O5969(),ig.game.O1257.vel={x:0,y:0},
ig.game.O1257.accel={x:0,y:0})}else if(b==this.slots.HOLDABLE&&a.attachments[b]&&d){if(!a.attachments[b].animSheet)return;e=this.O3722(a,b,d);ig.game.O9759(EntityThrownItem,d.opp.x,d.opp.y,e);a.O1331("edible")||a.O1331("drinkable")||ig.game.sounds.O9396(ig.game.sounds.whoosh,a);a.O7469(b)}else"STACKWEAR"==a.attachments[b].base?(a.O8088&&a.O9832("seeAllEvents")&&ig.game.statsDialog&&ig.game.statsDialog.close(),ig.game.O2116.O7884(a,"unwears",a.attachments[b].name),a.O3666()&&(a.fallTimer&&(a.fallTimer=
new ml.Timer),a.O2027=1),a.O7469(b)):"DYNATHING"==a.attachments[b].base?(ig.game.O2116.O7884(a,"unattaches",a.attachments[b].name),a.O3666()&&(a.fallTimer&&(a.fallTimer=new ml.Timer),a.O2027=1),a.O7469(b)):"BRAIN"==a.attachments[b].base&&(ig.game.O2116.O7884(a,"unequips",a.attachments[b].name),a.O8088&&ig.game.userScriptEditor&&ig.game.userScriptEditor.isOpen&&ig.game.userScriptEditor.close()),b==this.slots.HOLDABLE&&a.O7469(b),a.attachments[b].attributes&&a.attachments[b].attributes.effectsFree||
(ig.game.decorator.O9433(a),ig.game.sounds.O9396(ig.game.sounds.putdown,a)),a.attachments[b].attributes&&(a.attachments[b].attributes.slowsFall||a.attachments[b].attributes.slowsFallALot)&&(a.fallTimer&&(a.fallTimer=new ml.Timer),a.O2027=1);this.O7793(a,b);e="AIMABLE"==a.attachments[b].base;a.attachments[b]=null;e&&ig.game.O9968.O8804(a);c&&ig.game.O7836.O9073(b,null,d);b==this.slots.BODY&&a.O9904()}},O2899:function(a,b,c,d,e){(b==this.slots.HOLDABLE||b==this.slots.WEARABLE)&&a.attachments[b]&&d&&
a.attachments[b].animSheet&&(e=this.O3722(a,b,d,e),ig.game.O9759(EntityThrownItem,d.opp.x,d.opp.y,e),b==this.slots.WEARABLE&&a.attachments.w&&a.attachments.w.emitsId&&a.attachments.w.soundId?ig.game.sounds.playIncludedSound(a,a.attachments.w.soundId):!a.O1331("edible")&&!a.O1331("drinkable")&&ig.game.sounds.O9396(ig.game.sounds.whoosh,a),("EMITTER"==a.attachments[b].base||"AIMABLE"==a.attachments[b].base||a.attachments[b].emitsId)&&ig.game.O2116.O7884(a,"emits",a.attachments[b].name),c&&ig.game.O7836.O9981(b,
null,d))},O3722:function(a,b,c,d){return{O8766:{width:a.attachments[b].animSheet.width,height:a.attachments[b].animSheet.height,flipX:("w"==b||"h"==b)&&a.O8393&&a.O8393.flip?a.O8393.flip.x:a.attachments[b].O8393.flip.x,path:a.attachments[b].animSheet.image.path,animSheet:a.attachments[b].animSheet},itemId:a.attachments[b].emitsId?a.attachments[b].emitsId:a.attachments[b].id,O5089:a.attachments[b].base,attributes:d?d:a.attachments[b].attributes,O4910:a.attachments[b].name,O8985:c.opv,originatorId:a.O2970,
O1086:a.isFriendedByUs,originatorHasBrainAttached:a.attachments&&a.attachments.br,O7796:a.rank,O8113:a.isEditorHere,throwId:c.tid,O7729:a.O8088,rgb:a.attachments[b].rgb,soundId:a.attachments[b].soundId,boundingBox2:a.attachments[b].boundingBox2}},O6791:function(a,b){var c=null,d=[];ig.game.settings.glueHoldable||d.push(this.slots.HOLDABLE);ig.game.settings.glueMountable||d.push(this.slots.MOUNTABLE);ig.game.settings.glueWearable||d.push(this.slots.WEARABLE);a.O4292()&&(d=[this.slots.MOUNTABLE,this.slots.HOLDABLE,
this.slots.WEARABLE]);a.attachments.w&&"DYNATHING"==a.attachments.w.base&&!ig.game.O6026&&(d=ml.Misc.O5905(d,this.slots.WEARABLE));a.attachments.w&&"STACKWEAR"==a.attachments.w.base&&!ig.game.O1720&&(d=ml.Misc.O5905(d,this.slots.WEARABLE));ig.game.O4948||(d=ml.Misc.O5905(d,this.slots.HOLDABLE));ig.game.O8689||(d=ml.Misc.O5905(d,this.slots.MOUNTABLE));ig.game.O5178||(d=ml.Misc.O5905(d,this.slots.BRAIN));for(var e,f=0;f<d.length;f++)if(e=d[f],a.attachments[e]){var g;e==this.slots.HOLDABLE&&!b&&(g={},
c=a.O4257(),g.opp={x:Math.floor(a.pos.x-a.offset.x+c.x),y:Math.floor(a.pos.y-a.offset.y+c.y)},g.opv={x:Math.floor(a.vel.x),y:Math.floor(a.vel.y)},g.tid=a.O4670++);c=e;if(e==this.slots.HOLDABLE&&a.attachments.h&&"AIMABLE"==a.attachments.h.base)this.O3578(a,e,!0);else{e==this.slots.HOLDABLE&&a.attachments.h&&0<=["STACKHOLD","EMITTER","CONSUMAB","LINER"].indexOf(a.attachments.h.base)?a.O6310()?c=null:(d="CONSUMAB"==a.attachments.h.base?a.attachments.h.name:null,this.O535(a),this.O3578(a,e,!0,g),d&&ig.game.O2116.O7884(a,
"consumes",d)):this.O3578(a,e,!0,g);break}}return c},O535:function(a){(a=a.attachments.h)&&"CONSUMAB"==a.base&&a.attributes&&a.attributes.edible&&a.attributes.hot&&ig.game.O1189.register(ig.game.O1189.types.CONSUMED_HOT_EDIBLE)},O8759:function(a,b){var c;for(c in this.slots){var d=this.slots[c];a.attachments[d]&&this.O3578(a,d,b)}},O6639:function(a,b){a.attachments[this.slots.MOUNTABLE]&&this.O3578(a,this.slots.MOUNTABLE,b,null)},O2345:function(a){if(a.O8393&&a.O8393.sheet){var b=a.O8393,c=a.attachments.b&&
a.attachments.b.O8393?a.attachments.b.O8393:null;c&&c.sheet?(b.pivot.x=.5*c.sheet.width,b.pivot.y=.5*c.sheet.height,c.pivot.x=b.pivot.x,c.pivot.y=b.pivot.y):(b.pivot.x=.5*b.sheet.width,b.pivot.y=.5*b.sheet.height)}a.attachments[this.slots.HOLDABLE]&&a.attachments[this.slots.HOLDABLE].O8393&&(a.attachments[this.slots.HOLDABLE].O8393.pivot=ig.game.O4507(a.attachmentDefaultPivots.holdable));a.attachments[this.slots.WEARABLE]&&a.attachments[this.slots.WEARABLE].O8393&&(a.attachments[this.slots.WEARABLE].O8393.pivot=
ig.game.O4507(a.attachmentDefaultPivots.wearable))},O7793:function(a,b,c){c&&(a.offsetDefault={x:3,y:3});(b==this.slots.BODY&&!a.attachments[this.slots.MOUNTABLE]||b==this.slots.MOUNTABLE)&&this.O1479(a)},O1479:function(a){a.size=ig.game.O4507(a.sizeDefault);a.offset=ig.game.O4507(a.offsetDefault)},O4631:function(a){if(a.attachments.m&&a.attachments.m.avatarOffset){var b,c,d=16;a.attachments.b&&a.attachments.b.animSheet&&a.attachments.b.animSheet.width&&(d=a.attachments.b.animSheet.width,d<=ig.game.O9925&&
(d=16));a.O8418?(b=a.attachments.m.animSheet.width-a.attachments.m.avatarOffset.x-d,c=a.attachments.m.avatarOffset.y):(b=a.attachments.m.avatarOffset.x,c=a.attachments.m.avatarOffset.y,16!=d&&(b+=3));a.O2047={x:b,y:c}}else console.log("Cant getAvatarOffsetForThisFlip when no mountable")},O9768:function(a){a.O8393.pivot.x=a.attachments.m.O8393.pivot.x-a.O2047.x;a.O8393.pivot.y=a.attachments.m.O8393.pivot.y-a.O2047.y;a.O8393.angle=a.attachments.m.O8393.angle;a.attachments.b&&a.attachments.b.O8393&&
(a.attachments.b.O8393.pivot.x=a.O8393.pivot.x,a.attachments.b.O8393.pivot.y=a.O8393.pivot.y);a.attachments.w&&a.attachments.w.O8393&&(a.attachments.w.O8393.pivot.x=a.O8393.pivot.x,a.attachments.w.O8393.pivot.y=a.O8393.pivot.y-a.attachmentDrawOffsets.wearable.y);a.attachments.h&&a.attachments.h.O8393&&(a.attachments.h.O8393.pivot.x=a.O8393.pivot.x,a.attachments.h.O8393.pivot.y=a.O8393.pivot.y-a.attachmentDrawOffsets.holdable.y)},O7300:function(a){var b,c;for(c in this.slots)if(b=this.slots[c],a.attachments[b])return!0;
return!1},O1670:function(a){var b,c;for(c in this.slots)if(b=this.slots[c],b!=this.slots.BODY&&b!=this.slots.WEARABLE_PLUS&&a.attachments[b])return!0;return!1},O5110:function(a,b){return"DYNATHING"==a?b&&(b.attachable||b.follows||b.closelyFollows):-1!=this.O3326.indexOf(a)},O9607:function(a){return-1!=this.O1328.indexOf(a)},O2548:function(a){if(a.O8393)if(a.O9367||a.O6717){var b=a.pos.x-a.offset.x-ig.game._rscreen.x,c=a.pos.y-a.offset.y-ig.game._rscreen.y;a.O8393.draw(b,c)}else b=a.pos.x-a.offset.x-
ig.game._rscreen.x,c=a.pos.y-a.offset.y-ig.game._rscreen.y,a.O8393.draw(b+9-5,c+ig.game.O9925-a.O8393.sheet.height,!0)},O1927:function(a,b){if(a.O8393){var c=a.pos.x-a.offset.x-ig.game._rscreen.x,d=a.pos.y-a.offset.y-ig.game._rscreen.y,e=a.O8393.sheet.height,f=c+5,g=d+ig.game.O9925+4;if("STACKWEARB"==b){if(null==this.O6530||void 0==this.O6530)this.O6530=ig.game.O8159.getImage(ig.game.O8159.stackback);this.O6530.draw(c,d+16);a.O8393.draw(f-5,g-e);this.isOld||a.anims.blink.draw(f-5,g-e)}else c=-5,d=
0,a.size.x==ig.game.O9925&&a.size.x==ig.game.O9925||(c=-15,d=15),a.O8393.draw(f+c,g-e+d,!0)}},O1273:function(a){a.O8393&&a.O8393.draw(a.pos.x-a.offset.x-ig.game._rscreen.x-Math.floor(a.O8393.sheet.width/4),a.pos.y-a.offset.y-ig.game._rscreen.y+ig.game.O9925-a.O8393.sheet.height,!0)},O5007:function(a){ig.game.O3957.isOpen||(a.O5542()?ig.game.O9170()&&(this.O3578(a,this.slots.MOUNTABLE,!0),a.doJump()):a.attachments[this.slots.MOUNTABLE]&&("MNTGROUND"==a.attachments[this.slots.MOUNTABLE].base?this.O8059(a):
"MNTAIR"==a.attachments[this.slots.MOUNTABLE].base&&this.O6048(a)))},O8059:function(a){ig.game.O1347()?(a.accel.x=-a.O6960,a.O8418=!1,this.O1598(a,!0)):ig.game.O5798()?(a.accel.x=a.O6960,a.O8418=!0,this.O1598(a,!1)):(a.standing&&(a.jumping=!1,a.O2027=a.O9764),a.accel.x=0);a.O8776()?ig.game.O3957.tryOpen():a.standing&&a.canJump&&!a.O9213()&&ig.game.O9170()&&a.doJump();a.O2952();a.setAnim(a.anims.idle)},O6048:function(a){ig.game.O1347()?(a.accel.x=-a.O5525,a.O8418=!1,this.O1598(a,!0)):ig.game.O5798()?
(a.accel.x=a.O5525,a.O8418=!0,this.O1598(a,!1)):(a.standing&&(a.jumping=!1),a.accel.x=0);ig.game.O9170()&&(a.getMountableHasAttribute("heavy")?a.vel.y-=a.O2075:a.getMountableHasAttribute("lightweight")?a.vel.y-=a.O6109:a.vel.y-=a.O7112,ig.game.sounds.O9396(ig.game.sounds.softWhoosh,a,.5),ig.game.O1257.forceSend=!0);ig.game.O2438()&&(this.lastPressedControlTimer=new ml.Timer,this.O9772=!1);a.O8776()&&ig.game.O3957.tryOpen();a.O2952();a.setAnim(a.anims.idle)},O1598:function(a,b){if(a.attachments.m.O8393&&
a.attachments.m.O8393.sheet.height){var c=a.attachments.m.O8393.sheet.height+a.attachments.m.mountOffset.y/2,d=a.O8418?0:a.attachments.m.O8393.sheet.width;d-=4;var e=100<=Math.abs(a.vel.x)||100<=Math.abs(a.vel.y);a.standing&&(b&&-50<a.vel.x||!b&&50>a.vel.x)&&(ig.game.chance(20)&&ig.game.O9759(EntityFootdust,a.pos.x+d,a.pos.y+c,{direction:a.O8418?-1:1}),e&&ig.game.chance(5)&&!this.O8966(a)&&ig.game.sounds.O9396(ig.game.sounds.screeching,a,.5));a.standing&&0==Math.abs(a.vel.x)&&ig.game.chance(20)&&
ig.game.O9759(EntityFootdust,a.pos.x+d,a.pos.y+c,{direction:a.O8418?-1:1});0==a.vel.x&&(this.O9671(a)?ig.game.sounds.O9396(ig.game.sounds.engine_starts,a):(this.O1744(a)||this.O8572(a)&&!this.O8966(a))&&ig.game.sounds.O9396(ig.game.sounds.footfalls,a));if(e)if(ig.game.chance(.15))if(a.attachments.m.soundId)ig.game.sounds.playIncludedSound(a,a.attachments.m.soundId);else for(c=ig.game.sounds.O3307(a.attachments.m.name),d=0;d<c.length;d++)ig.game.sounds.O9396(c[d],a);else ig.game.chance(1)?(this.O1744(a)||
this.O8572(a)&&!this.O8966(a))&&ig.game.sounds.O9396(ig.game.sounds.footfalls,a):ig.game.chance(.5)&&this.O9671(a)&&ig.game.sounds.O9396(ig.game.sounds.motor,a)}},O9671:function(a){var b=!1;a.attachments.m&&a.attachments.m.name&&(a=a.attachments.m.name.toLowerCase(),b=0<=a.indexOf("car")||0<=a.indexOf("auto")||0<=a.indexOf("truck"));return b},O8966:function(a){var b=!1;a.attachments.m&&a.attachments.m.name&&(a=a.attachments.m.name.toLowerCase(),b=0<=a.indexOf("bird")||0<=a.indexOf("snake"));return b},
O8572:function(a){var b=!1;a.attachments.m&&a.attachments.m.name&&(b=1<=ig.game.sounds.O3307(a.attachments.m.name).length);return b},O1744:function(a){var b=!1;a.attachments.m&&a.attachments.m.attributes&&(b=a.attachments.m.attributes&&a.attachments.m.attributes.hasLegs);return b},O8068:function(a,b){var c=b.collision.slope&&(b.collision.slope.tile==Item.prototype.COL_TYPES.SLOPE_LD||b.collision.slope.tile==Item.prototype.COL_TYPES.SLSLOPE_LD||b.collision.slope.tile==Item.prototype.COL_TYPES.PASSABLE_SLOPE_LD),
d=b.collision.slope&&(b.collision.slope.tile==Item.prototype.COL_TYPES.SLOPE_RD||b.collision.slope.tile==Item.prototype.COL_TYPES.SLSLOPE_RD||b.collision.slope.tile==Item.prototype.COL_TYPES.PASSABLE_SLOPE_RD);if(c||d){a.O7392=!0;a.O2027=a.O9764;var e=b.collision.slope.tile==Item.prototype.COL_TYPES.SLOPE_LD||b.collision.slope.tile==Item.prototype.COL_TYPES.PASSABLE_SLOPE_LD,f=b.collision.slope.tile==Item.prototype.COL_TYPES.SLOPE_RD||b.collision.slope.tile==Item.prototype.COL_TYPES.PASSABLE_SLOPE_RD;
(e&&ig.game.O5798()||f&&ig.game.O1347())&&100>a.vel.y&&(a.vel.x*=1.2);if(e&&0<a.vel.y&&ig.game.O5798()||f&&0<a.vel.y&&ig.game.O1347())a.vel.y=0;if(50<=Math.abs(a.vel.x)||50<=Math.abs(a.vel.y))e?a.attachments[ig.game.attachmentManager.slots.MOUNTABLE].O8393.angle=-.8:f&&(a.attachments[ig.game.attachmentManager.slots.MOUNTABLE].O8393.angle=.8)}a.O8046(b);a.O7298(b);if(a.attachments.m){if(b.collision.slope)if(a.O8418&&c||!a.O8418&&c)a.attachments.m.anims.idle.pivot.x=a.attachments.m.anims.moving.pivot.x=
a.size.x-a.attachments.m.pivot.x;else{if(a.O8418&&d||!a.O8418&&d)a.attachments.m.anims.idle.pivot.x=a.attachments.m.anims.moving.pivot.x=a.attachments.m.pivot.x}else a.attachments.m.anims.idle.pivot.x=a.attachments.m.anims.moving.pivot.x=a.O8418?a.size.x-a.attachments.m.pivot.x:a.attachments.m.pivot.x;a.attachments.m.O8393=0!=a.vel.x?a.attachments.m.anims.moving:a.attachments.m.anims.idle;a.attachments.m.O8393.update();a.standing||a.O9165!=a.O4583.RUNNING?b.collision.slope||(a.attachments[ig.game.attachmentManager.slots.MOUNTABLE].O8393.angle=
0):(a.frictionModifier=a.O4700MountableGround,a.attachments[ig.game.attachmentManager.slots.MOUNTABLE].O8393.angle=a.O8418?(a.vel.y-200)/1E3:(-a.vel.y+200)/1E3);1>=Math.abs(a.vel.x)&&1>=Math.abs(a.vel.y)&&(a.attachments[ig.game.attachmentManager.slots.MOUNTABLE].O8393.angle=0);a.O2346(b);a.O8088&&a.getMountableHasAttribute("goneOnImpact")&&b.collision&&b.collision.x&&5<=Math.abs(a.vel.x)&&(ig.game.sounds.collide.play(),this.O3578(a,"m",!0));a.parent(b)}},O1549:function(a,b){var c=a.getMountableHasAttribute("heavy");
a.O8046(b);a.O7298(b);if(a.attachments.m){a.O2027=c?a.O3350:a.O7129;var d=10;c&&(d=20);this.lastPressedControlTimer||(this.lastPressedControlTimer=new ml.Timer);if(a.O8088&&this.O7767(a))if(c=this.lastPressedControlTimer.delta(),this.O9772){if(310<=c){this.O3578(a,ig.game.attachmentManager.slots.MOUNTABLE,a.O8088);return}}else 300<=c&&(ig.game.O5058.O8943("tiredFromActionLessMoving"),this.O9772=!0);if(Math.abs(a.vel.y)<=d)a.attachments.m.O8393=a.attachments.m.anims.wingDown;else if(a.vel.y>=d){if(a.attachments.m.O8393=
a.attachments.m.anims.wingUp,a.O8088&&a.vel.y>=a.maxVelMountableAir.y&&!a.O5542())if(c=this.lastPressedControlTimer.delta(),this.O9772){if(310<=c){this.O3578(a,ig.game.attachmentManager.slots.MOUNTABLE,a.O8088);return}}else 300<=c&&(ig.game.O5058.O8943("tiredFromActionLessMoving"),this.O9772=!0,a.vel.y=.15*a.maxVelMountableAir.y)}else a.vel.y<=d&&(a.attachments.m.O8393=a.attachments.m.anims.wingFlap);-175>a.vel.y&&(a.vel.y=-175);if(a.standing||a.O9165!=a.O4583.RUNNING)10<Math.abs(a.vel.x)&&(a.attachments.m.O8393=
a.attachments.m.anims.wingFlap),a.vel.x=a.vel.x.limit(-100,100);a.attachments.m.O8393.update();a.O2346(b);a.O8088&&a.getMountableHasAttribute("goneOnImpact")&&b.collision&&(b.collision.x||b.collision.y)&&(d=!0,!b.collision.x&&b.collision.y&&(d=0>a.vel.y||50<a.vel.y),d&&(ig.game.sounds.collide.play(),this.O3578(a,"m",!0)));a.parent(b)}},O7767:function(a){return!!(a&&a.attachments.m&&a.attachments.m.attributes&&(a.attachments.m.attributes.autoSpeedLeft||a.attachments.m.attributes.autoSpeedRight||a.attachments.m.attributes.autoSpeedUp||
a.attachments.m.attributes.autoSpeedDown))},O3248:function(a){var b=!1,c=a.attributes;a.emitsId?b=!0:c&&(b=c.slowsFall||c.heavy||c.enablesDoubleJump||c.enablesTripleJump||c.enablesQuadrupleJump||c.enablesQuintupleJump||c.enablesInfiniteJump||c.breather||c.invisibility||c.heatResistant||c.coldResistant||c.stormWindResistant||c.bumpResistant||c.slowsFall||c.slowsFallALot||c.heavy||c.veryHeavy||c.fast||c.veryFast||c.higherJump||c.reducesDamage25percent||c.reducesDamage50percent||c.reducesDamage75percent||
c.reducesDamage100percent||c.disablesInteracting||c.slidey||c.verySlidey||c.pushFlying||c.hoverFlying||c.disablesGrabbing||c.disablesTransport||c.passThroughSolids);return b},O1158:function(a,b,c,d){a&&("MOTION"==a.base?(ig.game.attachmentManager.O5645(ig.game.O1257,a.id,b),ig.game.O7836.O3933(a.id,a.name)):this.O5110(a.base,a.attributes)&&(b=!0,c||d?b=!0:"DYNATHING"==a.base||"STACKWEAR"==a.base?ig.game.isEditorHere||ig.game.O9677||!this.O3248(a)?b=!0:(b=!1,ig.game.O5058.O8943("editorOnly")):"STACKHOLD"!=
a.base&&"AIMABLE"!=a.base&&"EQUIPMENT"!=a.base&&"EMITTER"!=a.base&&"HOOK"!=a.base&&"LINER"!=a.base&&"CONSUMAB"!=a.base&&"MNTGROUND"!=a.base&&"MNTAIR"!=a.base||ig.game.isEditorHere||ig.game.O9677||(b=!1,ig.game.O5058.O8943("editorOnly")),b&&(c=this.O6854(a.base),this.O7355(ig.game.O1257,c,a.id,null,a.base))))},O5645:function(a,b,c){var d=!1;if(a){var e=this.O3740(a);e&&e.kill();var f=ig.game.O4261.getItemBasic(b,"attachment_manager motion");f&&f.imagesBeingGenerated.done(function(){a&&(ig.game.O9759(EntityMotion,
a.pos.x,a.pos.y,{img:f.img,attributes:f.attributes,O4459:a.O2970,soundId:f.soundId,emitsId:f.emitsId}),d=!0,a.O8088&&!c&&f.attributes&&f.attributes.spoken&&ig.game.O5058.O7948(f.name),ig.game.O2116.O4851("sees",f.name),ig.game.O2116.O7884(a,"does",f.name),ig.game.brainManager.O2535(a,"does",f.name))});return d}},O8703:function(a){var b={};a.attachments.h&&a.attachments.h.attributes&&(b=a.attachments.h.attributes);return b},distort:function(a,b){return a+ig.game.O4293(-b,b)},O3740:function(a){var b=
null;if(a.attachments&&a.attachments.b){var c=ig.game.O5119.O7367;if(c)for(var d=0;d<c.length;d++){var e=c[d];if(!e._killed&&e.O4459==a.O2970){b=e;break}}}return b},O9293:function(a){if(a.O8088&&a.attachments.h&&a.attachments.h.motionId){var b=a.attachments.h.motionId,c=ig.game.O4261.getItemBasic(b,"attachment_manager trigger_holdable");c&&c.imagesBeingGenerated.done(function(){ig.game.attachmentManager.O5645(a,b);ig.game.O7836.O3933(b,null)})}},O1177:function(a){for(var b=[this.slots.HOLDABLE,this.slots.MOUNTABLE,
this.slots.WEARABLE],c=0;c<b.length;c++){var d=b[c];a.attachments[d]&&this.O3578(a,d,!0)}},O8626:function(a,b,c,d){var e=0;d=0;if(a&&a.O8393&&a.O8393.sheet){var f=!a.O8393.flip.x;a&&a.animSheet&&a.animSheet.width&&(c=a.animSheet.width);e=c/2-ig.game.O2953-1;f||--e;e=Math.round(e)}a&&a.O8393&&b&&b.O8393&&b.O8393.sheet&&b.O8393.sheet.width==ig.game.O4975&&(f=!a.O8393.flip.x,e-=11,f||(e+=3),d-=6);return{x:e,y:d}},O6284:function(a){a=a.attachments;return!(!a||!(a.w||a.m||a.h||a.br))},O9507:function(a){var b=
[];switch(a){case this.slots.BODY:b=this.attachableBaseTypes_body;break;case this.slots.WEARABLE:b=this.O4247;break;case this.slots.WEARABLE_PLUS:b=this.attachableBaseTypes_wearablePlus;break;case this.slots.MOUNTABLE:b=this.O1328;break;case this.slots.BRAIN:b=this.O4661;break;case this.slots.HOLDABLE:b=this.O5888}return b},slots:{BODY:"b",WEARABLE:"w",MOUNTABLE:"m",HOLDABLE:"h",BRAIN:"br",WEARABLE_PLUS:"wp"},O3326:"STACKWEARB STACKWEAR DYNATHING MNTGROUND MNTAIR MNTWATER STACKHOLD EMITTER AIMABLE EQUIPMENT CONSUMAB HOOK STACKINSTR LINER BRAIN".split(" "),
attachableBaseTypes_body:["STACKWEARB"],O4247:["STACKWEAR","DYNATHING"],attachableBaseTypes_wearablePlus:"STACKWEAR DYNATHING SOLID SLOPE SLIDEY SLSLOPE BOUNCEY BOUNCEYT DECOBG DECO DECOFG DECOBIG DECOVBIG PUSH PUSHDIAG CLIMB WALKABLE PASS STICKY PASSSLOPE".split(" "),O1328:["MNTGROUND","MNTAIR"],O4661:["BRAIN"],O5888:"STACKHOLD EMITTER AIMABLE EQUIPMENT CONSUMAB HOOK STACKINSTR MNTGROUND MNTAIR STACKWEAR DYNATHING LINER".split(" ")})});ig.baked=!0;
ig.module("game.core.O7069").defines(function(){window.O9097=function(){this.usePregeneratedImages=!0;this.sectorLoadingColor="rgba(10,10,50,0.5)";this.sectorHiddenColor="rgba(200,50,50,0.5)";this.sectorEmptyColor="rgba(50,50,50,0.5)";this.sectorImageSize=32;this.dataPrimed=!1};window.O9097.prototype.O1321=function(){this.dataPrimed=!1;var a=ig.game.O4873.O8027,b=ig.game.O4873.currentArea,c=ig.game.userMapDialog.rendererStartSector.x-1,d=ig.game.userMapDialog.rendererStartSector.y-1,e=this;ig.game.O9817.O7473(a,
b,c,d,c+ig.game.userMapDialog.sectorsFitOnMap.x,d+ig.game.userMapDialog.sectorsFitOnMap.y).done(function(f){f&&f.sectors&&f.sectors.length&&e.O2222(a,b,f.sectors);e.dataPrimed=!0})};window.O9097.prototype.O5069=function(a){ig.game.isFullAccount?ig.game.O9817.O5995(a).done(function(b){if(b){var c=ig.game.O4873.O3991({x:b.sx,y:b.sy},{x:b.x,y:b.y});c.p=b.p;c.a=b.a;ig.game.userMapDialog.O6167(c)}}):ig.game.bottomMenu.O6979(!0)};window.O9097.prototype.O7528=function(a,b,c,d){var e=this.imageCache.get(a,
b,c,d);if(e&&e.s!=O9097.states.VISIBLE){var f=this;setTimeout(function(){f.O8915(a,b,c,d)},500)}};window.O9097.prototype.O1890=function(a,b,c,d,e,f){if(this.dataPrimed){var g=this.imageCache.get(a,b,c,d);g?g.s!=O9097.states.LOADING&&g.s==O9097.states.VISIBLE&&g.i&&(ig.system.context.globalAlpha=g.i.opacity||0,g.i.draw(e,f),ig.system.context.globalAlpha=1,1>g.i.opacity&&(g.i.opacity=Math.min(1,g.i.opacity+.07))):this.O8915(a,b,c,d)}};window.O9097.prototype.O8444=function(a,b,c){ig.system.context.fillStyle=
c;ig.system.context.fillRect(a*ig.system.scale,b*ig.system.scale,this.sectorImageSize*ig.system.scale,this.sectorImageSize*ig.system.scale)};window.O9097.prototype.isSectorExplored=function(a,b,c,d){return(a=this.imageCache.get(a,b,c,d))&&a.s==O9097.states.VISIBLE};window.O9097.prototype.O8915=function(a,b,c,d){this.imageCache.set(a,b,c,d,{s:O9097.states.LOADING,i:null});var e=this;ig.game.O9817.O9415(a,b,c,d).done(function(f){if(f){var g=f.id;f=f.pn;g?(e.O4783(g,a,b,c,d),f&&f.length&&e.placenameCache.set(a,
b,c,d,f)):e.imageCache.get(a,b,c,d).s=O9097.states.HIDDEN}else console.log("No data returned from usermap!")})};window.O9097.prototype.O2222=function(a,b,c){for(var d,e,f,g,h=0;h<c.length;h++)d=c[h],e=d.id,f=d.pn,g=d.x,d=d.y,this.imageCache.set(a,b,g,d,{s:O9097.states.LOADING,i:null}),e?(this.O4783(e,a,b,g,d),f&&f.length&&this.placenameCache.set(a,b,g,d,f)):this.imageCache.get(a,b,g,d).s=O9097.states.HIDDEN};window.O9097.prototype.O4783=function(a,b,c,d,e){a=this.usePregeneratedImages?ig.game.O3186.getSectorImageUrl(a):
ig.game.O3186.O6959(b,c,d,e);var f=this;a=new ml.Image(a,function(){f.imageCache.get(b,c,d,e).s=O9097.states.VISIBLE;f.imageCache.get(b,c,d,e).i&&(f.imageCache.get(b,c,d,e).i.opacity=0)},this);this.imageCache.get(b,c,d,e).i=a};window.O9097.prototype.imageCache={_cache:[[],[],[]],set:function(a,b,c,d,e){var f=window.O9097.prototype.imageCache._cache;f[a][b]||(f[a][b]=[]);f[a][b][d]||(f[a][b][d]=[]);f[a][b][d][c]=e},get:function(a,b,c,d){var e=window.O9097.prototype.imageCache._cache;return e[a]&&e[a][b]&&
e[a][b][d]&&e[a][b][d][c]}};window.O9097.prototype.placenameCache={_cache:[[],[],[]],set:function(a,b,c,d,e){var f=window.O9097.prototype.placenameCache._cache;f[a][b]||(f[a][b]=[]);f[a][b][d]||(f[a][b][d]=[]);f[a][b][d][c]=e},get:function(a,b,c,d){var e=window.O9097.prototype.placenameCache._cache;return e[a]&&e[a][b]&&e[a][b][d]&&e[a][b][d][c]}};window.O9097.states={EMPTY:0,HIDDEN:1,LOADING:2,VISIBLE:3}});ig.baked=!0;
ig.module("game.core.boostmanager").defines(function(){window.BoostManager=ig.Class.extend({names:{interactions:"interaction_1 interaction_2 interaction_3 interaction_4 interaction_5 interaction_6 interaction_7 interaction_8 interaction_9 interaction_10".split(" "),happenings:"happening_1 happening_2 happening_3 happening_4 happening_5 happening_6 happening_7 happening_8 happening_9 happening_10 happening_11 happening_12".split(" "),insight:"dynamicOrigin myMostCollectedCreations myMostPlacedCreations numberOfPlacementsIMade numberOfThingsIMade numberOfDistinctPlacedItemsInUniverse numberOfAreasInUniverse numberOfThingsICollected numberOfPlacementsInUniverse receivedPings".split(" "),
everyoneAround:"everyoneFloating selection everyoneIsInvisible behindEveryone aboveEveryone everyoneRollMoving".split(" "),personNextToMe:"nextToMeFloating nextToMeMovementTrail nextToMeMultiple nextToMeRollMoving nextToMeBlendingIn nextToMeBrightLight arrivalFromAboveThem arrivalFromBelowThem behindThem giveWhatIHold".split(" "),me:"transport transportToCenter focusOnMe movementTrail onMe behindMe aboveMe multipleMe iBlendIn brightLightMe darkLightMe reverseMe meRollMoving crumbleJump moveBackwards waggleWhatIHold meFloating closeMyEyes toRandomArea showAreasFriendsAre".split(" "),
surrounding:"sound_1 sound_2 sound_3 sound_4 sound_5 sound_6 sound_7 sound_8 lightning quake rain snow stop clouds changeLiquid colorGlitter".split(" "),thingsAndBeings:"arrivalFromAbove arrivalFromBelow arrivalFromLeft arrivalFromRight thingsMovingUp thingsMovingDown thingsMovingRight thingsMovingLeft thingsEverywhere upwardsBursting downwardsBursting".split(" "),customization:"resetTabIcons changeCollectedTabIcon changeCreatedTabIcon changeSearchTabIcon resetProfileItems setProfileItem_6 setProfileItem_5 setProfileItem_4 setProfileItem_3 setProfileItem_2 setProfileItem_1 changePanel_red changePanel_green changePanel_cyan changePanel_blue changePanel_purple changePanel_black changePanel_yellow changePanel_white changePanel_orange changePanel_pink defaultPanelColor setProfileBack clearProfileBack setProfileDynamic clearProfileDynamic".split(" "),
myVoice:"myVoiceChanges_bulky myVoiceChanges_elegance myVoiceChanges_shapes myVoiceChanges_faint myVoiceChanges_wild myVoiceChanges_cute myVoiceChanges_high myVoiceChanges_low myVoiceChanges_action myVoiceChanges_inverted myVoiceChanges_strict myVoiceChanges_melodic defaultVoice myVoiceChanges_smooth myVoiceChanges_casual myVoiceChanges_wide".split(" "),light:"cyanLight weakColorsLight strongColorsLight changingLight darkness brightness redLight greenLight blueLight yellowLight purpleLight".split(" ")},
namesInSpriteSheetOrder:["quake","multipleMe","arrivalFromBelow","closeMyEyes","sound","brightLightMe","darkLightMe","iBlendIn","myVoiceChanges_inverted","myVoiceChanges_strict","reverseMe","thingsEverywhere","behindEveryone","clouds","crumbleJump","focusOnMe","weakColorsLight","snow","selection","lightning","rain","myVoiceChanges_action","arrivalFromAbove","arrivalFromRight","myVoiceChanges_faint","arrivalFromAboveThem","myVoiceChanges_melodic",null,"movementTrail","everyoneIsInvisible","meRollMoving",
"everyoneRollMoving","myVoiceChanges_elegance","myVoiceChanges_shapes","myVoiceChanges_wild","myVoiceChanges_cute","changingLight","strongColorsLight","myVoiceChanges_low","arrivalFromLeft","surrounding","thingsAndBeings","light","everyoneAround","meFloating","everyoneFloating","personNextToMe","me","myVoice","onMe","arrivalFromBelowThem","behindMe","behindEveryone","aboveMe","aboveEveryone","thingsMovingUp","thingsMovingDown","thingsMovingRight","thingsMovingLeft","upwardsBursting","downwardsBursting",
"darkness","brightness","redLight","greenLight","blueLight","yellowLight","purpleLight","cyanLight","defaultVoice","myVoiceChanges_high","changeLiquid","nextToMeFloating","nextToMeMovementTrail","nextToMeMultiple","nextToMeRollMoving","nextToMeBlendingIn","nextToMeBrightLight","behindThem","moveBackwards","giveWhatIHold","colorGlitter","stop","waggleWhatIHold","interactions","interaction","happening","transport","changePanel_red","changePanel_green","changePanel_cyan","changePanel_purple","changePanel_black",
"changePanel_yellow","changePanel_white","changePanel_orange","changePanel_pink","defaultPanelColor","changeCollectedTabIcon","changeCreatedTabIcon","changeSearchTabIcon","resetTabIcons","setProfileItem_1","setProfileItem_2","resetProfileItems","changePanel_blue","toRandomArea","showAreasFriendsAre","happenings","customization","setProfileBack","clearProfileBack","myVoiceChanges_smooth","myVoiceChanges_casual","myVoiceChanges_wide","myVoiceChanges_bulky","transportToCenter","insight","myMostCollectedCreations",
"myMostPlacedCreations","numberOfPlacementsIMade","numberOfThingsIMade","numberOfDistinctPlacedItemsInUniverse","numberOfAreasInUniverse","numberOfThingsICollected","numberOfPlacementsInUniverse","receivedPings","setProfileItem_3","setProfileDynamic","clearProfileDynamic","setProfileItem_4","setProfileItem_5","numberOfMinfinityDays","setProfileItem_6","dynamicOrigin"],O1524:"darkness everyoneIsInvisible focusOnMe transport everyoneFloating behindEveryone aboveEveryone everyoneRollMoving interaction_1 interaction_2 interaction_3 interaction_4 interaction_5 interaction_6 interaction_7 interaction_8 interaction_9 interaction_10".split(" "),
manualLabel:{giveWhatIHold:"give what i hold",waggleWhatIHold:"waggle what i hold",numberOfPlacementsIMade:"number of placements i made",numberOfThingsIMade:"number of things i made",numberOfThingsICollected:"number of things i collected",receivedPings:"pings received",numberOfMinfinityDays:"number of minfinity days",myVoiceChanges_bulky:"bulky",myVoiceChanges_elegance:"elegance",myVoiceChanges_shapes:"shapes",myVoiceChanges_faint:"faint",myVoiceChanges_wild:"wild",myVoiceChanges_cute:"cute",myVoiceChanges_high:"high",
myVoiceChanges_low:"low",myVoiceChanges_action:"action",myVoiceChanges_inverted:"inverted",myVoiceChanges_strict:"strict",myVoiceChanges_melodic:"melodic",myVoiceChanges_smooth:"smooth",myVoiceChanges_casual:"casual",myVoiceChanges_wide:"wide"},O3373:20,O1688:0,O3232:"redLight greenLight blueLight yellowLight purpleLight cyanLight".split(" "),O1452:"onMe behindMe behindEveryone behindThem aboveMe aboveEveryone selection thingsMovingUp thingsMovingDown thingsMovingRight thingsMovingLeft arrivalFromAbove arrivalFromBelow arrivalFromLeft arrivalFromRight arrivalFromAboveThem arrivalFromBelowThem thingsEverywhere upwardsBursting downwardsBursting sound_1 sound_2 sound_3 sound_4 sound_5 sound_6 sound_7 sound_8 interaction_1 interaction_2 interaction_3 interaction_4 interaction_5 interaction_6 interaction_7 interaction_8 interaction_9 interaction_10 happening_1 happening_2 happening_3 happening_4 happening_5 happening_6 happening_7 happening_8 happening_9 happening_10 happening_11 happening_12 changeCollectedTabIcon changeCreatedTabIcon changeSearchTabIcon setProfileItem_1 setProfileItem_2 setProfileItem_3 setProfileItem_4 setProfileItem_5 setProfileItem_6 setProfileBack setProfileDynamic".split(" "),
freeNames:"defaultVoice stop transport closeMyEyes defaultPanelColor resetTabIcons resetProfileItems clearProfileBack transportToCenter dynamicOrigin clearProfileDynamic".split(" "),isRunning:!1,O6567:null,O1218:null,O7448:null,O7264:null,targetPlayer:null,O9987:!1,O9409:[],entities:[],O7252:[],O5015:null,data:{},O5642:0,O9207:null,O3564:!1,O6118:!1,O3164:0,O5191:!1,soundFreeNames:["waggleWhatIHold"],O9283:null,receivedPings:[],receivedPingsSeenIndex:-1,O7778:function(){for(var a in this.names);},
O9377:function(a,b){var c=!1,d;for(d in this.names){if(d!=a||b)for(var e=0;e<this.names[d].length;e++){if(this.names[d][e]==a){c=!0;break}}else c=!0;if(c)break}return c},start:function(a,b,c,d,e){0<=this.O1524.indexOf(a)&&b&&!b.isEditorHere||(this.O9283={name:a,O7264:b,O1218:c,O9987:d,O7448:e})},doStart:function(a,b,c,d,e){ig.game.O1257&&(b||=ig.game.O1257,this.isRunning&&this.stop(),b&&1<=b.rank&&!this.isRunning&&0<=this.O9377(a,!0)&&(-1===this.O1452.indexOf(a)||c))&&(ig.game.isFullAccount&&!b.O8088&&
ig.game.O8518.O5167(b.O2970)&&this.O9322(a)?-1===a.indexOf("sound_")&&ig.game.O7836.O8696(b.O2970):(this.O1218=c,this.O7264=b,this.O9987=!!d,this.O7448=e,this.targetPlayer=null,this.data={},this.O7448&&(this.targetPlayer=ml.Misc.O4671(this.O7448)),"selection"==a&&b.O8088&&(this.O7448=this.O9434()),b.O8088&&ig.game.O7836.O5281(a,c,this.O9987,this.O7448),this.initBoost(a),b.O8088&&ig.game.O3957&&ig.game.O3957.O8855("boost"),b.O8088&&ig.game.boostDialog&&ig.game.boostDialog.isOpen&&ig.game.boostDialog.close()))},
O9322:function(a){return 0<="nextToMeFloating nextToMeMovementTrail nextToMeMultiple nextToMeRollMoving nextToMeBlendingIn nextToMeBrightLight arrivalFromAboveThem arrivalFromBelowThem behindThem giveWhatIHold everyoneFloating everyoneIsInvisible behindEveryone aboveEveryone everyoneRollMoving sound_1 sound_2 sound_3 sound_4 interaction_1 interaction_2 interaction_3 interaction_4 interaction_5 interaction_6 interaction_7 interaction_8 interaction_9 interaction_10 happening_1 happening_2 happening_3 happening_4 happening_5 happening_6 happening_7 happening_8 happening_9 happening_10".split(" ").indexOf(a)},
initBoost:function(a){var b={x:0,y:-29};this.O7264.O8088&&-1===this.freeNames.indexOf(a)&&this.O1688--;this.O3564=!0;this.O6567=a;this.isRunning=!0;this.O6118=!1;this.O9207=new ml.Timer;this.O5642=this.O3373;var c=this.O9535(this.O6567);if("stop"==a)this.O2236(),this.stop();else if("myVoice"==c&&this.O9987){if(c="defaultVoice"==a?null:a.substr(15))c=ig.game.strings.replaceAll(c,"Font","");ig.game.areaTitleFont=c;ig.game.areaDialog.doAutoSave=!0;ig.game.areaDialog.open();this.O2236();this.stop()}else 0<=
a.indexOf("TabIcon")?(this.O7264.O8088&&this.O1599(),this.stop()):0<=a.indexOf("ProfileItem")?(this.O7264.O8088&&this.O1893(),this.stop()):"setProfileBack"==a||"clearProfileBack"==a?(this.O7264.O8088&&this.O3328(),this.stop()):"setProfileDynamic"==a||"clearProfileDynamic"==a?(this.O7264.O8088&&this.O1150(),this.stop()):"toRandomArea"==a?(this.O1263(),this.O7264.O8088&&this.O3314(),this.stop()):"insight"==c&&"dynamicOrigin"!=a?(this.O1263(),this.stop()):"transportToCenter"==a?(this.O1263(),this.O7264.O8088&&
ig.game.O8894.fadeInShroud(function(){ig.game.O9710.resetSpawnPoint()}),this.stop()):"showAreasFriendsAre"==a?(this.O1263(),this.O7264.O8088&&ig.game.areaList&&ig.game.areaList.O7051(),this.stop()):0===a.indexOf("changePanel_")||"defaultPanelColor"==a?(this.O7264.O8088&&(this.O9987?(this.O2146(),this.stop()):("defaultPanelColor"==a?(ig.game.settings.set("panelColor",null),this.O2236()):(c=a.substr(12),ig.game.settings.set("panelColor",c),this.O1263()),ig.game.O8894.fadeInShroud(function(){window.location.reload()}))),
this.stop()):0!==a.indexOf("myVoiceChanges_")&&"defaultVoice"!=a||this.O9987?"closeMyEyes"==a?(this.O7264.O9381=!0,this.stop()):"giveWhatIHold"==a?(this.O1218&&this.targetPlayer&&this.targetPlayer.O8088&&(ig.game.attachmentManager.O1336(this.targetPlayer,"h",this.O1218),ig.game.O7836.O9073("h",this.O1218)),this.stop()):this.O6567&&0===this.O6567.indexOf("interaction_")?(this.O5642=15,this.O6790()):0===a.indexOf("sound_")&&(ig.game.sounds.O9961(this.O1218),this.stop()):(c="defaultVoice"==a?null:a.substr(15),
this.O7264.voice=c,"cute"==c?ig.game.sounds.click.play():c?this.O1263():this.O2236(),this.stop());this.O6567&&((c=0<=this.soundFreeNames.indexOf(a))||-1!==["focusOnMe"].indexOf(a)||this.O7252.push({type:"growingStartCircle",radius:5,energy:60,rgb:[255,255,255],O9048:this.O7264,O9159:"lighter"}),c||this.O1263(),"waggleWhatIHold"==a&&ig.game.sounds.actionSoft.play());c=this.O9987?"hue":"overlay";var d=this.O9987?-10:0;switch(this.O6567){case "brightness":this.O7708([255,255,255],"overlay",80);break;
case "darkness":this.O9987?this.O7708([0,0,0],"source-over",100):this.O7708([0,0,75],"multiply",50);break;case "clouds":this.O8820();break;case "weakColorsLight":this.O7708([200,200,200],"saturation",85);break;case "strongColorsLight":this.O7846("saturate(4)");break;case "changingLight":this.O7846("hue-rotate("+50*(this.O9987?-1:1)+"deg)");break;case "everyoneIsInvisible":this.O6560();break;case "focusOnMe":this.O6910();break;case "everyoneFloating":this.O5642-=10;break;case "transport":this.O5642=
3;this.data={didTransport:0};break;case "movementTrail":this.O5642+=5;break;case "multipleMe":this.O5642+=5;break;case "meRollMoving":this.O5642+=5;break;case "crumbleJump":this.O5642+=5;break;case "moveBackwards":this.O5642-=5;break;case "waggleWhatIHold":this.O5642-=16;break;case "redLight":this.O7708([255,40,40],c,80+d);break;case "greenLight":this.O7708([20,240,20],c,70+d);break;case "blueLight":this.O7708([50,50,255],c,70+d);break;case "yellowLight":this.O7708([200,200,0],c,70+d);break;case "purpleLight":this.O7708([220,
0,220],c,60+d);break;case "cyanLight":this.O7708([0,180,180],c,80+d);break;case "onMe":this.O1312();break;case "behindMe":this.O1312(null,!0);break;case "aboveMe":this.O1312(b);break;case "behindThem":this.O1966(null,!0);break;case "behindEveryone":this.O1719(null,!0);break;case "aboveEveryone":this.O1719(b);break;case "thingsEverywhere":this.O7837()}this.O3901()&&(this.O7264.O8088?(this.O9127(),this.O5642=15):this.stop());this.O6567&&(this.O3164=this.O5642-.25,0<=["brightness","darkness"].indexOf(a)&&
(this.O3164=this.O5642-.75));"moveBackwards"==this.O6567&&this.O7264.O8088&&ig.game.O1189.register(ig.game.O1189.types.USED_MOVE_BACKWARDS_BOOST)},O9535:function(a){var b;for(b in this.names)if(0<=this.names[b].indexOf(a)){var c=b;break}return c},O1599:function(){switch(this.O6567){case "changeCollectedTabIcon":ig.game.settings.set("collectedTabItemId",this.O1218);ig.game.panelSet.tabImage.collected.image=null;this.O1263();break;case "changeCreatedTabIcon":ig.game.settings.set("createdTabItemId",
this.O1218);ig.game.panelSet.tabImage.created.image=null;this.O1263();break;case "changeSearchTabIcon":ig.game.settings.set("searchTabItemId",this.O1218);ig.game.panelSet.tabImage.search.image=null;this.O1263();break;case "resetTabIcons":ig.game.panelSet.tabImage.collected.image=null,ig.game.panelSet.tabImage.created.image=null,ig.game.panelSet.tabImage.search.image=null,ig.game.settings.O4325(),this.O2236()}},O1893:function(){if("resetProfileItems"==this.O6567)ig.game.O9817.O1013(0,null).done(function(b){ig.game.O9817.O1013(1,
null).done(function(c){ig.game.O9817.O1013(2,null).done(function(d){ig.game.O9817.O1013(3,null).done(function(e){ig.game.O9817.O1013(4,null).done(function(f){ig.game.O9817.O1013(5,null).done(function(g){ig.game.playerDialog&&ig.game.playerDialog.O7845();ig.game.O7606.O2236()})})})})})});else{var a=this.O6567.split("_");a=parseInt(a[1])-1;ig.game.O9817.O1013(a,this.O1218).done(function(b){ig.game.playerDialog&&ig.game.playerDialog.O7845()});this.O1263()}},O3328:function(){switch(this.O6567){case "setProfileBack":ig.game.O9817.O6436(this.O1218).done(function(a){ig.game.playerDialog&&
ig.game.playerDialog.O7845()});this.O1263();break;case "clearProfileBack":ig.game.O9817.O6436(null).done(function(a){ig.game.playerDialog&&ig.game.playerDialog.O7845()}),this.O2236()}},O1150:function(){switch(this.O6567){case "setProfileDynamic":ig.game.O9817.O6577(this.O1218).done(function(a){ig.game.playerDialog&&ig.game.playerDialog.O7845()});this.O1263();break;case "clearProfileDynamic":ig.game.O9817.O6577(null).done(function(a){ig.game.playerDialog&&ig.game.playerDialog.O7845()}),this.O2236()}},
O2146:function(){var a=null;"defaultPanelColor"==this.O6567?this.O2236():(a=ig.game.strings.replaceAll(this.O6567,"changePanel_",""),this.O1263());ig.game.O9817.O6329(a?ig.game.colors.enum[a]:null).done(function(b){ig.game.playerDialog&&ig.game.playerDialog.O7845()})},O9127:function(){var a=this.O7264?ig.game.O4507(this.O7264.pos):null;this.O6889(this.O1218,this.O7264,null,null,a)},O2097:function(a,b){this.isRunning&&this.O9322(this.O6567)&&(this.O9409.push(a),this.targetPlayer&&this.targetPlayer.O2970==
a?this.stop():this.O8607(a),ig.game.O1257.O2970==b&&!ig.game.isEditor&&2<=this.O9409.length&&(this.O5191=!0))},O8607:function(a){for(var b=this.entities.length-1;0<=b;b--){var c=this.entities[b];c&&!c._killed&&c.targetPlayer&&c.targetPlayerId==a&&(c.energy=0)}},O9321:function(a){return 0<=this.O9409.indexOf(a.O2970)},stop:function(){this.O5642=this.O3373;this.O9207=this.O6567=null;this.isRunning=this.O3564=!1;this.data={};this.O8655();this.O7252=[];this.O5015&&this.O5015.tidyUp&&this.O5015.tidyUp();
this.O1218=this.targetPlayer=this.O7448=this.O5015=null;this.O9409=[];this.O7264&&(this.O7264.O5801=[]);this.O7264=null;this.O4786();this.O1108()},O1108:function(){var a=ig.game.O5119.player;if(a)for(var b=0;b<a.length;b++){var c=a[b];c&&(c.boostData=null)}},update:function(){this.O9283&&(this.doStart(this.O9283.name,this.O9283.O7264,this.O9283.O1218,this.O9283.O9987,this.O9283.O7448),this.O9283=null);if(this.isRunning&&this.O7264&&ig.game.O1257){this.O2269();switch(this.O6567){case "quake":this.update_quake();
break;case "clouds":this.update_clouds();break;case "rain":this.update_rain();break;case "snow":this.update_snow();break;case "colorGlitter":this.O1121();break;case "lightning":this.update_lightning();break;case "thingsMovingRight":this.O2100(1,0);break;case "thingsMovingLeft":this.O2100(-1,0);break;case "thingsMovingDown":this.O2100(0,1);break;case "thingsMovingUp":this.O2100(0,-1);break;case "upwardsBursting":this.O2100(0,-1);break;case "downwardsBursting":this.O2100(0,1);break;case "arrivalFromLeft":this.O2100(1,
0);break;case "arrivalFromRight":this.O2100(-1,0);break;case "arrivalFromAbove":case "arrivalFromAboveThem":this.O2100(0,1);break;case "arrivalFromBelow":case "arrivalFromBelowThem":this.O2100(0,-1);break;case "selection":this.O2100(0,1)}this.O5015&&this.O5015.update();var a=this.O9207?this.O9207.delta():0;a>=this.O5642?this.stop():a>=this.O3164&&!this.O6118&&(this.O6118=!0,-1===this.soundFreeNames.indexOf(this.O6567)&&this.O2236());this.O3564=!1}},O4829:function(){if(ig.input.pressed("middleclick")&&
this.O1632("transport","me")){var a=ig.game.O4774.O2478(),b=ig.game.O1257;ml.Misc.O3863(b.pos,a)<=ig.game.O3985?(b.O8418=a.x>b.pos.x,a=b.pos,b.pos=ig.game.O4774.O2478(),ig.game.sounds.portallingWhoosh.play(),ig.game.decorator.O8009(a.x,a.y,0,0,3),ig.game.decorator.O8009(b.pos.x,b.pos.y,0,0,6),ig.game.O7836.O1716(a,b.pos,{x:0,y:0},b.O8418)):ig.game.sounds.actionSoft.play()}},O2269:function(){for(var a=this.entities.length-1;0<=a;a--){var b=this.entities[a];b&&(0>=b.energy?(b._killed=!0,b.tidyUp&&b.tidyUp(),
delete this.entities[a]):(b.update(),this.O9467(b)))}},O2793:function(){this.isRunning&&this.O3901()&&this.O2298()},O5159:function(){this.isRunning&&!this.O3901()&&this.O8728()},draw:function(){this.isRunning&&(this.O3901()?this.O2298():this.O3265(!1),this.O5015&&this.O5015.O2848())},O3103:function(){this.isRunning&&(this.O3901()?this.O2298():this.O3265(!0),this.O9147())},O3265:function(a){for(var b=0;b<this.entities.length;b++){var c=this.entities[b];c&&!c._killed&&!c.isBehindPlayer&&c.isFrontLayer==
a&&c.draw()}},O2298:function(){for(var a=0;a<this.entities.length;a++){var b=this.entities[a];b&&!b._killed&&b.draw()}},O8728:function(){for(var a=0;a<this.entities.length;a++){var b=this.entities[a];b&&b.isBehindPlayer&&b.draw()}},O9147:function(){for(var a=this.O7252.length-1;0<=a;a--){var b=this.O7252[a];if(b&&0<b.energy)switch(b.type){case "growingStartCircle":this.O9595(b);break;case "screenCoveringRectangle":this.O3352(b)}else delete this.O7252[a]}},O9595:function(a){a.O9048?(a.radius+=.2*ig.game.targetFps*
ig.system.tick,a.pos=a.O9048.O1229(),a.pos={x:a.pos.x-ig.game._rscreen.x+6,y:a.pos.y-ig.game._rscreen.y},this.O5519(a.pos,a.radius,this.O8892(a),a.O9159),a.energy-=1*ig.game.targetFps*ig.system.tick):a.energy=0},O3352:function(a){a&&0<a.energy&&(this.O9207.delta()>=this.O5642-1&&(a.O5115=-Math.abs(a.O5115)),a.energy=(a.energy+a.O5115).limit(a.minEnergy,a.maxEnergy),this.O1264(a.pos,a.size,this.O8892(a),a.O9159))},O8892:function(a){var b=[0,0,0,0];a&&a.rgb&&(b=ig.game.O4507(a.rgb),b[3]=0<a.energy&&
100>=a.energy?a.energy/100:0);return b},O5519:function(a,b,c,d){var e=ig.system.context;d&&ml.Misc.O5847(d);e.beginPath();e.arc(a.x*ig.system.scale,a.y*ig.system.scale,b*ig.system.scale,0,2*Math.PI,!1);e.lineWidth=2*ig.system.scale;e.strokeStyle="rgba("+c.join(",")+")";e.stroke();d&&ml.Misc.O3715()},O1264:function(a,b,c,d){var e=ig.system.context;d&&ml.Misc.O5847(d);e.fillStyle="rgba("+c.join(",")+")";e.fillRect(a.x*ig.system.scale,a.y*ig.system.scale,b.x*ig.system.scale,b.y*ig.system.scale);d&&ml.Misc.O3715()},
update_quake:function(){if(ig.game.chance(10)||this.O3564)ig.game.camera.shake(),this.O827("quake",10);if(ig.game.chance(15)||this.O3564){var a=ig.game.O4507(ig.game.O1257.pos);a.x+=ig.game.O4293(-ig.system.widthHalf,ig.system.widthHalf);a.y+=ig.game.O4293(-ig.system.O2175,ig.system.O2175);var b=ig.game.O6112.O2052(a);if(b){var c=ig.game.O4293(2,6);this.O8909(b,a,null,null,c)}}},update_clouds:function(){if(ig.game.chance(5)||this.O3564){var a=this.O9929(),b={x:ig.game.O4293(5,20),y:0};ig.game.chance(50)&&
(b.x*=-1);b.x+=ig.game.O9149;ml.Misc.O9216(b);this.spawnEntity(a,b,{O5856:ig.game.O8159.mist,O7942:.25,O4405:80,O2329:4,fadingInc:1},"mist");this.O827("wind",25)}},update_rain:function(){if(ig.game.chance(40)||this.O3564){var a=this.O9929();a.y-=3*ig.game.O9925;var b={x:ig.game.O9149,y:this.distort(130,5)};this.spawnEntity(a,b,{O5856:ig.game.O8159.whiteLineVertical,opacity:60},"rainCloud");this.O827("raindrop",15)}},update_snow:function(){if(ig.game.chance(50)||this.O3564){var a=this.O9929();a.y-=
3*ig.game.O9925;var b={x:this.distort(ig.game.O9149,10),y:this.distort(20,5)};this.spawnEntity(a,b,null,"snowCloud")}},O1121:function(){if(ig.game.chance(90)||this.O3564){var a=this.O9929(),b={x:this.distort(ig.game.O9149,15),y:this.distort(10,15)},c={O2329:.75,O7942:20,fadingInc:7.5,O4405:100,O6475:!1},d=ig.game.O4293(1,6);c.O5856=ig.game.O8159["glitter"+d];c.O6475=ig.game.chance(50);c.decorative=!c.O6475;this.spawnEntity(a,b,c,"boostColorGlitter")}},update_lightning:function(){if(ig.game.chance(1)||
this.O3564){var a=this.O9929();a.y-=3*ig.game.O9925;this.spawnEntity(a,{x:0,y:0},{O5856:ig.game.O8159.lightning,O2329:.5,fadingInc:5,O8546:!0},"lightning");this.O827("lightning",100)}},distort:function(a,b){return a+ig.game.O4293(-b,b)},O9929:function(){var a={},b=ig.system.widthHalf+50;a.x=ig.game.O1257.pos.x+ig.game.O4293(-b,b);a.y=ig.game.O1257.pos.y+ig.game.O4293(-b,b);a.x+=(ig.game.camera.screenTarget.x-ig.game.O1257.pos.x)/4;a.y+=(ig.game.camera.screenTarget.y-ig.game.O1257.pos.y)/4;return a},
spawnEntity:function(a,b,c,d,e){e||=EntitySpot;c||={};b||={x:0,y:0};c.vel={x:b.x,y:b.y};c.attribute=d;ig.game.O9759(e,a.x,a.y,c)},O1312:function(a,b){this.O6889(this.O1218,this.O7264,a,b);if(this.O9987)for(var c=0,d=2*Math.PI/8,e=0;8>e;e++){var f=a?ig.game.O4507(a):{x:0,y:0};f.x+=Math.round(30+30*Math.cos(c)-30);f.y+=Math.round(30+30*Math.sin(c)-30);f.x=this.distort(f.x,2);f.y=this.distort(f.y,2);c+=d;this.O6889(this.O1218,this.O7264,f,b)}},O1966:function(a,b){this.O6889(this.O1218,this.targetPlayer,
a,b)},O1719:function(a,b){var c=ig.game.O5119.player;if(c)for(var d=0;d<c.length;d++){var e=c[d];e&&!e._killed&&(this.O7264.O2970!=e.O2970||this.O9987)&&this.O6889(this.O1218,e,a,b)}},O7837:function(){for(var a=1;50>=a;a++){var b=ig.game.chance(60),c=b?3:.25,d=this.O9929();c={x:ig.game.O4293(-c,c),y:ig.game.O4293(-c,c)};this.O6889(this.O1218,null,null,null,d,c,b)}},O2100:function(a,b){var c=0<=this.O6567.indexOf("Bursting"),d=0<=this.O6567.indexOf("arrival")||"selection"==this.O6567;if(!d&&ig.game.chance(3)||
this.O3564){var e=100,f=ig.game.O4293(60,80);this.O9987&&!d&&(f*=3);var g={x:f*a,y:f*b},h=this.O9929(),k=null,l=this.O9987?ig.game.O4293(3,9):1,m=null,n=["selection","arrivalFromAboveThem","arrivalFromBelowThem"];if(0!=a)if(d)for(f=1;f<=l;f++)k=0<=n.indexOf(this.O6567)?ml.Misc.O4671(this.O7448):this.O7264,h.x=k.pos.x+-1*(ig.system.widthHalf+e)*a,h.y=k.pos.y-ig.game.O4975,1!=f&&(m={x:ig.game.O4293(-40,40),y:ig.game.O4293(-40,40)},h.x+=m.x,h.y+=m.y,g.x+=ig.game.O4293(-15,15)),this.O6889(this.O1218,
null,null,null,h,g,!0,k,m);else h.x=ig.game.O1257.pos.x+-1*(ig.system.widthHalf+e)*a,this.O6889(this.O1218,null,null,null,h,g,!0,k,m);if(0!=b)if(d){if(k=0<=n.indexOf(this.O6567)?ml.Misc.O4671(this.O7448):this.O7264)for(f=1;f<=l;f++)h.x=k.pos.x-8,h.y=k.pos.y+-1*(ig.system.O2175+e)*b,1!=f&&(m={x:ig.game.O4293(-40,40),y:ig.game.O4293(-40,40)},h.x+=m.x,h.y+=m.y,g.y+=ig.game.O4293(-15,15)),this.O6889(this.O1218,null,null,null,h,g,!0,k,m)}else h.y=ig.game.O1257.pos.y+-1*(ig.system.O2175+e)*b,this.O6889(this.O1218,
null,null,null,h,g,!0,k)}if(c)ig.game.chance(4*(this.O9987?2:1))&&(c=this.entities[ig.game.O4293(0,this.entities.length-1)])&&0<c.energy&&("upwardsBursting"==this.O6567&&c.pos.y<=this.O7264.pos.y+ig.game.O4975||"downwardsBursting"==this.O6567&&c.pos.y>=this.O7264.pos.y-ig.game.O4975)&&((e=c.givenName&&(0<=c.givenName.indexOf("water")||0<=c.givenName.indexOf("liquid")))?ig.game.sounds.splash.play():ig.game.sounds["burst"+ig.game.O4293(1,2)].play(),ig.game.decorator.burst(c,null,!0,e),c.energy=0);else if(d)for(f=
0;f<this.entities.length;f++)(c=this.entities[f])&&!c.arrived&&c.targetPlayer&&(e=0>c.vel.y?50:65,d=ig.game.O4507(this.O7264.pos),c.targetOffset&&(d.x+=c.targetOffset.x,d.y+=c.targetOffset.y),0<c.vel.x&&c.pos.x>=d.x-e||0>c.vel.x&&c.pos.x<=d.x+e||0<c.vel.y&&c.pos.y>=d.y-e||0>c.vel.y&&c.pos.y<=d.y+e)&&(c.vel.x*=.9,c.vel.y*=.9,c.arrived=.01>=Math.abs(c.vel.x)&&.01>=Math.abs(c.vel.y),c.arrived&&(c.vel.x=ig.game.O4293(-1,1),c.vel.y=ig.game.O4293(-1,1),0==c.vel.x&&0==c.vel.y&&(c.vel.y=-1),c.O7444&&c.O7444("action")))},
O9434:function(){var a=null,b=ig.game.O5119.player;b&&(a=b[ig.game.O4293(0,b.length-1)].O2970);return a},O6889:function(a,b,c,d,e,f,g,h,k){if(a){var l=this,m=this.O6838(this.O6567),n=ig.game.O4261.getItemBasic(a,"boost_add_entity");n.imagesBeingGenerated.done(function(){if(0<=m.indexOf(n.base)&&!ig.game.attachmentManager.O3248(n)){var p={thingTypeId:n.id,flip:0,attributes:n.attributes,animSheet:ig.game.entityManager.getAnimationForEntity(n,0,0),givenName:n.name,O6717:!0};f&&(p.vel=f);ig.game.entityManager.O5746(n.O4927(),
n,p,!0);var q={x:0,y:0};e&&(q=e);var t="Entity"+ig.game.strings.toUpperCaseFirst(n.base.toLowerCase());ig.global[t]||(t="EntityDefault");var r=l.entities.length;l.entities[r]=new ig.global[t](q.x,q.y,p);l.entities[r].base=n.base;l.entities[r].isBehindPlayer=!!d;l.entities[r].targetPlayer=h;l.entities[r].targetOffset=k;b&&("HAPPENING"==n.base?n.attributes&&n.attributes.follows&&(l.entities[r].O9048=b):(l.entities[r].followParentEntity=!0,l.entities[r].parentEntityToFollow=b,c||={x:0,y:0},l.entities[r].offsetToParent=
c));"DYNATHING"==n.base&&(l.entities[r].O9744=!0,l.entities[r].isStack=!1);l.entities[r].isFrontLayer=!!g;l.entities[r].energy=1;"EntityDefault"==t&&(l.entities[r].update=function(){});l.entities[r].update();l.O9467(l.entities[r]);l.O8970(n,l.entities[r]);"DYNATHING"==n.base&&l.entities[r].O7444("move")}})}},O8970:function(a,b){"DYNATHING"==a.base&&a.attributes&&(a.attributes.attachable||a.attributes.follows||a.attributes.closelyFollows)&&("arrivalFromLeft"==this.O6567||"thingsMovingRight"==this.O6567||
("arrivalFromRight"==this.O6567||"thingsMovingLeft"==this.O6567?0:ig.game.chance(50)))&&(b.O2532=-1,b.O4529=!0,b.reset(),b.update())},O9467:function(a){if(ig.game.O1257)if(a.followParentEntity)if(a.parentEntityToFollow&&!a.parentEntityToFollow._killed&&a.parentEntityToFollow.pos){a.O8393&&a.parentEntityToFollow.O8393&&(a.O8393.flip=ig.game.O4507(a.parentEntityToFollow.O8393.flip));a.pos=ig.game.O4507(a.parentEntityToFollow.pos);a.animSheet&&(a.pos.x-=a.animSheet.width/2,a.pos.y-=a.animSheet.height/
2);if(a.O8393&&a.O8393.sheet){var b=a.O8393.sheet.height;a.pos.x+=a.O8393.sheet.width/8;a.pos.y+=b/8}a.offsetToParent&&(a.pos.x+=a.offsetToParent.x,a.pos.y+=a.offsetToParent.y);"DECOBIG"==a.base?(a.pos.x+=a.size.x/4,a.pos.y+=a.size.y/4):"DECOVBIG"==a.base&&(a.pos.x+=a.size.x/6,a.pos.y+=a.size.y/6)}else a.energy=0;else a._killed||(b=ig.game.O1257.pos,0>a.vel.x&&a.pos.x<b.x-ig.system.widthHalf-100||0<a.vel.x&&a.pos.x>b.x+ig.system.widthHalf+100||0>a.vel.y&&a.pos.y<b.y-ig.system.O2175-100||0<a.vel.y&&
a.pos.y>b.y+ig.system.O2175+100?(a.energy-=2,a.isFading=!0,0>a.energy&&(a.energy=0)):a.isFading||(a.energy+=2,100<a.energy&&(a.energy=100)),a.pos.y+=a.vel.y*ig.system.tick,a.pos.x+=a.vel.x*ig.system.tick,ig.game.chance(.05)&&ig.game.sounds.playIncludedSound(a),0<a.energy&&a.O8393&&(a.O8393.alpha=a.energy/100))},O7708:function(a,b,c){c||=60;b||="lighter";this.O7252.push({type:"screenCoveringRectangle",pos:{x:0,y:0},size:{x:ig.system.width,y:ig.system.height},energy:.1,O5115:1,minEnergy:0,maxEnergy:c,
rgb:a,O9159:b})},O6910:function(){this.O5642=6;jQuery("body").css("transform","scale(2,2)")},O7846:function(a){jQuery("body").css("filter",a).css("webkitFilter",a).css("mozFilter",a).css("oFilter",a).css("msFilter",a)},O4786:function(){this.O7846("none");jQuery("body").css("zoom","none");jQuery("body").css("transform","none")},O8820:function(){this.O7252.push({type:"screenCoveringRectangle",pos:{x:0,y:0},size:{x:ig.system.width,y:ig.system.height},energy:.1,O5115:1,minEnergy:0,maxEnergy:20,rgb:[235,
235,255],O9159:"lighter"})},O6790:function(){var a=this.O1218,b=ig.game.O4261.getItemBasic(a,"boost_init_inter"),c=this;jQuery.when(b.imagesBeingGeneratedPromise,b.basicDataLoading.promise()).then(function(){var d={thingTypeId:a,animSheet:ig.game.entityManager.getAnimationForEntity(b,0,0),rotation:0,attributes:b.attributes,O5682:null,O5080:!0,O6717:!0};void 0!==b.name&&(d.givenName=b.name);void 0!==b.checksNears&&(d.checksNears=b.checksNears);void 0!==b.textSize&&(d.textSize=b.textSize);void 0!==
b.reactsTo&&(d.reactsTo=b.reactsTo);void 0!==b.boundingBox&&(d.boundingBox=b.boundingBox);c.O5015=new ig.global.EntityInteract(0,0,d)})},O6560:function(){this.O7252.push({type:"screenCoveringRectangle",pos:{x:0,y:0},size:{x:ig.system.width,y:ig.system.height},energy:.1,O5115:1,minEnergy:0,maxEnergy:30,rgb:[0,0,0]})},O827:function(a,b){ig.game.chance(b)&&(b=ig.game.O4293(1,ig.game.sounds.environmentSounds[a]),ig.ua.iPad&&(b=1),ig.game.sounds["environment_"+a+"_"+b].play())},O4997:function(a){a.offsetY+=
a.O1731;0>a.O1731&&a.offsetY<-a.O9215?(a.O1731=Math.abs(a.O1731),a.offsetY=-a.O9215):0<a.O1731&&a.offsetY>a.O9215&&(a.O1731=-Math.abs(a.O1731),a.offsetY=a.O9215)},O8655:function(){for(var a=this.entities.length-1;0<=a;a--)this.entities[a]&&this.entities[a].tidyUp&&this.entities[a].tidyUp(),delete this.entities[a];this.entities=[]},O8909:function(a,b,c,d,e){c||=1;a=a.thing.img.data;e=e?e:3;for(var f=e*ig.system.scale,g=1;g<=c;g++){var h=ig.game.O4293(0,2),k=ig.game.chance(75)?0:ig.game.O4293(0,2),
l=document.createElement("canvas");l.width=f;l.height=f;l.getContext("2d").drawImage(a,h*f,k*f,f,f,0,0,f,f);h=new ml.Image(null,null,null,l);l=new ml.AnimationSheet(null,e,e,h);h=ig.game.O4507(b);h.y+=10;k={x:0,y:0};d&&(k={x:ig.game.O4293(-70,70),y:ig.game.O4293(-200,-50)});ml.Misc.O9216(k);l={animSheet:l,O2027:1,O2329:3,O6475:!1};l.decorative=ig.game.chance(75);l.opacity=100;ig.game.O7606.spawnEntity(h,k,l)}d&&ig.game.sounds.collapse.play()},O6001:function(a){if(this.isRunning&&"crumbleJump"==this.O6567&&
this.O7264.O2970==a.O2970&&a.O5479&&a.O5479.thing&&a.O5479.thing.img){var b=ig.game.O4293(3,6);this.O8909(a.O5479,ig.game.O4507(a.pos),b,!0)}},O6838:function(a){a=0===a.indexOf("sound_")?["SOUND"]:0===a.indexOf("interaction_")?["INTERACT"]:0<=a.indexOf("TabIcon")&&"resetTabIcons"!=a?["DECO"]:"setProfileBack"==a?["DECO","DECOBIG","DECOVBIG"]:"setProfileDynamic"==a?["DYNATHING"]:0===a.indexOf("happening_")?["HAPPENING"]:0===a.indexOf("setProfileItem_")?this.getAllBaseTypesArray():"DECO DECOANIM DECOBIG DECOVBIG LIVELY DYNATHING SOLID STACKHOLD CONSUMAB LIVING LIVANIM STACKWEARB MNTGROUND MNTAIR".split(" ");
return ig.game.O4507(a)},getAllBaseTypesArray:function(){var a=[],b;for(b in window.Item.prototype.BASE_TYPES)window.Item.prototype.BASE_TYPES[b].publicKey&&a.push(b);return a},O8896:function(a){return this.isRunning&&("everyoneFloating"==this.O6567||"meFloating"==this.O6567&&a.O8088)},O9268:function(){var a=0;this.isRunning&&(0===this.O6567.indexOf("thingsMoving")?a=this.O9987?5:50:0===this.O6567.indexOf("arrivalFrom")||0<=this.O6567.indexOf("wardsBurst")?a=100:"thingsEverywhere"==this.O6567?a=100:
0<=["onMe","behindMe","aboveMe"].indexOf(this.O6567)&&this.O9987&&(a=50));return ig.game.O4293(0,a)},O4266:function(a,b){var c=null;0==b.indexOf("thingsMoving")||0<=b.indexOf("wardsBursting")?c="faster":0==b.indexOf("darkness")?c="darker":0==b.indexOf("arrivalFrom")?c="many":"multipleMe"==b||"nextToMeMultiple"==b?c="more":0<=b.indexOf("changePanel")?c="change profile":"defaultPanelColor"==b?c="default profile":0<=["onMe","behindMe","aboveMe"].indexOf(b)?c="more":"changingLight"==b?c="even":"movementTrail"==
b||"nextToMeMovementTrail"==b?c="bright":0<=this.O3232.indexOf(b)?c="different":"everyoneAround"==a&&"selection"!=b?c="me too":"waggleWhatIHold"==b?c="rotate":"myMostCollectedCreations"==b||"myMostPlacedCreations"==b?c="Second Most":"myVoice"==a&&this.names.myVoice.includes(b)&&(c="Area Title");return c},O4767:function(a){var b=0;this.isRunning&&"waggleWhatIHold"==this.O6567&&this.O7264&&a.O2970==this.O7264.O2970&&(void 0===this.data.waggle&&(this.data.waggle=this.O9987?{angle:0,vel:-.08}:{angle:0,
vel:-.03,max:.4}),b=this.data.waggle,b.angle+=b.vel,void 0!=this.data.waggle.max&&(0>b.vel&&b.angle<-b.max?(b.angle=-b.max,b.vel=Math.abs(b.vel)):0<b.vel&&b.angle>b.max&&(b.angle=b.max,b.vel=-Math.abs(b.vel))),b=b.angle,a.O8418&&(b*=-1));return b},O1263:function(){ig.game.sounds.O2903(ig.game.sounds.boost,.3)},O2236:function(){ig.game.sounds.O2903(ig.game.sounds.boostEnd,.3)},O1632:function(a,b,c){var d=!1,e=ig.game.isEditorHere&&"INDIVIDUALS"==ig.game.O5549,f=0<=this.O1524.indexOf(a),g=(0<=["light",
"everyoneAround"].indexOf(b)||0<=a.indexOf("Bursting")||"thingsEverywhere"==a)&&-1===a.indexOf("sound_"),h=ig.game.O5119&&ig.game.O5119.player&&8<=ig.game.O5119.player.length,k=ig.game.O1257&&ig.game.O4873.O6714(ig.game.O1257.pos)&&ig.game.O4296;ig.game.O7823?"myVoice"==b&&c?ig.game.isEditorHere?ig.game.O4296?ig.game.O5058.O8943("nonPublicAreasOnly"):d=!0:ig.game.O5058.O8943("editorOnly"):"receivedPings"==a&&0==this.receivedPings.length?ig.game.O1257.say("i received no pings"):ig.game.O4240?d=!0:
"transport"==a&&"INDIVIDUALS"!=ig.game.O5549?d=!0:"transportToCenter"==a?(d=ig.game.isEditorHere||ig.game.theyCanMapTeleport)||ig.game.O1257.say("i need to go to an area where i can edit"):!ig.ua.steam||"everyoneRollMoving"!=a&&"nextToMeRollMoving"!=a?("meRollMoving"==a||"reverseMe"==a)&&ig.game.O1257.attachments.b&&ig.game.O1257.attachments.b.animSheet&&ml.Misc.O7017(ig.game.O1257.attachments.b.animSheet)?ig.game.O1257.say("i can't use this boost with this body"):e?d=!0:0<=a.indexOf("setProfileItem")?
d=!0:"setProfileBack"==a||"clearProfileBack"==a||"setProfileDynamic"==a||"clearProfileDynamic"==a?d=!0:c&&(0<=a.indexOf("changePanel_")||"defaultPanelColor"==a)?d=!0:0<=a.indexOf("Panel")||0<=a.indexOf("TabIcon")?ig.game.isEditorHere?d=!0:ig.game.O1257.say("i need to go to an area where i can edit"):"transport"==a&&ig.game.isEditorHere&&(5<=ig.game.O1257.rank||!ig.game.O4296)?d=!0:f?ig.game.O1257.say("i need to go to an area where i'm in the editor's list"):g&&k?ig.game.O1257.say(ig.game.O4873.O6566()):
g&&h?ig.game.O1257.say("there's too many people around and i'm not in the editor's list here"):(d=!0,console.log("can it")):ig.game.O1257.say("i currently can't use this boost"):ig.game.O1257.say("i can't boost here now");return d},O3901:function(){return this.O6567&&0===this.O6567.indexOf("happening_")},O9761:function(a){return this.isRunning&&"everyoneIsInvisible"==this.O6567&&this.O7264&&(this.O9987||!this.O7264.O2970==a.O2970)},O4673:function(){return this.isRunning&&"transport"==this.O6567&&
this.O7264&&ig.game.O1257&&this.O7264.O2970==ig.game.O1257.O2970},O3117:function(){if(this.O4673()&&!this.data.didTransport){var a=ig.game.O4774.O2478();ml.Misc.O3863(ig.game.O1257.pos,a)<=ig.game.O3985?(ig.game.O1257.O8418=a.x>ig.game.O1257.pos.x,ig.game.O1257.pos=ig.game.O4774.O2478(),ig.game.sounds.portallingWhoosh.play(),this.data.didTransport=!0):ig.game.sounds.actionSoft.play()}else return!1},O3314:function(){ig.game.O9817.O5421().done(function(a){if(a&&a.names&&2<=a.names.length)for(var b=
!1;!b;){var c=ig.game.O4293(0,a.names.length-1);c=a.names[c];c!=ig.game.O9720&&(b=!0,ig.game.portaller.O6417(c))}})},O5026:function(a,b){switch(a){case "setProfileBack":case "setProfileDynamic":this.O4554(b)}},O4554:function(a){ig.game.O9817.O4538(a).done(function(b){if(b&&b.imageData&&b.imageData.pixels){for(var c=!1,d=b.imageData.pixels[0],e=0;e<d.length&&!c;e++)for(var f=0;f<d[0].length&&!c;f++){var g=b.imageData.colors[d[e][f]];0<g.alpha&&(c=g.r+g.g+g.b,c=225<=(c?c/3:0))}c||ig.game.alertDialog.O3813("Only colors brighter than the profile background will show, so you may want to use lighter colors.")}})},
O2231:function(a,b){switch(a){case "myMostCollectedCreations":case "myMostPlacedCreations":if(ig.game.O4437){var c=this.O9987?1:0,d=a;this.O9987&&(d=ig.game.strings.replaceAll(d,"Most","SecondMost"));d=ig.game.strings.O2801(d);ig.game.O4437.open(JSON.parse(b),"myMostCollectedCreations"==a?"timesCd":"timesPd",d,c)}break;case "numberOfPlacementsIMade":var e="i made "+ig.game.strings.O7317(b)+" placements";break;case "numberOfThingsIMade":e="i made "+ig.game.strings.O7317(b)+" things";break;case "numberOfDistinctPlacedItemsInUniverse":e=
"there's "+ig.game.strings.O7317(b)+" items";break;case "numberOfAreasInUniverse":e="there's "+ig.game.strings.O7317(b)+" areas";break;case "numberOfThingsICollected":e="i collected "+ig.game.strings.O7317(b)+" things";break;case "numberOfPlacementsInUniverse":b=parseInt(b);1E6<b?(b=Math.floor(b/1E6),e="there's "+b+" million placements"):e="there's "+ig.game.strings.O7317(b)+" placements";break;case "receivedPings":ig.game.alertDialog.open({html:this.O8163(),O5358:!0});break;case "numberOfMinfinityDays":e=
"i have "+b,setTimeout(function(){ig.game.O1257&&ig.game.O5058.O7948("minfinity days")},1500)}e&&ig.game.O1257&&ig.game.O5058.O7948(e);this.O9987=!1},O5985:function(a,b,c){this.receivedPings.push({senderId:a,O9927:b,areaHtml:c,time:new Date})},O8163:function(){var a="";if(1<=this.receivedPings.length){for(var b=this.receivedPings.length-1;0<=b;b--){var c=this.receivedPings[b],d="ig.game.playerDialog.openForPlayerId('"+c.senderId+"')";a+='<p style="'+(this.receivedPingsSeenIndex<b?"color: green":"color: #666")+
'">';a+='<span class="pseudolink" onclick="'+d+'">'+ig.game.strings.O9955(c.O9927)+"</span> ";a+="pinged you from "+c.areaHtml;a+=" "+ig.game.strings.O6141(c.time,void 0," ");a+=".</p>"}this.receivedPingsSeenIndex=this.receivedPings.length-1}else a='<p style="opacity: 0.5; margin-top: 30px">No pings received</p>';return a}})});ig.baked=!0;
ig.module("game.core.socialintegration").defines(function(){window.SocialIntegration=ig.Class.extend({getFacebookPostUrl:function(a){var b=ig.game.areaName?ig.game.strings.O3459(ig.game.areaName):"Thingistan",c="I was here in Thingistan,",d="a world we all create.";ig.game.O3632&&(c="",d=ig.game.strings.O3459(ig.game.O3632));var e=ig.game.O1460?ig.game.O3186.O2980(ig.game.O1460):"http://thingistan.com";a=a?ig.game.O3186.O1398(a):ig.game.O3186.O5138(ig.game.O1460);var f="https://www.facebook.com/dialog/feed?app_id="+
(ig.game.O8882+"&");f+="redirect_uri="+encodeURIComponent("http://thingistan.com")+"&";f+="caption="+encodeURIComponent(c)+"&";f+="link="+encodeURIComponent(e)+"&";f=f+("picture="+a+"&name=")+(encodeURIComponent(b)+"&");return f+("description="+encodeURIComponent(d)+"&")}})});ig.baked=!0;
ig.module("game.core.iapmanager").defines(function(){window.IapManager=ig.Class.extend({paypalJsLoaded:!1,paypalJsUrl:"https://www.paypalobjects.com/js/external/dg.js",O9570:5,processing:!1,init:function(){},O4854:function(){if(!this.paypalJsLoaded){var a=document.createElement("script");a.setAttribute("type","text/javascript");a.setAttribute("src",this.paypalJsUrl);this.paypalJsLoaded=!0}},O1337:function(a){ig.game.O9817.O8592(a).done(function(b){b.redirectTo&&(ig.game.O9710.O6335(),window.location.href=
b.redirectTo)}).fail(function(b){})},O6522:function(a){if(!this.processing){this.processing=!0;var b=document.getElementById("getMinfinityButton");b&&b||ig.game.errorManager.O3802("Something went wrong during payment process, please contact we@thingistan.com");b.innerHTML="Please Wait";b=this.O9570;if(a)console.log("starting minfinity subscription purchase call. Amount: "+b),ig.game.O9817.O9870(b).done(function(d){d.redirectTo?(console.log("redirecting to payment provider"),localStorage.isAboutToPayForSubscription=
!0,ig.game.O9710.O6335(),window.location.href=d.redirectTo):ig.game.errorManager.O3802("Something went wrong during payment process, please contact we@thingistan.com")}).fail(function(){ig.game.errorManager.O3802("Something went wrong during payment process, please contact we@thingistan.com")});else{console.log("starting minfinity one time purchase call. Amount: "+b);var c=this;ig.game.O9817.O6004(b).done(function(d){localStorage.isAboutToPayForSubscription=!0;d.redirectTo?(console.log("redirecting to payment provider"),
ig.game.O9710.O6335(),window.location.href=d.redirectTo):ig.ua.steam?(console.log("waiting for steam overlay interaction"),c.processing=!1,ig.game.alertDialog.close()):ig.game.errorManager.O3802("Something went wrong during payment process, please contact we@thingistan.com")}).fail(function(){ig.game.errorManager.O3802("Something went wrong during payment process, please contact we@thingistan.com")})}}}})});ig.baked=!0;
ig.module("game.core.iapdialogmanager").defines(function(){window.IapDialogManager=ig.Class.extend({playedMinfinitySoundThisSession:!1,O1209:function(){this.O4604();this.O9111()},O9111:function(){if(this.O1493()){localStorage.minfinityLastExpiredReminded=ig.game.minfinityLastExpired;var a="";ig.game.lastMinfinityAmount&&(a+="<p>Thanks for having gotten Minfinity, and for supporting Thingistan!</p>");ig.game.alertDialog.open(a+"<p>A new month has started.</p>",!0,function(){ig.game.alertDialog.close();
setTimeout(function(){ig.game.O9663.openMainDialog()},350)})}},O1493:function(){return!1},openMainDialog:function(){ig.game.alertDialog.isOpen&&ig.game.alertDialog.close();ig.game.hasMinfinity?this.O1905():this.O1843()},O6169:function(){ig.game.alertDialog.open({html:'<p>Please get <span class="pseudoLink" onclick="ig.game.O9663.openMainDialog()">Minfinity</span> for this</p>',O5358:!0})},O1843:function(){var a="";ig.game.painter.isRunning?ig.game.painter.close():ig.game.boostDialog.isOpen&&ig.game.boostDialog.close();
a+='<div style="max-width: 700px; position: relative; margin-left: auto; margin-right: auto">';var b='<img src="'+ml.Misc.O8283("minfinity-icon",2)+'" alt=""/>';a=a+("<p>"+b+" <strong>Minfinity</strong> gets you:</p>")+this.O5316(12);ig.game.alertDialog.open(a+"<p><em>We're sorry, but getting Minfinity isn't yet available on this device. We hope to add it in the future!</em></p>",!0);ig.game.sounds.whoosh.play()},O5316:function(a){for(var b="",c=["Giving of Mifts for free","An infinite amount of Boosts",
ig.ua.mobile||ig.ua.steam?null:"Ads can be disabled in the settings","Search for items in whole universe","One extra creatable area per day","... and you help cover Thingistan's costs to keep everything running"],d=0;d<c.length;d++)null!=c[d]&&(b+='<div style="margin-bottom: '+a+'px; text-transform: uppercase; color: rgb(80,145,0)">+ '+c[d]+"!</div>");return b},O7912:function(){jQuery("#oldAmount").hide();jQuery("#getMinfinityAmountSelect").show();ig.game.sounds.click.play()},O4604:function(){localStorage.isAboutToPayForSubscription&&
(delete localStorage.isAboutToPayForSubscription,ig.game.hasMinfinity&&this.O1905(!0))},O6522:function(a){jQuery("#getMinfinityButton").css("opacity",".5");ig.game.iapManager.O6522(a)},O1905:function(a){a='<p style="font-size: 110%; color: rgb(100,100,0); margin-top: 30px">Thanks for getting Minfinity and supporting Thingistan! You appear in the <span class="pseudoLink" onclick="ml.Misc.openUrl(\'/info#minfinity\')">credits</span>. Minfinity gives you:'+this.O5316(4);ig.game.alertDialog.open({html:a+
"</p>"});jQuery("#alertDialog").css("background-color","rgb(255,255,200)");this.playedMinfinitySoundThisSession?ig.game.sounds.whoosh.play():(this.playedMinfinitySoundThisSession=!0,setTimeout(function(){ig.game.sounds.minfinity.play()},2E3))}})});ig.baked=!0;
ig.module("game.core.farbackmanager").defines(function(){window.FarBackManager=ig.Class.extend({maxCoordinate:void 0,O9105:void 0,O5560:Math.PI/180,O6809:1E4,O8201:"rotate",O6757:"mirror",O3115:"flip",O8707:function(a,b,c,d){this.O5145(d);d=100;var e=0,f=[];if(a&&"string"==typeof a){a=a.toLowerCase();a=ig.game.strings.replaceAll(a,"\r\n","\r");a=ig.game.strings.replaceAll(a,"\n","\r");a=this.O7118(a);var g=a.split("\r"),h=b.diversifyPoints||b.diversifyPointsStronger||b.diversifyPointsStrongest||b.diversifyPointsOld;
h&&(ig.game.seedableRandom.setSeed(a.length),b.diversifyPoints?e=2:b.diversifyPointsStronger?e=5:b.diversifyPointsStrongest&&(e=10),d*=3);for(a=0;a<g.length;a++){var k={},l=g[a];l=ig.game.strings.O2821(l);l=l.trim();var m=l.split(" ");l=0;var n=m.indexOf(this.O8201);if(0<=n){var p=n+1;p<m.length&&(l=m[p],m.splice(n,2))}n=!1;p=m.indexOf(this.O6757);0<=p&&(n=!0,m.splice(p,1));p=!1;var q=m.indexOf(this.O3115);0<=q&&(p=!0,m.splice(q,1));k.cellDoFlipHorizontal;var t=q=void 0,r=void 0,w=void 0,u=void 0,
v=m.indexOf("cell");-1===v&&3==m.length?(q=m[0],t=m[1],r=m[2],u=w=0):2===v?(q=m[0],t=m[1],r=m[3],6==m.length?(w=m[4],u=m[5]):u=w=0):0===v?(r=m[1],w=m[2],u=m[3]):(q=m[0],t=m[1]);h&&1<=f.length&&void 0!==q&&void 0!==t&&a<g.length-1&&(m=f[f.length-1],void 0!==m.x&&void 0!==m.y&&(v={},v.x=Math.round(.66*m.x+.33*q),v.y=Math.round(.66*m.y+.33*t),b.diversifyPointsOld?(v.x+=a%4,v.y+=a%3):(v.x+=ig.game.seedableRandom.O4293(-e,e),v.y+=ig.game.seedableRandom.O4293(-e,e)),f.push(v),v={},v.x=Math.round(.33*m.x+
.66*q),v.y=Math.round(.33*m.y+.66*t),b.diversifyPointsOld?(v.x-=a%3,v.y-=a%4):(v.x+=ig.game.seedableRandom.O4293(-e,e),v.y+=ig.game.seedableRandom.O4293(-e,e)),f.push(v)));k.cellOffset={x:0,y:0};this.O8549(q)&&this.O8549(t)&&this.O5288(q,1<=r)&&this.O5288(t,1<=r)&&(k.x=parseInt(q),k.y=parseInt(t));this.O8549(r)&&1<=r&&r<=c&&(k.cell=parseInt(r),this.O8549(w)&&this.O8549(u)&&w>=-this.O9105&&w<=this.O9105&&u>=-this.O9105&&u<=this.O9105&&(k.cellOffset.x=parseInt(w),k.cellOffset.y=parseInt(u)),l&&ml.Misc.O5090(l)?
(l=parseInt(l).limit(-this.O6809,this.O6809),k.cellRotation=l*this.O5560):k.cellRotation=0,k.cellFlipX=n,k.cellFlipY=p);f.push(k);if(f.length>=d)break}}return f},O8549:function(a){return void 0!==a&&a==parseInt(a)},O5145:function(a){a?this.O9105=this.maxCoordinate=100:(this.maxCoordinate=500,this.O9105=300)},O5288:function(a,b){var c=!1;a==parseInt(a)&&(c=b?this.O9105:this.maxCoordinate,a=parseInt(a),c=a>=-c&&a<=c);return c},O7118:function(a){for(var b=null;a!=b;)b=a,a=ig.game.strings.replaceAll(a,
"  "," "),a=ig.game.strings.replaceAll(a,"\r\r","\r");return a},O1442:function(a,b){var c=0,d=a.attributes&&a.attributes.muchFurtherInFront,e=b.attributes&&b.attributes.muchFurtherInFront;d&&!e?c=1:!d&&e?c=-1:(d=a.attributes&&(a.attributes.furtherInFront||a.attributes.muchFurtherInFront),e=b.attributes&&(b.attributes.furtherInFront||b.attributes.muchFurtherInFront),d&&!e?c=1:!d&&e?c=-1:a.pos.y<b.pos.y?c=-1:a.pos.y>b.pos.y?c=1:(d=a.O5682?a.O5682.x%2:0,e=b.O5682?b.O5682.x%2:0,d<e?c=1:d>e?c=-1:a.pos.x<
b.pos.x?c=-1:a.pos.x>b.pos.x&&(c=1)));return c},O7858:function(a){var b=a.attributes&&a.attributes.muchFurtherInFront,c=b?.045:.09;a={x:(ig.game.O1257.pos.x-a.pos.x)*c,y:(ig.game.O1257.pos.y-a.pos.y)*c};b=b?2:1;c=(ig.game._rscreen.x-ig.game.camera.screenTarget.x)/(10*b);a.x+=c;c=(ig.game._rscreen.y-ig.game.camera.screenTarget.y)/(10*b);c+=ig.game.camera.O8179/(8.5*b);a.y+=c;return a}})});ig.baked=!0;
ig.module("game.core.seedablerandom").defines(function(){window.SeedableRandom=ig.Class.extend({N:624,M:397,MATRIX_A:2567483615,UPPER_MASK:2147483648,LOWER_MASK:2147483647,mt:null,mti:null,setSeed:function(a){void 0===a&&this.setSeed(Date.now());this.mt=Array(this.N);this.mti=this.N+1;this.init_genrand(a)},random:function(){return this.genrand_int32()*(1/4294967296)},chance:function(a){return this.random()<=a/100},O4293:function(a,b){return parseInt(Math.floor((b+1-a)*this.random()+a),10)},init_genrand:function(a){this.mt[0]=
a>>>0;for(this.mti=1;this.mti<this.N;this.mti++)a=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30,this.mt[this.mti]=(1812433253*((a&4294901760)>>>16)<<16)+1812433253*(a&65535)+this.mti,this.mt[this.mti]>>>=0},genrand_int32:function(){var a=[0,this.MATRIX_A];if(this.mti>=this.N){var b;this.mti==this.N+1&&this.init_genrand(5489);for(b=0;b<this.N-this.M;b++){var c=this.mt[b]&this.UPPER_MASK|this.mt[b+1]&this.LOWER_MASK;this.mt[b]=this.mt[b+this.M]^c>>>1^a[c&1]}for(;b<this.N-1;b++)c=this.mt[b]&this.UPPER_MASK|
this.mt[b+1]&this.LOWER_MASK,this.mt[b]=this.mt[b+(this.M-this.N)]^c>>>1^a[c&1];c=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK;this.mt[this.N-1]=this.mt[this.M-1]^c>>>1^a[c&1];this.mti=0}c=this.mt[this.mti++];c^=c>>>11;c^=c<<7&2636928640;c^=c<<15&4022730752;return(c^c>>>18)>>>0}})});ig.baked=!0;
ig.module("game.core.steammanager").defines(function(){window.SteamManager=ig.Class.extend({pseudoSteamForLocalTesting:!1,init:function(){if(!this.pseudoSteamForLocalTesting||window.steam_setMicroTxnAuthorizationHandler)window.steam_initResult||ig.game.errorManager.O3802("Greenworks was not loaded or initialized"),window.steam_setMicroTxnAuthorizationHandler(this.O9539),this.O2620()},O9000:function(){"true"==localStorage.windowAlwaysOnTop&&ig.game.settings.O1237();var a=ig.game.O2004?this.O2004/60:
0;ig.game.O9720!=ig.game.O3748&&(120>=a||1>=ig.game.O1257.rank)&&this.O5256(!0)},O2620:function(){document.addEventListener("dragover",function(a){a.preventDefault();a.stopPropagation()},!1);document.addEventListener("drop",function(a){a.preventDefault();a.stopPropagation()},!1)},O9539:function(a,b){console.log("Got MicroTxnAuthorizationResponse");console.log("Got MicroTxnAuthorizationResponse. orderId: "+a);b?ig.game.O9817.O6090(a).done(function(c){console.log("Reloading - minfinity purchase completed");
location.reload(!1)}).fail(function(){ig.game.errorManager.O3802("Transaction could not be completed - please contact support at we@thingistan.com")}):(console.log("Not authorized by user"),ig.game.O9817.O5959(a))},openUrl:function(a){"/info"===a||0!==a.indexOf("http://")&&0!==a.indexOf("https://")&&(a=ig.game.isLocal?"localhost:8787"+a:"//thingistan.com"+a);this.openBrowserWindow(a)},O5256:function(a){window.location.hash=a?"offerGuidanceBeforeClosing":""},openDevTools:function(){window.steam_openDevTools()},
isWindowAlwaysOnTop:function(){return window.steam_isWindowAlwaysOnTop()},setWindowAlwaysOnTop:function(a){window.steam_setWindowAlwaysOnTop(a)},isWindowFullScreen:function(){return window.steam_isWindowFullScreen()},setWindowFullScreen:function(a){return window.steam_setWindowFullScreen(a)},openBrowserWindow:function(a){window.steam_openBrowserWindow(a)},closeWindow:function(){window.steam_closeWindow()},setAchievement:window.steam_setAchievement})});ig.baked=!0;
ig.module("game.coms.httpapi").defines(function(){window.HttpApi=ig.Class.extend({useCdn:!0,O7915:!0,O6635:!0,O2856:null,O9232:0,init:function(){var a={dataType:"json",timeout:12E3,retryMax:3};this.useCdn=!ml.Misc.O7959();this.O7915=!ml.Misc.O7959();ig.ua.iexplorer&&(a.cache=!1);this.itemDefUrl="/j/i/def/";this.bigItemDefUrl="/j/i/bd/";this.isSecure="https:"===document.location.protocol;this.O7915&&(this.itemDefUrl="//def.thingistan.com/");a.beforeSend=function(b,c){var d=ig.game.O3905?ig.game.O3905:
ml.Misc.O9059("act");d&&!c.crossDomain&&b.setRequestHeader("X-CSRF",d);ig.game.sci&&-1<c.url.indexOf("j1.thingistan.com")&&b.setRequestHeader("X-CSRF",d)};jQuery.ajaxSetup(a);$(document).ajaxError(function(b,c,d,e){})},O9264:function(a){var b="";if("string"===typeof a){b=a.split("/");for(var c=[],d=0;d<b.length;d++){var e=b[d];e=5>=e.length?e:"...";c.push(e)}b=c.join("/");c="/j/m/placer/ /j/m/di/ /j/m/sp/ /j/m/sps/ /j/m/rp/ /j/m/plfdt/ /j/m/dms/ /j/e/esi/ /j/e/esl/ /j/e/esr/".split(" ");for(d=0;d<
c.length;d++)if(e=c[d],0===a.indexOf(e)){b=e+"...";break}}return b},O4020:function(a){a="urlCacheAppend_"+a;sessionStorage[a]||(sessionStorage[a]=ig.game.strings.O4619());return"?"+sessionStorage[a]},O4633:function(a){delete sessionStorage["urlCacheAppend_"+a]},O9649:function(a,b,c){var d=this;jQuery.ajax({url:ml.Misc.O2504(a),success:function(e){c(e)},error:function(e,f,g){console.warn("Httpapi ajax call failed for O9649 of id "+String(a));c({id:a,O7880:!0})},statusCode:{404:function(){d.O2313(a,
b)}}})},O6155:function(a,b,c){var d=this;return jQuery.ajax({url:ml.Misc.O2504(a),context:c,statusCode:{404:function(){d.O2313(a,b)}}})},O2313:function(a,b){100>this.O9232&&(this.O9232++,jQuery.ajax({url:"/j/i/rmi/",type:"POST",data:{itemId:a,areaId:ig.game.O4873.currentArea,context:b}}))},O4447:function(a,b){return jQuery.ajax({url:this.bigItemDefUrl+a,context:b})},O2289:function(a){return jQuery.ajax({url:"/j/i/st/"+a})},O9333:function(a,b,c){return jQuery.ajax({url:"/j/i/gcr/"+a+"/"+b+this.O4020("createdItems"),
context:c})},O1156:function(a,b,c,d){return jQuery.ajax({url:"/j/s/i/",type:"POST",data:{qs:a,start:b,end:c},context:d})},O9343:function(a,b,c,d){return jQuery.ajax({url:"/j/s/ib/",type:"POST",data:{qs:a,p:b,s:c},context:d})},O4736:function(a,b){return jQuery.ajax({url:"/j/i/cin/"+a,context:b})},O4236:function(a,b){return jQuery.ajax({url:"/j/i/tcr/"+a+"/",context:b})},O7707:function(a,b){this.O4633("createdItems");return jQuery.ajax({url:"/j/i/c/",type:"POST",data:{itemData:a},context:b})},O9139:function(a){return jQuery.ajax({url:"/j/i/ccq/",
type:"POST",context:a})},O8034:function(a){this.O4633("createdItems");return jQuery.ajax({url:"/j/i/d/",type:"POST",data:{itemId:a}})},O7497:function(a,b){return jQuery.ajax({url:"j/i/dat/"+a,context:b})},O4538:function(a,b){return jQuery.ajax({url:"j/i/datp/"+a,context:b})},O4779:function(a,b){return jQuery.ajax({url:"/j/i/cols/"+a,context:b})},O1388:function(a,b,c){return jQuery.ajax({url:"/j/i/f/",type:"POST",data:{itemId:a,mapLoc:b},context:c})},O2396:function(a,b){return jQuery.ajax({url:"/j/i/chkf/"+
a,context:b})},O1270:function(a,b){return jQuery.ajax({url:"/j/i/gu/",type:"POST",data:{id:a},context:b})},O7360:function(a,b,c){return jQuery.ajax({url:"/j/i/su/",type:"POST",data:{id:a,isUnlisted:b},context:c})},O3670:function(a,b,c,d){return jQuery.ajax({url:"/j/m/placer/"+a.x+"/"+a.y+"/"+b+"/"+c,context:d})},O4516:function(a,b,c,d){return jQuery.ajax({url:"/j/m/di/"+a.x+"/"+a.y+"/"+b+"/"+c,context:d})},O2437:function(a,b,c,d){if(0===c&&this.O6635){var e=this;return(this.O2856?jQuery.Deferred().resolve().promise():
this.O8217(c,d)).then(function(){return jQuery.ajax({url:"/j/m/spl/"+a+"/"+b+"/"+c+"/"+d+"?"+e.O2856})})}return jQuery.ajax({url:"/j/m/sp/"+a+"/"+b+"/"+c+"/"+d})},O4218:function(a,b,c){return jQuery.ajax({type:"POST",url:"/j/m/s/",data:{s:JSON.stringify(c),p:a,a:b}})},O5087:function(a,b,c){var d=new jQuery.Deferred;jQuery.ajax({type:"POST",url:"/j/m/sv/",data:{s:JSON.stringify(c),p:a,a:b}}).done(function(e){jQuery.ajax({type:"GET",url:"/j/m/sv/",data:{s:JSON.stringify(c),p:a,a:b}})}).fail(d.reject);
return d.promise()},O8217:function(a,b){var c=this;a=jQuery.ajax({type:"POST",url:"/j/m/cmv/",data:{p:a,a:b}});a.done(function(d){c.O2856=d.v}).fail(function(){console.log("Could not get vMap");ig.game.errorManager.warn("Could not get vMap",b,!0)});return a},O4503:function(a,b,c){return jQuery.ajax({url:"/j/m/rp/"+a+"/"+b,context:c})},O5857:function(a,b,c,d,e){return jQuery.ajax({url:"/j/m/plfdt/"+a+"/"+b+"/"+c+"/"+d,context:e})},O5372:function(a,b,c,d){return jQuery.ajax({url:"/j/m/dms/"+a+"/"+b+
"/"+c+"/"+d})},O4882:function(a,b,c){return jQuery.ajax({type:"POST",url:"/j/m/dmss/",data:{s:a,p:b,a:c}})},mnt_P:function(a){var b=ig.game.O4873;return jQuery.ajax({type:"POST",url:"/j/m/mnt/",data:{p:b.O8027,a:b.currentArea,sx:b.O1577.x,sy:b.O1577.y,c:a}})},O1774:function(a,b,c){return jQuery.ajax({url:"/j/c/r/"+a+"/"+b+this.O4020("collectedItems"),context:c})},O7049:function(a,b,c){this.O4633("collectedItems");return jQuery.ajax({url:"/j/c/c",type:"POST",data:{itemId:a,index:b},context:c})},O2989:function(a,
b){this.O4633("collectedItems");return jQuery.ajax({url:"/j/c/d",type:"POST",data:{itemId:a},context:b})},O8987:function(a,b){return jQuery.ajax({url:"/j/c/check/"+a+"/",context:b})},O4260:function(a,b){return jQuery.ajax({url:"/j/u/tip/"+a,context:b})},O4406:function(a,b,c){return jQuery.ajax({url:"/j/u/pi/",type:"POST",data:{id:a,planeId:b,areaId:c}})},O8185:function(a,b){return jQuery.ajax({url:"/j/u/a/",type:"POST",data:{id:a},context:b})},O9994:function(a,b,c){return jQuery.ajax({url:"/j/u/sus/",
type:"POST",data:{name:a,value:b},context:c})},O1013:function(a,b,c){return jQuery.ajax({url:"/j/u/spi/",type:"POST",data:{index:a,id:b},context:c})},O6329:function(a,b){return jQuery.ajax({url:"/j/u/spc/",type:"POST",data:{color:a},context:b})},O6436:function(a,b){return jQuery.ajax({url:"/j/u/spb/",type:"POST",data:{backId:a},context:b})},O6577:function(a,b){return jQuery.ajax({url:"/j/u/spd/",type:"POST",data:{dynaId:a},context:b})},O6353:function(a){return jQuery.ajax({url:"/j/u/gfr/",type:"POST",
context:a})},O8211:function(a){return jQuery.ajax({url:"/j/u/tu/",type:"POST",context:a})},O9902:function(a,b,c){return jQuery.ajax({url:"/j/u/f/",type:"POST",data:{uid:a,reason:b},context:c})},O3628:function(a,b){return jQuery.ajax({url:"/j/u/rav/"+a,context:b})},O3796:function(){return jQuery.ajax({url:"/j/u/p/",type:"POST"})},O7035:function(){return jQuery.ajax({url:"/j/u/toc/"})},O1594:function(a){return jQuery.ajax({url:"/j/u/gcn/"+a})},O2734:function(a){return jQuery.ajax({url:"/j/u/glt/",type:"POST",
context:a})},O5074:function(a,b){return jQuery.ajax({url:"/auth/token/",type:"POST",data:{token:a},context:b})},O4384:function(a){return jQuery.ajax({url:"/j/u/fab/",context:a})},O1389:function(a){return jQuery.ajax({url:"/j/u/oof/",context:a})},O4570:function(a,b){return jQuery.ajax({url:"/j/mp/c",type:"POST",data:{id:a},context:b})},O5947:function(a,b){return jQuery.ajax({url:"/j/mp/d",type:"POST",data:{id:a},context:b})},O5613:function(a,b){return jQuery.ajax({url:"/j/u/bfs",type:"POST",data:{id:a},
context:b})},O7644:function(a,b){return jQuery.ajax({url:"/j/mbp/c",type:"POST",data:{id:a},context:b})},O7617:function(a,b){return jQuery.ajax({url:"/j/mbp/d",type:"POST",data:{id:a},context:b})},O8175:function(a,b){return jQuery.ajax({url:"/j/u/ps/"+a,context:b})},O9646:function(a,b){return jQuery.ajax({type:"POST",url:"/j/u/pss/",data:{ids:a},context:b})},O9189:function(a,b){return jQuery.ajax({url:"/j/u/pslu/"+a,context:b})},O6316:function(a,b){return jQuery.ajax({url:"/j/u/pt/",type:"POST",data:{state:a},
context:b})},O2256:function(a,b,c){return jQuery.ajax({url:"/j/v/loc/"+a+"/"+b,context:c})},O7990:function(a,b){return jQuery.ajax({url:"/j/v/loc/"+a,context:b})},O2699:function(a,b){return jQuery.ajax({url:"/j/v/cds/"+a,context:b})},O6455:function(a,b){return jQuery.ajax({url:"/j/v/sca/"+a,context:b})},O1769:function(a,b,c){return jQuery.ajax({url:"/j/v/pla/"+a+"/"+b,context:c})},O4171:function(a,b,c,d,e,f,g){return jQuery.ajax({url:"/j/v/c",type:"POST",data:{shortCode:a,loc:b,imgDataUrl:c,imgThumbDataUrl:d,
isListed:e,isPrivate:f},context:g})},O9628:function(a,b){return jQuery.ajax({url:"/j/v/svs/",type:"POST",data:{shortCode:a,listed:b}})},O7584:function(a,b){return jQuery.ajax({url:"/j/v/svp/",type:"POST",data:{shortCode:a,isPrivate:b}})},O7966:function(a){return jQuery.ajax({url:"/j/v/shl/",type:"POST",data:{id:a}})},O5105:function(a){return jQuery.ajax({url:"/j/v/sc/",context:a})},O6899:function(a){return jQuery.ajax({headers:{"cache-control":"no-cache"},url:"/j/i/",type:"POST",data:{urlName:a,buster:Date.now()}})},
O3995:function(a){return jQuery.ajax({url:"/timeout",context:a})},O3728:function(a){return jQuery.ajax({url:"/j/n/gln/",context:a})},O2786:function(){return jQuery.ajax({url:"/j/n/guc/"})},O5298:function(a){return jQuery.ajax({url:"/j/u/s/",type:"POST",data:{status:a}})},O2991:function(a){return jQuery.ajax({url:"/j/u/gi/"+a})},O2405:function(a){return jQuery.ajax({url:"/j/u/si/",type:"POST",data:{iconId:a}})},O2956:function(a){return jQuery.ajax({url:"/j/i/mo/"+a})},O9698:function(a,b,c){return jQuery.ajax({url:"/j/i/am/",
type:"POST",data:{mid:a,bid:b,pos:c}})},O8786:function(a,b){return jQuery.ajax({url:"/j/i/dm/",type:"POST",data:{mid:a,bid:b}})},O4231:function(a,b){return jQuery.ajax({url:"/j/i/mp/",type:"POST",data:{bid:a,mp:b}})},O9415:function(a,b,c,d){return jQuery.ajax({url:"/j/e/esi/"+c+"/"+d+"/"+a+"/"+b})},O7473:function(a,b,c,d,e,f){return jQuery.ajax({url:"/j/e/esr/"+c+"/"+d+"/"+e+"/"+f+"/"+a+"/"+b})},O9163:function(a,b,c,d){return jQuery.ajax({url:"/j/e/esl/"+c+"/"+d+"/"+a+"/"+b})},O5995:function(a){return jQuery.ajax({url:"/j/e/mlp/"+
a})},createArea_P:function(a){return jQuery.ajax({url:"/j/a/c/",type:"POST",data:{areaData:a}})},O1106:function(a,b){return jQuery.ajax({url:"/j/a/u/",type:"POST",data:{id:a,areaData:b}})},O6348:function(a,b,c,d){return jQuery.ajax({url:"/j/a/st/",type:"POST",data:{id:a,thumb:b,width:c,height:d}})},O5486:function(a){return jQuery.ajax({url:"/j/a/nel/"+a})},O8620:function(a){return jQuery.ajax({url:"/j/a/nu/"+a})},O967:function(a){return jQuery.ajax({url:"/j/a/ane/"+a})},O9533:function(a,b){return jQuery.ajax({url:"/j/a/nug/"+
a+"/"+b})},O4668:function(a){return jQuery.ajax({url:"/j/a/nad/"+a})},O8990:function(){return jQuery.ajax({url:"/j/a/mal/"+(ig.game.areaGroupId?ig.game.areaGroupId:"")})},O9645:function(a){return jQuery.ajax({url:"/j/a/cf/",type:"POST",data:{id:a}})},O5122:function(a,b){return jQuery.ajax({url:"/j/a/sf/",type:"POST",data:{id:a,reason:b}})},O5421:function(){return jQuery.ajax({url:"/j/a/gr/"})},O5960:function(a,b,c,d){return jQuery.ajax({url:"/j/f/at/",type:"POST",data:{forumId:a,title:b,content:c,
items:d}})},O8071:function(a,b,c){return jQuery.ajax({url:"/j/f/ac/",type:"POST",data:{threadId:a,content:b,items:c}})},O7831:function(a,b){return jQuery.ajax({url:"/j/f/sc/",type:"POST",data:{threadId:a,clarification:b}})},O3743:function(a,b,c,d){return jQuery.ajax({url:"/j/f/ec/",type:"POST",data:{commentId:a,newContent:b,newItems:c,newTitle:d}})},O4241:function(a,b){return jQuery.ajax({url:"/j/f/gf/",type:"POST",data:{forumId:a,olderThan:b}})},O3240:function(a,b){return jQuery.ajax({url:"/j/f/gt/",
type:"POST",data:{threadId:a,newerThan:b}})},O5587:function(a,b,c){return jQuery.ajax({url:"/j/f/gc/",type:"POST",data:{threadId:a,olderThan:b,newerThan:c}})},O7627:function(a,b,c){return jQuery.ajax({url:"/j/f/ge/",type:"POST",data:{forumId:a,startDate:b,endDate:c}})},O1272:function(a){return jQuery.ajax({url:"/j/f/glci/"+a})},O9457:function(a){return jQuery.ajax({url:"/j/f/gfs/"+a})},O9610:function(a){return jQuery.ajax({url:"/j/f/tfs/",type:"POST",data:{commentId:a}})},O7725:function(a){return jQuery.ajax({url:"/j/f/rl/",
type:"POST",data:{commentId:a}})},O9880:function(a){return jQuery.ajax({url:"/j/f/tl/",type:"POST",data:{commentId:a}})},O1691:function(a){return jQuery.ajax({url:"/j/f/hc/",type:"POST",data:{id:a}})},O6136:function(a,b){return jQuery.ajax({url:"/j/f/sth/",type:"POST",data:{id:a,isHidden:b}})},O1571:function(a,b){return jQuery.ajax({url:"/j/f/stl/",type:"POST",data:{id:a,isLocked:b}})},O3426:function(a,b){return jQuery.ajax({url:"/j/f/sts/",type:"POST",data:{id:a,isSticky:b}})},O7334:function(a){return jQuery.ajax({url:"/j/f/gs/",
type:"POST",data:{id:a}})},O5456:function(a){return jQuery.ajax({url:"/j/f/gse/",type:"POST",data:{id:a}})},O3588:function(a){return jQuery.ajax({url:"/j/f/gan/",type:"POST",data:{id:a}})},O1387:function(a,b){return jQuery.ajax({url:"/j/f/spk/",type:"POST",data:{id:a,key:b}})},O5064:function(a,b){return jQuery.ajax({url:"/j/f/cpk/",type:"POST",data:{id:a,key:b}})},O2872:function(a){return jQuery.ajax({url:"/j/h/gc/"+a})},O8993:function(a,b,c){return jQuery.ajax({url:"/j/h/sc/",type:"POST",data:{holderId:a,
pageNo:b,contents:c}})},O1311:function(a){return jQuery.ajax({url:"/j/t/gt/"+a})},O2557:function(a,b){return jQuery.ajax({url:"/j/t/st/",type:"POST",data:{multithingId:a,itemProps:b.itemProps,staticItemsPropIndexAndXY:b.staticItemsPropIndexAndXY,movableItemsPropIndexAndXY:b.movableItemsPropIndexAndXY,settings:b.settings}})},O3334:function(a,b,c){return jQuery.ajax({url:"/j/aps/s/",type:"POST",data:{areaGroupId:a,ids:b,vals:c}})},O6885:function(){return jQuery.ajax({url:"/j/b/ged/"})},O3553:function(a){return jQuery.ajax({url:"/j/b/sed/",
type:"POST",data:{contents:a}})},O3509:function(a,b,c,d){return jQuery.ajax({url:"/j/mf/grm/",type:"POST",data:{olderThan:a,newerThan:b,setSize:c,id:d&&d.id,priv:!(!d||!d.priv)}})},O6662:function(){return jQuery.ajax({url:"/j/mf/umc/"})},O1021:function(a){return jQuery.ajax({url:"/j/mf/gms/",type:"POST",data:{id:a}})},O5850:function(a){return jQuery.ajax({url:"/j/mf/sbr/",type:"POST",data:{id:a}})},O6304:function(a){return jQuery.ajax({url:"/j/mf/sbs/",type:"POST",data:{id:a}})},O3069:function(a){return jQuery.ajax({url:"/j/mf/sp/",
type:"POST",data:{id:a}})},O6359:function(a){return jQuery.ajax({url:"/j/mf/sh/",type:"POST",data:{id:a}})},O2415:function(a){return jQuery.ajax({url:"/j/mf/cs/",type:"POST",data:{id:a}})},O4953:function(a){return jQuery.ajax({url:"/j/a/as/",type:"POST",data:{qs:a}})},O9870:function(a){return jQuery.ajax({url:"/j/p/sub/ns/",type:"POST",data:{amount:a}})},O773:function(){return jQuery.ajax({url:"/j/p/sub/cs/",type:"POST"})},O6004:function(a){return jQuery.ajax({url:"/j/p/mfo/",type:"POST",data:{amount:a}})},
O8592:function(a){return jQuery.ajax({url:"/j/p/cp/",type:"POST",data:{id:a}})},O6090:function(a){return jQuery.ajax({url:"/j/p/suc/",type:"POST",data:{id:a}})},O5959:function(a){return jQuery.ajax({url:"/j/p/can/",type:"POST",data:{id:a}})},O4185:function(a,b,c,d){return jQuery.ajax({url:"/j/a/aab/",type:"POST",data:{areaId:a,userId:b,minutesOrNullIfPermanent:c,reason:d}})},O8438:function(a,b){return jQuery.ajax({url:"/j/a/rab/",type:"POST",data:{areaId:a,userId:b}})},O9361:function(a,b){return jQuery.ajax({url:"/j/a/ubs/",
type:"POST",data:{areaId:a,userId:b}})},O6780:function(){return jQuery.ajax({url:"/j/bo/ga/",type:"POST"})},O5814:function(a,b){return jQuery.ajax({url:"/j/bo/sa/",type:"POST",data:{name:a,id:b}})},O7014:function(){return jQuery.ajax({url:"/j/in/gci/",type:"POST"})},O8805:function(a){return jQuery.ajax({url:"/j/msc/gst/",type:"POST",data:{url:a}})},O9256:function(a,b,c){return jQuery.ajax({url:"/j/msc/sac",type:"POST",data:{areaName:a,title:b,impressions:c}})},O9128:function(a,b,c,d){return jQuery.ajax({url:"/j/msc/uac",
type:"POST",data:{id:a,areaName:b,title:c,paused:d}})},O2065:function(){return jQuery.ajax({url:"/j/msc/gaa",type:"POST"})}})});ig.baked=!0;
ig.module("game.coms.O4212").defines(function(){window.O7104=ig.Class.extend({O6440:32,O9925:19,O9949:null,O8027:1,currentArea:1,O1577:{x:0,y:0},O3129:{x:0,y:0},O6641:null,O4499:100,init:function(){this.O9949=this.O6440*this.O9925},O7576:function(a,b,c){if(b||c)this.O8027=b,this.currentArea=c,ig.game.areaId&&this.currentArea!=ig.game.areaId&&ig.game.errorManager.warn("AreaId missmatch",null,!0);a=this.O1254(a);return a.x!=this.O1577.x||a.y!=this.O1577.y?(this.O3129=this.O1577,this.O1577=a,this.O1577.x>
this.O3129.x&&(this.O6641=this.O8401s.EAST),this.O1577.x<this.O3129.x&&(this.O6641=this.O8401s.WEST),this.O1577.y>this.O3129.y&&(this.O6641=this.O8401s.SOUTH),this.O1577.y<this.O3129.y&&(this.O6641=this.O8401s.NORTH),!0):!1},O4556:function(a){a.x=Math.floor(a.x/this.O6440);a.y=Math.floor(a.y/this.O6440);return a},O3991:function(a,b){var c={};c.x=a.x*this.O6440+b.x;c.y=a.y*this.O6440+b.y;return c},O9099:function(a){var b={},c={};b.x=Math.floor(a.x/this.O6440);b.y=Math.floor(a.y/this.O6440);c.x=a.x-
b.x*this.O6440;c.y=a.y-b.y*this.O6440;return{sector:b,offset:c}},O1210:function(a){var b={},c={};b.x=Math.floor(a.x/this.O6440/19);b.y=Math.floor(a.y/this.O6440/19);c.x=a.x-19*b.x*this.O6440;c.y=a.y-19*b.y*this.O6440;return{sector:b,offset:c}},O3963:function(a){return a&&a.p==this.O8027&&a.a==this.currentArea},O2192:function(){var a=ig.game.O6112.O2337(ig.game.O1257.pos.x,ig.game.O1257.pos.y);return{p:this.O8027,a:this.currentArea,x:a.x,y:a.y}},O1254:function(a){a=ig.game.O6112.O2337(a.pos.x,a.pos.y);
return this.O4556(a)},O9177:function(a){return{x:a.pos.x-Math.floor(a.pos.x/this.O9949)*this.O9949,y:a.pos.y-Math.floor(a.pos.y/this.O9949)*this.O9949}},O5251:function(a){for(var b=this.O7267(),c=0;8>=c;c++)if(this.O2865(Math.round(a.pos.x+8),Math.round(a.pos.y+8),b[c].x,b[c].y))return!0},gameCoordsInCurrentSectorPlus:function(a){for(var b=this.O7267(),c=0;8>=c;c++)if(this.O2865(a.x,a.y,b[c].x,b[c].y))return!0},O2865:function(a,b,c,d){c=this.O4155(c,d);return a>=c.x1&&a<=c.x2&&b>=c.y1&&b<=c.y2},O4155:function(a,
b){var c={};c.x1=a*this.O6440*ig.game.O9925;c.y1=b*this.O6440*ig.game.O9925;c.x2=(a+1)*this.O6440*ig.game.O9925-1;c.y2=(b+1)*this.O6440*ig.game.O9925-1;return c},O7267:function(){var a=[],b=this.O1577.x,c=this.O1577.y;a[0]={x:b-1,y:c-1};a[1]={x:b,y:c-1};a[2]={x:b+1,y:c-1};a[3]={x:b-1,y:c};a[4]={x:b,y:c};a[5]={x:b+1,y:c};a[6]={x:b-1,y:c+1};a[7]={x:b,y:c+1};a[8]={x:b+1,y:c+1};return a},O9687:function(a,b){var c={};c.x1=a*this.O6440;c.y1=b*this.O6440;c.x2=(a+1)*this.O6440-1;c.y2=(b+1)*this.O6440-1;return c},
O8863:function(){var a=this.O7267(),b={};b.x1=a[0].x*this.O6440;b.y1=a[0].y*this.O6440;b.x2=(a[8].x+1)*this.O6440-1;b.y2=(a[8].y+1)*this.O6440-1;return b},O8230:function(){var a=this.O1577.x,b=this.O1577.y,c,d,e,f;this.O6641==this.O8401s.NORTH?(c=a-1,d=a+1,e=b-1,f=b-1):this.O6641==this.O8401s.SOUTH?(c=a-1,d=a+1,e=b+1,f=b+1):this.O6641==this.O8401s.EAST?(c=a+1,d=a+1,e=b-1,f=b+1):this.O6641==this.O8401s.WEST&&(c=a-1,d=a-1,e=b-1,f=b+1);a={};a.x1=c*this.O6440;a.y1=e*this.O6440;a.x2=(d+1)*this.O6440-1;
a.y2=(f+1)*this.O6440-1;return a},O1071:function(a){return this.O3834(a.pos.x,a.pos.y)},O3834:function(a,b){var c=this.O7267();var d=c[0].x*this.O6440+3;var e=c[0].y*this.O6440+3;var f=(c[8].x+1)*this.O6440-1-3;c=(c[8].y+1)*this.O6440-1-3;a=ig.game.O6112.O2337(a,b);return a.x>=d&&a.x<=f&&a.y>=e&&a.y<=c},O7290:function(){var a=ig.game.O4873.O4155(ig.game.O4873.O1577.x,ig.game.O4873.O1577.y),b=a.x1-ig.game.screen.x,c=a.x2-ig.game.screen.x,d=a.y1-ig.game.screen.y;a=a.y2-ig.game.screen.y;var e=ig.system.context;
e.beginPath();e.rect(b*ig.system.scale,d*ig.system.scale,c*ig.system.scale-b*ig.system.scale,a*ig.system.scale-d*ig.system.scale);e.lineWidth=2;e.strokeStyle="#ffffff";e.stroke();var f=ig.game.O4873.O1577.x+" , "+ig.game.O4873.O1577.y;e.font="24px monospace";e.fillStyle="#ffffff";e.fillText(f,b*ig.system.scale+10,d*ig.system.scale+20);e.fillText(f,c*ig.system.scale-60,d*ig.system.scale+20);e.fillText(f,b*ig.system.scale+10,a*ig.system.scale-20);e.fillText(f,c*ig.system.scale-60,a*ig.system.scale-
20);e.fillText(f,b*ig.system.scale+10,(a-8*this.O6440)*ig.system.scale);e.fillText(f,c*ig.system.scale-60,(a-8*this.O6440)*ig.system.scale)},O8401s:{NORTH:"n",SOUTH:"s",EAST:"e",WEST:"w"},O3619:function(a,b){return ig.game.O1257&&380<ml.Misc.O3863(a,ig.game.O1257.pos)&&380>=ml.Misc.O3863(b,ig.game.O1257.pos)},O3907:function(){return!this.O9144()&&!ig.game.O4223},O9144:function(){return ig.game.O1958},O9593:function(a){a=ml.Misc.O8674({x:ig.game.areaCenterLocation.x*ig.game.O9925,y:ig.game.areaCenterLocation.y*
ig.game.O9925},a);return 0<a?Math.round(a/ig.game.O9925):0},O1051:function(){return ig.game.O4482?ig.game.areaGroupId:this.currentArea},O9498:function(){return this.O9593(ig.game.O1257.pos)<=this.O4499},O6714:function(a){return this.O9593(a)<=this.O4499},O6566:function(){return ig.game.O1257&&0>=ig.game.O1257.rank?"oops, you may have received too many flag reports and are currently locked.":"i need to get "+Math.abs(this.O9593(ig.game.O1257.pos)-this.O4499)+" more steps away from center"},O6966:function(a){var b=
parseInt(a);return b==a&&1<=b&&8>=b},O8292:function(){return 2==this.O8027&&1==this.currentArea},O1492:function(){return ig.game.O4223||ig.game.O9720&&0<=ig.game.O2791.indexOf(ig.game.O9720)}})});ig.baked=!0;
ig.module("game.coms.wsbinary").defines(function(){var a=0,b=!1;ml.WsBinary=function(c,d){this.wscoms=c;this.playerAcceptedPromise=d;setInterval(function(){b||(a=0)},1E3)};ml.WsBinary.prototype.binIdByteLength=24;ml.WsBinary.prototype.receive=function(c){var d=(new DataView(c)).getUint8(c.byteLength-1);d===this.O2638.O5884?this.receive_StateChanged(c):d===this.O2638.ECHO?this.receive_echo(c):console.log("Unknown binary message")};ml.WsBinary.prototype.receive_echo=function(c){};ml.WsBinary.prototype.receive_StateChanged=
function(c){var d=this.O7027(c),e=this.O5989(d);if(d){if(!this.isOurId(d)){var f=new DataView(c,this.binIdByteLength);c={x:f.getFloat32(0,!0),y:f.getFloat32(4,!0)};d=f.getFloat32(8,!0);var g=f.getFloat32(12,!0),h=f.getFloat32(16,!0),k=f.getFloat32(20,!0),l=f.getInt8(24),m=f.getInt8(25),n=f.getInt8(26);f=f.getInt8(27);var p=ig.game.O7465(e);if(p){p.lastSyncedPos&&ig.game.O4873.O3619(p.lastSyncedPos,c)&&ig.game.O7836.O2051(e,"per");Infinity!==c.x&&(p.pos.x=c.x);Infinity!==c.y&&(p.pos.y=c.y);p.vel.x=
ml.Misc.O1488(d);p.vel.y=ml.Misc.O1488(g);p.accel.x=ml.Misc.O1488(h);p.accel.y=ml.Misc.O1488(k);p.O9165=f?f:0;p.O2757(l,m);switch(n){case 1:p.O2027=p.O6917;break;case 2:p.O2027=p.O9764;break;case 3:p.O2027=p.O6038}p.lastSynced=Date.now();p.lastSyncedPos={x:c.x,y:c.y};p.justSynced=!0}else ig.game.O4873.O3834(c.x,c.y)&&ig.game.O7836.O2051(e,"upm")}}else console.error("sc message without bid")};ml.WsBinary.prototype.O3051=function(){return ig.game.O5119&&ig.game.O5119.player&&1<ig.game.O5119.player.length};
ml.WsBinary.prototype.O6632=function(c,d,e,f,g,h,k){var l=new ArrayBuffer(29);c=this.O7742(l,[c.x,c.y,d.x,d.y,e.x,e.y],0);c=this.O2910(l,[f,g,h,k],c);this.O2910(l,[this.O2638.O5884],c);this.O8000(l)};ml.WsBinary.prototype.O6505=function(c,d,e){var f=4*d.length;c=new Int32Array(c,e,d.length);for(var g=0;g<f;g++)c[g]=d[g];return e+f};ml.WsBinary.prototype.O2910=function(c,d,e){var f=d.length;c=new Uint8Array(c,e,d.length);for(var g=0;g<f;g++)c[g]=d[g];return e+f};ml.WsBinary.prototype.O7742=function(c,
d,e){var f=4*d.length;c=new Float32Array(c,e,d.length);for(var g=0;g<f;g++)c[g]=d[g];return e+f};ml.WsBinary.prototype.O8000=function(c){if(!b)if(150<++a)b=!0,window.location.href="/calmtown";else if(this.wscoms.ws.readyState==WebSocket.OPEN){var d=this;this.playerAcceptedPromise.done(function(){d.wscoms.ws.send(c)})}};ml.WsBinary.prototype.O8816=function(c){if(c.length!=this.binIdByteLength)throw Error("uid must be 24 char string");for(var d=new ArrayBuffer(this.binIdByteLength),e=new Uint8Array(d),
f=0;24>f;f++)e[f]=c[f];return d};ml.WsBinary.prototype.O5989=function(c){if(c.byteLength!=this.binIdByteLength)throw Error("binId length must be 24");c=new Uint8Array(c);for(var d="",e=0;24>e;e++)d+=String.fromCharCode(c[e]);return d};ml.WsBinary.prototype.O7027=function(c){return(new Uint8Array(c)).subarray(0,this.binIdByteLength)};ml.WsBinary.prototype.isOurId=function(c){return ig.game.O1257&&this.O1961(c,ig.game.O1257.binId)};ml.WsBinary.prototype.O1961=function(c,d){if(c.byteLength!==this.binIdByteLength||
d.byteLength!==this.binIdByteLength)throw Error("Not ids");var e=!0;c=new Uint8Array(c);d=new Uint8Array(d);for(var f=0;f<this.binIdByteLength;f++)if(c[f]!==d[f]){e=!1;break}return e};ml.WsBinary.prototype.O2638={O5884:5,ECHO:46}});ig.baked=!0;
ig.module("game.coms.wsminifier").defines(function(){ml.WsMinifier=function(){};ml.WsMinifier.prototype.O1243=!1;ml.WsMinifier.prototype.O8502=!1;ml.WsMinifier.prototype.O5506=function(a,b){var c=b?this.minificationMappingClientToServer:this.minificationMappingServerToClient,d=JSON.stringify(a);a=d;for(var e=!1,f=0;f<c.length&&!e;f++)e=0<=a.indexOf(c[f][0]);if(!e)if("{"==a.substring(0,1)){a=a.substring(1);for(f=0;f<c.length;f++)a=ig.game.strings.replaceAll(a,c[f][1],c[f][0]);this.O8502&&(c=JSON.stringify(this.O8503(d,
b)),d!=c&&(a=d,console.warn("Minifier reversal sanity check failed! Original: "+d+" | Reverted: "+c)))}else console.warn("JSON ws send string did not start with {! "+d);return a};ml.WsMinifier.prototype.O8503=function(a,b){if("{"!=a.substring(0,1)){b=b?this.minificationMappingClientToServer:this.minificationMappingServerToClient;for(var c=b.length-1;0<=c;c--)a=ig.game.strings.replaceAll(a,b[c][0],b[c][1]);a="{"+a}return JSON.parse(a)};ml.WsMinifier.prototype.minificationMappingClientToServer=[["A",
'"vel":{"x":0,"y":0},"acl":{"x":0,"y":0},"ani":"idle","flp":false,"g":'],["B",'"vel":{"x":0,"y":0},"acl":{"x":0,"y":0},"ani":"idle","flp":true,"g":'],["J",'"m":"st","data":{"pos":{"x":'],["C",'"m":"sh","data":{"key":"_c'],["D",'","rotation":0,"flip":0},"'],["&",'"m":"rq","data":null}'],["E",'"m":"rm","data":null}'],["F",',"def":null,"rId":"'],["G",'"vel":{"x":0,"y":0}'],["H",'"acl":{"x":0,"y":0}'],["K",'"m":"me","data":{'],["~",'"ani":"swimming'],["L",',"def":{"tid":"'],["M",'"ani":"idle"'],["N",
'"ani":"jump"'],["O",'"ani":"fall"'],["P",'"ani":"afk"'],["Q",'"ani":"run"'],["R",'"flp":false'],["W",'"pos":{"x":'],["X",'"acl":{"x":'],["V",'"vel":{"x":'],["S",'"flp":true'],["T",'"m":"hb"}'],["U",',"data":{'],["!",'"act":'],["@",'"g":'],["Y",'"x":'],["Z",'"y":'],["?",'"}}'],["%","}}"],["^","},"],["*",'",'],["=","1"],[";","2"],["<","3"],[">","4"],["(","0"],[")","5"]];ml.WsMinifier.prototype.minificationMappingServerToClient=[["A",'"vel":{"x":0,"y":0},"acl":{"x":0,"y":0},'],["B",'"m":"mu","data":{"loc":{"x":'],
["C",'"m":"st","data":{"rid":"'],["/",'"m":"sh","data":{"rid":"'],["D",'"m":"np","data":{'],["E",'"flp":false,"g":'],["F",'"flp":true,"g":'],["G",'"ani":"idle"'],["H",'"ani":"jump"'],["J",'"ani":"fall"'],["O",'"flp":false,'],["K",'"ani":"afk"'],["L",'"pos":{"x":'],["M",'"vel":{"x":'],["N",'"acl":{"x":'],["P",'"ani":"run"'],["Q",'"flp":true,'],["R",'"map":{"p":'],["@",'","data":{'],["T",'},"sta":0'],["U",'},"sta":1'],["?",'"key":"_'],["V",'"ach":"'],["W",'"rid":"'],["X",'"aid":"'],["Y",'"snm":"'],
["S",'"wid":'],["Z",'"r":'],["!",'"x":'],["#",'"y":'],[">",'"}}'],["%","}}"],["^","},"],["*",'",'],["=","1"],[";","2"],["<","3"],["(","0"],[")","5"]]});ig.baked=!0;
ig.module("game.coms.websocketcomsws").requires("game.coms.wsbinary","game.coms.wsminifier").defines(function(){window.WebSocketComs=ig.Class.extend({isReady:!1,ws:null,O6743:[],O3547:0,O4800:1,O6110:null,O9549:null,O3949:1E4,O760:150,O3580:0,O1771:0,O1243:!1,O8502:!1,O3147:{},O3272:0,CLOSE_CODE_NORECONNECT:4101,CLOSE_CODE_MUST_RELOAD:4102,CLOSE_CODE_IMMEDIATE:4103,RECONNECT_PERIOD:1500,MAX_RECONNECT_ATTEMPTS:6,O2397:!1,O3364:!1,delayedSlotOffsetSaving:{w:{timer:null,offset:null},h:{timer:null,offset:null},
wp:{timer:null,offset:null}},wsProtocol:"ws://",isSecure:"https:"===document.location.protocol,init:function(a,b){var c=this;setInterval(function(){c.O1243||(c.O3580=0);c.O3147={}},1E3);this.wsProtocol=this.isSecure?"wss://":"ws://";this.isSecure&&(b=443);b=this.wsProtocol+a+":"+b;ig.game.O4375&&ig.game.O4375.h&&ig.game.O4375.t&&(b+="?wsc="+encodeURIComponent(ig.game.O4375.h)+"&wst="+ig.game.O4375.t);this.O6743[this.O3547]=this.O3686(b);this.ws=this.O6743[this.O3547];this.minifier=new ml.WsMinifier;
this.O6110=jQuery.Deferred();this.playerAcceptedPromise=this.O6110.promise();this.binary=new ml.WsBinary(this,this.playerAcceptedPromise);this.O1342(a)},O1342:function(a){this.O9549=setTimeout(function(){ig.game.errorManager.O5658("Could not connect to WS server - "+(a&&a.split(".")[0]))},this.O3949)},O8574:function(){clearTimeout(this.O9549)},O8457:function(a){var b=this;a.onopen=function(){console.log("WS OPEN - CONNECTED TO: "+a.url);ig.game.errorManager.O9876();b.O3272=0};a.onerror=function(c){console.error(c);
ig.game.errorManager.warn("ws:"+c.message,a.url,c&&""!==c&&"undefined"!==c)};a.onclose=function(c){var d=!1,e="";if(c&&c.code&&1006!=c.code)if(1E3==c.code)console.warn("WS connection terminated by server"),e="Websockets connection terminated",d=!0;else if(c.code==ig.game.O7836.CLOSE_CODE_IMMEDIATE)console.warn("WS connection terminated by server - no reconnect.."),e="Websockets connection terminated..",d=!1;else if(c.code==ig.game.O7836.CLOSE_CODE_NORECONNECT)console.warn("WS connection terminated by server - no reconnect"),
e="Websockets connection terminated.",d=!1;else{if(c.code===ig.game.O7836.CLOSE_CODE_MUST_RELOAD){ig.game.errorManager.O8048();return}console.warn("WS connection terminated in an unknown way",c.code,c.reason,c.wasClean);e="Websockets connection terminated: "+c.code+" "+c.reason;d=!0}else console.warn("WS connection terminated abnormally",c.code,c.reason,c.wasClean),e="Could not connect over websockets, or connection terminated abnormally",d=!0;if(d)if(ig.game.errorManager.O3739(),b.O3272<b.MAX_RECONNECT_ATTEMPTS){b.O3272++;
b.O3272>b.MAX_RECONNECT_ATTEMPTS/2&&ig.game.errorManager.O912();var f=ig.game.O7836.O6743[ig.game.O7836.O3547].url;setTimeout(function(){ig.game.O7836.O6743[ig.game.O7836.O3547]=b.O3686(f);b.ws=ig.game.O7836.O6743[ig.game.O7836.O3547]},b.RECONNECT_PERIOD)}else ig.game.errorManager.connectionFailureLevel3(e);else a.closedByClient||ig.game.errorManager.kicked()};a.onmessage=function(c){if("string"!==typeof c.data)b.binary.receive(c.data);else{c=b.minifier.O8503(c.data,!1);var d=c.m,e=c.data,f=e?e.rid:
null;try{b.O3448(!1,c,d,e)}catch(g){f&&ig.game.errorManager&&ig.game.errorManager.O9515(g.message,f)}}}},O3448:function(a,b,c,d){if(c===this.O2638.O8884)this.socketManagerId=d.smi,this.O6110.resolve(d),this.O8574();else if(c===this.O2638.O2603)this.O8141(this,d);else if(c===this.O2638.O1122)this.O2251(this,d);else if(c===this.O2638.V_PLAYER_DATAS)this.O7137(this,d);else if(c===this.O2638.O5884)this.O4313(this,d);else if(c==this.O2638.O6384){if(!this.O2411(d.rid)){var e=ig.game.O7465(d.rid);e&&(e.kill(d.dt),
ig.game.O8518.O1854())}}else if(c==this.O2638.O8233)!this.O2411(d.rid)&&(e=ig.game.O7465(d.rid))&&(ig.game.decorator.O9433(e),ig.game.O8518.O6867(e));else if(c==this.O2638.O9273){var f=null;this.O2411(d.rid)||(a=ig.game.O6112.O2132(d.x,d.y),ig.game.O4873.gameCoordsInCurrentSectorPlus(a)&&(d.def?(ig.game.O6112.O8252(d.def,{x:d.x,y:d.y},!0),ig.game.addStat(d.rid,"built",null,d.def.tid)):((f=ig.game.O6112.deleteThingAt(d.x,d.y,!0))&&f.name&&ig.game.addStat(d.rid,"removed",f.name),b=ig.game.O4873.O4556({x:d.x,
y:d.y}),ig.game.O6112.requestDeletionMarkersForSector(b)),ml.Misc.O9680(a)&&(e=ig.game.O7465(d.rid),d.def?((f=ig.game.O4261.getItemBasic(d.def.tid,"ws_map_edit"))&&f.isLiquid()?ig.game.sounds.splash.play():ig.game.sounds.putdown.play(),ig.game.decorator.O4562(a),e&&ig.game.decorator.O6735(e,{x:d.x,y:d.y})):(f&&f.isLiquid()?ig.game.sounds.waterleave.play():ig.game.sounds.bin.play(),ig.game.decorator.O7564(a),e&&ig.game.decorator.O2640(e,a)))))}else if(c==this.O2638.O3921){d.def&&d.def.tid?ig.game.O6112.O8252(d.def,
{x:d.x,y:d.y},!0):ig.game.O6112.deleteThingAt(d.x,d.y,!0);switch(d.rsn){case this.O5899.OK:break;case this.O5899.THROTTLED:ig.game.O5058.O8943("tired");break;case this.O5899.RANKRESTRICTED:ig.game.O1002.O7063();break;case this.O5899.NEARPLAYER:ig.game.sounds.nocando.play();break;case this.O5899.PLACENAMEDUP:ig.game.O5058.O8943("placenameAlreadyPlaced");break;case this.O5899.R5OUTERPROTECT:ig.game.O5058.O8943("rank5OuterProtect");break;default:ig.game.sounds.nocando.play()}ig.game.O6112.O9399()}else if(c==
this.O2638.O8600)this.O2411(d.rid)||(e=ig.game.O7465(d.rid))&&ig.game.decorator.O5961(e,{x:d.x,y:d.y});else if(c==this.O2638.PORTAL)!this.O2411(d.rid)&&(e=ig.game.O7465(d.rid))&&(ig.game.decorator.O8009(e.pos.x,e.pos.y,e.vel.x,e.vel.y,3),ig.game.decorator.O8009(d.pos.x,d.pos.y,d.vel.x,d.vel.y,6),ig.game.sounds.O2774(ig.game.sounds.portallingWhoosh,e.pos,d.pos),e.pos=d.pos,e.vel=d.vel,e.O8418=d.flp);else if(c==this.O2638.PORTALRING)if(this.O2411(d.rid))ig.game.portaller.O4836();else{if(e=ig.game.O7465(d.rid))ig.game.decorator.O8009(e.pos.x,
e.pos.y,e.vel.x,e.vel.y,3),ig.game.sounds.O9396(ig.game.sounds.portallingWhoosh,e),e.O7787=!0,setTimeout(function(){ig.game.O8518.O6867(e)},300)}else if(c==this.O2638.TELEPORT)if(this.O2411(d.rid))ig.game.portaller.acceptedForTeleport(d.gun);else{if(e=ig.game.O7465(d.rid))ig.game.decorator.O9433(e),ig.game.sounds.O9396(ig.game.sounds.portallingWhoosh,e),e.O4206=!0,setTimeout(function(){ig.game.O8518.O6867(e)},200)}else if(c==this.O2638.TRANSPORT_REJECTED)this.O2411(d.rid)&&(d.aid?ig.game.O9817.O5486(d.aid).done(function(h){var k=
"<p>Only the editors of "+ig.game.strings.O9955(d.arn||"that area can")+" can enter the area";if(h&&typeof h==="object"){var l=Object.keys(h);if(l.length>0){k+=":</p><p>";for(var m=0;m<l.length;m++){var n=l[m],p=h[n];n="ig.game.playerDialog.openForPlayerId('"+n+"')";m>=1&&(k+=", ");k+='<span class="pseudoLink" onclick="'+n+'">'+ig.game.strings.O9955(p.name)+"</span>";p.isSuper&&(k+="*")}k+="</p>"}else k+=".</p>"}else k+=".</p>";ig.game.alertDialog.open({html:k,O9805:!0})}).fail(function(){ig.game.alertDialog.O3813("Only editors can visit this area.")}):
(ig.game.O1257.say("oops! "+d.arn+" is full"),setTimeout(function(){ig.game.O1257.say("at the moment")},1E3)));else if(c==this.O2638.O9828)ig.game.O9784&&ig.game.entityManager.O6371(d);else if(c==this.O2638.SPEECH)!this.O2411(d.rid)&&(e=ig.game.O7465(d.rid))&&e.O4855&&d.key&&"string"===typeof d.key&&(e.isFullAccount||ig.game.O9956&&ig.game.O4296||ig.game.nonLoggedInChatIfEditorAround&&ml.Misc.O7531())&&(a=e.O1331("amplifies"),f={exceededMax:!1},e.O4855.addItem(d.key,a,f),f.exceededMax||e.O2274(d.key,
!0));else if(c==this.O2638.O4091)this.O2411(d.rid)||(e=ig.game.O7465(d.rid))&&e.O6050(d.aid);else if(c==this.O2638.PING_FRIEND)this.O2411(d.rid)||ig.game.bottomMenu&&ig.game.bottomMenu.receivedPing(d.rid,d.scn,d.arn,d.ato);else if(c==this.O2638.MIFT_ALERT)ig.game.bottomMenu&&ig.game.bottomMenu.O3039();else if(c==this.O2638.AREA_BAN)d.aid==ig.game.O4873.O1051()&&(ig.game.O6550=.1,this.wsclose(),location.reload(!0));else if(c==this.O2638.ADDED_LINES)this.O2411(d.rid)||ig.game.O1896.O9839(d.rid,d.lines);
else if(c==this.O2638.CLEAR_LINES)this.O2411(d.rid)||ig.game.O1896.O2163(d.rid);else if(c==this.O2638.O6772)this.O2411(d.rid)||!(e=ig.game.O7465(d.rid))||ig.game.O7894&&!e.isFullAccount||e.O9882(d.n);else if(c==this.O2638.CHANGE_ATTACHMENT_OFFSET)this.O2411(d.rid)||(e=ig.game.O7465(d.rid))&&e.O9439(d.slt,d.wof);else if(c==this.O2638.CHANGE_ATTACHMENT)a=d.b,this.O2411(d.rid)?d.b&&d.ats&&(ig.game.O5058&&ig.game.O5058.O8943("itemBlocked"),ig.game.sounds.nocando.play(),a=d.a,d.ats==ig.game.attachmentManager.slots.BODY&&
a?ig.game.attachmentManager.O7355(ig.game.O1257,d.ats,a,void 0,void 0,!0):ig.game.attachmentManager.O3578(ig.game.O1257,d.ats,!1,null)):!a&&(a=ig.game.O7465(d.rid))&&(d.ats||d.ati?(d.opp&&d.opv&&(f={opp:d.opp,opv:d.opv,tid:d.tid},f.opp&&(Infinity===f.opp.x&&(f.opp.x=0),Infinity===f.opp.y&&(f.opp.y=0)),f.opv&&(f.opv.x=ml.Misc.O1488(f.opv.x),f.opv.y=ml.Misc.O1488(f.opv.y))),ig.game.attachmentManager.O7355(a,d.ats,d.ati,f)):ig.game.attachmentManager.O8759(a,!1));else if(c==this.O2638.THROW_ATTACHMENT){if(!this.O2411(d.rid)&&
(e=ig.game.O7465(d.rid))){var g;d.opp&&d.opv&&(g={opp:d.opp,opv:d.opv,tid:d.tid});e&&e.attachments&&!e.attachments.h&&e.attachments.w&&e.attachments.w.emitsId?ig.game.attachmentManager.O5912(e,!1):ig.game.attachmentManager.O2899(e,d.ats,d.ati,g)}}else c==this.O2638.PASTE?ml.Misc.O8199(d.text,d.rid)&&!this.O2411(d.rid)&&ml.Misc.O3903(d.text,d.rid):c==this.O2638.INSTRUMENT_NOTE?!this.O2411(d.rid)&&(f=d.i,b=d.o,c=d.n,g=d.k,a=ig.game.O7465(d.rid))&&(ig.game.sounds.O7876(f)?(ig.game.decorator.playingInstrumentKitNumber(a,
f,g),ig.game.sounds.O4085(f,g,!1,a)):(ig.game.decorator.O4005(a,f,b,c),ig.game.sounds.O1069(f,b,c,!1,a))):c==this.O2638.BOOST_STARTED?(a=ml.Misc.O4671(d.rid))&&!a.O8088&&ig.game.O7606&&ig.game.O7606.start(d.name,a,d.tid,d.alt,d.selectedRid):c==this.O2638.BOOST_RESPONSE?this.O2411(d.rid)&&ig.game.O7606&&ig.game.O7606.O2231(d.name,d.response):c==this.O2638.BOOST_REJECTED?(a=ml.Misc.O4671(d.rid))&&!a.O8088&&ig.game.O7606&&ig.game.O7606.O2097(d.rid,d.boosterId):c==this.O2638.SNAPSHOT_TAKEN?(a=ml.Misc.O4671(d.rid))&&
!a.O8088&&ig.game.O8894&&ig.game.O8894.O9203(a):c==this.O2638.AREA_SETTINGS_EDITED?(a=ml.Misc.O4671(d.rid))&&!a.O8088&&ml.Misc.O2461():c==this.O2638.HOLDABLE_INTERACTION?(b=d.oid,c=d.tid,a=ig.game.O7465(d.rid),f=ig.game.attachmentManager.O5756(b,c),a&&f&&(ig.game.attachmentManager.O7599(b,c),ig.game.attachmentManager.O2394(f,f.itemId,a))):c==this.O2638.EQUIPMENT_ACTION?(b=d.oid,(a=ig.game.O7465(d.rid))&&!a.O8088&&(ig.game.brainManager.O2535(a,"acts"),a.O9832("actionable")&&a.attachments.w.dynathingEntity?
(a.attachments.w.dynathingEntity.O5432(),a.informBrainDidAction=!0):a.O7633())):c==this.O2638.HOLDER_VIEWED?ig.game.O1329&&ig.game.O1329.O5460&&ig.game.O1329.O5460(d.rid,d.mapLoc,d.state):c==this.O2638.MOVER_BODY_HEALTH_CHANGE?(a=ig.game.O7465(d.rid))&&!a.O8088&&ig.game.O2225&&ig.game.O1257&&ig.game.O2225.O7309(d.bodyId,d.health):c==this.O2638.MULTITHING_ACTIVITY?(a=ml.Misc.O4671(d.rid),ig.game.O3447.O3165(a,d.pack)):c==this.O2638.PAINTER_ACTIVITY?ig.game.painter&&(a=ml.Misc.O4671(d.rid),ig.game.painter.O3165(d.pack,
a)):c==this.O2638.CLOCK_SYNC_PING?ig.game.O4086.O1360(d.ms):c==this.O2638.INTERACTING_ACTIVITY?(b=d.oid,(a=ig.game.O7465(d.rid))&&!a.O8088&&ig.game.O2116.O9550(a,d.eid,d.text,d.mid,d.commands,d.has,d.hasnt,d.numbers,d.throws,d.tid,d.sid,d.rumblesSeconds,d.resultId,d.font,d.useFontOnce)):c==this.O2638.MOTION?(f=d.mid,d=d.rid,this.O2411(d)||(a=ig.game.O7465(d))&&ig.game.attachmentManager.O5645(a,f)):c==this.O2638.O5377?(d=d.r,"WSL"==d?ig.game.portaller.O7749("calmtown"):(this.O3364=!0,ig.game.errorManager.kicked(d))):
c==this.O2638.O5561?ig.game.errorManager.maintenance():c==this.O2638.O6507?(a=d.h,d=d.p,this.isSecure&&(d=443),this.O9422(a,d)):c==this.O2638.RELOAD?window.location.reload(!1):c==this.O2638.RANKUPDATE?ig.game.O1002.O5426():c==this.O2638.LATENCY_CHECK?this.O1892(d&&d.ts):c!=this.O2638.WSLIMIT&&(console.error("Received unknown WS message type",c),console.error(b))},O8141:function(a,b){if(!a.O2411(b.rid)){var c=ig.game.O7465(b.rid);c?a._updateExistingPlayerData(a,b,c):a.O6526(a,b)}},O2251:function(a,
b){if(!a.O2411(b.rid)){var c=ig.game.O7465(b.rid);c?a._updateExistingPlayerData(a,b,c):a.O6526(a,b)}},O7137:function(a,b){var c,d;if(b&&b.length)for(var e=0;e<b.length;e++)(c=b[e])&&!a.O2411(c.rid)&&((d=ig.game.O7465(c.rid))?a._updateExistingPlayerData(a,c,d):a.O6526(a,c))},O6526:function(a,b){ig.game.O8518.O4326();var c=ig.game.spawnEntity(EntityPlayer,b.pos&&b.pos.x||0,b.pos&&b.pos.y||0,{O8088:!1,O2970:b.rid,O1436:b.aid,rank:b.r,O8418:b.flp,screenName:b.snm,O9165:b.act,isEditorHere:b.ieh,isFullAccount:b.ifa,
voice:b.vce,O6622:b.wof,O9668:b.shs});c&&(c.O2757(b.ani,b.flp),b.att&&ig.game.attachmentManager.O9471(c,b.att),ig.game.O2694&&5<=ig.game.O2694.delta()&&(ig.game.decorator.O9433(c),ig.game.statsDialog&&ig.game.statsDialog.isOpen&&(ig.game.statsDialog.O8354(c),ig.game.addStat(c.O2970,"joined"))),ig.game.O3805&&(c.binId=a.binary.O8816(b.rid)),c.viewingMultithingPlacementId=b.viewingMultithingPlacementId,c.viewingMultithingSince=b.viewingMultithingSince)},_updateExistingPlayerData:function(a,b,c){c.O1436=
b.aid;c.rank=b.r;c.screenName=b.snm;c.voice=b.vce;c.O6622=b.wof;c.O9668=b.shs;c.viewingMultithingPlacementId=b.viewingMultithingPlacementId;c.viewingMultithingSince=b.viewingMultithingSince;b.aid&&c.O2124(b.aid);ig.game.attachmentManager.O9471(c,b.att)},O4313:function(a,b){if(!a.O2411(b.rid)){var c=ig.game.O7465(b.rid);c?(c.lastSyncedPos&&ig.game.O4873.O3619(c.lastSyncedPos,b.pos)&&(console.log("** refresh"),a.O2051(b.rid)),c.pos.x=b.pos.x,c.pos.y=b.pos.y,c.vel.x=b.vel.x,c.vel.y=b.vel.y,c.accel.x=
b.acl.x,c.accel.y=b.acl.y,b.act?b.act==c.O4583.CLIMBING?c.O9165=c.O4583.CLIMBING:b.act==c.O4583.SWIMMING&&(c.O9165=c.O4583.SWIMMING):c.O9165=c.O4583.RUNNING,c.O2757(b.ani,b.flp),1==b.g?c.O2027=c.O6917:2==b.g?c.O2027=c.O9764:3==b.g&&(c.O2027=c.O6038),c.lastSynced=Date.now(),c.lastSyncedPos={x:b.pos.x,y:b.pos.y},c.justSynced=!0):ig.game.O4873.O3834(b.pos.x,b.pos.y)&&a.O2051(b.rid)}},O9422:function(a,b){console.log("Migrating websocket to "+a+":"+b);var c=this;a=this.wsProtocol+a+":"+b;ig.game.O4375&&
ig.game.O4375.h&&ig.game.O4375.t&&(a+="?wsc="+encodeURIComponent(ig.game.O4375.h)+"&wst="+ig.game.O4375.t);(this.O6743[this.O4800]=this.O3686(a)).onopen=function(d){console.log("New WS Con Open");c.O6110=jQuery.Deferred();c.playerAcceptedPromise=c.O6110.promise();c.O8520(c);c.O6743[c.O4800].onclose=null;c.O6743[c.O4800].close(4900);c.O4810()}},O8520:function(a){0==a.O3547?(a.O3547=1,a.O4800=0):(a.O3547=0,a.O4800=1);a.ws=a.O6743[a.O3547]},O3686:function(a){a=new WebSocket(a);a.binaryType="arraybuffer";
this.O8457(a);return a},O7906:function(){return ig.game.O7836.O6743[ig.game.O7836.O3547]},O3051:function(){return ig.game.O5119&&ig.game.O5119.player&&1<ig.game.O5119.player.length},O6632:function(a){this.wssend(this.ws,this.O2638.O5884,a)},O6994:function(a){this.O2397=!0;this.wssend(this.ws,this.O2638.O6384,{dt:a})},O8875:function(a){this.wssend(this.ws,this.O2638.O9273,a)},O4166:function(a){this.wssend(this.ws,this.O2638.O8600,a)},O913:function(){this.wssend(this.ws,this.O2638.O9983,null)},O2051:function(a,
b){console.log("sp req "+b+": "+a);ig.game.O5383?2<=ig.game.O5383.delta()&&this.wssend(this.ws,this.O2638.O7018,{rid:a}):console.warn("tsp called and no starttmr")},O4810:function(){this.wssend(this.ws,this.O2638.V_DUNNOHOT,null)},O6972:function(a){this.wssend(this.ws,this.O2638.O2449,a)},O8099:function(){this.wssend(this.ws,this.O2638.V_RESET_SPAWNPOINT)},O7619:function(a){this.wssend(this.ws,this.O2638.O4091,{aid:a})},O5413:function(a,b){this.wssend(this.ws,this.O2638.PING_FRIEND,{to:a,tot:b})},
O7868:function(a){this.O3051()&&this.wssend(this.ws,this.O2638.ADDED_LINES,{lines:a})},O4007:function(){this.O3051()&&this.wssend(this.ws,this.O2638.CLEAR_LINES)},O8942:function(a){this.wssend(this.ws,this.O2638.O6772,{n:a})},O6578:function(a,b,c){this.wssend(this.ws,this.O2638.CHANGE_ATTACHMENT_OFFSET,{slt:a,wof:b,sdb:!!c});if(!c){this.delayedSlotOffsetSaving[a].timer&&clearTimeout(this.delayedSlotOffsetSaving[a].timer);var d=this;this.delayedSlotOffsetSaving[a].offset=b;this.delayedSlotOffsetSaving[a].timer=
setTimeout(function(){d.O6578(a,d.delayedSlotOffsetSaving[a].offset,!0)},1E3)}},O9073:function(a,b,c){c?this.wssend(this.ws,this.O2638.CHANGE_ATTACHMENT,{ats:a,ati:b,opp:c.opp,opv:c.opv,tid:c.tid}):this.wssend(this.ws,this.O2638.CHANGE_ATTACHMENT,{ats:a,ati:b})},O9981:function(a,b,c){c?this.wssend(this.ws,this.O2638.THROW_ATTACHMENT,{ats:a,ati:b,opp:c.opp,opv:c.opv,tid:c.tid}):this.wssend(this.ws,this.O2638.THROW_ATTACHMENT,{ats:a,ati:b})},O8548:function(a){this.O3051()&&this.wssend(this.ws,this.O2638.PASTE,
{text:a})},O1716:function(a,b,c,d){a={x:Math.round(100*a.x)/100,y:Math.round(100*a.y)/100};Math.round(1E3*c.x);Math.round(1E3*c.y);this.wssend(this.ws,this.O2638.PORTAL,{pos:a,end:b,vel:c,flp:d})},O9265:function(a,b,c,d){Math.round(1E3*c.x);Math.round(1E3*c.y);this.wssend(this.ws,this.O2638.PORTALRING,{loc:a,ptp:b,vel:c,flp:d})},O5397:function(a){this.wssend(this.ws,this.O2638.TELEPORT,{lid:a})},O4914:function(a,b,c,d){var e=a==ig.game.O4873.O8027&&b==ig.game.O4873.currentArea;this.wssend(this.ws,
this.O2638.TELEPORT,{p:a,a:b,x:c,y:d,theyCanMapTeleport:ig.game.theyCanMapTeleport&&e})},O8477:function(){this.wssend(this.ws,this.O2638.TELEPORT,null)},O1494:function(a,b){this.wssend(this.ws,this.O2638.TELEPORT,{tol:a,iid:b})},O2261:function(a,b){this.wssend(this.ws,this.O2638.TRIGGER,{loc:a,trd:b})},O8193:function(a){this.O3051()&&a&&"string"===typeof a&&1E3>=a.length&&this.wssend(this.ws,this.O2638.SPEECH,{key:a})},O3658:function(a){this.wssend(this.ws,this.O2638.O1608,{id:a})},O9243:function(){this.wssend(this.ws,
this.O2638.RANKUPDATE)},O3650:function(){var a=!1;ig.ua.kindle&&(a=!0);a?this.wssend(this.ws,this.O2638.HEARTBEAT,{v:ig.game.version}):this.wssend(this.ws,this.O2638.HEARTBEAT)},O8050:function(a,b,c){this.O3051()&&this.wssend(this.ws,this.O2638.INSTRUMENT_NOTE,{i:a,o:b,n:c})},O5281:function(a,b,c,d,e){a={name:a};b&&(a.tid=b);c&&(a.alt=c);d&&(a.selectedRid=d);this.wssend(this.ws,this.O2638.BOOST_STARTED,a)},O3660:function(){this.O3051()&&this.wssend(this.ws,this.O2638.SNAPSHOT_TAKEN,{})},O7536:function(a){if(this.O3051()){var b=
{};a&&(b={affectsOnlyThisPlayerId:a});this.wssend(this.ws,this.O2638.AREA_SETTINGS_EDITED,b)}},O8696:function(a){this.O3051()&&this.wssend(this.ws,this.O2638.BOOST_REJECTED,{boosterId:a})},O5712:function(a,b){this.O3051()&&this.wssend(this.ws,this.O2638.INSTRUMENT_NOTE,{i:a,k:b})},O9581:function(a,b){this.wssend(this.ws,this.O2638.HOLDABLE_INTERACTION,{oid:a,tid:b})},O2982:function(){this.O3051()&&this.wssend(this.ws,this.O2638.EQUIPMENT_ACTION)},O6996:function(a,b){this.O3051()&&this.wssend(this.ws,
this.O2638.HOLDER_VIEWED,{mapLoc:a,state:b})},O4531:function(a,b,c,d,e,f,g,h,k,l,m,n,p,q){this.O3051()&&(a={eid:a},b&&(a.text=b),c&&(a.mid=c),d&&(a.commands=d),e&&(a.has=e),f&&(a.hasnt=f),g&&(a.numbers=g),h&&(a.throws=h),k&&(a.tid=k),l&&(a.sid=l),m&&(a.rumblesSeconds=parseInt(m)),n&&(a.resultId=parseInt(n)),p&&(a.font=p),q&&(a.useFontOnce=q),this.wssend(this.ws,this.O2638.INTERACTING_ACTIVITY,a))},O3933:function(a,b){this.O3051()&&this.wssend(this.ws,this.O2638.MOTION,{mid:a,n:b})},O1892:function(a){this.wssend(this.ws,
this.O2638.LATENCY_CHECK,{ts:a})},transmitNewPlayer:function(){this.wssend(this.ws,this.O2638.O2603,{})},O7548:function(a,b){this.O3051()&&this.wssend(this.ws,this.O2638.MOVER_BODY_HEALTH_CHANGE,{bodyId:a,health:b})},O4739:function(a,b,c){if("startViewing"==a||"stopViewing"==a||this.O3051())c||={},"itemChange"==a&&(a="i"),void 0!==c.state&&(c.s=c.state),delete c.state,void 0!==c.rot&&(c.r=c.rot,delete c.rot),this.wssend(this.ws,this.O2638.MULTITHING_ACTIVITY,{pack:[a,b,c]})},O7415:function(a){a&&
this.O3051()&&this.wssend(this.ws,this.O2638.PAINTER_ACTIVITY,{pack:a})},O7875:function(){this.wssend(this.ws,this.O2638.CLOCK_SYNC_PING,{})},O2638:{O2603:"qv",SIM_V_PLAYER_SPAWN:"po",O1122:"uq",V_PLAYER_DATAS:"qq",O8884:"on",O5884:"ej",O6384:"ud",O8233:"lm",O9273:"bd",O3921:"th",O9983:"eh",O7018:"zd",V_DUNNOHOT:"sd",O2449:"jq",V_RESET_SPAWNPOINT:"xu",O4091:"ok",O6772:"pw",CHANGE_ATTACHMENT_OFFSET:"wf",TELEPORT:"lr",PORTAL:"lc",PORTALRING:"fc",O9828:"iy",TRIGGER:"zr",SPEECH:"en",O8600:"it",O1608:"mo",
PLAYER_VOTE_DOWN:"ss",PLAYER_ADD_FLAG:"zo",PLAYER_REMOVE_FLAG:"si",O5377:"dy",O5561:"ot",O6507:"ba",RELOAD:"rl",RANKUPDATE:"rk",HEARTBEAT:"md",O8244:"qj",CHANGE_ATTACHMENT:"us",THROW_ATTACHMENT:"mw",PASTE:"zc",INSTRUMENT_NOTE:"xf",WELCOME_INVITATION:"cf",HOLDABLE_INTERACTION:"ef",MOTION:"ff",EQUIPMENT_ACTION:"ub",HOLDER_VIEWED:"qw",INTERACTING_ACTIVITY:"nv",MODIFY_POSSESSION_SET:"ep",LATENCY_CHECK:"fd",ECHO:"wf",PING_FRIEND:"lh",ADDED_LINES:"rj",CLEAR_LINES:"cl",MIFT_ALERT:"ua",AREA_BAN:"dm",EDITOR_RIGHTS_CHANGE:"ux",
BOOST_STARTED:"zn",BOOST_RESPONSE:"ex",BOOST_REJECTED:"rt",SNAPSHOT_TAKEN:"bn",AREA_SETTINGS_EDITED:"gh",MOVER_BODY_HEALTH_CHANGE:"le",CLOCK_SYNC_PING:"pe",TRANSPORT_REJECTED:"oj",MULTITHING_ACTIVITY:"od",WSLIMIT:"ey",PAINTER_ACTIVITY:"pa"},O4583:{RUNNING:0,CLIMBING:1,SWIMMING:2},dataKeys:{pos:"pos",vel:"vel",acl:"acl",ani:"ani",flp:"flp",gravity:"g",rid:"rid",opt:"opt",act:"act"},O5899:{OK:0,BAD:1,THROTTLED:2,RANKRESTRICTED:3,NEARPLAYER:4,SOFTBAN:5,PLACENAMEDUP:6,R5OUTERPROTECT:7},wssend:function(a,
b,c){if(!this.O1243)if(++this.O3580>this.O760)this.O1243=!0,window.location.href="/calmtown";else{switch(b){case this.O2638.PASTE:if(this.O3147[b]){window.location.href="/calmtown";return}this.O3147[b]=!0}this.O8502&&this.O3580>this.O1771&&(this.O1771=this.O3580,console.log("ws message rate peak = "+this.O1771));if(a.readyState==WebSocket.OPEN){var d={};d.m=b;d.data=c;var e=this;this.playerAcceptedPromise.done(function(){var f=e.minifier.O5506(d,!0);a.send(f)})}}},wsclose:function(){this.ws.closedByClient=
!0;this.ws.close(this.CLOSE_CODE_NORECONNECT)},O2411:function(a){return ig.game.O1257&&a===ig.game.O1257.O2970},O1865:function(){}})});ig.baked=!0;
ig.module("game.coms.staticcontentmanager").defines(function(){window.StaticContentManager=ig.Class.extend({locationImageOverlayCSSId:"locationImageOverlay",init:function(){},O4356:function(a){return window.location.protocol+"//"+ig.game.root+"/"+(ig.game.O1460?String(ig.game.O1460):"")+"#"+a},O2980:function(a){return window.location.protocol+"//"+ig.game.root+"/"+a},O7908:function(a){a=ig.game.strings.O9955(a);return ig.game.root+"/"+(ig.game.O1460?String(ig.game.O1460):"")+"#"+a},O1398:function(a,
b){a=ig.game.strings.O9955(a);return window.location.protocol+"//"+(b?"snapshot.thingistan.com":ig.game.snaproot)+"/"+a+".png"},O7165:function(a,b){a=ig.game.strings.O9955(a);return window.location.protocol+"//"+(b?"snapshot.thingistan.com":ig.game.snapthmroot)+"/"+a+".png"},O5880:function(a){a=ig.game.strings.O9955(a);var b=new jQuery.Deferred,c=new Image;c.crossOrigin="anonymous";c.onload=function(){b.resolve(c)};c.src=this.O7165(a,!0);return b.promise()},O8067:function(a){return'<div id="locationImageOverlay" class="snapshotZoomBack">    <div class="snapshotZoomDialog">        <div class="snapshotZoomUrl"><input type="text" readonly="true" value="'+
a+'" onclick="this.select()"/></div>        <div class="snapshotZoomImage"><img src="'+a+'" alt=""/></div>        <div class="snapshotZoomDialogCloseButton"></div>    </div></div>'},showLocationImageOverlay:function(a){a=ig.game.strings.O9955(a);a=this.O8067(this.O1398(a));a=jQuery("<div/>",{id:this.locationImageOverlayCSSId}).html(a);jQuery("body").append(a);jQuery(".snapshotZoomDialogCloseButton").click(function(){ig.game.O3186.O7610()})},O7610:function(){0<jQuery("#"+this.locationImageOverlayCSSId).length&&
(jQuery("#"+this.locationImageOverlayCSSId).remove(),ig.system.canvas.focus())},getSectorImageUrl:function(a){return"production"==ig.game.mlenv?ig.game.sectorImageResourcePrefix+a+"?v="+ig.game.O9817.O2856:ig.game.sectorImageResourcePrefix+a+".png"},O6959:function(a,b,c,d){return window.location.protocol+"//"+ig.game.root+"/noauth/m/ifs/"+c+"/"+d+"/"+a+"/"+b},O5138:function(a,b){a=ig.game.strings.replaceAll(a,"-","_");return ml.Misc.O7959()&&!b?"/areathumbs/"+a+".png":window.location.protocol+"//thumb.thingistan.com/"+
a+".png"}})});ig.baked=!0;
ig.module("plugins.mland-backgroundmapextensions").requires("impact.background-map").defines(function(){ig.BackgroundMap.inject({O4445:function(a){null!=a?(a instanceof ml.Image?(this.O8923=a.path,this.tiles=a):(this.O8923=a,this.tiles=new ml.Image(this.O8923)),this.O6962=null):this.tiles={loaded:!0}},O3791:function(){if(0<=this.O8923.indexOf("background"))ig.game.O3134?(ig.system.context.fillStyle="rgb("+ig.game.O3134+")",ig.system.context.fillRect(0,0,ig.system.realWidth,ig.system.O5809)):this.parent();
else{var a=(this.scroll.x/this.tilesize).toInt()+ig.game.O6112.originX,b=(this.scroll.y/this.tilesize).toInt()+ig.game.O6112.originY,c=this.scroll.x%this.tilesize;var d=this.scroll.y%this.tilesize;var e=-c-this.tilesize;c=ig.system.width+this.tilesize-c;for(var f=ig.system.height+this.tilesize-d,g=-1,h=-d-this.tilesize;h<f;g++,h+=this.tilesize)for(var k=g+b,l=-1,m=e;m<c;l++,m+=this.tilesize){var n=l+a;if(d=ig.game.O6112.O8617({x:n,y:k})){var p=ig.game.O4261.getItemBasic(d.tid,"bme2",!0);this.O2332(p,
n,k,m,h);p.fg||p.O5334(m,h,d.rotation,d.flip,1)}}ig.game.O3199&&this.O7326()}},O5025:function(){var a=(this.scroll.x/this.tilesize).toInt()+ig.game.O6112.originX,b=(this.scroll.y/this.tilesize).toInt()+ig.game.O6112.originY,c=this.scroll.x%this.tilesize;var d=this.scroll.y%this.tilesize;var e=-c-this.tilesize;c=ig.system.width+this.tilesize-c;for(var f=ig.system.height+this.tilesize-d,g=-1,h=-d-this.tilesize;h<f;g++,h+=this.tilesize)for(var k=g+b,l=-1,m=e;m<c;l++,m+=this.tilesize)if(d=ig.game.O6112.O8617({x:l+
a,y:k})){var n=ig.game.O4261.getItemBasic(d.tid,"bme1",!0);n.fg&&n.O5334(m,h,d.rotation,d.flip,1)}},O5924:function(){var a=(this.scroll.x/this.tilesize).toInt()+ig.game.O6112.originX,b=(this.scroll.y/this.tilesize).toInt()+ig.game.O6112.originY,c=this.scroll.x%this.tilesize,d=this.scroll.y%this.tilesize,e=-c-this.tilesize;c=ig.system.width+this.tilesize-c;var f=ig.system.height+this.tilesize-d,g=ig.system.scale,h=ig.system.context,k=-1;for(d=-d-this.tilesize;d<f;k++,d+=this.tilesize)for(var l=k+b,
m=-1,n=e;n<c;m++,n+=this.tilesize)ig.game.O6112.O8617({x:m+a,y:l})&&(h.beginPath(),h.rect(n*g,d*g,this.tilesize*g,this.tilesize*g),h.lineWidth=g,h.strokeStyle="rgba(50,255,50,0.8)",h.stroke())},O2332:function(a,b,c,d,e){a.takesBackFill&&(a=this.O6193(b,c))&&(a.isALiquid?a.draw(d,e,0,0,ig.game.O7456.O5687?.6:.75):a.O5334(d,e,0,0,1))},O6193:function(a,b){for(var c=null,d=0,e=0,f={},g=-1;1>=g;g++)for(var h=1;-1<=h;h--)if(0!=g||0!=h){f.x=a+g;f.y=b+h;var k=ig.game.O6112.O8617(f);if(null!=k)!(k=ig.game.O4261.getItemBasic(k.tid,
"bme3",!0))||!k.givesBackFill||k.horizontalBackFillOnly&&0!=h||k.verticalBackFillOnly&&0!=g||(null==c&&!k.isWindow&&(c=k),d++);else if(2<=++e)return null}return 1<=e&&1==d?null:c},O7326:function(){if(!ig.input.state("click"))return!1;var a=(this.scroll.x/this.tilesize).toInt()+ig.game.O6112.originX,b=(this.scroll.y/this.tilesize).toInt()+ig.game.O6112.originX,c=this.scroll.x%this.tilesize,d=this.scroll.y%this.tilesize,e=-c-this.tilesize;c=ig.system.width+this.tilesize-c;var f=ig.system.height+this.tilesize-
d,g=ig.input.mouse.x,h=ig.input.mouse.y,k=-1;for(d=-d-this.tilesize;d<f;k++,d+=this.tilesize)for(var l=k+b,m=-1,n=e;n<c;m++,n+=this.tilesize){var p=m+a;!this.O3139(n,d,this.tilesize,g,h)||(ig.game.O1833={x:p,y:l},ig.game.O6112.O5984(ig.game.O1833)||ig.input.mouse.x>ig.game.panelSet.panelPos.x||ig.game.O8159.O1574(n-2,d-2))}},O5893:function(){var a=(this.scroll.x/this.tilesize).toInt()+ig.game.O6112.originX,b=(this.scroll.y/this.tilesize).toInt()+ig.game.O6112.originX,c=this.scroll.x%this.tilesize,
d=this.scroll.y%this.tilesize,e=-c-this.tilesize;c=ig.system.width+this.tilesize-c;var f=ig.system.height+this.tilesize-d,g=ig.input.mouse.x,h=ig.input.mouse.y,k=-1;for(d=-d-this.tilesize;d<f;k++,d+=this.tilesize)for(var l=k+b,m=-1,n=e;n<c;m++,n+=this.tilesize){var p=m+a;this.O3139(n,d,this.tilesize,g,h)&&(ig.game.O1833={x:p,y:l},ig.game.O6112.O2336(ig.game.O1833)&&!(ig.input.mouse.x>ig.game.panelSet.panelPos.x)&&ig.game.O8159.O2930(n,d))}},O6543:function(a,b,c){ig.system.context.fillStyle="rgba(200,200,200,0.1)";
c&&0!==c&&2!==c?ig.system.context.fillRect((a-ig.game.O9925*Math.floor(ig.game.O1041/2))*ig.system.scale,b*ig.system.scale,ig.game.O9925*ig.game.O1041*ig.system.scale,ig.game.O9925*ig.system.scale):ig.system.context.fillRect(a*ig.system.scale,(b-ig.game.O9925*Math.floor(ig.game.O1041/2))*ig.system.scale,ig.game.O9925*ig.system.scale,ig.game.O9925*ig.game.O1041*ig.system.scale)},O3139:function(a,b,c,d,e){return a<=d&&d<a+c&&b<=e&&e<b+c},O8096:function(a,b){ig.game.O8159.O8096(a,b)}})});ig.baked=!0;
ig.module("plugins.mland-collisionmapextension120").requires("impact.impact","impact.collision-map").defines(function(){ig.O8378.inject({O5070:function(a,b,c,d,e,f,g,h,k,l){a.pos.x+=d;a.pos.y+=e;if(d){var m=0<d?f:0,n=0>d?this.tilesize:0;var p=Math.floor(c/this.tilesize);var q=Math.ceil((c+g)/this.tilesize);d=Math.floor((a.pos.x+m)/this.tilesize);var t=Math.floor((b+m)/this.tilesize);if(0<l||d==t)t=null;for(var r=p;r<q&&(!t||!(p=ig.game.O6112.O746At({y:r,x:t}),1<p&&p<=this.lastSlope&&this.O3419(a,
p,b,c,h,k,f,g,t,r)));r++)if(p=ig.game.O6112.O746At({y:r,x:d}),1==p||p>this.lastSlope||1<p&&this.O3419(a,p,b,c,h,k,f,g,d,r)){if(1<p&&p<=this.lastSlope&&a.collision.slope){a.collision.slope.tile=p;break}a.collision.x=!0;a.tile.x=p;b=a.pos.x=d*this.tilesize-m+n;h=0;break}}if(e){m=0<e?g:0;e=0>e?this.tilesize:0;p=Math.floor(a.pos.x/this.tilesize);n=Math.ceil((a.pos.x+f)/this.tilesize);r=Math.floor((a.pos.y+m)/this.tilesize);q=Math.floor((c+m)/this.tilesize);if(0<l||r==q)q=null;for(d=p;d<n&&(!q||!(p=ig.game.O6112.O746At({y:q,
x:d}),1<p&&p<=this.lastSlope&&this.O3419(a,p,b,c,h,k,f,g,d,q)));d++)if(p=ig.game.O6112.O746At({y:r,x:d}),1==p||p>this.lastSlope||1<p&&this.O3419(a,p,b,c,h,k,f,g,d,r)){if(1<p&&p<=this.lastSlope&&a.collision.slope){a.collision.slope.tile=p;break}a.collision.y=!0;a.tile.y=p;a.pos.y=r*this.tilesize-m+e;break}}}})});ig.baked=!0;
ig.module("plugins.mland-soundextensions").requires("impact.sound").defines(function(){ig.O3415.inject({get:function(a){a=this.clips[a];if(!a)return null;if(a instanceof ig.Sound.WebAudioSource)return a;if(Array.isArray(a)){for(var b=0;b<a.length;b++){var c=a[b];if(c&&(c.paused||c.ended))return c.ended&&(c.O7485=0),c}try{return a[0].pause(),a[0].O7485=0,a[0]}catch(d){}}return null}});ig.Sound.inject({isLoaded:!1,_lastPlayTime:0,_minPlayInterval:100,_isCurrentlyPlaying:!1,_activeInstances:0,_maxInstances:3,
init:function(a,b,c){this.path=a;this.O8778=!1!==b;this._lastPlayTime=0;this._isCurrentlyPlaying=!1;this._activeInstances=0;if(null==c||void 0==c)c=!0;if(c){var d=this;this.load(function(){d.isLoaded=!0})}},play:function(){if(ig.game.settings.doPlaySound&&(!ig.game.O1257||!ig.game.O1257.O9832("mutesAll"))&&ig.Sound.enabled)if(this.isLoaded){if(this.O1820=ig.O4534.get(this.path))if(this.O1820.volume=ig.O4534.volume*this.volume,ig.Sound.useWebAudio){if(!(this._activeInstances>=this._maxInstances)){var a=
Date.now();if(!(a-this._lastPlayTime<this._minPlayInterval)){this._lastPlayTime=a;this._activeInstances++;var b=this.O1820,c=this.path,d=this;setTimeout(function(){b.play();ig.game.brainManager&&ig.game.brainManager.O7411(c)},0);setTimeout(function(){d._activeInstances--;d._activeInstances<0&&(d._activeInstances=0)},1E3)}}}else this.O1820.play(),ig.game.brainManager&&ig.game.brainManager.O7411(this.path)}else{var e=this;this.load(function(){e.isLoaded=!0;e.play()})}}})});ig.baked=!0;
ig.module("plugins.mland-inputmultitouch").requires("impact.game","impact.input").defines(function(){var a=function(b,c,d,e){this.x=b;this.y=c;this.id=d;this.state=e};ig.Input.inject({touches:{},O4387:[],O5903:!1,O4726:function(){if(!this.O3298){this.O3298=!0;var b=this.mousewheel.bind(this);ig.system.canvas.addEventListener("mousewheel",b,!1);ig.system.canvas.addEventListener("DOMMouseScroll",b,!1);ig.system.canvas.addEventListener("contextmenu",this.contextmenu.bind(this),!1);ig.system.canvas.addEventListener("mousedown",
this.keydown.bind(this),!1);ig.system.canvas.addEventListener("mouseup",this.keyup.bind(this),!1);ig.system.canvas.addEventListener("mousemove",this.mousemove.bind(this),!1);ig.system.canvas.addEventListener("touchstart",this.O5111.bind(this),!1);ig.system.canvas.addEventListener("touchmove",this.O5111.bind(this),!1);ig.system.canvas.addEventListener("touchend",this.O5111.bind(this),!1)}},keydown:function(b){this.parent(b);"mousedown"==b.type&&(this.touches.mouse=new a(this.mouse.x,this.mouse.y,"mouse",
"down"))},keyup:function(b){this.parent(b);"mouseup"==b.type&&(this.touches.mouse||(this.touches.mouse={}),this.touches.mouse.state="up",this.touches.mouse.x=this.mouse.x,this.touches.mouse.y=this.mouse.y,this.O4387.push("mouse"))},mousemove:function(b){this.parent(b);this.state("click")&&this.touches.mouse&&(this.touches.mouse.x=this.mouse.x,this.touches.mouse.y=this.mouse.y)},O6501:function(){this.parent();for(var b=this.O4387.length;b--;)delete this.touches[ig.input.O4387[b]];this.O4387=[]},O5111:function(b){b.stopPropagation();
b.preventDefault();for(var c=b.changedTouches.length;c--;){var d=b.changedTouches[c];this["multi"+b.type]((d.clientX-ig.system.canvas.offsetLeft)/ig.system.scale,(d.clientY-ig.system.canvas.offsetTop)/ig.system.scale,d.identifier)}},multitouchstart:function(b,c,d){this.mouse.x=b;this.mouse.y=c;var e=this.bindings[ig.KEY.MOUSE1];e&&(this.actions[e]=!0,this.presses[e]=!0);this.touches[d]=new a(b,c,d,"down");ig.ua.iOS&&(ig.game.update(),this.presses.click=!1)},multitouchmove:function(b,c,d){this.mouse.x=
b;this.mouse.y=c;this.touches[d]&&(this.touches[d].x=b,this.touches[d].y=c)},multitouchend:function(b,c,d){this.mouse.x=b;this.mouse.y=c;this.touches[d]&&(this.touches[d].state="up",this.O4387.push(d),b=this.bindings[ig.KEY.MOUSE1])&&(this.delayedKeyup[b]=!0,ig.ua.iOS&&(this.actions.click=this.locks.click=this.presses.click=!1,ig.game.update()))},O3657:function(){return 2<=this.O9063()},O9063:function(){var b=0,c;for(c in this.touches)b++;return b},O4349:function(b){for(var c in b)return!1;return!0}})});
ig.baked=!0;
ig.module("plugins.mland-fontextensions").requires("impact.font").defines(function(){ig.Font._colorCache={};ig.Font._colorCacheStats={cacheHits:0,cacheMisses:0,generatedFonts:0};ig.Font.inject({drawCustom:function(a,b,c,d,e){e||=ig.system.context;"string"!=typeof a&&(a=a.toString());if(-1!==a.indexOf("\n")){a=a.split("\n");e=this.height+this.O6086;for(var f=0;f<a.length;f++)this.draw(a[f],b,c+f*e,d)}else{if(d==ig.Font.ALIGN.RIGHT||d==ig.Font.ALIGN.CENTER)f=this.O5033(a),b-=d==ig.Font.ALIGN.CENTER?f/
2:f;1!==this.alpha&&(e.globalAlpha=this.alpha);for(f=0;f<a.length;f++)d=a.charCodeAt(f),b+=this.O4497(d-this.firstChar,b,c,e);1!==this.alpha&&(e.globalAlpha=1);ig.Image.drawCount+=a.length}},O4497:function(a,b,c,d){if(!this.loaded||0>a||a>=this.indices.length)return 0;d||=ig.system.context;var e=ig.system.scale,f=this.widthMap[a]*e,g=(this.height-2)*e;d.drawImage(this.data,this.indices[a]*e,0,f,g,b,c,f,g);return this.widthMap[a]+this.O3540},O9107:function(a){this.height=a.height-1;this.widthMap=[];
this.indices=[];var b=ig.$new("canvas");b.width=a.width;b.height=a.height;b=b.getContext("2d");b.drawImage(a,0,0);b=b.getImageData(0,a.height-1,a.width,1);for(var c=0,d=0,e=0;e<a.width;e+=ig.system.scale)0!=b.data[4*e+3]?d++:d&&(this.widthMap.push(d),this.indices.push(e/ig.system.scale-d),c++,d=0);this.widthMap.push(d);this.indices.push(e/ig.system.scale-d);this.height=a.height/ig.system.scale},withColor:function(a){var b=this._resolveColor(a);if(!b)return console.error("Font.withColor: Invalid color:",
a),this;a=(this.path||"font_"+(this._uniqueId||(this._uniqueId=ig.Font._nextId++)))+"_"+b.r+"_"+b.g+"_"+b.b;if(ig.Font._colorCache[a])return ig.Font._colorCacheStats.cacheHits++,ig.Font._colorCache[a];ig.Font._colorCacheStats.cacheMisses++;b=this._recolorFont(b);ig.Font._colorCache[a]=b;ig.Font._colorCacheStats.generatedFonts++;return b},_resolveColor:function(a){if(typeof a==="string"){if(ig.game&&ig.game.fontColors&&ig.game.fontColors[a])return ig.game.fontColors[a]}else if(a&&typeof a.r!=="undefined"&&
typeof a.g!=="undefined"&&typeof a.b!=="undefined")return{r:Math.min(255,Math.max(0,Math.floor(a.r))),g:Math.min(255,Math.max(0,Math.floor(a.g))),b:Math.min(255,Math.max(0,Math.floor(a.b)))};return null},_recolorFont:function(a){if(!this.loaded||!this.data)return console.error("Font._recolorFont: Font not loaded"),this;var b=this.data,c=b.width,d=b.height,e=ig.$new("canvas");e.width=c;e.height=d;e=e.getContext("2d");e.drawImage(b,0,0);b=e.getImageData(0,0,c,d);e=b.data;for(var f=0;f<e.length;f+=4)if(e[f+
3]>128){var g=(.299*e[f]+.587*e[f+1]+.114*e[f+2])/255;e[f]=Math.floor(a.r*g);e[f+1]=Math.floor(a.g*g);e[f+2]=Math.floor(a.b*g)}a=ig.$new("canvas");a.width=c;a.height=d;a.getContext("2d").putImageData(b,0,0);c=new ig.Font(null,null,null,a);c.widthMap=this.widthMap.slice();c.indices=this.indices.slice();c.firstChar=this.firstChar;c.O3540=this.O3540;c.O6086=this.O6086;c.height=this.height;c.loaded=!0;return c}});ig.Font.getColorCacheStats=function(){return{cacheSize:Object.keys(ig.Font._colorCache).length,
cacheHits:ig.Font._colorCacheStats.cacheHits,cacheMisses:ig.Font._colorCacheStats.cacheMisses,generatedFonts:ig.Font._colorCacheStats.generatedFonts,hitRate:ig.Font._colorCacheStats.cacheHits+ig.Font._colorCacheStats.cacheMisses>0?(ig.Font._colorCacheStats.cacheHits/(ig.Font._colorCacheStats.cacheHits+ig.Font._colorCacheStats.cacheMisses)*100).toFixed(2)+"%":"0%"}};ig.Font.clearColorCache=function(){ig.Font._colorCache={};console.log("Font color cache cleared")};ig.Font._nextId=0});ig.baked=!0;
ig.module("game.main").requires("impact.game","impact.font","mlframe.image","mlframe.animation","mlframe.misc","game.entities.player","game.entities.deadplayer","game.entities.thrownitem","game.entities.motion","game.entities.moving.moving","game.entities.moving.deadlymv","game.entities.immobile.default","game.entities.immobile.livmov","game.entities.immobile.light","game.entities.immobile.lighttop","game.entities.immobile.vignette","game.entities.immobile.helper","game.entities.immobile.holder",
"game.entities.immobile.musicsheet","game.entities.immobile.filllight","game.entities.immobile.deadly","game.entities.immobile.portal","game.entities.immobile.portaldir","game.entities.immobile.portalr","game.entities.immobile.musical","game.entities.immobile.music","game.entities.immobile.harmflip","game.entities.immobile.harm","game.entities.immobile.harmanim","game.entities.immobile.medium","game.entities.immobile.environm","game.entities.immobile.glow","game.entities.immobile.living","game.entities.immobile.interact",
"game.entities.immobile.livanim","game.entities.immobile.lqdflip","game.entities.immobile.liquid","game.entities.immobile.crumbling","game.entities.immobile.activator","game.entities.immobile.openable","game.entities.immobile.decoact","game.entities.immobile.decofb","game.entities.immobile.multithing","game.entities.immobile.decotch","game.entities.immobile.gather","game.entities.immobile.deadlyem","game.entities.immobile.decoanim","game.entities.immobile.sparkling","game.entities.immobile.flexible",
"game.entities.immobile.pointer","game.entities.immobile.placename","game.entities.immobile.writable","game.entities.immobile.readable","game.entities.immobile.sound","game.entities.immobile.decobig","game.entities.immobile.decovbig","game.entities.immobile.farback","game.entities.immobile.furry","game.entities.immobile.drifty","game.entities.immobile.clothy","game.entities.immobile.lively","game.entities.immobile.viewable","game.entities.immobile.dynathing","game.entities.immobile.transform","game.entities.immobile.happening",
"game.entities.immobile.changer","game.entities.immobile.brain","game.entities.immobile.liner","game.entities.immobile.stackhold","game.entities.immobile.emitter","game.entities.immobile.aimable","game.entities.immobile.interenv","game.entities.immobile.equipment","game.entities.immobile.consumab","game.entities.immobile.hook","game.entities.immobile.stackwear","game.entities.immobile.stackwearb","game.entities.immobile.thrower","game.entities.immobile.mntground","game.entities.immobile.mntair","game.entities.immobile.stackinstr",
"game.ui.panelset","game.ui.playerdialog","game.ui.mylocationdialog","game.ui.areadialog","game.ui.clonehistorydialog","game.ui.itemlistdialog","game.ui.actioninfo","game.ui.instrumentdialog","game.ui.boostdialog","game.ui.randomareasdialog","game.ui.debugdialog","game.ui.alertdialog","game.ui.interactingdialog","game.ui.userscripteditor","game.ui.areasearchdialog","game.ui.adcampaignsdialog","game.ui.arealist","game.ui.thingreferencesdialog","game.ui.friendsdialog","game.ui.statsdialog","game.ui.holderdialog",
"game.ui.multithing","game.ui.motiondialog","game.ui.mediadialog","game.ui.writabledialog","game.ui.albumdialog","game.ui.customsnapshotdialog","game.ui.readabledialog","game.ui.musicrecorder","game.ui.viewabledialog","game.ui.virtualjoystick","game.ui.virtualkeyboard","game.ui.healthbar","game.ui.bottommenu","game.ui.painter","game.ui.itemcontextmenu","game.ui.deletionmarkerdialog","game.ui.usermapdialog","game.data.speechdata","game.core.loader","game.core.sounds","game.core.screencapturer","game.core.coreimages",
"game.core.itemcache","game.core.O3544","game.core.colors","game.core.dragwatcher","game.core.speedwatcher","game.core.interactingmanager","game.core.settings","game.core.linermanager","game.core.movermanager","game.core.syncedclock","game.core.aimablemanager","game.core.areagenerator","game.core.storagemanagenr","game.core.dynathingmanager","game.core.userscriptmanager","game.core.brainmanager","game.core.O6898","game.core.entitymanager","game.core.playermanager","game.core.O2009","game.core.holdermanager",
"game.core.multithingmanager","game.core.O1681","game.core.itemsearchmanager","game.core.attributesmanager","game.core.intermissionmanager","game.core.spawnpointmanager","game.core.decorator","game.core.backgrounddecorator","game.core.camera","game.core.spritesheet","game.core.spritesheetboostdialog","game.core.playerstatusobserver","game.core.validations","game.core.mapplacementvalidation","game.core.navigationmanager","game.core.keyboardmanager","game.core.errormanager","game.core.achievementmanager",
"game.core.rankmanager","game.core.searchquery","game.core.strings","game.core.portaller","game.core.clickmanager","game.core.attachmentmanager","game.core.O7069","game.core.boostmanager","game.core.socialintegration","game.core.iapmanager","game.core.iapdialogmanager","game.core.farbackmanager","game.core.seedablerandom","game.core.steammanager","game.coms.httpapi","game.coms.O4212","game.coms.websocketcomsws","game.coms.staticcontentmanager","plugins.mland-backgroundmapextensions","plugins.mland-collisionmapextension120",
"plugins.mland-soundextensions","plugins.mland-inputmultitouch","plugins.mland-fontextensions").defines(function(){window.MLand=ig.Game.extend({gravity:800,O1845:1,O6354:1,O1041:7,O3199:!1,O1833:null,O9925:19,O2953:9.5,O1082:38,O4975:38,O3759:57,panelSet:null,O1168:!1,O2435:.6,O9812:0,topLeftUIPos:{x:26,y:6},O6102:null,O6642:"",O2694:null,O5383:null,isFullAccount:!1,isEditorHere:!1,O6612:!1,O7712:{x:0,y:0},sounds:{},O3774:10,O2537:!1,O7965:!0,O1795:!1,O7903:0,O8246:0,O5119:{},O4709:!1,O6550:1,O5226:!0,
O2481:!1,O9784:!1,O6542:!1,O3310:!ig.ua.mobile,O6604:1,O9753:2,O3166:2,O9591:100,cameraTrackPlayer:!0,canvasId:"canvas",O1799:16,ourPeople:null,O3478:null,O9149:0,O7736:0,O9405:0,O5698:0,O1568:null,O8882:null,O1808:null,O4245:45,maxCells:2,O1828:9,O6965:7,blockedTypesForTest:localStorage.blocked?JSON.parse(localStorage.blocked):null,O4173:1.4,avatarBaseSize:{x:16,y:19},O5992:!1,O2553:"chair;sofa;cushion;bench;stool;couch;seat;bath tub;bathtub;pool;throne;beanbag;sittable;toilet".split(";"),lieableNames:["bed",
"mattress","lieable"],O3841:"MNTGROUND MNTAIR MNTWATER GLOW DECOBIG POINTER PLACENAME STACKWEARB STACKWEAR DECOFB LIVING INTERACT LIVANIM LIVMOV MOTION INTERMOT FARBACK DYNATHING HAPPENING MUSICSHEET HOLDER FARBACK TRANSFORM MULTITHING".split(" "),O8463:["DECOVBIG"],O6703:"MNTGROUND MNTAIR MNTWATER LIVANIM LIVMOV STACKWEAR INTERACT PORTALAR DYNATHING HAPPENING MUSICSHEET FARBACK TRANSFORM".split(" "),O3985:480,fullAngle:2*Math.PI,O5758:null,O2492:void 0,O3554:void 0,O9590:[],O7259:void 0,O1839:void 0,
O2354:void 0,O6140:void 0,targetFps:60,O3905:null,hasMinfinity:!1,O1885:.75,O1002:void 0,O2453:void 0,O5285:void 0,O4873:void 0,O3186:void 0,O6112:void 0,entityManager:void 0,O8518:void 0,O7763:void 0,O1329:void 0,O3447:void 0,attachmentManager:void 0,O6921:void 0,O7456:void 0,O2116:void 0,settings:void 0,O1896:void 0,O2225:void 0,O4086:void 0,O9968:void 0,areaGenerator:void 0,O5907:void 0,userScriptManager:void 0,brainManager:void 0,O8894:void 0,O7747:void 0,O2082:void 0,O9710:void 0,O6011:void 0,
O5058:void 0,O7606:void 0,O1189:void 0,O4774:void 0,O8100:void 0,autoBuilderData:void 0,O2666:!1,O3748:"helptown",O9464:{},isLocal:0===window.location.href.indexOf("http://localhost"),O7088:!1,O6672:!1,colors:null,O6530:null,O6990:Math.sqrt(2),O4214:4,O6420:!1,O3993:!1,O9706:!1,O6341:160,screenPlusMargin:{x1:0,x2:0,y1:0,y2:0},O2004:0,O9392:0,O1682:!1,avoidDrawing:!1,areaName:"",O9720:"",O1460:"",O3632:"",areaId:null,areaGroupId:null,O1958:null,areaGlobalInteractingId:null,O4517:null,O7283:!1,areaIsLimitedToEditorsOnly:!1,
areaDrift:{angle:0,speed:0},areaCenterLocation:{x:15,y:15},O6490:!1,areaAngleDriftVelocity:{x:0,y:0},O5549:"ANY",O2448:void 0,O7839:void 0,areaPossessions:null,O3134:null,O2393:!1,O1332:!1,O7771:!1,O4035:33,O4149:!1,O8535:0,O2791:"smalltown;newmountain;newville;first valley;welcometown;arrival mountain;green valley;startville;firstville;firsttown;freshtown;starttown;welcome mountain;first rock;start island;fresh springs;welcome springs;arrivalville;freshtopia;newtopia;startopia".split(";"),O4401:!0,
theyCanDrown:!0,O7823:!0,O4240:!1,O6564:!0,theyCanMapTeleport:!1,O6026:!0,O4948:!0,O1720:!0,O8689:!0,O5178:!0,O9677:!1,O3368:!1,O4334:!0,autoHeals:!0,O3962:500,O1276:null,O4512:!1,O7899:!1,O3120:!0,O1973:!1,O4936:0,O3805:!0,O5404:!1,typesWithExternalBigData:["BRAIN","CHANGER"],O9643:["CHANGER"],O7249:null,O1019:!1,O9002:Date.now(),O2030:2500,O9160:!1,universeSearchChecked:!1,O1031:"universeSearchChecked",O9450:!1,O4296:!1,O4223:!1,O4482:!1,O7894:!0,nonLoggedInChatIfEditorAround:!1,O9956:!0,availableFonts:{blackWhite:{O3540:-1},
black:{},white:{},whiteSmall:{},blackSmall:{},elegance:{O3540:-1},wild:{O3540:-1},shapes:{O3540:-1},cute:{O3540:-1},action:{O3540:-1},inverted:{O3540:-1},strict:{O3540:-1},faint:{O3540:-1},melodic:{O3540:-1},low:{O3540:-1},high:{O3540:-1},smooth:{O3540:-1},casual:{O3540:-1},wide:{O3540:-1},bulky:{O3540:-1}},init:function(){ig.game.loadStartTime=Date.now();this.sectorChangeHandled=!1;this.O4679("World Initialization Starting","Transporting to universe");this.setup();ig.game.strings=new Strings;ig.game.colors=
new Colors;ig.game.errorManager=new ErrorManager;ig.game.seedableRandom=new SeedableRandom;ig.ua.steam&&(ig.game.steamManager=new SteamManager);ml.Misc.O8590();window.location&&"#avoidDrawing=true"==window.location.hash&&(ig.game.avoidDrawing=!0);ig.game.debug=new DebugDialog;this.O4679("Loading Spritesheet","Clearing fog");this.O8159=new O7356;this.O8159.O8747.fail(function(){ig.game.errorManager.O3802("Oops, there were loading issues. (Failed to load spritesheet.)")});jQuery.when(ig.game.O8159.O8747).then(function(){ig.game.O5285=
new StorageManagenr;ig.game.O4086=new SyncedClock;ig.game.O9817=new HttpApi;ig.game.O4873=new O7104;ig.game.O3186=new StaticContentManager;ig.game.O4261=new ItemCache;ig.game.O6112=new O1059;ig.game.entityManager=new EntityManager;ig.game.O8518=new PlayerManager;ig.game.O7763=new O4047;ig.game.O1329=new HolderManager;ig.game.O3447=new MultithingManager;ig.game.brainManager=new BrainManager;ig.game.attachmentManager=new O6964;ig.game.O6921=new O9661;ig.game.O7456=new SpeedWatcher;ig.game.O2116=new InteractingManager;
ig.game.settings=new Settings;ig.game.O1896=new LinerManager;ig.game.O2225=new MoverManager;ig.game.O9968=new AimableManager;ig.game.areaGenerator=new AreaGenerator;ig.game.O5907=new DynaThingManager;ig.game.userScriptManager=new UserScriptManager;ig.game.O8894=new O1197;ig.game.O7747=new O9811;ig.game.itemSearchManager=new ItemSearchManager;ig.game.O2082=new AttributesManager;ig.game.O9710=new IntermissionManager;ig.game.O6011=new SpawnPointManager;ig.game.decorator=new Decorator;ig.game.camera=
new Camera;ig.game.validations=new Validations;ig.game.mapPlacementValidation=new MapPlacementValidation;ig.game.O5058=new KeyboardManager;ig.game.O7606=new BoostManager;ig.game.coreImages=new CoreImages;ig.game.O1189=new AchievementManager;ig.game.portaller=new Portaller;ig.game.O4774=new ClickManager;ig.game.O8100=new O9097;ig.game.actioninfo=new Actioninfo;ig.game.iapManager=new IapManager;ig.game.O9663=new IapDialogManager;ig.game.farBackManager=new FarBackManager;ig.game.O9314();ig.game.O3555();
ig.game.topLeftUIPos={x:26,y:ig.system.height-14};ig.game.O4679("Loading start info","Assessing situation");ig.game.O8077().done(function(){ig.game.O4679("Establishing WebSockets Connection","Looking for atoms");ig.game.O7836=new WebSocketComs(ig.game.wshost,ig.game.wsport);ig.game.O7836.playerAcceptedPromise.done(ig.game.O8209);0!=ig.game.areaDrift.speed&&(ig.game.areaAngleDriftVelocity=ml.Misc.O1555());ig.game.backgroundDecorator=new BackgroundDecorator;ig.game.isEditorHere&&!ig.ua.mobile&&(ig.game.O1168=
!0,ig.game.camera.setOffset());ig.game.isEditorHere&&(ig.game.theyCanMapTeleport=!0,ig.game.O9677=!0);ig.game.O8980()});ig.game.O8615();ig.game.O2453=new NavigationManager;ig.game.searchQuery=new SearchQuery;ig.game.sounds=new Sounds;ig.game.O3478=new ScreenCapturer;ml.Misc.O2168()})},setup:function(){jQuery("body").on("contextmenu",function(a){return!1});ig.system.context.webkitImageSmoothingEnabled=!1;ig.system.context.mozImageSmoothingEnabled=!1;ig.system.context.oImageSmoothingEnabled=!1;ig.system.context.imageSmoothingEnabled=
!1;window.consoleref=window.console;"production"!=window.mlenv||ig.game.O2537?"undefined"===typeof window.console&&(window.console={},window.console.log=window.console.assert=window.console.warn=window.console.error=window.console.time=window.console.timeEnd=window.console.clear=function(){}):this.O3309();jQuery(window).resize(function(){ig&&ig.game&&ig.game.O1895()});Number.prototype.mod=function(a){return(this%a+a)%a};this.O1568=window.oid;this.O8882=window.fai;this.root=window.root;this.staticroot=
window.staticroot;this.imageroot=window.imageroot;this.snaproot=window.snaproot;this.snapthmroot=window.snapthmroot;this.sectorimageroot=window.sctroot;this.mlenv=window.mlenv;this.version=window.v;this.O1946="test"==ig.game.mlenv||"production"==ig.game.mlenv?"//"+this.staticroot+"/":"";this.itemImageResourcePrefix="test"==ig.game.mlenv||"production"==ig.game.mlenv?"//"+this.imageroot+"/":"";this.sectorImageResourcePrefix="//"+this.sectorimageroot+"/"},O8077:function(){var a=jQuery.Deferred(),b=window.location.pathname&&
window.location.pathname.replace(/\//g,"");ig.game.O9817.O6899(b).done(function(c){if(c.isAreaBannedFromAll)window.location="/support";else if(c.isAreaBanned)window.location="/info-area-lock"+(c.areaBannedMinutes?"#"+c.areaBannedMinutes:"");else{var d=c.rid;ig.game.O2004=c.age;ig.game.O1276=c.hli;ig.game.noIAP=c.noi;ig.game.flagsAlert=c.fla;c.flt&&Array.isArray(c.flt)?ig.game.flagsAlertTags=c.flt:ig.game.flagsAlertTags=[];ig.game.wshost=c.wsh;ig.game.wsport=c.wsp;ig.game.O4375=c.wsc;ig.game.isFullAccount=
c.ifa;ig.game.isEditorHere=c.ieh;ig.game.O6612=c.ish;ig.game.hasMinfinity=c.hmf;ig.game.lastMinfinityAmount=c.lma;ig.game.minfinityLastExpired=c.mle;ig.game.isBacker=c.isb;ig.game.areaId=c.aid;ig.game.areaGroupId=c.gid;ig.game.O1958=c.sub;ig.game.areaName=c.arn;ig.game.O9720=c.agn;ig.game.O1460=c.aun;ig.game.O3632=c.ard;ig.game.areaGlobalInteractingId=c.iid;ig.game.O7283=c.spe;ig.game.areaIsLimitedToEditorsOnly=c.ieo;ig.game.nonLoggedInChatIfEditorAround=c.ece;ig.game.O3134=c.abo;ig.game.areaTitleFont=
c.tfo;ig.game.O5549=c.apr;ig.game.O2448=c.aps?c.aps.ids:null;ig.game.O7839=c.aps?c.aps.values:null;ig.game.areaCenterLocation=c.acl;ig.game.O6490=!!c.mro;ig.game.areaClosed=!!c.axx;ig.game.areaUnlisted=!!c.aul;ig.game.O9817.O2856=c.mpv;ig.game.O7606.O1688=c.bbl;ig.game.O7088=!!c.ise;ig.game.otherAreaWasFullInfo=c.fti;ig.game.O1019=!!c.wrc;ig.game.areaAdForDisplay=c.aad;ig.game.settings.O4251=c.stn;ig.game.O4296=!ig.game.areaName||"INDIVIDUALS"!=ig.game.O5549;ig.game.O4223=!ig.game.areaName;ig.game.O4482=
!ig.game.O4223;c.agi&&ig.game.areaGenerator.O7525(c.agi,d);ig.game.O7088&&(ig.game.O7283=!0);ig.game.O2448&&0==ig.game.O2448.length&&(ig.game.O2448=null);ig.game.O7839&&0==ml.Misc.O4952(ig.game.O7839)&&(ig.game.O7839=null);ig.game.O6490&&(ig.game.isEditorHere=!1,ig.game.O3554=ig.game.isEditorHere,ig.game.O6612=!1);ig.game.O2004&&(ig.game.O9392=Math.round(ig.game.O2004/60/60/24));c.adr&&(ig.game.areaDrift=c.adr);ig.game.O1460&&document.URL&&-1===document.URL.indexOf("/"+ig.game.O1460)&&window.history?
window.history.pushState(void 0,"","/"+ig.game.O1460+window.location.search+window.location.hash):ig.game.O1460||""==window.location.pathname||"/"==window.location.pathname||window.history.pushState(void 0,"","/"+window.location.search+window.location.hash);ig.game.O9720&&(document.title=ig.ua.steam?ig.game.strings.O3459(ig.game.O9720)+" - Thingistan":ig.game.strings.O3459(ig.game.O9720));c.sci&&(window.console=window.consoleref,ig.game.sci=!0);ig.game.isLocal||ig.ua.steam||ig.ua.firefox||ig.ua.iexplorer||
(window.onbeforeunload=function(e){return ig.game&&0==ig.game.O6550&&ig.game.O1257&&1>=ig.game.O1257.rank&&(!localStorage||"true"!=localStorage.wasAskedAboutGuidance)&&ig.game.O9720!=ig.game.O3748?(localStorage.wasAskedAboutGuidance="true",ig.game.O4149=!0,"Would you like guidance on Thingistan?"):null});ig.game.O2838();a.resolve()}}).fail(function(c){ig.game.errorManager.O5658("Failed to load startinfo",c)});return a.promise()},O8209:function(a){ig.game.O4679("Accepted by WebSockets server","Found atoms");
ig.game.O1808=new ml.Timer;ig.game.O3196()&&(a.r=0);ig.game.O2492=a.r;ig.game.O1257=ig.game.spawnEntity("EntityPlayer",a.pos.x,a.pos.y,{O8088:!0,rank:a.r,O1228:a.dpt,O1436:a.aid,screenName:a.snm,isNew:a.neo,voice:a.vce,O6622:a.wof,O9668:a.shs});a.att&&ig.game.attachmentManager.O9471(ig.game.O1257,a.att);ig.game.O1257.O2970=a.rid;ig.game.O3805&&(ig.game.O1257.binId=ig.game.O7836.binary.O8816(a.rid));ig.game.O5383=new ml.Timer;ig.game.bottomMenu=new BottomMenu;var b=JSON.parse(a.ach);ig.game.O1189.O2118(b);
ig.game.O4873.O7576(ig.game.O1257,a.map.p,a.map.a);ig.game.O6011.start();ig.game.O2453.O9132(a.trk);ig.game.O2453.O9874();b=ig.game.O6112.prime_P();b.done(function(){ig.game.O4679("Map data primed","Readying gravity")}).fail(function(){ig.game.errorManager.O3802("Oops, there were loading issues. (Map data prime failed)")});15>=(ig.game.O2004?ig.game.O2004/60:0)&&(ig.game.O2030=7500);var c=jQuery.Deferred(),d=c.promise();setTimeout(function(){"pending"===c.state()&&c.resolve()},ig.game.O2030);ig.game.O6112.initialItemImagesMidSectorLoading.always(function(){c.resolve()});
ig.game.O1257.avatarLoadedPromise.done(function(){ig.game.O4679("Avatar loaded","Getting in shape")}).fail(function(){ig.game.errorManager.warn("Failed to load avatar",null,!0)});ig.game.areaName||(ig.game.topLeftUIPos.x+=33);ig.game.O4086.sendPingToServer();var e=a.ups;jQuery.when.apply(null,[b,d,ig.game.O8159.O8747,ig.game.O8518.O5449]).then(function(){if(!ig.game.errorManager.O5290){ig.game.O4679("Initialization Complete","World established");ig.game.O9784=!0;ig.game.O7836.O4810();ig.game.O1002=
new RankManager(ig.game.topLeftUIPos.x,ig.game.topLeftUIPos.y-2);ig.game.speechData=new SpeechData("en");ig.game.O2141=new PlaterStatusObserver(e);ig.game.panelSet=new UIPanelSet;ig.game.playerDialog=new PlayerDialog;ig.game.myLocationDialog=new MyLocationDialog;ig.game.areaDialog=new AreaDialog;ig.game.cloneHistoryDialog=new CloneHistoryDialog;ig.game.O4437=new ItemListDialog;ig.game.instrumentDialog=new InstrumentDialog;ig.game.boostDialog=new BoostDialog;ig.game.randomAreasDialog=new RandomAreasDialog;
ig.game.alertDialog=new AlertDialog;ig.game.userScriptEditor=new UserScriptEditor;ig.game.areaSearchDialog=new AreaSearchDialog;ig.game.adCampaignsDialog=new AdCampaignsDialog;ig.game.areaList=new AreaList;ig.game.friendsDialog=new FriendsDialog;ig.game.statsDialog=new StatsDialog;ig.game.O3957=new MotionDialog;ig.game.holderDialog=new HolderDialog;ig.game.multithing=new Multithing;ig.game.mediaDialog=new MediaDialog;ig.game.writableDialog=new WritableDialog;ig.game.albumDialog=new AlbumDialog;ig.game.customSnapshotDialog=
new CustomSnapshotDialog;ig.game.readableDialog=new ReadableDialog;ig.game.musicRecorder=new MusicRecorder;ig.game.viewableDialog=new ViewableDialog;ig.game.userMapDialog=new UserMapDialog;ig.game.virtualJoystick=new VirtualJoystick;ig.game.virtualKeyboard=new VirtualKeyboard;ig.game.healthBar=new HealthBar;ig.game.itemContextMenu=new ItemContextMenu;ig.game.deletionMarkerDialog=new DeletionMarkerDialog;ig.game.socialIntegration=new SocialIntegration;var f=19,g=-29;localStorage.portaller_currentAreaGroupName!=
ig.game.O9720&&(f=50,g=19);ig.game.screen.x=ig.game.O1257.pos.x-ig.system.widthHalf+f;ig.game.screen.y=ig.game.O1257.pos.y-ig.system.O2175+g;ml.Misc.O3431();ig.game.O3957.O1602();ig.game.areaGlobalInteractingId&&ig.game.O4482&&"INDIVIDUALS"==ig.game.O5549&&ig.game.entityManager.O7891(ig.game.areaGlobalInteractingId);ig.game.O7836.transmitNewPlayer();ig.game.O6542=!0;jQuery("body").css("background-color",ig.ua.shouldGetAds?"rgb(80,80,80)":"#000");ig.game.O4679("Removing shroud","Readying view");jQuery("#loadingAnimation").remove();
ig.game.removeShroud();ig.game.O2694=new ml.Timer;ig.game.painter=new Painter(ig.game.coreImages.painterBackground,ig.game.coreImages.painterSpriteSheet);ml.Misc.O6388();ig.game.steamManager&&ig.game.steamManager.O9000();ig.game.portaller.O3701();ig.game.O8622();ig.game.O5975();ig.game.O9663.O1209();ig.game.O7155()}},function(){ig.game.errorManager.O3802("Oops, there were loading issues. (Failed to properly load world.)")})},O7155:function(){ig.ua.mobile&&!ig.ua.isIOsUIWebView&&(window.location&&
"#token"==window.location.hash||sessionStorage.getLoginTokenAfterLoggingIn&&ig.game.isFullAccount)&&(ig.game.isFullAccount?(ig.game.alertDialog.open({text:"please wait...",O5358:!0}),ig.game.O9817.O2734(this).done(function(a){ig.game.alertDialog.close();a='<p>Copy &amp; paste this into the Thingistan app login field <span style="color: red">(don\'t&nbsp;share&nbsp;it)</span>:</p><textarea style="width: 90%; text-transform: none" onclick="this.focus();this.select()">'+(ig.game.strings.O9955(a)+"</textarea>");
ig.game.alertDialog.open({html:a,O5358:!0})}),sessionStorage.removeItem("getLoginTokenAfterLoggingIn")):(sessionStorage.getLoginTokenAfterLoggingIn=!0,ig.game.bottomMenu.O6979(!0)))},O8622:function(){ig.game.areaClosed&&(ig.game.alertDialog.open("SORRY, THIS AREA IS CLOSED FOR TERMS REASONS. \r\rYOU ARE NOW BEING TRANSFERRED TO ELSEWHERE...",!1,null,"",!0,void 0,!0),setTimeout(function(){ig.game.portaller.startExitAreaTeleportingRequest()},4E3))},O5975:function(){ig.game.O4873.O8027==1&&"12345678".split("").includes(ig.game.areaId)&&
localStorage&&"true"!==localStorage.wasInformedAboutLegacyRingInfo&&(localStorage.wasInformedAboutLegacyRingInfo="true",ig.game.alertDialog.open({html:'<p>This is a legacy ring area from <a href="https://manyland.com" target="_blank">Manyland</a>.</p><p>Items are loaded from the <a href="https://offlineland.io" target="_blank">Offlineland.io</a> archive.</p><p>Collecting items is disabled (for copyright reasons).</p><p>For more information see the <a href="https://thingistan.com/discord" target="_blank">Thingistan Discord</a>.</p>'}))},
O5222:function(){ig.game.O9817.O7014(this).done(function(a){a&&a.enabled?ig.game.O3340(a):a&&!a.enabled?ig.game.alertDialog.O3813("Due to server capacity invites are currently paused. Please check back later."):ig.game.O1002.O7063()})},O3340:function(a){var b='<p>Invite friends to Thingistan<br/><span style="color: grey">(please only share with trusted friends)</span>';a.maxUses&&(O2187="grey",a.uses>=a.maxUses&&(O2187="red"),b+='<br/><small><span style="color: '+O2187+'">'+a.uses+"/"+a.maxUses+" uses</span></small>");
b+="</p>";a.code&&(a=window.location.protocol+"//"+ig.game.root+"/invite/"+ig.game.strings.O9955(a.code),b=b+'<div style="align-items: center;justify-content: center;display: flex;"><textarea id="inviteLinkTextArea" style="width: 70%; height: 21px; line-height: 2.2; padding-left: 6px; text-transform: none; border: none" onclick="this.focus();this.select()">'+(a+'</textarea><button id="copyInviteLinkToClipboard" style="width: 88px;font-family: \'Press Start 2P\', arial, sans-serif; text-transform: uppercase;margin-left: 10px;margin-top:19px" class="dialogInlineButton" onclick="ig.game.O3641()">Copy</button></div>'));
ig.game.alertDialog.open({html:b,O3144:!0,O9805:!0,O9267:function(){ig.game.alertDialog.close()}})},O3641:function(){var a=document.getElementById("inviteLinkTextArea");a.select();a.setSelectionRange(0,99999);navigator.clipboard.writeText(a.value);if(a=document.getElementById("copyInviteLinkToClipboard"))a.innerHTML="Copied",a.style.backgroundColor="#008000",a.style.color="#fff",setTimeout(function(){var b=document.getElementById("copyInviteLinkToClipboard");b&&b!==null&&(b.innerHTML="Copy",b.style.backgroundColor=
"#fff",b.style.color="#000")},1E3)},O2838:function(){ig.game.O5948();if(ig.ua.shouldGetAds){var a="position: absolute; display: block; right: 0; top: 0; width: "+ig.ua.adWidth+"px; height: 100%; overflow: hidden;",b="";jQuery("#canvas").on("mouseover",ig.game.O7303);b+='<div style="'+a+'" onmouseover="ig.game.O7107()">\r';var c=jQuery(window).height(),d=17*ig.system.scale;a=ig.ua.adPaddingX;c=ig.ua.adHeight+d>=c?ig.ua.adPaddingX:d;ig.ua.useYollaAds&&(c=15);b+='<div style="position: absolute; right: 0; top: '+
(c+"px; width: "+(ig.ua.adWidth-ig.ua.addPaddingX)+'px">\r');d=!!ig.game.areaAdForDisplay;b=ig.game.isLocal?ig.ua.useYollaAds?b+this.O828(d):b+this.O2359():ig.ua.useYollaAds?b+this.O4273(d):b+this.O5031();b+="\r</div>";if(!ig.ua.useYollaAds){var e=280;10>=c&&(a=190,e=110);b+='<div style="position: absolute; right: '+(a+"px; top: 8px; width: "+e+'px; color: rgb(110,110,110); text-transform: uppercase; text-align: right; line-height: 1.6em; font-family: \'Press Start 2P\', arial, helvetica, sans-serif; font-size: 10px; font-weight: bold; cursor: default;  text-decoration: underline;" onclick="ig.game.showAdInfo()">Ad</div>')}b=
b+"\r</div>"+this.O6769(d);jQuery("body").append(b)}},O6769:function(a){a='<div id="areaAds" style="'+(a?"top: 350px":"")+'">';var b="display: none";ig.game.areaAdForDisplay&&(a+="<p>"+ig.game.O9620()+"</p>",b="display: block");return a+('<p id="areaAdsInfo" style="'+b+'"><a href="javascript:ig.game.adCampaignsDialog.open()">Advertise your area here</a></p></div>')},O9620:function(a,b){var c="";ig.game.areaAdForDisplay&&(a&&(c+='<span class="areaAdDisclaimer">Area ad'+(b?" &nbsp;":"")+"</span>"),
c+='<a href="/'+ig.game.strings.O9955(ig.game.areaAdForDisplay.areaName)+'">'+ig.game.strings.O9955(ig.game.areaAdForDisplay.title)+"</a>");return c},O7107:function(){ig.game.O9160=!0},O7303:function(){ig.game.O9160&&(ig.game.O9160=!1,ig.system.canvas.focus())},O5948:function(){"true"!=localStorage.closeAd||ig.game.hasMinfinity||(localStorage.removeItem("closeAd"),ig.game.O9663.O1493()||-1!==window.location.href.indexOf("/calmtown")||(window.location.href="/calmtown"))},showAdInfo:function(){ig.game.alertDialog&&
!ig.game.alertDialog.isOpen&&(ig.game.sounds.click.play(),ig.game.alertDialog.open({html:'<p>Ads support Thingistan, so thank you!<p>With <span onclick="'+((ig.game.isFullAccount?"ig.game.O9663.openMainDialog()":"ig.game.bottomMenu.O6979()")+';ig.game.sounds.whoosh.play()" class="pseudoLink">Minfinity</span>, you can disable ads.</p>'),O5358:!0}))},O5031:function(){return'<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js">\x3c/script>\r\n\x3c!-- Manyland side banner --\x3e\r\n<ins class="adsbygoogle"\r\n     style="display:inline-block;width:160px;height:600px"\r\n     data-ad-client="ca-pub-4135663670627621"\r\n     data-ad-slot="1326378644"></ins>\r\n<script>\r\n(adsbygoogle = window.adsbygoogle || []).push({});\r\n\x3c/script>\r\n'},
O4273:function(a){var b='\r\n\x3c!-- Yolla banner --\x3e\r\n<div class="ympb_target_delay" data-type="desktop-medrec-template" data-subtype="336x280,300x250"></div>\r\n';a||(b+='<div style="height: 10px"></div>\r\n',b+='<div class="ympb_target_delay" data-type="desktop-medrec-template" data-subtype="336x280,300x250"></div>');return b+"\r\n"},O828:function(a){var b='\r\n<div style="display: inline-block; background-color: rgba(255,255,255,0.2); width: 336px; height: 280px;"></div>\r\n';a||(b+='<div style="height: 10px"></div>\r\n',
b+='<div style="display: inline-block; background-color: rgba(255,255,255,0.2); width: 336px; height: 280px;"></div>\r\n');return b},O2359:function(){return'<div style="display:inline-block; background-color: rgb(130,130,130); width: 160px; height: 600px; border: 1px solid white;"></div>'},O3196:function(){var a=!1;localStorage.someoneLoggedOutWhileBeingSoftbannedDateStamp&&((a=180>=(new Date-Date.parse(localStorage.someoneLoggedOutWhileBeingSoftbannedDateStamp))/1E3/60)||delete localStorage.someoneLoggedOutWhileBeingSoftbannedDateStamp);
return a},O9314:function(){ig.game.O8649=new ig.O8378(this.O9925,[0,0,0]);ig.O8378.lastSlope=99;ig.game.O8649.data=this.O6112.collisionMapData;ig.game.O8649.width=1E10;ig.game.O8649.height=1E10},O8615:function(){var a=new ig.BackgroundMap(this.O9925,[0,0,0],null),b=ig.game.O8159.getImage(ig.game.O8159.gameBackground);b=new ig.BackgroundMap(213,[[1,1],[1,1]],b);b.repeat=!0;b.distance=1.1;ig.game.backgroundMaps[1]=a;ig.game.backgroundMaps[0]=b},O3555:function(){var a=!1;ml.Misc.O7959()||(a=!1);var b=
{blackFont:{indices:[0,3,5,9,15,21,28,34,36,40,44,50,56,59,64,66,71,76,79,83,87,92,96,100,104,109,113,115,118,122,126,130,135,140,144,148,152,156,159,162,167,171,173,177,182,186,192,197,202,206,211,215,219,223,227,233,239,243,247,251,255,259,263,269,273,276,280,284,288,292,295,298,303,307,309,313,318,322,328,333,338,342,347,351,355,359,363,369,375,379,383,387,391,393,397],widthMap:[2,1,3,5,5,6,5,1,3,3,5,5,2,4,1,4,4,2,3,3,4,3,3,3,4,3,1,2,3,3,3,4,4,3,3,3,3,2,2,4,3,1,3,4,3,5,4,4,3,4,3,3,3,3,5,5,3,3,
3,3,3,3,5,3,2,3,3,3,3,2,2,4,3,1,3,4,3,5,4,4,3,4,3,3,3,3,5,5,3,3,3,3,1,3,6]},blackWhiteFont:{indices:[0,5,9,15,23,31,40,48,52,58,64,72,80,85,92,96,102,109,114,120,126,133,139,145,151,158,164,168,173,179,185,191,198,205,213,221,229,237,245,253,261,269,274,281,289,296,305,314,322,330,339,347,355,364,372,381,390,399,408,416,422,428,434,441,447,452,458,464,470,476,481,486,493,499,503,509,516,522,530,537,544,550,557,563,569,575,581,589,597,603,609,615,621,625,631],widthMap:[4,3,5,7,7,8,7,3,5,5,7,7,4,6,
3,5,6,4,5,5,6,5,5,5,6,5,3,4,5,5,5,6,6,7,7,7,7,7,7,7,7,4,6,7,6,8,8,7,7,8,7,7,8,7,8,8,8,8,7,5,5,5,6,5,4,5,5,5,5,4,4,6,5,3,5,6,5,7,6,6,5,6,5,5,5,5,7,7,5,5,5,5,3,5,8]},blackSmallFont:{indices:[0,4,6,10,16,22,29,35,38,42,46,52,56,59,64,66,69,74,77,81,85,90,94,98,102,107,111,113,116,120,125,129,134,140,144,148,151,155,159,163,167,171,173,176,180,183,189,194,198,202,207,211,214,218,222,228,234,238,242,246,250,254,258,264,269,272,276,280,283,287,291,295,299,303,305,308,312,315,321,326,330,334,339,343,346,
350,354,360,366,370,374,378,382,384,388,399],widthMap:[3,1,3,5,5,6,5,2,3,3,5,3,2,4,1,2,4,2,3,3,4,3,3,3,4,3,1,2,3,4,3,4,5,3,3,2,3,3,3,3,3,1,2,3,2,5,4,3,3,4,3,2,3,3,5,5,3,3,3,3,3,3,5,4,2,3,3,2,3,3,3,3,3,1,2,3,2,5,4,3,3,4,3,2,3,3,5,5,3,3,3,3,1,3,6,0]},eleganceFont:{indices:[0,5,9,15,23,31,40,48,52,58,64,72,80,85,92,96,102,109,114,120,126,133,139,145,151,158,164,168,173,179,185,191,198,205,212,219,225,232,238,244,251,258,264,270,277,283,292,300,307,314,322,329,335,342,349,357,366,374,382,389,395,401,
407,414,420,425,432,439,445,452,458,464,471,478,483,488,495,499,508,516,523,530,537,544,550,556,564,570,579,585,592,599,605,609,615],widthMap:[4,3,5,7,7,8,7,3,5,5,7,7,4,6,3,5,6,4,5,5,6,5,5,5,6,5,3,4,5,5,5,6,6,6,6,5,6,5,5,6,6,5,5,6,5,8,7,6,6,7,6,5,6,6,7,8,7,7,6,5,5,5,6,5,4,6,6,5,6,5,5,6,6,4,4,6,3,8,7,6,6,6,6,5,5,7,5,8,5,6,6,5,3,5,8]},wildFont:{indices:[0,5,9,15,23,31,40,48,52,58,64,72,80,85,92,96,102,109,114,120,126,133,139,145,151,158,164,168,173,179,185,191,198,205,214,222,230,238,246,253,261,268,
273,279,286,293,302,310,317,323,332,338,346,352,359,366,376,383,390,397,403,409,415,422,428,433,441,448,454,461,469,476,483,491,497,504,512,517,525,533,540,548,556,563,570,577,584,591,600,608,617,625,631,635,641],widthMap:[4,3,5,7,7,8,7,3,5,5,7,7,4,6,3,5,6,4,5,5,6,5,5,5,6,5,3,4,5,5,5,6,6,8,7,7,7,7,6,7,6,4,5,6,6,8,7,6,5,8,5,7,5,6,6,9,6,6,6,5,5,5,6,5,4,7,6,5,6,7,6,6,7,5,6,7,4,7,7,6,7,7,6,6,6,6,6,8,7,8,7,5,3,5,8]},shapesFont:{indices:[0,5,9,15,23,31,40,48,52,58,64,72,80,85,92,96,102,109,114,120,126,
133,139,145,151,158,164,168,173,179,185,191,198,205,213,220,227,234,241,248,255,263,271,278,285,292,302,311,319,326,335,342,348,356,364,372,382,390,398,405,411,417,423,430,436,441,448,455,462,469,477,484,491,498,502,509,516,520,529,536,544,551,558,565,571,579,587,595,603,610,617,624,630,634,640],widthMap:[4,3,5,7,7,8,7,3,5,5,7,7,4,6,3,5,6,4,5,5,6,5,5,5,6,5,3,4,5,5,5,6,6,7,6,6,6,6,6,6,7,7,6,6,6,9,8,7,6,8,6,5,7,7,7,9,7,7,6,5,5,5,6,5,4,6,6,6,6,7,6,6,6,3,6,6,3,8,6,7,6,6,6,5,7,7,7,7,6,6,6,5,3,5,8]},cuteFont:{indices:[0,
5,9,15,23,31,40,48,52,58,64,72,80,85,92,96,102,109,114,120,126,133,139,145,151,158,164,168,173,179,185,191,198,205,212,219,225,232,238,245,252,259,264,270,277,283,292,300,307,314,322,329,335,342,349,358,367,374,381,388,394,400,406,413,419,424,430,436,441,447,452,458,464,470,474,479,485,490,498,505,511,517,524,530,535,541,547,555,563,569,575,581,587,591,597],widthMap:[4,3,5,7,7,8,7,3,5,5,7,7,4,6,3,5,6,4,5,5,6,5,5,5,6,5,3,4,5,5,5,6,6,6,6,5,6,5,6,6,6,4,5,6,5,8,7,6,6,7,6,5,6,6,8,8,6,6,6,5,5,5,6,5,4,5,
5,4,5,4,5,5,5,3,4,5,4,7,6,5,5,6,5,4,5,5,7,7,5,5,5,5,3,5,8]},actionFont:{indices:[0,5,9,15,23,31,40,48,52,58,64,72,80,85,92,96,102,109,114,120,126,133,139,145,151,158,164,168,173,179,185,191,198,205,213,221,229,237,245,252,260,268,272,280,288,296,304,312,320,328,336,344,351,359,367,375,383,392,400,408,414,420,426,433,439,444,452,459,466,473,481,488,495,502,506,513,520,524,532,539,547,553,559,566,574,580,586,594,602,610,617,624,630,634,640],widthMap:[4,3,5,7,7,8,7,3,5,5,7,7,4,6,3,5,6,4,5,5,6,5,5,5,
6,5,3,4,5,5,5,6,6,7,7,7,7,7,6,7,7,3,7,7,7,7,7,7,7,7,7,6,7,7,7,7,8,7,7,5,5,5,6,5,4,7,6,6,6,7,6,6,6,3,6,6,3,7,6,7,5,5,6,7,5,5,7,7,7,6,6,5,3,5,8]},invertedFont:{indices:[0,5,9,15,23,31,40,48,52,58,64,72,80,85,92,96,102,109,114,120,126,133,139,145,151,158,164,168,173,179,185,191,198,205,213,221,229,237,245,253,261,269,274,281,289,296,305,314,322,330,339,347,355,364,372,381,390,399,408,416,422,428,434,441,447,452,458,464,470,476,481,486,493,499,503,509,516,522,530,537,544,550,557,563,569,575,581,589,597,
603,609,615,621,625,631],widthMap:[4,3,5,7,7,8,7,3,5,5,7,7,4,6,3,5,6,4,5,5,6,5,5,5,6,5,3,4,5,5,5,6,6,7,7,7,7,7,7,7,7,4,6,7,6,8,8,7,7,8,7,7,8,7,8,8,8,8,7,5,5,5,6,5,4,5,5,5,5,4,4,6,5,3,5,6,5,7,6,6,5,6,5,5,5,5,7,7,5,5,5,5,3,5,8]},strictFont:{indices:[0,5,9,15,23,31,40,48,52,58,64,72,80,85,92,96,102,109,114,120,126,133,139,145,151,158,164,168,173,179,185,191,198,205,211,217,223,229,235,241,247,253,259,265,271,277,285,292,298,304,311,317,323,329,335,341,349,355,361,367,373,379,385,392,398,403,409,415,
421,427,433,438,444,450,455,461,467,471,479,486,492,498,505,511,516,522,528,534,542,548,554,560,566,570,576],widthMap:[4,3,5,7,7,8,7,3,5,5,7,7,4,6,3,5,6,4,5,5,6,5,5,5,6,5,3,4,5,5,5,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,6,5,5,6,5,5,5,5,5,7,5,5,5,5,5,5,6,5,4,5,5,5,5,5,4,5,5,4,5,5,3,7,6,5,5,6,5,4,5,5,5,7,5,5,5,5,3,5,8]},faintFont:{indices:[0,5,9,15,23,31,40,48,52,58,64,72,80,85,92,96,102,109,114,120,126,133,139,145,151,158,164,168,173,179,185,191,198,205,213,220,227,235,242,249,257,264,269,276,283,290,299,307,
314,321,329,336,343,350,358,367,376,383,390,398,404,410,6,423,429,434,441,447,453,460,466,472,479,485,489,495,501,507,515,522,528,534,541,547,553,559,566,574,582,588,594,601,607,611,617],widthMap:[4,3,5,7,7,8,7,3,5,5,7,7,4,6,3,5,6,4,5,5,6,5,5,5,6,5,3,4,5,5,5,6,6,7,6,6,7,6,6,7,6,4,6,6,6,8,7,6,6,7,6,6,6,7,8,8,6,6,7,5,5,5,6,5,4,6,5,5,6,5,5,6,5,3,5,5,5,7,6,5,5,6,5,5,5,6,7,7,5,5,6,5,3,5,8]},melodicFont:{indices:[0,5,9,15,23,31,40,48,52,58,64,72,80,85,92,96,102,109,114,120,126,133,139,145,151,158,164,168,
173,179,185,191,198,205,213,221,229,237,245,253,261,269,274,281,289,296,305,313,321,329,337,345,352,359,367,375,384,391,398,405,411,417,423,430,436,441,447,454,460,467,473,479,485,492,496,502,509,515,523,530,537,544,551,558,564,570,576,582,590,596,602,608,614,618,624],widthMap:[4,3,5,7,7,8,7,3,5,5,7,7,4,6,3,5,6,4,5,5,6,5,5,5,6,5,3,4,5,5,5,6,6,7,7,7,7,7,7,7,7,4,6,7,6,8,7,7,7,7,7,6,6,7,7,8,6,6,6,5,5,5,6,5,4,5,6,5,6,5,5,5,6,3,5,6,5,7,6,6,6,6,6,5,5,5,5,7,5,5,5,5,3,5,8]},lowFont:{indices:[0,5,9,15,23,
31,40,48,52,58,64,72,80,85,92,96,102,109,114,120,126,133,139,145,151,158,164,168,173,179,185,191,198,205,213,221,229,237,245,253,261,269,274,281,289,296,305,314,322,330,339,347,355,364,372,381,390,399,408,416,422,428,434,441,447,452,458,464,470,476,482,488,495,501,506,512,519,525,533,540,546,552,559,565,571,577,583,591,599,605,611,617,623,627,633],widthMap:[4,3,5,7,7,8,7,3,5,5,7,7,4,6,3,5,6,4,5,5,6,5,5,5,6,5,3,4,5,5,5,6,6,7,7,7,7,7,7,7,7,4,6,7,6,8,8,7,7,8,7,7,8,7,8,8,8,8,7,5,5,5,6,5,4,5,5,5,5,5,5,
6,5,4,5,6,5,7,6,5,5,6,5,5,5,5,7,7,5,5,5,5,3,5,8]},highFont:{indices:[0,5,9,15,23,31,40,48,52,58,64,72,80,85,92,96,102,109,114,120,126,133,139,145,151,158,164,168,173,179,185,191,198,205,211,217,223,229,234,239,246,252,256,262,268,273,281,288,294,300,307,313,319,325,331,339,347,353,359,365,371,377,383,390,396,401,407,413,419,425,431,437,443,449,453,458,464,468,476,482,488,494,501,507,513,518,524,530,538,544,550,556,562,566,572],widthMap:[4,3,5,7,7,8,7,3,5,5,7,7,4,6,3,5,6,4,5,5,6,5,5,5,6,5,3,4,5,5,
5,6,6,5,5,5,5,4,4,6,5,3,5,5,4,7,6,5,5,6,5,5,5,5,7,7,5,5,5,5,5,5,6,5,4,5,5,5,5,5,5,5,5,3,4,5,3,7,5,5,5,6,5,5,4,5,5,7,5,5,5,5,3,5,8]},smoothFont:{indices:[0,5,9,15,23,31,40,48,52,58,64,72,80,85,92,96,102,109,114,120,126,133,139,145,151,158,164,168,173,179,185,191,198,205,212,218,224,230,236,242,249,255,261,267,273,279,287,294,301,308,316,323,329,335,342,350,358,364,370,376,382,388,394,401,407,412,419,425,431,437,443,449,456,462,466,471,477,481,489,496,504,510,518,524,530,536,542,550,558,564,570,576,
582,586,592],widthMap:[4,3,5,7,7,8,7,3,5,5,7,7,4,6,3,5,6,4,5,5,6,5,5,5,6,5,3,4,5,5,5,6,6,6,5,5,5,5,5,6,5,5,5,5,5,7,6,6,6,7,6,5,5,6,7,7,5,5,5,5,5,5,6,5,4,6,5,5,5,5,5,6,5,3,4,5,3,7,6,6,6,7,5,5,5,5,7,7,5,5,5,5,3,5,8]},casualFont:{indices:[0,5,9,15,23,31,40,48,52,58,64,72,80,85,92,96,102,109,114,120,126,133,139,145,151,158,164,168,173,179,185,191,198,205,212,219,226,233,240,247,254,261,267,274,281,288,296,303,310,317,324,331,338,346,353,361,369,377,385,392,398,404,410,417,423,428,435,442,449,456,463,
469,476,483,487,492,499,504,512,519,526,533,540,547,554,561,568,576,584,591,598,605,611,615,621],widthMap:[4,3,5,7,7,8,7,3,5,5,7,7,4,6,3,5,6,4,5,5,6,5,5,5,6,5,3,4,5,5,5,6,6,6,6,6,6,6,6,6,6,5,6,6,6,7,6,6,6,6,6,6,7,6,7,7,7,7,6,5,5,5,6,5,4,6,6,6,6,6,5,6,6,3,4,6,4,7,6,6,6,6,6,6,6,6,7,7,6,6,6,5,3,5,8]},wideFont:{indices:[0,5,9,15,23,31,40,48,52,58,64,72,80,85,92,96,102,109,114,120,126,133,139,145,151,158,164,168,173,179,185,191,198,205,213,221,228,236,243,250,258,266,272,279,286,293,302,311,319,327,336,
344,351,359,366,374,384,392,400,408,414,420,426,433,439,444,451,458,465,472,479,486,492,499,503,510,517,521,530,537,545,552,560,567,574,580,587,595,604,611,618,625,631,635,641],widthMap:[4,3,5,7,7,8,7,3,5,5,7,7,4,6,3,5,6,4,5,5,6,5,5,5,6,5,3,4,5,5,5,6,6,7,7,6,7,6,6,7,7,5,6,6,6,8,8,7,7,8,7,6,7,6,7,9,7,7,7,5,5,5,6,5,4,6,6,6,6,6,6,5,6,3,6,6,3,8,6,7,6,7,6,6,5,6,7,8,6,6,6,5,3,5,8]},bulkyFont:{indices:[0,5,9,15,23,31,40,48,52,58,64,72,80,85,92,96,102,109,114,120,126,133,139,145,151,158,164,168,173,179,185,
191,198,205,213,220,227,234,240,246,254,261,266,272,279,286,295,303,311,318,327,334,341,348,355,364,375,382,389,396,402,408,414,421,427,432,439,446,453,460,467,473,480,487,492,498,505,510,519,526,533,540,548,555,561,568,575,582,591,598,605,612,618,622,628],widthMap:[4,3,5,7,7,8,7,3,5,5,7,7,4,6,3,5,6,4,5,5,6,5,5,5,6,5,3,4,5,5,5,6,6,7,6,6,6,5,5,7,6,4,5,6,6,8,7,7,6,8,6,6,6,6,8,10,6,6,6,5,5,5,6,5,4,6,6,6,6,6,5,6,6,4,5,6,4,8,6,6,6,7,6,5,6,6,6,8,6,6,6,5,3,5,8]}};b.whiteFont=b.blackFont;b.whiteSmallFont=
b.blackSmallFont;for(var c in ig.game.availableFonts){var d=ig.game.availableFonts[c],e=c+"Font",f=ig.game.O8159.getImage(ig.game.O8159[e]);ig.game[e]=new ig.Font(null,null,null,f.data);d.O3540&&(ig.game[e].O3540=d.O3540);a?ig.game[e].O9107(f.data):(ig.game[e].indices=b[e].indices,ig.game[e].widthMap=b[e].widthMap);ig.game[e].height=ig.game[e].data.height/ig.system.scale}a=new Colors;ig.game.fontColors=a.fontColors;ig.game.getFontShader=function(g,h){return(g=ig.game[g+"Font"])?g.withColor(h):null}},
O8980:function(){var a=[["LEFT_ARROW","l_arr"],["RIGHT_ARROW","r_arr"],["UP_ARROW","u_arr"],["DOWN_ARROW","d_arr"],["MOUSE1","click"],["MOUSE2","rightclick"],["MWHEEL_UP","wheelup"],["MWHEEL_DOWN","wheeldown"],["ESC","esc"],["SPACE","space"],["ENTER","enter"],["COMMA","comma"],["PERIOD","period"],["MINUS","minus"],["EQUAL","equal"],["FORWARDSLASH","forwardslash"],["SEMICOLON","semicolon"],["APOSTROPHE","apostrophe"],["SINGLE_QUOTE","single_quote"],["QUESTION","question"],["BACKWARDSLASH","backwardslash"],
["SQUAREBRACKET_OPEN","squarebracket_open"],["SQUAREBRACKET_CLOSE","squarebracket_close"],["BACKSPACE","backspace"],["SHIFT","shift"],["MOUSE_MIDDLE","middleclick"],["BACKQUOTE","backquote"],["BACKSLASH","backslash"],["A","a"],["B","b"],["C","c"],["D","d"],["E","e"],["F","f"],["G","g"],["H","h"],["I","i"],["J","j"],["K","k"],["L","l"],["M","m"],["N","n"],["O","o"],["P","p"],["Q","q"],["R","r"],["S","s"],["T","t"],["U","u"],["V","v"],["W","w"],["X","x"],["Y","y"],["Z","z"],["_1","one"],["_2","two"],
["_3","three"],["_4","four"],["_5","five"],["_6","six"],["_7","seven"],["_8","eight"],["_9","nine"],["_0","zero"],["CTRL","ctrl"],["ALT","alt"]];ig.game.isFullAccount&&(a=a.concat([["F1","f1"],["F2","f2"],["F4","f4"],["F9","f9"],["F10","f10"]]));ig.ua.steam&&(a=a.concat([["F5","f5"],["F11","f11"],["F12","f12"],["ALT","alt"],["TAB","tab"]]));ig.game.isEditorHere&&(a=a.concat([["F3","f3"]]));for(var b=0;b<a.length;b++)ig.input.bind(ig.KEY[a[b][0]],a[b][1])},update:function(){var a=Date.now();this.O6542&&
(this.O4086.update(),ml.Misc.O4966(),this.O4774.update(),this.O7712=this.O6112.O1858(),this.virtualJoystick.update(),this.brainManager.update(),this.O7456.update(),this.O1896.update(),this.instrumentDialog.update(),ml.Misc.O6107(),this.panelSet.update(),this.itemContextMenu.update(),this.playerDialog.update(),this.myLocationDialog.update(),this.areaDialog.update(),this.actioninfo.update(),this.alertDialog.update(),this.userScriptEditor.update(),this.areaGenerator.update(),this.friendsDialog.update(),
this.statsDialog.update(),this.O3957.update(),this.cloneHistoryDialog.update(),this.O4437.update(),this.holderDialog.update(),this.mediaDialog.update(),this.writableDialog.update(),this.areaSearchDialog.update(),this.adCampaignsDialog.update(),this.albumDialog.update(),this.customSnapshotDialog.update(),this.readableDialog.update(),this.musicRecorder.update(),this.viewableDialog.update(),this.O2116.update(),this.randomAreasDialog.update(),this.multithing.update(),this.boostDialog.update(),this.O7606.update(),
this.bottomMenu.update(),this.O5058.update(),this.deletionMarkerDialog.update(),this.O7272(),this.parent(),this.O4517&&this.O4517.update(),this.O4709&&(this.O9286(),this.O4709=!1),this.portaller.update(),this.camera.update(),this.painter.O8602(),ml.Misc.O2425(),ml.Misc.O7268(),ml.Misc.O8290(),this.screenPlusMargin.x1=ig.game.screen.x-this.O6341,this.screenPlusMargin.x2=ig.game.screen.x+ig.system.width+this.O6341,this.screenPlusMargin.y1=ig.game.screen.y-this.O6341,this.screenPlusMargin.y2=ig.game.screen.y+
ig.system.height+this.O6341,this.O2453.update(),this.userMapDialog.update(),this.virtualKeyboard.update(),this.O6921.update(),!ig.game.O1257.isDead&&this.O4873.O7576(this.O1257)?!this.sectorChangeHandled&&(this.sectorChangeHandled=!0,this.O6112.O1411(),setTimeout(function(){ig.game.O7836.O913()},500),setTimeout(function(){ig.game.O8100.O7528(ig.game.O4873.O8027,ig.game.O4873.currentArea,ig.game.O4873.O1577.x,ig.game.O4873.O1577.y)},100),setTimeout(function(){ig.game.O7836.O4810()},0),setTimeout(function(){ig.game.entityManager.O5865()},
1E3),setTimeout(function(){ig.game.O4261.O8460()},3E3)):this.sectorChangeHandled=!1,this.O8894.update(),ml.Misc.O9329(),ml.Misc.O5894(),this.O6011.O9718(),ig.game.O1257.isDead||this.healthBar.update(),ml.Misc.O3072(),ml.Misc.O8846(),this.O2141.update(),this.debug.update(),ig.game.O1257&&void 0!=ig.game.O2492&&ig.game.O2492<ig.game.O1257.rank&&(ig.game.O1257.rank=1,ig.game.O9817.O3796()),ig.game.brainManager.O9967(),ig.game.O4149&&(ig.game.O4149=!1,ig.game.portaller.O7749(ig.game.O3748)));this.O8246=
Date.now()-a;this.O9590=[]},draw:function(){this.avoidDrawing||(this.O6542&&(this._rscreen.x=Math.round(this.screen.x*ig.system.scale)/ig.system.scale,this._rscreen.y=Math.round(this.screen.y*ig.system.scale)/ig.system.scale,this.backgroundMaps[0].O6515(this.screen.x,this.screen.y),this.backgroundMaps[0].draw(),this.O5378(this.O5119.background),ig.system.context.globalAlpha=1,this.O8894.draw(),this.O5378(this.O5119.O5983),this.O5378(this.O5119.farBack),this.O5378(this.O5119.environment),this.O7606.O2793(),
this.O5378(this.O5119.O9824),this.backgroundMaps[1].O6515(this.screen.x,this.screen.y),this.backgroundMaps[1].draw(),this.O5378(this.O5119.betweenDefaultAndPlayer),this.O5378(this.O5119.light),this.O5378(this.O5119.default),this.O3210(this.O5119.O2259),this.O7606.O5159(),this.O5378(this.O5119.player),this.O7606.draw(),this.O4915(),ig.game.backgroundMaps[1].O5025(),this.O3527(),this.O5378(this.O5119.foreground),!ig.game.debug.O8357||ig.game.debug.O4147||ig.game.debug.O4260||this.O4873.O7290(),this.O3210(this.O5119.decoEffects),
!ig.game.isFullAccount||!ig.game.isEditor&&!ig.game.O1168||ig.game.O5058.isSpeaking||!ig.game.O2481||ig.game.O1257&&(ig.game.O1257.O2868()||ig.game.O1257.O4292())||ig.game.O3199||ig.game.O4774.O9706||ig.game.O1795||ig.game.customSnapshotDialog&&ig.game.customSnapshotDialog.isOpen||ig.game.holderDialog&&ig.game.holderDialog.O1176()||ig.game.multithing&&ig.game.multithing.isOpen||ig.game.boostDialog&&ig.game.boostDialog.O1176()||ig.game.O7606&&ig.game.O7606.O4673()||ig.game.backgroundMaps[1].O5893(),
this.O9831(),this.viewableDialog.draw(),this.O8894.O4481(),this.O7606.O3103(),this.multithing.draw(),this.holderDialog.draw(),this.drawPlayerSpeech(),this.O9085(),this.customSnapshotDialog.draw(),ml.Misc.O6718(),this.O1682?this.O1682=!1:this.drawUI(),this.debug.draw(),this.O5378(this.O5119.ui),this.O6921.draw(),ml.Misc.O7695()),this.O8894&&this.O8894.O7693())},O7272:function(){var a=ig.input.state("ctrl");!a||!ig.input.pressed("v")||ig.game.painter.isRunning||ig.game.userScriptEditor&&ig.game.userScriptEditor.isOpen||
ig.game.writableDialog&&ig.game.writableDialog.isOpen?a&&ig.input.pressed("one")&&!ig.game.O1795&&ig.game.areaList?ig.game.areaList.O1299():a&&ig.input.pressed("two")&&!ig.game.O1795&&ig.game.areaList?ig.game.areaList.O4016():a&&ig.input.pressed("m")?ig.game.settings.O9584(!0):ig.ua.steam&&ig.input.pressed("f5")?window.location.reload():ig.ua.steam&&ig.input.state("alt")&&ig.input.pressed("f4")?ig.game.steamManager.closeWindow():ig.ua.steam&&ig.input.pressed("f11")?ig.game.settings.toggleFullscreen():
ig.ua.steam&&a&&ig.input.pressed("f12")?ig.game.steamManager.openDevTools():ig.game.isFullAccount&&a&&ig.input.pressed("h")?ig.game.O1257.O7709()||0!=ig.game.O1257.vel.x||0!=ig.game.O1257.vel.y||(ig.game.holderDialog&&ig.game.holderDialog.isOpen?ig.game.holderDialog.close():ig.game.O1329.O8858()):ig.game.isFullAccount&&a&&ig.input.pressed("y")&&ig.game.settings.shortcutWritableId?ig.game.writableDialog&&ig.game.writableDialog.isOpen?ig.game.writableDialog.close():(ig.game.writableDialog.O557(ig.game.settings.shortcutWritableId,
!0),ig.game.sounds.shortWhoosh.play()):ig.game.isFullAccount&&a&&ig.input.pressed("l")?ig.game.toggleWearableShortcutAttach():ig.game.isEditorHere&&a&&ig.input.pressed("z")?this.O2636()||ig.game.writableDialog&&ig.game.writableDialog.isOpen||ig.game.readableDialog&&ig.game.readableDialog.isOpen||(ig.input.state("shift")?ig.game.O6112.redo():ig.game.O6112.undo()):a&&ig.input.pressed("q")&&ig.game.O1276&&ig.game.O1189.register(ig.game.O1189.types.TELEPORTED_HOME,function(){ig.game.portaller.O2121(ig.game.O1276)}):
ml.Misc.O8763()},toggleWearableShortcutAttach:function(){var a=ig.game.settings.shortcutWearableId;a&&ig.game.O4261.getItem_P(a,"toggle_wearable_shortcut_attach").done(function(b){b&&b.imagesBeingGenerated.done(function(){ig.game.attachmentManager.O1158(b)})})},O9286:function(){var a=this.entities.length;this.O5119={background:[],O5983:[],farBack:[],environment:[],O9824:[],"default":[],light:[],betweenDefaultAndPlayer:[],player:[],O7367:[],foreground:[],O8780:[],O9986:[],liquid:[],O2259:[],decoEffects:[],
ui:[]};for(var b=0;b<a;++b){var c=this.entities[b];c.O9367?this.O5119.ui.push(c):c.O4220?this.O5119.light.push(c):c.backgroundEntity?ig.game.O7456.O5687&&c instanceof EntityBackgroundBlock||this.O5119.background.push(c):c.isBehind?this.O5119.environment.push(c):c.O6057?this.O5119.O9824.push(c):c.O2601?this.O5119.O5983.push(c):c.O6475?ig.game.O7456.O5687||this.O5119.environment.push(c):c.O5582?(this.O5119.default.push(c),this.O5119.O8780.push(c)):c.isLiquid?(this.O5119.default.push(c),this.O5119.liquid.push(c)):
c.betweenDefaultAndPlayer?this.O5119.betweenDefaultAndPlayer.push(c):c.O7367?this.O5119.O7367.push(c):c instanceof EntityFarback?this.O5119.farBack.push(c):c instanceof EntityPlayer?this.O5119.player.push(c):c.O7422?this.O5119.foreground.push(c):c.uiEntity?this.O5119.ui.push(c):c.decorative?c.O8582?this.O5119.O2259.push(c):this.O5119.decoEffects.push(c):c.O3407?(this.O5119.environment.push(c),this.O5119.default.push(c),this.O5119.foreground.push(c)):this.O5119.default.push(c)}2<=this.O5119.farBack.length&&
this.O5119.farBack.sort(ig.game.farBackManager.O1442)},O5378:function(a){if(a)for(var b=0,c=a.length;b<c;b++)a[b].draw()},O3527:function(){if(this.O5119.O8780)for(var a=0;a<this.O5119.O8780.length;++a)this.O5119.O8780[a].O4481()},O3210:function(a){if(a)for(var b=0;b<a.length&&b<=ig.game.O9591;++b)a[b].draw(!0)},drawPlayerSpeech:function(){if(this.O5119.player)for(var a=0;a<this.O5119.player.length;++a)this.O5119.player[a].O2848()},O9831:function(){if(this.O5119.player)for(var a=0;a<this.O5119.player.length;++a)this.O5119.player[a].O4788()},
O9085:function(){if(this.O5119.default)for(var a=0;a<this.O5119.default.length;++a)this.O5119.default[a].hasSpeech&&this.O5119.default[a].O2848();if(this.O5119.betweenDefaultAndPlayer)for(a=0;a<this.O5119.betweenDefaultAndPlayer.length;++a)this.O5119.betweenDefaultAndPlayer[a].hasSpeech&&this.O5119.betweenDefaultAndPlayer[a].O2848()},O4915:function(){if(this.O5119.liquid)for(var a=0;a<this.O5119.liquid.length;++a)this.O5119.liquid[a].draw(!0)},O3265:function(){},O4403:function(){},drawUI:function(){ig.game.bottomMenu&&
ig.game.bottomMenu.O7426();this.healthBar.draw();this.panelSet.draw();this.actioninfo.draw();this.playerDialog.draw();this.myLocationDialog.draw();this.instrumentDialog.draw();this.musicRecorder.draw();this.virtualJoystick.draw();this.virtualKeyboard.draw();this.O3957.draw();this.cloneHistoryDialog.draw();this.O4437.draw();this.itemContextMenu.draw();this.deletionMarkerDialog.draw();this.O2453.draw();this.mediaDialog.draw();this.O2116.draw();this.O4517&&this.O4517.O2848();this.userMapDialog.draw();
this.bottomMenu.draw();this.randomAreasDialog.draw();this.painter.draw();this.boostDialog.draw();this.areaDialog.draw();this.O9968.draw()},O9335:function(){return ig.input.state("shift")&&ig.game.O1257&&ig.game.O1257.attachments&&(ig.game.O1257.attachments.h||ig.game.O1257.attachments.w||ig.game.O1257.attachments.wp&&ig.game.playerDialog.O3191==ig.game.playerDialog.dialogStates.ATTACHMENTS)&&!ig.input.O7946},O9170:function(){return this.O1556()?ig.game.brainManager.control.up&&!ig.game.brainManager.controlPrevious.up:
(ig.input.pressed("w")&&!ig.game.O5058.O7221||ig.input.pressed("u_arr")||ig.game.virtualJoystick.input.up&&!ig.game.virtualJoystick.inputPrevious.up||ig.game.brainManager.control.up&&!ig.game.brainManager.controlPrevious.up)&&!this.O9335()},O4146:function(){return this.O1556()?ig.game.brainManager.control.down&&!ig.game.brainManager.controlPrevious.down:(ig.input.pressed("s")&&!ig.game.O5058.O7221||ig.input.pressed("d_arr")||ig.game.virtualJoystick.input.down&&!ig.game.virtualJoystick.inputPrevious.down||
ig.game.brainManager.control.down&&!ig.game.brainManager.controlPrevious.down)&&!this.O9335()},O9971:function(){return this.O1556()?ig.game.brainManager.control.left&&!ig.game.brainManager.controlPrevious.left:(ig.input.pressed("a")&&!ig.game.O5058.O7221||ig.input.pressed("l_arr")||ig.game.virtualJoystick.input.left&&!ig.game.virtualJoystick.inputPrevious.left||ig.game.brainManager.control.left&&!ig.game.brainManager.controlPrevious.left)&&!this.O9335()},O8339:function(){return this.O1556()?ig.game.brainManager.control.right&&
!ig.game.brainManager.controlPrevious.right:(ig.input.pressed("d")&&!ig.game.O5058.O7221||ig.input.pressed("r_arr")||ig.game.virtualJoystick.input.right&&!ig.game.virtualJoystick.inputPrevious.right||ig.game.brainManager.control.right&&!ig.game.brainManager.controlPrevious.right)&&!this.O9335()},O7993:function(){return this.O1556()?ig.game.brainManager.control.action&&!ig.game.brainManager.controlPrevious.action:!!(ig.game.virtualJoystick&&ig.game.virtualJoystick.O9842||ig.game.brainManager.control.action&&
!ig.game.brainManager.controlPrevious.action||ig.input.pressed("space")&&!ig.game.O5058.O9424())},O2438:function(){return!!(this.O9170()||this.O4146()||this.O9971()||this.O8339()||this.O7993())&&!this.O9335()},O3919:function(){return this.O1556()?ig.game.brainManager.control.up:(ig.input.state("w")&&!ig.game.O5058.O7221||ig.input.state("u_arr")||ig.game.virtualJoystick.input.up||ig.game.brainManager.control.up)&&!this.O9335()},O2177:function(){return this.O1556()?ig.game.brainManager.control.down:
(ig.input.state("s")&&!ig.game.O5058.O7221||ig.input.state("d_arr")||ig.game.virtualJoystick.input.down||ig.game.brainManager.control.down)&&!this.O9335()},O1347:function(){return this.O1556()?ig.game.brainManager.control.left:(ig.input.state("a")&&!ig.game.O5058.O7221||ig.input.state("l_arr")||ig.game.virtualJoystick.input.left||ig.game.brainManager.control.left)&&!this.O9335()},O5798:function(){return this.O1556()?ig.game.brainManager.control.right:(ig.input.state("d")&&!ig.game.O5058.O7221||ig.input.state("r_arr")||
ig.game.virtualJoystick.input.right||ig.game.brainManager.control.right)&&!this.O9335()},O2571:function(){return this.O3919()||this.O2177()||this.O1347()||this.O5798()},O9072:function(){return ig.input.released("w")&&!ig.game.O5058.O7221||ig.input.released("u_arr")||ig.ua.mobile&&ig.game.virtualJoystick.inputPrevious.up&&!ig.game.virtualJoystick.input.up||ig.game.brainManager.control.upOnce||ig.game.brainManager.controlPrevious.up&&!ig.game.brainManager.control.up},O5132:function(){return ig.input.released("s")&&
!ig.game.O5058.O7221||ig.input.released("d_arr")||ig.ua.mobile&&ig.game.virtualJoystick.inputPrevious.down&&!ig.game.virtualJoystick.input.down||ig.game.brainManager.control.downOnce||ig.game.brainManager.controlPrevious.down&&!ig.game.brainManager.control.down},O9763:function(){return ig.input.released("a")&&!ig.game.O5058.O7221||ig.input.released("l_arr")||ig.ua.mobile&&ig.game.virtualJoystick.inputPrevious.left&&!ig.game.virtualJoystick.input.left||ig.game.brainManager.control.leftOnce||ig.game.brainManager.controlPrevious.left&&
!ig.game.brainManager.control.left},O7454:function(){return ig.input.released("d")&&!ig.game.O5058.O7221||ig.input.released("r_arr")||ig.ua.mobile&&ig.game.virtualJoystick.inputPrevious.right&&!ig.game.virtualJoystick.input.right||ig.game.brainManager.control.rightOnce||ig.game.brainManager.controlPrevious.right&&!ig.game.brainManager.control.right},O1556:function(){return ig.game.O1257&&ig.game.O1257.attachments.br&&ig.game.O1257.attachments.br.attributes&&ig.game.O1257.attachments.br.attributes.suppressControl},
removeShroud:function(){ig.game.settings.O3019();ig.game.O8894.fadeOutShroud(function(){ig.game.O7456.launchFirstMeasureNowThatShroudIsRemoved()})},chance:function(a){return Math.random()<=a/100},O4293:function(a,b){return parseInt(Math.floor((b+1-a)*Math.random()+a),10)},O2974:function(a,b,c,d,e){ig.game.playerDialog&&ig.game.playerDialog.isOpen&&ig.game.playerDialog.close();ig.game.alertDialog&&ig.game.alertDialog.isOpen&&ig.game.alertDialog.close();ig.game.friendsDialog&&ig.game.friendsDialog.isOpen&&
!e&&ig.game.friendsDialog.close();ig.game.myLocationDialog&&ig.game.myLocationDialog.close();ig.game.viewableDialog&&ig.game.viewableDialog.close();ig.game.itemContextMenu&&ig.game.itemContextMenu.close();ig.game.deletionMarkerDialog&&ig.game.deletionMarkerDialog.close();ig.game.bottomMenu&&ig.game.bottomMenu.O2186();ig.game.areaSearchDialog&&ig.game.areaSearchDialog.close();ig.game.adCampaignsDialog&&ig.game.adCampaignsDialog.close();ig.game.userMapDialog&&!b&&ig.game.userMapDialog.close();ig.game.painter&&
ig.game.O1795&&!d&&ig.game.painter.close();ig.game.O3957&&!a&&ig.game.O3957.close();ig.game.holderDialog&&!c&&ig.game.holderDialog.close();ig.game.albumDialog&&ig.game.albumDialog.isOpen&&ig.game.albumDialog.close();ig.game.O3186&&ig.game.O3186.O7610()},O2636:function(a){return ig.game.playerDialog&&ig.game.playerDialog.isOpen||ig.game.myLocationDialog&&ig.game.myLocationDialog.isOpen||ig.game.areaDialog&&ig.game.areaDialog.isOpen||ig.game.bottomMenu&&ig.game.bottomMenu.subMenus&&ig.game.bottomMenu.subMenus[0]&&
ig.game.bottomMenu.subMenus[0].O2751||ig.game.alertDialog&&ig.game.alertDialog.isOpen||ig.game.painter&&ig.game.painter.isRunning||ig.game.friendsDialog&&ig.game.friendsDialog.isOpen||ig.game.boostDialog&&ig.game.boostDialog.isOpen||ig.game.multithing&&ig.game.multithing.isOpen&&!a||ig.game.bottomMenu&&ig.game.bottomMenu.subMenus[0]&&ig.game.bottomMenu.subMenus[0].isOpen},O3976:function(){jQuery(".domElement").remove()},O1895:function(){if(!(ig.game.userScriptEditor&&ig.game.userScriptEditor.isOpen||
!this.O7965||ig.ua.mobile||ig.game.O1795||this.O2636())&&0==jQuery("#videoIframe").length){if(ig.ua.firefox&&ig.ua.originalWindowSize){var a=ig.ua.originalWindowSize,b=jQuery(window).width(),c=jQuery(window).height();if(150>=Math.abs(a.x-b)+Math.abs(a.y-c))return}ig.game.O6550=.9;window.location.reload()}this.O7965||(ig.system.resize(window.innerWidth/ig.system.scale,Math.ceil(window.innerHeight/ig.system.scale),ig.system.scale),ig.game.painter&&ig.game.painter.O8351(),ig.game&&ig.game.camera&&ig.game.camera.setOffset&&
ig.game.camera.setOffset(),ig.game&&ig.game.bottomMenu&&ig.game.bottomMenu.init&&ig.game.bottomMenu.init(),ig.game&&ig.game.panelSet&&ig.game.panelSet.init&&ig.game.panelSet.init())},O3999:function(a){!a||ig.game.O1257.rank>=this.O3774||ml.Misc.O7959()||(a=!1);ig.game.debug.O8357=!ig.game.debug.O8357;ig.game.debug.O8913=ig.game.debug.O8357&&a;a&&(ig.game.debug.O8357?(a="Current WS: "+ig.game.O7836.O7906().url+"\r",a+="P:"+ig.game.O4873.O8027+", A:"+ig.game.O4873.currentArea+"\r",a+="IC size:"+ig.game.O4261.O3797()+
"\r",a+="PlayerId: "+ig.game.O1257.O2970+"\r",a+="Is core: "+(ig.game.O4223?"true":"false")+"\r",a+="Is created area: "+(ig.game.O4482?"true":"false")+"\r",a=ig.game.areaCenterLocation?a+("Area center loc: "+ig.game.areaCenterLocation.x+","+ig.game.areaCenterLocation.y+"\r"):a+"Area center loc: none\r",ig.game.alertDialog.open("Debug mode and prototype features on now.\r"+a),window.console=window.consoleref):(ig.game.debug.values={},ig.game.O3309()))},O3309:function(){window.console={};window.console.log=
function(){};window.console.warn=function(){};window.console.error=function(){};window.console.time=function(){};window.console.timeEnd=function(){};window.console.assert=function(){};window.console.clear=function(){}},O8577:function(){ig.system.canvas.focus();ig.input.actions.ctrl=null},O4507:function(a){if(void 0==a||null==a||"object"!=typeof a)return a;if(a instanceof Date){var b=new Date;b.setTime(a.getTime());return b}if(a instanceof Array||Array.isArray(a)){b=[];for(var c=0,d=a.length;c<d;c++)b[c]=
this.O4507(a[c]);return b}if(""!=a&&!(a instanceof String)){b={};for(c in a)a.hasOwnProperty(c)&&(b[c]=this.O4507(a[c]));return b}},O1886:function(a){var b="";ig.game.O4873&&(b=ig.game.O4873.O8292()?"inner":ig.game.O4223?"area "+ig.game.O4873.currentArea:a?ig.game.O9720:ig.game.areaName);if(null===b||void 0===b)b="";return b},mmmnt:function(a){ig.game.O9817.mnt_P(a).done(function(b){console.log(b)}).fail(function(b,c,d){console.log(c+": "+d)})},addStat:function(a,b,c,d){ig.game.statsDialog&&ig.game.statsDialog.isOpen&&
ig.game.statsDialog.addStat(a,b,c,d)},O4679:function(a,b){this.O9002=Date.now();ig.game.lastStatusMessage=a;jQuery("#loadingMessage").html(b+"...")},deathTypes:{FALL:"fl",DEADLY:"dl",DROWN:"dr",FOCUS:"fc",POISON:"ps"}});MLand.start=function(){if(window.WebSocket){console.log("%c Stop!","font-size:50px; font-weight:bold; color:red; -webkit-text-stroke:1px black;");console.log('%c This is a browser feature intended for developers. If someone told you to copy-paste something here to enable an Thingistan feature or "hack" someone\'s account, it is a scam and will give them access to your Thingistan account.',
"font-family:helvetica; font-size:20px;");var a=964,b=461,c=285,d=jQuery(window).width(),e=jQuery(window).height();ig.ua.originalWindowSize={x:d,y:e};ig.ua.shouldGetAds&&(d-=ig.ua.adWidth);e>=d-100&&(a=464);var f=3,g=!ig.ua.mobile&&localStorage&&"true"==localStorage.extraZoom;ig.ua.steam&&640>=d&&480>=e?(f=2,b=d/f,c=e/f,g=!1):ig.ua.mobile?(f=3,ig.ua.phone&&(f=2),b=d/f,c=e/f):(600>=e?f=1:790>=e&&(f=2),1==f?(b=Math.min(d,684),c=Math.min(e,646)):(b=Math.max(Math.min(d/f,684),a/f),c=Math.max(Math.min(e/
f,646),564/f)));if(g||ig.ua.isSteamBigPictureMode)f+=1,b=d/f,c=e/f;b*f>d&&(b=Math.floor(d/f));jQuery("#canvas").tabIndex=0;ig.ua.shouldGetAds&&(jQuery("#canvas").css("position","absolute"),jQuery("#canvas").css("left","0"));ig.main("#canvas",MLand,60,b,c,f,Loader)}else alert("Oops, your browser does not support websockets")}});
